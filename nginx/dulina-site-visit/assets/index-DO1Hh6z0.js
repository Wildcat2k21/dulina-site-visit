function bM(s,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in s)){const i=Object.getOwnPropertyDescriptor(o,a);i&&Object.defineProperty(s,a,i.get?i:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function r1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function vM(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var t=s.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(s).forEach(function(o){var a=Object.getOwnPropertyDescriptor(s,o);Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:function(){return s[o]}})}),n}var Nb={exports:{}},Dd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function xM(){if(G_)return Dd;G_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,a,i){var p=null;if(i!==void 0&&(p=""+i),a.key!==void 0&&(p=""+a.key),"key"in a){i={};for(var r in a)r!=="key"&&(i[r]=a[r])}else i=a;return a=i.ref,{$$typeof:s,type:o,key:p,ref:a!==void 0?a:null,props:i}}return Dd.Fragment=t,Dd.jsx=n,Dd.jsxs=n,Dd}var W_;function wM(){return W_||(W_=1,Nb.exports=xM()),Nb.exports}var Ke=wM(),Db={exports:{}},Md={},Mb={exports:{}},Ob={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function SM(){return H_||(H_=1,function(s){function t(F,G){var W=F.length;F.push(G);e:for(;0<W;){var L=W-1>>>1,V=F[L];if(0<a(V,G))F[L]=G,F[W]=V,W=L;else break e}}function n(F){return F.length===0?null:F[0]}function o(F){if(F.length===0)return null;var G=F[0],W=F.pop();if(W!==G){F[0]=W;e:for(var L=0,V=F.length,Y=V>>>1;L<Y;){var Z=2*(L+1)-1,J=F[Z],ne=Z+1,se=F[ne];if(0>a(J,W))ne<V&&0>a(se,J)?(F[L]=se,F[ne]=W,L=ne):(F[L]=J,F[Z]=W,L=Z);else if(ne<V&&0>a(se,W))F[L]=se,F[ne]=W,L=ne;else break e}}return G}function a(F,G){var W=F.sortIndex-G.sortIndex;return W!==0?W:F.id-G.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var p=Date,r=p.now();s.unstable_now=function(){return p.now()-r}}var h=[],f=[],u=1,l=null,d=3,x=!1,S=!1,m=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function _(F){for(var G=n(f);G!==null;){if(G.callback===null)o(f);else if(G.startTime<=F)o(f),G.sortIndex=G.expirationTime,t(h,G);else break;G=n(f)}}function C(F){if(m=!1,_(F),!S)if(n(h)!==null)S=!0,k||(k=!0,D());else{var G=n(f);G!==null&&B(C,G.startTime-F)}}var k=!1,E=-1,j=5,A=-1;function O(){return y?!0:!(s.unstable_now()-A<j)}function N(){if(y=!1,k){var F=s.unstable_now();A=F;var G=!0;try{e:{S=!1,m&&(m=!1,g(E),E=-1),x=!0;var W=d;try{t:{for(_(F),l=n(h);l!==null&&!(l.expirationTime>F&&O());){var L=l.callback;if(typeof L=="function"){l.callback=null,d=l.priorityLevel;var V=L(l.expirationTime<=F);if(F=s.unstable_now(),typeof V=="function"){l.callback=V,_(F),G=!0;break t}l===n(h)&&o(h),_(F)}else o(h);l=n(h)}if(l!==null)G=!0;else{var Y=n(f);Y!==null&&B(C,Y.startTime-F),G=!1}}break e}finally{l=null,d=W,x=!1}G=void 0}}finally{G?D():k=!1}}}var D;if(typeof w=="function")D=function(){w(N)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,$=z.port2;z.port1.onmessage=N,D=function(){$.postMessage(null)}}else D=function(){b(N,0)};function B(F,G){E=b(function(){F(s.unstable_now())},G)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return d},s.unstable_next=function(F){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var W=d;d=G;try{return F()}finally{d=W}},s.unstable_requestPaint=function(){y=!0},s.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=d;d=F;try{return G()}finally{d=W}},s.unstable_scheduleCallback=function(F,G,W){var L=s.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,F){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=W+V,F={id:u++,callback:G,priorityLevel:F,startTime:W,expirationTime:V,sortIndex:-1},W>L?(F.sortIndex=W,t(f,F),n(h)===null&&F===n(f)&&(m?(g(E),E=-1):m=!0,B(C,W-L))):(F.sortIndex=V,t(h,F),S||x||(S=!0,k||(k=!0,D()))),F},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(F){var G=d;return function(){var W=d;d=G;try{return F.apply(this,arguments)}finally{d=W}}}}(Ob)),Ob}var q_;function _M(){return q_||(q_=1,Mb.exports=SM()),Mb.exports}var $b={exports:{}},dn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function CM(){if(X_)return dn;X_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),p=Symbol.for("react.context"),r=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),l=Symbol.iterator;function d(V){return V===null||typeof V!="object"?null:(V=l&&V[l]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,m={};function y(V,Y,Z){this.props=V,this.context=Y,this.refs=m,this.updater=Z||x}y.prototype.isReactComponent={},y.prototype.setState=function(V,Y){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Y,"setState")},y.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function b(){}b.prototype=y.prototype;function g(V,Y,Z){this.props=V,this.context=Y,this.refs=m,this.updater=Z||x}var w=g.prototype=new b;w.constructor=g,S(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function E(V,Y,Z,J,ne,se){return Z=se.ref,{$$typeof:s,type:V,key:Y,ref:Z!==void 0?Z:null,props:se}}function j(V,Y){return E(V.type,Y,void 0,void 0,void 0,V.props)}function A(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function O(V){var Y={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Z){return Y[Z]})}var N=/\/+/g;function D(V,Y){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):Y.toString(36)}function z(){}function $(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(z,z):(V.status="pending",V.then(function(Y){V.status==="pending"&&(V.status="fulfilled",V.value=Y)},function(Y){V.status==="pending"&&(V.status="rejected",V.reason=Y)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function B(V,Y,Z,J,ne){var se=typeof V;(se==="undefined"||se==="boolean")&&(V=null);var ie=!1;if(V===null)ie=!0;else switch(se){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(V.$$typeof){case s:case t:ie=!0;break;case u:return ie=V._init,B(ie(V._payload),Y,Z,J,ne)}}if(ie)return ne=ne(V),ie=J===""?"."+D(V,0):J,_(ne)?(Z="",ie!=null&&(Z=ie.replace(N,"$&/")+"/"),B(ne,Y,Z,"",function(re){return re})):ne!=null&&(A(ne)&&(ne=j(ne,Z+(ne.key==null||V&&V.key===ne.key?"":(""+ne.key).replace(N,"$&/")+"/")+ie)),Y.push(ne)),1;ie=0;var X=J===""?".":J+":";if(_(V))for(var Q=0;Q<V.length;Q++)J=V[Q],se=X+D(J,Q),ie+=B(J,Y,Z,se,ne);else if(Q=d(V),typeof Q=="function")for(V=Q.call(V),Q=0;!(J=V.next()).done;)J=J.value,se=X+D(J,Q++),ie+=B(J,Y,Z,se,ne);else if(se==="object"){if(typeof V.then=="function")return B($(V),Y,Z,J,ne);throw Y=String(V),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ie}function F(V,Y,Z){if(V==null)return V;var J=[],ne=0;return B(V,J,"","",function(se){return Y.call(Z,se,ne++)}),J}function G(V){if(V._status===-1){var Y=V._result;Y=Y(),Y.then(function(Z){(V._status===0||V._status===-1)&&(V._status=1,V._result=Z)},function(Z){(V._status===0||V._status===-1)&&(V._status=2,V._result=Z)}),V._status===-1&&(V._status=0,V._result=Y)}if(V._status===1)return V._result.default;throw V._result}var W=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function L(){}return dn.Children={map:F,forEach:function(V,Y,Z){F(V,function(){Y.apply(this,arguments)},Z)},count:function(V){var Y=0;return F(V,function(){Y++}),Y},toArray:function(V){return F(V,function(Y){return Y})||[]},only:function(V){if(!A(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},dn.Component=y,dn.Fragment=n,dn.Profiler=a,dn.PureComponent=g,dn.StrictMode=o,dn.Suspense=h,dn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,dn.__COMPILER_RUNTIME={__proto__:null,c:function(V){return C.H.useMemoCache(V)}},dn.cache=function(V){return function(){return V.apply(null,arguments)}},dn.cloneElement=function(V,Y,Z){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var J=S({},V.props),ne=V.key,se=void 0;if(Y!=null)for(ie in Y.ref!==void 0&&(se=void 0),Y.key!==void 0&&(ne=""+Y.key),Y)!k.call(Y,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Y.ref===void 0||(J[ie]=Y[ie]);var ie=arguments.length-2;if(ie===1)J.children=Z;else if(1<ie){for(var X=Array(ie),Q=0;Q<ie;Q++)X[Q]=arguments[Q+2];J.children=X}return E(V.type,ne,void 0,void 0,se,J)},dn.createContext=function(V){return V={$$typeof:p,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:i,_context:V},V},dn.createElement=function(V,Y,Z){var J,ne={},se=null;if(Y!=null)for(J in Y.key!==void 0&&(se=""+Y.key),Y)k.call(Y,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ne[J]=Y[J]);var ie=arguments.length-2;if(ie===1)ne.children=Z;else if(1<ie){for(var X=Array(ie),Q=0;Q<ie;Q++)X[Q]=arguments[Q+2];ne.children=X}if(V&&V.defaultProps)for(J in ie=V.defaultProps,ie)ne[J]===void 0&&(ne[J]=ie[J]);return E(V,se,void 0,void 0,null,ne)},dn.createRef=function(){return{current:null}},dn.forwardRef=function(V){return{$$typeof:r,render:V}},dn.isValidElement=A,dn.lazy=function(V){return{$$typeof:u,_payload:{_status:-1,_result:V},_init:G}},dn.memo=function(V,Y){return{$$typeof:f,type:V,compare:Y===void 0?null:Y}},dn.startTransition=function(V){var Y=C.T,Z={};C.T=Z;try{var J=V(),ne=C.S;ne!==null&&ne(Z,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(L,W)}catch(se){W(se)}finally{C.T=Y}},dn.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},dn.use=function(V){return C.H.use(V)},dn.useActionState=function(V,Y,Z){return C.H.useActionState(V,Y,Z)},dn.useCallback=function(V,Y){return C.H.useCallback(V,Y)},dn.useContext=function(V){return C.H.useContext(V)},dn.useDebugValue=function(){},dn.useDeferredValue=function(V,Y){return C.H.useDeferredValue(V,Y)},dn.useEffect=function(V,Y,Z){var J=C.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(V,Y)},dn.useId=function(){return C.H.useId()},dn.useImperativeHandle=function(V,Y,Z){return C.H.useImperativeHandle(V,Y,Z)},dn.useInsertionEffect=function(V,Y){return C.H.useInsertionEffect(V,Y)},dn.useLayoutEffect=function(V,Y){return C.H.useLayoutEffect(V,Y)},dn.useMemo=function(V,Y){return C.H.useMemo(V,Y)},dn.useOptimistic=function(V,Y){return C.H.useOptimistic(V,Y)},dn.useReducer=function(V,Y,Z){return C.H.useReducer(V,Y,Z)},dn.useRef=function(V){return C.H.useRef(V)},dn.useState=function(V){return C.H.useState(V)},dn.useSyncExternalStore=function(V,Y,Z){return C.H.useSyncExternalStore(V,Y,Z)},dn.useTransition=function(){return C.H.useTransition()},dn.version="19.1.0",dn}var Y_;function ch(){return Y_||(Y_=1,$b.exports=CM()),$b.exports}var Lb={exports:{}},Es={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function kM(){if(K_)return Es;K_=1;var s=ch();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)f+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(h,f,u){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:l==null?null:""+l,children:h,containerInfo:f,implementation:u}}var p=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function r(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Es.createPortal=function(h,f){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return i(h,f,null,u)},Es.flushSync=function(h){var f=p.T,u=o.p;try{if(p.T=null,o.p=2,h)return h()}finally{p.T=f,o.p=u,o.d.f()}},Es.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,o.d.C(h,f))},Es.prefetchDNS=function(h){typeof h=="string"&&o.d.D(h)},Es.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var u=f.as,l=r(u,f.crossOrigin),d=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;u==="style"?o.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:l,integrity:d,fetchPriority:x}):u==="script"&&o.d.X(h,{crossOrigin:l,integrity:d,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Es.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var u=r(f.as,f.crossOrigin);o.d.M(h,{crossOrigin:u,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&o.d.M(h)},Es.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var u=f.as,l=r(u,f.crossOrigin);o.d.L(h,u,{crossOrigin:l,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Es.preloadModule=function(h,f){if(typeof h=="string")if(f){var u=r(f.as,f.crossOrigin);o.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:u,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else o.d.m(h)},Es.requestFormReset=function(h){o.d.r(h)},Es.unstable_batchedUpdates=function(h,f){return h(f)},Es.useFormState=function(h,f,u){return p.H.useFormState(h,f,u)},Es.useFormStatus=function(){return p.H.useHostTransitionStatus()},Es.version="19.1.0",Es}var Z_;function TM(){if(Z_)return Lb.exports;Z_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Lb.exports=kM(),Lb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function EM(){if(Q_)return Md;Q_=1;var s=_M(),t=ch(),n=TM();function o(c){var v="https://react.dev/errors/"+c;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+c+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var v=c,T=c;if(c.alternate)for(;v.return;)v=v.return;else{c=v;do v=c,(v.flags&4098)!==0&&(T=v.return),c=v.return;while(c)}return v.tag===3?T:null}function p(c){if(c.tag===13){var v=c.memoizedState;if(v===null&&(c=c.alternate,c!==null&&(v=c.memoizedState)),v!==null)return v.dehydrated}return null}function r(c){if(i(c)!==c)throw Error(o(188))}function h(c){var v=c.alternate;if(!v){if(v=i(c),v===null)throw Error(o(188));return v!==c?null:c}for(var T=c,R=v;;){var U=T.return;if(U===null)break;var q=U.alternate;if(q===null){if(R=U.return,R!==null){T=R;continue}break}if(U.child===q.child){for(q=U.child;q;){if(q===T)return r(U),c;if(q===R)return r(U),v;q=q.sibling}throw Error(o(188))}if(T.return!==R.return)T=U,R=q;else{for(var ae=!1,pe=U.child;pe;){if(pe===T){ae=!0,T=U,R=q;break}if(pe===R){ae=!0,R=U,T=q;break}pe=pe.sibling}if(!ae){for(pe=q.child;pe;){if(pe===T){ae=!0,T=q,R=U;break}if(pe===R){ae=!0,R=q,T=U;break}pe=pe.sibling}if(!ae)throw Error(o(189))}}if(T.alternate!==R)throw Error(o(190))}if(T.tag!==3)throw Error(o(188));return T.stateNode.current===T?c:v}function f(c){var v=c.tag;if(v===5||v===26||v===27||v===6)return c;for(c=c.child;c!==null;){if(v=f(c),v!==null)return v;c=c.sibling}return null}var u=Object.assign,l=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),g=Symbol.for("react.consumer"),w=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function D(c){return c===null||typeof c!="object"?null:(c=N&&c[N]||c["@@iterator"],typeof c=="function"?c:null)}var z=Symbol.for("react.client.reference");function $(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===z?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case S:return"Fragment";case y:return"Profiler";case m:return"StrictMode";case C:return"Suspense";case k:return"SuspenseList";case A:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case x:return"Portal";case w:return(c.displayName||"Context")+".Provider";case g:return(c._context.displayName||"Context")+".Consumer";case _:var v=c.render;return c=c.displayName,c||(c=v.displayName||v.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case E:return v=c.displayName||null,v!==null?v:$(c.type)||"Memo";case j:v=c._payload,c=c._init;try{return $(c(v))}catch{}}return null}var B=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},L=[],V=-1;function Y(c){return{current:c}}function Z(c){0>V||(c.current=L[V],L[V]=null,V--)}function J(c,v){V++,L[V]=c.current,c.current=v}var ne=Y(null),se=Y(null),ie=Y(null),X=Y(null);function Q(c,v){switch(J(ie,v),J(se,c),J(ne,null),v.nodeType){case 9:case 11:c=(c=v.documentElement)&&(c=c.namespaceURI)?b_(c):0;break;default:if(c=v.tagName,v=v.namespaceURI)v=b_(v),c=v_(v,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Z(ne),J(ne,c)}function re(){Z(ne),Z(se),Z(ie)}function ce(c){c.memoizedState!==null&&J(X,c);var v=ne.current,T=v_(v,c.type);v!==T&&(J(se,c),J(ne,T))}function he(c){se.current===c&&(Z(ne),Z(se)),X.current===c&&(Z(X),jd._currentValue=W)}var fe=Object.prototype.hasOwnProperty,oe=s.unstable_scheduleCallback,me=s.unstable_cancelCallback,we=s.unstable_shouldYield,ke=s.unstable_requestPaint,ve=s.unstable_now,_e=s.unstable_getCurrentPriorityLevel,Me=s.unstable_ImmediatePriority,He=s.unstable_UserBlockingPriority,ze=s.unstable_NormalPriority,st=s.unstable_LowPriority,gt=s.unstable_IdlePriority,pt=s.log,Lt=s.unstable_setDisableYieldValue,_t=null,xe=null;function We(c){if(typeof pt=="function"&&Lt(c),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(_t,c)}catch{}}var Ve=Math.clz32?Math.clz32:Ft,dt=Math.log,Ct=Math.LN2;function Ft(c){return c>>>=0,c===0?32:31-(dt(c)/Ct|0)|0}var kt=256,Tt=4194304;function ue(c){var v=c&42;if(v!==0)return v;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function le(c,v,T){var R=c.pendingLanes;if(R===0)return 0;var U=0,q=c.suspendedLanes,ae=c.pingedLanes;c=c.warmLanes;var pe=R&134217727;return pe!==0?(R=pe&~q,R!==0?U=ue(R):(ae&=pe,ae!==0?U=ue(ae):T||(T=pe&~c,T!==0&&(U=ue(T))))):(pe=R&~q,pe!==0?U=ue(pe):ae!==0?U=ue(ae):T||(T=R&~c,T!==0&&(U=ue(T)))),U===0?0:v!==0&&v!==U&&(v&q)===0&&(q=U&-U,T=v&-v,q>=T||q===32&&(T&4194048)!==0)?v:U}function de(c,v){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&v)===0}function be(c,v){switch(c){case 1:case 2:case 4:case 8:case 64:return v+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ae(){var c=kt;return kt<<=1,(kt&4194048)===0&&(kt=256),c}function Ze(){var c=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),c}function yt(c){for(var v=[],T=0;31>T;T++)v.push(c);return v}function ht(c,v){c.pendingLanes|=v,v!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function De(c,v,T,R,U,q){var ae=c.pendingLanes;c.pendingLanes=T,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=T,c.entangledLanes&=T,c.errorRecoveryDisabledLanes&=T,c.shellSuspendCounter=0;var pe=c.entanglements,Ie=c.expirationTimes,Ye=c.hiddenUpdates;for(T=ae&~T;0<T;){var lt=31-Ve(T),ft=1<<lt;pe[lt]=0,Ie[lt]=-1;var Je=Ye[lt];if(Je!==null)for(Ye[lt]=null,lt=0;lt<Je.length;lt++){var rt=Je[lt];rt!==null&&(rt.lane&=-536870913)}T&=~ft}R!==0&&wt(c,R,0),q!==0&&U===0&&c.tag!==0&&(c.suspendedLanes|=q&~(ae&~v))}function wt(c,v,T){c.pendingLanes|=v,c.suspendedLanes&=~v;var R=31-Ve(v);c.entangledLanes|=v,c.entanglements[R]=c.entanglements[R]|1073741824|T&4194090}function At(c,v){var T=c.entangledLanes|=v;for(c=c.entanglements;T;){var R=31-Ve(T),U=1<<R;U&v|c[R]&v&&(c[R]|=v),T&=~U}}function nn(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function hn(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function sn(){var c=G.p;return c!==0?c:(c=window.event,c===void 0?32:F_(c.type))}function tn(c,v){var T=G.p;try{return G.p=c,v()}finally{G.p=T}}var qt=Math.random().toString(36).slice(2),Qt="__reactFiber$"+qt,an="__reactProps$"+qt,pr="__reactContainer$"+qt,An="__reactEvents$"+qt,mr="__reactListeners$"+qt,Yr="__reactHandles$"+qt,Sn="__reactResources$"+qt,vr="__reactMarker$"+qt;function Cr(c){delete c[Qt],delete c[an],delete c[An],delete c[mr],delete c[Yr]}function Cn(c){var v=c[Qt];if(v)return v;for(var T=c.parentNode;T;){if(v=T[pr]||T[Qt]){if(T=v.alternate,v.child!==null||T!==null&&T.child!==null)for(c=__(c);c!==null;){if(T=c[Qt])return T;c=__(c)}return v}c=T,T=c.parentNode}return null}function Po(c){if(c=c[Qt]||c[pr]){var v=c.tag;if(v===5||v===6||v===13||v===26||v===27||v===3)return c}return null}function ia(c){var v=c.tag;if(v===5||v===26||v===27||v===6)return c.stateNode;throw Error(o(33))}function Bo(c){var v=c[Sn];return v||(v=c[Sn]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function xr(c){c[vr]=!0}var dl=new Set,Te={};function bt(c,v){Dt(c,v),Dt(c+"Capture",v)}function Dt(c,v){for(Te[c]=v,c=0;c<v.length;c++)dl.add(v[c])}var mt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gn={},ut={};function zn(c){return fe.call(ut,c)?!0:fe.call(gn,c)?!1:mt.test(c)?ut[c]=!0:(gn[c]=!0,!1)}function $t(c,v,T){if(zn(v))if(T===null)c.removeAttribute(v);else{switch(typeof T){case"undefined":case"function":case"symbol":c.removeAttribute(v);return;case"boolean":var R=v.toLowerCase().slice(0,5);if(R!=="data-"&&R!=="aria-"){c.removeAttribute(v);return}}c.setAttribute(v,""+T)}}function rn(c,v,T){if(T===null)c.removeAttribute(v);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(v);return}c.setAttribute(v,""+T)}}function Et(c,v,T,R){if(R===null)c.removeAttribute(T);else{switch(typeof R){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(T);return}c.setAttributeNS(v,T,""+R)}}var kr,Pr;function Kr(c){if(kr===void 0)try{throw Error()}catch(T){var v=T.stack.trim().match(/\n( *(at )?)/);kr=v&&v[1]||"",Pr=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kr+c+Pr}var cr=!1;function ar(c,v){if(!c||cr)return"";cr=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var R={DetermineComponentFrameRoot:function(){try{if(v){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(rt){var Je=rt}Reflect.construct(c,[],ft)}else{try{ft.call()}catch(rt){Je=rt}c.call(ft.prototype)}}else{try{throw Error()}catch(rt){Je=rt}(ft=c())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(rt){if(rt&&Je&&typeof rt.stack=="string")return[rt.stack,Je.stack]}return[null,null]}};R.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(R.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(R.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=R.DetermineComponentFrameRoot(),ae=q[0],pe=q[1];if(ae&&pe){var Ie=ae.split(`
`),Ye=pe.split(`
`);for(U=R=0;R<Ie.length&&!Ie[R].includes("DetermineComponentFrameRoot");)R++;for(;U<Ye.length&&!Ye[U].includes("DetermineComponentFrameRoot");)U++;if(R===Ie.length||U===Ye.length)for(R=Ie.length-1,U=Ye.length-1;1<=R&&0<=U&&Ie[R]!==Ye[U];)U--;for(;1<=R&&0<=U;R--,U--)if(Ie[R]!==Ye[U]){if(R!==1||U!==1)do if(R--,U--,0>U||Ie[R]!==Ye[U]){var lt=`
`+Ie[R].replace(" at new "," at ");return c.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",c.displayName)),lt}while(1<=R&&0<=U);break}}}finally{cr=!1,Error.prepareStackTrace=T}return(T=c?c.displayName||c.name:"")?Kr(T):""}function os(c){switch(c.tag){case 26:case 27:case 5:return Kr(c.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 15:return ar(c.type,!1);case 11:return ar(c.type.render,!1);case 1:return ar(c.type,!0);case 31:return Kr("Activity");default:return""}}function as(c){try{var v="";do v+=os(c),c=c.return;while(c);return v}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function Vn(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Nf(c){var v=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Df(c){var v=Nf(c)?"checked":"value",T=Object.getOwnPropertyDescriptor(c.constructor.prototype,v),R=""+c[v];if(!c.hasOwnProperty(v)&&typeof T<"u"&&typeof T.get=="function"&&typeof T.set=="function"){var U=T.get,q=T.set;return Object.defineProperty(c,v,{configurable:!0,get:function(){return U.call(this)},set:function(ae){R=""+ae,q.call(this,ae)}}),Object.defineProperty(c,v,{enumerable:T.enumerable}),{getValue:function(){return R},setValue:function(ae){R=""+ae},stopTracking:function(){c._valueTracker=null,delete c[v]}}}}function gu(c){c._valueTracker||(c._valueTracker=Df(c))}function Mf(c){if(!c)return!1;var v=c._valueTracker;if(!v)return!0;var T=v.getValue(),R="";return c&&(R=Nf(c)?c.checked?"true":"false":c.value),c=R,c!==T?(v.setValue(c),!0):!1}function yu(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Uy=/[\n"\\]/g;function Vs(c){return c.replace(Uy,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function Ms(c,v,T,R,U,q,ae,pe){c.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?c.type=ae:c.removeAttribute("type"),v!=null?ae==="number"?(v===0&&c.value===""||c.value!=v)&&(c.value=""+Vn(v)):c.value!==""+Vn(v)&&(c.value=""+Vn(v)):ae!=="submit"&&ae!=="reset"||c.removeAttribute("value"),v!=null?di(c,ae,Vn(v)):T!=null?di(c,ae,Vn(T)):R!=null&&c.removeAttribute("value"),U==null&&q!=null&&(c.defaultChecked=!!q),U!=null&&(c.checked=U&&typeof U!="function"&&typeof U!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?c.name=""+Vn(pe):c.removeAttribute("name")}function Oa(c,v,T,R,U,q,ae,pe){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(c.type=q),v!=null||T!=null){if(!(q!=="submit"&&q!=="reset"||v!=null))return;T=T!=null?""+Vn(T):"",v=v!=null?""+Vn(v):T,pe||v===c.value||(c.value=v),c.defaultValue=v}R=R??U,R=typeof R!="function"&&typeof R!="symbol"&&!!R,c.checked=pe?c.checked:!!R,c.defaultChecked=!!R,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(c.name=ae)}function di(c,v,T){v==="number"&&yu(c.ownerDocument)===c||c.defaultValue===""+T||(c.defaultValue=""+T)}function hi(c,v,T,R){if(c=c.options,v){v={};for(var U=0;U<T.length;U++)v["$"+T[U]]=!0;for(T=0;T<c.length;T++)U=v.hasOwnProperty("$"+c[T].value),c[T].selected!==U&&(c[T].selected=U),U&&R&&(c[T].defaultSelected=!0)}else{for(T=""+Vn(T),v=null,U=0;U<c.length;U++){if(c[U].value===T){c[U].selected=!0,R&&(c[U].defaultSelected=!0);return}v!==null||c[U].disabled||(v=c[U])}v!==null&&(v.selected=!0)}}function Of(c,v,T){if(v!=null&&(v=""+Vn(v),v!==c.value&&(c.value=v),T==null)){c.defaultValue!==v&&(c.defaultValue=v);return}c.defaultValue=T!=null?""+Vn(T):""}function $f(c,v,T,R){if(v==null){if(R!=null){if(T!=null)throw Error(o(92));if(B(R)){if(1<R.length)throw Error(o(93));R=R[0]}T=R}T==null&&(T=""),v=T}T=Vn(v),c.defaultValue=T,R=c.textContent,R===T&&R!==""&&R!==null&&(c.value=R)}function fi(c,v){if(v){var T=c.firstChild;if(T&&T===c.lastChild&&T.nodeType===3){T.nodeValue=v;return}}c.textContent=v}var Lf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bc(c,v,T){var R=v.indexOf("--")===0;T==null||typeof T=="boolean"||T===""?R?c.setProperty(v,""):v==="float"?c.cssFloat="":c[v]="":R?c.setProperty(v,T):typeof T!="number"||T===0||Lf.has(v)?v==="float"?c.cssFloat=T:c[v]=(""+T).trim():c[v]=T+"px"}function Uc(c,v,T){if(v!=null&&typeof v!="object")throw Error(o(62));if(c=c.style,T!=null){for(var R in T)!T.hasOwnProperty(R)||v!=null&&v.hasOwnProperty(R)||(R.indexOf("--")===0?c.setProperty(R,""):R==="float"?c.cssFloat="":c[R]="");for(var U in v)R=v[U],v.hasOwnProperty(U)&&T[U]!==R&&Bc(c,U,R)}else for(var q in v)v.hasOwnProperty(q)&&Bc(c,q,v[q])}function zc(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ff=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pi(c){return zy.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var bu=null;function vu(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Uo=null,zo=null;function to(c){var v=Po(c);if(v&&(c=v.stateNode)){var T=c[an]||null;e:switch(c=v.stateNode,v.type){case"input":if(Ms(c,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name),v=T.name,T.type==="radio"&&v!=null){for(T=c;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll('input[name="'+Vs(""+v)+'"][type="radio"]'),v=0;v<T.length;v++){var R=T[v];if(R!==c&&R.form===c.form){var U=R[an]||null;if(!U)throw Error(o(90));Ms(R,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(v=0;v<T.length;v++)R=T[v],R.form===c.form&&Mf(R)}break e;case"textarea":Of(c,T.value,T.defaultValue);break e;case"select":v=T.value,v!=null&&hi(c,!!T.multiple,v,!1)}}}var xu=!1;function Vc(c,v,T){if(xu)return c(v,T);xu=!0;try{var R=c(v);return R}finally{if(xu=!1,(Uo!==null||zo!==null)&&($p(),Uo&&(v=Uo,c=zo,zo=Uo=null,to(v),c)))for(v=0;v<c.length;v++)to(c[v])}}function bo(c,v){var T=c.stateNode;if(T===null)return null;var R=T[an]||null;if(R===null)return null;T=R[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(c=c.type,R=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!R;break e;default:c=!1}if(c)return null;if(T&&typeof T!="function")throw Error(o(231,v,typeof T));return T}var vo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gc=!1;if(vo)try{var $a={};Object.defineProperty($a,"passive",{get:function(){Gc=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{Gc=!1}var Vo=null,Wc=null,hl=null;function Hc(){if(hl)return hl;var c,v=Wc,T=v.length,R,U="value"in Vo?Vo.value:Vo.textContent,q=U.length;for(c=0;c<T&&v[c]===U[c];c++);var ae=T-c;for(R=1;R<=ae&&v[T-R]===U[q-R];R++);return hl=U.slice(c,1<R?1-R:void 0)}function wu(c){var v=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&v===13&&(c=13)):c=v,c===10&&(c=13),32<=c||c===13?c:0}function fl(){return!0}function Pf(){return!1}function ks(c){function v(T,R,U,q,ae){this._reactName=T,this._targetInst=U,this.type=R,this.nativeEvent=q,this.target=ae,this.currentTarget=null;for(var pe in c)c.hasOwnProperty(pe)&&(T=c[pe],this[pe]=T?T(q):q[pe]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?fl:Pf,this.isPropagationStopped=Pf,this}return u(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),v}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=ks(La),mi=u({},La,{view:0,detail:0}),xo=ks(mi),no,Fa,Go,Gs=u({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tu,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Go&&(Go&&c.type==="mousemove"?(no=c.screenX-Go.screenX,Fa=c.screenY-Go.screenY):Fa=no=0,Go=c),no)},movementY:function(c){return"movementY"in c?c.movementY:Fa}}),gi=ks(Gs),Vy=u({},Gs,{dataTransfer:0}),la=ks(Vy),_u=u({},mi,{relatedTarget:0}),Cu=ks(_u),Bf=u({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),Uf=ks(Bf),zf=u({},La,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Vf=ks(zf),Gf=u({},La,{data:0}),ku=ks(Gf),Wf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xf(c){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(c):(c=qf[c])?!!v[c]:!1}function Tu(){return Xf}var Yf=u({},mi,{key:function(c){if(c.key){var v=Wf[c.key]||c.key;if(v!=="Unidentified")return v}return c.type==="keypress"?(c=wu(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Hf[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tu,charCode:function(c){return c.type==="keypress"?wu(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?wu(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Kf=ks(Yf),Zf=u({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=ks(Zf),Xc=u({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tu}),Eu=ks(Xc),Yc=u({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qf=ks(Yc),ua=u({},Gs,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),ca=ks(ua),Pt=u({},La,{newState:0,oldState:0}),Gy=ks(Pt),Jf=[9,13,27,32],da=vo&&"CompositionEvent"in window,pl=null;vo&&"documentMode"in document&&(pl=document.documentMode);var Wy=vo&&"TextEvent"in window&&!pl,Pn=vo&&(!da||pl&&8<pl&&11>=pl),ep=" ",Ws=!1;function tp(c,v){switch(c){case"keyup":return Jf.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var yi=!1;function Hy(c,v){switch(c){case"compositionend":return np(v);case"keypress":return v.which!==32?null:(Ws=!0,ep);case"textInput":return c=v.data,c===ep&&Ws?null:c;default:return null}}function qy(c,v){if(yi)return c==="compositionend"||!da&&tp(c,v)?(c=Hc(),hl=Wc=Vo=null,yi=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return Pn&&v.locale!=="ko"?null:v.data;default:return null}}var rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wr(c){var v=c&&c.nodeName&&c.nodeName.toLowerCase();return v==="input"?!!rp[c.type]:v==="textarea"}function ju(c,v,T,R){Uo?zo?zo.push(R):zo=[R]:Uo=R,v=zp(v,"onChange"),0<v.length&&(T=new Su("onChange","change",null,T,R),c.push({event:T,listeners:v}))}var I=null,M=null;function P(c){f_(c,0)}function H(c){var v=ia(c);if(Mf(v))return c}function K(c,v){if(c==="change")return v}var ee=!1;if(vo){var te;if(vo){var ge="oninput"in document;if(!ge){var Se=document.createElement("div");Se.setAttribute("oninput","return;"),ge=typeof Se.oninput=="function"}te=ge}else te=!1;ee=te&&(!document.documentMode||9<document.documentMode)}function Ce(){I&&(I.detachEvent("onpropertychange",Re),M=I=null)}function Re(c){if(c.propertyName==="value"&&H(M)){var v=[];ju(v,M,c,vu(c)),Vc(P,v)}}function Fe(c,v,T){c==="focusin"?(Ce(),I=v,M=T,I.attachEvent("onpropertychange",Re)):c==="focusout"&&Ce()}function Ue(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return H(M)}function Ee(c,v){if(c==="click")return H(v)}function vt(c,v){if(c==="input"||c==="change")return H(v)}function tt(c,v){return c===v&&(c!==0||1/c===1/v)||c!==c&&v!==v}var et=typeof Object.is=="function"?Object.is:tt;function nt(c,v){if(et(c,v))return!0;if(typeof c!="object"||c===null||typeof v!="object"||v===null)return!1;var T=Object.keys(c),R=Object.keys(v);if(T.length!==R.length)return!1;for(R=0;R<T.length;R++){var U=T[R];if(!fe.call(v,U)||!et(c[U],v[U]))return!1}return!0}function it(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Rt(c,v){var T=it(c);c=0;for(var R;T;){if(T.nodeType===3){if(R=c+T.textContent.length,c<=v&&R>=v)return{node:T,offset:v-c};c=R}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=it(T)}}function jt(c,v){return c&&v?c===v?!0:c&&c.nodeType===3?!1:v&&v.nodeType===3?jt(c,v.parentNode):"contains"in c?c.contains(v):c.compareDocumentPosition?!!(c.compareDocumentPosition(v)&16):!1:!1}function Nt(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var v=yu(c.document);v instanceof c.HTMLIFrameElement;){try{var T=typeof v.contentWindow.location.href=="string"}catch{T=!1}if(T)c=v.contentWindow;else break;v=yu(c.document)}return v}function ln(c){var v=c&&c.nodeName&&c.nodeName.toLowerCase();return v&&(v==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||v==="textarea"||c.contentEditable==="true")}var yn=vo&&"documentMode"in document&&11>=document.documentMode,_n=null,Xn=null,Ln=null,Rn=!1;function en(c,v,T){var R=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;Rn||_n==null||_n!==yu(R)||(R=_n,"selectionStart"in R&&ln(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),Ln&&nt(Ln,R)||(Ln=R,R=zp(Xn,"onSelect"),0<R.length&&(v=new Su("onSelect","select",null,v,T),c.push({event:v,listeners:R}),v.target=_n)))}function Yn(c,v){var T={};return T[c.toLowerCase()]=v.toLowerCase(),T["Webkit"+c]="webkit"+v,T["Moz"+c]="moz"+v,T}var Gn={animationend:Yn("Animation","AnimationEnd"),animationiteration:Yn("Animation","AnimationIteration"),animationstart:Yn("Animation","AnimationStart"),transitionrun:Yn("Transition","TransitionRun"),transitionstart:Yn("Transition","TransitionStart"),transitioncancel:Yn("Transition","TransitionCancel"),transitionend:Yn("Transition","TransitionEnd")},dr={},Nn={};vo&&(Nn=document.createElement("div").style,"AnimationEvent"in window||(delete Gn.animationend.animation,delete Gn.animationiteration.animation,delete Gn.animationstart.animation),"TransitionEvent"in window||delete Gn.transitionend.transition);function tr(c){if(dr[c])return dr[c];if(!Gn[c])return c;var v=Gn[c],T;for(T in v)if(v.hasOwnProperty(T)&&T in Nn)return dr[c]=v[T];return c}var Sr=tr("animationend"),Zr=tr("animationiteration"),Kn=tr("animationstart"),Mr=tr("transitionrun"),ml=tr("transitionstart"),gl=tr("transitioncancel"),Xw=tr("transitionend"),Yw=new Map,Xy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xy.push("scrollEnd");function Wo(c,v){Yw.set(c,v),bt(v,[c])}var Kw=new WeakMap;function wo(c,v){if(typeof c=="object"&&c!==null){var T=Kw.get(c);return T!==void 0?T:(v={value:c,source:v,stack:as(v)},Kw.set(c,v),v)}return{value:c,source:v,stack:as(v)}}var So=[],Iu=0,Yy=0;function sp(){for(var c=Iu,v=Yy=Iu=0;v<c;){var T=So[v];So[v++]=null;var R=So[v];So[v++]=null;var U=So[v];So[v++]=null;var q=So[v];if(So[v++]=null,R!==null&&U!==null){var ae=R.pending;ae===null?U.next=U:(U.next=ae.next,ae.next=U),R.pending=U}q!==0&&Zw(T,U,q)}}function op(c,v,T,R){So[Iu++]=c,So[Iu++]=v,So[Iu++]=T,So[Iu++]=R,Yy|=R,c.lanes|=R,c=c.alternate,c!==null&&(c.lanes|=R)}function Ky(c,v,T,R){return op(c,v,T,R),ap(c)}function Au(c,v){return op(c,null,null,v),ap(c)}function Zw(c,v,T){c.lanes|=T;var R=c.alternate;R!==null&&(R.lanes|=T);for(var U=!1,q=c.return;q!==null;)q.childLanes|=T,R=q.alternate,R!==null&&(R.childLanes|=T),q.tag===22&&(c=q.stateNode,c===null||c._visibility&1||(U=!0)),c=q,q=q.return;return c.tag===3?(q=c.stateNode,U&&v!==null&&(U=31-Ve(T),c=q.hiddenUpdates,R=c[U],R===null?c[U]=[v]:R.push(v),v.lane=T|536870912),q):null}function ap(c){if(50<xd)throw xd=0,nb=null,Error(o(185));for(var v=c.return;v!==null;)c=v,v=c.return;return c.tag===3?c.stateNode:null}var Ru={};function rD(c,v,T,R){this.tag=c,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ro(c,v,T,R){return new rD(c,v,T,R)}function Zy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Pa(c,v){var T=c.alternate;return T===null?(T=ro(c.tag,v,c.key,c.mode),T.elementType=c.elementType,T.type=c.type,T.stateNode=c.stateNode,T.alternate=c,c.alternate=T):(T.pendingProps=v,T.type=c.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=c.flags&65011712,T.childLanes=c.childLanes,T.lanes=c.lanes,T.child=c.child,T.memoizedProps=c.memoizedProps,T.memoizedState=c.memoizedState,T.updateQueue=c.updateQueue,v=c.dependencies,T.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},T.sibling=c.sibling,T.index=c.index,T.ref=c.ref,T.refCleanup=c.refCleanup,T}function Qw(c,v){c.flags&=65011714;var T=c.alternate;return T===null?(c.childLanes=0,c.lanes=v,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=T.childLanes,c.lanes=T.lanes,c.child=T.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=T.memoizedProps,c.memoizedState=T.memoizedState,c.updateQueue=T.updateQueue,c.type=T.type,v=T.dependencies,c.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),c}function ip(c,v,T,R,U,q){var ae=0;if(R=c,typeof c=="function")Zy(c)&&(ae=1);else if(typeof c=="string")ae=oM(c,T,ne.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case A:return c=ro(31,T,v,U),c.elementType=A,c.lanes=q,c;case S:return yl(T.children,U,q,v);case m:ae=8,U|=24;break;case y:return c=ro(12,T,v,U|2),c.elementType=y,c.lanes=q,c;case C:return c=ro(13,T,v,U),c.elementType=C,c.lanes=q,c;case k:return c=ro(19,T,v,U),c.elementType=k,c.lanes=q,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case b:case w:ae=10;break e;case g:ae=9;break e;case _:ae=11;break e;case E:ae=14;break e;case j:ae=16,R=null;break e}ae=29,T=Error(o(130,c===null?"null":typeof c,"")),R=null}return v=ro(ae,T,v,U),v.elementType=c,v.type=R,v.lanes=q,v}function yl(c,v,T,R){return c=ro(7,c,R,v),c.lanes=T,c}function Qy(c,v,T){return c=ro(6,c,null,v),c.lanes=T,c}function Jy(c,v,T){return v=ro(4,c.children!==null?c.children:[],c.key,v),v.lanes=T,v.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},v}var Nu=[],Du=0,lp=null,up=0,_o=[],Co=0,bl=null,Ba=1,Ua="";function vl(c,v){Nu[Du++]=up,Nu[Du++]=lp,lp=c,up=v}function Jw(c,v,T){_o[Co++]=Ba,_o[Co++]=Ua,_o[Co++]=bl,bl=c;var R=Ba;c=Ua;var U=32-Ve(R)-1;R&=~(1<<U),T+=1;var q=32-Ve(v)+U;if(30<q){var ae=U-U%5;q=(R&(1<<ae)-1).toString(32),R>>=ae,U-=ae,Ba=1<<32-Ve(v)+U|T<<U|R,Ua=q+c}else Ba=1<<q|T<<U|R,Ua=c}function e0(c){c.return!==null&&(vl(c,1),Jw(c,1,0))}function t0(c){for(;c===lp;)lp=Nu[--Du],Nu[Du]=null,up=Nu[--Du],Nu[Du]=null;for(;c===bl;)bl=_o[--Co],_o[Co]=null,Ua=_o[--Co],_o[Co]=null,Ba=_o[--Co],_o[Co]=null}var Os=null,Tr=null,Fn=!1,xl=null,ha=!1,n0=Error(o(519));function wl(c){var v=Error(o(418,""));throw Qc(wo(v,c)),n0}function e2(c){var v=c.stateNode,T=c.type,R=c.memoizedProps;switch(v[Qt]=c,v[an]=R,T){case"dialog":wn("cancel",v),wn("close",v);break;case"iframe":case"object":case"embed":wn("load",v);break;case"video":case"audio":for(T=0;T<Sd.length;T++)wn(Sd[T],v);break;case"source":wn("error",v);break;case"img":case"image":case"link":wn("error",v),wn("load",v);break;case"details":wn("toggle",v);break;case"input":wn("invalid",v),Oa(v,R.value,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name,!0),gu(v);break;case"select":wn("invalid",v);break;case"textarea":wn("invalid",v),$f(v,R.value,R.defaultValue,R.children),gu(v)}T=R.children,typeof T!="string"&&typeof T!="number"&&typeof T!="bigint"||v.textContent===""+T||R.suppressHydrationWarning===!0||y_(v.textContent,T)?(R.popover!=null&&(wn("beforetoggle",v),wn("toggle",v)),R.onScroll!=null&&wn("scroll",v),R.onScrollEnd!=null&&wn("scrollend",v),R.onClick!=null&&(v.onclick=Vp),v=!0):v=!1,v||wl(c)}function t2(c){for(Os=c.return;Os;)switch(Os.tag){case 5:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:Os=Os.return}}function Kc(c){if(c!==Os)return!1;if(!Fn)return t2(c),Fn=!0,!1;var v=c.tag,T;if((T=v!==3&&v!==27)&&((T=v===5)&&(T=c.type,T=!(T!=="form"&&T!=="button")||bb(c.type,c.memoizedProps)),T=!T),T&&Tr&&wl(c),t2(c),v===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));e:{for(c=c.nextSibling,v=0;c;){if(c.nodeType===8)if(T=c.data,T==="/$"){if(v===0){Tr=qo(c.nextSibling);break e}v--}else T!=="$"&&T!=="$!"&&T!=="$?"||v++;c=c.nextSibling}Tr=null}}else v===27?(v=Tr,Di(c.type)?(c=Sb,Sb=null,Tr=c):Tr=v):Tr=Os?qo(c.stateNode.nextSibling):null;return!0}function Zc(){Tr=Os=null,Fn=!1}function n2(){var c=xl;return c!==null&&(Xs===null?Xs=c:Xs.push.apply(Xs,c),xl=null),c}function Qc(c){xl===null?xl=[c]:xl.push(c)}var r0=Y(null),Sl=null,za=null;function bi(c,v,T){J(r0,v._currentValue),v._currentValue=T}function Va(c){c._currentValue=r0.current,Z(r0)}function s0(c,v,T){for(;c!==null;){var R=c.alternate;if((c.childLanes&v)!==v?(c.childLanes|=v,R!==null&&(R.childLanes|=v)):R!==null&&(R.childLanes&v)!==v&&(R.childLanes|=v),c===T)break;c=c.return}}function o0(c,v,T,R){var U=c.child;for(U!==null&&(U.return=c);U!==null;){var q=U.dependencies;if(q!==null){var ae=U.child;q=q.firstContext;e:for(;q!==null;){var pe=q;q=U;for(var Ie=0;Ie<v.length;Ie++)if(pe.context===v[Ie]){q.lanes|=T,pe=q.alternate,pe!==null&&(pe.lanes|=T),s0(q.return,T,c),R||(ae=null);break e}q=pe.next}}else if(U.tag===18){if(ae=U.return,ae===null)throw Error(o(341));ae.lanes|=T,q=ae.alternate,q!==null&&(q.lanes|=T),s0(ae,T,c),ae=null}else ae=U.child;if(ae!==null)ae.return=U;else for(ae=U;ae!==null;){if(ae===c){ae=null;break}if(U=ae.sibling,U!==null){U.return=ae.return,ae=U;break}ae=ae.return}U=ae}}function Jc(c,v,T,R){c=null;for(var U=v,q=!1;U!==null;){if(!q){if((U.flags&524288)!==0)q=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ae=U.alternate;if(ae===null)throw Error(o(387));if(ae=ae.memoizedProps,ae!==null){var pe=U.type;et(U.pendingProps.value,ae.value)||(c!==null?c.push(pe):c=[pe])}}else if(U===X.current){if(ae=U.alternate,ae===null)throw Error(o(387));ae.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(c!==null?c.push(jd):c=[jd])}U=U.return}c!==null&&o0(v,c,T,R),v.flags|=262144}function cp(c){for(c=c.firstContext;c!==null;){if(!et(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function _l(c){Sl=c,za=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Ts(c){return r2(Sl,c)}function dp(c,v){return Sl===null&&_l(c),r2(c,v)}function r2(c,v){var T=v._currentValue;if(v={context:v,memoizedValue:T,next:null},za===null){if(c===null)throw Error(o(308));za=v,c.dependencies={lanes:0,firstContext:v},c.flags|=524288}else za=za.next=v;return T}var sD=typeof AbortController<"u"?AbortController:function(){var c=[],v=this.signal={aborted:!1,addEventListener:function(T,R){c.push(R)}};this.abort=function(){v.aborted=!0,c.forEach(function(T){return T()})}},oD=s.unstable_scheduleCallback,aD=s.unstable_NormalPriority,Qr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function a0(){return{controller:new sD,data:new Map,refCount:0}}function ed(c){c.refCount--,c.refCount===0&&oD(aD,function(){c.controller.abort()})}var td=null,i0=0,Mu=0,Ou=null;function iD(c,v){if(td===null){var T=td=[];i0=0,Mu=ub(),Ou={status:"pending",value:void 0,then:function(R){T.push(R)}}}return i0++,v.then(s2,s2),v}function s2(){if(--i0===0&&td!==null){Ou!==null&&(Ou.status="fulfilled");var c=td;td=null,Mu=0,Ou=null;for(var v=0;v<c.length;v++)(0,c[v])()}}function lD(c,v){var T=[],R={status:"pending",value:null,reason:null,then:function(U){T.push(U)}};return c.then(function(){R.status="fulfilled",R.value=v;for(var U=0;U<T.length;U++)(0,T[U])(v)},function(U){for(R.status="rejected",R.reason=U,U=0;U<T.length;U++)(0,T[U])(void 0)}),R}var o2=F.S;F.S=function(c,v){typeof v=="object"&&v!==null&&typeof v.then=="function"&&iD(c,v),o2!==null&&o2(c,v)};var Cl=Y(null);function l0(){var c=Cl.current;return c!==null?c:ir.pooledCache}function hp(c,v){v===null?J(Cl,Cl.current):J(Cl,v.pool)}function a2(){var c=l0();return c===null?null:{parent:Qr._currentValue,pool:c}}var nd=Error(o(460)),i2=Error(o(474)),fp=Error(o(542)),u0={then:function(){}};function l2(c){return c=c.status,c==="fulfilled"||c==="rejected"}function pp(){}function u2(c,v,T){switch(T=c[T],T===void 0?c.push(v):T!==v&&(v.then(pp,pp),v=T),v.status){case"fulfilled":return v.value;case"rejected":throw c=v.reason,d2(c),c;default:if(typeof v.status=="string")v.then(pp,pp);else{if(c=ir,c!==null&&100<c.shellSuspendCounter)throw Error(o(482));c=v,c.status="pending",c.then(function(R){if(v.status==="pending"){var U=v;U.status="fulfilled",U.value=R}},function(R){if(v.status==="pending"){var U=v;U.status="rejected",U.reason=R}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw c=v.reason,d2(c),c}throw rd=v,nd}}var rd=null;function c2(){if(rd===null)throw Error(o(459));var c=rd;return rd=null,c}function d2(c){if(c===nd||c===fp)throw Error(o(483))}var vi=!1;function c0(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function d0(c,v){c=c.updateQueue,v.updateQueue===c&&(v.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function xi(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function wi(c,v,T){var R=c.updateQueue;if(R===null)return null;if(R=R.shared,(Wn&2)!==0){var U=R.pending;return U===null?v.next=v:(v.next=U.next,U.next=v),R.pending=v,v=ap(c),Zw(c,null,T),v}return op(c,R,v,T),ap(c)}function sd(c,v,T){if(v=v.updateQueue,v!==null&&(v=v.shared,(T&4194048)!==0)){var R=v.lanes;R&=c.pendingLanes,T|=R,v.lanes=T,At(c,T)}}function h0(c,v){var T=c.updateQueue,R=c.alternate;if(R!==null&&(R=R.updateQueue,T===R)){var U=null,q=null;if(T=T.firstBaseUpdate,T!==null){do{var ae={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};q===null?U=q=ae:q=q.next=ae,T=T.next}while(T!==null);q===null?U=q=v:q=q.next=v}else U=q=v;T={baseState:R.baseState,firstBaseUpdate:U,lastBaseUpdate:q,shared:R.shared,callbacks:R.callbacks},c.updateQueue=T;return}c=T.lastBaseUpdate,c===null?T.firstBaseUpdate=v:c.next=v,T.lastBaseUpdate=v}var f0=!1;function od(){if(f0){var c=Ou;if(c!==null)throw c}}function ad(c,v,T,R){f0=!1;var U=c.updateQueue;vi=!1;var q=U.firstBaseUpdate,ae=U.lastBaseUpdate,pe=U.shared.pending;if(pe!==null){U.shared.pending=null;var Ie=pe,Ye=Ie.next;Ie.next=null,ae===null?q=Ye:ae.next=Ye,ae=Ie;var lt=c.alternate;lt!==null&&(lt=lt.updateQueue,pe=lt.lastBaseUpdate,pe!==ae&&(pe===null?lt.firstBaseUpdate=Ye:pe.next=Ye,lt.lastBaseUpdate=Ie))}if(q!==null){var ft=U.baseState;ae=0,lt=Ye=Ie=null,pe=q;do{var Je=pe.lane&-536870913,rt=Je!==pe.lane;if(rt?(jn&Je)===Je:(R&Je)===Je){Je!==0&&Je===Mu&&(f0=!0),lt!==null&&(lt=lt.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Jt=c,Xt=pe;Je=v;var Jn=T;switch(Xt.tag){case 1:if(Jt=Xt.payload,typeof Jt=="function"){ft=Jt.call(Jn,ft,Je);break e}ft=Jt;break e;case 3:Jt.flags=Jt.flags&-65537|128;case 0:if(Jt=Xt.payload,Je=typeof Jt=="function"?Jt.call(Jn,ft,Je):Jt,Je==null)break e;ft=u({},ft,Je);break e;case 2:vi=!0}}Je=pe.callback,Je!==null&&(c.flags|=64,rt&&(c.flags|=8192),rt=U.callbacks,rt===null?U.callbacks=[Je]:rt.push(Je))}else rt={lane:Je,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},lt===null?(Ye=lt=rt,Ie=ft):lt=lt.next=rt,ae|=Je;if(pe=pe.next,pe===null){if(pe=U.shared.pending,pe===null)break;rt=pe,pe=rt.next,rt.next=null,U.lastBaseUpdate=rt,U.shared.pending=null}}while(!0);lt===null&&(Ie=ft),U.baseState=Ie,U.firstBaseUpdate=Ye,U.lastBaseUpdate=lt,q===null&&(U.shared.lanes=0),Ii|=ae,c.lanes=ae,c.memoizedState=ft}}function h2(c,v){if(typeof c!="function")throw Error(o(191,c));c.call(v)}function f2(c,v){var T=c.callbacks;if(T!==null)for(c.callbacks=null,c=0;c<T.length;c++)h2(T[c],v)}var $u=Y(null),mp=Y(0);function p2(c,v){c=Ka,J(mp,c),J($u,v),Ka=c|v.baseLanes}function p0(){J(mp,Ka),J($u,$u.current)}function m0(){Ka=mp.current,Z($u),Z(mp)}var Si=0,bn=null,Zn=null,Br=null,gp=!1,Lu=!1,kl=!1,yp=0,id=0,Fu=null,uD=0;function Or(){throw Error(o(321))}function g0(c,v){if(v===null)return!1;for(var T=0;T<v.length&&T<c.length;T++)if(!et(c[T],v[T]))return!1;return!0}function y0(c,v,T,R,U,q){return Si=q,bn=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,F.H=c===null||c.memoizedState===null?Z2:Q2,kl=!1,q=T(R,U),kl=!1,Lu&&(q=g2(v,T,R,U)),m2(c),q}function m2(c){F.H=_p;var v=Zn!==null&&Zn.next!==null;if(Si=0,Br=Zn=bn=null,gp=!1,id=0,Fu=null,v)throw Error(o(300));c===null||is||(c=c.dependencies,c!==null&&cp(c)&&(is=!0))}function g2(c,v,T,R){bn=c;var U=0;do{if(Lu&&(Fu=null),id=0,Lu=!1,25<=U)throw Error(o(301));if(U+=1,Br=Zn=null,c.updateQueue!=null){var q=c.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}F.H=gD,q=v(T,R)}while(Lu);return q}function cD(){var c=F.H,v=c.useState()[0];return v=typeof v.then=="function"?ld(v):v,c=c.useState()[0],(Zn!==null?Zn.memoizedState:null)!==c&&(bn.flags|=1024),v}function b0(){var c=yp!==0;return yp=0,c}function v0(c,v,T){v.updateQueue=c.updateQueue,v.flags&=-2053,c.lanes&=~T}function x0(c){if(gp){for(c=c.memoizedState;c!==null;){var v=c.queue;v!==null&&(v.pending=null),c=c.next}gp=!1}Si=0,Br=Zn=bn=null,Lu=!1,id=yp=0,Fu=null}function Hs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?bn.memoizedState=Br=c:Br=Br.next=c,Br}function Ur(){if(Zn===null){var c=bn.alternate;c=c!==null?c.memoizedState:null}else c=Zn.next;var v=Br===null?bn.memoizedState:Br.next;if(v!==null)Br=v,Zn=c;else{if(c===null)throw bn.alternate===null?Error(o(467)):Error(o(310));Zn=c,c={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},Br===null?bn.memoizedState=Br=c:Br=Br.next=c}return Br}function w0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ld(c){var v=id;return id+=1,Fu===null&&(Fu=[]),c=u2(Fu,c,v),v=bn,(Br===null?v.memoizedState:Br.next)===null&&(v=v.alternate,F.H=v===null||v.memoizedState===null?Z2:Q2),c}function bp(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return ld(c);if(c.$$typeof===w)return Ts(c)}throw Error(o(438,String(c)))}function S0(c){var v=null,T=bn.updateQueue;if(T!==null&&(v=T.memoCache),v==null){var R=bn.alternate;R!==null&&(R=R.updateQueue,R!==null&&(R=R.memoCache,R!=null&&(v={data:R.data.map(function(U){return U.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),T===null&&(T=w0(),bn.updateQueue=T),T.memoCache=v,T=v.data[v.index],T===void 0)for(T=v.data[v.index]=Array(c),R=0;R<c;R++)T[R]=O;return v.index++,T}function Ga(c,v){return typeof v=="function"?v(c):v}function vp(c){var v=Ur();return _0(v,Zn,c)}function _0(c,v,T){var R=c.queue;if(R===null)throw Error(o(311));R.lastRenderedReducer=T;var U=c.baseQueue,q=R.pending;if(q!==null){if(U!==null){var ae=U.next;U.next=q.next,q.next=ae}v.baseQueue=U=q,R.pending=null}if(q=c.baseState,U===null)c.memoizedState=q;else{v=U.next;var pe=ae=null,Ie=null,Ye=v,lt=!1;do{var ft=Ye.lane&-536870913;if(ft!==Ye.lane?(jn&ft)===ft:(Si&ft)===ft){var Je=Ye.revertLane;if(Je===0)Ie!==null&&(Ie=Ie.next={lane:0,revertLane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),ft===Mu&&(lt=!0);else if((Si&Je)===Je){Ye=Ye.next,Je===Mu&&(lt=!0);continue}else ft={lane:0,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},Ie===null?(pe=Ie=ft,ae=q):Ie=Ie.next=ft,bn.lanes|=Je,Ii|=Je;ft=Ye.action,kl&&T(q,ft),q=Ye.hasEagerState?Ye.eagerState:T(q,ft)}else Je={lane:ft,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},Ie===null?(pe=Ie=Je,ae=q):Ie=Ie.next=Je,bn.lanes|=ft,Ii|=ft;Ye=Ye.next}while(Ye!==null&&Ye!==v);if(Ie===null?ae=q:Ie.next=pe,!et(q,c.memoizedState)&&(is=!0,lt&&(T=Ou,T!==null)))throw T;c.memoizedState=q,c.baseState=ae,c.baseQueue=Ie,R.lastRenderedState=q}return U===null&&(R.lanes=0),[c.memoizedState,R.dispatch]}function C0(c){var v=Ur(),T=v.queue;if(T===null)throw Error(o(311));T.lastRenderedReducer=c;var R=T.dispatch,U=T.pending,q=v.memoizedState;if(U!==null){T.pending=null;var ae=U=U.next;do q=c(q,ae.action),ae=ae.next;while(ae!==U);et(q,v.memoizedState)||(is=!0),v.memoizedState=q,v.baseQueue===null&&(v.baseState=q),T.lastRenderedState=q}return[q,R]}function y2(c,v,T){var R=bn,U=Ur(),q=Fn;if(q){if(T===void 0)throw Error(o(407));T=T()}else T=v();var ae=!et((Zn||U).memoizedState,T);ae&&(U.memoizedState=T,is=!0),U=U.queue;var pe=x2.bind(null,R,U,c);if(ud(2048,8,pe,[c]),U.getSnapshot!==v||ae||Br!==null&&Br.memoizedState.tag&1){if(R.flags|=2048,Pu(9,xp(),v2.bind(null,R,U,T,v),null),ir===null)throw Error(o(349));q||(Si&124)!==0||b2(R,v,T)}return T}function b2(c,v,T){c.flags|=16384,c={getSnapshot:v,value:T},v=bn.updateQueue,v===null?(v=w0(),bn.updateQueue=v,v.stores=[c]):(T=v.stores,T===null?v.stores=[c]:T.push(c))}function v2(c,v,T,R){v.value=T,v.getSnapshot=R,w2(v)&&S2(c)}function x2(c,v,T){return T(function(){w2(v)&&S2(c)})}function w2(c){var v=c.getSnapshot;c=c.value;try{var T=v();return!et(c,T)}catch{return!0}}function S2(c){var v=Au(c,2);v!==null&&lo(v,c,2)}function k0(c){var v=Hs();if(typeof c=="function"){var T=c;if(c=T(),kl){We(!0);try{T()}finally{We(!1)}}}return v.memoizedState=v.baseState=c,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:c},v}function _2(c,v,T,R){return c.baseState=T,_0(c,Zn,typeof R=="function"?R:Ga)}function dD(c,v,T,R,U){if(Sp(c))throw Error(o(485));if(c=v.action,c!==null){var q={payload:U,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){q.listeners.push(ae)}};F.T!==null?T(!0):q.isTransition=!1,R(q),T=v.pending,T===null?(q.next=v.pending=q,C2(v,q)):(q.next=T.next,v.pending=T.next=q)}}function C2(c,v){var T=v.action,R=v.payload,U=c.state;if(v.isTransition){var q=F.T,ae={};F.T=ae;try{var pe=T(U,R),Ie=F.S;Ie!==null&&Ie(ae,pe),k2(c,v,pe)}catch(Ye){T0(c,v,Ye)}finally{F.T=q}}else try{q=T(U,R),k2(c,v,q)}catch(Ye){T0(c,v,Ye)}}function k2(c,v,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(R){T2(c,v,R)},function(R){return T0(c,v,R)}):T2(c,v,T)}function T2(c,v,T){v.status="fulfilled",v.value=T,E2(v),c.state=T,v=c.pending,v!==null&&(T=v.next,T===v?c.pending=null:(T=T.next,v.next=T,C2(c,T)))}function T0(c,v,T){var R=c.pending;if(c.pending=null,R!==null){R=R.next;do v.status="rejected",v.reason=T,E2(v),v=v.next;while(v!==R)}c.action=null}function E2(c){c=c.listeners;for(var v=0;v<c.length;v++)(0,c[v])()}function j2(c,v){return v}function I2(c,v){if(Fn){var T=ir.formState;if(T!==null){e:{var R=bn;if(Fn){if(Tr){t:{for(var U=Tr,q=ha;U.nodeType!==8;){if(!q){U=null;break t}if(U=qo(U.nextSibling),U===null){U=null;break t}}q=U.data,U=q==="F!"||q==="F"?U:null}if(U){Tr=qo(U.nextSibling),R=U.data==="F!";break e}}wl(R)}R=!1}R&&(v=T[0])}}return T=Hs(),T.memoizedState=T.baseState=v,R={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j2,lastRenderedState:v},T.queue=R,T=X2.bind(null,bn,R),R.dispatch=T,R=k0(!1),q=R0.bind(null,bn,!1,R.queue),R=Hs(),U={state:v,dispatch:null,action:c,pending:null},R.queue=U,T=dD.bind(null,bn,U,q,T),U.dispatch=T,R.memoizedState=c,[v,T,!1]}function A2(c){var v=Ur();return R2(v,Zn,c)}function R2(c,v,T){if(v=_0(c,v,j2)[0],c=vp(Ga)[0],typeof v=="object"&&v!==null&&typeof v.then=="function")try{var R=ld(v)}catch(ae){throw ae===nd?fp:ae}else R=v;v=Ur();var U=v.queue,q=U.dispatch;return T!==v.memoizedState&&(bn.flags|=2048,Pu(9,xp(),hD.bind(null,U,T),null)),[R,q,c]}function hD(c,v){c.action=v}function N2(c){var v=Ur(),T=Zn;if(T!==null)return R2(v,T,c);Ur(),v=v.memoizedState,T=Ur();var R=T.queue.dispatch;return T.memoizedState=c,[v,R,!1]}function Pu(c,v,T,R){return c={tag:c,create:T,deps:R,inst:v,next:null},v=bn.updateQueue,v===null&&(v=w0(),bn.updateQueue=v),T=v.lastEffect,T===null?v.lastEffect=c.next=c:(R=T.next,T.next=c,c.next=R,v.lastEffect=c),c}function xp(){return{destroy:void 0,resource:void 0}}function D2(){return Ur().memoizedState}function wp(c,v,T,R){var U=Hs();R=R===void 0?null:R,bn.flags|=c,U.memoizedState=Pu(1|v,xp(),T,R)}function ud(c,v,T,R){var U=Ur();R=R===void 0?null:R;var q=U.memoizedState.inst;Zn!==null&&R!==null&&g0(R,Zn.memoizedState.deps)?U.memoizedState=Pu(v,q,T,R):(bn.flags|=c,U.memoizedState=Pu(1|v,q,T,R))}function M2(c,v){wp(8390656,8,c,v)}function O2(c,v){ud(2048,8,c,v)}function $2(c,v){return ud(4,2,c,v)}function L2(c,v){return ud(4,4,c,v)}function F2(c,v){if(typeof v=="function"){c=c();var T=v(c);return function(){typeof T=="function"?T():v(null)}}if(v!=null)return c=c(),v.current=c,function(){v.current=null}}function P2(c,v,T){T=T!=null?T.concat([c]):null,ud(4,4,F2.bind(null,v,c),T)}function E0(){}function B2(c,v){var T=Ur();v=v===void 0?null:v;var R=T.memoizedState;return v!==null&&g0(v,R[1])?R[0]:(T.memoizedState=[c,v],c)}function U2(c,v){var T=Ur();v=v===void 0?null:v;var R=T.memoizedState;if(v!==null&&g0(v,R[1]))return R[0];if(R=c(),kl){We(!0);try{c()}finally{We(!1)}}return T.memoizedState=[R,v],R}function j0(c,v,T){return T===void 0||(Si&1073741824)!==0?c.memoizedState=v:(c.memoizedState=T,c=GS(),bn.lanes|=c,Ii|=c,T)}function z2(c,v,T,R){return et(T,v)?T:$u.current!==null?(c=j0(c,T,R),et(c,v)||(is=!0),c):(Si&42)===0?(is=!0,c.memoizedState=T):(c=GS(),bn.lanes|=c,Ii|=c,v)}function V2(c,v,T,R,U){var q=G.p;G.p=q!==0&&8>q?q:8;var ae=F.T,pe={};F.T=pe,R0(c,!1,v,T);try{var Ie=U(),Ye=F.S;if(Ye!==null&&Ye(pe,Ie),Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var lt=lD(Ie,R);cd(c,v,lt,io(c))}else cd(c,v,R,io(c))}catch(ft){cd(c,v,{then:function(){},status:"rejected",reason:ft},io())}finally{G.p=q,F.T=ae}}function fD(){}function I0(c,v,T,R){if(c.tag!==5)throw Error(o(476));var U=G2(c).queue;V2(c,U,v,W,T===null?fD:function(){return W2(c),T(R)})}function G2(c){var v=c.memoizedState;if(v!==null)return v;v={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:W},next:null};var T={};return v.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:T},next:null},c.memoizedState=v,c=c.alternate,c!==null&&(c.memoizedState=v),v}function W2(c){var v=G2(c).next.queue;cd(c,v,{},io())}function A0(){return Ts(jd)}function H2(){return Ur().memoizedState}function q2(){return Ur().memoizedState}function pD(c){for(var v=c.return;v!==null;){switch(v.tag){case 24:case 3:var T=io();c=xi(T);var R=wi(v,c,T);R!==null&&(lo(R,v,T),sd(R,v,T)),v={cache:a0()},c.payload=v;return}v=v.return}}function mD(c,v,T){var R=io();T={lane:R,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},Sp(c)?Y2(v,T):(T=Ky(c,v,T,R),T!==null&&(lo(T,c,R),K2(T,v,R)))}function X2(c,v,T){var R=io();cd(c,v,T,R)}function cd(c,v,T,R){var U={lane:R,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(Sp(c))Y2(v,U);else{var q=c.alternate;if(c.lanes===0&&(q===null||q.lanes===0)&&(q=v.lastRenderedReducer,q!==null))try{var ae=v.lastRenderedState,pe=q(ae,T);if(U.hasEagerState=!0,U.eagerState=pe,et(pe,ae))return op(c,v,U,0),ir===null&&sp(),!1}catch{}finally{}if(T=Ky(c,v,U,R),T!==null)return lo(T,c,R),K2(T,v,R),!0}return!1}function R0(c,v,T,R){if(R={lane:2,revertLane:ub(),action:R,hasEagerState:!1,eagerState:null,next:null},Sp(c)){if(v)throw Error(o(479))}else v=Ky(c,T,R,2),v!==null&&lo(v,c,2)}function Sp(c){var v=c.alternate;return c===bn||v!==null&&v===bn}function Y2(c,v){Lu=gp=!0;var T=c.pending;T===null?v.next=v:(v.next=T.next,T.next=v),c.pending=v}function K2(c,v,T){if((T&4194048)!==0){var R=v.lanes;R&=c.pendingLanes,T|=R,v.lanes=T,At(c,T)}}var _p={readContext:Ts,use:bp,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useLayoutEffect:Or,useInsertionEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useSyncExternalStore:Or,useId:Or,useHostTransitionStatus:Or,useFormState:Or,useActionState:Or,useOptimistic:Or,useMemoCache:Or,useCacheRefresh:Or},Z2={readContext:Ts,use:bp,useCallback:function(c,v){return Hs().memoizedState=[c,v===void 0?null:v],c},useContext:Ts,useEffect:M2,useImperativeHandle:function(c,v,T){T=T!=null?T.concat([c]):null,wp(4194308,4,F2.bind(null,v,c),T)},useLayoutEffect:function(c,v){return wp(4194308,4,c,v)},useInsertionEffect:function(c,v){wp(4,2,c,v)},useMemo:function(c,v){var T=Hs();v=v===void 0?null:v;var R=c();if(kl){We(!0);try{c()}finally{We(!1)}}return T.memoizedState=[R,v],R},useReducer:function(c,v,T){var R=Hs();if(T!==void 0){var U=T(v);if(kl){We(!0);try{T(v)}finally{We(!1)}}}else U=v;return R.memoizedState=R.baseState=U,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:U},R.queue=c,c=c.dispatch=mD.bind(null,bn,c),[R.memoizedState,c]},useRef:function(c){var v=Hs();return c={current:c},v.memoizedState=c},useState:function(c){c=k0(c);var v=c.queue,T=X2.bind(null,bn,v);return v.dispatch=T,[c.memoizedState,T]},useDebugValue:E0,useDeferredValue:function(c,v){var T=Hs();return j0(T,c,v)},useTransition:function(){var c=k0(!1);return c=V2.bind(null,bn,c.queue,!0,!1),Hs().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,v,T){var R=bn,U=Hs();if(Fn){if(T===void 0)throw Error(o(407));T=T()}else{if(T=v(),ir===null)throw Error(o(349));(jn&124)!==0||b2(R,v,T)}U.memoizedState=T;var q={value:T,getSnapshot:v};return U.queue=q,M2(x2.bind(null,R,q,c),[c]),R.flags|=2048,Pu(9,xp(),v2.bind(null,R,q,T,v),null),T},useId:function(){var c=Hs(),v=ir.identifierPrefix;if(Fn){var T=Ua,R=Ba;T=(R&~(1<<32-Ve(R)-1)).toString(32)+T,v="«"+v+"R"+T,T=yp++,0<T&&(v+="H"+T.toString(32)),v+="»"}else T=uD++,v="«"+v+"r"+T.toString(32)+"»";return c.memoizedState=v},useHostTransitionStatus:A0,useFormState:I2,useActionState:I2,useOptimistic:function(c){var v=Hs();v.memoizedState=v.baseState=c;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=T,v=R0.bind(null,bn,!0,T),T.dispatch=v,[c,v]},useMemoCache:S0,useCacheRefresh:function(){return Hs().memoizedState=pD.bind(null,bn)}},Q2={readContext:Ts,use:bp,useCallback:B2,useContext:Ts,useEffect:O2,useImperativeHandle:P2,useInsertionEffect:$2,useLayoutEffect:L2,useMemo:U2,useReducer:vp,useRef:D2,useState:function(){return vp(Ga)},useDebugValue:E0,useDeferredValue:function(c,v){var T=Ur();return z2(T,Zn.memoizedState,c,v)},useTransition:function(){var c=vp(Ga)[0],v=Ur().memoizedState;return[typeof c=="boolean"?c:ld(c),v]},useSyncExternalStore:y2,useId:H2,useHostTransitionStatus:A0,useFormState:A2,useActionState:A2,useOptimistic:function(c,v){var T=Ur();return _2(T,Zn,c,v)},useMemoCache:S0,useCacheRefresh:q2},gD={readContext:Ts,use:bp,useCallback:B2,useContext:Ts,useEffect:O2,useImperativeHandle:P2,useInsertionEffect:$2,useLayoutEffect:L2,useMemo:U2,useReducer:C0,useRef:D2,useState:function(){return C0(Ga)},useDebugValue:E0,useDeferredValue:function(c,v){var T=Ur();return Zn===null?j0(T,c,v):z2(T,Zn.memoizedState,c,v)},useTransition:function(){var c=C0(Ga)[0],v=Ur().memoizedState;return[typeof c=="boolean"?c:ld(c),v]},useSyncExternalStore:y2,useId:H2,useHostTransitionStatus:A0,useFormState:N2,useActionState:N2,useOptimistic:function(c,v){var T=Ur();return Zn!==null?_2(T,Zn,c,v):(T.baseState=c,[c,T.queue.dispatch])},useMemoCache:S0,useCacheRefresh:q2},Bu=null,dd=0;function Cp(c){var v=dd;return dd+=1,Bu===null&&(Bu=[]),u2(Bu,c,v)}function hd(c,v){v=v.props.ref,c.ref=v!==void 0?v:null}function kp(c,v){throw v.$$typeof===l?Error(o(525)):(c=Object.prototype.toString.call(v),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":c)))}function J2(c){var v=c._init;return v(c._payload)}function eS(c){function v(Ge,Oe){if(c){var qe=Ge.deletions;qe===null?(Ge.deletions=[Oe],Ge.flags|=16):qe.push(Oe)}}function T(Ge,Oe){if(!c)return null;for(;Oe!==null;)v(Ge,Oe),Oe=Oe.sibling;return null}function R(Ge){for(var Oe=new Map;Ge!==null;)Ge.key!==null?Oe.set(Ge.key,Ge):Oe.set(Ge.index,Ge),Ge=Ge.sibling;return Oe}function U(Ge,Oe){return Ge=Pa(Ge,Oe),Ge.index=0,Ge.sibling=null,Ge}function q(Ge,Oe,qe){return Ge.index=qe,c?(qe=Ge.alternate,qe!==null?(qe=qe.index,qe<Oe?(Ge.flags|=67108866,Oe):qe):(Ge.flags|=67108866,Oe)):(Ge.flags|=1048576,Oe)}function ae(Ge){return c&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function pe(Ge,Oe,qe,ct){return Oe===null||Oe.tag!==6?(Oe=Qy(qe,Ge.mode,ct),Oe.return=Ge,Oe):(Oe=U(Oe,qe),Oe.return=Ge,Oe)}function Ie(Ge,Oe,qe,ct){var Ut=qe.type;return Ut===S?lt(Ge,Oe,qe.props.children,ct,qe.key):Oe!==null&&(Oe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===j&&J2(Ut)===Oe.type)?(Oe=U(Oe,qe.props),hd(Oe,qe),Oe.return=Ge,Oe):(Oe=ip(qe.type,qe.key,qe.props,null,Ge.mode,ct),hd(Oe,qe),Oe.return=Ge,Oe)}function Ye(Ge,Oe,qe,ct){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==qe.containerInfo||Oe.stateNode.implementation!==qe.implementation?(Oe=Jy(qe,Ge.mode,ct),Oe.return=Ge,Oe):(Oe=U(Oe,qe.children||[]),Oe.return=Ge,Oe)}function lt(Ge,Oe,qe,ct,Ut){return Oe===null||Oe.tag!==7?(Oe=yl(qe,Ge.mode,ct,Ut),Oe.return=Ge,Oe):(Oe=U(Oe,qe),Oe.return=Ge,Oe)}function ft(Ge,Oe,qe){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=Qy(""+Oe,Ge.mode,qe),Oe.return=Ge,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case d:return qe=ip(Oe.type,Oe.key,Oe.props,null,Ge.mode,qe),hd(qe,Oe),qe.return=Ge,qe;case x:return Oe=Jy(Oe,Ge.mode,qe),Oe.return=Ge,Oe;case j:var ct=Oe._init;return Oe=ct(Oe._payload),ft(Ge,Oe,qe)}if(B(Oe)||D(Oe))return Oe=yl(Oe,Ge.mode,qe,null),Oe.return=Ge,Oe;if(typeof Oe.then=="function")return ft(Ge,Cp(Oe),qe);if(Oe.$$typeof===w)return ft(Ge,dp(Ge,Oe),qe);kp(Ge,Oe)}return null}function Je(Ge,Oe,qe,ct){var Ut=Oe!==null?Oe.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return Ut!==null?null:pe(Ge,Oe,""+qe,ct);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case d:return qe.key===Ut?Ie(Ge,Oe,qe,ct):null;case x:return qe.key===Ut?Ye(Ge,Oe,qe,ct):null;case j:return Ut=qe._init,qe=Ut(qe._payload),Je(Ge,Oe,qe,ct)}if(B(qe)||D(qe))return Ut!==null?null:lt(Ge,Oe,qe,ct,null);if(typeof qe.then=="function")return Je(Ge,Oe,Cp(qe),ct);if(qe.$$typeof===w)return Je(Ge,Oe,dp(Ge,qe),ct);kp(Ge,qe)}return null}function rt(Ge,Oe,qe,ct,Ut){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Ge=Ge.get(qe)||null,pe(Oe,Ge,""+ct,Ut);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case d:return Ge=Ge.get(ct.key===null?qe:ct.key)||null,Ie(Oe,Ge,ct,Ut);case x:return Ge=Ge.get(ct.key===null?qe:ct.key)||null,Ye(Oe,Ge,ct,Ut);case j:var vn=ct._init;return ct=vn(ct._payload),rt(Ge,Oe,qe,ct,Ut)}if(B(ct)||D(ct))return Ge=Ge.get(qe)||null,lt(Oe,Ge,ct,Ut,null);if(typeof ct.then=="function")return rt(Ge,Oe,qe,Cp(ct),Ut);if(ct.$$typeof===w)return rt(Ge,Oe,qe,dp(Oe,ct),Ut);kp(Oe,ct)}return null}function Jt(Ge,Oe,qe,ct){for(var Ut=null,vn=null,Gt=Oe,Kt=Oe=0,us=null;Gt!==null&&Kt<qe.length;Kt++){Gt.index>Kt?(us=Gt,Gt=null):us=Gt.sibling;var Dn=Je(Ge,Gt,qe[Kt],ct);if(Dn===null){Gt===null&&(Gt=us);break}c&&Gt&&Dn.alternate===null&&v(Ge,Gt),Oe=q(Dn,Oe,Kt),vn===null?Ut=Dn:vn.sibling=Dn,vn=Dn,Gt=us}if(Kt===qe.length)return T(Ge,Gt),Fn&&vl(Ge,Kt),Ut;if(Gt===null){for(;Kt<qe.length;Kt++)Gt=ft(Ge,qe[Kt],ct),Gt!==null&&(Oe=q(Gt,Oe,Kt),vn===null?Ut=Gt:vn.sibling=Gt,vn=Gt);return Fn&&vl(Ge,Kt),Ut}for(Gt=R(Gt);Kt<qe.length;Kt++)us=rt(Gt,Ge,Kt,qe[Kt],ct),us!==null&&(c&&us.alternate!==null&&Gt.delete(us.key===null?Kt:us.key),Oe=q(us,Oe,Kt),vn===null?Ut=us:vn.sibling=us,vn=us);return c&&Gt.forEach(function(Fi){return v(Ge,Fi)}),Fn&&vl(Ge,Kt),Ut}function Xt(Ge,Oe,qe,ct){if(qe==null)throw Error(o(151));for(var Ut=null,vn=null,Gt=Oe,Kt=Oe=0,us=null,Dn=qe.next();Gt!==null&&!Dn.done;Kt++,Dn=qe.next()){Gt.index>Kt?(us=Gt,Gt=null):us=Gt.sibling;var Fi=Je(Ge,Gt,Dn.value,ct);if(Fi===null){Gt===null&&(Gt=us);break}c&&Gt&&Fi.alternate===null&&v(Ge,Gt),Oe=q(Fi,Oe,Kt),vn===null?Ut=Fi:vn.sibling=Fi,vn=Fi,Gt=us}if(Dn.done)return T(Ge,Gt),Fn&&vl(Ge,Kt),Ut;if(Gt===null){for(;!Dn.done;Kt++,Dn=qe.next())Dn=ft(Ge,Dn.value,ct),Dn!==null&&(Oe=q(Dn,Oe,Kt),vn===null?Ut=Dn:vn.sibling=Dn,vn=Dn);return Fn&&vl(Ge,Kt),Ut}for(Gt=R(Gt);!Dn.done;Kt++,Dn=qe.next())Dn=rt(Gt,Ge,Kt,Dn.value,ct),Dn!==null&&(c&&Dn.alternate!==null&&Gt.delete(Dn.key===null?Kt:Dn.key),Oe=q(Dn,Oe,Kt),vn===null?Ut=Dn:vn.sibling=Dn,vn=Dn);return c&&Gt.forEach(function(yM){return v(Ge,yM)}),Fn&&vl(Ge,Kt),Ut}function Jn(Ge,Oe,qe,ct){if(typeof qe=="object"&&qe!==null&&qe.type===S&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case d:e:{for(var Ut=qe.key;Oe!==null;){if(Oe.key===Ut){if(Ut=qe.type,Ut===S){if(Oe.tag===7){T(Ge,Oe.sibling),ct=U(Oe,qe.props.children),ct.return=Ge,Ge=ct;break e}}else if(Oe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===j&&J2(Ut)===Oe.type){T(Ge,Oe.sibling),ct=U(Oe,qe.props),hd(ct,qe),ct.return=Ge,Ge=ct;break e}T(Ge,Oe);break}else v(Ge,Oe);Oe=Oe.sibling}qe.type===S?(ct=yl(qe.props.children,Ge.mode,ct,qe.key),ct.return=Ge,Ge=ct):(ct=ip(qe.type,qe.key,qe.props,null,Ge.mode,ct),hd(ct,qe),ct.return=Ge,Ge=ct)}return ae(Ge);case x:e:{for(Ut=qe.key;Oe!==null;){if(Oe.key===Ut)if(Oe.tag===4&&Oe.stateNode.containerInfo===qe.containerInfo&&Oe.stateNode.implementation===qe.implementation){T(Ge,Oe.sibling),ct=U(Oe,qe.children||[]),ct.return=Ge,Ge=ct;break e}else{T(Ge,Oe);break}else v(Ge,Oe);Oe=Oe.sibling}ct=Jy(qe,Ge.mode,ct),ct.return=Ge,Ge=ct}return ae(Ge);case j:return Ut=qe._init,qe=Ut(qe._payload),Jn(Ge,Oe,qe,ct)}if(B(qe))return Jt(Ge,Oe,qe,ct);if(D(qe)){if(Ut=D(qe),typeof Ut!="function")throw Error(o(150));return qe=Ut.call(qe),Xt(Ge,Oe,qe,ct)}if(typeof qe.then=="function")return Jn(Ge,Oe,Cp(qe),ct);if(qe.$$typeof===w)return Jn(Ge,Oe,dp(Ge,qe),ct);kp(Ge,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint"?(qe=""+qe,Oe!==null&&Oe.tag===6?(T(Ge,Oe.sibling),ct=U(Oe,qe),ct.return=Ge,Ge=ct):(T(Ge,Oe),ct=Qy(qe,Ge.mode,ct),ct.return=Ge,Ge=ct),ae(Ge)):T(Ge,Oe)}return function(Ge,Oe,qe,ct){try{dd=0;var Ut=Jn(Ge,Oe,qe,ct);return Bu=null,Ut}catch(Gt){if(Gt===nd||Gt===fp)throw Gt;var vn=ro(29,Gt,null,Ge.mode);return vn.lanes=ct,vn.return=Ge,vn}finally{}}}var Uu=eS(!0),tS=eS(!1),ko=Y(null),fa=null;function _i(c){var v=c.alternate;J(Jr,Jr.current&1),J(ko,c),fa===null&&(v===null||$u.current!==null||v.memoizedState!==null)&&(fa=c)}function nS(c){if(c.tag===22){if(J(Jr,Jr.current),J(ko,c),fa===null){var v=c.alternate;v!==null&&v.memoizedState!==null&&(fa=c)}}else Ci()}function Ci(){J(Jr,Jr.current),J(ko,ko.current)}function Wa(c){Z(ko),fa===c&&(fa=null),Z(Jr)}var Jr=Y(0);function Tp(c){for(var v=c;v!==null;){if(v.tag===13){var T=v.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||T.data==="$?"||wb(T)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}function N0(c,v,T,R){v=c.memoizedState,T=T(R,v),T=T==null?v:u({},v,T),c.memoizedState=T,c.lanes===0&&(c.updateQueue.baseState=T)}var D0={enqueueSetState:function(c,v,T){c=c._reactInternals;var R=io(),U=xi(R);U.payload=v,T!=null&&(U.callback=T),v=wi(c,U,R),v!==null&&(lo(v,c,R),sd(v,c,R))},enqueueReplaceState:function(c,v,T){c=c._reactInternals;var R=io(),U=xi(R);U.tag=1,U.payload=v,T!=null&&(U.callback=T),v=wi(c,U,R),v!==null&&(lo(v,c,R),sd(v,c,R))},enqueueForceUpdate:function(c,v){c=c._reactInternals;var T=io(),R=xi(T);R.tag=2,v!=null&&(R.callback=v),v=wi(c,R,T),v!==null&&(lo(v,c,T),sd(v,c,T))}};function rS(c,v,T,R,U,q,ae){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(R,q,ae):v.prototype&&v.prototype.isPureReactComponent?!nt(T,R)||!nt(U,q):!0}function sS(c,v,T,R){c=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(T,R),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(T,R),v.state!==c&&D0.enqueueReplaceState(v,v.state,null)}function Tl(c,v){var T=v;if("ref"in v){T={};for(var R in v)R!=="ref"&&(T[R]=v[R])}if(c=c.defaultProps){T===v&&(T=u({},T));for(var U in c)T[U]===void 0&&(T[U]=c[U])}return T}var Ep=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function oS(c){Ep(c)}function aS(c){console.error(c)}function iS(c){Ep(c)}function jp(c,v){try{var T=c.onUncaughtError;T(v.value,{componentStack:v.stack})}catch(R){setTimeout(function(){throw R})}}function lS(c,v,T){try{var R=c.onCaughtError;R(T.value,{componentStack:T.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function M0(c,v,T){return T=xi(T),T.tag=3,T.payload={element:null},T.callback=function(){jp(c,v)},T}function uS(c){return c=xi(c),c.tag=3,c}function cS(c,v,T,R){var U=T.type.getDerivedStateFromError;if(typeof U=="function"){var q=R.value;c.payload=function(){return U(q)},c.callback=function(){lS(v,T,R)}}var ae=T.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(c.callback=function(){lS(v,T,R),typeof U!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var pe=R.stack;this.componentDidCatch(R.value,{componentStack:pe!==null?pe:""})})}function yD(c,v,T,R,U){if(T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){if(v=T.alternate,v!==null&&Jc(v,T,U,!0),T=ko.current,T!==null){switch(T.tag){case 13:return fa===null?sb():T.alternate===null&&Er===0&&(Er=3),T.flags&=-257,T.flags|=65536,T.lanes=U,R===u0?T.flags|=16384:(v=T.updateQueue,v===null?T.updateQueue=new Set([R]):v.add(R),ab(c,R,U)),!1;case 22:return T.flags|=65536,R===u0?T.flags|=16384:(v=T.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([R])},T.updateQueue=v):(T=v.retryQueue,T===null?v.retryQueue=new Set([R]):T.add(R)),ab(c,R,U)),!1}throw Error(o(435,T.tag))}return ab(c,R,U),sb(),!1}if(Fn)return v=ko.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=U,R!==n0&&(c=Error(o(422),{cause:R}),Qc(wo(c,T)))):(R!==n0&&(v=Error(o(423),{cause:R}),Qc(wo(v,T))),c=c.current.alternate,c.flags|=65536,U&=-U,c.lanes|=U,R=wo(R,T),U=M0(c.stateNode,R,U),h0(c,U),Er!==4&&(Er=2)),!1;var q=Error(o(520),{cause:R});if(q=wo(q,T),vd===null?vd=[q]:vd.push(q),Er!==4&&(Er=2),v===null)return!0;R=wo(R,T),T=v;do{switch(T.tag){case 3:return T.flags|=65536,c=U&-U,T.lanes|=c,c=M0(T.stateNode,R,c),h0(T,c),!1;case 1:if(v=T.type,q=T.stateNode,(T.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Ai===null||!Ai.has(q))))return T.flags|=65536,U&=-U,T.lanes|=U,U=uS(U),cS(U,c,T,R),h0(T,U),!1}T=T.return}while(T!==null);return!1}var dS=Error(o(461)),is=!1;function ms(c,v,T,R){v.child=c===null?tS(v,null,T,R):Uu(v,c.child,T,R)}function hS(c,v,T,R,U){T=T.render;var q=v.ref;if("ref"in R){var ae={};for(var pe in R)pe!=="ref"&&(ae[pe]=R[pe])}else ae=R;return _l(v),R=y0(c,v,T,ae,q,U),pe=b0(),c!==null&&!is?(v0(c,v,U),Ha(c,v,U)):(Fn&&pe&&e0(v),v.flags|=1,ms(c,v,R,U),v.child)}function fS(c,v,T,R,U){if(c===null){var q=T.type;return typeof q=="function"&&!Zy(q)&&q.defaultProps===void 0&&T.compare===null?(v.tag=15,v.type=q,pS(c,v,q,R,U)):(c=ip(T.type,null,R,v,v.mode,U),c.ref=v.ref,c.return=v,v.child=c)}if(q=c.child,!z0(c,U)){var ae=q.memoizedProps;if(T=T.compare,T=T!==null?T:nt,T(ae,R)&&c.ref===v.ref)return Ha(c,v,U)}return v.flags|=1,c=Pa(q,R),c.ref=v.ref,c.return=v,v.child=c}function pS(c,v,T,R,U){if(c!==null){var q=c.memoizedProps;if(nt(q,R)&&c.ref===v.ref)if(is=!1,v.pendingProps=R=q,z0(c,U))(c.flags&131072)!==0&&(is=!0);else return v.lanes=c.lanes,Ha(c,v,U)}return O0(c,v,T,R,U)}function mS(c,v,T){var R=v.pendingProps,U=R.children,q=c!==null?c.memoizedState:null;if(R.mode==="hidden"){if((v.flags&128)!==0){if(R=q!==null?q.baseLanes|T:T,c!==null){for(U=v.child=c.child,q=0;U!==null;)q=q|U.lanes|U.childLanes,U=U.sibling;v.childLanes=q&~R}else v.childLanes=0,v.child=null;return gS(c,v,R,T)}if((T&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},c!==null&&hp(v,q!==null?q.cachePool:null),q!==null?p2(v,q):p0(),nS(v);else return v.lanes=v.childLanes=536870912,gS(c,v,q!==null?q.baseLanes|T:T,T)}else q!==null?(hp(v,q.cachePool),p2(v,q),Ci(),v.memoizedState=null):(c!==null&&hp(v,null),p0(),Ci());return ms(c,v,U,T),v.child}function gS(c,v,T,R){var U=l0();return U=U===null?null:{parent:Qr._currentValue,pool:U},v.memoizedState={baseLanes:T,cachePool:U},c!==null&&hp(v,null),p0(),nS(v),c!==null&&Jc(c,v,R,!0),null}function Ip(c,v){var T=v.ref;if(T===null)c!==null&&c.ref!==null&&(v.flags|=4194816);else{if(typeof T!="function"&&typeof T!="object")throw Error(o(284));(c===null||c.ref!==T)&&(v.flags|=4194816)}}function O0(c,v,T,R,U){return _l(v),T=y0(c,v,T,R,void 0,U),R=b0(),c!==null&&!is?(v0(c,v,U),Ha(c,v,U)):(Fn&&R&&e0(v),v.flags|=1,ms(c,v,T,U),v.child)}function yS(c,v,T,R,U,q){return _l(v),v.updateQueue=null,T=g2(v,R,T,U),m2(c),R=b0(),c!==null&&!is?(v0(c,v,q),Ha(c,v,q)):(Fn&&R&&e0(v),v.flags|=1,ms(c,v,T,q),v.child)}function bS(c,v,T,R,U){if(_l(v),v.stateNode===null){var q=Ru,ae=T.contextType;typeof ae=="object"&&ae!==null&&(q=Ts(ae)),q=new T(R,q),v.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=D0,v.stateNode=q,q._reactInternals=v,q=v.stateNode,q.props=R,q.state=v.memoizedState,q.refs={},c0(v),ae=T.contextType,q.context=typeof ae=="object"&&ae!==null?Ts(ae):Ru,q.state=v.memoizedState,ae=T.getDerivedStateFromProps,typeof ae=="function"&&(N0(v,T,ae,R),q.state=v.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(ae=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),ae!==q.state&&D0.enqueueReplaceState(q,q.state,null),ad(v,R,q,U),od(),q.state=v.memoizedState),typeof q.componentDidMount=="function"&&(v.flags|=4194308),R=!0}else if(c===null){q=v.stateNode;var pe=v.memoizedProps,Ie=Tl(T,pe);q.props=Ie;var Ye=q.context,lt=T.contextType;ae=Ru,typeof lt=="object"&&lt!==null&&(ae=Ts(lt));var ft=T.getDerivedStateFromProps;lt=typeof ft=="function"||typeof q.getSnapshotBeforeUpdate=="function",pe=v.pendingProps!==pe,lt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(pe||Ye!==ae)&&sS(v,q,R,ae),vi=!1;var Je=v.memoizedState;q.state=Je,ad(v,R,q,U),od(),Ye=v.memoizedState,pe||Je!==Ye||vi?(typeof ft=="function"&&(N0(v,T,ft,R),Ye=v.memoizedState),(Ie=vi||rS(v,T,Ie,R,Je,Ye,ae))?(lt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(v.flags|=4194308)):(typeof q.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=R,v.memoizedState=Ye),q.props=R,q.state=Ye,q.context=ae,R=Ie):(typeof q.componentDidMount=="function"&&(v.flags|=4194308),R=!1)}else{q=v.stateNode,d0(c,v),ae=v.memoizedProps,lt=Tl(T,ae),q.props=lt,ft=v.pendingProps,Je=q.context,Ye=T.contextType,Ie=Ru,typeof Ye=="object"&&Ye!==null&&(Ie=Ts(Ye)),pe=T.getDerivedStateFromProps,(Ye=typeof pe=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ae!==ft||Je!==Ie)&&sS(v,q,R,Ie),vi=!1,Je=v.memoizedState,q.state=Je,ad(v,R,q,U),od();var rt=v.memoizedState;ae!==ft||Je!==rt||vi||c!==null&&c.dependencies!==null&&cp(c.dependencies)?(typeof pe=="function"&&(N0(v,T,pe,R),rt=v.memoizedState),(lt=vi||rS(v,T,lt,R,Je,rt,Ie)||c!==null&&c.dependencies!==null&&cp(c.dependencies))?(Ye||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(R,rt,Ie),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(R,rt,Ie)),typeof q.componentDidUpdate=="function"&&(v.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof q.componentDidUpdate!="function"||ae===c.memoizedProps&&Je===c.memoizedState||(v.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&Je===c.memoizedState||(v.flags|=1024),v.memoizedProps=R,v.memoizedState=rt),q.props=R,q.state=rt,q.context=Ie,R=lt):(typeof q.componentDidUpdate!="function"||ae===c.memoizedProps&&Je===c.memoizedState||(v.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&Je===c.memoizedState||(v.flags|=1024),R=!1)}return q=R,Ip(c,v),R=(v.flags&128)!==0,q||R?(q=v.stateNode,T=R&&typeof T.getDerivedStateFromError!="function"?null:q.render(),v.flags|=1,c!==null&&R?(v.child=Uu(v,c.child,null,U),v.child=Uu(v,null,T,U)):ms(c,v,T,U),v.memoizedState=q.state,c=v.child):c=Ha(c,v,U),c}function vS(c,v,T,R){return Zc(),v.flags|=256,ms(c,v,T,R),v.child}var $0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function L0(c){return{baseLanes:c,cachePool:a2()}}function F0(c,v,T){return c=c!==null?c.childLanes&~T:0,v&&(c|=To),c}function xS(c,v,T){var R=v.pendingProps,U=!1,q=(v.flags&128)!==0,ae;if((ae=q)||(ae=c!==null&&c.memoizedState===null?!1:(Jr.current&2)!==0),ae&&(U=!0,v.flags&=-129),ae=(v.flags&32)!==0,v.flags&=-33,c===null){if(Fn){if(U?_i(v):Ci(),Fn){var pe=Tr,Ie;if(Ie=pe){e:{for(Ie=pe,pe=ha;Ie.nodeType!==8;){if(!pe){pe=null;break e}if(Ie=qo(Ie.nextSibling),Ie===null){pe=null;break e}}pe=Ie}pe!==null?(v.memoizedState={dehydrated:pe,treeContext:bl!==null?{id:Ba,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},Ie=ro(18,null,null,0),Ie.stateNode=pe,Ie.return=v,v.child=Ie,Os=v,Tr=null,Ie=!0):Ie=!1}Ie||wl(v)}if(pe=v.memoizedState,pe!==null&&(pe=pe.dehydrated,pe!==null))return wb(pe)?v.lanes=32:v.lanes=536870912,null;Wa(v)}return pe=R.children,R=R.fallback,U?(Ci(),U=v.mode,pe=Ap({mode:"hidden",children:pe},U),R=yl(R,U,T,null),pe.return=v,R.return=v,pe.sibling=R,v.child=pe,U=v.child,U.memoizedState=L0(T),U.childLanes=F0(c,ae,T),v.memoizedState=$0,R):(_i(v),P0(v,pe))}if(Ie=c.memoizedState,Ie!==null&&(pe=Ie.dehydrated,pe!==null)){if(q)v.flags&256?(_i(v),v.flags&=-257,v=B0(c,v,T)):v.memoizedState!==null?(Ci(),v.child=c.child,v.flags|=128,v=null):(Ci(),U=R.fallback,pe=v.mode,R=Ap({mode:"visible",children:R.children},pe),U=yl(U,pe,T,null),U.flags|=2,R.return=v,U.return=v,R.sibling=U,v.child=R,Uu(v,c.child,null,T),R=v.child,R.memoizedState=L0(T),R.childLanes=F0(c,ae,T),v.memoizedState=$0,v=U);else if(_i(v),wb(pe)){if(ae=pe.nextSibling&&pe.nextSibling.dataset,ae)var Ye=ae.dgst;ae=Ye,R=Error(o(419)),R.stack="",R.digest=ae,Qc({value:R,source:null,stack:null}),v=B0(c,v,T)}else if(is||Jc(c,v,T,!1),ae=(T&c.childLanes)!==0,is||ae){if(ae=ir,ae!==null&&(R=T&-T,R=(R&42)!==0?1:nn(R),R=(R&(ae.suspendedLanes|T))!==0?0:R,R!==0&&R!==Ie.retryLane))throw Ie.retryLane=R,Au(c,R),lo(ae,c,R),dS;pe.data==="$?"||sb(),v=B0(c,v,T)}else pe.data==="$?"?(v.flags|=192,v.child=c.child,v=null):(c=Ie.treeContext,Tr=qo(pe.nextSibling),Os=v,Fn=!0,xl=null,ha=!1,c!==null&&(_o[Co++]=Ba,_o[Co++]=Ua,_o[Co++]=bl,Ba=c.id,Ua=c.overflow,bl=v),v=P0(v,R.children),v.flags|=4096);return v}return U?(Ci(),U=R.fallback,pe=v.mode,Ie=c.child,Ye=Ie.sibling,R=Pa(Ie,{mode:"hidden",children:R.children}),R.subtreeFlags=Ie.subtreeFlags&65011712,Ye!==null?U=Pa(Ye,U):(U=yl(U,pe,T,null),U.flags|=2),U.return=v,R.return=v,R.sibling=U,v.child=R,R=U,U=v.child,pe=c.child.memoizedState,pe===null?pe=L0(T):(Ie=pe.cachePool,Ie!==null?(Ye=Qr._currentValue,Ie=Ie.parent!==Ye?{parent:Ye,pool:Ye}:Ie):Ie=a2(),pe={baseLanes:pe.baseLanes|T,cachePool:Ie}),U.memoizedState=pe,U.childLanes=F0(c,ae,T),v.memoizedState=$0,R):(_i(v),T=c.child,c=T.sibling,T=Pa(T,{mode:"visible",children:R.children}),T.return=v,T.sibling=null,c!==null&&(ae=v.deletions,ae===null?(v.deletions=[c],v.flags|=16):ae.push(c)),v.child=T,v.memoizedState=null,T)}function P0(c,v){return v=Ap({mode:"visible",children:v},c.mode),v.return=c,c.child=v}function Ap(c,v){return c=ro(22,c,null,v),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function B0(c,v,T){return Uu(v,c.child,null,T),c=P0(v,v.pendingProps.children),c.flags|=2,v.memoizedState=null,c}function wS(c,v,T){c.lanes|=v;var R=c.alternate;R!==null&&(R.lanes|=v),s0(c.return,v,T)}function U0(c,v,T,R,U){var q=c.memoizedState;q===null?c.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:R,tail:T,tailMode:U}:(q.isBackwards=v,q.rendering=null,q.renderingStartTime=0,q.last=R,q.tail=T,q.tailMode=U)}function SS(c,v,T){var R=v.pendingProps,U=R.revealOrder,q=R.tail;if(ms(c,v,R.children,T),R=Jr.current,(R&2)!==0)R=R&1|2,v.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=v.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&wS(c,T,v);else if(c.tag===19)wS(c,T,v);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===v)break e;for(;c.sibling===null;){if(c.return===null||c.return===v)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}R&=1}switch(J(Jr,R),U){case"forwards":for(T=v.child,U=null;T!==null;)c=T.alternate,c!==null&&Tp(c)===null&&(U=T),T=T.sibling;T=U,T===null?(U=v.child,v.child=null):(U=T.sibling,T.sibling=null),U0(v,!1,U,T,q);break;case"backwards":for(T=null,U=v.child,v.child=null;U!==null;){if(c=U.alternate,c!==null&&Tp(c)===null){v.child=U;break}c=U.sibling,U.sibling=T,T=U,U=c}U0(v,!0,T,null,q);break;case"together":U0(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Ha(c,v,T){if(c!==null&&(v.dependencies=c.dependencies),Ii|=v.lanes,(T&v.childLanes)===0)if(c!==null){if(Jc(c,v,T,!1),(T&v.childLanes)===0)return null}else return null;if(c!==null&&v.child!==c.child)throw Error(o(153));if(v.child!==null){for(c=v.child,T=Pa(c,c.pendingProps),v.child=T,T.return=v;c.sibling!==null;)c=c.sibling,T=T.sibling=Pa(c,c.pendingProps),T.return=v;T.sibling=null}return v.child}function z0(c,v){return(c.lanes&v)!==0?!0:(c=c.dependencies,!!(c!==null&&cp(c)))}function bD(c,v,T){switch(v.tag){case 3:Q(v,v.stateNode.containerInfo),bi(v,Qr,c.memoizedState.cache),Zc();break;case 27:case 5:ce(v);break;case 4:Q(v,v.stateNode.containerInfo);break;case 10:bi(v,v.type,v.memoizedProps.value);break;case 13:var R=v.memoizedState;if(R!==null)return R.dehydrated!==null?(_i(v),v.flags|=128,null):(T&v.child.childLanes)!==0?xS(c,v,T):(_i(v),c=Ha(c,v,T),c!==null?c.sibling:null);_i(v);break;case 19:var U=(c.flags&128)!==0;if(R=(T&v.childLanes)!==0,R||(Jc(c,v,T,!1),R=(T&v.childLanes)!==0),U){if(R)return SS(c,v,T);v.flags|=128}if(U=v.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),J(Jr,Jr.current),R)break;return null;case 22:case 23:return v.lanes=0,mS(c,v,T);case 24:bi(v,Qr,c.memoizedState.cache)}return Ha(c,v,T)}function _S(c,v,T){if(c!==null)if(c.memoizedProps!==v.pendingProps)is=!0;else{if(!z0(c,T)&&(v.flags&128)===0)return is=!1,bD(c,v,T);is=(c.flags&131072)!==0}else is=!1,Fn&&(v.flags&1048576)!==0&&Jw(v,up,v.index);switch(v.lanes=0,v.tag){case 16:e:{c=v.pendingProps;var R=v.elementType,U=R._init;if(R=U(R._payload),v.type=R,typeof R=="function")Zy(R)?(c=Tl(R,c),v.tag=1,v=bS(null,v,R,c,T)):(v.tag=0,v=O0(null,v,R,c,T));else{if(R!=null){if(U=R.$$typeof,U===_){v.tag=11,v=hS(null,v,R,c,T);break e}else if(U===E){v.tag=14,v=fS(null,v,R,c,T);break e}}throw v=$(R)||R,Error(o(306,v,""))}}return v;case 0:return O0(c,v,v.type,v.pendingProps,T);case 1:return R=v.type,U=Tl(R,v.pendingProps),bS(c,v,R,U,T);case 3:e:{if(Q(v,v.stateNode.containerInfo),c===null)throw Error(o(387));R=v.pendingProps;var q=v.memoizedState;U=q.element,d0(c,v),ad(v,R,null,T);var ae=v.memoizedState;if(R=ae.cache,bi(v,Qr,R),R!==q.cache&&o0(v,[Qr],T,!0),od(),R=ae.element,q.isDehydrated)if(q={element:R,isDehydrated:!1,cache:ae.cache},v.updateQueue.baseState=q,v.memoizedState=q,v.flags&256){v=vS(c,v,R,T);break e}else if(R!==U){U=wo(Error(o(424)),v),Qc(U),v=vS(c,v,R,T);break e}else{switch(c=v.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Tr=qo(c.firstChild),Os=v,Fn=!0,xl=null,ha=!0,T=tS(v,null,R,T),v.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling}else{if(Zc(),R===U){v=Ha(c,v,T);break e}ms(c,v,R,T)}v=v.child}return v;case 26:return Ip(c,v),c===null?(T=E_(v.type,null,v.pendingProps,null))?v.memoizedState=T:Fn||(T=v.type,c=v.pendingProps,R=Gp(ie.current).createElement(T),R[Qt]=v,R[an]=c,ys(R,T,c),xr(R),v.stateNode=R):v.memoizedState=E_(v.type,c.memoizedProps,v.pendingProps,c.memoizedState),null;case 27:return ce(v),c===null&&Fn&&(R=v.stateNode=C_(v.type,v.pendingProps,ie.current),Os=v,ha=!0,U=Tr,Di(v.type)?(Sb=U,Tr=qo(R.firstChild)):Tr=U),ms(c,v,v.pendingProps.children,T),Ip(c,v),c===null&&(v.flags|=4194304),v.child;case 5:return c===null&&Fn&&((U=R=Tr)&&(R=HD(R,v.type,v.pendingProps,ha),R!==null?(v.stateNode=R,Os=v,Tr=qo(R.firstChild),ha=!1,U=!0):U=!1),U||wl(v)),ce(v),U=v.type,q=v.pendingProps,ae=c!==null?c.memoizedProps:null,R=q.children,bb(U,q)?R=null:ae!==null&&bb(U,ae)&&(v.flags|=32),v.memoizedState!==null&&(U=y0(c,v,cD,null,null,T),jd._currentValue=U),Ip(c,v),ms(c,v,R,T),v.child;case 6:return c===null&&Fn&&((c=T=Tr)&&(T=qD(T,v.pendingProps,ha),T!==null?(v.stateNode=T,Os=v,Tr=null,c=!0):c=!1),c||wl(v)),null;case 13:return xS(c,v,T);case 4:return Q(v,v.stateNode.containerInfo),R=v.pendingProps,c===null?v.child=Uu(v,null,R,T):ms(c,v,R,T),v.child;case 11:return hS(c,v,v.type,v.pendingProps,T);case 7:return ms(c,v,v.pendingProps,T),v.child;case 8:return ms(c,v,v.pendingProps.children,T),v.child;case 12:return ms(c,v,v.pendingProps.children,T),v.child;case 10:return R=v.pendingProps,bi(v,v.type,R.value),ms(c,v,R.children,T),v.child;case 9:return U=v.type._context,R=v.pendingProps.children,_l(v),U=Ts(U),R=R(U),v.flags|=1,ms(c,v,R,T),v.child;case 14:return fS(c,v,v.type,v.pendingProps,T);case 15:return pS(c,v,v.type,v.pendingProps,T);case 19:return SS(c,v,T);case 31:return R=v.pendingProps,T=v.mode,R={mode:R.mode,children:R.children},c===null?(T=Ap(R,T),T.ref=v.ref,v.child=T,T.return=v,v=T):(T=Pa(c.child,R),T.ref=v.ref,v.child=T,T.return=v,v=T),v;case 22:return mS(c,v,T);case 24:return _l(v),R=Ts(Qr),c===null?(U=l0(),U===null&&(U=ir,q=a0(),U.pooledCache=q,q.refCount++,q!==null&&(U.pooledCacheLanes|=T),U=q),v.memoizedState={parent:R,cache:U},c0(v),bi(v,Qr,U)):((c.lanes&T)!==0&&(d0(c,v),ad(v,null,null,T),od()),U=c.memoizedState,q=v.memoizedState,U.parent!==R?(U={parent:R,cache:R},v.memoizedState=U,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=U),bi(v,Qr,R)):(R=q.cache,bi(v,Qr,R),R!==U.cache&&o0(v,[Qr],T,!0))),ms(c,v,v.pendingProps.children,T),v.child;case 29:throw v.pendingProps}throw Error(o(156,v.tag))}function qa(c){c.flags|=4}function CS(c,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!N_(v)){if(v=ko.current,v!==null&&((jn&4194048)===jn?fa!==null:(jn&62914560)!==jn&&(jn&536870912)===0||v!==fa))throw rd=u0,i2;c.flags|=8192}}function Rp(c,v){v!==null&&(c.flags|=4),c.flags&16384&&(v=c.tag!==22?Ze():536870912,c.lanes|=v,Wu|=v)}function fd(c,v){if(!Fn)switch(c.tailMode){case"hidden":v=c.tail;for(var T=null;v!==null;)v.alternate!==null&&(T=v),v=v.sibling;T===null?c.tail=null:T.sibling=null;break;case"collapsed":T=c.tail;for(var R=null;T!==null;)T.alternate!==null&&(R=T),T=T.sibling;R===null?v||c.tail===null?c.tail=null:c.tail.sibling=null:R.sibling=null}}function _r(c){var v=c.alternate!==null&&c.alternate.child===c.child,T=0,R=0;if(v)for(var U=c.child;U!==null;)T|=U.lanes|U.childLanes,R|=U.subtreeFlags&65011712,R|=U.flags&65011712,U.return=c,U=U.sibling;else for(U=c.child;U!==null;)T|=U.lanes|U.childLanes,R|=U.subtreeFlags,R|=U.flags,U.return=c,U=U.sibling;return c.subtreeFlags|=R,c.childLanes=T,v}function vD(c,v,T){var R=v.pendingProps;switch(t0(v),v.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(v),null;case 1:return _r(v),null;case 3:return T=v.stateNode,R=null,c!==null&&(R=c.memoizedState.cache),v.memoizedState.cache!==R&&(v.flags|=2048),Va(Qr),re(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(c===null||c.child===null)&&(Kc(v)?qa(v):c===null||c.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,n2())),_r(v),null;case 26:return T=v.memoizedState,c===null?(qa(v),T!==null?(_r(v),CS(v,T)):(_r(v),v.flags&=-16777217)):T?T!==c.memoizedState?(qa(v),_r(v),CS(v,T)):(_r(v),v.flags&=-16777217):(c.memoizedProps!==R&&qa(v),_r(v),v.flags&=-16777217),null;case 27:he(v),T=ie.current;var U=v.type;if(c!==null&&v.stateNode!=null)c.memoizedProps!==R&&qa(v);else{if(!R){if(v.stateNode===null)throw Error(o(166));return _r(v),null}c=ne.current,Kc(v)?e2(v):(c=C_(U,R,T),v.stateNode=c,qa(v))}return _r(v),null;case 5:if(he(v),T=v.type,c!==null&&v.stateNode!=null)c.memoizedProps!==R&&qa(v);else{if(!R){if(v.stateNode===null)throw Error(o(166));return _r(v),null}if(c=ne.current,Kc(v))e2(v);else{switch(U=Gp(ie.current),c){case 1:c=U.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:c=U.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":c=U.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":c=U.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":c=U.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof R.is=="string"?U.createElement("select",{is:R.is}):U.createElement("select"),R.multiple?c.multiple=!0:R.size&&(c.size=R.size);break;default:c=typeof R.is=="string"?U.createElement(T,{is:R.is}):U.createElement(T)}}c[Qt]=v,c[an]=R;e:for(U=v.child;U!==null;){if(U.tag===5||U.tag===6)c.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===v)break e;for(;U.sibling===null;){if(U.return===null||U.return===v)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}v.stateNode=c;e:switch(ys(c,T,R),T){case"button":case"input":case"select":case"textarea":c=!!R.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&qa(v)}}return _r(v),v.flags&=-16777217,null;case 6:if(c&&v.stateNode!=null)c.memoizedProps!==R&&qa(v);else{if(typeof R!="string"&&v.stateNode===null)throw Error(o(166));if(c=ie.current,Kc(v)){if(c=v.stateNode,T=v.memoizedProps,R=null,U=Os,U!==null)switch(U.tag){case 27:case 5:R=U.memoizedProps}c[Qt]=v,c=!!(c.nodeValue===T||R!==null&&R.suppressHydrationWarning===!0||y_(c.nodeValue,T)),c||wl(v)}else c=Gp(c).createTextNode(R),c[Qt]=v,v.stateNode=c}return _r(v),null;case 13:if(R=v.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(U=Kc(v),R!==null&&R.dehydrated!==null){if(c===null){if(!U)throw Error(o(318));if(U=v.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(o(317));U[Qt]=v}else Zc(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;_r(v),U=!1}else U=n2(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=U),U=!0;if(!U)return v.flags&256?(Wa(v),v):(Wa(v),null)}if(Wa(v),(v.flags&128)!==0)return v.lanes=T,v;if(T=R!==null,c=c!==null&&c.memoizedState!==null,T){R=v.child,U=null,R.alternate!==null&&R.alternate.memoizedState!==null&&R.alternate.memoizedState.cachePool!==null&&(U=R.alternate.memoizedState.cachePool.pool);var q=null;R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(q=R.memoizedState.cachePool.pool),q!==U&&(R.flags|=2048)}return T!==c&&T&&(v.child.flags|=8192),Rp(v,v.updateQueue),_r(v),null;case 4:return re(),c===null&&fb(v.stateNode.containerInfo),_r(v),null;case 10:return Va(v.type),_r(v),null;case 19:if(Z(Jr),U=v.memoizedState,U===null)return _r(v),null;if(R=(v.flags&128)!==0,q=U.rendering,q===null)if(R)fd(U,!1);else{if(Er!==0||c!==null&&(c.flags&128)!==0)for(c=v.child;c!==null;){if(q=Tp(c),q!==null){for(v.flags|=128,fd(U,!1),c=q.updateQueue,v.updateQueue=c,Rp(v,c),v.subtreeFlags=0,c=T,T=v.child;T!==null;)Qw(T,c),T=T.sibling;return J(Jr,Jr.current&1|2),v.child}c=c.sibling}U.tail!==null&&ve()>Mp&&(v.flags|=128,R=!0,fd(U,!1),v.lanes=4194304)}else{if(!R)if(c=Tp(q),c!==null){if(v.flags|=128,R=!0,c=c.updateQueue,v.updateQueue=c,Rp(v,c),fd(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!Fn)return _r(v),null}else 2*ve()-U.renderingStartTime>Mp&&T!==536870912&&(v.flags|=128,R=!0,fd(U,!1),v.lanes=4194304);U.isBackwards?(q.sibling=v.child,v.child=q):(c=U.last,c!==null?c.sibling=q:v.child=q,U.last=q)}return U.tail!==null?(v=U.tail,U.rendering=v,U.tail=v.sibling,U.renderingStartTime=ve(),v.sibling=null,c=Jr.current,J(Jr,R?c&1|2:c&1),v):(_r(v),null);case 22:case 23:return Wa(v),m0(),R=v.memoizedState!==null,c!==null?c.memoizedState!==null!==R&&(v.flags|=8192):R&&(v.flags|=8192),R?(T&536870912)!==0&&(v.flags&128)===0&&(_r(v),v.subtreeFlags&6&&(v.flags|=8192)):_r(v),T=v.updateQueue,T!==null&&Rp(v,T.retryQueue),T=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(T=c.memoizedState.cachePool.pool),R=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(R=v.memoizedState.cachePool.pool),R!==T&&(v.flags|=2048),c!==null&&Z(Cl),null;case 24:return T=null,c!==null&&(T=c.memoizedState.cache),v.memoizedState.cache!==T&&(v.flags|=2048),Va(Qr),_r(v),null;case 25:return null;case 30:return null}throw Error(o(156,v.tag))}function xD(c,v){switch(t0(v),v.tag){case 1:return c=v.flags,c&65536?(v.flags=c&-65537|128,v):null;case 3:return Va(Qr),re(),c=v.flags,(c&65536)!==0&&(c&128)===0?(v.flags=c&-65537|128,v):null;case 26:case 27:case 5:return he(v),null;case 13:if(Wa(v),c=v.memoizedState,c!==null&&c.dehydrated!==null){if(v.alternate===null)throw Error(o(340));Zc()}return c=v.flags,c&65536?(v.flags=c&-65537|128,v):null;case 19:return Z(Jr),null;case 4:return re(),null;case 10:return Va(v.type),null;case 22:case 23:return Wa(v),m0(),c!==null&&Z(Cl),c=v.flags,c&65536?(v.flags=c&-65537|128,v):null;case 24:return Va(Qr),null;case 25:return null;default:return null}}function kS(c,v){switch(t0(v),v.tag){case 3:Va(Qr),re();break;case 26:case 27:case 5:he(v);break;case 4:re();break;case 13:Wa(v);break;case 19:Z(Jr);break;case 10:Va(v.type);break;case 22:case 23:Wa(v),m0(),c!==null&&Z(Cl);break;case 24:Va(Qr)}}function pd(c,v){try{var T=v.updateQueue,R=T!==null?T.lastEffect:null;if(R!==null){var U=R.next;T=U;do{if((T.tag&c)===c){R=void 0;var q=T.create,ae=T.inst;R=q(),ae.destroy=R}T=T.next}while(T!==U)}}catch(pe){nr(v,v.return,pe)}}function ki(c,v,T){try{var R=v.updateQueue,U=R!==null?R.lastEffect:null;if(U!==null){var q=U.next;R=q;do{if((R.tag&c)===c){var ae=R.inst,pe=ae.destroy;if(pe!==void 0){ae.destroy=void 0,U=v;var Ie=T,Ye=pe;try{Ye()}catch(lt){nr(U,Ie,lt)}}}R=R.next}while(R!==q)}}catch(lt){nr(v,v.return,lt)}}function TS(c){var v=c.updateQueue;if(v!==null){var T=c.stateNode;try{f2(v,T)}catch(R){nr(c,c.return,R)}}}function ES(c,v,T){T.props=Tl(c.type,c.memoizedProps),T.state=c.memoizedState;try{T.componentWillUnmount()}catch(R){nr(c,v,R)}}function md(c,v){try{var T=c.ref;if(T!==null){switch(c.tag){case 26:case 27:case 5:var R=c.stateNode;break;case 30:R=c.stateNode;break;default:R=c.stateNode}typeof T=="function"?c.refCleanup=T(R):T.current=R}}catch(U){nr(c,v,U)}}function pa(c,v){var T=c.ref,R=c.refCleanup;if(T!==null)if(typeof R=="function")try{R()}catch(U){nr(c,v,U)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(U){nr(c,v,U)}else T.current=null}function jS(c){var v=c.type,T=c.memoizedProps,R=c.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":T.autoFocus&&R.focus();break e;case"img":T.src?R.src=T.src:T.srcSet&&(R.srcset=T.srcSet)}}catch(U){nr(c,c.return,U)}}function V0(c,v,T){try{var R=c.stateNode;UD(R,c.type,T,v),R[an]=v}catch(U){nr(c,c.return,U)}}function IS(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Di(c.type)||c.tag===4}function G0(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||IS(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Di(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function W0(c,v,T){var R=c.tag;if(R===5||R===6)c=c.stateNode,v?(T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T).insertBefore(c,v):(v=T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T,v.appendChild(c),T=T._reactRootContainer,T!=null||v.onclick!==null||(v.onclick=Vp));else if(R!==4&&(R===27&&Di(c.type)&&(T=c.stateNode,v=null),c=c.child,c!==null))for(W0(c,v,T),c=c.sibling;c!==null;)W0(c,v,T),c=c.sibling}function Np(c,v,T){var R=c.tag;if(R===5||R===6)c=c.stateNode,v?T.insertBefore(c,v):T.appendChild(c);else if(R!==4&&(R===27&&Di(c.type)&&(T=c.stateNode),c=c.child,c!==null))for(Np(c,v,T),c=c.sibling;c!==null;)Np(c,v,T),c=c.sibling}function AS(c){var v=c.stateNode,T=c.memoizedProps;try{for(var R=c.type,U=v.attributes;U.length;)v.removeAttributeNode(U[0]);ys(v,R,T),v[Qt]=c,v[an]=T}catch(q){nr(c,c.return,q)}}var Xa=!1,$r=!1,H0=!1,RS=typeof WeakSet=="function"?WeakSet:Set,ls=null;function wD(c,v){if(c=c.containerInfo,gb=Kp,c=Nt(c),ln(c)){if("selectionStart"in c)var T={start:c.selectionStart,end:c.selectionEnd};else e:{T=(T=c.ownerDocument)&&T.defaultView||window;var R=T.getSelection&&T.getSelection();if(R&&R.rangeCount!==0){T=R.anchorNode;var U=R.anchorOffset,q=R.focusNode;R=R.focusOffset;try{T.nodeType,q.nodeType}catch{T=null;break e}var ae=0,pe=-1,Ie=-1,Ye=0,lt=0,ft=c,Je=null;t:for(;;){for(var rt;ft!==T||U!==0&&ft.nodeType!==3||(pe=ae+U),ft!==q||R!==0&&ft.nodeType!==3||(Ie=ae+R),ft.nodeType===3&&(ae+=ft.nodeValue.length),(rt=ft.firstChild)!==null;)Je=ft,ft=rt;for(;;){if(ft===c)break t;if(Je===T&&++Ye===U&&(pe=ae),Je===q&&++lt===R&&(Ie=ae),(rt=ft.nextSibling)!==null)break;ft=Je,Je=ft.parentNode}ft=rt}T=pe===-1||Ie===-1?null:{start:pe,end:Ie}}else T=null}T=T||{start:0,end:0}}else T=null;for(yb={focusedElem:c,selectionRange:T},Kp=!1,ls=v;ls!==null;)if(v=ls,c=v.child,(v.subtreeFlags&1024)!==0&&c!==null)c.return=v,ls=c;else for(;ls!==null;){switch(v=ls,q=v.alternate,c=v.flags,v.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&q!==null){c=void 0,T=v,U=q.memoizedProps,q=q.memoizedState,R=T.stateNode;try{var Jt=Tl(T.type,U,T.elementType===T.type);c=R.getSnapshotBeforeUpdate(Jt,q),R.__reactInternalSnapshotBeforeUpdate=c}catch(Xt){nr(T,T.return,Xt)}}break;case 3:if((c&1024)!==0){if(c=v.stateNode.containerInfo,T=c.nodeType,T===9)xb(c);else if(T===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":xb(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(o(163))}if(c=v.sibling,c!==null){c.return=v.return,ls=c;break}ls=v.return}}function NS(c,v,T){var R=T.flags;switch(T.tag){case 0:case 11:case 15:Ti(c,T),R&4&&pd(5,T);break;case 1:if(Ti(c,T),R&4)if(c=T.stateNode,v===null)try{c.componentDidMount()}catch(ae){nr(T,T.return,ae)}else{var U=Tl(T.type,v.memoizedProps);v=v.memoizedState;try{c.componentDidUpdate(U,v,c.__reactInternalSnapshotBeforeUpdate)}catch(ae){nr(T,T.return,ae)}}R&64&&TS(T),R&512&&md(T,T.return);break;case 3:if(Ti(c,T),R&64&&(c=T.updateQueue,c!==null)){if(v=null,T.child!==null)switch(T.child.tag){case 27:case 5:v=T.child.stateNode;break;case 1:v=T.child.stateNode}try{f2(c,v)}catch(ae){nr(T,T.return,ae)}}break;case 27:v===null&&R&4&&AS(T);case 26:case 5:Ti(c,T),v===null&&R&4&&jS(T),R&512&&md(T,T.return);break;case 12:Ti(c,T);break;case 13:Ti(c,T),R&4&&OS(c,T),R&64&&(c=T.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(T=AD.bind(null,T),XD(c,T))));break;case 22:if(R=T.memoizedState!==null||Xa,!R){v=v!==null&&v.memoizedState!==null||$r,U=Xa;var q=$r;Xa=R,($r=v)&&!q?Ei(c,T,(T.subtreeFlags&8772)!==0):Ti(c,T),Xa=U,$r=q}break;case 30:break;default:Ti(c,T)}}function DS(c){var v=c.alternate;v!==null&&(c.alternate=null,DS(v)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(v=c.stateNode,v!==null&&Cr(v)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var gr=null,qs=!1;function Ya(c,v,T){for(T=T.child;T!==null;)MS(c,v,T),T=T.sibling}function MS(c,v,T){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(_t,T)}catch{}switch(T.tag){case 26:$r||pa(T,v),Ya(c,v,T),T.memoizedState?T.memoizedState.count--:T.stateNode&&(T=T.stateNode,T.parentNode.removeChild(T));break;case 27:$r||pa(T,v);var R=gr,U=qs;Di(T.type)&&(gr=T.stateNode,qs=!1),Ya(c,v,T),Cd(T.stateNode),gr=R,qs=U;break;case 5:$r||pa(T,v);case 6:if(R=gr,U=qs,gr=null,Ya(c,v,T),gr=R,qs=U,gr!==null)if(qs)try{(gr.nodeType===9?gr.body:gr.nodeName==="HTML"?gr.ownerDocument.body:gr).removeChild(T.stateNode)}catch(q){nr(T,v,q)}else try{gr.removeChild(T.stateNode)}catch(q){nr(T,v,q)}break;case 18:gr!==null&&(qs?(c=gr,S_(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,T.stateNode),Nd(c)):S_(gr,T.stateNode));break;case 4:R=gr,U=qs,gr=T.stateNode.containerInfo,qs=!0,Ya(c,v,T),gr=R,qs=U;break;case 0:case 11:case 14:case 15:$r||ki(2,T,v),$r||ki(4,T,v),Ya(c,v,T);break;case 1:$r||(pa(T,v),R=T.stateNode,typeof R.componentWillUnmount=="function"&&ES(T,v,R)),Ya(c,v,T);break;case 21:Ya(c,v,T);break;case 22:$r=(R=$r)||T.memoizedState!==null,Ya(c,v,T),$r=R;break;default:Ya(c,v,T)}}function OS(c,v){if(v.memoizedState===null&&(c=v.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Nd(c)}catch(T){nr(v,v.return,T)}}function SD(c){switch(c.tag){case 13:case 19:var v=c.stateNode;return v===null&&(v=c.stateNode=new RS),v;case 22:return c=c.stateNode,v=c._retryCache,v===null&&(v=c._retryCache=new RS),v;default:throw Error(o(435,c.tag))}}function q0(c,v){var T=SD(c);v.forEach(function(R){var U=RD.bind(null,c,R);T.has(R)||(T.add(R),R.then(U,U))})}function so(c,v){var T=v.deletions;if(T!==null)for(var R=0;R<T.length;R++){var U=T[R],q=c,ae=v,pe=ae;e:for(;pe!==null;){switch(pe.tag){case 27:if(Di(pe.type)){gr=pe.stateNode,qs=!1;break e}break;case 5:gr=pe.stateNode,qs=!1;break e;case 3:case 4:gr=pe.stateNode.containerInfo,qs=!0;break e}pe=pe.return}if(gr===null)throw Error(o(160));MS(q,ae,U),gr=null,qs=!1,q=U.alternate,q!==null&&(q.return=null),U.return=null}if(v.subtreeFlags&13878)for(v=v.child;v!==null;)$S(v,c),v=v.sibling}var Ho=null;function $S(c,v){var T=c.alternate,R=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:so(v,c),oo(c),R&4&&(ki(3,c,c.return),pd(3,c),ki(5,c,c.return));break;case 1:so(v,c),oo(c),R&512&&($r||T===null||pa(T,T.return)),R&64&&Xa&&(c=c.updateQueue,c!==null&&(R=c.callbacks,R!==null&&(T=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=T===null?R:T.concat(R))));break;case 26:var U=Ho;if(so(v,c),oo(c),R&512&&($r||T===null||pa(T,T.return)),R&4){var q=T!==null?T.memoizedState:null;if(R=c.memoizedState,T===null)if(R===null)if(c.stateNode===null){e:{R=c.type,T=c.memoizedProps,U=U.ownerDocument||U;t:switch(R){case"title":q=U.getElementsByTagName("title")[0],(!q||q[vr]||q[Qt]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=U.createElement(R),U.head.insertBefore(q,U.querySelector("head > title"))),ys(q,R,T),q[Qt]=c,xr(q),R=q;break e;case"link":var ae=A_("link","href",U).get(R+(T.href||""));if(ae){for(var pe=0;pe<ae.length;pe++)if(q=ae[pe],q.getAttribute("href")===(T.href==null||T.href===""?null:T.href)&&q.getAttribute("rel")===(T.rel==null?null:T.rel)&&q.getAttribute("title")===(T.title==null?null:T.title)&&q.getAttribute("crossorigin")===(T.crossOrigin==null?null:T.crossOrigin)){ae.splice(pe,1);break t}}q=U.createElement(R),ys(q,R,T),U.head.appendChild(q);break;case"meta":if(ae=A_("meta","content",U).get(R+(T.content||""))){for(pe=0;pe<ae.length;pe++)if(q=ae[pe],q.getAttribute("content")===(T.content==null?null:""+T.content)&&q.getAttribute("name")===(T.name==null?null:T.name)&&q.getAttribute("property")===(T.property==null?null:T.property)&&q.getAttribute("http-equiv")===(T.httpEquiv==null?null:T.httpEquiv)&&q.getAttribute("charset")===(T.charSet==null?null:T.charSet)){ae.splice(pe,1);break t}}q=U.createElement(R),ys(q,R,T),U.head.appendChild(q);break;default:throw Error(o(468,R))}q[Qt]=c,xr(q),R=q}c.stateNode=R}else R_(U,c.type,c.stateNode);else c.stateNode=I_(U,R,c.memoizedProps);else q!==R?(q===null?T.stateNode!==null&&(T=T.stateNode,T.parentNode.removeChild(T)):q.count--,R===null?R_(U,c.type,c.stateNode):I_(U,R,c.memoizedProps)):R===null&&c.stateNode!==null&&V0(c,c.memoizedProps,T.memoizedProps)}break;case 27:so(v,c),oo(c),R&512&&($r||T===null||pa(T,T.return)),T!==null&&R&4&&V0(c,c.memoizedProps,T.memoizedProps);break;case 5:if(so(v,c),oo(c),R&512&&($r||T===null||pa(T,T.return)),c.flags&32){U=c.stateNode;try{fi(U,"")}catch(rt){nr(c,c.return,rt)}}R&4&&c.stateNode!=null&&(U=c.memoizedProps,V0(c,U,T!==null?T.memoizedProps:U)),R&1024&&(H0=!0);break;case 6:if(so(v,c),oo(c),R&4){if(c.stateNode===null)throw Error(o(162));R=c.memoizedProps,T=c.stateNode;try{T.nodeValue=R}catch(rt){nr(c,c.return,rt)}}break;case 3:if(qp=null,U=Ho,Ho=Wp(v.containerInfo),so(v,c),Ho=U,oo(c),R&4&&T!==null&&T.memoizedState.isDehydrated)try{Nd(v.containerInfo)}catch(rt){nr(c,c.return,rt)}H0&&(H0=!1,LS(c));break;case 4:R=Ho,Ho=Wp(c.stateNode.containerInfo),so(v,c),oo(c),Ho=R;break;case 12:so(v,c),oo(c);break;case 13:so(v,c),oo(c),c.child.flags&8192&&c.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(J0=ve()),R&4&&(R=c.updateQueue,R!==null&&(c.updateQueue=null,q0(c,R)));break;case 22:U=c.memoizedState!==null;var Ie=T!==null&&T.memoizedState!==null,Ye=Xa,lt=$r;if(Xa=Ye||U,$r=lt||Ie,so(v,c),$r=lt,Xa=Ye,oo(c),R&8192)e:for(v=c.stateNode,v._visibility=U?v._visibility&-2:v._visibility|1,U&&(T===null||Ie||Xa||$r||El(c)),T=null,v=c;;){if(v.tag===5||v.tag===26){if(T===null){Ie=T=v;try{if(q=Ie.stateNode,U)ae=q.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none";else{pe=Ie.stateNode;var ft=Ie.memoizedProps.style,Je=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;pe.style.display=Je==null||typeof Je=="boolean"?"":(""+Je).trim()}}catch(rt){nr(Ie,Ie.return,rt)}}}else if(v.tag===6){if(T===null){Ie=v;try{Ie.stateNode.nodeValue=U?"":Ie.memoizedProps}catch(rt){nr(Ie,Ie.return,rt)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===c)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break e;for(;v.sibling===null;){if(v.return===null||v.return===c)break e;T===v&&(T=null),v=v.return}T===v&&(T=null),v.sibling.return=v.return,v=v.sibling}R&4&&(R=c.updateQueue,R!==null&&(T=R.retryQueue,T!==null&&(R.retryQueue=null,q0(c,T))));break;case 19:so(v,c),oo(c),R&4&&(R=c.updateQueue,R!==null&&(c.updateQueue=null,q0(c,R)));break;case 30:break;case 21:break;default:so(v,c),oo(c)}}function oo(c){var v=c.flags;if(v&2){try{for(var T,R=c.return;R!==null;){if(IS(R)){T=R;break}R=R.return}if(T==null)throw Error(o(160));switch(T.tag){case 27:var U=T.stateNode,q=G0(c);Np(c,q,U);break;case 5:var ae=T.stateNode;T.flags&32&&(fi(ae,""),T.flags&=-33);var pe=G0(c);Np(c,pe,ae);break;case 3:case 4:var Ie=T.stateNode.containerInfo,Ye=G0(c);W0(c,Ye,Ie);break;default:throw Error(o(161))}}catch(lt){nr(c,c.return,lt)}c.flags&=-3}v&4096&&(c.flags&=-4097)}function LS(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var v=c;LS(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),c=c.sibling}}function Ti(c,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)NS(c,v.alternate,v),v=v.sibling}function El(c){for(c=c.child;c!==null;){var v=c;switch(v.tag){case 0:case 11:case 14:case 15:ki(4,v,v.return),El(v);break;case 1:pa(v,v.return);var T=v.stateNode;typeof T.componentWillUnmount=="function"&&ES(v,v.return,T),El(v);break;case 27:Cd(v.stateNode);case 26:case 5:pa(v,v.return),El(v);break;case 22:v.memoizedState===null&&El(v);break;case 30:El(v);break;default:El(v)}c=c.sibling}}function Ei(c,v,T){for(T=T&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var R=v.alternate,U=c,q=v,ae=q.flags;switch(q.tag){case 0:case 11:case 15:Ei(U,q,T),pd(4,q);break;case 1:if(Ei(U,q,T),R=q,U=R.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(Ye){nr(R,R.return,Ye)}if(R=q,U=R.updateQueue,U!==null){var pe=R.stateNode;try{var Ie=U.shared.hiddenCallbacks;if(Ie!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Ie.length;U++)h2(Ie[U],pe)}catch(Ye){nr(R,R.return,Ye)}}T&&ae&64&&TS(q),md(q,q.return);break;case 27:AS(q);case 26:case 5:Ei(U,q,T),T&&R===null&&ae&4&&jS(q),md(q,q.return);break;case 12:Ei(U,q,T);break;case 13:Ei(U,q,T),T&&ae&4&&OS(U,q);break;case 22:q.memoizedState===null&&Ei(U,q,T),md(q,q.return);break;case 30:break;default:Ei(U,q,T)}v=v.sibling}}function X0(c,v){var T=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(T=c.memoizedState.cachePool.pool),c=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(c=v.memoizedState.cachePool.pool),c!==T&&(c!=null&&c.refCount++,T!=null&&ed(T))}function Y0(c,v){c=null,v.alternate!==null&&(c=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==c&&(v.refCount++,c!=null&&ed(c))}function ma(c,v,T,R){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)FS(c,v,T,R),v=v.sibling}function FS(c,v,T,R){var U=v.flags;switch(v.tag){case 0:case 11:case 15:ma(c,v,T,R),U&2048&&pd(9,v);break;case 1:ma(c,v,T,R);break;case 3:ma(c,v,T,R),U&2048&&(c=null,v.alternate!==null&&(c=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==c&&(v.refCount++,c!=null&&ed(c)));break;case 12:if(U&2048){ma(c,v,T,R),c=v.stateNode;try{var q=v.memoizedProps,ae=q.id,pe=q.onPostCommit;typeof pe=="function"&&pe(ae,v.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(Ie){nr(v,v.return,Ie)}}else ma(c,v,T,R);break;case 13:ma(c,v,T,R);break;case 23:break;case 22:q=v.stateNode,ae=v.alternate,v.memoizedState!==null?q._visibility&2?ma(c,v,T,R):gd(c,v):q._visibility&2?ma(c,v,T,R):(q._visibility|=2,zu(c,v,T,R,(v.subtreeFlags&10256)!==0)),U&2048&&X0(ae,v);break;case 24:ma(c,v,T,R),U&2048&&Y0(v.alternate,v);break;default:ma(c,v,T,R)}}function zu(c,v,T,R,U){for(U=U&&(v.subtreeFlags&10256)!==0,v=v.child;v!==null;){var q=c,ae=v,pe=T,Ie=R,Ye=ae.flags;switch(ae.tag){case 0:case 11:case 15:zu(q,ae,pe,Ie,U),pd(8,ae);break;case 23:break;case 22:var lt=ae.stateNode;ae.memoizedState!==null?lt._visibility&2?zu(q,ae,pe,Ie,U):gd(q,ae):(lt._visibility|=2,zu(q,ae,pe,Ie,U)),U&&Ye&2048&&X0(ae.alternate,ae);break;case 24:zu(q,ae,pe,Ie,U),U&&Ye&2048&&Y0(ae.alternate,ae);break;default:zu(q,ae,pe,Ie,U)}v=v.sibling}}function gd(c,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var T=c,R=v,U=R.flags;switch(R.tag){case 22:gd(T,R),U&2048&&X0(R.alternate,R);break;case 24:gd(T,R),U&2048&&Y0(R.alternate,R);break;default:gd(T,R)}v=v.sibling}}var yd=8192;function Vu(c){if(c.subtreeFlags&yd)for(c=c.child;c!==null;)PS(c),c=c.sibling}function PS(c){switch(c.tag){case 26:Vu(c),c.flags&yd&&c.memoizedState!==null&&iM(Ho,c.memoizedState,c.memoizedProps);break;case 5:Vu(c);break;case 3:case 4:var v=Ho;Ho=Wp(c.stateNode.containerInfo),Vu(c),Ho=v;break;case 22:c.memoizedState===null&&(v=c.alternate,v!==null&&v.memoizedState!==null?(v=yd,yd=16777216,Vu(c),yd=v):Vu(c));break;default:Vu(c)}}function BS(c){var v=c.alternate;if(v!==null&&(c=v.child,c!==null)){v.child=null;do v=c.sibling,c.sibling=null,c=v;while(c!==null)}}function bd(c){var v=c.deletions;if((c.flags&16)!==0){if(v!==null)for(var T=0;T<v.length;T++){var R=v[T];ls=R,zS(R,c)}BS(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)US(c),c=c.sibling}function US(c){switch(c.tag){case 0:case 11:case 15:bd(c),c.flags&2048&&ki(9,c,c.return);break;case 3:bd(c);break;case 12:bd(c);break;case 22:var v=c.stateNode;c.memoizedState!==null&&v._visibility&2&&(c.return===null||c.return.tag!==13)?(v._visibility&=-3,Dp(c)):bd(c);break;default:bd(c)}}function Dp(c){var v=c.deletions;if((c.flags&16)!==0){if(v!==null)for(var T=0;T<v.length;T++){var R=v[T];ls=R,zS(R,c)}BS(c)}for(c=c.child;c!==null;){switch(v=c,v.tag){case 0:case 11:case 15:ki(8,v,v.return),Dp(v);break;case 22:T=v.stateNode,T._visibility&2&&(T._visibility&=-3,Dp(v));break;default:Dp(v)}c=c.sibling}}function zS(c,v){for(;ls!==null;){var T=ls;switch(T.tag){case 0:case 11:case 15:ki(8,T,v);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var R=T.memoizedState.cachePool.pool;R!=null&&R.refCount++}break;case 24:ed(T.memoizedState.cache)}if(R=T.child,R!==null)R.return=T,ls=R;else e:for(T=c;ls!==null;){R=ls;var U=R.sibling,q=R.return;if(DS(R),R===T){ls=null;break e}if(U!==null){U.return=q,ls=U;break e}ls=q}}}var _D={getCacheForType:function(c){var v=Ts(Qr),T=v.data.get(c);return T===void 0&&(T=c(),v.data.set(c,T)),T}},CD=typeof WeakMap=="function"?WeakMap:Map,Wn=0,ir=null,xn=null,jn=0,Hn=0,ao=null,ji=!1,Gu=!1,K0=!1,Ka=0,Er=0,Ii=0,jl=0,Z0=0,To=0,Wu=0,vd=null,Xs=null,Q0=!1,J0=0,Mp=1/0,Op=null,Ai=null,gs=0,Ri=null,Hu=null,qu=0,eb=0,tb=null,VS=null,xd=0,nb=null;function io(){if((Wn&2)!==0&&jn!==0)return jn&-jn;if(F.T!==null){var c=Mu;return c!==0?c:ub()}return sn()}function GS(){To===0&&(To=(jn&536870912)===0||Fn?Ae():536870912);var c=ko.current;return c!==null&&(c.flags|=32),To}function lo(c,v,T){(c===ir&&(Hn===2||Hn===9)||c.cancelPendingCommit!==null)&&(Xu(c,0),Ni(c,jn,To,!1)),ht(c,T),((Wn&2)===0||c!==ir)&&(c===ir&&((Wn&2)===0&&(jl|=T),Er===4&&Ni(c,jn,To,!1)),ga(c))}function WS(c,v,T){if((Wn&6)!==0)throw Error(o(327));var R=!T&&(v&124)===0&&(v&c.expiredLanes)===0||de(c,v),U=R?ED(c,v):ob(c,v,!0),q=R;do{if(U===0){Gu&&!R&&Ni(c,v,0,!1);break}else{if(T=c.current.alternate,q&&!kD(T)){U=ob(c,v,!1),q=!1;continue}if(U===2){if(q=v,c.errorRecoveryDisabledLanes&q)var ae=0;else ae=c.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){v=ae;e:{var pe=c;U=vd;var Ie=pe.current.memoizedState.isDehydrated;if(Ie&&(Xu(pe,ae).flags|=256),ae=ob(pe,ae,!1),ae!==2){if(K0&&!Ie){pe.errorRecoveryDisabledLanes|=q,jl|=q,U=4;break e}q=Xs,Xs=U,q!==null&&(Xs===null?Xs=q:Xs.push.apply(Xs,q))}U=ae}if(q=!1,U!==2)continue}}if(U===1){Xu(c,0),Ni(c,v,0,!0);break}e:{switch(R=c,q=U,q){case 0:case 1:throw Error(o(345));case 4:if((v&4194048)!==v)break;case 6:Ni(R,v,To,!ji);break e;case 2:Xs=null;break;case 3:case 5:break;default:throw Error(o(329))}if((v&62914560)===v&&(U=J0+300-ve(),10<U)){if(Ni(R,v,To,!ji),le(R,0,!0)!==0)break e;R.timeoutHandle=x_(HS.bind(null,R,T,Xs,Op,Q0,v,To,jl,Wu,ji,q,2,-0,0),U);break e}HS(R,T,Xs,Op,Q0,v,To,jl,Wu,ji,q,0,-0,0)}}break}while(!0);ga(c)}function HS(c,v,T,R,U,q,ae,pe,Ie,Ye,lt,ft,Je,rt){if(c.timeoutHandle=-1,ft=v.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(Ed={stylesheets:null,count:0,unsuspend:aM},PS(v),ft=lM(),ft!==null)){c.cancelPendingCommit=ft(JS.bind(null,c,v,q,T,R,U,ae,pe,Ie,lt,1,Je,rt)),Ni(c,q,ae,!Ye);return}JS(c,v,q,T,R,U,ae,pe,Ie)}function kD(c){for(var v=c;;){var T=v.tag;if((T===0||T===11||T===15)&&v.flags&16384&&(T=v.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var R=0;R<T.length;R++){var U=T[R],q=U.getSnapshot;U=U.value;try{if(!et(q(),U))return!1}catch{return!1}}if(T=v.child,v.subtreeFlags&16384&&T!==null)T.return=v,v=T;else{if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Ni(c,v,T,R){v&=~Z0,v&=~jl,c.suspendedLanes|=v,c.pingedLanes&=~v,R&&(c.warmLanes|=v),R=c.expirationTimes;for(var U=v;0<U;){var q=31-Ve(U),ae=1<<q;R[q]=-1,U&=~ae}T!==0&&wt(c,T,v)}function $p(){return(Wn&6)===0?(wd(0),!1):!0}function rb(){if(xn!==null){if(Hn===0)var c=xn.return;else c=xn,za=Sl=null,x0(c),Bu=null,dd=0,c=xn;for(;c!==null;)kS(c.alternate,c),c=c.return;xn=null}}function Xu(c,v){var T=c.timeoutHandle;T!==-1&&(c.timeoutHandle=-1,VD(T)),T=c.cancelPendingCommit,T!==null&&(c.cancelPendingCommit=null,T()),rb(),ir=c,xn=T=Pa(c.current,null),jn=v,Hn=0,ao=null,ji=!1,Gu=de(c,v),K0=!1,Wu=To=Z0=jl=Ii=Er=0,Xs=vd=null,Q0=!1,(v&8)!==0&&(v|=v&32);var R=c.entangledLanes;if(R!==0)for(c=c.entanglements,R&=v;0<R;){var U=31-Ve(R),q=1<<U;v|=c[U],R&=~q}return Ka=v,sp(),T}function qS(c,v){bn=null,F.H=_p,v===nd||v===fp?(v=c2(),Hn=3):v===i2?(v=c2(),Hn=4):Hn=v===dS?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,ao=v,xn===null&&(Er=1,jp(c,wo(v,c.current)))}function XS(){var c=F.H;return F.H=_p,c===null?_p:c}function YS(){var c=F.A;return F.A=_D,c}function sb(){Er=4,ji||(jn&4194048)!==jn&&ko.current!==null||(Gu=!0),(Ii&134217727)===0&&(jl&134217727)===0||ir===null||Ni(ir,jn,To,!1)}function ob(c,v,T){var R=Wn;Wn|=2;var U=XS(),q=YS();(ir!==c||jn!==v)&&(Op=null,Xu(c,v)),v=!1;var ae=Er;e:do try{if(Hn!==0&&xn!==null){var pe=xn,Ie=ao;switch(Hn){case 8:rb(),ae=6;break e;case 3:case 2:case 9:case 6:ko.current===null&&(v=!0);var Ye=Hn;if(Hn=0,ao=null,Yu(c,pe,Ie,Ye),T&&Gu){ae=0;break e}break;default:Ye=Hn,Hn=0,ao=null,Yu(c,pe,Ie,Ye)}}TD(),ae=Er;break}catch(lt){qS(c,lt)}while(!0);return v&&c.shellSuspendCounter++,za=Sl=null,Wn=R,F.H=U,F.A=q,xn===null&&(ir=null,jn=0,sp()),ae}function TD(){for(;xn!==null;)KS(xn)}function ED(c,v){var T=Wn;Wn|=2;var R=XS(),U=YS();ir!==c||jn!==v?(Op=null,Mp=ve()+500,Xu(c,v)):Gu=de(c,v);e:do try{if(Hn!==0&&xn!==null){v=xn;var q=ao;t:switch(Hn){case 1:Hn=0,ao=null,Yu(c,v,q,1);break;case 2:case 9:if(l2(q)){Hn=0,ao=null,ZS(v);break}v=function(){Hn!==2&&Hn!==9||ir!==c||(Hn=7),ga(c)},q.then(v,v);break e;case 3:Hn=7;break e;case 4:Hn=5;break e;case 7:l2(q)?(Hn=0,ao=null,ZS(v)):(Hn=0,ao=null,Yu(c,v,q,7));break;case 5:var ae=null;switch(xn.tag){case 26:ae=xn.memoizedState;case 5:case 27:var pe=xn;if(!ae||N_(ae)){Hn=0,ao=null;var Ie=pe.sibling;if(Ie!==null)xn=Ie;else{var Ye=pe.return;Ye!==null?(xn=Ye,Lp(Ye)):xn=null}break t}}Hn=0,ao=null,Yu(c,v,q,5);break;case 6:Hn=0,ao=null,Yu(c,v,q,6);break;case 8:rb(),Er=6;break e;default:throw Error(o(462))}}jD();break}catch(lt){qS(c,lt)}while(!0);return za=Sl=null,F.H=R,F.A=U,Wn=T,xn!==null?0:(ir=null,jn=0,sp(),Er)}function jD(){for(;xn!==null&&!we();)KS(xn)}function KS(c){var v=_S(c.alternate,c,Ka);c.memoizedProps=c.pendingProps,v===null?Lp(c):xn=v}function ZS(c){var v=c,T=v.alternate;switch(v.tag){case 15:case 0:v=yS(T,v,v.pendingProps,v.type,void 0,jn);break;case 11:v=yS(T,v,v.pendingProps,v.type.render,v.ref,jn);break;case 5:x0(v);default:kS(T,v),v=xn=Qw(v,Ka),v=_S(T,v,Ka)}c.memoizedProps=c.pendingProps,v===null?Lp(c):xn=v}function Yu(c,v,T,R){za=Sl=null,x0(v),Bu=null,dd=0;var U=v.return;try{if(yD(c,U,v,T,jn)){Er=1,jp(c,wo(T,c.current)),xn=null;return}}catch(q){if(U!==null)throw xn=U,q;Er=1,jp(c,wo(T,c.current)),xn=null;return}v.flags&32768?(Fn||R===1?c=!0:Gu||(jn&536870912)!==0?c=!1:(ji=c=!0,(R===2||R===9||R===3||R===6)&&(R=ko.current,R!==null&&R.tag===13&&(R.flags|=16384))),QS(v,c)):Lp(v)}function Lp(c){var v=c;do{if((v.flags&32768)!==0){QS(v,ji);return}c=v.return;var T=vD(v.alternate,v,Ka);if(T!==null){xn=T;return}if(v=v.sibling,v!==null){xn=v;return}xn=v=c}while(v!==null);Er===0&&(Er=5)}function QS(c,v){do{var T=xD(c.alternate,c);if(T!==null){T.flags&=32767,xn=T;return}if(T=c.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!v&&(c=c.sibling,c!==null)){xn=c;return}xn=c=T}while(c!==null);Er=6,xn=null}function JS(c,v,T,R,U,q,ae,pe,Ie){c.cancelPendingCommit=null;do Fp();while(gs!==0);if((Wn&6)!==0)throw Error(o(327));if(v!==null){if(v===c.current)throw Error(o(177));if(q=v.lanes|v.childLanes,q|=Yy,De(c,T,q,ae,pe,Ie),c===ir&&(xn=ir=null,jn=0),Hu=v,Ri=c,qu=T,eb=q,tb=U,VS=R,(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,ND(ze,function(){return s_(),null})):(c.callbackNode=null,c.callbackPriority=0),R=(v.flags&13878)!==0,(v.subtreeFlags&13878)!==0||R){R=F.T,F.T=null,U=G.p,G.p=2,ae=Wn,Wn|=4;try{wD(c,v,T)}finally{Wn=ae,G.p=U,F.T=R}}gs=1,e_(),t_(),n_()}}function e_(){if(gs===1){gs=0;var c=Ri,v=Hu,T=(v.flags&13878)!==0;if((v.subtreeFlags&13878)!==0||T){T=F.T,F.T=null;var R=G.p;G.p=2;var U=Wn;Wn|=4;try{$S(v,c);var q=yb,ae=Nt(c.containerInfo),pe=q.focusedElem,Ie=q.selectionRange;if(ae!==pe&&pe&&pe.ownerDocument&&jt(pe.ownerDocument.documentElement,pe)){if(Ie!==null&&ln(pe)){var Ye=Ie.start,lt=Ie.end;if(lt===void 0&&(lt=Ye),"selectionStart"in pe)pe.selectionStart=Ye,pe.selectionEnd=Math.min(lt,pe.value.length);else{var ft=pe.ownerDocument||document,Je=ft&&ft.defaultView||window;if(Je.getSelection){var rt=Je.getSelection(),Jt=pe.textContent.length,Xt=Math.min(Ie.start,Jt),Jn=Ie.end===void 0?Xt:Math.min(Ie.end,Jt);!rt.extend&&Xt>Jn&&(ae=Jn,Jn=Xt,Xt=ae);var Ge=Rt(pe,Xt),Oe=Rt(pe,Jn);if(Ge&&Oe&&(rt.rangeCount!==1||rt.anchorNode!==Ge.node||rt.anchorOffset!==Ge.offset||rt.focusNode!==Oe.node||rt.focusOffset!==Oe.offset)){var qe=ft.createRange();qe.setStart(Ge.node,Ge.offset),rt.removeAllRanges(),Xt>Jn?(rt.addRange(qe),rt.extend(Oe.node,Oe.offset)):(qe.setEnd(Oe.node,Oe.offset),rt.addRange(qe))}}}}for(ft=[],rt=pe;rt=rt.parentNode;)rt.nodeType===1&&ft.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<ft.length;pe++){var ct=ft[pe];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}Kp=!!gb,yb=gb=null}finally{Wn=U,G.p=R,F.T=T}}c.current=v,gs=2}}function t_(){if(gs===2){gs=0;var c=Ri,v=Hu,T=(v.flags&8772)!==0;if((v.subtreeFlags&8772)!==0||T){T=F.T,F.T=null;var R=G.p;G.p=2;var U=Wn;Wn|=4;try{NS(c,v.alternate,v)}finally{Wn=U,G.p=R,F.T=T}}gs=3}}function n_(){if(gs===4||gs===3){gs=0,ke();var c=Ri,v=Hu,T=qu,R=VS;(v.subtreeFlags&10256)!==0||(v.flags&10256)!==0?gs=5:(gs=0,Hu=Ri=null,r_(c,c.pendingLanes));var U=c.pendingLanes;if(U===0&&(Ai=null),hn(T),v=v.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(_t,v,void 0,(v.current.flags&128)===128)}catch{}if(R!==null){v=F.T,U=G.p,G.p=2,F.T=null;try{for(var q=c.onRecoverableError,ae=0;ae<R.length;ae++){var pe=R[ae];q(pe.value,{componentStack:pe.stack})}}finally{F.T=v,G.p=U}}(qu&3)!==0&&Fp(),ga(c),U=c.pendingLanes,(T&4194090)!==0&&(U&42)!==0?c===nb?xd++:(xd=0,nb=c):xd=0,wd(0)}}function r_(c,v){(c.pooledCacheLanes&=v)===0&&(v=c.pooledCache,v!=null&&(c.pooledCache=null,ed(v)))}function Fp(c){return e_(),t_(),n_(),s_()}function s_(){if(gs!==5)return!1;var c=Ri,v=eb;eb=0;var T=hn(qu),R=F.T,U=G.p;try{G.p=32>T?32:T,F.T=null,T=tb,tb=null;var q=Ri,ae=qu;if(gs=0,Hu=Ri=null,qu=0,(Wn&6)!==0)throw Error(o(331));var pe=Wn;if(Wn|=4,US(q.current),FS(q,q.current,ae,T),Wn=pe,wd(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(_t,q)}catch{}return!0}finally{G.p=U,F.T=R,r_(c,v)}}function o_(c,v,T){v=wo(T,v),v=M0(c.stateNode,v,2),c=wi(c,v,2),c!==null&&(ht(c,2),ga(c))}function nr(c,v,T){if(c.tag===3)o_(c,c,T);else for(;v!==null;){if(v.tag===3){o_(v,c,T);break}else if(v.tag===1){var R=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Ai===null||!Ai.has(R))){c=wo(T,c),T=uS(2),R=wi(v,T,2),R!==null&&(cS(T,R,v,c),ht(R,2),ga(R));break}}v=v.return}}function ab(c,v,T){var R=c.pingCache;if(R===null){R=c.pingCache=new CD;var U=new Set;R.set(v,U)}else U=R.get(v),U===void 0&&(U=new Set,R.set(v,U));U.has(T)||(K0=!0,U.add(T),c=ID.bind(null,c,v,T),v.then(c,c))}function ID(c,v,T){var R=c.pingCache;R!==null&&R.delete(v),c.pingedLanes|=c.suspendedLanes&T,c.warmLanes&=~T,ir===c&&(jn&T)===T&&(Er===4||Er===3&&(jn&62914560)===jn&&300>ve()-J0?(Wn&2)===0&&Xu(c,0):Z0|=T,Wu===jn&&(Wu=0)),ga(c)}function a_(c,v){v===0&&(v=Ze()),c=Au(c,v),c!==null&&(ht(c,v),ga(c))}function AD(c){var v=c.memoizedState,T=0;v!==null&&(T=v.retryLane),a_(c,T)}function RD(c,v){var T=0;switch(c.tag){case 13:var R=c.stateNode,U=c.memoizedState;U!==null&&(T=U.retryLane);break;case 19:R=c.stateNode;break;case 22:R=c.stateNode._retryCache;break;default:throw Error(o(314))}R!==null&&R.delete(v),a_(c,T)}function ND(c,v){return oe(c,v)}var Pp=null,Ku=null,ib=!1,Bp=!1,lb=!1,Il=0;function ga(c){c!==Ku&&c.next===null&&(Ku===null?Pp=Ku=c:Ku=Ku.next=c),Bp=!0,ib||(ib=!0,MD())}function wd(c,v){if(!lb&&Bp){lb=!0;do for(var T=!1,R=Pp;R!==null;){if(c!==0){var U=R.pendingLanes;if(U===0)var q=0;else{var ae=R.suspendedLanes,pe=R.pingedLanes;q=(1<<31-Ve(42|c)+1)-1,q&=U&~(ae&~pe),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(T=!0,c_(R,q))}else q=jn,q=le(R,R===ir?q:0,R.cancelPendingCommit!==null||R.timeoutHandle!==-1),(q&3)===0||de(R,q)||(T=!0,c_(R,q));R=R.next}while(T);lb=!1}}function DD(){i_()}function i_(){Bp=ib=!1;var c=0;Il!==0&&(zD()&&(c=Il),Il=0);for(var v=ve(),T=null,R=Pp;R!==null;){var U=R.next,q=l_(R,v);q===0?(R.next=null,T===null?Pp=U:T.next=U,U===null&&(Ku=T)):(T=R,(c!==0||(q&3)!==0)&&(Bp=!0)),R=U}wd(c)}function l_(c,v){for(var T=c.suspendedLanes,R=c.pingedLanes,U=c.expirationTimes,q=c.pendingLanes&-62914561;0<q;){var ae=31-Ve(q),pe=1<<ae,Ie=U[ae];Ie===-1?((pe&T)===0||(pe&R)!==0)&&(U[ae]=be(pe,v)):Ie<=v&&(c.expiredLanes|=pe),q&=~pe}if(v=ir,T=jn,T=le(c,c===v?T:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),R=c.callbackNode,T===0||c===v&&(Hn===2||Hn===9)||c.cancelPendingCommit!==null)return R!==null&&R!==null&&me(R),c.callbackNode=null,c.callbackPriority=0;if((T&3)===0||de(c,T)){if(v=T&-T,v===c.callbackPriority)return v;switch(R!==null&&me(R),hn(T)){case 2:case 8:T=He;break;case 32:T=ze;break;case 268435456:T=gt;break;default:T=ze}return R=u_.bind(null,c),T=oe(T,R),c.callbackPriority=v,c.callbackNode=T,v}return R!==null&&R!==null&&me(R),c.callbackPriority=2,c.callbackNode=null,2}function u_(c,v){if(gs!==0&&gs!==5)return c.callbackNode=null,c.callbackPriority=0,null;var T=c.callbackNode;if(Fp()&&c.callbackNode!==T)return null;var R=jn;return R=le(c,c===ir?R:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),R===0?null:(WS(c,R,v),l_(c,ve()),c.callbackNode!=null&&c.callbackNode===T?u_.bind(null,c):null)}function c_(c,v){if(Fp())return null;WS(c,v,!0)}function MD(){GD(function(){(Wn&6)!==0?oe(Me,DD):i_()})}function ub(){return Il===0&&(Il=Ae()),Il}function d_(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:pi(""+c)}function h_(c,v){var T=v.ownerDocument.createElement("input");return T.name=v.name,T.value=v.value,c.id&&T.setAttribute("form",c.id),v.parentNode.insertBefore(T,v),c=new FormData(c),T.parentNode.removeChild(T),c}function OD(c,v,T,R,U){if(v==="submit"&&T&&T.stateNode===U){var q=d_((U[an]||null).action),ae=R.submitter;ae&&(v=(v=ae[an]||null)?d_(v.formAction):ae.getAttribute("formAction"),v!==null&&(q=v,ae=null));var pe=new Su("action","action",null,R,U);c.push({event:pe,listeners:[{instance:null,listener:function(){if(R.defaultPrevented){if(Il!==0){var Ie=ae?h_(U,ae):new FormData(U);I0(T,{pending:!0,data:Ie,method:U.method,action:q},null,Ie)}}else typeof q=="function"&&(pe.preventDefault(),Ie=ae?h_(U,ae):new FormData(U),I0(T,{pending:!0,data:Ie,method:U.method,action:q},q,Ie))},currentTarget:U}]})}}for(var cb=0;cb<Xy.length;cb++){var db=Xy[cb],$D=db.toLowerCase(),LD=db[0].toUpperCase()+db.slice(1);Wo($D,"on"+LD)}Wo(Sr,"onAnimationEnd"),Wo(Zr,"onAnimationIteration"),Wo(Kn,"onAnimationStart"),Wo("dblclick","onDoubleClick"),Wo("focusin","onFocus"),Wo("focusout","onBlur"),Wo(Mr,"onTransitionRun"),Wo(ml,"onTransitionStart"),Wo(gl,"onTransitionCancel"),Wo(Xw,"onTransitionEnd"),Dt("onMouseEnter",["mouseout","mouseover"]),Dt("onMouseLeave",["mouseout","mouseover"]),Dt("onPointerEnter",["pointerout","pointerover"]),Dt("onPointerLeave",["pointerout","pointerover"]),bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sd));function f_(c,v){v=(v&4)!==0;for(var T=0;T<c.length;T++){var R=c[T],U=R.event;R=R.listeners;e:{var q=void 0;if(v)for(var ae=R.length-1;0<=ae;ae--){var pe=R[ae],Ie=pe.instance,Ye=pe.currentTarget;if(pe=pe.listener,Ie!==q&&U.isPropagationStopped())break e;q=pe,U.currentTarget=Ye;try{q(U)}catch(lt){Ep(lt)}U.currentTarget=null,q=Ie}else for(ae=0;ae<R.length;ae++){if(pe=R[ae],Ie=pe.instance,Ye=pe.currentTarget,pe=pe.listener,Ie!==q&&U.isPropagationStopped())break e;q=pe,U.currentTarget=Ye;try{q(U)}catch(lt){Ep(lt)}U.currentTarget=null,q=Ie}}}}function wn(c,v){var T=v[An];T===void 0&&(T=v[An]=new Set);var R=c+"__bubble";T.has(R)||(p_(v,c,2,!1),T.add(R))}function hb(c,v,T){var R=0;v&&(R|=4),p_(T,c,R,v)}var Up="_reactListening"+Math.random().toString(36).slice(2);function fb(c){if(!c[Up]){c[Up]=!0,dl.forEach(function(T){T!=="selectionchange"&&(FD.has(T)||hb(T,!1,c),hb(T,!0,c))});var v=c.nodeType===9?c:c.ownerDocument;v===null||v[Up]||(v[Up]=!0,hb("selectionchange",!1,v))}}function p_(c,v,T,R){switch(F_(v)){case 2:var U=dM;break;case 8:U=hM;break;default:U=Eb}T=U.bind(null,v,T,c),U=void 0,!Gc||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(U=!0),R?U!==void 0?c.addEventListener(v,T,{capture:!0,passive:U}):c.addEventListener(v,T,!0):U!==void 0?c.addEventListener(v,T,{passive:U}):c.addEventListener(v,T,!1)}function pb(c,v,T,R,U){var q=R;if((v&1)===0&&(v&2)===0&&R!==null)e:for(;;){if(R===null)return;var ae=R.tag;if(ae===3||ae===4){var pe=R.stateNode.containerInfo;if(pe===U)break;if(ae===4)for(ae=R.return;ae!==null;){var Ie=ae.tag;if((Ie===3||Ie===4)&&ae.stateNode.containerInfo===U)return;ae=ae.return}for(;pe!==null;){if(ae=Cn(pe),ae===null)return;if(Ie=ae.tag,Ie===5||Ie===6||Ie===26||Ie===27){R=q=ae;continue e}pe=pe.parentNode}}R=R.return}Vc(function(){var Ye=q,lt=vu(T),ft=[];e:{var Je=Yw.get(c);if(Je!==void 0){var rt=Su,Jt=c;switch(c){case"keypress":if(wu(T)===0)break e;case"keydown":case"keyup":rt=Kf;break;case"focusin":Jt="focus",rt=Cu;break;case"focusout":Jt="blur",rt=Cu;break;case"beforeblur":case"afterblur":rt=Cu;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=la;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Eu;break;case Sr:case Zr:case Kn:rt=Uf;break;case Xw:rt=Qf;break;case"scroll":case"scrollend":rt=xo;break;case"wheel":rt=ca;break;case"copy":case"cut":case"paste":rt=Vf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=qc;break;case"toggle":case"beforetoggle":rt=Gy}var Xt=(v&4)!==0,Jn=!Xt&&(c==="scroll"||c==="scrollend"),Ge=Xt?Je!==null?Je+"Capture":null:Je;Xt=[];for(var Oe=Ye,qe;Oe!==null;){var ct=Oe;if(qe=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||qe===null||Ge===null||(ct=bo(Oe,Ge),ct!=null&&Xt.push(_d(Oe,ct,qe))),Jn)break;Oe=Oe.return}0<Xt.length&&(Je=new rt(Je,Jt,null,T,lt),ft.push({event:Je,listeners:Xt}))}}if((v&7)===0){e:{if(Je=c==="mouseover"||c==="pointerover",rt=c==="mouseout"||c==="pointerout",Je&&T!==bu&&(Jt=T.relatedTarget||T.fromElement)&&(Cn(Jt)||Jt[pr]))break e;if((rt||Je)&&(Je=lt.window===lt?lt:(Je=lt.ownerDocument)?Je.defaultView||Je.parentWindow:window,rt?(Jt=T.relatedTarget||T.toElement,rt=Ye,Jt=Jt?Cn(Jt):null,Jt!==null&&(Jn=i(Jt),Xt=Jt.tag,Jt!==Jn||Xt!==5&&Xt!==27&&Xt!==6)&&(Jt=null)):(rt=null,Jt=Ye),rt!==Jt)){if(Xt=gi,ct="onMouseLeave",Ge="onMouseEnter",Oe="mouse",(c==="pointerout"||c==="pointerover")&&(Xt=qc,ct="onPointerLeave",Ge="onPointerEnter",Oe="pointer"),Jn=rt==null?Je:ia(rt),qe=Jt==null?Je:ia(Jt),Je=new Xt(ct,Oe+"leave",rt,T,lt),Je.target=Jn,Je.relatedTarget=qe,ct=null,Cn(lt)===Ye&&(Xt=new Xt(Ge,Oe+"enter",Jt,T,lt),Xt.target=qe,Xt.relatedTarget=Jn,ct=Xt),Jn=ct,rt&&Jt)t:{for(Xt=rt,Ge=Jt,Oe=0,qe=Xt;qe;qe=Zu(qe))Oe++;for(qe=0,ct=Ge;ct;ct=Zu(ct))qe++;for(;0<Oe-qe;)Xt=Zu(Xt),Oe--;for(;0<qe-Oe;)Ge=Zu(Ge),qe--;for(;Oe--;){if(Xt===Ge||Ge!==null&&Xt===Ge.alternate)break t;Xt=Zu(Xt),Ge=Zu(Ge)}Xt=null}else Xt=null;rt!==null&&m_(ft,Je,rt,Xt,!1),Jt!==null&&Jn!==null&&m_(ft,Jn,Jt,Xt,!0)}}e:{if(Je=Ye?ia(Ye):window,rt=Je.nodeName&&Je.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Je.type==="file")var Ut=K;else if(wr(Je))if(ee)Ut=vt;else{Ut=Ue;var vn=Fe}else rt=Je.nodeName,!rt||rt.toLowerCase()!=="input"||Je.type!=="checkbox"&&Je.type!=="radio"?Ye&&zc(Ye.elementType)&&(Ut=K):Ut=Ee;if(Ut&&(Ut=Ut(c,Ye))){ju(ft,Ut,T,lt);break e}vn&&vn(c,Je,Ye),c==="focusout"&&Ye&&Je.type==="number"&&Ye.memoizedProps.value!=null&&di(Je,"number",Je.value)}switch(vn=Ye?ia(Ye):window,c){case"focusin":(wr(vn)||vn.contentEditable==="true")&&(_n=vn,Xn=Ye,Ln=null);break;case"focusout":Ln=Xn=_n=null;break;case"mousedown":Rn=!0;break;case"contextmenu":case"mouseup":case"dragend":Rn=!1,en(ft,T,lt);break;case"selectionchange":if(yn)break;case"keydown":case"keyup":en(ft,T,lt)}var Gt;if(da)e:{switch(c){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else yi?tp(c,T)&&(Kt="onCompositionEnd"):c==="keydown"&&T.keyCode===229&&(Kt="onCompositionStart");Kt&&(Pn&&T.locale!=="ko"&&(yi||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&yi&&(Gt=Hc()):(Vo=lt,Wc="value"in Vo?Vo.value:Vo.textContent,yi=!0)),vn=zp(Ye,Kt),0<vn.length&&(Kt=new ku(Kt,c,null,T,lt),ft.push({event:Kt,listeners:vn}),Gt?Kt.data=Gt:(Gt=np(T),Gt!==null&&(Kt.data=Gt)))),(Gt=Wy?Hy(c,T):qy(c,T))&&(Kt=zp(Ye,"onBeforeInput"),0<Kt.length&&(vn=new ku("onBeforeInput","beforeinput",null,T,lt),ft.push({event:vn,listeners:Kt}),vn.data=Gt)),OD(ft,c,Ye,T,lt)}f_(ft,v)})}function _d(c,v,T){return{instance:c,listener:v,currentTarget:T}}function zp(c,v){for(var T=v+"Capture",R=[];c!==null;){var U=c,q=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||q===null||(U=bo(c,T),U!=null&&R.unshift(_d(c,U,q)),U=bo(c,v),U!=null&&R.push(_d(c,U,q))),c.tag===3)return R;c=c.return}return[]}function Zu(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function m_(c,v,T,R,U){for(var q=v._reactName,ae=[];T!==null&&T!==R;){var pe=T,Ie=pe.alternate,Ye=pe.stateNode;if(pe=pe.tag,Ie!==null&&Ie===R)break;pe!==5&&pe!==26&&pe!==27||Ye===null||(Ie=Ye,U?(Ye=bo(T,q),Ye!=null&&ae.unshift(_d(T,Ye,Ie))):U||(Ye=bo(T,q),Ye!=null&&ae.push(_d(T,Ye,Ie)))),T=T.return}ae.length!==0&&c.push({event:v,listeners:ae})}var PD=/\r\n?/g,BD=/\u0000|\uFFFD/g;function g_(c){return(typeof c=="string"?c:""+c).replace(PD,`
`).replace(BD,"")}function y_(c,v){return v=g_(v),g_(c)===v}function Vp(){}function Qn(c,v,T,R,U,q){switch(T){case"children":typeof R=="string"?v==="body"||v==="textarea"&&R===""||fi(c,R):(typeof R=="number"||typeof R=="bigint")&&v!=="body"&&fi(c,""+R);break;case"className":rn(c,"class",R);break;case"tabIndex":rn(c,"tabindex",R);break;case"dir":case"role":case"viewBox":case"width":case"height":rn(c,T,R);break;case"style":Uc(c,R,q);break;case"data":if(v!=="object"){rn(c,"data",R);break}case"src":case"href":if(R===""&&(v!=="a"||T!=="href")){c.removeAttribute(T);break}if(R==null||typeof R=="function"||typeof R=="symbol"||typeof R=="boolean"){c.removeAttribute(T);break}R=pi(""+R),c.setAttribute(T,R);break;case"action":case"formAction":if(typeof R=="function"){c.setAttribute(T,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(T==="formAction"?(v!=="input"&&Qn(c,v,"name",U.name,U,null),Qn(c,v,"formEncType",U.formEncType,U,null),Qn(c,v,"formMethod",U.formMethod,U,null),Qn(c,v,"formTarget",U.formTarget,U,null)):(Qn(c,v,"encType",U.encType,U,null),Qn(c,v,"method",U.method,U,null),Qn(c,v,"target",U.target,U,null)));if(R==null||typeof R=="symbol"||typeof R=="boolean"){c.removeAttribute(T);break}R=pi(""+R),c.setAttribute(T,R);break;case"onClick":R!=null&&(c.onclick=Vp);break;case"onScroll":R!=null&&wn("scroll",c);break;case"onScrollEnd":R!=null&&wn("scrollend",c);break;case"dangerouslySetInnerHTML":if(R!=null){if(typeof R!="object"||!("__html"in R))throw Error(o(61));if(T=R.__html,T!=null){if(U.children!=null)throw Error(o(60));c.innerHTML=T}}break;case"multiple":c.multiple=R&&typeof R!="function"&&typeof R!="symbol";break;case"muted":c.muted=R&&typeof R!="function"&&typeof R!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(R==null||typeof R=="function"||typeof R=="boolean"||typeof R=="symbol"){c.removeAttribute("xlink:href");break}T=pi(""+R),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":R!=null&&typeof R!="function"&&typeof R!="symbol"?c.setAttribute(T,""+R):c.removeAttribute(T);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":R&&typeof R!="function"&&typeof R!="symbol"?c.setAttribute(T,""):c.removeAttribute(T);break;case"capture":case"download":R===!0?c.setAttribute(T,""):R!==!1&&R!=null&&typeof R!="function"&&typeof R!="symbol"?c.setAttribute(T,R):c.removeAttribute(T);break;case"cols":case"rows":case"size":case"span":R!=null&&typeof R!="function"&&typeof R!="symbol"&&!isNaN(R)&&1<=R?c.setAttribute(T,R):c.removeAttribute(T);break;case"rowSpan":case"start":R==null||typeof R=="function"||typeof R=="symbol"||isNaN(R)?c.removeAttribute(T):c.setAttribute(T,R);break;case"popover":wn("beforetoggle",c),wn("toggle",c),$t(c,"popover",R);break;case"xlinkActuate":Et(c,"http://www.w3.org/1999/xlink","xlink:actuate",R);break;case"xlinkArcrole":Et(c,"http://www.w3.org/1999/xlink","xlink:arcrole",R);break;case"xlinkRole":Et(c,"http://www.w3.org/1999/xlink","xlink:role",R);break;case"xlinkShow":Et(c,"http://www.w3.org/1999/xlink","xlink:show",R);break;case"xlinkTitle":Et(c,"http://www.w3.org/1999/xlink","xlink:title",R);break;case"xlinkType":Et(c,"http://www.w3.org/1999/xlink","xlink:type",R);break;case"xmlBase":Et(c,"http://www.w3.org/XML/1998/namespace","xml:base",R);break;case"xmlLang":Et(c,"http://www.w3.org/XML/1998/namespace","xml:lang",R);break;case"xmlSpace":Et(c,"http://www.w3.org/XML/1998/namespace","xml:space",R);break;case"is":$t(c,"is",R);break;case"innerText":case"textContent":break;default:(!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(T=Ff.get(T)||T,$t(c,T,R))}}function mb(c,v,T,R,U,q){switch(T){case"style":Uc(c,R,q);break;case"dangerouslySetInnerHTML":if(R!=null){if(typeof R!="object"||!("__html"in R))throw Error(o(61));if(T=R.__html,T!=null){if(U.children!=null)throw Error(o(60));c.innerHTML=T}}break;case"children":typeof R=="string"?fi(c,R):(typeof R=="number"||typeof R=="bigint")&&fi(c,""+R);break;case"onScroll":R!=null&&wn("scroll",c);break;case"onScrollEnd":R!=null&&wn("scrollend",c);break;case"onClick":R!=null&&(c.onclick=Vp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Te.hasOwnProperty(T))e:{if(T[0]==="o"&&T[1]==="n"&&(U=T.endsWith("Capture"),v=T.slice(2,U?T.length-7:void 0),q=c[an]||null,q=q!=null?q[T]:null,typeof q=="function"&&c.removeEventListener(v,q,U),typeof R=="function")){typeof q!="function"&&q!==null&&(T in c?c[T]=null:c.hasAttribute(T)&&c.removeAttribute(T)),c.addEventListener(v,R,U);break e}T in c?c[T]=R:R===!0?c.setAttribute(T,""):$t(c,T,R)}}}function ys(c,v,T){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":wn("error",c),wn("load",c);var R=!1,U=!1,q;for(q in T)if(T.hasOwnProperty(q)){var ae=T[q];if(ae!=null)switch(q){case"src":R=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,v));default:Qn(c,v,q,ae,T,null)}}U&&Qn(c,v,"srcSet",T.srcSet,T,null),R&&Qn(c,v,"src",T.src,T,null);return;case"input":wn("invalid",c);var pe=q=ae=U=null,Ie=null,Ye=null;for(R in T)if(T.hasOwnProperty(R)){var lt=T[R];if(lt!=null)switch(R){case"name":U=lt;break;case"type":ae=lt;break;case"checked":Ie=lt;break;case"defaultChecked":Ye=lt;break;case"value":q=lt;break;case"defaultValue":pe=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(o(137,v));break;default:Qn(c,v,R,lt,T,null)}}Oa(c,q,pe,Ie,Ye,ae,U,!1),gu(c);return;case"select":wn("invalid",c),R=ae=q=null;for(U in T)if(T.hasOwnProperty(U)&&(pe=T[U],pe!=null))switch(U){case"value":q=pe;break;case"defaultValue":ae=pe;break;case"multiple":R=pe;default:Qn(c,v,U,pe,T,null)}v=q,T=ae,c.multiple=!!R,v!=null?hi(c,!!R,v,!1):T!=null&&hi(c,!!R,T,!0);return;case"textarea":wn("invalid",c),q=U=R=null;for(ae in T)if(T.hasOwnProperty(ae)&&(pe=T[ae],pe!=null))switch(ae){case"value":R=pe;break;case"defaultValue":U=pe;break;case"children":q=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(o(91));break;default:Qn(c,v,ae,pe,T,null)}$f(c,R,U,q),gu(c);return;case"option":for(Ie in T)if(T.hasOwnProperty(Ie)&&(R=T[Ie],R!=null))switch(Ie){case"selected":c.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:Qn(c,v,Ie,R,T,null)}return;case"dialog":wn("beforetoggle",c),wn("toggle",c),wn("cancel",c),wn("close",c);break;case"iframe":case"object":wn("load",c);break;case"video":case"audio":for(R=0;R<Sd.length;R++)wn(Sd[R],c);break;case"image":wn("error",c),wn("load",c);break;case"details":wn("toggle",c);break;case"embed":case"source":case"link":wn("error",c),wn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in T)if(T.hasOwnProperty(Ye)&&(R=T[Ye],R!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,v));default:Qn(c,v,Ye,R,T,null)}return;default:if(zc(v)){for(lt in T)T.hasOwnProperty(lt)&&(R=T[lt],R!==void 0&&mb(c,v,lt,R,T,void 0));return}}for(pe in T)T.hasOwnProperty(pe)&&(R=T[pe],R!=null&&Qn(c,v,pe,R,T,null))}function UD(c,v,T,R){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,q=null,ae=null,pe=null,Ie=null,Ye=null,lt=null;for(rt in T){var ft=T[rt];if(T.hasOwnProperty(rt)&&ft!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":Ie=ft;default:R.hasOwnProperty(rt)||Qn(c,v,rt,null,R,ft)}}for(var Je in R){var rt=R[Je];if(ft=T[Je],R.hasOwnProperty(Je)&&(rt!=null||ft!=null))switch(Je){case"type":q=rt;break;case"name":U=rt;break;case"checked":Ye=rt;break;case"defaultChecked":lt=rt;break;case"value":ae=rt;break;case"defaultValue":pe=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(o(137,v));break;default:rt!==ft&&Qn(c,v,Je,rt,R,ft)}}Ms(c,ae,pe,Ie,Ye,lt,q,U);return;case"select":rt=ae=pe=Je=null;for(q in T)if(Ie=T[q],T.hasOwnProperty(q)&&Ie!=null)switch(q){case"value":break;case"multiple":rt=Ie;default:R.hasOwnProperty(q)||Qn(c,v,q,null,R,Ie)}for(U in R)if(q=R[U],Ie=T[U],R.hasOwnProperty(U)&&(q!=null||Ie!=null))switch(U){case"value":Je=q;break;case"defaultValue":pe=q;break;case"multiple":ae=q;default:q!==Ie&&Qn(c,v,U,q,R,Ie)}v=pe,T=ae,R=rt,Je!=null?hi(c,!!T,Je,!1):!!R!=!!T&&(v!=null?hi(c,!!T,v,!0):hi(c,!!T,T?[]:"",!1));return;case"textarea":rt=Je=null;for(pe in T)if(U=T[pe],T.hasOwnProperty(pe)&&U!=null&&!R.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:Qn(c,v,pe,null,R,U)}for(ae in R)if(U=R[ae],q=T[ae],R.hasOwnProperty(ae)&&(U!=null||q!=null))switch(ae){case"value":Je=U;break;case"defaultValue":rt=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(91));break;default:U!==q&&Qn(c,v,ae,U,R,q)}Of(c,Je,rt);return;case"option":for(var Jt in T)if(Je=T[Jt],T.hasOwnProperty(Jt)&&Je!=null&&!R.hasOwnProperty(Jt))switch(Jt){case"selected":c.selected=!1;break;default:Qn(c,v,Jt,null,R,Je)}for(Ie in R)if(Je=R[Ie],rt=T[Ie],R.hasOwnProperty(Ie)&&Je!==rt&&(Je!=null||rt!=null))switch(Ie){case"selected":c.selected=Je&&typeof Je!="function"&&typeof Je!="symbol";break;default:Qn(c,v,Ie,Je,R,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in T)Je=T[Xt],T.hasOwnProperty(Xt)&&Je!=null&&!R.hasOwnProperty(Xt)&&Qn(c,v,Xt,null,R,Je);for(Ye in R)if(Je=R[Ye],rt=T[Ye],R.hasOwnProperty(Ye)&&Je!==rt&&(Je!=null||rt!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(o(137,v));break;default:Qn(c,v,Ye,Je,R,rt)}return;default:if(zc(v)){for(var Jn in T)Je=T[Jn],T.hasOwnProperty(Jn)&&Je!==void 0&&!R.hasOwnProperty(Jn)&&mb(c,v,Jn,void 0,R,Je);for(lt in R)Je=R[lt],rt=T[lt],!R.hasOwnProperty(lt)||Je===rt||Je===void 0&&rt===void 0||mb(c,v,lt,Je,R,rt);return}}for(var Ge in T)Je=T[Ge],T.hasOwnProperty(Ge)&&Je!=null&&!R.hasOwnProperty(Ge)&&Qn(c,v,Ge,null,R,Je);for(ft in R)Je=R[ft],rt=T[ft],!R.hasOwnProperty(ft)||Je===rt||Je==null&&rt==null||Qn(c,v,ft,Je,R,rt)}var gb=null,yb=null;function Gp(c){return c.nodeType===9?c:c.ownerDocument}function b_(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v_(c,v){if(c===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&v==="foreignObject"?0:c}function bb(c,v){return c==="textarea"||c==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var vb=null;function zD(){var c=window.event;return c&&c.type==="popstate"?c===vb?!1:(vb=c,!0):(vb=null,!1)}var x_=typeof setTimeout=="function"?setTimeout:void 0,VD=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,GD=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(c){return w_.resolve(null).then(c).catch(WD)}:x_;function WD(c){setTimeout(function(){throw c})}function Di(c){return c==="head"}function S_(c,v){var T=v,R=0,U=0;do{var q=T.nextSibling;if(c.removeChild(T),q&&q.nodeType===8)if(T=q.data,T==="/$"){if(0<R&&8>R){T=R;var ae=c.ownerDocument;if(T&1&&Cd(ae.documentElement),T&2&&Cd(ae.body),T&4)for(T=ae.head,Cd(T),ae=T.firstChild;ae;){var pe=ae.nextSibling,Ie=ae.nodeName;ae[vr]||Ie==="SCRIPT"||Ie==="STYLE"||Ie==="LINK"&&ae.rel.toLowerCase()==="stylesheet"||T.removeChild(ae),ae=pe}}if(U===0){c.removeChild(q),Nd(v);return}U--}else T==="$"||T==="$?"||T==="$!"?U++:R=T.charCodeAt(0)-48;else R=0;T=q}while(T);Nd(v)}function xb(c){var v=c.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var T=v;switch(v=v.nextSibling,T.nodeName){case"HTML":case"HEAD":case"BODY":xb(T),Cr(T);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(T.rel.toLowerCase()==="stylesheet")continue}c.removeChild(T)}}function HD(c,v,T,R){for(;c.nodeType===1;){var U=T;if(c.nodeName.toLowerCase()!==v.toLowerCase()){if(!R&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(R){if(!c[vr])switch(v){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(q=c.getAttribute("rel"),q==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(q!==U.rel||c.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||c.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||c.getAttribute("title")!==(U.title==null?null:U.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(q=c.getAttribute("src"),(q!==(U.src==null?null:U.src)||c.getAttribute("type")!==(U.type==null?null:U.type)||c.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&q&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(v==="input"&&c.type==="hidden"){var q=U.name==null?null:""+U.name;if(U.type==="hidden"&&c.getAttribute("name")===q)return c}else return c;if(c=qo(c.nextSibling),c===null)break}return null}function qD(c,v,T){if(v==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!T||(c=qo(c.nextSibling),c===null))return null;return c}function wb(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function XD(c,v){var T=c.ownerDocument;if(c.data!=="$?"||T.readyState==="complete")v();else{var R=function(){v(),T.removeEventListener("DOMContentLoaded",R)};T.addEventListener("DOMContentLoaded",R),c._reactRetry=R}}function qo(c){for(;c!=null;c=c.nextSibling){var v=c.nodeType;if(v===1||v===3)break;if(v===8){if(v=c.data,v==="$"||v==="$!"||v==="$?"||v==="F!"||v==="F")break;if(v==="/$")return null}}return c}var Sb=null;function __(c){c=c.previousSibling;for(var v=0;c;){if(c.nodeType===8){var T=c.data;if(T==="$"||T==="$!"||T==="$?"){if(v===0)return c;v--}else T==="/$"&&v++}c=c.previousSibling}return null}function C_(c,v,T){switch(v=Gp(T),c){case"html":if(c=v.documentElement,!c)throw Error(o(452));return c;case"head":if(c=v.head,!c)throw Error(o(453));return c;case"body":if(c=v.body,!c)throw Error(o(454));return c;default:throw Error(o(451))}}function Cd(c){for(var v=c.attributes;v.length;)c.removeAttributeNode(v[0]);Cr(c)}var Eo=new Map,k_=new Set;function Wp(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Za=G.d;G.d={f:YD,r:KD,D:ZD,C:QD,L:JD,m:eM,X:nM,S:tM,M:rM};function YD(){var c=Za.f(),v=$p();return c||v}function KD(c){var v=Po(c);v!==null&&v.tag===5&&v.type==="form"?W2(v):Za.r(c)}var Qu=typeof document>"u"?null:document;function T_(c,v,T){var R=Qu;if(R&&typeof v=="string"&&v){var U=Vs(v);U='link[rel="'+c+'"][href="'+U+'"]',typeof T=="string"&&(U+='[crossorigin="'+T+'"]'),k_.has(U)||(k_.add(U),c={rel:c,crossOrigin:T,href:v},R.querySelector(U)===null&&(v=R.createElement("link"),ys(v,"link",c),xr(v),R.head.appendChild(v)))}}function ZD(c){Za.D(c),T_("dns-prefetch",c,null)}function QD(c,v){Za.C(c,v),T_("preconnect",c,v)}function JD(c,v,T){Za.L(c,v,T);var R=Qu;if(R&&c&&v){var U='link[rel="preload"][as="'+Vs(v)+'"]';v==="image"&&T&&T.imageSrcSet?(U+='[imagesrcset="'+Vs(T.imageSrcSet)+'"]',typeof T.imageSizes=="string"&&(U+='[imagesizes="'+Vs(T.imageSizes)+'"]')):U+='[href="'+Vs(c)+'"]';var q=U;switch(v){case"style":q=Ju(c);break;case"script":q=ec(c)}Eo.has(q)||(c=u({rel:"preload",href:v==="image"&&T&&T.imageSrcSet?void 0:c,as:v},T),Eo.set(q,c),R.querySelector(U)!==null||v==="style"&&R.querySelector(kd(q))||v==="script"&&R.querySelector(Td(q))||(v=R.createElement("link"),ys(v,"link",c),xr(v),R.head.appendChild(v)))}}function eM(c,v){Za.m(c,v);var T=Qu;if(T&&c){var R=v&&typeof v.as=="string"?v.as:"script",U='link[rel="modulepreload"][as="'+Vs(R)+'"][href="'+Vs(c)+'"]',q=U;switch(R){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=ec(c)}if(!Eo.has(q)&&(c=u({rel:"modulepreload",href:c},v),Eo.set(q,c),T.querySelector(U)===null)){switch(R){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(T.querySelector(Td(q)))return}R=T.createElement("link"),ys(R,"link",c),xr(R),T.head.appendChild(R)}}}function tM(c,v,T){Za.S(c,v,T);var R=Qu;if(R&&c){var U=Bo(R).hoistableStyles,q=Ju(c);v=v||"default";var ae=U.get(q);if(!ae){var pe={loading:0,preload:null};if(ae=R.querySelector(kd(q)))pe.loading=5;else{c=u({rel:"stylesheet",href:c,"data-precedence":v},T),(T=Eo.get(q))&&_b(c,T);var Ie=ae=R.createElement("link");xr(Ie),ys(Ie,"link",c),Ie._p=new Promise(function(Ye,lt){Ie.onload=Ye,Ie.onerror=lt}),Ie.addEventListener("load",function(){pe.loading|=1}),Ie.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,Hp(ae,v,R)}ae={type:"stylesheet",instance:ae,count:1,state:pe},U.set(q,ae)}}}function nM(c,v){Za.X(c,v);var T=Qu;if(T&&c){var R=Bo(T).hoistableScripts,U=ec(c),q=R.get(U);q||(q=T.querySelector(Td(U)),q||(c=u({src:c,async:!0},v),(v=Eo.get(U))&&Cb(c,v),q=T.createElement("script"),xr(q),ys(q,"link",c),T.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},R.set(U,q))}}function rM(c,v){Za.M(c,v);var T=Qu;if(T&&c){var R=Bo(T).hoistableScripts,U=ec(c),q=R.get(U);q||(q=T.querySelector(Td(U)),q||(c=u({src:c,async:!0,type:"module"},v),(v=Eo.get(U))&&Cb(c,v),q=T.createElement("script"),xr(q),ys(q,"link",c),T.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},R.set(U,q))}}function E_(c,v,T,R){var U=(U=ie.current)?Wp(U):null;if(!U)throw Error(o(446));switch(c){case"meta":case"title":return null;case"style":return typeof T.precedence=="string"&&typeof T.href=="string"?(v=Ju(T.href),T=Bo(U).hoistableStyles,R=T.get(v),R||(R={type:"style",instance:null,count:0,state:null},T.set(v,R)),R):{type:"void",instance:null,count:0,state:null};case"link":if(T.rel==="stylesheet"&&typeof T.href=="string"&&typeof T.precedence=="string"){c=Ju(T.href);var q=Bo(U).hoistableStyles,ae=q.get(c);if(ae||(U=U.ownerDocument||U,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(c,ae),(q=U.querySelector(kd(c)))&&!q._p&&(ae.instance=q,ae.state.loading=5),Eo.has(c)||(T={rel:"preload",as:"style",href:T.href,crossOrigin:T.crossOrigin,integrity:T.integrity,media:T.media,hrefLang:T.hrefLang,referrerPolicy:T.referrerPolicy},Eo.set(c,T),q||sM(U,c,T,ae.state))),v&&R===null)throw Error(o(528,""));return ae}if(v&&R!==null)throw Error(o(529,""));return null;case"script":return v=T.async,T=T.src,typeof T=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=ec(T),T=Bo(U).hoistableScripts,R=T.get(v),R||(R={type:"script",instance:null,count:0,state:null},T.set(v,R)),R):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,c))}}function Ju(c){return'href="'+Vs(c)+'"'}function kd(c){return'link[rel="stylesheet"]['+c+"]"}function j_(c){return u({},c,{"data-precedence":c.precedence,precedence:null})}function sM(c,v,T,R){c.querySelector('link[rel="preload"][as="style"]['+v+"]")?R.loading=1:(v=c.createElement("link"),R.preload=v,v.addEventListener("load",function(){return R.loading|=1}),v.addEventListener("error",function(){return R.loading|=2}),ys(v,"link",T),xr(v),c.head.appendChild(v))}function ec(c){return'[src="'+Vs(c)+'"]'}function Td(c){return"script[async]"+c}function I_(c,v,T){if(v.count++,v.instance===null)switch(v.type){case"style":var R=c.querySelector('style[data-href~="'+Vs(T.href)+'"]');if(R)return v.instance=R,xr(R),R;var U=u({},T,{"data-href":T.href,"data-precedence":T.precedence,href:null,precedence:null});return R=(c.ownerDocument||c).createElement("style"),xr(R),ys(R,"style",U),Hp(R,T.precedence,c),v.instance=R;case"stylesheet":U=Ju(T.href);var q=c.querySelector(kd(U));if(q)return v.state.loading|=4,v.instance=q,xr(q),q;R=j_(T),(U=Eo.get(U))&&_b(R,U),q=(c.ownerDocument||c).createElement("link"),xr(q);var ae=q;return ae._p=new Promise(function(pe,Ie){ae.onload=pe,ae.onerror=Ie}),ys(q,"link",R),v.state.loading|=4,Hp(q,T.precedence,c),v.instance=q;case"script":return q=ec(T.src),(U=c.querySelector(Td(q)))?(v.instance=U,xr(U),U):(R=T,(U=Eo.get(q))&&(R=u({},T),Cb(R,U)),c=c.ownerDocument||c,U=c.createElement("script"),xr(U),ys(U,"link",R),c.head.appendChild(U),v.instance=U);case"void":return null;default:throw Error(o(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(R=v.instance,v.state.loading|=4,Hp(R,T.precedence,c));return v.instance}function Hp(c,v,T){for(var R=T.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=R.length?R[R.length-1]:null,q=U,ae=0;ae<R.length;ae++){var pe=R[ae];if(pe.dataset.precedence===v)q=pe;else if(q!==U)break}q?q.parentNode.insertBefore(c,q.nextSibling):(v=T.nodeType===9?T.head:T,v.insertBefore(c,v.firstChild))}function _b(c,v){c.crossOrigin==null&&(c.crossOrigin=v.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=v.referrerPolicy),c.title==null&&(c.title=v.title)}function Cb(c,v){c.crossOrigin==null&&(c.crossOrigin=v.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=v.referrerPolicy),c.integrity==null&&(c.integrity=v.integrity)}var qp=null;function A_(c,v,T){if(qp===null){var R=new Map,U=qp=new Map;U.set(T,R)}else U=qp,R=U.get(T),R||(R=new Map,U.set(T,R));if(R.has(c))return R;for(R.set(c,null),T=T.getElementsByTagName(c),U=0;U<T.length;U++){var q=T[U];if(!(q[vr]||q[Qt]||c==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=q.getAttribute(v)||"";ae=c+ae;var pe=R.get(ae);pe?pe.push(q):R.set(ae,[q])}}return R}function R_(c,v,T){c=c.ownerDocument||c,c.head.insertBefore(T,v==="title"?c.querySelector("head > title"):null)}function oM(c,v,T){if(T===1||v.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;switch(v.rel){case"stylesheet":return c=v.disabled,typeof v.precedence=="string"&&c==null;default:return!0}case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function N_(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Ed=null;function aM(){}function iM(c,v,T){if(Ed===null)throw Error(o(475));var R=Ed;if(v.type==="stylesheet"&&(typeof T.media!="string"||matchMedia(T.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var U=Ju(T.href),q=c.querySelector(kd(U));if(q){c=q._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(R.count++,R=Xp.bind(R),c.then(R,R)),v.state.loading|=4,v.instance=q,xr(q);return}q=c.ownerDocument||c,T=j_(T),(U=Eo.get(U))&&_b(T,U),q=q.createElement("link"),xr(q);var ae=q;ae._p=new Promise(function(pe,Ie){ae.onload=pe,ae.onerror=Ie}),ys(q,"link",T),v.instance=q}R.stylesheets===null&&(R.stylesheets=new Map),R.stylesheets.set(v,c),(c=v.state.preload)&&(v.state.loading&3)===0&&(R.count++,v=Xp.bind(R),c.addEventListener("load",v),c.addEventListener("error",v))}}function lM(){if(Ed===null)throw Error(o(475));var c=Ed;return c.stylesheets&&c.count===0&&kb(c,c.stylesheets),0<c.count?function(v){var T=setTimeout(function(){if(c.stylesheets&&kb(c,c.stylesheets),c.unsuspend){var R=c.unsuspend;c.unsuspend=null,R()}},6e4);return c.unsuspend=v,function(){c.unsuspend=null,clearTimeout(T)}}:null}function Xp(){if(this.count--,this.count===0){if(this.stylesheets)kb(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Yp=null;function kb(c,v){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Yp=new Map,v.forEach(uM,c),Yp=null,Xp.call(c))}function uM(c,v){if(!(v.state.loading&4)){var T=Yp.get(c);if(T)var R=T.get(null);else{T=new Map,Yp.set(c,T);for(var U=c.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<U.length;q++){var ae=U[q];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(T.set(ae.dataset.precedence,ae),R=ae)}R&&T.set(null,R)}U=v.instance,ae=U.getAttribute("data-precedence"),q=T.get(ae)||R,q===R&&T.set(null,U),T.set(ae,U),this.count++,R=Xp.bind(this),U.addEventListener("load",R),U.addEventListener("error",R),q?q.parentNode.insertBefore(U,q.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(U,c.firstChild)),v.state.loading|=4}}var jd={$$typeof:w,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function cM(c,v,T,R,U,q,ae,pe){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.hiddenUpdates=yt(null),this.identifierPrefix=R,this.onUncaughtError=U,this.onCaughtError=q,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pe,this.incompleteTransitions=new Map}function D_(c,v,T,R,U,q,ae,pe,Ie,Ye,lt,ft){return c=new cM(c,v,T,ae,pe,Ie,Ye,ft),v=1,q===!0&&(v|=24),q=ro(3,null,null,v),c.current=q,q.stateNode=c,v=a0(),v.refCount++,c.pooledCache=v,v.refCount++,q.memoizedState={element:R,isDehydrated:T,cache:v},c0(q),c}function M_(c){return c?(c=Ru,c):Ru}function O_(c,v,T,R,U,q){U=M_(U),R.context===null?R.context=U:R.pendingContext=U,R=xi(v),R.payload={element:T},q=q===void 0?null:q,q!==null&&(R.callback=q),T=wi(c,R,v),T!==null&&(lo(T,c,v),sd(T,c,v))}function $_(c,v){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var T=c.retryLane;c.retryLane=T!==0&&T<v?T:v}}function Tb(c,v){$_(c,v),(c=c.alternate)&&$_(c,v)}function L_(c){if(c.tag===13){var v=Au(c,67108864);v!==null&&lo(v,c,67108864),Tb(c,67108864)}}var Kp=!0;function dM(c,v,T,R){var U=F.T;F.T=null;var q=G.p;try{G.p=2,Eb(c,v,T,R)}finally{G.p=q,F.T=U}}function hM(c,v,T,R){var U=F.T;F.T=null;var q=G.p;try{G.p=8,Eb(c,v,T,R)}finally{G.p=q,F.T=U}}function Eb(c,v,T,R){if(Kp){var U=jb(R);if(U===null)pb(c,v,R,Zp,T),P_(c,R);else if(pM(U,c,v,T,R))R.stopPropagation();else if(P_(c,R),v&4&&-1<fM.indexOf(c)){for(;U!==null;){var q=Po(U);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var ae=ue(q.pendingLanes);if(ae!==0){var pe=q;for(pe.pendingLanes|=2,pe.entangledLanes|=2;ae;){var Ie=1<<31-Ve(ae);pe.entanglements[1]|=Ie,ae&=~Ie}ga(q),(Wn&6)===0&&(Mp=ve()+500,wd(0))}}break;case 13:pe=Au(q,2),pe!==null&&lo(pe,q,2),$p(),Tb(q,2)}if(q=jb(R),q===null&&pb(c,v,R,Zp,T),q===U)break;U=q}U!==null&&R.stopPropagation()}else pb(c,v,R,null,T)}}function jb(c){return c=vu(c),Ib(c)}var Zp=null;function Ib(c){if(Zp=null,c=Cn(c),c!==null){var v=i(c);if(v===null)c=null;else{var T=v.tag;if(T===13){if(c=p(v),c!==null)return c;c=null}else if(T===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;c=null}else v!==c&&(c=null)}}return Zp=c,null}function F_(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case Me:return 2;case He:return 8;case ze:case st:return 32;case gt:return 268435456;default:return 32}default:return 32}}var Ab=!1,Mi=null,Oi=null,$i=null,Id=new Map,Ad=new Map,Li=[],fM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P_(c,v){switch(c){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Id.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ad.delete(v.pointerId)}}function Rd(c,v,T,R,U,q){return c===null||c.nativeEvent!==q?(c={blockedOn:v,domEventName:T,eventSystemFlags:R,nativeEvent:q,targetContainers:[U]},v!==null&&(v=Po(v),v!==null&&L_(v)),c):(c.eventSystemFlags|=R,v=c.targetContainers,U!==null&&v.indexOf(U)===-1&&v.push(U),c)}function pM(c,v,T,R,U){switch(v){case"focusin":return Mi=Rd(Mi,c,v,T,R,U),!0;case"dragenter":return Oi=Rd(Oi,c,v,T,R,U),!0;case"mouseover":return $i=Rd($i,c,v,T,R,U),!0;case"pointerover":var q=U.pointerId;return Id.set(q,Rd(Id.get(q)||null,c,v,T,R,U)),!0;case"gotpointercapture":return q=U.pointerId,Ad.set(q,Rd(Ad.get(q)||null,c,v,T,R,U)),!0}return!1}function B_(c){var v=Cn(c.target);if(v!==null){var T=i(v);if(T!==null){if(v=T.tag,v===13){if(v=p(T),v!==null){c.blockedOn=v,tn(c.priority,function(){if(T.tag===13){var R=io();R=nn(R);var U=Au(T,R);U!==null&&lo(U,T,R),Tb(T,R)}});return}}else if(v===3&&T.stateNode.current.memoizedState.isDehydrated){c.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Qp(c){if(c.blockedOn!==null)return!1;for(var v=c.targetContainers;0<v.length;){var T=jb(c.nativeEvent);if(T===null){T=c.nativeEvent;var R=new T.constructor(T.type,T);bu=R,T.target.dispatchEvent(R),bu=null}else return v=Po(T),v!==null&&L_(v),c.blockedOn=T,!1;v.shift()}return!0}function U_(c,v,T){Qp(c)&&T.delete(v)}function mM(){Ab=!1,Mi!==null&&Qp(Mi)&&(Mi=null),Oi!==null&&Qp(Oi)&&(Oi=null),$i!==null&&Qp($i)&&($i=null),Id.forEach(U_),Ad.forEach(U_)}function Jp(c,v){c.blockedOn===v&&(c.blockedOn=null,Ab||(Ab=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,mM)))}var em=null;function z_(c){em!==c&&(em=c,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){em===c&&(em=null);for(var v=0;v<c.length;v+=3){var T=c[v],R=c[v+1],U=c[v+2];if(typeof R!="function"){if(Ib(R||T)===null)continue;break}var q=Po(T);q!==null&&(c.splice(v,3),v-=3,I0(q,{pending:!0,data:U,method:T.method,action:R},R,U))}}))}function Nd(c){function v(Ie){return Jp(Ie,c)}Mi!==null&&Jp(Mi,c),Oi!==null&&Jp(Oi,c),$i!==null&&Jp($i,c),Id.forEach(v),Ad.forEach(v);for(var T=0;T<Li.length;T++){var R=Li[T];R.blockedOn===c&&(R.blockedOn=null)}for(;0<Li.length&&(T=Li[0],T.blockedOn===null);)B_(T),T.blockedOn===null&&Li.shift();if(T=(c.ownerDocument||c).$$reactFormReplay,T!=null)for(R=0;R<T.length;R+=3){var U=T[R],q=T[R+1],ae=U[an]||null;if(typeof q=="function")ae||z_(T);else if(ae){var pe=null;if(q&&q.hasAttribute("formAction")){if(U=q,ae=q[an]||null)pe=ae.formAction;else if(Ib(U)!==null)continue}else pe=ae.action;typeof pe=="function"?T[R+1]=pe:(T.splice(R,3),R-=3),z_(T)}}}function Rb(c){this._internalRoot=c}tm.prototype.render=Rb.prototype.render=function(c){var v=this._internalRoot;if(v===null)throw Error(o(409));var T=v.current,R=io();O_(T,R,c,v,null,null)},tm.prototype.unmount=Rb.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var v=c.containerInfo;O_(c.current,2,null,c,null,null),$p(),v[pr]=null}};function tm(c){this._internalRoot=c}tm.prototype.unstable_scheduleHydration=function(c){if(c){var v=sn();c={blockedOn:null,target:c,priority:v};for(var T=0;T<Li.length&&v!==0&&v<Li[T].priority;T++);Li.splice(T,0,c),T===0&&B_(c)}};var V_=t.version;if(V_!=="19.1.0")throw Error(o(527,V_,"19.1.0"));G.findDOMNode=function(c){var v=c._reactInternals;if(v===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=h(v),c=c!==null?f(c):null,c=c===null?null:c.stateNode,c};var gM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nm.isDisabled&&nm.supportsFiber)try{_t=nm.inject(gM),xe=nm}catch{}}return Md.createRoot=function(c,v){if(!a(c))throw Error(o(299));var T=!1,R="",U=oS,q=aS,ae=iS,pe=null;return v!=null&&(v.unstable_strictMode===!0&&(T=!0),v.identifierPrefix!==void 0&&(R=v.identifierPrefix),v.onUncaughtError!==void 0&&(U=v.onUncaughtError),v.onCaughtError!==void 0&&(q=v.onCaughtError),v.onRecoverableError!==void 0&&(ae=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(pe=v.unstable_transitionCallbacks)),v=D_(c,1,!1,null,null,T,R,U,q,ae,pe,null),c[pr]=v.current,fb(c),new Rb(v)},Md.hydrateRoot=function(c,v,T){if(!a(c))throw Error(o(299));var R=!1,U="",q=oS,ae=aS,pe=iS,Ie=null,Ye=null;return T!=null&&(T.unstable_strictMode===!0&&(R=!0),T.identifierPrefix!==void 0&&(U=T.identifierPrefix),T.onUncaughtError!==void 0&&(q=T.onUncaughtError),T.onCaughtError!==void 0&&(ae=T.onCaughtError),T.onRecoverableError!==void 0&&(pe=T.onRecoverableError),T.unstable_transitionCallbacks!==void 0&&(Ie=T.unstable_transitionCallbacks),T.formState!==void 0&&(Ye=T.formState)),v=D_(c,1,!0,v,T??null,R,U,q,ae,pe,Ie,Ye),v.context=M_(null),T=v.current,R=io(),R=nn(R),U=xi(R),U.callback=null,wi(T,U,R),T=R,v.current.lanes=T,ht(v,T),ga(v),c[pr]=v.current,fb(c),new tm(v)},Md.version="19.1.0",Md}var J_;function jM(){if(J_)return Db.exports;J_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Db.exports=EM(),Db.exports}var IM=jM();const AM=r1(IM);var lr=ch();function dv(){return dv=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(s[o]=n[o])}return s},dv.apply(this,arguments)}var RM={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(s){},onComplete:function(s){},preStringTyped:function(s,t){},onStringTyped:function(s,t){},onLastStringBackspaced:function(s){},onTypingPaused:function(s,t){},onTypingResumed:function(s,t){},onReset:function(s){},onStop:function(s,t){},onStart:function(s,t){},onDestroy:function(s){}},NM=new(function(){function s(){}var t=s.prototype;return t.load=function(n,o,a){if(n.el=typeof a=="string"?document.querySelector(a):a,n.options=dv({},RM,o),n.isInput=n.el.tagName.toLowerCase()==="input",n.attr=n.options.attr,n.bindInputFocusEvents=n.options.bindInputFocusEvents,n.showCursor=!n.isInput&&n.options.showCursor,n.cursorChar=n.options.cursorChar,n.cursorBlinking=!0,n.elContent=n.attr?n.el.getAttribute(n.attr):n.el.textContent,n.contentType=n.options.contentType,n.typeSpeed=n.options.typeSpeed,n.startDelay=n.options.startDelay,n.backSpeed=n.options.backSpeed,n.smartBackspace=n.options.smartBackspace,n.backDelay=n.options.backDelay,n.fadeOut=n.options.fadeOut,n.fadeOutClass=n.options.fadeOutClass,n.fadeOutDelay=n.options.fadeOutDelay,n.isPaused=!1,n.strings=n.options.strings.map(function(f){return f.trim()}),n.stringsElement=typeof n.options.stringsElement=="string"?document.querySelector(n.options.stringsElement):n.options.stringsElement,n.stringsElement){n.strings=[],n.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var i=Array.prototype.slice.apply(n.stringsElement.children),p=i.length;if(p)for(var r=0;r<p;r+=1)n.strings.push(i[r].innerHTML.trim())}for(var h in n.strPos=0,n.currentElContent=this.getCurrentElContent(n),n.currentElContent&&n.currentElContent.length>0&&(n.strPos=n.currentElContent.length-1,n.strings.unshift(n.currentElContent)),n.sequence=[],n.strings)n.sequence[h]=h;n.arrayPos=0,n.stopNum=0,n.loop=n.options.loop,n.loopCount=n.options.loopCount,n.curLoop=0,n.shuffle=n.options.shuffle,n.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},n.typingComplete=!1,n.autoInsertCss=n.options.autoInsertCss,n.autoInsertCss&&(this.appendCursorAnimationCss(n),this.appendFadeOutAnimationCss(n))},t.getCurrentElContent=function(n){return n.attr?n.el.getAttribute(n.attr):n.isInput?n.el.value:n.contentType==="html"?n.el.innerHTML:n.el.textContent},t.appendCursorAnimationCss=function(n){var o="data-typed-js-cursor-css";if(n.showCursor&&!document.querySelector("["+o+"]")){var a=document.createElement("style");a.setAttribute(o,"true"),a.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(a)}},t.appendFadeOutAnimationCss=function(n){var o="data-typed-fadeout-js-css";if(n.fadeOut&&!document.querySelector("["+o+"]")){var a=document.createElement("style");a.setAttribute(o,"true"),a.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(a)}},s}()),eC=new(function(){function s(){}var t=s.prototype;return t.typeHtmlChars=function(n,o,a){if(a.contentType!=="html")return o;var i=n.substring(o).charAt(0);if(i==="<"||i==="&"){var p;for(p=i==="<"?">":";";n.substring(o+1).charAt(0)!==p&&!(1+ ++o>n.length););o++}return o},t.backSpaceHtmlChars=function(n,o,a){if(a.contentType!=="html")return o;var i=n.substring(o).charAt(0);if(i===">"||i===";"){var p;for(p=i===">"?"<":"&";n.substring(o-1).charAt(0)!==p&&!(--o<0););o--}return o},s}()),sT=function(){function s(n,o){NM.load(this,o,n),this.begin()}var t=s.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(n){n===void 0&&(n=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,n&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var n=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){n.strPos===0?n.typewrite(n.strings[n.sequence[n.arrayPos]],n.strPos):n.backspace(n.strings[n.sequence[n.arrayPos]],n.strPos)},this.startDelay)},t.typewrite=function(n,o){var a=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var i=this.humanizer(this.typeSpeed),p=1;this.pause.status!==!0?this.timeout=setTimeout(function(){o=eC.typeHtmlChars(n,o,a);var r=0,h=n.substring(o);if(h.charAt(0)==="^"&&/^\^\d+/.test(h)){var f=1;f+=(h=/\d+/.exec(h)[0]).length,r=parseInt(h),a.temporaryPause=!0,a.options.onTypingPaused(a.arrayPos,a),n=n.substring(0,o)+n.substring(o+f),a.toggleBlinking(!0)}if(h.charAt(0)==="`"){for(;n.substring(o+p).charAt(0)!=="`"&&(p++,!(o+p>n.length)););var u=n.substring(0,o),l=n.substring(u.length+1,o+p),d=n.substring(o+p+1);n=u+l+d,p--}a.timeout=setTimeout(function(){a.toggleBlinking(!1),o>=n.length?a.doneTyping(n,o):a.keepTyping(n,o,p),a.temporaryPause&&(a.temporaryPause=!1,a.options.onTypingResumed(a.arrayPos,a))},r)},i):this.setPauseStatus(n,o,!0)},t.keepTyping=function(n,o,a){o===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var i=n.substring(0,o+=a);this.replaceText(i),this.typewrite(n,o)},t.doneTyping=function(n,o){var a=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){a.backspace(n,o)},this.backDelay))},t.backspace=function(n,o){var a=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var i=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){o=eC.backSpaceHtmlChars(n,o,a);var p=n.substring(0,o);if(a.replaceText(p),a.smartBackspace){var r=a.strings[a.arrayPos+1];a.stopNum=r&&p===r.substring(0,o)?o:0}o>a.stopNum?(o--,a.backspace(n,o)):o<=a.stopNum&&(a.arrayPos++,a.arrayPos===a.strings.length?(a.arrayPos=0,a.options.onLastStringBackspaced(),a.shuffleStringsIfNeeded(),a.begin()):a.typewrite(a.strings[a.sequence[a.arrayPos]],o))},i)}else this.setPauseStatus(n,o,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(n,o,a){this.pause.typewrite=a,this.pause.curString=n,this.pause.curStrPos=o},t.toggleBlinking=function(n){this.cursor&&(this.pause.status||this.cursorBlinking!==n&&(this.cursorBlinking=n,n?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(n){return Math.round(Math.random()*n/2)+n},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var n=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){n.arrayPos++,n.replaceText(""),n.strings.length>n.arrayPos?n.typewrite(n.strings[n.sequence[n.arrayPos]],0):(n.typewrite(n.strings[0],0),n.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(n){this.attr?this.el.setAttribute(this.attr,n):this.isInput?this.el.value=n:this.contentType==="html"?this.el.innerHTML=n:this.el.textContent=n},t.bindFocusEvents=function(){var n=this;this.isInput&&(this.el.addEventListener("focus",function(o){n.stop()}),this.el.addEventListener("blur",function(o){n.el.value&&n.el.value.length!==0||n.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},s}();const DM=["Почему саморазвитие дается так тяжело ?","Почему на меня не обращают внимание ?","Нужно ли вообще саморазвитие ?","Сложно сформулировать в чем именно я испытываю трудности","Есть вещи, которые я не могу обсуждать с близкими","Как преодолеть кризис ?","Почему в жизни все не как в кино ?","Почему мне не везет с партнерами ?","Боюсь перемен в жизни","Хочу быть смелее, но чувствую неуверенность","Почему все вокруг кажутся такими успешными ?","Почему мне кажется, что я упускаю свои возможности ?","Почему саморазвитие дается так тяжело ?","Кто действительно определяет вашу судьбу ?","Закон притяжения, или почему рядом с нами оказываются не те люди ?","🎭 Какой у меня психотип ?","🎴 Карта дня "];function MM(){const s=lr.useRef(null),t=lr.useRef(null);return lr.useEffect(()=>(s.current=new sT(t.current,{strings:DM,typeSpeed:40,backSpeed:10,backDelay:3e3,loop:!0,cursorChar:"|"}),()=>{s.current.destroy()}),[]),Ke.jsxs("header",{className:"header",children:[Ke.jsx("div",{className:"header__foreground"}),Ke.jsx("img",{className:"header__lamps-image",src:"./images/lamps.png",alt:"header-icon"}),Ke.jsxs("div",{className:"header__notice-wrapper",children:[Ke.jsx("h1",{className:"header__notice-main h-header h1-header",children:"Узнайте"}),Ke.jsx("div",{className:"header__notice-content",children:Ke.jsx("span",{className:"header__notice-info h-header h4-header",ref:t})})]})]})}function OM(){return Ke.jsxs("section",{className:"main__nav-wrapper",children:[Ke.jsxs("nav",{className:"nav main__nav nav--main",children:[Ke.jsx("h2",{className:"nav__title iconed-title nav-main__title h-header h3-header",children:"Навигация по сайту"}),Ke.jsxs("ul",{className:"nav__list",children:[Ke.jsx("li",{children:Ke.jsx("a",{href:"#chapter-1",children:"Почему саморазвитие дается так тяжело ?"})}),Ke.jsx("li",{children:Ke.jsx("a",{href:"#chapter-2",children:"Кто действительно определяет вашу судьбу ?"})}),Ke.jsx("li",{children:Ke.jsx("a",{href:"#chapter-3",children:"Закон притяжения, или почему рядом с нами оказываются не те люди ?"})})]})]}),Ke.jsxs("nav",{className:"nav main__nav nav--additional",children:[Ke.jsx("h2",{className:"nav__title iconed-title nav-additional__title h-header h3-header",children:"Дополнительно"}),Ke.jsxs("ul",{className:"nav__list",children:[Ke.jsx("li",{children:Ke.jsx("a",{href:"#day-card",children:"🎴 Карта дня "})}),Ke.jsx("li",{children:Ke.jsx("a",{href:"#psycho-alalyze",children:"🎭 Какой у меня психотип ?"})})]})]})]})}function $M(){return Ke.jsxs("section",{className:"bio section",children:[Ke.jsxs("div",{className:"bio__leftside-content",children:[Ke.jsx("h3",{className:"h3-header h-header",children:"Евгения Дулина"}),Ke.jsx("h4",{className:"h4-header h-header bio__speciality",children:"Психология"}),Ke.jsx("img",{className:"bio__autor-image",src:"./images/dulina-evgenia.jpg",alt:"autor"}),Ke.jsxs("nav",{className:"bio__contacts",children:[Ke.jsx("h4",{className:"h4-header h-header",children:"Личный Telegram"}),Ke.jsx("ul",{className:"bio__ul",children:Ke.jsx("li",{children:Ke.jsx("a",{href:"https://t.me/Dulina_Evgeniya",target:"_blank",children:"👉 @Dulina_Evgeniya"})})}),Ke.jsx("h4",{className:"h4-header h-header",children:"Нумерология"}),Ke.jsx("ul",{className:"bio__ul",children:Ke.jsx("li",{children:Ke.jsx("a",{href:"https://t.me/vseprostocifri",target:"_blank",children:"👉 ВСЕ ПРОСТО | Психология без мистики"})})})]})]}),Ke.jsxs("div",{className:"bio__rightside-content quote",children:[Ke.jsx("span",{className:"quote__bunk quote__bunk--top h1-header h-header",children:'"'}),Ke.jsx("p",{className:"italic-text",children:"Числа — это язык Вселенной, скрытый в датах и событиях вашей жизни. Они расскажут о ваших сильных сторонах, скрытых талантах и точках роста — нужно лишь уметь их расшифровать."}),Ke.jsx("p",{className:"italic-text",children:"Я помогаю людям через осмысленный анализ чисел и элементы психологии. Вместе мы разберем, какие энергии влияют на вашу жизнь, и найдем путь к внутреннему равновесию и уверенности в завтрашнем дне."}),Ke.jsx("span",{className:"quote__bunk quote__bunk--bottom h1-header h-header",children:'"'})]})]})}function LM(){return Ke.jsxs("section",{className:"main__chapter-1 section",id:"chapter-1",children:[Ke.jsxs("div",{className:"header-with-logo",children:[Ke.jsx("img",{className:"main__header-logo",src:"/icons/crystal.svg",alt:"crystal-icon"}),Ke.jsx("h3",{className:"h3-header h-header left-side-header",children:"Почему саморазвитие дается так тяжело и хочется все бросить?"})]}),Ke.jsx("p",{children:"Саморазвитие — это восхождение на личную вершину, где каждый шаг требует осознанности. Ваши трудности могут быть связаны с числовыми вибрациями вашей даты рождения."}),Ke.jsxs("p",{children:[Ke.jsx("b",{children:"Как рассчитать свое Число Судьбы"}),Ke.jsx("br",{}),"Это ключевое число в нумерологии, которое раскрывает ваш жизненный путь.",Ke.jsx("br",{}),Ke.jsx("br",{}),Ke.jsx("b",{children:"Формула:"}),Ke.jsx("br",{}),"Сложите все цифры своей даты рождения и сведите к одной цифре (кроме мастер-чисел 11, 22).",Ke.jsx("br",{}),Ke.jsx("br",{}),Ke.jsx("b",{children:"Что ваше Число Судьбы говорит о вашем саморазвитии?"}),Ke.jsx("br",{}),'Число 1 - Прирожденный лидер.Вы умеете начинать дела, но часто застреваете на этапе "сделать все самому".',Ke.jsx("br",{}),"Число 3 - Душа компании. Вам легко загораться новыми идеями, но сложно доводить их до конца. Секрет успеха - найти систему, которая поможет завершать начатое без потери интереса.",Ke.jsx("br",{}),"Число 7 - Мудрый исследователь.Вы любите глубоко анализировать, но иногда это превращается в бесконечное совершенствование."]}),Ke.jsxs("p",{className:"italic-text simple-notice",children:[Ke.jsx("b",{children:"Важно:"})," Нумерология — это карта, но идти по пути нужно своим уникальным шагом. Если хотите глубже разобраться в своих числах , я помогу вам составить персональный анализ"]})]})}function FM(){return Ke.jsxs("section",{className:"main__chapter-2 section",id:"chapter-2",children:[Ke.jsx("h3",{className:"h-header h3-header",children:"🔗 Кто действительно определяет вашу судьбу?"}),Ke.jsx("p",{children:"Вы когда-нибудь задумывались, почему некоторые решения даются легко, а другие — будто кто-то свыше ставит палки в колёса? Возможно, ответ скрыт в цифрах вашей даты рождения."}),Ke.jsx("p",{children:"Нумерология утверждает: ваши ключевые числа — это скрытый алгоритм жизни. Они влияют на:"}),Ke.jsxs("ul",{className:"ul-decorated",children:[Ke.jsx("li",{children:"Ваши неосознанные выборы"}),Ke.jsx("li",{children:"Повторяющиеся ситуации"}),Ke.jsx("li",{children:"Даже на людей, которых вы притягиваете"})]}),Ke.jsxs("p",{children:[Ke.jsx("b",{children:"Когда вы расшифровываете свои числа, они перестают управлять вами — вы начинаете управлять ими!"}),"Хотите узнать, какие числовые программы работают в вашем случае? Давайте вместе посмотрим на вашу уникальную комбинацию."]})]})}function PM(){return Ke.jsxs("section",{className:"main__chapter-3 section",id:"chapter-3",children:[Ke.jsxs("div",{className:"header-with-logo",children:[Ke.jsx("img",{className:"main__header-logo",src:"/icons/galaxy.svg"}),Ke.jsx("h3",{className:"h-header h3-header left-side-header",children:"Закон притяжения: почему рядом с нами оказываются не те люди ?"})]}),Ke.jsx("p",{children:'Вы замечали, что в вашей жизни повторяются одни и те же типажи партнеров? Токсичные, эмоционально недоступные, или те, кто просто "не ваш" человек? Это не случайность — это работа ваших внутренних вибраций.'}),Ke.jsxs("p",{children:[Ke.jsx("b",{children:"Ваше Число Сердца показывает, какие энергии вы излучаете. Например:"}),Ke.jsx("br",{}),"Число 2 часто притягивает контролирующих партнеров",Ke.jsx("br",{}),"Число 5 — тех, кто боится обязательств"]}),Ke.jsxs("p",{className:"simple-notice",children:[Ke.jsx("b",{children:"Важно:"})," Общие закономерности — лишь ориентир. Чтобы точно понять, почему вы притягиваете определенных людей и как это изменить, нужен индивидуальный разбор вашей нумерологической карты."]})]})}const hv={"ace-of-pentacles":{path:"/models/card-maps/card-ace-of-pentacles.png",streight:"ACE-OF-PENTACLES - Туз Пентаклей (прямая): Сегодня — удачный день для новых начинаний в финансах и карьере. Возможны неожиданные денежные поступления, выгодные предложения или перспективные проекты. Действуйте смело, но продуманно.",reversed:"Туз Пентаклей (перевёрнутая): Задержки в делах или финансовые сложности. Не спешите с крупными тратами — лучше пересмотрите планы. Верьте в себя: препятствия временны."},"ace-of-wands":{path:"/models/card-maps/card-ace-of-wands.png",streight:"ACE-OF-WANDS - Туз Жезлов (прямая): День новых возможностей и творческой энергии. Появится вдохновение для старта проектов или реализации идей. Действуйте уверенно — время благоприятствует начинаниям.",reversed:"Туз Жезлов (перевёрнутая): Возможна нерешительность или отсутствие чёткого направления. Не форсируйте события. Сфокусируйтесь на небольших шагах — ясность придёт постепенно."},devil:{path:"/models/card-maps/card-devil.png",streight:"DEVIL - Дьявол (прямая): День испытаний и искушений. Могут проявиться вредные привычки, навязчивые мысли или токсичные ситуации. Осознайте, что держит вас в плену, и найдите силы противостоять этому.",reversed:"Дьявол (перевёрнутая): Шанс освободиться от ограничений. Преодолейте страхи или деструктивные привязанности. Это время для личного прорыва — действуйте осознанно."},"eight-of-swords":{path:"/models/card-maps/card-eight-of-swords.png",streight:"EIGHT-OF-SWORDS - 8 Мечей (прямая): Сегодня вы можете ощущать себя в ловушке обстоятельств или собственных мыслей. Ситуация кажется безвыходной, но это иллюзия — выход есть. Внимательно осмотритесь и найдите альтернативные пути. Главное — перестать видеть себя жертвой.",reversed:"8 Мечей (перевёрнутая): День освобождения от ограничивающих убеждений. Вы начинаете понимать, что главные преграды были в вашей голове. Сейчас самое время работать над изменением мышления — через самоанализ, терапию или просто новый взгляд на ситуацию. Вы сильнее, чем думаете."},"high-priestess":{path:"/models/card-maps/card-high-priestess.png",streight:"HIGH-PRIESTESS - Верховная Жрица (прямая): Сегодняшний день требует прислушаться к внутреннему голосу. Ваша интуиция особенно сильна — доверьтесь ей. Возможны вещие сны или неожиданные озарения. Найдите время для уединения и размышлений.",reversed:"Верховная Жрица (перевёрнутая): Вы игнорируете внутренние подсказки, полагаясь только на логику или мнение других. День для восстановления связи с собой — отстранитесь от шума и прислушайтесь к тихому голосу мудрости внутри вас. Возможно, вы слишком жертвуете своими потребностями."},judgement:{path:"/models/card-maps/card-judgement.png",streight:"JUDGEMENT - Суд (прямая): Сегодня — день важных прозрений и переоценки ценностей. Вы стоите на пороге нового этапа, где старые ошибки и опыт преобразуются в мудрость. Прислушайтесь к внутреннему голосу: возможно, пришло время решительных действий или кардинальных перемен.",reversed:"Суд (перевёрнутая): Вы застряли в нерешительности или сожалениях о прошлом. День для работы с самооценкой и страхами. Отпустите чувство вины — оно блокирует ваш рост. Сфокусируйтесь на том, куда вы идёте, а не на том, что оставили позади."},star:{path:"/models/card-maps/card-star.png",streight:"STAR - Звезда (прямая): День надежды и духовного обновления. После трудного периода наступает время исцеления и ясности. Ваши мечты начинают обретать форму — доверьтесь этому процессу. Проявите щедрость души, поделившись своим светом с окружающими.",reversed:"Звезда (перевёрнутая): Вы можете чувствовать усталость или потерю веры. День для восстановления внутреннего баланса. Найдите простые радости, которые наполняют вас светом. Помните: это временное состояние, и ваша духовная суть непоколебима."},"three-of-pentacles":{path:"/models/card-maps/card-three-of-pentacles.png",streight:"THREE-OF-PENTACLES - Тройка Пентаклей (прямая): Сегодняшний день благоприятен для совместной работы и профессионального роста. Ваши усилия будут замечены и оценены по достоинству.",reversed:""},"two-of-cups":{path:"/models/card-maps/card-two-of-cups.png",streight:"",reversed:""},"wheel-of-fortune":{path:"/models/card-maps/card-wheel-of-fortune.png",streight:"",reversed:""}},BM=(s,t=1)=>Math.exp(-(s*s)/(2*t*t));var bm={exports:{}},UM=bm.exports,tC;function zM(){return tC||(tC=1,function(s,t){(function(n,o){s.exports=o(ch())})(UM,function(n){return function(o){var a={};function i(p){if(a[p])return a[p].exports;var r=a[p]={i:p,l:!1,exports:{}};return o[p].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=o,i.c=a,i.d=function(p,r,h){i.o(p,r)||Object.defineProperty(p,r,{enumerable:!0,get:h})},i.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},i.t=function(p,r){if(1&r&&(p=i(p)),8&r||4&r&&typeof p=="object"&&p&&p.__esModule)return p;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:p}),2&r&&typeof p!="string")for(var f in p)i.d(h,f,(function(u){return p[u]}).bind(null,f));return h},i.n=function(p){var r=p&&p.__esModule?function(){return p.default}:function(){return p};return i.d(r,"a",r),r},i.o=function(p,r){return Object.prototype.hasOwnProperty.call(p,r)},i.p="",i(i.s=2)}([function(o,a){o.exports=n},function(o,a,i){(function(p){(function(r){o.exports=r()})(function(){return function r(h,f,u){function l(S,m){if(!f[S]){if(!h[S]){var y=!1;if(!m&&y)return(void 0)(S,!0);if(d)return d(S,!0);throw(m=new Error("Cannot find module '"+S+"'")).code="MODULE_NOT_FOUND",m}y=f[S]={exports:{}},h[S][0].call(y.exports,function(b){return l(h[S][1][b]||b)},y,y.exports,r,h,f,u)}return f[S].exports}for(var d=!1,x=0;x<u.length;x++)l(u[x]);return l}({1:[function(r,h,f){f.byteLength=function(b){return 3*((b=y(b))[0]+(b=b[1]))/4-b},f.toByteArray=function(b){var g,w,_=(C=y(b))[0],C=C[1],k=new d(function(A,O){return 3*(A+O)/4-O}(_,C)),E=0,j=0<C?_-4:_;for(w=0;w<j;w+=4)g=l[b.charCodeAt(w)]<<18|l[b.charCodeAt(w+1)]<<12|l[b.charCodeAt(w+2)]<<6|l[b.charCodeAt(w+3)],k[E++]=g>>16&255,k[E++]=g>>8&255,k[E++]=255&g;return C===2&&(g=l[b.charCodeAt(w)]<<2|l[b.charCodeAt(w+1)]>>4,k[E++]=255&g),C===1&&(g=l[b.charCodeAt(w)]<<10|l[b.charCodeAt(w+1)]<<4|l[b.charCodeAt(w+2)]>>2,k[E++]=g>>8&255,k[E++]=255&g),k},f.fromByteArray=function(b){for(var g,w=b.length,_=w%3,C=[],k=0,E=w-_;k<E;k+=16383)C.push(function(j,A,O){for(var N,D=[],z=A;z<O;z+=3)N=(j[z]<<16&16711680)+(j[z+1]<<8&65280)+(255&j[z+2]),D.push(function($){return u[$>>18&63]+u[$>>12&63]+u[$>>6&63]+u[63&$]}(N));return D.join("")}(b,k,E<k+16383?E:k+16383));return _==1?(g=b[w-1],C.push(u[g>>2]+u[g<<4&63]+"==")):_==2&&(g=(b[w-2]<<8)+b[w-1],C.push(u[g>>10]+u[g>>4&63]+u[g<<2&63]+"=")),C.join("")};for(var u=[],l=[],d=typeof Uint8Array<"u"?Uint8Array:Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=0,m=x.length;S<m;++S)u[S]=x[S],l[x.charCodeAt(S)]=S;function y(b){var g=b.length;if(0<g%4)throw new Error("Invalid string. Length must be a multiple of 4");return g=(b=(b=b.indexOf("="))===-1?g:b)===g?0:4-b%4,[b,g]}l[45]=62,l[95]=63},{}],2:[function(r,h,f){},{}],3:[function(r,h,f){arguments[4][2][0].apply(f,arguments)},{dup:2}],4:[function(r,h,f){(function(y){var l=r("base64-js"),d=r("ieee754"),x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,S=(f.Buffer=y,f.SlowBuffer=function(X){return+X!=X&&(X=0),y.alloc(+X)},f.INSPECT_MAX_BYTES=50,2147483647);function m(X){if(S<X)throw new RangeError('The value "'+X+'" is invalid for option "size"');return X=new Uint8Array(X),Object.setPrototypeOf(X,y.prototype),X}function y(X,Q,re){if(typeof X!="number")return b(X,Q,re);if(typeof Q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(X)}function b(X,Q,re){if(typeof X=="string"){var ce=X,he=Q;if(y.isEncoding(he=typeof he=="string"&&he!==""?he:"utf8"))return(ce=(oe=m(fe=0|k(ce,he))).write(ce,he))!==fe?oe.slice(0,ce):oe;throw new TypeError("Unknown encoding: "+he)}if(ArrayBuffer.isView(X))return _(X);if(X!=null){if(ne(X,ArrayBuffer)||X&&ne(X.buffer,ArrayBuffer)){var fe=X,oe=re;if((ce=Q)<0||fe.byteLength<ce)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<ce+(oe||0))throw new RangeError('"length" is outside of buffer bounds');return fe=ce===void 0&&oe===void 0?new Uint8Array(fe):oe===void 0?new Uint8Array(fe,ce):new Uint8Array(fe,ce,oe),Object.setPrototypeOf(fe,y.prototype),fe}if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if((he=X.valueOf&&X.valueOf())!=null&&he!==X)return y.from(he,Q,re);var me=function(we){var ke,ve;return y.isBuffer(we)?((ve=m(ke=0|C(we.length))).length!==0&&we.copy(ve,0,0,ke),ve):we.length!==void 0?typeof we.length!="number"||se(we.length)?m(0):_(we):we.type==="Buffer"&&Array.isArray(we.data)?_(we.data):void 0}(X);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return y.from(X[Symbol.toPrimitive]("string"),Q,re)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}function g(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function w(X){return g(X),m(X<0?0:0|C(X))}function _(X){for(var Q=X.length<0?0:0|C(X.length),re=m(Q),ce=0;ce<Q;ce+=1)re[ce]=255&X[ce];return re}function C(X){if(S<=X)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return 0|X}function k(X,Q){if(y.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||ne(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);var re=X.length,ce=2<arguments.length&&arguments[2]===!0;if(!ce&&re===0)return 0;for(var he=!1;;)switch(Q){case"ascii":case"latin1":case"binary":return re;case"utf8":case"utf-8":return Y(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*re;case"hex":return re>>>1;case"base64":return Z(X).length;default:if(he)return ce?-1:Y(X).length;Q=(""+Q).toLowerCase(),he=!0}}function E(X,Q,re){var ce,he=!1;if((Q=Q===void 0||Q<0?0:Q)>this.length||(re=re===void 0||re>this.length?this.length:re)<=0||(re>>>=0)<=(Q>>>=0))return"";for(X=X||"utf8";;)switch(X){case"hex":var fe=Q,oe=re,me=this.length;(!oe||oe<0||me<oe)&&(oe=me);for(var we="",ke=fe=!fe||fe<0?0:fe;ke<oe;++ke)we+=ie[this[ke]];return we;case"utf8":case"utf-8":return z(this,Q,re);case"ascii":me=Q;var ve=re,_e="";ve=Math.min(this.length,ve);for(var Me=me;Me<ve;++Me)_e+=String.fromCharCode(127&this[Me]);return _e;case"latin1":case"binary":fe=Q;var He=re,ze="";He=Math.min(this.length,He);for(var st=fe;st<He;++st)ze+=String.fromCharCode(this[st]);return ze;case"base64":return gt=this,ce=re,(pt=Q)===0&&ce===gt.length?l.fromByteArray(gt):l.fromByteArray(gt.slice(pt,ce));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var gt=Q,pt=re,Lt=this.slice(gt,pt),_t="",xe=0;xe<Lt.length;xe+=2)_t+=String.fromCharCode(Lt[xe]+256*Lt[xe+1]);return _t;default:if(he)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),he=!0}}function j(X,Q,re){var ce=X[Q];X[Q]=X[re],X[re]=ce}function A(X,Q,re,ce,he){if(X.length===0)return-1;if(typeof re=="string"?(ce=re,re=0):2147483647<re?re=2147483647:re<-2147483648&&(re=-2147483648),(re=(re=se(re=+re)?he?0:X.length-1:re)<0?X.length+re:re)>=X.length){if(he)return-1;re=X.length-1}else if(re<0){if(!he)return-1;re=0}if(typeof Q=="string"&&(Q=y.from(Q,ce)),y.isBuffer(Q))return Q.length===0?-1:O(X,Q,re,ce,he);if(typeof Q=="number")return Q&=255,typeof Uint8Array.prototype.indexOf=="function"?(he?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(X,Q,re):O(X,[Q],re,ce,he);throw new TypeError("val must be string, number or Buffer")}function O(X,Q,re,ce,he){var fe=1,oe=X.length,me=Q.length;if(ce!==void 0&&((ce=String(ce).toLowerCase())==="ucs2"||ce==="ucs-2"||ce==="utf16le"||ce==="utf-16le")){if(X.length<2||Q.length<2)return-1;oe/=fe=2,me/=2,re/=2}function we(He,ze){return fe===1?He[ze]:He.readUInt16BE(ze*fe)}if(he)for(var ke=-1,ve=re;ve<oe;ve++)if(we(X,ve)===we(Q,ke===-1?0:ve-ke)){if(ve-(ke=ke===-1?ve:ke)+1===me)return ke*fe}else ke!==-1&&(ve-=ve-ke),ke=-1;else for(ve=re=oe<re+me?oe-me:re;0<=ve;ve--){for(var _e=!0,Me=0;Me<me;Me++)if(we(X,ve+Me)!==we(Q,Me)){_e=!1;break}if(_e)return ve}return-1}function N(X,Q,re,ce){return J(function(he){for(var fe=[],oe=0;oe<he.length;++oe)fe.push(255&he.charCodeAt(oe));return fe}(Q),X,re,ce)}function D(X,Q,re,ce){return J(function(he,fe){for(var oe,me,we=[],ke=0;ke<he.length&&!((fe-=2)<0);++ke)oe=(me=he.charCodeAt(ke))>>8,me%=256,we.push(me),we.push(oe);return we}(Q,X.length-re),X,re,ce)}function z(X,Q,re){re=Math.min(X.length,re);for(var ce=[],he=Q;he<re;){var fe,oe,me,we,ke=X[he],ve=null,_e=239<ke?4:223<ke?3:191<ke?2:1;if(he+_e<=re)switch(_e){case 1:ke<128&&(ve=ke);break;case 2:(192&(fe=X[he+1]))==128&&127<(we=(31&ke)<<6|63&fe)&&(ve=we);break;case 3:fe=X[he+1],oe=X[he+2],(192&fe)==128&&(192&oe)==128&&2047<(we=(15&ke)<<12|(63&fe)<<6|63&oe)&&(we<55296||57343<we)&&(ve=we);break;case 4:fe=X[he+1],oe=X[he+2],me=X[he+3],(192&fe)==128&&(192&oe)==128&&(192&me)==128&&65535<(we=(15&ke)<<18|(63&fe)<<12|(63&oe)<<6|63&me)&&we<1114112&&(ve=we)}ve===null?(ve=65533,_e=1):65535<ve&&(ve-=65536,ce.push(ve>>>10&1023|55296),ve=56320|1023&ve),ce.push(ve),he+=_e}var Me=ce,He=Me.length;if(He<=$)return String.fromCharCode.apply(String,Me);for(var ze="",st=0;st<He;)ze+=String.fromCharCode.apply(String,Me.slice(st,st+=$));return ze}f.kMaxLength=S,(y.TYPED_ARRAY_SUPPORT=function(){try{var X=new Uint8Array(1),Q={foo:function(){return 42}};return Object.setPrototypeOf(Q,Uint8Array.prototype),Object.setPrototypeOf(X,Q),X.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(y.prototype,"parent",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.buffer}}),Object.defineProperty(y.prototype,"offset",{enumerable:!0,get:function(){if(y.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&y[Symbol.species]===y&&Object.defineProperty(y,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),y.poolSize=8192,y.from=b,Object.setPrototypeOf(y.prototype,Uint8Array.prototype),Object.setPrototypeOf(y,Uint8Array),y.alloc=function(X,Q,re){return Q=Q,re=re,g(X=X),X<=0||Q===void 0?m(X):typeof re=="string"?m(X).fill(Q,re):m(X).fill(Q)},y.allocUnsafe=w,y.allocUnsafeSlow=w,y.isBuffer=function(X){return X!=null&&X._isBuffer===!0&&X!==y.prototype},y.compare=function(X,Q){if(ne(X,Uint8Array)&&(X=y.from(X,X.offset,X.byteLength)),ne(Q,Uint8Array)&&(Q=y.from(Q,Q.offset,Q.byteLength)),!y.isBuffer(X)||!y.isBuffer(Q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===Q)return 0;for(var re=X.length,ce=Q.length,he=0,fe=Math.min(re,ce);he<fe;++he)if(X[he]!==Q[he]){re=X[he],ce=Q[he];break}return re<ce?-1:ce<re?1:0},y.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},y.concat=function(X,Q){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(X.length===0)return y.alloc(0);if(Q===void 0)for(he=Q=0;he<X.length;++he)Q+=X[he].length;for(var re=y.allocUnsafe(Q),ce=0,he=0;he<X.length;++he){var fe=X[he];if(ne(fe,Uint8Array)&&(fe=y.from(fe)),!y.isBuffer(fe))throw new TypeError('"list" argument must be an Array of Buffers');fe.copy(re,ce),ce+=fe.length}return re},y.byteLength=k,y.prototype._isBuffer=!0,y.prototype.swap16=function(){var X=this.length;if(X%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Q=0;Q<X;Q+=2)j(this,Q,Q+1);return this},y.prototype.swap32=function(){var X=this.length;if(X%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Q=0;Q<X;Q+=4)j(this,Q,Q+3),j(this,Q+1,Q+2);return this},y.prototype.swap64=function(){var X=this.length;if(X%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Q=0;Q<X;Q+=8)j(this,Q,Q+7),j(this,Q+1,Q+6),j(this,Q+2,Q+5),j(this,Q+3,Q+4);return this},y.prototype.toLocaleString=y.prototype.toString=function(){var X=this.length;return X===0?"":arguments.length===0?z(this,0,X):E.apply(this,arguments)},y.prototype.equals=function(X){if(y.isBuffer(X))return this===X||y.compare(this,X)===0;throw new TypeError("Argument must be a Buffer")},y.prototype.inspect=function(){var X="",Q=f.INSPECT_MAX_BYTES;return X=this.toString("hex",0,Q).replace(/(.{2})/g,"$1 ").trim(),this.length>Q&&(X+=" ... "),"<Buffer "+X+">"},x&&(y.prototype[x]=y.prototype.inspect),y.prototype.compare=function(X,Q,re,ce,he){if(ne(X,Uint8Array)&&(X=y.from(X,X.offset,X.byteLength)),!y.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(re===void 0&&(re=X?X.length:0),ce===void 0&&(ce=0),he===void 0&&(he=this.length),(Q=Q===void 0?0:Q)<0||re>X.length||ce<0||he>this.length)throw new RangeError("out of range index");if(he<=ce&&re<=Q)return 0;if(he<=ce)return-1;if(re<=Q)return 1;if(this===X)return 0;for(var fe=(he>>>=0)-(ce>>>=0),oe=(re>>>=0)-(Q>>>=0),me=Math.min(fe,oe),we=this.slice(ce,he),ke=X.slice(Q,re),ve=0;ve<me;++ve)if(we[ve]!==ke[ve]){fe=we[ve],oe=ke[ve];break}return fe<oe?-1:oe<fe?1:0},y.prototype.includes=function(X,Q,re){return this.indexOf(X,Q,re)!==-1},y.prototype.indexOf=function(X,Q,re){return A(this,X,Q,re,!0)},y.prototype.lastIndexOf=function(X,Q,re){return A(this,X,Q,re,!1)},y.prototype.write=function(X,Q,re,ce){if(Q===void 0)ce="utf8",re=this.length,Q=0;else if(re===void 0&&typeof Q=="string")ce=Q,re=this.length,Q=0;else{if(!isFinite(Q))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Q>>>=0,isFinite(re)?(re>>>=0,ce===void 0&&(ce="utf8")):(ce=re,re=void 0)}var he=this.length-Q;if((re===void 0||he<re)&&(re=he),0<X.length&&(re<0||Q<0)||Q>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce=ce||"utf8";for(var fe,oe,me,we=!1;;)switch(ce){case"hex":var ke=X,ve=Q,_e=re,Me=(ve=Number(ve)||0,this.length-ve);(!_e||Me<(_e=Number(_e)))&&(_e=Me),(Me=ke.length)/2<_e&&(_e=Me/2);for(var He=0;He<_e;++He){var ze=parseInt(ke.substr(2*He,2),16);if(se(ze))return He;this[ve+He]=ze}return He;case"utf8":case"utf-8":return Me=Q,me=re,J(Y(X,(oe=this).length-Me),oe,Me,me);case"ascii":return N(this,X,Q,re);case"latin1":case"binary":return N(this,X,Q,re);case"base64":return oe=this,me=Q,fe=re,J(Z(X),oe,me,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,X,Q,re);default:if(we)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),we=!0}},y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;function B(X,Q,re){if(X%1!=0||X<0)throw new RangeError("offset is not uint");if(re<X+Q)throw new RangeError("Trying to access beyond buffer length")}function F(X,Q,re,ce,he,fe){if(!y.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(he<Q||Q<fe)throw new RangeError('"value" argument is out of bounds');if(re+ce>X.length)throw new RangeError("Index out of range")}function G(X,Q,re,ce){if(re+ce>X.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("Index out of range")}function W(X,Q,re,ce,he){return Q=+Q,re>>>=0,he||G(X,0,re,4),d.write(X,Q,re,ce,23,4),re+4}function L(X,Q,re,ce,he){return Q=+Q,re>>>=0,he||G(X,0,re,8),d.write(X,Q,re,ce,52,8),re+8}y.prototype.slice=function(X,Q){var re=this.length;return(X=~~X)<0?(X+=re)<0&&(X=0):re<X&&(X=re),(Q=Q===void 0?re:~~Q)<0?(Q+=re)<0&&(Q=0):re<Q&&(Q=re),Q<X&&(Q=X),re=this.subarray(X,Q),Object.setPrototypeOf(re,y.prototype),re},y.prototype.readUIntLE=function(X,Q,re){X>>>=0,Q>>>=0,re||B(X,Q,this.length);for(var ce=this[X],he=1,fe=0;++fe<Q&&(he*=256);)ce+=this[X+fe]*he;return ce},y.prototype.readUIntBE=function(X,Q,re){X>>>=0,Q>>>=0,re||B(X,Q,this.length);for(var ce=this[X+--Q],he=1;0<Q&&(he*=256);)ce+=this[X+--Q]*he;return ce},y.prototype.readUInt8=function(X,Q){return X>>>=0,Q||B(X,1,this.length),this[X]},y.prototype.readUInt16LE=function(X,Q){return X>>>=0,Q||B(X,2,this.length),this[X]|this[X+1]<<8},y.prototype.readUInt16BE=function(X,Q){return X>>>=0,Q||B(X,2,this.length),this[X]<<8|this[X+1]},y.prototype.readUInt32LE=function(X,Q){return X>>>=0,Q||B(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+16777216*this[X+3]},y.prototype.readUInt32BE=function(X,Q){return X>>>=0,Q||B(X,4,this.length),16777216*this[X]+(this[X+1]<<16|this[X+2]<<8|this[X+3])},y.prototype.readIntLE=function(X,Q,re){X>>>=0,Q>>>=0,re||B(X,Q,this.length);for(var ce=this[X],he=1,fe=0;++fe<Q&&(he*=256);)ce+=this[X+fe]*he;return(he*=128)<=ce&&(ce-=Math.pow(2,8*Q)),ce},y.prototype.readIntBE=function(X,Q,re){X>>>=0,Q>>>=0,re||B(X,Q,this.length);for(var ce=Q,he=1,fe=this[X+--ce];0<ce&&(he*=256);)fe+=this[X+--ce]*he;return(he*=128)<=fe&&(fe-=Math.pow(2,8*Q)),fe},y.prototype.readInt8=function(X,Q){return X>>>=0,Q||B(X,1,this.length),128&this[X]?-1*(255-this[X]+1):this[X]},y.prototype.readInt16LE=function(X,Q){return X>>>=0,Q||B(X,2,this.length),32768&(Q=this[X]|this[X+1]<<8)?4294901760|Q:Q},y.prototype.readInt16BE=function(X,Q){return X>>>=0,Q||B(X,2,this.length),32768&(Q=this[X+1]|this[X]<<8)?4294901760|Q:Q},y.prototype.readInt32LE=function(X,Q){return X>>>=0,Q||B(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},y.prototype.readInt32BE=function(X,Q){return X>>>=0,Q||B(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},y.prototype.readFloatLE=function(X,Q){return X>>>=0,Q||B(X,4,this.length),d.read(this,X,!0,23,4)},y.prototype.readFloatBE=function(X,Q){return X>>>=0,Q||B(X,4,this.length),d.read(this,X,!1,23,4)},y.prototype.readDoubleLE=function(X,Q){return X>>>=0,Q||B(X,8,this.length),d.read(this,X,!0,52,8)},y.prototype.readDoubleBE=function(X,Q){return X>>>=0,Q||B(X,8,this.length),d.read(this,X,!1,52,8)},y.prototype.writeUIntLE=function(X,Q,re,ce){X=+X,Q>>>=0,re>>>=0,ce||F(this,X,Q,re,Math.pow(2,8*re)-1,0);var he=1,fe=0;for(this[Q]=255&X;++fe<re&&(he*=256);)this[Q+fe]=X/he&255;return Q+re},y.prototype.writeUIntBE=function(X,Q,re,ce){X=+X,Q>>>=0,re>>>=0,ce||F(this,X,Q,re,Math.pow(2,8*re)-1,0);var he=re-1,fe=1;for(this[Q+he]=255&X;0<=--he&&(fe*=256);)this[Q+he]=X/fe&255;return Q+re},y.prototype.writeUInt8=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,1,255,0),this[Q]=255&X,Q+1},y.prototype.writeUInt16LE=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,2,65535,0),this[Q]=255&X,this[Q+1]=X>>>8,Q+2},y.prototype.writeUInt16BE=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,2,65535,0),this[Q]=X>>>8,this[Q+1]=255&X,Q+2},y.prototype.writeUInt32LE=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,4,4294967295,0),this[Q+3]=X>>>24,this[Q+2]=X>>>16,this[Q+1]=X>>>8,this[Q]=255&X,Q+4},y.prototype.writeUInt32BE=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,4,4294967295,0),this[Q]=X>>>24,this[Q+1]=X>>>16,this[Q+2]=X>>>8,this[Q+3]=255&X,Q+4},y.prototype.writeIntLE=function(X,Q,re,ce){X=+X,Q>>>=0,ce||F(this,X,Q,re,(ce=Math.pow(2,8*re-1))-1,-ce);var he=0,fe=1,oe=0;for(this[Q]=255&X;++he<re&&(fe*=256);)X<0&&oe===0&&this[Q+he-1]!==0&&(oe=1),this[Q+he]=(X/fe>>0)-oe&255;return Q+re},y.prototype.writeIntBE=function(X,Q,re,ce){X=+X,Q>>>=0,ce||F(this,X,Q,re,(ce=Math.pow(2,8*re-1))-1,-ce);var he=re-1,fe=1,oe=0;for(this[Q+he]=255&X;0<=--he&&(fe*=256);)X<0&&oe===0&&this[Q+he+1]!==0&&(oe=1),this[Q+he]=(X/fe>>0)-oe&255;return Q+re},y.prototype.writeInt8=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,1,127,-128),this[Q]=255&(X=X<0?255+X+1:X),Q+1},y.prototype.writeInt16LE=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,2,32767,-32768),this[Q]=255&X,this[Q+1]=X>>>8,Q+2},y.prototype.writeInt16BE=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,2,32767,-32768),this[Q]=X>>>8,this[Q+1]=255&X,Q+2},y.prototype.writeInt32LE=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,4,2147483647,-2147483648),this[Q]=255&X,this[Q+1]=X>>>8,this[Q+2]=X>>>16,this[Q+3]=X>>>24,Q+4},y.prototype.writeInt32BE=function(X,Q,re){return X=+X,Q>>>=0,re||F(this,X,Q,4,2147483647,-2147483648),this[Q]=(X=X<0?4294967295+X+1:X)>>>24,this[Q+1]=X>>>16,this[Q+2]=X>>>8,this[Q+3]=255&X,Q+4},y.prototype.writeFloatLE=function(X,Q,re){return W(this,X,Q,!0,re)},y.prototype.writeFloatBE=function(X,Q,re){return W(this,X,Q,!1,re)},y.prototype.writeDoubleLE=function(X,Q,re){return L(this,X,Q,!0,re)},y.prototype.writeDoubleBE=function(X,Q,re){return L(this,X,Q,!1,re)},y.prototype.copy=function(X,Q,re,ce){if(!y.isBuffer(X))throw new TypeError("argument should be a Buffer");if(re=re||0,ce||ce===0||(ce=this.length),Q>=X.length&&(Q=X.length),(ce=0<ce&&ce<re?re:ce)===re||X.length===0||this.length===0)return 0;if((Q=Q||0)<0)throw new RangeError("targetStart out of bounds");if(re<0||re>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length);var he=(ce=X.length-Q<ce-re?X.length-Q+re:ce)-re;if(this===X&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(Q,re,ce);else if(this===X&&re<Q&&Q<ce)for(var fe=he-1;0<=fe;--fe)X[fe+Q]=this[fe+re];else Uint8Array.prototype.set.call(X,this.subarray(re,ce),Q);return he},y.prototype.fill=function(X,Q,re,ce){if(typeof X=="string"){if(typeof Q=="string"?(ce=Q,Q=0,re=this.length):typeof re=="string"&&(ce=re,re=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!y.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);var he;X.length===1&&(he=X.charCodeAt(0),(ce==="utf8"&&he<128||ce==="latin1")&&(X=he))}else typeof X=="number"?X&=255:typeof X=="boolean"&&(X=Number(X));if(Q<0||this.length<Q||this.length<re)throw new RangeError("Out of range index");var fe;if(!(re<=Q))if(Q>>>=0,re=re===void 0?this.length:re>>>0,typeof(X=X||0)=="number")for(fe=Q;fe<re;++fe)this[fe]=X;else{var oe=y.isBuffer(X)?X:y.from(X,ce),me=oe.length;if(me===0)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for(fe=0;fe<re-Q;++fe)this[fe+Q]=oe[fe%me]}return this};var V=/[^+/0-9A-Za-z-_]/g;function Y(X,Q){Q=Q||1/0;for(var re,ce=X.length,he=null,fe=[],oe=0;oe<ce;++oe){if(55295<(re=X.charCodeAt(oe))&&re<57344){if(!he){if(56319<re){-1<(Q-=3)&&fe.push(239,191,189);continue}if(oe+1===ce){-1<(Q-=3)&&fe.push(239,191,189);continue}he=re;continue}if(re<56320){-1<(Q-=3)&&fe.push(239,191,189),he=re;continue}re=65536+(he-55296<<10|re-56320)}else he&&-1<(Q-=3)&&fe.push(239,191,189);if(he=null,re<128){if(--Q<0)break;fe.push(re)}else if(re<2048){if((Q-=2)<0)break;fe.push(re>>6|192,63&re|128)}else if(re<65536){if((Q-=3)<0)break;fe.push(re>>12|224,re>>6&63|128,63&re|128)}else{if(!(re<1114112))throw new Error("Invalid code point");if((Q-=4)<0)break;fe.push(re>>18|240,re>>12&63|128,re>>6&63|128,63&re|128)}}return fe}function Z(X){return l.toByteArray(function(Q){if((Q=(Q=Q.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;Q.length%4!=0;)Q+="=";return Q}(X))}function J(X,Q,re,ce){for(var he=0;he<ce&&!(he+re>=Q.length||he>=X.length);++he)Q[he+re]=X[he];return he}function ne(X,Q){return X instanceof Q||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===Q.name}function se(X){return X!=X}var ie=function(){for(var X="0123456789abcdef",Q=new Array(256),re=0;re<16;++re)for(var ce=16*re,he=0;he<16;++he)Q[ce+he]=X[re]+X[he];return Q}()}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:244}],5:[function(r,h,f){h.exports=function(u){if(typeof u!="function")throw TypeError(String(u)+" is not a function");return u}},{}],6:[function(r,h,f){var u=r("../internals/is-object");h.exports=function(l){if(u(l)||l===null)return l;throw TypeError("Can't set "+String(l)+" as a prototype")}},{"../internals/is-object":74}],7:[function(r,h,f){var u=r("../internals/well-known-symbol"),l=r("../internals/object-create"),d=(r=r("../internals/object-define-property"),u("unscopables")),x=Array.prototype;x[d]==null&&r.f(x,d,{configurable:!0,value:l(null)}),h.exports=function(S){x[d][S]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(r,h,f){var u=r("../internals/string-multibyte").charAt;h.exports=function(l,d,x){return d+(x?u(l,d).length:1)}},{"../internals/string-multibyte":123}],9:[function(r,h,f){h.exports=function(u,l,d){if(u instanceof l)return u;throw TypeError("Incorrect "+(d?d+" ":"")+"invocation")}},{}],10:[function(r,h,f){var u=r("../internals/is-object");h.exports=function(l){if(u(l))return l;throw TypeError(String(l)+" is not an object")}},{"../internals/is-object":74}],11:[function(r,h,f){h.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(r,h,f){function u(W){return m(W)&&y(G,b(W))}var l,d=r("../internals/array-buffer-native"),x=r("../internals/descriptors"),S=r("../internals/global"),m=r("../internals/is-object"),y=r("../internals/has"),b=r("../internals/classof"),g=r("../internals/create-non-enumerable-property"),w=r("../internals/redefine"),_=r("../internals/object-define-property").f,C=r("../internals/object-get-prototype-of"),k=r("../internals/object-set-prototype-of"),E=r("../internals/well-known-symbol"),j=(r=r("../internals/uid"),S.Int8Array),A=j&&j.prototype,O=(O=S.Uint8ClampedArray)&&O.prototype,N=j&&C(j),D=A&&C(A),z=Object.prototype,$=z.isPrototypeOf,B=(E=E("toStringTag"),r("TYPED_ARRAY_TAG")),F=d&&!!k&&b(S.opera)!=="Opera",G=(r=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(l in G)S[l]||(F=!1);if((!F||typeof N!="function"||N===Function.prototype)&&(N=function(){throw TypeError("Incorrect invocation")},F))for(l in G)S[l]&&k(S[l],N);if((!F||!D||D===z)&&(D=N.prototype,F))for(l in G)S[l]&&k(S[l].prototype,D);if(F&&C(O)!==D&&k(O,D),x&&!y(D,E))for(l in r=!0,_(D,E,{get:function(){return m(this)?this[B]:void 0}}),G)S[l]&&g(S[l],B,l);h.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:r&&B,aTypedArray:function(W){if(u(W))return W;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(W){if(k){if($.call(N,W))return W}else for(var L in G)if(y(G,l)&&(L=S[L])&&(W===L||$.call(L,W)))return W;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(W,L,V){if(x){if(V)for(var Y in G)(Y=S[Y])&&y(Y.prototype,W)&&delete Y.prototype[W];D[W]&&!V||w(D,W,!V&&F&&A[W]||L)}},exportTypedArrayStaticMethod:function(W,L,V){var Y,Z;if(x){if(k){if(V)for(Y in G)(Z=S[Y])&&y(Z,W)&&delete Z[W];if(N[W]&&!V)return;try{return w(N,W,!V&&F&&j[W]||L)}catch{}}for(Y in G)!(Z=S[Y])||Z[W]&&!V||w(Z,W,L)}},isView:function(W){return(W=b(W))==="DataView"||y(G,W)},isTypedArray:u,TypedArray:N,TypedArrayPrototype:D}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(r,h,f){function u(ve){return[255&ve]}function l(ve){return[255&ve,ve>>8&255]}function d(ve){return[255&ve,ve>>8&255,ve>>16&255,ve>>24&255]}function x(ve){return ve[3]<<24|ve[2]<<16|ve[1]<<8|ve[0]}function S(ve){return he(ve,23,4)}function m(ve){return he(ve,52,8)}function y(ve,_e){G(ve[ne],_e,{get:function(){return V(this)[_e]}})}function b(ve,_e,Me,He){if((Me=D(Me))+_e>(ve=V(ve)).byteLength)throw ce(se);var ze=V(ve.buffer).bytes;return Me+=ve.byteOffset,ve=ze.slice(Me,Me+_e),He?ve:ve.reverse()}function g(ve,_e,Me,He,ze,st){if((Me=D(Me))+_e>(ve=V(ve)).byteLength)throw ce(se);for(var gt=V(ve.buffer).bytes,pt=Me+ve.byteOffset,Lt=He(+ze),_t=0;_t<_e;_t++)gt[pt+_t]=Lt[st?_t:_e-_t-1]}var w=r("../internals/global"),_=r("../internals/descriptors"),C=r("../internals/array-buffer-native"),k=r("../internals/create-non-enumerable-property"),E=r("../internals/redefine-all"),j=r("../internals/fails"),A=r("../internals/an-instance"),O=r("../internals/to-integer"),N=r("../internals/to-length"),D=r("../internals/to-index"),z=r("../internals/ieee754"),$=r("../internals/object-get-prototype-of"),B=r("../internals/object-set-prototype-of"),F=r("../internals/object-get-own-property-names").f,G=r("../internals/object-define-property").f,W=r("../internals/array-fill"),L=r("../internals/set-to-string-tag"),V=(r=r("../internals/internal-state")).get,Y=r.set,Z="ArrayBuffer",J="DataView",ne="prototype",se="Wrong index",ie=w[Z],X=ie,Q=w[J],re=(r=Q&&Q[ne],Object.prototype),ce=w.RangeError,he=z.pack,fe=z.unpack;if(C){if(!j(function(){ie(1)})||!j(function(){new ie(-1)})||j(function(){return new ie,new ie(1.5),new ie(NaN),ie.name!=Z})){w=(X=function(ve){return A(this,X),new ie(D(ve))})[ne]=ie[ne];for(var oe,me=F(ie),we=0;me.length>we;)(oe=me[we++])in X||k(X,oe,ie[oe]);w.constructor=X}B&&$(r)!==re&&B(r,re),z=new Q(new X(2));var ke=r.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||E(r,{setInt8:function(ve,_e){ke.call(this,ve,_e<<24>>24)},setUint8:function(ve,_e){ke.call(this,ve,_e<<24>>24)}},{unsafe:!0})}else X=function(ve){A(this,X,Z),ve=D(ve),Y(this,{bytes:W.call(new Array(ve),0),byteLength:ve}),_||(this.byteLength=ve)},Q=function(ve,_e,Me){A(this,Q,J),A(ve,X,J);var He=V(ve).byteLength;if((_e=O(_e))<0||He<_e)throw ce("Wrong offset");if(He<_e+(Me=Me===void 0?He-_e:N(Me)))throw ce("Wrong length");Y(this,{buffer:ve,byteLength:Me,byteOffset:_e}),_||(this.buffer=ve,this.byteLength=Me,this.byteOffset=_e)},_&&(y(X,"byteLength"),y(Q,"buffer"),y(Q,"byteLength"),y(Q,"byteOffset")),E(Q[ne],{getInt8:function(ve){return b(this,1,ve)[0]<<24>>24},getUint8:function(ve){return b(this,1,ve)[0]},getInt16:function(ve){return((ve=b(this,2,ve,1<arguments.length?arguments[1]:void 0))[1]<<8|ve[0])<<16>>16},getUint16:function(ve){return(ve=b(this,2,ve,1<arguments.length?arguments[1]:void 0))[1]<<8|ve[0]},getInt32:function(ve){return x(b(this,4,ve,1<arguments.length?arguments[1]:void 0))},getUint32:function(ve){return x(b(this,4,ve,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ve){return fe(b(this,4,ve,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ve){return fe(b(this,8,ve,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ve,_e){g(this,1,ve,u,_e)},setUint8:function(ve,_e){g(this,1,ve,u,_e)},setInt16:function(ve,_e){g(this,2,ve,l,_e,2<arguments.length?arguments[2]:void 0)},setUint16:function(ve,_e){g(this,2,ve,l,_e,2<arguments.length?arguments[2]:void 0)},setInt32:function(ve,_e){g(this,4,ve,d,_e,2<arguments.length?arguments[2]:void 0)},setUint32:function(ve,_e){g(this,4,ve,d,_e,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ve,_e){g(this,4,ve,S,_e,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ve,_e){g(this,8,ve,m,_e,2<arguments.length?arguments[2]:void 0)}});L(X,Z),L(Q,J),h.exports={ArrayBuffer:X,DataView:Q}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(r,h,f){var u=r("../internals/to-object"),l=r("../internals/to-absolute-index"),d=r("../internals/to-length"),x=Math.min;h.exports=[].copyWithin||function(S,m){var y=u(this),b=d(y.length),g=l(S,b),w=l(m,b),_=x(((S=2<arguments.length?arguments[2]:void 0)===void 0?b:l(S,b))-w,b-g),C=1;for(w<g&&g<w+_&&(C=-1,w+=_-1,g+=_-1);0<_--;)w in y?y[g]=y[w]:delete y[g],g+=C,w+=C;return y}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(r,h,f){var u=r("../internals/to-object"),l=r("../internals/to-absolute-index"),d=r("../internals/to-length");h.exports=function(x){for(var S,m=u(this),y=d(m.length),b=l(1<(S=arguments.length)?arguments[1]:void 0,y),g=(S=2<S?arguments[2]:void 0)===void 0?y:l(S,y);b<g;)m[b++]=x;return m}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(r,h,f){var u=r("../internals/array-iteration").forEach,l=r("../internals/array-method-is-strict");r=r("../internals/array-method-uses-to-length"),l=l("forEach"),r=r("forEach"),h.exports=l&&r?[].forEach:function(d){return u(this,d,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(r,h,f){var u=r("../internals/function-bind-context"),l=r("../internals/to-object"),d=r("../internals/call-with-safe-iteration-closing"),x=r("../internals/is-array-iterator-method"),S=r("../internals/to-length"),m=r("../internals/create-property"),y=r("../internals/get-iterator-method");h.exports=function(b){var g,w,_,C,k,E,j=l(b),A=(b=typeof this=="function"?this:Array,arguments.length),O=1<A?arguments[1]:void 0,N=O!==void 0,D=y(j),z=0;if(N&&(O=u(O,2<A?arguments[2]:void 0,2)),D==null||b==Array&&x(D))for(w=new b(g=S(j.length));z<g;z++)E=N?O(j[z],z):j[z],m(w,z,E);else for(k=(C=D.call(j)).next,w=new b;!(_=k.call(C)).done;z++)E=N?d(C,O,[_.value,z],!0):_.value,m(w,z,E);return w.length=z,w}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(r,h,f){function u(S){return function(m,y,b){var g,w=l(m),_=d(w.length),C=x(b,_);if(S&&y!=y){for(;C<_;)if((g=w[C++])!=g)return!0}else for(;C<_;C++)if((S||C in w)&&w[C]===y)return S||C||0;return!S&&-1}}var l=r("../internals/to-indexed-object"),d=r("../internals/to-length"),x=r("../internals/to-absolute-index");h.exports={includes:u(!0),indexOf:u(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(r,h,f){function u(b){var g=b==1,w=b==2,_=b==3,C=b==4,k=b==6,E=b==5||k;return function(j,A,O,N){for(var D,z,$=x(j),B=d($),F=l(A,O,3),G=S(B.length),W=0,L=(A=N||m,g?A(j,G):w?A(j,0):void 0);W<G;W++)if((E||W in B)&&(z=F(D=B[W],W,$),b)){if(g)L[W]=z;else if(z)switch(b){case 3:return!0;case 5:return D;case 6:return W;case 2:y.call(L,D)}else if(C)return!1}return k?-1:_||C?C:L}}var l=r("../internals/function-bind-context"),d=r("../internals/indexed-object"),x=r("../internals/to-object"),S=r("../internals/to-length"),m=r("../internals/array-species-create"),y=[].push;h.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(r,h,f){var u=r("../internals/to-indexed-object"),l=r("../internals/to-integer"),d=r("../internals/to-length"),x=r("../internals/array-method-is-strict"),S=(r=r("../internals/array-method-uses-to-length"),Math.min),m=[].lastIndexOf,y=!!m&&1/[1].lastIndexOf(1,-0)<0;x=x("lastIndexOf"),r=r("indexOf",{ACCESSORS:!0,1:0}),h.exports=!y&&x&&r?m:function(b){if(y)return m.apply(this,arguments)||0;var g=u(this),w=d(g.length),_=w-1;for((_=1<arguments.length?S(_,l(arguments[1])):_)<0&&(_=w+_);0<=_;_--)if(_ in g&&g[_]===b)return _||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(r,h,f){var u=r("../internals/fails"),l=r("../internals/well-known-symbol"),d=r("../internals/engine-v8-version"),x=l("species");h.exports=function(S){return 51<=d||!u(function(){var m=[];return(m.constructor={})[x]=function(){return{foo:1}},m[S](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(r,h,f){var u=r("../internals/fails");h.exports=function(l,d){var x=[][l];return!!x&&u(function(){x.call(null,d||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(r,h,f){function u(y){throw y}var l=r("../internals/descriptors"),d=r("../internals/fails"),x=r("../internals/has"),S=Object.defineProperty,m={};h.exports=function(y,b){var g,w,_,C;return x(m,y)?m[y]:(g=[][y],w=!!x(b=b||{},"ACCESSORS")&&b.ACCESSORS,_=x(b,0)?b[0]:u,C=x(b,1)?b[1]:void 0,m[y]=!!g&&!d(function(){if(w&&!l)return!0;var k={length:-1};w?S(k,1,{enumerable:!0,get:u}):k[1]=1,g.call(k,_,C)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(r,h,f){function u(m){return function(y,b,g,w){l(b);var _=d(y),C=x(_),k=S(_.length),E=m?k-1:0,j=m?-1:1;if(g<2)for(;;){if(E in C){w=C[E],E+=j;break}if(E+=j,m?E<0:k<=E)throw TypeError("Reduce of empty array with no initial value")}for(;m?0<=E:E<k;E+=j)E in C&&(w=b(w,C[E],E,_));return w}}var l=r("../internals/a-function"),d=r("../internals/to-object"),x=r("../internals/indexed-object"),S=r("../internals/to-length");h.exports={left:u(!1),right:u(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(r,h,f){var u=r("../internals/is-object"),l=r("../internals/is-array"),d=r("../internals/well-known-symbol")("species");h.exports=function(x,S){var m;return new((m=l(x)&&(typeof(m=x.constructor)=="function"&&(m===Array||l(m.prototype))||u(m)&&(m=m[d])===null)?void 0:m)===void 0?Array:m)(S===0?0:S)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(r,h,f){var u=r("../internals/an-object");h.exports=function(l,d,x,S){try{return S?d(u(x)[0],x[1]):d(x)}catch(m){throw(S=l.return)!==void 0&&u(S.call(l)),m}}},{"../internals/an-object":10}],27:[function(r,h,f){var u=r("../internals/well-known-symbol")("iterator"),l=!1;try{var d=0,x={next:function(){return{done:!!d++}},return:function(){l=!0}};x[u]=function(){return this},Array.from(x,function(){throw 2})}catch{}h.exports=function(S,m){if(!m&&!l)return!1;var y=!1;try{var b={};b[u]=function(){return{next:function(){return{done:y=!0}}}},S(b)}catch{}return y}},{"../internals/well-known-symbol":148}],28:[function(r,h,f){var u={}.toString;h.exports=function(l){return u.call(l).slice(8,-1)}},{}],29:[function(r,h,f){var u=r("../internals/to-string-tag-support"),l=r("../internals/classof-raw"),d=r("../internals/well-known-symbol")("toStringTag"),x=l(function(){return arguments}())=="Arguments";h.exports=u?l:function(S){var m;return S===void 0?"Undefined":S===null?"Null":typeof(m=function(y,b){try{return y[b]}catch{}}(S=Object(S),d))=="string"?m:x?l(S):(m=l(S))=="Object"&&typeof S.callee=="function"?"Arguments":m}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(r,h,f){var u=r("../internals/object-define-property").f,l=r("../internals/object-create"),d=r("../internals/redefine-all"),x=r("../internals/function-bind-context"),S=r("../internals/an-instance"),m=r("../internals/iterate"),y=r("../internals/define-iterator"),b=r("../internals/set-species"),g=r("../internals/descriptors"),w=r("../internals/internal-metadata").fastKey,_=(r=r("../internals/internal-state")).set,C=r.getterFor;h.exports={getConstructor:function(k,E,j,A){function O($,B,F){var G,W=z($),L=N($,B);return L?L.value=F:(W.last=L={index:G=w(B,!0),key:B,value:F,previous:B=W.last,next:void 0,removed:!1},W.first||(W.first=L),B&&(B.next=L),g?W.size++:$.size++,G!=="F"&&(W.index[G]=L)),$}function N($,B){$=z($);var F,G=w(B);if(G!=="F")return $.index[G];for(F=$.first;F;F=F.next)if(F.key==B)return F}var D=k(function($,B){S($,D,E),_($,{type:E,index:l(null),first:void 0,last:void 0,size:0}),g||($.size=0),B!=null&&m(B,$[A],$,j)}),z=C(E);return d(D.prototype,{clear:function(){for(var $=z(this),B=$.index,F=$.first;F;)F.removed=!0,F.previous&&(F.previous=F.previous.next=void 0),delete B[F.index],F=F.next;$.first=$.last=void 0,g?$.size=0:this.size=0},delete:function($){var B,F,G=z(this);return($=N(this,$))&&(B=$.next,F=$.previous,delete G.index[$.index],$.removed=!0,F&&(F.next=B),B&&(B.previous=F),G.first==$&&(G.first=B),G.last==$&&(G.last=F),g?G.size--:this.size--),!!$},forEach:function($){for(var B,F=z(this),G=x($,1<arguments.length?arguments[1]:void 0,3);B=B?B.next:F.first;)for(G(B.value,B.key,this);B&&B.removed;)B=B.previous},has:function($){return!!N(this,$)}}),d(D.prototype,j?{get:function($){return($=N(this,$))&&$.value},set:function($,B){return O(this,$===0?0:$,B)}}:{add:function($){return O(this,$=$===0?0:$,$)}}),g&&u(D.prototype,"size",{get:function(){return z(this).size}}),D},setStrong:function(k,E,j){var A=E+" Iterator",O=C(E),N=C(A);y(k,E,function(D,z){_(this,{type:A,target:D,state:O(D),kind:z,last:void 0})},function(){for(var D=N(this),z=D.kind,$=D.last;$&&$.removed;)$=$.previous;return D.target&&(D.last=$=$?$.next:D.state.first)?z=="keys"?{value:$.key,done:!1}:z=="values"?{value:$.value,done:!1}:{value:[$.key,$.value],done:!1}:{value:D.target=void 0,done:!0}},j?"entries":"values",!j,!0),b(E)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(r,h,f){function u(O){return O.frozen||(O.frozen=new l)}function l(){this.entries=[]}function d(O,N){return E(O.entries,function(D){return D[0]===N})}var x=r("../internals/redefine-all"),S=r("../internals/internal-metadata").getWeakData,m=r("../internals/an-object"),y=r("../internals/is-object"),b=r("../internals/an-instance"),g=r("../internals/iterate"),w=r("../internals/array-iteration"),_=r("../internals/has"),C=(r=r("../internals/internal-state")).set,k=r.getterFor,E=w.find,j=w.findIndex,A=0;l.prototype={get:function(O){if(O=d(this,O))return O[1]},has:function(O){return!!d(this,O)},set:function(O,N){var D=d(this,O);D?D[1]=N:this.entries.push([O,N])},delete:function(O){var N=j(this.entries,function(D){return D[0]===O});return~N&&this.entries.splice(N,1),!!~N}},h.exports={getConstructor:function(O,N,D,z){function $(G,W,L){var V=F(G),Y=S(m(W),!0);return Y===!0?u(V).set(W,L):Y[V.id]=L,G}var B=O(function(G,W){b(G,B,N),C(G,{type:N,id:A++,frozen:void 0}),W!=null&&g(W,G[z],G,D)}),F=k(N);return x(B.prototype,{delete:function(G){var W,L=F(this);return!!y(G)&&((W=S(G))===!0?u(L).delete(G):W&&_(W,L.id)&&delete W[L.id])},has:function(G){var W,L=F(this);return!!y(G)&&((W=S(G))===!0?u(L).has(G):W&&_(W,L.id))}}),x(B.prototype,D?{get:function(G){var W,L=F(this);if(y(G))return(W=S(G))===!0?u(L).get(G):W?W[L.id]:void 0},set:function(G,W){return $(this,G,W)}}:{add:function(G){return $(this,G,!0)}}),B}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/global"),d=r("../internals/is-forced"),x=r("../internals/redefine"),S=r("../internals/internal-metadata"),m=r("../internals/iterate"),y=r("../internals/an-instance"),b=r("../internals/is-object"),g=r("../internals/fails"),w=r("../internals/check-correctness-of-iteration"),_=r("../internals/set-to-string-tag"),C=r("../internals/inherit-if-required");h.exports=function(k,E,j){function A(Z){var J=L[Z];x(L,Z,Z=="add"?function(ne){return J.call(this,ne===0?0:ne),this}:Z=="delete"?function(ne){return!(F&&!b(ne))&&J.call(this,ne===0?0:ne)}:Z=="get"?function(ne){return F&&!b(ne)?void 0:J.call(this,ne===0?0:ne)}:Z=="has"?function(ne){return!(F&&!b(ne))&&J.call(this,ne===0?0:ne)}:function(ne,se){return J.call(this,ne===0?0:ne,se),this})}var O,N,D,z,$,B=k.indexOf("Map")!==-1,F=k.indexOf("Weak")!==-1,G=B?"set":"add",W=l[k],L=W&&W.prototype,V=W,Y={};return d(k,typeof W!="function"||!(F||L.forEach&&!g(function(){new W().entries().next()})))?(V=j.getConstructor(E,k,B,G),S.REQUIRED=!0):d(k,!0)&&(N=(O=new V)[G](F?{}:-0,1)!=O,D=g(function(){O.has(1)}),z=w(function(Z){new W(Z)}),$=!F&&g(function(){for(var Z=new W,J=5;J--;)Z[G](J,J);return!Z.has(-0)}),z||(((V=E(function(Z,J){return y(Z,V,k),Z=C(new W,Z,V),J!=null&&m(J,Z[G],Z,B),Z})).prototype=L).constructor=V),(D||$)&&(A("delete"),A("has"),B&&A("get")),($||N)&&A(G),F&&L.clear&&delete L.clear),Y[k]=V,u({global:!0,forced:V!=W},Y),_(V,k),F||j.setStrong(V,k,B),V}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(r,h,f){var u=r("../internals/has"),l=r("../internals/own-keys"),d=r("../internals/object-get-own-property-descriptor"),x=r("../internals/object-define-property");h.exports=function(S,m){for(var y=l(m),b=x.f,g=d.f,w=0;w<y.length;w++){var _=y[w];u(S,_)||b(S,_,g(m,_))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(r,h,f){var u=r("../internals/well-known-symbol")("match");h.exports=function(l){var d=/./;try{"/./"[l](d)}catch{try{return d[u]=!1,"/./"[l](d)}catch{}}return!1}},{"../internals/well-known-symbol":148}],35:[function(r,h,f){r=r("../internals/fails"),h.exports=!r(function(){function u(){}return u.prototype.constructor=null,Object.getPrototypeOf(new u)!==u.prototype})},{"../internals/fails":51}],36:[function(r,h,f){var u=r("../internals/require-object-coercible"),l=/"/g;h.exports=function(d,x,S,m){d=String(u(d));var y="<"+x;return S!==""&&(y+=" "+S+'="'+String(m).replace(l,"&quot;")+'"'),y+">"+d+"</"+x+">"}},{"../internals/require-object-coercible":113}],37:[function(r,h,f){function u(){return this}var l=r("../internals/iterators-core").IteratorPrototype,d=r("../internals/object-create"),x=r("../internals/create-property-descriptor"),S=r("../internals/set-to-string-tag"),m=r("../internals/iterators");h.exports=function(y,b,g){return b+=" Iterator",y.prototype=d(l,{next:x(1,g)}),S(y,b,!1,!0),m[b]=u,y}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(r,h,f){var u=r("../internals/descriptors"),l=r("../internals/object-define-property"),d=r("../internals/create-property-descriptor");h.exports=u?function(x,S,m){return l.f(x,S,d(1,m))}:function(x,S,m){return x[S]=m,x}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(r,h,f){h.exports=function(u,l){return{enumerable:!(1&u),configurable:!(2&u),writable:!(4&u),value:l}}},{}],40:[function(r,h,f){var u=r("../internals/to-primitive"),l=r("../internals/object-define-property"),d=r("../internals/create-property-descriptor");h.exports=function(x,S,m){(S=u(S))in x?l.f(x,S,d(0,m)):x[S]=m}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(r,h,f){function u(){return this}var l=r("../internals/export"),d=r("../internals/create-iterator-constructor"),x=r("../internals/object-get-prototype-of"),S=r("../internals/object-set-prototype-of"),m=r("../internals/set-to-string-tag"),y=r("../internals/create-non-enumerable-property"),b=r("../internals/redefine"),g=r("../internals/well-known-symbol"),w=r("../internals/is-pure"),_=r("../internals/iterators"),C=(r=r("../internals/iterators-core")).IteratorPrototype,k=r.BUGGY_SAFARI_ITERATORS,E=g("iterator"),j="values",A="entries";h.exports=function(O,N,D,z,$,B,F){function G(se){if(se===$&&J)return J;if(!k&&se in Y)return Y[se];switch(se){case"keys":case j:case A:return function(){return new D(this,se)}}return function(){return new D(this)}}d(D,N,z),z=N+" Iterator";var W,L,V=!1,Y=O.prototype,Z=Y[E]||Y["@@iterator"]||$&&Y[$],J=!k&&Z||G($),ne=N=="Array"&&Y.entries||Z;if(ne&&(ne=x(ne.call(new O)),C!==Object.prototype&&ne.next&&(w||x(ne)===C||(S?S(ne,C):typeof ne[E]!="function"&&y(ne,E,u)),m(ne,z,!0,!0),w&&(_[z]=u))),$==j&&Z&&Z.name!==j&&(V=!0,J=function(){return Z.call(this)}),w&&!F||Y[E]===J||y(Y,E,J),_[N]=J,$)if(W={values:G(j),keys:B?J:G("keys"),entries:G(A)},F)for(L in W)!k&&!V&&L in Y||b(Y,L,W[L]);else l({target:N,proto:!0,forced:k||V},W);return W}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(r,h,f){var u=r("../internals/path"),l=r("../internals/has"),d=r("../internals/well-known-symbol-wrapped"),x=r("../internals/object-define-property").f;h.exports=function(S){var m=u.Symbol||(u.Symbol={});l(m,S)||x(m,S,{value:d.f(S)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(r,h,f){r=r("../internals/fails"),h.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(r,h,f){var u=r("../internals/global"),l=(r=r("../internals/is-object"),u.document),d=r(l)&&r(l.createElement);h.exports=function(x){return d?l.createElement(x):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(r,h,f){h.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(r,h,f){r=r("../internals/engine-user-agent"),h.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},{"../internals/engine-user-agent":47}],47:[function(r,h,f){r=r("../internals/get-built-in"),h.exports=r("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(r,h,f){var u,l,d=r("../internals/global");r=r("../internals/engine-user-agent"),(d=(d=(d=d.process)&&d.versions)&&d.v8)?l=(u=d.split("."))[0]+u[1]:r&&(!(u=r.match(/Edge\/(\d+)/))||74<=u[1])&&(u=r.match(/Chrome\/(\d+)/))&&(l=u[1]),h.exports=l&&+l},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(r,h,f){h.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(r,h,f){var u=r("../internals/global"),l=r("../internals/object-get-own-property-descriptor").f,d=r("../internals/create-non-enumerable-property"),x=r("../internals/redefine"),S=r("../internals/set-global"),m=r("../internals/copy-constructor-properties"),y=r("../internals/is-forced");h.exports=function(b,g){var w,_,C,k=b.target,E=b.global,j=b.stat,A=E?u:j?u[k]||S(k,{}):(u[k]||{}).prototype;if(A)for(w in g){if(_=g[w],C=b.noTargetGet?(C=l(A,w))&&C.value:A[w],!y(E?w:k+(j?".":"#")+w,b.forced)&&C!==void 0){if(typeof _==typeof C)continue;m(_,C)}(b.sham||C&&C.sham)&&d(_,"sham",!0),x(A,w,_,b)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(r,h,f){h.exports=function(u){try{return!!u()}catch{return!0}}},{}],52:[function(r,h,f){r("../modules/es.regexp.exec");var u=r("../internals/redefine"),l=r("../internals/fails"),d=r("../internals/well-known-symbol"),x=r("../internals/regexp-exec"),S=r("../internals/create-non-enumerable-property"),m=d("species"),y=!l(function(){var _=/./;return _.exec=function(){var C=[];return C.groups={a:"7"},C},"".replace(_,"$<a>")!=="7"}),b="a".replace(/./,"$0")==="$0",g=!!/./[r=d("replace")]&&/./[r]("a","$0")==="",w=!l(function(){var _,C=(_=/(?:)/).exec;return(_=(_.exec=function(){return C.apply(this,arguments)},"ab".split(_))).length!==2||_[0]!=="a"||_[1]!=="b"});h.exports=function(_,C,k,E){var j,A,O=d(_),N=!l(function(){var z={};return z[O]=function(){return 7},""[_](z)!=7}),D=N&&!l(function(){var z=!1,$=/a/;return _==="split"&&(($={constructor:{}}).constructor[m]=function(){return $},$.flags="",$[O]=/./[O]),$.exec=function(){return z=!0,null},$[O](""),!z});N&&D&&(_!=="replace"||y&&b&&!g)&&(_!=="split"||w)||(j=/./[O],k=(D=k(O,""[_],function(z,$,B,F,G){return $.exec===x?N&&!G?{done:!0,value:j.call($,B,F)}:{done:!0,value:z.call(B,$,F)}:{done:!1}},{REPLACE_KEEPS_$0:b,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}))[0],A=D[1],u(String.prototype,_,k),u(RegExp.prototype,O,C==2?function(z,$){return A.call(z,this,$)}:function(z){return A.call(z,this)})),E&&S(RegExp.prototype[O],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":185}],53:[function(r,h,f){r=r("../internals/fails"),h.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(r,h,f){var u=r("../internals/a-function");h.exports=function(l,d,x){if(u(l),d===void 0)return l;switch(x){case 0:return function(){return l.call(d)};case 1:return function(S){return l.call(d,S)};case 2:return function(S,m){return l.call(d,S,m)};case 3:return function(S,m,y){return l.call(d,S,m,y)}}return function(){return l.apply(d,arguments)}}},{"../internals/a-function":5}],55:[function(r,h,f){var u=r("../internals/a-function"),l=r("../internals/is-object"),d=[].slice,x={};h.exports=Function.bind||function(S){var m=u(this),y=d.call(arguments,1),b=function(){var g=y.concat(d.call(arguments));if(this instanceof b){var w=m,_=g.length,C=g;if(!(_ in x)){for(var k=[],E=0;E<_;E++)k[E]="a["+E+"]";x[_]=Function("C,a","return new C("+k.join(",")+")")}return x[_](w,C)}return m.apply(S,g)};return l(m.prototype)&&(b.prototype=m.prototype),b}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(r,h,f){function u(x){return typeof x=="function"?x:void 0}var l=r("../internals/path"),d=r("../internals/global");h.exports=function(x,S){return arguments.length<2?u(l[x])||u(d[x]):l[x]&&l[x][S]||d[x]&&d[x][S]}},{"../internals/global":59,"../internals/path":104}],57:[function(r,h,f){var u=r("../internals/classof"),l=r("../internals/iterators"),d=r("../internals/well-known-symbol")("iterator");h.exports=function(x){if(x!=null)return x[d]||x["@@iterator"]||l[u(x)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(r,h,f){var u=r("../internals/an-object"),l=r("../internals/get-iterator-method");h.exports=function(d){var x=l(d);if(typeof x!="function")throw TypeError(String(d)+" is not iterable");return u(x.call(d))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(r,h,f){(function(u){function l(d){return d&&d.Math==Math&&d}h.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof u=="object"&&u)||Function("return this")()}).call(this,p!==void 0?p:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(r,h,f){var u={}.hasOwnProperty;h.exports=function(l,d){return u.call(l,d)}},{}],61:[function(r,h,f){h.exports={}},{}],62:[function(r,h,f){var u=r("../internals/global");h.exports=function(l,d){var x=u.console;x&&x.error&&(arguments.length===1?x.error(l):x.error(l,d))}},{"../internals/global":59}],63:[function(r,h,f){r=r("../internals/get-built-in"),h.exports=r("document","documentElement")},{"../internals/get-built-in":56}],64:[function(r,h,f){var u=r("../internals/descriptors"),l=r("../internals/fails"),d=r("../internals/document-create-element");h.exports=!u&&!l(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(r,h,f){var u=Math.abs,l=Math.pow,d=Math.floor,x=Math.log,S=Math.LN2;h.exports={pack:function(m,y,b){var g,w,_,C=new Array(b),k=8*b-y-1,E=(b=(1<<k)-1)>>1,j=y===23?l(2,-24)-l(2,-77):0,A=m<0||m===0&&1/m<0?1:0,O=0;for((m=u(m))!=m||m===1/0?(w=m!=m?1:0,g=b):(g=d(x(m)/S),m*(_=l(2,-g))<1&&(g--,_*=2),2<=(m+=1<=g+E?j/_:j*l(2,1-E))*_&&(g++,_/=2),b<=g+E?(w=0,g=b):1<=g+E?(w=(m*_-1)*l(2,y),g+=E):(w=m*l(2,E-1)*l(2,y),g=0));8<=y;C[O++]=255&w,w/=256,y-=8);for(g=g<<y|w,k+=y;0<k;C[O++]=255&g,g/=256,k-=8);return C[--O]|=128*A,C},unpack:function(m,y){var b,g,w=m.length,_=(1<<(g=8*w-y-1))-1,C=_>>1,k=g-7,E=w-1,j=127&(g=m[E--]);for(g>>=7;0<k;j=256*j+m[E],E--,k-=8);for(b=j&(1<<-k)-1,j>>=-k,k+=y;0<k;b=256*b+m[E],E--,k-=8);if(j===0)j=1-C;else{if(j===_)return b?NaN:g?-1/0:1/0;b+=l(2,y),j-=C}return(g?-1:1)*b*l(2,j-y)}}},{}],66:[function(r,h,f){var u=r("../internals/fails"),l=r("../internals/classof-raw"),d="".split;h.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(x){return l(x)=="String"?d.call(x,""):Object(x)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(r,h,f){var u=r("../internals/is-object"),l=r("../internals/object-set-prototype-of");h.exports=function(d,x,S){return l&&typeof(x=x.constructor)=="function"&&x!==S&&u(x=x.prototype)&&x!==S.prototype&&l(d,x),d}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(r,h,f){r=r("../internals/shared-store");var u=Function.toString;typeof r.inspectSource!="function"&&(r.inspectSource=function(l){return u.call(l)}),h.exports=r.inspectSource},{"../internals/shared-store":119}],69:[function(r,h,f){function u(C){S(C,b,{value:{objectID:"O"+ ++g,weakData:{}}})}var l=r("../internals/hidden-keys"),d=r("../internals/is-object"),x=r("../internals/has"),S=r("../internals/object-define-property").f,m=r("../internals/uid"),y=r("../internals/freezing"),b=m("meta"),g=0,w=Object.isExtensible||function(){return!0},_=h.exports={REQUIRED:!1,fastKey:function(C,k){if(!d(C))return typeof C=="symbol"?C:(typeof C=="string"?"S":"P")+C;if(!x(C,b)){if(!w(C))return"F";if(!k)return"E";u(C)}return C[b].objectID},getWeakData:function(C,k){if(!x(C,b)){if(!w(C))return!0;if(!k)return!1;u(C)}return C[b].weakData},onFreeze:function(C){return y&&_.REQUIRED&&w(C)&&!x(C,b)&&u(C),C}};l[b]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(r,h,f){var u,l,d,x,S,m,y,b,g=r("../internals/native-weak-map"),w=r("../internals/global"),_=r("../internals/is-object"),C=r("../internals/create-non-enumerable-property"),k=r("../internals/has"),E=r("../internals/shared-key");r=r("../internals/hidden-keys"),w=w.WeakMap,y=g?(u=new w,l=u.get,d=u.has,x=u.set,S=function(j,A){return x.call(u,j,A),A},m=function(j){return l.call(u,j)||{}},function(j){return d.call(u,j)}):(r[b=E("state")]=!0,S=function(j,A){return C(j,b,A),A},m=function(j){return k(j,b)?j[b]:{}},function(j){return k(j,b)}),h.exports={set:S,get:m,has:y,enforce:function(j){return y(j)?m(j):S(j,{})},getterFor:function(j){return function(A){if(_(A)&&(A=m(A)).type===j)return A;throw TypeError("Incompatible receiver, "+j+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(r,h,f){var u=r("../internals/well-known-symbol"),l=r("../internals/iterators"),d=u("iterator"),x=Array.prototype;h.exports=function(S){return S!==void 0&&(l.Array===S||x[d]===S)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(r,h,f){var u=r("../internals/classof-raw");h.exports=Array.isArray||function(l){return u(l)=="Array"}},{"../internals/classof-raw":28}],73:[function(r,h,f){function u(b,g){return(b=S[x(b)])==y||b!=m&&(typeof g=="function"?l(g):!!g)}var l=r("../internals/fails"),d=/#|\.prototype\./,x=u.normalize=function(b){return String(b).replace(d,".").toLowerCase()},S=u.data={},m=u.NATIVE="N",y=u.POLYFILL="P";h.exports=u},{"../internals/fails":51}],74:[function(r,h,f){h.exports=function(u){return typeof u=="object"?u!==null:typeof u=="function"}},{}],75:[function(r,h,f){h.exports=!1},{}],76:[function(r,h,f){var u=r("../internals/is-object"),l=r("../internals/classof-raw"),d=r("../internals/well-known-symbol")("match");h.exports=function(x){var S;return u(x)&&((S=x[d])!==void 0?!!S:l(x)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(r,h,f){function u(b,g){this.stopped=b,this.result=g}var l=r("../internals/an-object"),d=r("../internals/is-array-iterator-method"),x=r("../internals/to-length"),S=r("../internals/function-bind-context"),m=r("../internals/get-iterator-method"),y=r("../internals/call-with-safe-iteration-closing");(h.exports=function(b,g,w,_,C){var k,E,j,A,O,N,D=S(g,w,_?2:1);if(C)k=b;else{if(typeof(g=m(b))!="function")throw TypeError("Target is not iterable");if(d(g)){for(E=0,j=x(b.length);E<j;E++)if((A=_?D(l(N=b[E])[0],N[1]):D(b[E]))&&A instanceof u)return A;return new u(!1)}k=g.call(b)}for(O=k.next;!(N=O.call(k)).done;)if(typeof(A=y(k,D,N.value,_))=="object"&&A&&A instanceof u)return A;return new u(!1)}).stop=function(b){return new u(!0,b)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(r,h,f){var u,l,d=r("../internals/object-get-prototype-of"),x=r("../internals/create-non-enumerable-property"),S=r("../internals/has"),m=r("../internals/well-known-symbol"),y=(r=r("../internals/is-pure"),m=m("iterator"),!1);[].keys&&("next"in(l=[].keys())?(d=d(d(l)))!==Object.prototype&&(u=d):y=!0),u==null&&(u={}),r||S(u,m)||x(u,m,function(){return this}),h.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:y}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(r,h,f){h.exports={}},{}],80:[function(r,h,f){h.exports=Math.sign||function(u){return(u=+u)==0||u!=u?u:u<0?-1:1}},{}],81:[function(r,h,f){var u,l,d,x,S,m,y,b,g=r("../internals/global"),w=r("../internals/object-get-own-property-descriptor").f,_=r("../internals/classof-raw"),C=r("../internals/task").set,k=(r=r("../internals/engine-is-ios"),g.MutationObserver||g.WebKitMutationObserver),E=g.process,j=g.Promise,A=_(E)=="process";_=w(g,"queueMicrotask"),(w=_&&_.value)||(u=function(){var O,N;for(A&&(O=E.domain)&&O.exit();l;){N=l.fn,l=l.next;try{N()}catch(D){throw l?x():d=void 0,D}}d=void 0,O&&O.enter()},x=A?function(){E.nextTick(u)}:k&&!r?(S=!0,m=document.createTextNode(""),new k(u).observe(m,{characterData:!0}),function(){m.data=S=!S}):j&&j.resolve?(y=j.resolve(void 0),b=y.then,function(){b.call(y,u)}):function(){C.call(g,u)}),h.exports=w||function(O){O={fn:O,next:void 0},d&&(d.next=O),l||(l=O,x()),d=O}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(r,h,f){r=r("../internals/global"),h.exports=r.Promise},{"../internals/global":59}],83:[function(r,h,f){r=r("../internals/fails"),h.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(r,h,f){var u=r("../internals/fails"),l=r("../internals/well-known-symbol"),d=r("../internals/is-pure"),x=l("iterator");h.exports=!u(function(){var S=new URL("b?a=1&b=2&c=3","http://a"),m=S.searchParams,y="";return S.pathname="c%20d",m.forEach(function(b,g){m.delete("b"),y+=g+b}),d&&!S.toJSON||!m.sort||S.href!=="http://a/c%20d?a=1&c=3"||m.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!m[x]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||y!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(r,h,f){var u=r("../internals/global");r=r("../internals/inspect-source"),u=u.WeakMap,h.exports=typeof u=="function"&&/native code/.test(r(u))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(r,h,f){function u(d){var x,S;this.promise=new d(function(m,y){if(x!==void 0||S!==void 0)throw TypeError("Bad Promise constructor");x=m,S=y}),this.resolve=l(x),this.reject=l(S)}var l=r("../internals/a-function");h.exports.f=function(d){return new u(d)}},{"../internals/a-function":5}],87:[function(r,h,f){var u=r("../internals/is-regexp");h.exports=function(l){if(u(l))throw TypeError("The method doesn't accept regular expressions");return l}},{"../internals/is-regexp":76}],88:[function(r,h,f){var u=r("../internals/global").isFinite;h.exports=Number.isFinite||function(l){return typeof l=="number"&&u(l)}},{"../internals/global":59}],89:[function(r,h,f){var u=r("../internals/descriptors"),l=r("../internals/fails"),d=r("../internals/object-keys"),x=r("../internals/object-get-own-property-symbols"),S=r("../internals/object-property-is-enumerable"),m=r("../internals/to-object"),y=r("../internals/indexed-object"),b=Object.assign,g=Object.defineProperty;h.exports=!b||l(function(){var w,_,C,k;return!(!u||b({b:1},b(g({},"a",{enumerable:!0,get:function(){g(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(_={},k="abcdefghijklmnopqrst",(w={})[C=Symbol()]=7,k.split("").forEach(function(E){_[E]=E}),b({},w)[C]!=7||d(b({},_)).join("")!=k)})?function(w,_){for(var C=m(w),k=arguments.length,E=1,j=x.f,A=S.f;E<k;)for(var O,N=y(arguments[E++]),D=j?d(N).concat(j(N)):d(N),z=D.length,$=0;$<z;)O=D[$++],u&&!A.call(N,O)||(C[O]=N[O]);return C}:b},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(r,h,f){function u(){}var l,d=r("../internals/an-object"),x=r("../internals/object-define-properties"),S=r("../internals/enum-bug-keys"),m=r("../internals/hidden-keys"),y=r("../internals/html"),b=r("../internals/document-create-element"),g=(r=r("../internals/shared-key"),"prototype"),w="script",_=r("IE_PROTO"),C=function(E){return"<script>"+E+"</"+w+">"},k=function(){try{l=document.domain&&new ActiveXObject("htmlfile")}catch{}k=l?((E=l).write(C("")),E.close(),j=E.parentWindow.Object,E=null,j):(j="javascript:",(E=b("iframe")).style.display="none",y.appendChild(E),E.src=String(j),(j=E.contentWindow.document).open(),j.write(C("document.F=Object")),j.close(),j.F);for(var E,j,A=S.length;A--;)delete k[g][S[A]];return k()};m[_]=!0,h.exports=Object.create||function(E,j){var A;return E!==null?(u[g]=d(E),A=new u,u[g]=null,A[_]=E):A=k(),j===void 0?A:x(A,j)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(r,h,f){var u=r("../internals/descriptors"),l=r("../internals/object-define-property"),d=r("../internals/an-object"),x=r("../internals/object-keys");h.exports=u?Object.defineProperties:function(S,m){d(S);for(var y,b=x(m),g=b.length,w=0;w<g;)l.f(S,y=b[w++],m[y]);return S}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(r,h,f){var u=r("../internals/descriptors"),l=r("../internals/ie8-dom-define"),d=r("../internals/an-object"),x=r("../internals/to-primitive"),S=Object.defineProperty;f.f=u?S:function(m,y,b){if(d(m),y=x(y,!0),d(b),l)try{return S(m,y,b)}catch{}if("get"in b||"set"in b)throw TypeError("Accessors not supported");return"value"in b&&(m[y]=b.value),m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(r,h,f){var u=r("../internals/descriptors"),l=r("../internals/object-property-is-enumerable"),d=r("../internals/create-property-descriptor"),x=r("../internals/to-indexed-object"),S=r("../internals/to-primitive"),m=r("../internals/has"),y=r("../internals/ie8-dom-define"),b=Object.getOwnPropertyDescriptor;f.f=u?b:function(g,w){if(g=x(g),w=S(w,!0),y)try{return b(g,w)}catch{}if(m(g,w))return d(!l.f.call(g,w),g[w])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(r,h,f){var u=r("../internals/to-indexed-object"),l=r("../internals/object-get-own-property-names").f,d={}.toString,x=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];h.exports.f=function(S){if(!x||d.call(S)!="[object Window]")return l(u(S));try{return l(S)}catch{return x.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(r,h,f){var u=r("../internals/object-keys-internal"),l=r("../internals/enum-bug-keys").concat("length","prototype");f.f=Object.getOwnPropertyNames||function(d){return u(d,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(r,h,f){f.f=Object.getOwnPropertySymbols},{}],97:[function(r,h,f){var u=r("../internals/has"),l=r("../internals/to-object"),d=r("../internals/shared-key"),x=(r=r("../internals/correct-prototype-getter"),d("IE_PROTO")),S=Object.prototype;h.exports=r?Object.getPrototypeOf:function(m){return m=l(m),u(m,x)?m[x]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?S:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(r,h,f){var u=r("../internals/has"),l=r("../internals/to-indexed-object"),d=r("../internals/array-includes").indexOf,x=r("../internals/hidden-keys");h.exports=function(S,m){var y,b=l(S),g=0,w=[];for(y in b)!u(x,y)&&u(b,y)&&w.push(y);for(;m.length>g;)!u(b,y=m[g++])||~d(w,y)||w.push(y);return w}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(r,h,f){var u=r("../internals/object-keys-internal"),l=r("../internals/enum-bug-keys");h.exports=Object.keys||function(d){return u(d,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(r,h,f){var u={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,d=l&&!u.call({1:2},1);f.f=d?function(x){return!!(x=l(this,x))&&x.enumerable}:u},{}],101:[function(r,h,f){var u=r("../internals/an-object"),l=r("../internals/a-possible-prototype");h.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,x=!1,S={};try{(d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(S,[]),x=S instanceof Array}catch{}return function(m,y){return u(m),l(y),x?d.call(m,y):m.__proto__=y,m}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(r,h,f){var u=r("../internals/to-string-tag-support"),l=r("../internals/classof");h.exports=u?{}.toString:function(){return"[object "+l(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(r,h,f){var u=r("../internals/get-built-in"),l=r("../internals/object-get-own-property-names"),d=r("../internals/object-get-own-property-symbols"),x=r("../internals/an-object");h.exports=u("Reflect","ownKeys")||function(S){var m=l.f(x(S)),y=d.f;return y?m.concat(y(S)):m}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(r,h,f){r=r("../internals/global"),h.exports=r},{"../internals/global":59}],105:[function(r,h,f){h.exports=function(u){try{return{error:!1,value:u()}}catch(l){return{error:!0,value:l}}}},{}],106:[function(r,h,f){var u=r("../internals/an-object"),l=r("../internals/is-object"),d=r("../internals/new-promise-capability");h.exports=function(x,S){return u(x),l(S)&&S.constructor===x?S:((0,(x=d.f(x)).resolve)(S),x.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(r,h,f){var u=r("../internals/redefine");h.exports=function(l,d,x){for(var S in d)u(l,S,d[S],x);return l}},{"../internals/redefine":108}],108:[function(r,h,f){var u=r("../internals/global"),l=r("../internals/create-non-enumerable-property"),d=r("../internals/has"),x=r("../internals/set-global"),S=r("../internals/inspect-source"),m=(r=r("../internals/internal-state")).get,y=r.enforce,b=String(String).split("String");(h.exports=function(g,w,_,C){var k=!!C&&!!C.unsafe,E=!!C&&!!C.enumerable;C=!!C&&!!C.noTargetGet,typeof _=="function"&&(typeof w!="string"||d(_,"name")||l(_,"name",w),y(_).source=b.join(typeof w=="string"?w:"")),g===u?E?g[w]=_:x(w,_):(k?!C&&g[w]&&(E=!0):delete g[w],E?g[w]=_:l(g,w,_))})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||S(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(r,h,f){var u=r("./classof-raw"),l=r("./regexp-exec");h.exports=function(d,x){var S=d.exec;if(typeof S=="function"){if(typeof(S=S.call(d,x))!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return S}if(u(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(d,x)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(r,h,f){var u,l,d=r("./regexp-flags"),x=(r=r("./regexp-sticky-helpers"),RegExp.prototype.exec),S=String.prototype.replace,m=x,y=(u=/a/,l=/b*/g,x.call(u,"a"),x.call(l,"a"),u.lastIndex!==0||l.lastIndex!==0),b=r.UNSUPPORTED_Y||r.BROKEN_CARET,g=/()??/.exec("")[1]!==void 0;h.exports=m=y||g||b?function(w){var _,C,k,E,j=this,A=b&&j.sticky,O=d.call(j),N=j.source,D=0,z=w;return A&&((O=O.replace("y","")).indexOf("g")===-1&&(O+="g"),z=String(w).slice(j.lastIndex),0<j.lastIndex&&(!j.multiline||j.multiline&&w[j.lastIndex-1]!==`
`)&&(N="(?: "+N+")",z=" "+z,D++),C=new RegExp("^(?:"+N+")",O)),g&&(C=new RegExp("^"+N+"$(?!\\s)",O)),y&&(_=j.lastIndex),k=x.call(A?C:j,z),A?k?(k.input=k.input.slice(D),k[0]=k[0].slice(D),k.index=j.lastIndex,j.lastIndex+=k[0].length):j.lastIndex=0:y&&k&&(j.lastIndex=j.global?k.index+k[0].length:_),g&&k&&1<k.length&&S.call(k[0],C,function(){for(E=1;E<arguments.length-2;E++)arguments[E]===void 0&&(k[E]=void 0)}),k}:m},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(r,h,f){var u=r("../internals/an-object");h.exports=function(){var l=u(this),d="";return l.global&&(d+="g"),l.ignoreCase&&(d+="i"),l.multiline&&(d+="m"),l.dotAll&&(d+="s"),l.unicode&&(d+="u"),l.sticky&&(d+="y"),d}},{"../internals/an-object":10}],112:[function(r,h,f){function u(l,d){return RegExp(l,d)}r=r("./fails"),f.UNSUPPORTED_Y=r(function(){var l=u("a","y");return l.lastIndex=2,l.exec("abcd")!=null}),f.BROKEN_CARET=r(function(){var l=u("^r","gy");return l.lastIndex=2,l.exec("str")!=null})},{"./fails":51}],113:[function(r,h,f){h.exports=function(u){if(u==null)throw TypeError("Can't call method on "+u);return u}},{}],114:[function(r,h,f){h.exports=Object.is||function(u,l){return u===l?u!==0||1/u==1/l:u!=u&&l!=l}},{}],115:[function(r,h,f){var u=r("../internals/global"),l=r("../internals/create-non-enumerable-property");h.exports=function(d,x){try{l(u,d,x)}catch{u[d]=x}return x}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(r,h,f){var u=r("../internals/get-built-in"),l=r("../internals/object-define-property"),d=r("../internals/well-known-symbol"),x=r("../internals/descriptors"),S=d("species");h.exports=function(m){m=u(m);var y=l.f;x&&m&&!m[S]&&y(m,S,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(r,h,f){var u=r("../internals/object-define-property").f,l=r("../internals/has"),d=r("../internals/well-known-symbol")("toStringTag");h.exports=function(x,S,m){x&&!l(x=m?x:x.prototype,d)&&u(x,d,{configurable:!0,value:S})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(r,h,f){var u=r("../internals/shared"),l=r("../internals/uid"),d=u("keys");h.exports=function(x){return d[x]||(d[x]=l(x))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(r,h,f){var u=r("../internals/global"),l=(r=r("../internals/set-global"),"__core-js_shared__");u=u[l]||r(l,{}),h.exports=u},{"../internals/global":59,"../internals/set-global":115}],120:[function(r,h,f){var u=r("../internals/is-pure"),l=r("../internals/shared-store");(h.exports=function(d,x){return l[d]||(l[d]=x!==void 0?x:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(r,h,f){var u=r("../internals/an-object"),l=r("../internals/a-function"),d=r("../internals/well-known-symbol")("species");h.exports=function(x,S){return(x=u(x).constructor)===void 0||(x=u(x)[d])==null?S:l(x)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(r,h,f){var u=r("../internals/fails");h.exports=function(l){return u(function(){var d=""[l]('"');return d!==d.toLowerCase()||3<d.split('"').length})}},{"../internals/fails":51}],123:[function(r,h,f){function u(x){return function(S,m){S=String(d(S)),m=l(m);var y,b=S.length;return m<0||b<=m?x?"":void 0:(y=S.charCodeAt(m))<55296||56319<y||m+1===b||(b=S.charCodeAt(m+1))<56320||57343<b?x?S.charAt(m):y:x?S.slice(m,m+2):b-56320+(y-55296<<10)+65536}}var l=r("../internals/to-integer"),d=r("../internals/require-object-coercible");h.exports={codeAt:u(!1),charAt:u(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(r,h,f){r=r("../internals/engine-user-agent"),h.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},{"../internals/engine-user-agent":47}],125:[function(r,h,f){function u(m){return function(y,b,g){var w=(y=String(x(y))).length;return g=g===void 0?" ":String(g),(b=l(b))<=w||g==""?y:((w=d.call(g,S((b-=w)/g.length))).length>b&&(w=w.slice(0,b)),m?y+w:w+y)}}var l=r("../internals/to-length"),d=r("../internals/string-repeat"),x=r("../internals/require-object-coercible"),S=Math.ceil;h.exports={start:u(!1),end:u(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(r,h,f){function u(E){return E+22+75*(E<26)}function l(E){var j,A=[],O=(E=function(ne){for(var se=[],ie=0,X=ne.length;ie<X;){var Q,re=ne.charCodeAt(ie++);55296<=re&&re<=56319&&ie<X?(64512&(Q=ne.charCodeAt(ie++)))==56320?se.push(((1023&re)<<10)+(1023&Q)+65536):(se.push(re),ie--):se.push(re)}return se}(E)).length,N=128,D=0,z=72;for(G=0;G<E.length;G++)(j=E[G])<128&&A.push(k(j));var $=A.length,B=$;for($&&A.push("-");B<O;){for(var F=d,G=0;G<E.length;G++)N<=(j=E[G])&&j<F&&(F=j);var W=B+1;if(F-N>C((d-D)/W))throw RangeError(w);for(D+=(F-N)*W,N=F,G=0;G<E.length;G++){if((j=E[G])<N&&++D>d)throw RangeError(w);if(j==N){for(var L=D,V=x;;V+=x){var Y=V<=z?1:z+S<=V?S:V-z;if(L<Y)break;var Z=L-Y,J=x-Y;A.push(k(u(Y+Z%J))),L=C(Z/J)}A.push(k(u(L))),z=function(ne,se,ie){var X=0;for(ne=ie?C(ne/y):ne>>1,ne+=C(ne/se);_*S>>1<ne;X+=x)ne=C(ne/_);return C(X+(_+1)*ne/(ne+m))}(D,W,B==$),D=0,++B}}++D,++N}return A.join("")}var d=2147483647,x=36,S=26,m=38,y=700,b=/[^\0-\u007E]/,g=/[.\u3002\uFF0E\uFF61]/g,w="Overflow: input needs wider integers to process",_=x-1,C=Math.floor,k=String.fromCharCode;h.exports=function(E){for(var j,A=[],O=E.toLowerCase().replace(g,".").split("."),N=0;N<O.length;N++)j=O[N],A.push(b.test(j)?"xn--"+l(j):j);return A.join(".")}},{}],127:[function(r,h,f){var u=r("../internals/to-integer"),l=r("../internals/require-object-coercible");h.exports="".repeat||function(d){var x=String(l(this)),S="",m=u(d);if(m<0||m==1/0)throw RangeError("Wrong number of repetitions");for(;0<m;(m>>>=1)&&(x+=x))1&m&&(S+=x);return S}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(r,h,f){var u=r("../internals/fails"),l=r("../internals/whitespaces");h.exports=function(d){return u(function(){return!!l[d]()||"​᠎"[d]()!="​᠎"||l[d].name!==d})}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(r,h,f){function u(S){return function(m){return m=String(l(m)),1&S&&(m=m.replace(d,"")),2&S?m.replace(x,""):m}}var l=r("../internals/require-object-coercible"),d=(r="["+r("../internals/whitespaces")+"]",RegExp("^"+r+r+"*")),x=RegExp(r+r+"*$");h.exports={start:u(1),end:u(2),trim:u(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(r,h,f){function u($){return function(){z($)}}function l($){z($.data)}function d($){S.postMessage($+"",_.protocol+"//"+_.host)}var x,S=r("../internals/global"),m=r("../internals/fails"),y=r("../internals/classof-raw"),b=r("../internals/function-bind-context"),g=r("../internals/html"),w=r("../internals/document-create-element"),_=(r=r("../internals/engine-is-ios"),S.location),C=S.setImmediate,k=S.clearImmediate,E=S.process,j=S.MessageChannel,A=S.Dispatch,O=0,N={},D="onreadystatechange",z=function($){var B;N.hasOwnProperty($)&&(B=N[$],delete N[$],B())};C&&k||(C=function($){for(var B=[],F=1;F<arguments.length;)B.push(arguments[F++]);return N[++O]=function(){(typeof $=="function"?$:Function($)).apply(void 0,B)},x(O),O},k=function($){delete N[$]},y(E)=="process"?x=function($){E.nextTick(u($))}:A&&A.now?x=function($){A.now(u($))}:j&&!r?(r=(y=new j).port2,y.port1.onmessage=l,x=b(r.postMessage,r,1)):!S.addEventListener||typeof postMessage!="function"||S.importScripts||m(d)||_.protocol==="file:"?x=D in w("script")?function($){g.appendChild(w("script"))[D]=function(){g.removeChild(this),z($)}}:function($){setTimeout(u($),0)}:(x=d,S.addEventListener("message",l,!1))),h.exports={set:C,clear:k}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(r,h,f){var u=r("../internals/classof-raw");h.exports=function(l){if(typeof l!="number"&&u(l)!="Number")throw TypeError("Incorrect invocation");return+l}},{"../internals/classof-raw":28}],132:[function(r,h,f){var u=r("../internals/to-integer"),l=Math.max,d=Math.min;h.exports=function(x,S){return(x=u(x))<0?l(x+S,0):d(x,S)}},{"../internals/to-integer":135}],133:[function(r,h,f){var u=r("../internals/to-integer"),l=r("../internals/to-length");h.exports=function(d){if(d===void 0)return 0;d=u(d);var x=l(d);if(d!==x)throw RangeError("Wrong length or index");return x}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(r,h,f){var u=r("../internals/indexed-object"),l=r("../internals/require-object-coercible");h.exports=function(d){return u(l(d))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(r,h,f){var u=Math.ceil,l=Math.floor;h.exports=function(d){return isNaN(d=+d)?0:(0<d?l:u)(d)}},{}],136:[function(r,h,f){var u=r("../internals/to-integer"),l=Math.min;h.exports=function(d){return 0<d?l(u(d),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(r,h,f){var u=r("../internals/require-object-coercible");h.exports=function(l){return Object(u(l))}},{"../internals/require-object-coercible":113}],138:[function(r,h,f){var u=r("../internals/to-positive-integer");h.exports=function(l,d){if((l=u(l))%d)throw RangeError("Wrong offset");return l}},{"../internals/to-positive-integer":139}],139:[function(r,h,f){var u=r("../internals/to-integer");h.exports=function(l){if((l=u(l))<0)throw RangeError("The argument can't be less than 0");return l}},{"../internals/to-integer":135}],140:[function(r,h,f){var u=r("../internals/is-object");h.exports=function(l,d){if(!u(l))return l;var x,S;if(d&&typeof(x=l.toString)=="function"&&!u(S=x.call(l))||typeof(x=l.valueOf)=="function"&&!u(S=x.call(l))||!d&&typeof(x=l.toString)=="function"&&!u(S=x.call(l)))return S;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(r,h,f){var u={};u[r("../internals/well-known-symbol")("toStringTag")]="z",h.exports=String(u)==="[object z]"},{"../internals/well-known-symbol":148}],142:[function(r,h,f){function u(st,gt){for(var pt=0,Lt=gt.length,_t=new(_e(st))(Lt);pt<Lt;)_t[pt]=gt[pt++];return _t}function l(st,gt){Q(st,gt,{get:function(){return ie(this)[gt]}})}function d(st){return st instanceof fe||(st=$(st))=="ArrayBuffer"||st=="SharedArrayBuffer"}function x(st,gt){return Me(st)&&typeof gt!="symbol"&&gt in st&&String(+gt)==String(gt)}function S(st,gt){return x(st,gt=D(gt,!0))?E(2,st[gt]):re(st,gt)}function m(st,gt,pt){return!(x(st,gt=D(gt,!0))&&B(pt)&&z(pt,"value"))||z(pt,"get")||z(pt,"set")||pt.configurable||z(pt,"writable")&&!pt.writable||z(pt,"enumerable")&&!pt.enumerable?Q(st,gt,pt):(st[gt]=pt.value,st)}var y=r("../internals/export"),b=r("../internals/global"),g=r("../internals/descriptors"),w=r("../internals/typed-array-constructors-require-wrappers"),_=r("../internals/array-buffer-view-core"),C=r("../internals/array-buffer"),k=r("../internals/an-instance"),E=r("../internals/create-property-descriptor"),j=r("../internals/create-non-enumerable-property"),A=r("../internals/to-length"),O=r("../internals/to-index"),N=r("../internals/to-offset"),D=r("../internals/to-primitive"),z=r("../internals/has"),$=r("../internals/classof"),B=r("../internals/is-object"),F=r("../internals/object-create"),G=r("../internals/object-set-prototype-of"),W=r("../internals/object-get-own-property-names").f,L=r("../internals/typed-array-from"),V=r("../internals/array-iteration").forEach,Y=r("../internals/set-species"),Z=r("../internals/object-define-property"),J=r("../internals/object-get-own-property-descriptor"),ne=r("../internals/internal-state"),se=r("../internals/inherit-if-required"),ie=ne.get,X=ne.set,Q=Z.f,re=J.f,ce=Math.round,he=b.RangeError,fe=C.ArrayBuffer,oe=C.DataView,me=_.NATIVE_ARRAY_BUFFER_VIEWS,we=_.TYPED_ARRAY_TAG,ke=_.TypedArray,ve=_.TypedArrayPrototype,_e=_.aTypedArrayConstructor,Me=_.isTypedArray,He="BYTES_PER_ELEMENT",ze="Wrong length";g?(me||(J.f=S,Z.f=m,l(ve,"buffer"),l(ve,"byteOffset"),l(ve,"byteLength"),l(ve,"length")),y({target:"Object",stat:!0,forced:!me},{getOwnPropertyDescriptor:S,defineProperty:m}),h.exports=function(st,gt,pt){function Lt(kt,Tt){Q(kt,Tt,{get:function(){var ue=this,le=Tt;return(ue=ie(ue)).view[We](le*_t+ue.byteOffset,!0)},set:function(ue){var le=this,de=Tt;le=ie(le),pt&&(ue=(ue=ce(ue))<0?0:255<ue?255:255&ue),le.view[Ve](de*_t+le.byteOffset,ue,!0)},enumerable:!0})}var _t=st.match(/\d+$/)[0]/8,xe=st+(pt?"Clamped":"")+"Array",We="get"+st,Ve="set"+st,dt=b[xe],Ct=dt,Ft=(st=Ct&&Ct.prototype,{});me?w&&(Ct=gt(function(kt,Tt,ue,le){return k(kt,Ct,xe),se(B(Tt)?d(Tt)?le!==void 0?new dt(Tt,N(ue,_t),le):ue!==void 0?new dt(Tt,N(ue,_t)):new dt(Tt):Me(Tt)?u(Ct,Tt):L.call(Ct,Tt):new dt(O(Tt)),kt,Ct)}),G&&G(Ct,ke),V(W(dt),function(kt){kt in Ct||j(Ct,kt,dt[kt])}),Ct.prototype=st):(Ct=gt(function(kt,Tt,ue,le){k(kt,Ct,xe);var de,be,Ae=0,Ze=0;if(B(Tt)){if(!d(Tt))return Me(Tt)?u(Ct,Tt):L.call(Ct,Tt);var yt=Tt;if(Ze=N(ue,_t),ue=Tt.byteLength,le===void 0){if(ue%_t||(de=ue-Ze)<0)throw he(ze)}else if(ue<(de=A(le)*_t)+Ze)throw he(ze);be=de/_t}else be=O(Tt),yt=new fe(de=be*_t);for(X(kt,{buffer:yt,byteOffset:Ze,byteLength:de,length:be,view:new oe(yt)});Ae<be;)Lt(kt,Ae++)}),G&&G(Ct,ke),st=Ct.prototype=F(ve)),st.constructor!==Ct&&j(st,"constructor",Ct),we&&j(st,we,xe),Ft[xe]=Ct,y({global:!0,forced:Ct!=dt,sham:!me},Ft),He in Ct||j(Ct,He,_t),He in st||j(st,He,_t),Y(xe)}):h.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(r,h,f){var u=r("../internals/global"),l=r("../internals/fails"),d=r("../internals/check-correctness-of-iteration"),x=(r=r("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,u.ArrayBuffer),S=u.Int8Array;h.exports=!r||!l(function(){S(1)})||!l(function(){new S(-1)})||!d(function(m){new S,new S(null),new S(1.5),new S(m)},!0)||l(function(){return new S(new x(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(r,h,f){var u=r("../internals/to-object"),l=r("../internals/to-length"),d=r("../internals/get-iterator-method"),x=r("../internals/is-array-iterator-method"),S=r("../internals/function-bind-context"),m=r("../internals/array-buffer-view-core").aTypedArrayConstructor;h.exports=function(y){var b,g,w,_,C,k,E=u(y),j=arguments.length,A=1<j?arguments[1]:void 0,O=A!==void 0,N=d(E);if(N!=null&&!x(N))for(k=(C=N.call(E)).next,E=[];!(_=k.call(C)).done;)E.push(_.value);for(O&&2<j&&(A=S(A,arguments[2],2)),g=l(E.length),w=new(m(this))(g),b=0;b<g;b++)w[b]=O?A(E[b],b):E[b];return w}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(r,h,f){var u=0,l=Math.random();h.exports=function(d){return"Symbol("+String(d===void 0?"":d)+")_"+(++u+l).toString(36)}},{}],146:[function(r,h,f){r=r("../internals/native-symbol"),h.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],147:[function(r,h,f){r=r("../internals/well-known-symbol"),f.f=r},{"../internals/well-known-symbol":148}],148:[function(r,h,f){var u=r("../internals/global"),l=r("../internals/shared"),d=r("../internals/has"),x=r("../internals/uid"),S=r("../internals/native-symbol"),m=(r=r("../internals/use-symbol-as-uid"),l("wks")),y=u.Symbol,b=r?y:y&&y.withoutSetter||x;h.exports=function(g){return d(m,g)||(S&&d(y,g)?m[g]=y[g]:m[g]=b("Symbol."+g)),m[g]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(r,h,f){h.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},{}],150:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/global"),d=r("../internals/array-buffer"),x=(r=r("../internals/set-species"),"ArrayBuffer");d=d[x],u({global:!0,forced:l[x]!==d},{ArrayBuffer:d}),r(x)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/fails"),d=r("../internals/is-array"),x=r("../internals/is-object"),S=r("../internals/to-object"),m=r("../internals/to-length"),y=r("../internals/create-property"),b=r("../internals/array-species-create"),g=r("../internals/array-method-has-species-support"),w=r("../internals/well-known-symbol"),_=(r=r("../internals/engine-v8-version"),w("isConcatSpreadable")),C=9007199254740991,k="Maximum allowed index exceeded";w=51<=r||!l(function(){var E=[];return E[_]=!1,E.concat()[0]!==E}),r=g("concat"),u({target:"Array",proto:!0,forced:!w||!r},{concat:function(E){for(var j,A,O,N,D,z=S(this),$=b(z,0),B=0,F=-1,G=arguments.length;F<G;F++)if(D=void 0,x(N=O=F===-1?z:arguments[F])&&((D=N[_])!==void 0?D:d(N))){if(A=m(O.length),C<B+A)throw TypeError(k);for(j=0;j<A;j++,B++)j in O&&y($,B,O[j])}else{if(C<=B)throw TypeError(k);y($,B++,O)}return $.length=B,$}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-copy-within");r=r("../internals/add-to-unscopables"),u({target:"Array",proto:!0},{copyWithin:l}),r("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-iteration").every,d=r("../internals/array-method-is-strict");r=r("../internals/array-method-uses-to-length"),d=d("every"),r=r("every"),u({target:"Array",proto:!0,forced:!d||!r},{every:function(x){return l(this,x,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-fill");r=r("../internals/add-to-unscopables"),u({target:"Array",proto:!0},{fill:l}),r("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-iteration").filter,d=r("../internals/array-method-has-species-support");r=r("../internals/array-method-uses-to-length"),d=d("filter"),r=r("filter"),u({target:"Array",proto:!0,forced:!d||!r},{filter:function(x){return l(this,x,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(r,h,f){var u=r("../internals/export");r=r("../internals/array-for-each"),u({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},{"../internals/array-for-each":16,"../internals/export":50}],157:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-from");u({target:"Array",stat:!0,forced:!r("../internals/check-correctness-of-iteration")(function(d){Array.from(d)})},{from:l})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],158:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-includes").includes,d=r("../internals/add-to-unscopables");u({target:"Array",proto:!0,forced:!r("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(x){return l(this,x,1<arguments.length?arguments[1]:void 0)}}),d("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-includes").indexOf,d=r("../internals/array-method-is-strict"),x=(r=r("../internals/array-method-uses-to-length"),[].indexOf),S=!!x&&1/[1].indexOf(1,-0)<0;d=d("indexOf"),r=r("indexOf",{ACCESSORS:!0,1:0}),u({target:"Array",proto:!0,forced:S||!d||!r},{indexOf:function(m){return S?x.apply(this,arguments)||0:l(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(r,h,f){var u=r("../internals/to-indexed-object"),l=r("../internals/add-to-unscopables"),d=r("../internals/iterators"),x=r("../internals/internal-state"),S=(r=r("../internals/define-iterator"),"Array Iterator"),m=x.set,y=x.getterFor(S);h.exports=r(Array,"Array",function(b,g){m(this,{type:S,target:u(b),index:0,kind:g})},function(){var b=y(this),g=b.target,w=b.kind,_=b.index++;return!g||_>=g.length?{value:b.target=void 0,done:!0}:w=="keys"?{value:_,done:!1}:w=="values"?{value:g[_],done:!1}:{value:[_,g[_]],done:!1}},"values"),d.Arguments=d.Array,l("keys"),l("values"),l("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],161:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/indexed-object"),d=r("../internals/to-indexed-object"),x=(r=r("../internals/array-method-is-strict"),[].join);l=l!=Object,r=r("join",","),u({target:"Array",proto:!0,forced:l||!r},{join:function(S){return x.call(d(this),S===void 0?",":S)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],162:[function(r,h,f){r("../internals/export")({target:"Array",proto:!0,forced:(r=r("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:r})},{"../internals/array-last-index-of":20,"../internals/export":50}],163:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-iteration").map,d=r("../internals/array-method-has-species-support");r=r("../internals/array-method-uses-to-length"),d=d("map"),r=r("map"),u({target:"Array",proto:!0,forced:!d||!r},{map:function(x){return l(this,x,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/is-object"),d=r("../internals/is-array"),x=r("../internals/to-absolute-index"),S=r("../internals/to-length"),m=r("../internals/to-indexed-object"),y=r("../internals/create-property"),b=r("../internals/well-known-symbol"),g=r("../internals/array-method-has-species-support"),w=(r=r("../internals/array-method-uses-to-length"),g=g("slice"),r=r("slice",{ACCESSORS:!0,0:0,1:2}),b("species")),_=[].slice,C=Math.max;u({target:"Array",proto:!0,forced:!g||!r},{slice:function(k,E){var j,A,O,N=m(this),D=S(N.length),z=x(k,D),$=x(E===void 0?D:E,D);if(d(N)&&((j=typeof(j=N.constructor)=="function"&&(j===Array||d(j.prototype))||l(j)&&(j=j[w])===null?void 0:j)===Array||j===void 0))return _.call(N,z,$);for(A=new(j===void 0?Array:j)(C($-z,0)),O=0;z<$;z++,O++)z in N&&y(A,O,N[z]);return A.length=O,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],165:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/array-iteration").some,d=r("../internals/array-method-is-strict");r=r("../internals/array-method-uses-to-length"),d=d("some"),r=r("some"),u({target:"Array",proto:!0,forced:!d||!r},{some:function(x){return l(this,x,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],166:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/to-absolute-index"),d=r("../internals/to-integer"),x=r("../internals/to-length"),S=r("../internals/to-object"),m=r("../internals/array-species-create"),y=r("../internals/create-property"),b=r("../internals/array-method-has-species-support"),g=(r=r("../internals/array-method-uses-to-length"),b=b("splice"),r=r("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),w=Math.min;u({target:"Array",proto:!0,forced:!b||!r},{splice:function(_,C){var k,E,j,A,O,N,D=S(this),z=x(D.length),$=l(_,z);if((_=arguments.length)===0?k=E=0:E=_===1?(k=0,z-$):(k=_-2,w(g(d(C),0),z-$)),9007199254740991<z+k-E)throw TypeError("Maximum allowed length exceeded");for(j=m(D,E),A=0;A<E;A++)(O=$+A)in D&&y(j,A,D[O]);if(k<(j.length=E)){for(A=$;A<z-E;A++)N=A+k,(O=A+E)in D?D[N]=D[O]:delete D[N];for(A=z;z-E+k<A;A--)delete D[A-1]}else if(E<k)for(A=z-E;$<A;A--)N=A+k-1,(O=A+E-1)in D?D[N]=D[O]:delete D[N];for(A=0;A<k;A++)D[A+$]=arguments[A+2];return D.length=z-E+k,j}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],167:[function(r,h,f){var u=r("../internals/descriptors"),l=(r=r("../internals/object-define-property").f,Function.prototype),d=l.toString,x=/^\s*function ([^ (]*)/;!u||"name"in l||r(l,"name",{configurable:!0,get:function(){try{return d.call(this).match(x)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],168:[function(r,h,f){var u=r("../internals/collection");r=r("../internals/collection-strong"),h.exports=u("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},r)},{"../internals/collection":32,"../internals/collection-strong":30}],169:[function(r,h,f){r=r("../internals/export");var u=Math.hypot,l=Math.abs,d=Math.sqrt;r({target:"Math",stat:!0,forced:!!u&&u(1/0,NaN)!==1/0},{hypot:function(x,S){for(var m,y,b=0,g=0,w=arguments.length,_=0;g<w;)_<(m=l(arguments[g++]))?(b=b*(y=_/m)*y+1,_=m):b+=0<m?(y=m/_)*y:m;return _===1/0?1/0:_*d(b)}})},{"../internals/export":50}],170:[function(r,h,f){r("../internals/export")({target:"Math",stat:!0},{sign:r("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],171:[function(r,h,f){function u(G){var W,L,V,Y,Z,J,ne,se=g(G,!1);if(typeof se=="string"&&2<se.length){if((G=(se=j(se)).charCodeAt(0))===43||G===45){if((W=se.charCodeAt(2))===88||W===120)return NaN}else if(G===48){switch(se.charCodeAt(1)){case 66:case 98:L=2,V=49;break;case 79:case 111:L=8,V=55;break;default:return+se}for(Z=(Y=se.slice(2)).length,J=0;J<Z;J++)if((ne=Y.charCodeAt(J))<48||V<ne)return NaN;return parseInt(Y,L)}}return+se}var l=r("../internals/descriptors"),d=r("../internals/global"),x=r("../internals/is-forced"),S=r("../internals/redefine"),m=r("../internals/has"),y=r("../internals/classof-raw"),b=r("../internals/inherit-if-required"),g=r("../internals/to-primitive"),w=r("../internals/fails"),_=r("../internals/object-create"),C=r("../internals/object-get-own-property-names").f,k=r("../internals/object-get-own-property-descriptor").f,E=r("../internals/object-define-property").f,j=r("../internals/string-trim").trim,A="Number",O=d[A],N=O.prototype,D=y(_(N))==A;if(x(A,!O(" 0o1")||!O("0b1")||O("+0x1"))){for(var z,$=function(G){G=arguments.length<1?0:G;var W=this;return W instanceof $&&(D?w(function(){N.valueOf.call(W)}):y(W)!=A)?b(new O(u(G)),W,$):u(G)},B=l?C(O):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),F=0;B.length>F;F++)m(O,z=B[F])&&!m($,z)&&E($,z,k(O,z));($.prototype=N).constructor=$,S(d,A,$)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],172:[function(r,h,f){r("../internals/export")({target:"Number",stat:!0},{isFinite:r("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],173:[function(r,h,f){function u(b,g,w){return g===0?w:g%2==1?u(b,g-1,w*b):u(b*b,g/2,w)}var l=r("../internals/export"),d=r("../internals/to-integer"),x=r("../internals/this-number-value"),S=r("../internals/string-repeat"),m=(r=r("../internals/fails"),1 .toFixed),y=Math.floor;l({target:"Number",proto:!0,forced:m&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!r(function(){m.call({})})},{toFixed:function(b){function g(N,D){for(var z=-1,$=D;++z<6;)$+=N*j[z],j[z]=$%1e7,$=y($/1e7)}function w(N){for(var D=6,z=0;0<=--D;)z+=j[D],j[D]=y(z/N),z=z%N*1e7}function _(){for(var N,D=6,z="";0<=--D;)z===""&&D!==0&&j[D]===0||(N=String(j[D]),z=z===""?N:z+S.call("0",7-N.length)+N);return z}var C,k,E=x(this),j=(b=d(b),[0,0,0,0,0,0]),A="",O="0";if(b<0||20<b)throw RangeError("Incorrect fraction digits");if(E!=E)return"NaN";if(E<=-1e21||1e21<=E)return String(E);if(E<0&&(A="-",E=-E),1e-21<E)if(E=(C=function(N){for(var D=0,z=N;4096<=z;)D+=12,z/=4096;for(;2<=z;)D+=1,z/=2;return D}(E*u(2,69,1))-69)<0?E*u(2,-C,1):E/u(2,C,1),E*=4503599627370496,0<(C=52-C)){for(g(0,E),k=b;7<=k;)g(1e7,0),k-=7;for(g(u(10,k,1),0),k=C-1;23<=k;)w(1<<23),k-=23;w(1<<k),g(1,1),w(2),O=_()}else g(0,E),g(1<<-C,0),O=_()+S.call("0",b);return 0<b?A+((E=O.length)<=b?"0."+S.call("0",b-E)+O:O.slice(0,E-b)+"."+O.slice(E-b)):A+O}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],174:[function(r,h,f){var u=r("../internals/export");r=r("../internals/object-assign"),u({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},{"../internals/export":50,"../internals/object-assign":89}],175:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/iterate"),d=r("../internals/create-property");u({target:"Object",stat:!0},{fromEntries:function(x){var S={};return l(x,function(m,y){d(S,m,y)},void 0,!0),S}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],176:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/fails"),d=r("../internals/to-indexed-object"),x=r("../internals/object-get-own-property-descriptor").f;r=r("../internals/descriptors"),l=l(function(){x(1)}),u({target:"Object",stat:!0,forced:!r||l,sham:!r},{getOwnPropertyDescriptor:function(S,m){return x(d(S),m)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],177:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/fails");r=r("../internals/object-get-own-property-names-external").f,u({target:"Object",stat:!0,forced:l(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:r})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],178:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/fails"),d=r("../internals/to-object"),x=r("../internals/object-get-prototype-of");r=r("../internals/correct-prototype-getter"),u({target:"Object",stat:!0,forced:l(function(){x(1)}),sham:!r},{getPrototypeOf:function(S){return x(d(S))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],179:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/to-object"),d=r("../internals/object-keys");u({target:"Object",stat:!0,forced:r("../internals/fails")(function(){d(1)})},{keys:function(x){return d(l(x))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],180:[function(r,h,f){var u=r("../internals/to-string-tag-support"),l=r("../internals/redefine");r=r("../internals/object-to-string"),u||l(Object.prototype,"toString",r,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],181:[function(r,h,f){var u,l,d,x,S=r("../internals/export"),m=r("../internals/is-pure"),y=r("../internals/global"),b=r("../internals/get-built-in"),g=r("../internals/native-promise-constructor"),w=r("../internals/redefine"),_=r("../internals/redefine-all"),C=r("../internals/set-to-string-tag"),k=r("../internals/set-species"),E=r("../internals/is-object"),j=r("../internals/a-function"),A=r("../internals/an-instance"),O=r("../internals/classof-raw"),N=r("../internals/inspect-source"),D=r("../internals/iterate"),z=r("../internals/check-correctness-of-iteration"),$=r("../internals/species-constructor"),B=r("../internals/task").set,F=r("../internals/microtask"),G=r("../internals/promise-resolve"),W=r("../internals/host-report-errors"),L=r("../internals/new-promise-capability"),V=r("../internals/perform"),Y=r("../internals/internal-state"),Z=r("../internals/is-forced"),J=r("../internals/well-known-symbol"),ne=r("../internals/engine-v8-version"),se=J("species"),ie="Promise",X=Y.get,Q=Y.set,re=Y.getterFor(ie),ce=g,he=y.TypeError,fe=y.document,oe=y.process,me=b("fetch"),we=L.f,ke=we,ve=O(oe)=="process",_e=!!(fe&&fe.createEvent&&y.dispatchEvent),Me="unhandledrejection",He=(J=(r=Z(ie,function(){var xe,We;return N(ce)===String(ce)&&(ne===66||!ve&&typeof PromiseRejectionEvent!="function")?!0:!((!m||ce.prototype.finally)&&(51<=ne&&/native code/.test(ce)||(We=function(Ve){Ve(function(){},function(){})},((xe=ce.resolve(1)).constructor={})[se]=We,xe.then(function(){})instanceof We)))}))||!z(function(xe){ce.all(xe).catch(function(){})}),function(xe){var We;return!(!E(xe)||typeof(We=xe.then)!="function")&&We}),ze=function(xe,We,Ve){var dt;We.notified||(We.notified=!0,dt=We.reactions,F(function(){for(var Ct,Ft,kt=We.value,Tt=We.state==1,ue=0;dt.length>ue;){var le,de,be,Ae=dt[ue++],Ze=Tt?Ae.ok:Ae.fail,yt=Ae.resolve,ht=Ae.reject,De=Ae.domain;try{Ze?(Tt||(We.rejection===2&&function(wt,At){B.call(y,function(){ve?oe.emit("rejectionHandled",wt):st("rejectionhandled",wt,At.value)})}(xe,We),We.rejection=1),Ze===!0?le=kt:(De&&De.enter(),le=Ze(kt),De&&(De.exit(),be=!0)),le===Ae.promise?ht(he("Promise-chain cycle")):(de=He(le))?de.call(le,yt,ht):yt(le)):ht(kt)}catch(wt){De&&!be&&De.exit(),ht(wt)}}We.reactions=[],We.notified=!1,Ve&&!We.rejection&&(Ct=xe,Ft=We,B.call(y,function(){var wt=Ft.value,At=gt(Ft);if(At&&(At=V(function(){ve?oe.emit("unhandledRejection",wt,Ct):st(Me,Ct,wt)}),Ft.rejection=ve||gt(Ft)?2:1,At.error))throw At.value}))}))},st=function(xe,We,Ve){var dt;_e?((dt=fe.createEvent("Event")).promise=We,dt.reason=Ve,dt.initEvent(xe,!1,!0),y.dispatchEvent(dt)):dt={promise:We,reason:Ve},(We=y["on"+xe])?We(dt):xe===Me&&W("Unhandled promise rejection",Ve)},gt=function(xe){return xe.rejection!==1&&!xe.parent},pt=function(xe,We,Ve,dt){return function(Ct){xe(We,Ve,Ct,dt)}},Lt=function(xe,We,Ve,dt){We.done||(We.done=!0,(We=dt||We).value=Ve,We.state=2,ze(xe,We,!0))},_t=function(xe,We,Ve,dt){if(!We.done){We.done=!0,dt&&(We=dt);try{if(xe===Ve)throw he("Promise can't be resolved itself");var Ct=He(Ve);Ct?F(function(){var Ft={done:!1};try{Ct.call(Ve,pt(_t,xe,Ft,We),pt(Lt,xe,Ft,We))}catch(kt){Lt(xe,Ft,kt,We)}}):(We.value=Ve,We.state=1,ze(xe,We,!1))}catch(Ft){Lt(xe,{done:!1},Ft,We)}}};r&&(ce=function(xe){A(this,ce,ie),j(xe),u.call(this);var We=X(this);try{xe(pt(_t,this,We),pt(Lt,this,We))}catch(Ve){Lt(this,We,Ve)}},(u=function(xe){Q(this,{type:ie,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_(ce.prototype,{then:function(xe,We){var Ve=re(this),dt=we($(this,ce));return dt.ok=typeof xe!="function"||xe,dt.fail=typeof We=="function"&&We,dt.domain=ve?oe.domain:void 0,Ve.parent=!0,Ve.reactions.push(dt),Ve.state!=0&&ze(this,Ve,!1),dt.promise},catch:function(xe){return this.then(void 0,xe)}}),l=function(){var xe=new u,We=X(xe);this.promise=xe,this.resolve=pt(_t,xe,We),this.reject=pt(Lt,xe,We)},L.f=we=function(xe){return xe===ce||xe===d?new l:ke(xe)},m||typeof g!="function"||(x=g.prototype.then,w(g.prototype,"then",function(xe,We){var Ve=this;return new ce(function(dt,Ct){x.call(Ve,dt,Ct)}).then(xe,We)},{unsafe:!0}),typeof me=="function"&&S({global:!0,enumerable:!0,forced:!0},{fetch:function(xe){return G(ce,me.apply(y,arguments))}}))),S({global:!0,wrap:!0,forced:r},{Promise:ce}),C(ce,ie,!1,!0),k(ie),d=b(ie),S({target:ie,stat:!0,forced:r},{reject:function(xe){var We=we(this);return We.reject.call(void 0,xe),We.promise}}),S({target:ie,stat:!0,forced:m||r},{resolve:function(xe){return G(m&&this===d?ce:this,xe)}}),S({target:ie,stat:!0,forced:J},{all:function(xe){var We=this,Ve=we(We),dt=Ve.resolve,Ct=Ve.reject,Ft=V(function(){var kt=j(We.resolve),Tt=[],ue=0,le=1;D(xe,function(de){var be=ue++,Ae=!1;Tt.push(void 0),le++,kt.call(We,de).then(function(Ze){Ae||(Ae=!0,Tt[be]=Ze,--le||dt(Tt))},Ct)}),--le||dt(Tt)});return Ft.error&&Ct(Ft.value),Ve.promise},race:function(xe){var We=this,Ve=we(We),dt=Ve.reject,Ct=V(function(){var Ft=j(We.resolve);D(xe,function(kt){Ft.call(We,kt).then(Ve.resolve,dt)})});return Ct.error&&dt(Ct.value),Ve.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],182:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/get-built-in"),d=r("../internals/a-function"),x=r("../internals/an-object"),S=r("../internals/is-object"),m=r("../internals/object-create"),y=r("../internals/function-bind"),b=(r=r("../internals/fails"),l("Reflect","construct")),g=r(function(){function _(){}return!(b(function(){},[],_)instanceof _)}),w=!r(function(){b(function(){})});u({target:"Reflect",stat:!0,forced:l=g||w,sham:l},{construct:function(_,C){d(_),x(C);var k=arguments.length<3?_:d(arguments[2]);if(w&&!g)return b(_,C,k);if(_==k){switch(C.length){case 0:return new _;case 1:return new _(C[0]);case 2:return new _(C[0],C[1]);case 3:return new _(C[0],C[1],C[2]);case 4:return new _(C[0],C[1],C[2],C[3])}var E=[null];return E.push.apply(E,C),new(y.apply(_,E))}return E=k.prototype,k=m(S(E)?E:Object.prototype),E=Function.apply.call(_,k,C),S(E)?E:k}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],183:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/is-object"),d=r("../internals/an-object"),x=r("../internals/has"),S=r("../internals/object-get-own-property-descriptor"),m=r("../internals/object-get-prototype-of");u({target:"Reflect",stat:!0},{get:function y(b,g){var w,_=arguments.length<3?b:arguments[2];return d(b)===_?b[g]:(w=S.f(b,g))?x(w,"value")?w.value:w.get===void 0?void 0:w.get.call(_):l(w=m(b))?y(w,g,_):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],184:[function(r,h,f){var u=r("../internals/descriptors"),l=r("../internals/global"),d=r("../internals/is-forced"),x=r("../internals/inherit-if-required"),S=r("../internals/object-define-property").f,m=r("../internals/object-get-own-property-names").f,y=r("../internals/is-regexp"),b=r("../internals/regexp-flags"),g=r("../internals/regexp-sticky-helpers"),w=r("../internals/redefine"),_=r("../internals/fails"),C=r("../internals/internal-state").set,k=r("../internals/set-species"),E=r("../internals/well-known-symbol")("match"),j=l.RegExp,A=j.prototype,O=/a/g,N=/a/g,D=new j(O)!==O,z=g.UNSUPPORTED_Y;if(u&&d("RegExp",!D||z||_(function(){return N[E]=!1,j(O)!=O||j(N)==N||j(O,"i")!="/a/i"}))){for(var $=function(G,W){var L,V=this instanceof $,Y=y(G),Z=W===void 0;return!V&&Y&&G.constructor===$&&Z?G:(D?Y&&!Z&&(G=G.source):G instanceof $&&(Z&&(W=b.call(G)),G=G.source),z&&(L=!!W&&-1<W.indexOf("y"))&&(W=W.replace(/y/g,"")),Y=x(D?new j(G,W):j(G,W),V?this:A,$),z&&L&&C(Y,{sticky:L}),Y)},B=m(j),F=0;B.length>F;)(function(G){G in $||S($,G,{configurable:!0,get:function(){return j[G]},set:function(W){j[G]=W}})})(B[F++]);(A.constructor=$).prototype=A,w(l,"RegExp",$)}k("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],185:[function(r,h,f){var u=r("../internals/export");r=r("../internals/regexp-exec"),u({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},{"../internals/export":50,"../internals/regexp-exec":110}],186:[function(r,h,f){var u=r("../internals/redefine"),l=r("../internals/an-object"),d=r("../internals/fails"),x=r("../internals/regexp-flags"),S=(r="toString",RegExp.prototype),m=S[r],y=(d=d(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),m.name!=r);(d||y)&&u(RegExp.prototype,r,function(){var b=l(this),g=String(b.source),w=b.flags;return"/"+g+"/"+String(w===void 0&&b instanceof RegExp&&!("flags"in S)?x.call(b):w)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],187:[function(r,h,f){var u=r("../internals/collection");r=r("../internals/collection-strong"),h.exports=u("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},r)},{"../internals/collection":32,"../internals/collection-strong":30}],188:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/object-get-own-property-descriptor").f,d=r("../internals/to-length"),x=r("../internals/not-a-regexp"),S=r("../internals/require-object-coercible"),m=r("../internals/correct-is-regexp-logic"),y=(r=r("../internals/is-pure"),"".endsWith),b=Math.min;m=m("endsWith"),u({target:"String",proto:!0,forced:!(!r&&!m&&(u=l(String.prototype,"endsWith"))&&!u.writable||m)},{endsWith:function(g){var w=String(S(this)),_=(x(g),1<arguments.length?arguments[1]:void 0),C=d(w.length);return _=_===void 0?C:b(d(_),C),C=String(g),y?y.call(w,C,_):w.slice(_-C.length,_)===C}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],189:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/not-a-regexp"),d=r("../internals/require-object-coercible");u({target:"String",proto:!0,forced:!r("../internals/correct-is-regexp-logic")("includes")},{includes:function(x){return!!~String(d(this)).indexOf(l(x),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],190:[function(r,h,f){var u=r("../internals/string-multibyte").charAt,l=r("../internals/internal-state"),d=(r=r("../internals/define-iterator"),"String Iterator"),x=l.set,S=l.getterFor(d);r(String,"String",function(m){x(this,{type:d,string:String(m),index:0})},function(){var m=S(this),y=m.string,b=m.index;return b>=y.length?{value:void 0,done:!0}:(y=u(y,b),m.index+=y.length,{value:y,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],191:[function(r,h,f){var u=r("../internals/fix-regexp-well-known-symbol-logic"),l=r("../internals/an-object"),d=r("../internals/to-length"),x=r("../internals/require-object-coercible"),S=r("../internals/advance-string-index"),m=r("../internals/regexp-exec-abstract");u("match",1,function(y,b,g){return[function(w){var _=x(this),C=w==null?void 0:w[y];return C!==void 0?C.call(w,_):new RegExp(w)[y](String(_))},function(w){var _=g(b,w,this);if(_.done)return _.value;var C=l(w),k=String(this);if(!C.global)return m(C,k);for(var E=C.unicode,j=[],A=C.lastIndex=0;(O=m(C,k))!==null;){var O=String(O[0]);(j[A]=O)===""&&(C.lastIndex=S(k,d(C.lastIndex),E)),A++}return A===0?null:j}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],192:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/string-pad").start;u({target:"String",proto:!0,forced:r("../internals/string-pad-webkit-bug")},{padStart:function(d){return l(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],193:[function(r,h,f){r("../internals/export")({target:"String",proto:!0},{repeat:r("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],194:[function(r,h,f){var u=r("../internals/fix-regexp-well-known-symbol-logic"),l=r("../internals/an-object"),d=r("../internals/to-object"),x=r("../internals/to-length"),S=r("../internals/to-integer"),m=r("../internals/require-object-coercible"),y=r("../internals/advance-string-index"),b=r("../internals/regexp-exec-abstract"),g=Math.max,w=Math.min,_=Math.floor,C=/\$([$&'`]|\d\d?|<[^>]*>)/g,k=/\$([$&'`]|\d\d?)/g;u("replace",2,function(E,j,A,O){var N=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,D=O.REPLACE_KEEPS_$0,z=N?"$":"$0";return[function($,B){var F=m(this),G=$==null?void 0:$[E];return G!==void 0?G.call($,F,B):j.call(String(F),$,B)},function($,B){if(!N&&D||typeof B=="string"&&B.indexOf(z)===-1){var F=A(j,$,this,B);if(F.done)return F.value}for(var G,W=l($),L=String(this),V=typeof B=="function",Y=(V||(B=String(B)),W.global),Z=(Y&&(G=W.unicode,W.lastIndex=0),[]);(X=b(W,L))!==null&&(Z.push(X),Y);)String(X[0])===""&&(W.lastIndex=y(L,x(W.lastIndex),G));for(var J,ne="",se=0,ie=0;ie<Z.length;ie++){for(var X=Z[ie],Q=String(X[0]),re=g(w(S(X.index),L.length),0),ce=[],he=1;he<X.length;he++)ce.push((J=X[he])===void 0?J:String(J));var fe=X.groups,oe=V?(oe=[Q].concat(ce,re,L),fe!==void 0&&oe.push(fe),String(B.apply(void 0,oe))):function(me,we,ke,ve,_e,Me){var He=ke+me.length,ze=ve.length,st=k;return _e!==void 0&&(_e=d(_e),st=C),j.call(Me,st,function(gt,pt){var Lt;switch(pt.charAt(0)){case"$":return"$";case"&":return me;case"`":return we.slice(0,ke);case"'":return we.slice(He);case"<":Lt=_e[pt.slice(1,-1)];break;default:var _t,xe=+pt;if(xe==0)return gt;if(ze<xe)return(_t=_(xe/10))!==0&&_t<=ze?ve[_t-1]===void 0?pt.charAt(1):ve[_t-1]+pt.charAt(1):gt;Lt=ve[xe-1]}return Lt===void 0?"":Lt})}(Q,L,re,ce,fe,B);se<=re&&(ne+=L.slice(se,re)+oe,se=re+Q.length)}return ne+L.slice(se)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],195:[function(r,h,f){var u=r("../internals/fix-regexp-well-known-symbol-logic"),l=r("../internals/an-object"),d=r("../internals/require-object-coercible"),x=r("../internals/same-value"),S=r("../internals/regexp-exec-abstract");u("search",1,function(m,y,b){return[function(g){var w=d(this),_=g==null?void 0:g[m];return _!==void 0?_.call(g,w):new RegExp(g)[m](String(w))},function(g){var w,_=b(y,g,this);return _.done?_.value:(_=l(g),g=String(this),w=_.lastIndex,x(w,0)||(_.lastIndex=0),g=S(_,g),x(_.lastIndex,w)||(_.lastIndex=w),g===null?-1:g.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],196:[function(r,h,f){var u=r("../internals/fix-regexp-well-known-symbol-logic"),l=r("../internals/is-regexp"),d=r("../internals/an-object"),x=r("../internals/require-object-coercible"),S=r("../internals/species-constructor"),m=r("../internals/advance-string-index"),y=r("../internals/to-length"),b=r("../internals/regexp-exec-abstract"),g=r("../internals/regexp-exec"),w=(r=r("../internals/fails"),[].push),_=Math.min,C=4294967295,k=!r(function(){return!RegExp(C,"y")});u("split",2,function(E,j,A){var O="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(N,D){var z=String(x(this)),$=D===void 0?C:D>>>0;if($==0)return[];if(N===void 0)return[z];if(!l(N))return j.call(z,N,$);for(var B,F,G,W=[],L=(D=(N.ignoreCase?"i":"")+(N.multiline?"m":"")+(N.unicode?"u":"")+(N.sticky?"y":""),0),V=new RegExp(N.source,D+"g");(B=g.call(V,z))&&!(L<(F=V.lastIndex)&&(W.push(z.slice(L,B.index)),1<B.length&&B.index<z.length&&w.apply(W,B.slice(1)),G=B[0].length,L=F,W.length>=$));)V.lastIndex===B.index&&V.lastIndex++;return L===z.length?!G&&V.test("")||W.push(""):W.push(z.slice(L)),W.length>$?W.slice(0,$):W}:"0".split(void 0,0).length?function(N,D){return N===void 0&&D===0?[]:j.call(this,N,D)}:j;return[function(N,D){var z=x(this),$=N==null?void 0:N[E];return $!==void 0?$.call(N,z,D):O.call(String(z),N,D)},function(N,D){if((z=A(O,N,this,D,O!==j)).done)return z.value;var z=d(N),$=String(this),B=(N=S(z,RegExp),z.unicode),F=(z.ignoreCase?"i":"")+(z.multiline?"m":"")+(z.unicode?"u":"")+(k?"y":"g"),G=new N(k?z:"^(?:"+z.source+")",F),W=D===void 0?C:D>>>0;if(W==0)return[];if($.length===0)return b(G,$)===null?[$]:[];for(var L=0,V=0,Y=[];V<$.length;){G.lastIndex=k?V:0;var Z,J=b(G,k?$:$.slice(V));if(J===null||(Z=_(y(G.lastIndex+(k?0:V)),$.length))===L)V=m($,V,B);else{if(Y.push($.slice(L,V)),Y.length===W)return Y;for(var ne=1;ne<=J.length-1;ne++)if(Y.push(J[ne]),Y.length===W)return Y;V=L=Z}}return Y.push($.slice(L)),Y}]},!k)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],197:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/object-get-own-property-descriptor").f,d=r("../internals/to-length"),x=r("../internals/not-a-regexp"),S=r("../internals/require-object-coercible"),m=r("../internals/correct-is-regexp-logic"),y=(r=r("../internals/is-pure"),"".startsWith),b=Math.min;m=m("startsWith"),u({target:"String",proto:!0,forced:!(!r&&!m&&(u=l(String.prototype,"startsWith"))&&!u.writable||m)},{startsWith:function(g){var w=String(S(this)),_=(x(g),d(b(1<arguments.length?arguments[1]:void 0,w.length)));return g=String(g),y?y.call(w,g,_):w.slice(_,_+g.length)===g}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],198:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/create-html");u({target:"String",proto:!0,forced:r("../internals/string-html-forced")("sub")},{sub:function(){return l(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],199:[function(r,h,f){var u=r("../internals/export"),l=r("../internals/string-trim").trim;u({target:"String",proto:!0,forced:r("../internals/string-trim-forced")("trim")},{trim:function(){return l(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],200:[function(r,h,f){var u,l,d,x,S,m=r("../internals/export"),y=r("../internals/descriptors"),b=r("../internals/global"),g=r("../internals/has"),w=r("../internals/is-object"),_=r("../internals/object-define-property").f,C=(r=r("../internals/copy-constructor-properties"),b.Symbol);!y||typeof C!="function"||"description"in C.prototype&&C().description===void 0||(u={},r(l=function(){var k=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),E=this instanceof l?new C(k):k===void 0?C():C(k);return k===""&&(u[E]=!0),E},C),(b=l.prototype=C.prototype).constructor=l,d=b.toString,x=String(C("test"))=="Symbol(test)",S=/^Symbol\((.*)\)[^)]+$/,_(b,"description",{configurable:!0,get:function(){var k=w(this)?this.valueOf():this,E=d.call(k);return g(u,k)?"":(k=x?E.slice(7,-1):E.replace(S,"$1"))===""?void 0:k}}),m({global:!0,forced:!0},{Symbol:l}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],201:[function(r,h,f){r("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],202:[function(r,h,f){function u(le,de){var be=_t[le]=$(He[ke]);return ve(be,{type:we,tag:le,description:de}),g||(be.description=de),be}function l(le,de){A(le);var be=N(de);return de=B(be).concat(ue(be)),oe(de,function(Ae){g&&!Tt.call(be,Ae)||kt(le,Ae,be[Ae])}),le}function d(le,de){var be;if(le=N(le),de=D(de,!0),le!==Me||!k(_t,de)||k(xe,de))return!(be=st(le,de))||!k(_t,de)||k(le,me)&&le[me][de]||(be.enumerable=!0),be}function x(le){le=pt(N(le));var de=[];return oe(le,function(be){k(_t,be)||k(ie,be)||de.push(be)}),de}var S=r("../internals/export"),m=r("../internals/global"),y=r("../internals/get-built-in"),b=r("../internals/is-pure"),g=r("../internals/descriptors"),w=r("../internals/native-symbol"),_=r("../internals/use-symbol-as-uid"),C=r("../internals/fails"),k=r("../internals/has"),E=r("../internals/is-array"),j=r("../internals/is-object"),A=r("../internals/an-object"),O=r("../internals/to-object"),N=r("../internals/to-indexed-object"),D=r("../internals/to-primitive"),z=r("../internals/create-property-descriptor"),$=r("../internals/object-create"),B=r("../internals/object-keys"),F=r("../internals/object-get-own-property-names"),G=r("../internals/object-get-own-property-names-external"),W=r("../internals/object-get-own-property-symbols"),L=r("../internals/object-get-own-property-descriptor"),V=r("../internals/object-define-property"),Y=r("../internals/object-property-is-enumerable"),Z=r("../internals/create-non-enumerable-property"),J=r("../internals/redefine"),ne=r("../internals/shared"),se=r("../internals/shared-key"),ie=r("../internals/hidden-keys"),X=r("../internals/uid"),Q=r("../internals/well-known-symbol"),re=r("../internals/well-known-symbol-wrapped"),ce=r("../internals/define-well-known-symbol"),he=r("../internals/set-to-string-tag"),fe=r("../internals/internal-state"),oe=r("../internals/array-iteration").forEach,me=se("hidden"),we="Symbol",ke="prototype",ve=(r=Q("toPrimitive"),fe.set),_e=fe.getterFor(we),Me=Object[ke],He=m.Symbol,ze=y("JSON","stringify"),st=L.f,gt=V.f,pt=G.f,Lt=Y.f,_t=ne("symbols"),xe=ne("op-symbols"),We=ne("string-to-symbol-registry"),Ve=ne("symbol-to-string-registry"),dt=(se=ne("wks"),!(fe=m.QObject)||!fe[ke]||!fe[ke].findChild),Ct=g&&C(function(){return $(gt({},"a",{get:function(){return gt(this,"a",{value:7}).a}})).a!=7})?function(le,de,be){var Ae=st(Me,de);Ae&&delete Me[de],gt(le,de,be),Ae&&le!==Me&&gt(Me,de,Ae)}:gt,Ft=_?function(le){return typeof le=="symbol"}:function(le){return Object(le)instanceof He},kt=function(le,de,be){return le===Me&&kt(xe,de,be),A(le),de=D(de,!0),A(be),(k(_t,de)?(be.enumerable?(k(le,me)&&le[me][de]&&(le[me][de]=!1),be=$(be,{enumerable:z(0,!1)})):(k(le,me)||gt(le,me,z(1,{})),le[me][de]=!0),Ct):gt)(le,de,be)},Tt=function(le){le=D(le,!0);var de=Lt.call(this,le);return!(this===Me&&k(_t,le)&&!k(xe,le))&&(!(de||!k(this,le)||!k(_t,le)||k(this,me)&&this[me][le])||de)},ue=function(le){var de=le===Me,be=(le=pt(de?xe:N(le)),[]);return oe(le,function(Ae){!k(_t,Ae)||de&&!k(Me,Ae)||be.push(_t[Ae])}),be};w||(J((He=function(){if(this instanceof He)throw TypeError("Symbol is not a constructor");var le=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,de=X(le),be=function(Ae){this===Me&&be.call(xe,Ae),k(this,me)&&k(this[me],de)&&(this[me][de]=!1),Ct(this,de,z(1,Ae))};return g&&dt&&Ct(Me,de,{configurable:!0,set:be}),u(de,le)})[ke],"toString",function(){return _e(this).tag}),J(He,"withoutSetter",function(le){return u(X(le),le)}),Y.f=Tt,V.f=kt,L.f=d,F.f=G.f=x,W.f=ue,re.f=function(le){return u(Q(le),le)},g&&(gt(He[ke],"description",{configurable:!0,get:function(){return _e(this).description}}),b||J(Me,"propertyIsEnumerable",Tt,{unsafe:!0}))),S({global:!0,wrap:!0,forced:!w,sham:!w},{Symbol:He}),oe(B(se),function(le){ce(le)}),S({target:we,stat:!0,forced:!w},{for:function(le){var de;return le=String(le),k(We,le)?We[le]:(de=He(le),We[le]=de,Ve[de]=le,de)},keyFor:function(le){if(!Ft(le))throw TypeError(le+" is not a symbol");if(k(Ve,le))return Ve[le]},useSetter:function(){dt=!0},useSimple:function(){dt=!1}}),S({target:"Object",stat:!0,forced:!w,sham:!g},{create:function(le,de){return de===void 0?$(le):l($(le),de)},defineProperty:kt,defineProperties:l,getOwnPropertyDescriptor:d}),S({target:"Object",stat:!0,forced:!w},{getOwnPropertyNames:x,getOwnPropertySymbols:ue}),S({target:"Object",stat:!0,forced:C(function(){W.f(1)})},{getOwnPropertySymbols:function(le){return W.f(O(le))}}),ze&&S({target:"JSON",stat:!0,forced:!w||C(function(){var le=He();return ze([le])!="[null]"||ze({a:le})!="{}"||ze(Object(le))!="{}"})},{stringify:function(le,de,be){for(var Ae,Ze=[le],yt=1;yt<arguments.length;)Ze.push(arguments[yt++]);if((j(Ae=de)||le!==void 0)&&!Ft(le))return E(de)||(de=function(ht,De){if(typeof Ae=="function"&&(De=Ae.call(this,ht,De)),!Ft(De))return De}),Ze[1]=de,ze.apply(null,Ze)}}),He[ke][r]||Z(He[ke],r,He[ke].valueOf),he(He,we),ie[me]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],203:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-copy-within"),d=u.aTypedArray;(0,u.exportTypedArrayMethod)("copyWithin",function(x,S){return l.call(d(this),x,S,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],204:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-iteration").every,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("every",function(x){return l(d(this),x,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],205:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-fill"),d=u.aTypedArray;(0,u.exportTypedArrayMethod)("fill",function(x){return l.apply(d(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],206:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-iteration").filter,d=r("../internals/species-constructor"),x=u.aTypedArray,S=u.aTypedArrayConstructor;(0,u.exportTypedArrayMethod)("filter",function(m){for(var y=l(x(this),m,1<arguments.length?arguments[1]:void 0),b=(m=d(this,this.constructor),0),g=y.length,w=new(S(m))(g);b<g;)w[b]=y[b++];return w})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],207:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-iteration").findIndex,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("findIndex",function(x){return l(d(this),x,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],208:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-iteration").find,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("find",function(x){return l(d(this),x,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],209:[function(r,h,f){r("../internals/typed-array-constructor")("Float32",function(u){return function(l,d,x){return u(this,l,d,x)}})},{"../internals/typed-array-constructor":142}],210:[function(r,h,f){r("../internals/typed-array-constructor")("Float64",function(u){return function(l,d,x){return u(this,l,d,x)}})},{"../internals/typed-array-constructor":142}],211:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-iteration").forEach,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("forEach",function(x){l(d(this),x,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-includes").includes,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("includes",function(x){return l(d(this),x,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],213:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-includes").indexOf,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("indexOf",function(x){return l(d(this),x,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],214:[function(r,h,f){r("../internals/typed-array-constructor")("Int16",function(u){return function(l,d,x){return u(this,l,d,x)}})},{"../internals/typed-array-constructor":142}],215:[function(r,h,f){r("../internals/typed-array-constructor")("Int32",function(u){return function(l,d,x){return u(this,l,d,x)}})},{"../internals/typed-array-constructor":142}],216:[function(r,h,f){function u(){return S.call(b(this))}var l=r("../internals/global"),d=r("../internals/array-buffer-view-core"),x=r("../modules/es.array.iterator"),S=(r=r("../internals/well-known-symbol")("iterator"),l=l.Uint8Array,x.values),m=x.keys,y=x.entries,b=d.aTypedArray;x=d.exportTypedArrayMethod,l=!!(d=l&&l.prototype[r])&&(d.name=="values"||d.name==null),x("entries",function(){return y.call(b(this))}),x("keys",function(){return m.call(b(this))}),x("values",u,!l),x(r,u,!l)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],217:[function(r,h,f){var u=(r=r("../internals/array-buffer-view-core")).aTypedArray,l=(r=r.exportTypedArrayMethod,[].join);r("join",function(d){return l.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12}],218:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-last-index-of"),d=u.aTypedArray;(0,u.exportTypedArrayMethod)("lastIndexOf",function(x){return l.apply(d(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],219:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-iteration").map,d=r("../internals/species-constructor"),x=u.aTypedArray,S=u.aTypedArrayConstructor;(0,u.exportTypedArrayMethod)("map",function(m){return l(x(this),m,1<arguments.length?arguments[1]:void 0,function(y,b){return new(S(d(y,y.constructor)))(b)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],220:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-reduce").right,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("reduceRight",function(x){return l(d(this),x,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],221:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-reduce").left,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("reduce",function(x){return l(d(this),x,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],222:[function(r,h,f){var u=(r=r("../internals/array-buffer-view-core")).aTypedArray,l=(r=r.exportTypedArrayMethod,Math.floor);r("reverse",function(){for(var d,x=u(this).length,S=l(x/2),m=0;m<S;)d=this[m],this[m++]=this[--x],this[x]=d;return this})},{"../internals/array-buffer-view-core":12}],223:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/to-length"),d=r("../internals/to-offset"),x=r("../internals/to-object"),S=(r=r("../internals/fails"),u.aTypedArray);(0,u.exportTypedArrayMethod)("set",function(m){S(this);var y=d(1<arguments.length?arguments[1]:void 0,1),b=this.length,g=x(m),w=l(g.length),_=0;if(b<w+y)throw RangeError("Wrong length");for(;_<w;)this[y+_]=g[_++]},r(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],224:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/species-constructor"),d=(r=r("../internals/fails"),u.aTypedArray),x=u.aTypedArrayConstructor,S=(u=u.exportTypedArrayMethod,[].slice);u("slice",function(m,y){for(var b=S.call(d(this),m,y),g=(m=l(this,this.constructor),0),w=b.length,_=new(x(m))(w);g<w;)_[g]=b[g++];return _},r(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],225:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/array-iteration").some,d=u.aTypedArray;(0,u.exportTypedArrayMethod)("some",function(x){return l(d(this),x,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],226:[function(r,h,f){var u=(r=r("../internals/array-buffer-view-core")).aTypedArray,l=(r=r.exportTypedArrayMethod,[].sort);r("sort",function(d){return l.call(u(this),d)})},{"../internals/array-buffer-view-core":12}],227:[function(r,h,f){var u=r("../internals/array-buffer-view-core"),l=r("../internals/to-length"),d=r("../internals/to-absolute-index"),x=r("../internals/species-constructor"),S=u.aTypedArray;(0,u.exportTypedArrayMethod)("subarray",function(m,y){var b=S(this),g=b.length;return m=d(m,g),new(x(b,b.constructor))(b.buffer,b.byteOffset+m*b.BYTES_PER_ELEMENT,l((y===void 0?g:d(y,g))-m))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],228:[function(r,h,f){var u=r("../internals/global"),l=r("../internals/array-buffer-view-core"),d=(r=r("../internals/fails"),u.Int8Array),x=l.aTypedArray,S=(u=l.exportTypedArrayMethod,[].toLocaleString),m=[].slice,y=!!d&&r(function(){S.call(new d(1))});u("toLocaleString",function(){return S.apply(y?m.call(x(this)):x(this),arguments)},r(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!r(function(){d.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],229:[function(r,h,f){var u=r("../internals/array-buffer-view-core").exportTypedArrayMethod,l=r("../internals/fails"),d=(r=(r=r("../internals/global").Uint8Array)&&r.prototype||{},[].toString),x=[].join;l(function(){d.call({})})&&(d=function(){return x.call(this)}),l=r.toString!=d,u("toString",d,l)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],230:[function(r,h,f){r("../internals/typed-array-constructor")("Uint16",function(u){return function(l,d,x){return u(this,l,d,x)}})},{"../internals/typed-array-constructor":142}],231:[function(r,h,f){r("../internals/typed-array-constructor")("Uint32",function(u){return function(l,d,x){return u(this,l,d,x)}})},{"../internals/typed-array-constructor":142}],232:[function(r,h,f){r("../internals/typed-array-constructor")("Uint8",function(u){return function(l,d,x){return u(this,l,d,x)}})},{"../internals/typed-array-constructor":142}],233:[function(r,h,f){r("../internals/typed-array-constructor")("Uint8",function(u){return function(l,d,x){return u(this,l,d,x)}},!0)},{"../internals/typed-array-constructor":142}],234:[function(r,h,f){function u(j){return function(){return j(this,arguments.length?arguments[0]:void 0)}}var l,d,x,S,m,y=r("../internals/global"),b=r("../internals/redefine-all"),g=r("../internals/internal-metadata"),w=r("../internals/collection"),_=r("../internals/collection-weak"),C=r("../internals/is-object"),k=r("../internals/internal-state").enforce,E=(r=r("../internals/native-weak-map"),y=!y.ActiveXObject&&"ActiveXObject"in y,Object.isExtensible);h=h.exports=w("WeakMap",u,_),r&&y&&(l=_.getConstructor(u,"WeakMap",!0),g.REQUIRED=!0,w=h.prototype,d=w.delete,x=w.has,S=w.get,m=w.set,b(w,{delete:function(j){var A;return C(j)&&!E(j)?((A=k(this)).frozen||(A.frozen=new l),d.call(this,j)||A.frozen.delete(j)):d.call(this,j)},has:function(j){var A;return C(j)&&!E(j)?((A=k(this)).frozen||(A.frozen=new l),x.call(this,j)||A.frozen.has(j)):x.call(this,j)},get:function(j){var A;return!C(j)||E(j)||((A=k(this)).frozen||(A.frozen=new l),x.call(this,j))?S.call(this,j):A.frozen.get(j)},set:function(j,A){var O;return!C(j)||E(j)||((O=k(this)).frozen||(O.frozen=new l),x.call(this,j))?m.call(this,j,A):O.frozen.set(j,A),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],235:[function(r,h,f){var u,l=r("../internals/global"),d=r("../internals/dom-iterables"),x=r("../internals/array-for-each"),S=r("../internals/create-non-enumerable-property");for(u in d){var m;if((m=(m=l[u])&&m.prototype)&&m.forEach!==x)try{S(m,"forEach",x)}catch{m.forEach=x}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],236:[function(r,h,f){var u,l=r("../internals/global"),d=r("../internals/dom-iterables"),x=r("../modules/es.array.iterator"),S=r("../internals/create-non-enumerable-property"),m=(r=r("../internals/well-known-symbol"))("iterator"),y=r("toStringTag"),b=x.values;for(u in d){var g=l[u],w=g&&g.prototype;if(w){if(w[m]!==b)try{S(w,m,b)}catch{w[m]=b}if(w[y]||S(w,y,u),d[u]){for(var _ in x)if(w[_]!==x[_])try{S(w,_,x[_])}catch{w[_]=x[_]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],237:[function(r,h,f){function u(fe){try{return decodeURIComponent(fe)}catch{return fe}}function l(fe){return re[fe]}function d(fe){return encodeURIComponent(fe).replace(Q,l)}function x(fe){this.entries.length=0,ce(this.entries,fe)}function S(fe,oe){if(fe<oe)throw TypeError("Not enough arguments")}function m(){j(this,m,V);var fe,oe,me,we,ke,ve,_e,Me,He=0<arguments.length?arguments[0]:void 0,ze=[];if(Z(this,{type:V,entries:ze,updateURL:function(){},updateSearchParams:x}),He!==void 0)if(z(He))if(typeof(fe=G(He))=="function")for(me=(oe=fe.call(He)).next;!(we=me.call(oe)).done;){if((ve=(ke=(we=F(D(we.value))).next).call(we)).done||(_e=ke.call(we)).done||!ke.call(we).done)throw TypeError("Expected sequence with length 2");ze.push({key:ve.value+"",value:_e.value+""})}else for(Me in He)A(He,Me)&&ze.push({key:Me,value:He[Me]+""});else ce(ze,typeof He=="string"?He.charAt(0)==="?"?He.slice(1):He:He+"")}r("../modules/es.array.iterator");var y=r("../internals/export"),b=r("../internals/get-built-in"),g=r("../internals/native-url"),w=r("../internals/redefine"),_=r("../internals/redefine-all"),C=r("../internals/set-to-string-tag"),k=r("../internals/create-iterator-constructor"),E=r("../internals/internal-state"),j=r("../internals/an-instance"),A=r("../internals/has"),O=r("../internals/function-bind-context"),N=r("../internals/classof"),D=r("../internals/an-object"),z=r("../internals/is-object"),$=r("../internals/object-create"),B=r("../internals/create-property-descriptor"),F=r("../internals/get-iterator"),G=r("../internals/get-iterator-method"),W=(r=r("../internals/well-known-symbol"),b("fetch")),L=b("Headers"),V=(b=r("iterator"),"URLSearchParams"),Y=V+"Iterator",Z=E.set,J=E.getterFor(V),ne=E.getterFor(Y),se=/\+/g,ie=Array(4),X=function(fe){var oe,me=fe.replace(se," "),we=4;try{return decodeURIComponent(me)}catch{for(;we;)me=me.replace((oe=we--,ie[oe-1]||(ie[oe-1]=RegExp("((?:%[\\da-f]{2}){"+oe+"})","gi"))),u);return me}},Q=/[!'()~]|%20/g,re={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ce=function(fe,oe){if(oe)for(var me,we=oe.split("&"),ke=0;ke<we.length;)(me=we[ke++]).length&&(me=me.split("="),fe.push({key:X(me.shift()),value:X(me.join("="))}))},he=k(function(fe,oe){Z(this,{type:Y,iterator:F(J(fe).entries),kind:oe})},"Iterator",function(){var fe,oe=(fe=ne(this)).kind,me=(fe=fe.iterator.next()).value;return fe.done||(fe.value=oe==="keys"?me.key:oe==="values"?me.value:[me.key,me.value]),fe});_(r=m.prototype,{append:function(fe,oe){S(arguments.length,2);var me=J(this);me.entries.push({key:fe+"",value:oe+""}),me.updateURL()},delete:function(fe){S(arguments.length,1);for(var oe=J(this),me=oe.entries,we=fe+"",ke=0;ke<me.length;)me[ke].key===we?me.splice(ke,1):ke++;oe.updateURL()},get:function(fe){S(arguments.length,1);for(var oe=J(this).entries,me=fe+"",we=0;we<oe.length;we++)if(oe[we].key===me)return oe[we].value;return null},getAll:function(fe){S(arguments.length,1);for(var oe=J(this).entries,me=fe+"",we=[],ke=0;ke<oe.length;ke++)oe[ke].key===me&&we.push(oe[ke].value);return we},has:function(fe){S(arguments.length,1);for(var oe=J(this).entries,me=fe+"",we=0;we<oe.length;)if(oe[we++].key===me)return!0;return!1},set:function(fe,oe){S(arguments.length,1);for(var me,we=J(this),ke=we.entries,ve=!1,_e=fe+"",Me=oe+"",He=0;He<ke.length;He++)(me=ke[He]).key===_e&&(ve?ke.splice(He--,1):(ve=!0,me.value=Me));ve||ke.push({key:_e,value:Me}),we.updateURL()},sort:function(){for(var fe,oe,me=J(this),we=me.entries,ke=we.slice(),ve=we.length=0;ve<ke.length;ve++){for(fe=ke[ve],oe=0;oe<ve;oe++)if(we[oe].key>fe.key){we.splice(oe,0,fe);break}oe===ve&&we.push(fe)}me.updateURL()},forEach:function(fe){for(var oe,me=J(this).entries,we=O(fe,1<arguments.length?arguments[1]:void 0,3),ke=0;ke<me.length;)we((oe=me[ke++]).value,oe.key,this)},keys:function(){return new he(this,"keys")},values:function(){return new he(this,"values")},entries:function(){return new he(this,"entries")}},{enumerable:!0}),w(r,b,r.entries),w(r,"toString",function(){for(var fe,oe=J(this).entries,me=[],we=0;we<oe.length;)fe=oe[we++],me.push(d(fe.key)+"="+d(fe.value));return me.join("&")},{enumerable:!0}),C(m,V),y({global:!0,forced:!g},{URLSearchParams:m}),g||typeof W!="function"||typeof L!="function"||y({global:!0,enumerable:!0,forced:!0},{fetch:function(fe){var oe,me,we;return fe=[fe],1<arguments.length&&(z(oe=arguments[1])&&(me=oe.body,N(me)===V&&((we=oe.headers?new L(oe.headers):new L).has("content-type")||we.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),oe=$(oe,{body:B(0,String(me)),headers:B(0,we)}))),fe.push(oe)),W.apply(this,fe)}}),h.exports={URLSearchParams:m,getState:J}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],238:[function(r,h,f){function u(Te){var bt,Dt,mt,gn;if(typeof Te=="number"){for(bt=[],Dt=0;Dt<4;Dt++)bt.unshift(Te%256),Te=Y(Te/256);return bt.join(".")}if(typeof Te!="object")return Te;for(bt="",mt=Me(Te),Dt=0;Dt<8;Dt++)gn&&Te[Dt]===0||(gn=gn&&!1,mt===Dt?(bt+=Dt?":":"::",gn=!0):(bt+=Te[Dt].toString(16),Dt<7&&(bt+=":")));return"["+bt+"]"}function l(Te){return!Te.host||Te.cannotBeABaseURL||Te.scheme=="file"}function d(Te,bt,Dt,mt){var gn,ut,zn,$t=Dt||kt,rn=0,Et="",kr=!1,Pr=!1,Kr=!1;for(Dt||(Te.scheme="",Te.username="",Te.password="",Te.host=null,Te.port=null,Te.path=[],Te.query=null,Te.fragment=null,Te.cannotBeABaseURL=!1,bt=bt.replace(ke,"")),bt=bt.replace(ve,""),gn=N(bt);rn<=gn.length;){switch(ut=gn[rn],$t){case kt:if(!ut||!X.test(ut)){if(Dt)return ne;$t=ue;continue}Et+=ut.toLowerCase(),$t=Tt;break;case Tt:if(ut&&(Q.test(ut)||ut=="+"||ut=="-"||ut=="."))Et+=ut.toLowerCase();else{if(ut!=":"){if(Dt)return ne;Et="",$t=ue,rn=0;continue}if(Dt&&(_t(Te)!=A(Lt,Et)||Et=="file"&&(xe(Te)||Te.port!==null)||Te.scheme=="file"&&!Te.host))return;if(Te.scheme=Et,Dt)return void(_t(Te)&&Lt[Te.scheme]==Te.port&&(Te.port=null));Et="",Te.scheme=="file"?$t=nn:_t(Te)&&mt&&mt.scheme==Te.scheme?$t=le:_t(Te)?$t=Ze:gn[rn+1]=="/"?($t=de,rn++):(Te.cannotBeABaseURL=!0,Te.path.push(""),$t=Qt)}break;case ue:if(!mt||mt.cannotBeABaseURL&&ut!="#")return ne;if(mt.cannotBeABaseURL&&ut=="#"){Te.scheme=mt.scheme,Te.path=mt.path.slice(),Te.query=mt.query,Te.fragment="",Te.cannotBeABaseURL=!0,$t=pr;break}$t=mt.scheme=="file"?nn:be;continue;case le:if(ut!="/"||gn[rn+1]!="/"){$t=be;continue}$t=yt,rn++;break;case de:if(ut=="/"){$t=ht;break}$t=qt;continue;case be:if(Te.scheme=mt.scheme,ut==m)Te.username=mt.username,Te.password=mt.password,Te.host=mt.host,Te.port=mt.port,Te.path=mt.path.slice(),Te.query=mt.query;else if(ut=="/"||ut=="\\"&&_t(Te))$t=Ae;else if(ut=="?")Te.username=mt.username,Te.password=mt.password,Te.host=mt.host,Te.port=mt.port,Te.path=mt.path.slice(),Te.query="",$t=an;else{if(ut!="#"){Te.username=mt.username,Te.password=mt.password,Te.host=mt.host,Te.port=mt.port,Te.path=mt.path.slice(),Te.path.pop(),$t=qt;continue}Te.username=mt.username,Te.password=mt.password,Te.host=mt.host,Te.port=mt.port,Te.path=mt.path.slice(),Te.query=mt.query,Te.fragment="",$t=pr}break;case Ae:if(!_t(Te)||ut!="/"&&ut!="\\"){if(ut!="/"){Te.username=mt.username,Te.password=mt.password,Te.host=mt.host,Te.port=mt.port,$t=qt;continue}$t=ht}else $t=yt;break;case Ze:if($t=yt,ut!="/"||Et.charAt(rn+1)!="/")continue;rn++;break;case yt:if(ut=="/"||ut=="\\")break;$t=ht;continue;case ht:if(ut=="@"){kr&&(Et="%40"+Et),kr=!0;for(var cr=N(Et),ar=0;ar<cr.length;ar++){var os=cr[ar];os!=":"||Kr?(os=pt(os,gt),Kr?Te.password+=os:Te.username+=os):Kr=!0}Et=""}else if(ut==m||ut=="/"||ut=="?"||ut=="#"||ut=="\\"&&_t(Te)){if(kr&&Et=="")return J;rn-=N(Et).length+1,Et="",$t=De}else Et+=ut;break;case De:case wt:if(Dt&&Te.scheme=="file"){$t=sn;continue}if(ut!=":"||Pr){if(ut==m||ut=="/"||ut=="?"||ut=="#"||ut=="\\"&&_t(Te)){if(_t(Te)&&Et=="")return se;if(Dt&&Et==""&&(xe(Te)||Te.port!==null))return;if(zn=_e(Te,Et))return zn;if(Et="",$t=tn,Dt)return;continue}ut=="["?Pr=!0:ut=="]"&&(Pr=!1),Et+=ut}else{if(Et=="")return se;if(zn=_e(Te,Et))return zn;if(Et="",$t=At,Dt==wt)return}break;case At:if(!re.test(ut)){if(ut==m||ut=="/"||ut=="?"||ut=="#"||ut=="\\"&&_t(Te)||Dt){if(Et!=""){var as=parseInt(Et,10);if(65535<as)return ie;Te.port=_t(Te)&&as===Lt[Te.scheme]?null:as,Et=""}if(Dt)return;$t=tn;continue}return ie}Et+=ut;break;case nn:if(Te.scheme="file",ut=="/"||ut=="\\")$t=hn;else{if(!mt||mt.scheme!="file"){$t=qt;continue}if(ut==m)Te.host=mt.host,Te.path=mt.path.slice(),Te.query=mt.query;else if(ut=="?")Te.host=mt.host,Te.path=mt.path.slice(),Te.query="",$t=an;else{if(ut!="#"){Ve(gn.slice(rn).join(""))||(Te.host=mt.host,Te.path=mt.path.slice(),dt(Te)),$t=qt;continue}Te.host=mt.host,Te.path=mt.path.slice(),Te.query=mt.query,Te.fragment="",$t=pr}}break;case hn:if(ut=="/"||ut=="\\"){$t=sn;break}mt&&mt.scheme=="file"&&!Ve(gn.slice(rn).join(""))&&(We(mt.path[0],!0)?Te.path.push(mt.path[0]):Te.host=mt.host),$t=qt;continue;case sn:if(ut==m||ut=="/"||ut=="\\"||ut=="?"||ut=="#"){if(!Dt&&We(Et))$t=qt;else{if(Et==""){if(Te.host="",Dt)return}else{if(zn=_e(Te,Et))return zn;if(Te.host=="localhost"&&(Te.host=""),Dt)return;Et=""}$t=tn}continue}Et+=ut;break;case tn:if(_t(Te)){if($t=qt,ut!="/"&&ut!="\\")continue}else if(Dt||ut!="?")if(Dt||ut!="#"){if(ut!=m&&($t=qt,ut!="/"))continue}else Te.fragment="",$t=pr;else Te.query="",$t=an;break;case qt:if(ut==m||ut=="/"||ut=="\\"&&_t(Te)||!Dt&&(ut=="?"||ut=="#")){if(Ft(Et)?(dt(Te),ut=="/"||ut=="\\"&&_t(Te)||Te.path.push("")):Ct(Et)?ut=="/"||ut=="\\"&&_t(Te)||Te.path.push(""):(Te.scheme=="file"&&!Te.path.length&&We(Et)&&(Te.host&&(Te.host=""),Et=Et.charAt(0)+":"),Te.path.push(Et)),Et="",Te.scheme=="file"&&(ut==m||ut=="?"||ut=="#"))for(;1<Te.path.length&&Te.path[0]==="";)Te.path.shift();ut=="?"?(Te.query="",$t=an):ut=="#"&&(Te.fragment="",$t=pr)}else Et+=pt(ut,st);break;case Qt:ut=="?"?(Te.query="",$t=an):ut=="#"?(Te.fragment="",$t=pr):ut!=m&&(Te.path[0]+=pt(ut,He));break;case an:Dt||ut!="#"?ut!=m&&(ut=="'"&&_t(Te)?Te.query+="%27":Te.query+=ut=="#"?"%23":pt(ut,He)):(Te.fragment="",$t=pr);break;case pr:ut!=m&&(Te.fragment+=pt(ut,ze))}rn++}}function x(Te){var bt,Dt,mt=j(this,x,"URL"),gn=1<arguments.length?arguments[1]:void 0,ut=(Te=String(Te),L(mt,{type:"URL"}));if(gn!==void 0){if(gn instanceof x)bt=V(gn);else if(Dt=d(bt={},String(gn)))throw TypeError(Dt)}if(Dt=d(ut,Te,null,bt))throw TypeError(Dt);var zn=ut.searchParams=new G;(gn=W(zn)).updateSearchParams(ut.query),gn.updateURL=function(){ut.query=String(zn)||null},w||(mt.href=An.call(mt),mt.origin=mr.call(mt),mt.protocol=Yr.call(mt),mt.username=Sn.call(mt),mt.password=vr.call(mt),mt.host=Cr.call(mt),mt.hostname=Cn.call(mt),mt.port=Po.call(mt),mt.pathname=ia.call(mt),mt.search=Bo.call(mt),mt.searchParams=xr.call(mt),mt.hash=dl.call(mt))}function S(Te,bt){return{get:Te,set:bt,configurable:!0,enumerable:!0}}r("../modules/es.string.iterator");var m,y,b,g=r("../internals/export"),w=r("../internals/descriptors"),_=r("../internals/native-url"),C=r("../internals/global"),k=r("../internals/object-define-properties"),E=r("../internals/redefine"),j=r("../internals/an-instance"),A=r("../internals/has"),O=r("../internals/object-assign"),N=r("../internals/array-from"),D=r("../internals/string-multibyte").codeAt,z=r("../internals/string-punycode-to-ascii"),$=r("../internals/set-to-string-tag"),B=r("../modules/web.url-search-params"),F=(r=r("../internals/internal-state"),C.URL),G=B.URLSearchParams,W=B.getState,L=r.set,V=r.getterFor("URL"),Y=Math.floor,Z=Math.pow,J="Invalid authority",ne="Invalid scheme",se="Invalid host",ie="Invalid port",X=/[A-Za-z]/,Q=/[\d+-.A-Za-z]/,re=/\d/,ce=/^(0x|0X)/,he=/^[0-7]+$/,fe=/^\d+$/,oe=/^[\dA-Fa-f]+$/,me=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,we=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ke=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,ve=/[\u0009\u000A\u000D]/g,_e=function(Te,bt){var Dt,mt,gn;if(bt.charAt(0)=="[")return bt.charAt(bt.length-1)=="]"&&(Dt=function(ut){var zn,$t,rn,Et,kr,Pr,Kr,cr=[0,0,0,0,0,0,0,0],ar=0,os=null,as=0,Vn=function(){return ut.charAt(as)};if(Vn()==":"){if(ut.charAt(1)!=":")return;as+=2,os=++ar}for(;Vn();){if(ar==8)return;if(Vn()!=":"){for(zn=$t=0;$t<4&&oe.test(Vn());)zn=16*zn+parseInt(Vn(),16),as++,$t++;if(Vn()=="."){if($t==0||(as-=$t,ar>6))return;for(rn=0;Vn();){if(Et=null,rn>0){if(!(Vn()=="."&&rn<4))return;as++}if(!re.test(Vn()))return;for(;re.test(Vn());){if(kr=parseInt(Vn(),10),Et===null)Et=kr;else{if(Et==0)return;Et=10*Et+kr}if(Et>255)return;as++}cr[ar]=256*cr[ar]+Et,++rn!=2&&rn!=4||ar++}if(rn!=4)return;break}if(Vn()==":"){if(as++,!Vn())return}else if(Vn())return;cr[ar++]=zn}else{if(os!==null)return;as++,os=++ar}}if(os!==null)for(Pr=ar-os,ar=7;ar!=0&&Pr>0;)Kr=cr[ar],cr[ar--]=cr[os+Pr-1],cr[os+--Pr]=Kr;else if(ar!=8)return;return cr}(bt.slice(1,-1)))?void(Te.host=Dt):se;if(_t(Te))return bt=z(bt),me.test(bt)||(Dt=function(ut){var zn,$t,rn,Et,kr,Pr,Kr,cr=ut.split(".");if(cr.length&&cr[cr.length-1]==""&&cr.pop(),(zn=cr.length)>4)return ut;for($t=[],rn=0;rn<zn;rn++){if((Et=cr[rn])=="")return ut;if(kr=10,Et.length>1&&Et.charAt(0)=="0"&&(kr=ce.test(Et)?16:8,Et=Et.slice(kr==8?1:2)),Et==="")Pr=0;else{if(!(kr==10?fe:kr==8?he:oe).test(Et))return ut;Pr=parseInt(Et,kr)}$t.push(Pr)}for(rn=0;rn<zn;rn++)if(Pr=$t[rn],rn==zn-1){if(Pr>=Z(256,5-zn))return null}else if(Pr>255)return null;for(Kr=$t.pop(),rn=0;rn<$t.length;rn++)Kr+=$t[rn]*Z(256,3-rn);return Kr}(bt))===null?se:void(Te.host=Dt);if(we.test(bt))return se;for(Dt="",mt=N(bt),gn=0;gn<mt.length;gn++)Dt+=pt(mt[gn],He);Te.host=Dt},Me=function(Te){for(var bt=null,Dt=1,mt=null,gn=0,ut=0;ut<8;ut++)Te[ut]!==0?(Dt<gn&&(bt=mt,Dt=gn),mt=null,gn=0):(mt===null&&(mt=ut),++gn);return Dt<gn&&(bt=mt,Dt=gn),bt},He={},ze=O({},He,{" ":1,'"':1,"<":1,">":1,"`":1}),st=O({},ze,{"#":1,"?":1,"{":1,"}":1}),gt=O({},st,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),pt=function(Te,bt){var Dt=D(Te,0);return 32<Dt&&Dt<127&&!A(bt,Te)?Te:encodeURIComponent(Te)},Lt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_t=function(Te){return A(Lt,Te.scheme)},xe=function(Te){return Te.username!=""||Te.password!=""},We=function(Te,bt){return Te.length==2&&X.test(Te.charAt(0))&&((Te=Te.charAt(1))==":"||!bt&&Te=="|")},Ve=function(Te){return 1<Te.length&&We(Te.slice(0,2))&&(Te.length==2||(Te=Te.charAt(2))==="/"||Te==="\\"||Te==="?"||Te==="#")},dt=function(Te){var bt=Te.path,Dt=bt.length;!Dt||Te.scheme=="file"&&Dt==1&&We(bt[0],!0)||bt.pop()},Ct=function(Te){return Te==="."||Te.toLowerCase()==="%2e"},Ft=function(Te){return(Te=Te.toLowerCase())===".."||Te==="%2e."||Te===".%2e"||Te==="%2e%2e"},kt={},Tt={},ue={},le={},de={},be={},Ae={},Ze={},yt={},ht={},De={},wt={},At={},nn={},hn={},sn={},tn={},qt={},Qt={},an={},pr={},An=(C=x.prototype,function(){var Te=V(this),bt=Te.scheme,Dt=Te.username,mt=Te.password,gn=Te.host,ut=Te.port,zn=Te.path,$t=Te.query,rn=Te.fragment,Et=bt+":";return gn!==null?(Et+="//",xe(Te)&&(Et+=Dt+(mt?":"+mt:"")+"@"),Et+=u(gn),ut!==null&&(Et+=":"+ut)):bt=="file"&&(Et+="//"),Et+=Te.cannotBeABaseURL?zn[0]:zn.length?"/"+zn.join("/"):"",$t!==null&&(Et+="?"+$t),rn!==null&&(Et+="#"+rn),Et}),mr=function(){var Te=V(this),bt=Te.scheme,Dt=Te.port;if(bt=="blob")try{return new URL(bt.path[0]).origin}catch{return"null"}return bt!="file"&&_t(Te)?bt+"://"+u(Te.host)+(Dt!==null?":"+Dt:""):"null"},Yr=function(){return V(this).scheme+":"},Sn=function(){return V(this).username},vr=function(){return V(this).password},Cr=function(){var Te=(bt=V(this)).host,bt=bt.port;return Te===null?"":bt===null?u(Te):u(Te)+":"+bt},Cn=function(){var Te=V(this).host;return Te===null?"":u(Te)},Po=function(){var Te=V(this).port;return Te===null?"":String(Te)},ia=function(){var Te=V(this),bt=Te.path;return Te.cannotBeABaseURL?bt[0]:bt.length?"/"+bt.join("/"):""},Bo=function(){var Te=V(this).query;return Te?"?"+Te:""},xr=function(){return V(this).searchParams},dl=function(){var Te=V(this).fragment;return Te?"#"+Te:""};w&&k(C,{href:S(An,function(Te){var bt=V(this);if(Te=d(bt,Te=String(Te)))throw TypeError(Te);W(bt.searchParams).updateSearchParams(bt.query)}),origin:S(mr),protocol:S(Yr,function(Te){d(V(this),String(Te)+":",kt)}),username:S(Sn,function(Te){var bt=V(this),Dt=N(String(Te));if(!l(bt)){bt.username="";for(var mt=0;mt<Dt.length;mt++)bt.username+=pt(Dt[mt],gt)}}),password:S(vr,function(Te){var bt=V(this),Dt=N(String(Te));if(!l(bt)){bt.password="";for(var mt=0;mt<Dt.length;mt++)bt.password+=pt(Dt[mt],gt)}}),host:S(Cr,function(Te){var bt=V(this);bt.cannotBeABaseURL||d(bt,String(Te),De)}),hostname:S(Cn,function(Te){var bt=V(this);bt.cannotBeABaseURL||d(bt,String(Te),wt)}),port:S(Po,function(Te){var bt=V(this);l(bt)||((Te=String(Te))==""?bt.port=null:d(bt,Te,At))}),pathname:S(ia,function(Te){var bt=V(this);bt.cannotBeABaseURL||(bt.path=[],d(bt,Te+"",tn))}),search:S(Bo,function(Te){var bt=V(this);(Te=String(Te))==""?bt.query=null:(Te.charAt(0)=="?"&&(Te=Te.slice(1)),bt.query="",d(bt,Te,an)),W(bt.searchParams).updateSearchParams(bt.query)}),searchParams:S(xr),hash:S(dl,function(Te){var bt=V(this);(Te=String(Te))==""?bt.fragment=null:(Te.charAt(0)=="#"&&(Te=Te.slice(1)),bt.fragment="",d(bt,Te,pr))})}),E(C,"toJSON",function(){return An.call(this)},{enumerable:!0}),E(C,"toString",function(){return An.call(this)},{enumerable:!0}),F&&(y=F.createObjectURL,b=F.revokeObjectURL,y&&E(x,"createObjectURL",function(Te){return y.apply(F,arguments)}),b&&E(x,"revokeObjectURL",function(Te){return b.apply(F,arguments)})),$(x,"URL"),g({global:!0,forced:!_,sham:!w},{URL:x})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":190,"../modules/web.url-search-params":237}],239:[function(r,h,f){h.exports=r("./").polyfill()},{"./":240}],240:[function(r,h,f){(function(u,l){var d;d=function(){function x(oe){return typeof oe=="function"}var S=Array.isArray||function(oe){return Object.prototype.toString.call(oe)==="[object Array]"},m=0,y=void 0,b=void 0,g=function(oe,me){j[m]=oe,j[m+1]=me,(m+=2)===2&&(b?b(A):z())},w=typeof window<"u"?window:void 0,_=(_=w||{}).MutationObserver||_.WebKitMutationObserver,C=typeof self>"u"&&u!==void 0&&{}.toString.call(u)==="[object process]",k=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function E(){var oe=setTimeout;return function(){return oe(A,1)}}var j=new Array(1e3);function A(){for(var oe=0;oe<m;oe+=2)(0,j[oe])(j[oe+1]),j[oe]=void 0,j[oe+1]=void 0;m=0}var O,N,D,z=void 0;function $(oe,me){var we,ke=this,ve=new this.constructor(G),_e=(ve[F]===void 0&&Q(ve),ke._state);return _e?(we=arguments[_e-1],g(function(){return ie(_e,ve,we,ke._result)})):ne(ke,ve,oe,me),ve}function B(oe){var me;return oe&&typeof oe=="object"&&oe.constructor===this?oe:(V(me=new this(G),oe),me)}z=C?function(){return u.nextTick(A)}:_?(N=0,C=new _(A),D=document.createTextNode(""),C.observe(D,{characterData:!0}),function(){D.data=N=++N%2}):k?((O=new MessageChannel).port1.onmessage=A,function(){return O.port2.postMessage(0)}):(w===void 0&&typeof r=="function"?function(){try{var oe=Function("return this")().require("vertx");return(y=oe.runOnLoop||oe.runOnContext)!==void 0?function(){y(A)}:E()}catch{return E()}}:E)();var F=Math.random().toString(36).substring(2);function G(){}var W=void 0;function L(oe,me,we){var ke,ve;me.constructor===oe.constructor&&we===$&&me.constructor.resolve===B?(ke=oe,(ve=me)._state===1?Z(ke,ve._result):ve._state===2?J(ke,ve._result):ne(ve,void 0,function(_e){return V(ke,_e)},function(_e){return J(ke,_e)})):we!==void 0&&x(we)?function(_e,Me,He){g(function(ze){var st=!1,gt=function(pt,Lt,_t,xe){try{pt.call(Lt,_t,xe)}catch(We){return We}}(He,Me,function(pt){st||(st=!0,(Me!==pt?V:Z)(ze,pt))},function(pt){st||(st=!0,J(ze,pt))},ze._label);!st&&gt&&(st=!0,J(ze,gt))},_e)}(oe,me,we):Z(oe,me)}function V(oe,me){if(oe===me)J(oe,new TypeError("You cannot resolve a promise with itself"));else if(we=typeof me,me===null||we!="object"&&we!="function")Z(oe,me);else{we=void 0;try{we=me.then}catch(ke){return void J(oe,ke)}L(oe,me,we)}var we}function Y(oe){oe._onerror&&oe._onerror(oe._result),se(oe)}function Z(oe,me){oe._state===W&&(oe._result=me,oe._state=1,oe._subscribers.length!==0&&g(se,oe))}function J(oe,me){oe._state===W&&(oe._state=2,oe._result=me,g(Y,oe))}function ne(oe,me,we,ke){var ve=oe._subscribers,_e=ve.length;oe._onerror=null,ve[_e]=me,ve[_e+1]=we,ve[_e+2]=ke,_e===0&&oe._state&&g(se,oe)}function se(oe){var me=oe._subscribers,we=oe._state;if(me.length!==0){for(var ke,ve=void 0,_e=oe._result,Me=0;Me<me.length;Me+=3)ke=me[Me],ve=me[Me+we],ke?ie(we,ke,ve,_e):ve(_e);oe._subscribers.length=0}}function ie(oe,me,we,ke){var ve=x(we),_e=void 0,Me=void 0,He=!0;if(ve){try{_e=we(ke)}catch(ze){He=!1,Me=ze}if(me===_e)return void J(me,new TypeError("A promises callback cannot return that same promise."))}else _e=ke;me._state===W&&(ve&&He?V(me,_e):He===!1?J(me,Me):oe===1?Z(me,_e):oe===2&&J(me,_e))}var X=0;function Q(oe){oe[F]=X++,oe._state=void 0,oe._result=void 0,oe._subscribers=[]}ce.prototype._enumerate=function(oe){for(var me=0;this._state===W&&me<oe.length;me++)this._eachEntry(oe[me],me)},ce.prototype._eachEntry=function(oe,me){var we=this._instanceConstructor,ke=we.resolve;if(ke===B){var ve,_e=void 0,Me=void 0,He=!1;try{_e=oe.then}catch(ze){He=!0,Me=ze}_e===$&&oe._state!==W?this._settledAt(oe._state,me,oe._result):typeof _e!="function"?(this._remaining--,this._result[me]=oe):we===he?(ve=new we(G),He?J(ve,Me):L(ve,oe,_e),this._willSettleAt(ve,me)):this._willSettleAt(new we(function(ze){return ze(oe)}),me)}else this._willSettleAt(ke(oe),me)},ce.prototype._settledAt=function(oe,me,we){var ke=this.promise;ke._state===W&&(this._remaining--,oe===2?J(ke,we):this._result[me]=we),this._remaining===0&&Z(ke,this._result)},ce.prototype._willSettleAt=function(oe,me){var we=this;ne(oe,void 0,function(ke){return we._settledAt(1,me,ke)},function(ke){return we._settledAt(2,me,ke)})};var re=ce;function ce(oe,me){this._instanceConstructor=oe,this.promise=new oe(G),this.promise[F]||Q(this.promise),S(me)?(this.length=me.length,this._remaining=me.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(me),this._remaining!==0)||Z(this.promise,this._result)):J(this.promise,new Error("Array Methods must be provided an Array"))}fe.prototype.catch=function(oe){return this.then(null,oe)},fe.prototype.finally=function(oe){var me=this.constructor;return x(oe)?this.then(function(we){return me.resolve(oe()).then(function(){return we})},function(we){return me.resolve(oe()).then(function(){throw we})}):this.then(oe,oe)};var he=fe;function fe(oe){if(this[F]=X++,this._result=this._state=void 0,this._subscribers=[],G!==oe){if(typeof oe!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof fe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var me=this;try{oe(function(we){V(me,we)},function(we){J(me,we)})}catch(we){J(me,we)}}}return he.prototype.then=$,he.all=function(oe){return new re(this,oe).promise},he.race=function(oe){var me=this;return S(oe)?new me(function(we,ke){for(var ve=oe.length,_e=0;_e<ve;_e++)me.resolve(oe[_e]).then(we,ke)}):new me(function(we,ke){return ke(new TypeError("You must pass an array to race."))})},he.resolve=B,he.reject=function(oe){var me=new this(G);return J(me,oe),me},he._setScheduler=function(oe){b=oe},he._setAsap=function(oe){g=oe},he._asap=g,he.polyfill=function(){var oe=void 0;if(l!==void 0)oe=l;else if(typeof self<"u")oe=self;else try{oe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var me=oe.Promise;if(me){var we=null;try{we=Object.prototype.toString.call(me.resolve())}catch{}if(we==="[object Promise]"&&!me.cast)return}oe.Promise=he},he.Promise=he},typeof f=="object"&&h!==void 0?h.exports=d():this.ES6Promise=d()}).call(this,r("_process"),p!==void 0?p:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:249}],241:[function(r,h,f){var u;u=function(l,d){var x="callback";function S(y){try{delete window[y]}catch{window[y]=void 0}}function m(y){(y=document.getElementById(y))&&document.getElementsByTagName("head")[0].removeChild(y)}d.exports=function(y){var b=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],g=y,w=b.timeout||5e3,_=b.jsonpCallback||x,C=void 0;return new Promise(function(k,E){var j=b.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),A=_+"_"+j,O=(window[j]=function(N){k({ok:!0,json:function(){return Promise.resolve(N)}}),C&&clearTimeout(C),m(A),S(j)},g+=g.indexOf("?")===-1?"?":"&",document.createElement("script"));O.setAttribute("src",""+g+_+"="+j),b.charset&&O.setAttribute("charset",b.charset),O.id=A,document.getElementsByTagName("head")[0].appendChild(O),C=setTimeout(function(){E(new Error("JSONP request to "+y+" timed out")),S(j),m(A),window[j]=function(){S(j)}},w),O.onerror=function(){E(new Error("JSONP request to "+y+" failed")),S(j),m(A),C&&clearTimeout(C)}})}},f!==void 0&&h!==void 0?u(0,h):(u(u={exports:{}},u),this.fetchJsonp=u.exports)},{}],242:[function(r,h,f){var u=function(l){var d,x,S,m,y,b,g,w,_,C;if(!(l===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return C=l.document,d=function(){return l.URL||l.webkitURL||l},x=C.createElementNS("http://www.w3.org/1999/xhtml","a"),S="download"in x,m=/constructor/i.test(l.HTMLElement)||l.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent),b=function(k){(l.setImmediate||l.setTimeout)(function(){throw k},0)},g=function(k){setTimeout(function(){typeof k=="string"?d().revokeObjectURL(k):k.remove()},4e4)},w=function(k){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(k.type)?new Blob(["\uFEFF",k],{type:k.type}):k},C=(_=function(k,E,j){j||(k=w(k));var A,O,N=this,D=(j=k.type==="application/octet-stream",function(){for(var z=N,$="writestart progress write writeend".split(" "),B=($=[].concat($)).length;B--;){var F=z["on"+$[B]];if(typeof F=="function")try{F.call(z,z)}catch(G){b(G)}}});N.readyState=N.INIT,S?(A=d().createObjectURL(k),setTimeout(function(){var z,$;x.href=A,x.download=E,z=x,$=new MouseEvent("click"),z.dispatchEvent($),D(),g(A),N.readyState=N.DONE})):(y||j&&m)&&l.FileReader?((O=new FileReader).onloadend=function(){var z=y?O.result:O.result.replace(/^data:[^;]*;/,"data:attachment/file;");l.open(z,"_blank")||(l.location.href=z),z=void 0,N.readyState=N.DONE,D()},O.readAsDataURL(k),N.readyState=N.INIT):(A=A||d().createObjectURL(k),!j&&l.open(A,"_blank")||(l.location.href=A),N.readyState=N.DONE,D(),g(A))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(k,E,j){return E=E||k.name||"download",j||(k=w(k)),navigator.msSaveOrOpenBlob(k,E)}:(C.abort=function(){},C.readyState=C.INIT=0,C.WRITING=1,C.DONE=2,C.error=C.onwritestart=C.onprogress=C.onwrite=C.onabort=C.onerror=C.onwriteend=null,function(k,E,j){return new _(k,E||k.name||"download",j)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);h!==void 0&&h.exports&&(h.exports.saveAs=u)},{}],243:[function(r,h,f){var u,l=Object.defineProperty,d=(l(f,"__esModule",{value:!0}),f),x={GIFEncoder:()=>D,applyPalette:()=>function(W,L,V="rgb565"){if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<L.length)throw new Error("applyPalette() only works with 256 colors or less");const Y=new Uint32Array(W.buffer),Z=Y.length,J=V==="rgb444"?4096:65536,ne=new Uint8Array(Z),se=new Array(J);if(V==="rgba4444")for(let we=0;we<Z;we++){var ie,X=(ie=Y[we])>>24&255,Q=ie>>16&255,re=ie>>8&255,ce=(ce=g(ie=255&ie,re,Q,X))in se?se[ce]:se[ce]=function(ke,ve,_e,Me,He){let ze=0,st=1e100;for(let Lt=0;Lt<He.length;Lt++){var gt=He[Lt],pt=A(gt[3]-Me);pt>st||(pt+=A(gt[0]-ke))>st||(pt+=A(gt[1]-ve))>st||(pt+=A(gt[2]-_e))>st||(st=pt,ze=Lt)}return ze}(ie,re,Q,X,L);ne[we]=ce}else{const we=V==="rgb444"?w:b;for(let ke=0;ke<Z;ke++){var he,fe=(he=Y[ke])>>16&255,oe=he>>8&255,me=(me=we(he=255&he,oe,fe))in se?se[me]:se[me]=function(ve,_e,Me,He){let ze=0,st=1e100;for(let Lt=0;Lt<He.length;Lt++){var gt=He[Lt],pt=A(gt[0]-ve);pt>st||(pt+=A(gt[1]-_e))>st||(pt+=A(gt[2]-Me))>st||(st=pt,ze=Lt)}return ze}(he,oe,fe,L);ne[ke]=me}}return ne},default:()=>G,nearestColor:()=>function(W,L,V=E){return W[O(W,L,V)]},nearestColorIndex:()=>O,nearestColorIndexWithDistance:()=>N,prequantize:()=>function(W,{roundRGB:L=5,roundAlpha:V=10,oneBitAlpha:Y=null}={}){const Z=new Uint32Array(W.buffer);for(let ie=0;ie<Z.length;ie++){let X=(se=Z[ie])>>24&255;var J=se>>16&255,ne=se>>8&255,se=255&se;X=j(X,V),Y&&(X=X<=(typeof Y=="number"?Y:127)?0:255),se=j(se,L),ne=j(ne,L),J=j(J,L),Z[ie]=X<<24|J<<16|ne<<8|se<<0}},quantize:()=>function(W,L,V={}){var{format:Y="rgb565",clearAlpha:Z=!0,clearAlphaColor:J=0,clearAlphaThreshold:ne=0,oneBitAlpha:se=!1}=V;if(!W||!W.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(W instanceof Uint8Array||W instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");W=new Uint32Array(W.buffer);let ie=V.useSqrt!==!1;const X=Y==="rgba4444",Q=function(xe,We){const Ve=new Array(We==="rgb444"?4096:65536),dt=xe.length;if(We==="rgba4444")for(let wt=0;wt<dt;++wt){var Ct,Ft=(Ct=xe[wt])>>24&255,kt=Ct>>16&255,Tt=Ct>>8&255,ue=g(Ct=255&Ct,Tt,kt,Ft);let At=ue in Ve?Ve[ue]:Ve[ue]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};At.rc+=Ct,At.gc+=Tt,At.bc+=kt,At.ac+=Ft,At.cnt++}else if(We==="rgb444")for(let wt=0;wt<dt;++wt){var le,de=(le=xe[wt])>>16&255,be=le>>8&255,Ae=w(le=255&le,be,de);let At=Ae in Ve?Ve[Ae]:Ve[Ae]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};At.rc+=le,At.gc+=be,At.bc+=de,At.cnt++}else for(let wt=0;wt<dt;++wt){var Ze,yt=(Ze=xe[wt])>>16&255,ht=Ze>>8&255,De=b(Ze=255&Ze,ht,yt);let At=De in Ve?Ve[De]:Ve[De]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};At.rc+=Ze,At.gc+=ht,At.bc+=yt,At.cnt++}return Ve}(W,Y),re=Q.length,ce=re-1,he=new Uint32Array(re+1);for(var fe=0,oe=0;oe<re;++oe){const xe=Q[oe];xe!=null&&(pt=1/xe.cnt,X&&(xe.ac*=pt),xe.rc*=pt,xe.gc*=pt,xe.bc*=pt,Q[fe++]=xe)}C(L)/fe<.022&&(ie=!1);var me,we,ke;for(oe=0;oe<fe-1;++oe)Q[oe].fw=oe+1,Q[oe+1].bk=oe,ie&&(Q[oe].cnt=Math.sqrt(Q[oe].cnt));for(ie&&(Q[oe].cnt=Math.sqrt(Q[oe].cnt)),oe=0;oe<fe;++oe){k(Q,oe);var ve=Q[oe].err;for(we=++he[0];1<we&&!(Q[me=he[ke=we>>1]].err<=ve);we=ke)he[we]=me;he[we]=oe}var _e,Me=fe-L;for(oe=0;oe<Me;){for(;;){var He=he[1];if((_e=Q[He]).tm>=_e.mtm&&Q[_e.nn].mtm<=_e.tm)break;for(_e.mtm==ce?He=he[1]=he[he[0]--]:(k(Q,He),_e.tm=oe),ve=Q[He].err,we=1;(ke=we+we)<=he[0]&&(ke<he[0]&&Q[he[ke]].err>Q[he[ke+1]].err&&ke++,!(ve<=Q[me=he[ke]].err));we=ke)he[we]=me;he[we]=He}var ze=Q[_e.nn],st=_e.cnt,gt=ze.cnt,pt=1/(st+gt);X&&(_e.ac=pt*(st*_e.ac+gt*ze.ac)),_e.rc=pt*(st*_e.rc+gt*ze.rc),_e.gc=pt*(st*_e.gc+gt*ze.gc),_e.bc=pt*(st*_e.bc+gt*ze.bc),_e.cnt+=ze.cnt,_e.mtm=++oe,Q[ze.bk].fw=ze.fw,Q[ze.fw].bk=ze.bk,ze.mtm=ce}let Lt=[];for(oe=0;;0){let xe=_(Math.round(Q[oe].rc),0,255),We=_(Math.round(Q[oe].gc),0,255),Ve=_(Math.round(Q[oe].bc),0,255),dt=255;X&&(dt=_(Math.round(Q[oe].ac),0,255),se&&(dt=dt<=(_t=typeof se=="number"?se:127)?0:255),Z&&dt<=ne&&(xe=We=Ve=J,dt=0));var _t=X?[xe,We,Ve,dt]:[xe,We,Ve];if(function(Ct,Ft){for(let ue=0;ue<Ct.length;ue++){var kt=(Tt=Ct[ue])[0]===Ft[0]&&Tt[1]===Ft[1]&&Tt[2]===Ft[2],Tt=!(4<=Tt.length&&4<=Ft.length)||Tt[3]===Ft[3];if(kt&&Tt)return!0}return!1}(Lt,_t)||Lt.push(_t),(oe=Q[oe].fw)==0)break}return Lt},snapColorsToPalette:()=>function(W,L,V=5){if(W.length&&L.length){var Y=W.map(ie=>ie.slice(0,3)),Z=V*V,J=W[0].length;for(let ie=0;ie<L.length;ie++){let X=L[ie];X=X.length<J?[X[0],X[1],X[2],255]:X.length>J?X.slice(0,3):X.slice();var ne,se=(ne=N(Y,X.slice(0,3),E))[0];0<(ne=ne[1])&&ne<=Z&&(W[se]=X)}}}};for(u in x)l(d,u,{get:x[u],enumerable:!0});var S=59;function m(W=256){let L=0,V=new Uint8Array(W);return{get buffer(){return V.buffer},reset(){L=0},bytesView:()=>V.subarray(0,L),bytes:()=>V.slice(0,L),writeByte(Z){Y(L+1),V[L]=Z,L++},writeBytes(Z,J=0,ne=Z.length){Y(L+ne);for(let se=0;se<ne;se++)V[L++]=Z[se+J]},writeBytesView(Z,J=0,ne=Z.byteLength){Y(L+ne),V.set(Z.subarray(J,J+ne),L),L+=ne}};function Y(Z){var J=V.length;if(!(Z<=J)){Z=Math.max(Z,J*(J<1048576?2:1.125)>>>0),J!=0&&(Z=Math.max(Z,256));const ne=V;V=new Uint8Array(Z),0<L&&V.set(ne.subarray(0,L),0)}}}var y=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function b(W,L,V){return W<<8&63488|L<<2&992|V>>3}function g(W,L,V,Y){return W>>4|240&L|(240&V)<<4|(240&Y)<<8}function w(W,L,V){return W>>4<<8|240&L|V>>4}function _(W,L,V){return W<L?L:V<W?V:W}function C(W){return W*W}function k(W,L,V){var Y=0,Z=1e100;const J=W[L];for(var ne=J.cnt,se=J.ac,ie=J.rc,X=J.gc,Q=J.bc,re=J.fw;re!=0;re=W[re].fw){var ce,he,fe=W[re];Z<=(he=ne*(he=fe.cnt)/(ne+he))||(ce=0,Z<=(ce+=he*C(fe.rc-ie))||Z<=(ce+=he*C(fe.gc-X))||Z<=(ce+=he*C(fe.bc-Q))||(Z=ce,Y=re))}J.err=Z,J.nn=Y}function E(W,L){for(var V=0,Y=0;Y<W.length;Y++){var Z=W[Y]-L[Y];V+=Z*Z}return V}function j(W,L){return 1<L?Math.round(W/L)*L:W}function A(W){return W*W}function O(W,L,V=E){let Y=1/0,Z=-1;for(let ne=0;ne<W.length;ne++){var J=V(L,W[ne]);J<Y&&(Y=J,Z=ne)}return Z}function N(W,L,V=E){let Y=1/0,Z=-1;for(let ne=0;ne<W.length;ne++){var J=V(L,W[ne]);J<Y&&(Y=J,Z=ne)}return[Z,Y]}function D(W={}){const{initialCapacity:L=4096,auto:V=!0}=W,Y=m(L),Z=new Uint8Array(256),J=new Int32Array(5003),ne=new Int32Array(5003);let se=!1;return{reset(){Y.reset(),se=!1},finish(){Y.writeByte(S)},bytes:()=>Y.bytes(),bytesView:()=>Y.bytesView(),get buffer(){return Y.buffer},get stream(){return Y},writeHeader:ie,writeFrame(X,Q,re,ce={}){var{transparent:he=!1,transparentIndex:fe=0,delay:gt=0,palette:oe=null,repeat:He=0,colorDepth:me=8,dispose:we=-1}=ce;let ke=!1;if(V?se||(ke=!0,ie(),se=!0):ke=!!ce.first,Q=Math.max(0,Math.floor(Q)),re=Math.max(0,Math.floor(re)),ke){if(!oe)throw new Error("First frame must include a { palette } option");var[ce,ze,_e,st,Me=8]=[Y,Q,re,oe,me];Me=128|Me-1<<4|(st=F(st.length)-1),$(ce,ze),$(ce,_e),ce.writeBytes([Me,0,0]),z(Y,oe),0<=He&&(ze=He,(st=Y).writeByte(33),st.writeByte(255),st.writeByte(11),B(st,"NETSCAPE2.0"),st.writeByte(3),st.writeByte(1),$(st,ze),st.writeByte(0))}var ve,_e,Me=we,He=_e=Math.round(gt/10),ze=he,st=fe,gt=((ce=Y).writeByte(33),ce.writeByte(249),ce.writeByte(4),st<0&&(st=0,ze=!1),ze=ze?(ve=1,2):ve=0,0<=Me&&(ze=7&Me),ze<<=2,ce.writeByte(0|ze|ve),$(ce,He),ce.writeByte(st||0),ce.writeByte(0),!!oe&&!ke);he=Q,fe=re,ve=gt?oe:null,(we=Y).writeByte(44),$(we,0),$(we,0),$(we,he),$(we,fe),ve?(he=F(ve.length)-1,we.writeByte(128|he)):we.writeByte(0),gt&&z(Y,oe),[He,ce,fe,he,we=8,gt,oe,X]=[Y,X,Q,re,me,Z,J,ne],function(pt,Lt,_t,xe,We=m(512),Ve=new Uint8Array(256),dt=new Int32Array(5003),Ct=new Int32Array(5003)){var Ft=dt.length;xe=Math.max(2,xe),Ve.fill(0),Ct.fill(0),dt.fill(-1);let kt=0,Tt=0;var ue=xe+1;const le=ue;let de=!1,be=le,Ae=(1<<be)-1;var Ze=1<<ue-1;const yt=1+Ze;let ht=2+Ze,De=0,wt=_t[0],At=0;for(let Qt=Ft;Qt<65536;Qt*=2)++At;At=8-At,We.writeByte(xe),qt(Ze);var nn=_t.length;for(let Qt=1;Qt<nn;Qt++)e:{var hn=_t[Qt],sn=(hn<<12)+wt;let an=hn<<At^wt;if(dt[an]===sn)wt=Ct[an];else{for(var tn=an===0?1:Ft-an;0<=dt[an];)if((an-=tn)<0&&(an+=Ft),dt[an]===sn){wt=Ct[an];break e}qt(wt),wt=hn,ht<4096?(Ct[an]=ht++,dt[an]=sn):(dt.fill(-1),ht=2+Ze,de=!0,qt(Ze))}}return qt(wt),qt(yt),We.writeByte(0),We.bytesView();function qt(Qt){for(kt&=y[Tt],0<Tt?kt|=Qt<<Tt:kt=Qt,Tt+=be;8<=Tt;)Ve[De++]=255&kt,254<=De&&(We.writeByte(De),We.writeBytesView(Ve,0,De),De=0),kt>>=8,Tt-=8;if((ht>Ae||de)&&(de?(be=le,Ae=(1<<be)-1,de=!1):(++be,Ae=be===12?1<<be:(1<<be)-1)),Qt==yt){for(;0<Tt;)Ve[De++]=255&kt,254<=De&&(We.writeByte(De),We.writeBytesView(Ve,0,De),De=0),kt>>=8,Tt-=8;0<De&&(We.writeByte(De),We.writeBytesView(Ve,0,De),De=0)}}}(0,0,ce,we,He,gt,oe,X)}};function ie(){B(Y,"GIF89a")}}function z(W,L){var V=1<<F(L.length);for(let Y=0;Y<V;Y++){let Z=[0,0,0];Y<L.length&&(Z=L[Y]),W.writeByte(Z[0]),W.writeByte(Z[1]),W.writeByte(Z[2])}}function $(W,L){W.writeByte(255&L),W.writeByte(L>>8&255)}function B(W,L){for(var V=0;V<L.length;V++)W.writeByte(L.charCodeAt(V))}function F(W){return Math.max(Math.ceil(Math.log2(W)),1)}var G=D},{}],244:[function(r,h,f){f.read=function(u,l,d,x,S){var m,y,b=8*S-x-1,g=(1<<b)-1,w=g>>1,_=-7,C=d?S-1:0,k=d?-1:1;for(S=u[l+C],C+=k,m=S&(1<<-_)-1,S>>=-_,_+=b;0<_;m=256*m+u[l+C],C+=k,_-=8);for(y=m&(1<<-_)-1,m>>=-_,_+=x;0<_;y=256*y+u[l+C],C+=k,_-=8);if(m===0)m=1-w;else{if(m===g)return y?NaN:1/0*(S?-1:1);y+=Math.pow(2,x),m-=w}return(S?-1:1)*y*Math.pow(2,m-x)},f.write=function(u,l,d,x,S,m){var y,b,g=8*m-S-1,w=(1<<g)-1,_=w>>1,C=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=x?0:m-1,E=x?1:-1;for(m=l<0||l===0&&1/l<0?1:0,l=Math.abs(l),isNaN(l)||l===1/0?(b=isNaN(l)?1:0,y=w):(y=Math.floor(Math.log(l)/Math.LN2),l*(x=Math.pow(2,-y))<1&&(y--,x*=2),2<=(l+=1<=y+_?C/x:C*Math.pow(2,1-_))*x&&(y++,x/=2),w<=y+_?(b=0,y=w):1<=y+_?(b=(l*x-1)*Math.pow(2,S),y+=_):(b=l*Math.pow(2,_-1)*Math.pow(2,S),y=0));8<=S;u[d+k]=255&b,k+=E,b/=256,S-=8);for(y=y<<S|b,g+=S;0<g;u[d+k]=255&y,k+=E,y/=256,g-=8);u[d+k-E]|=128*m}},{}],245:[function(r,h,f){var u;function l(ue,le){return ue.b===le.b&&ue.a===le.a}function d(ue,le){return ue.b<le.b||ue.b===le.b&&ue.a<=le.a}function x(ue,le,de){var be=le.b-ue.b,Ae=de.b-le.b;return 0<be+Ae?be<Ae?le.a-ue.a+be/(be+Ae)*(ue.a-de.a):le.a-de.a+Ae/(be+Ae)*(de.a-ue.a):0}function S(ue,le,de){var be=le.b-ue.b,Ae=de.b-le.b;return 0<be+Ae?(le.a-de.a)*be+(le.a-ue.a)*Ae:0}function m(ue,le){return ue.a<le.a||ue.a===le.a&&ue.b<=le.b}function y(ue,le,de){var be=le.a-ue.a,Ae=de.a-le.a;return 0<be+Ae?be<Ae?le.b-ue.b+be/(be+Ae)*(ue.b-de.b):le.b-de.b+Ae/(be+Ae)*(de.b-ue.b):0}function b(ue,le,de){var be=le.a-ue.a,Ae=de.a-le.a;return 0<be+Ae?(le.b-de.b)*be+(le.b-ue.b)*Ae:0}function g(ue,le,de,be){return(ue=ue<0?0:ue)<=(de=de<0?0:de)?de===0?(le+be)/2:le+ue/(ue+de)*(be-le):be+de/(ue+de)*(le-be)}function w(ue){var le=j(ue.b);return O(le,ue.c),O(le.b,ue.c),N(le,ue.a),le}function _(ue,le){var de=!1,be=!1;ue!==le&&(le.a!==ue.a&&(be=!0,z(le.a,ue.a)),le.d!==ue.d&&(de=!0,$(le.d,ue.d)),A(le,ue),be||(O(le,ue.a),ue.a.c=ue),de||(N(le,ue.d),ue.d.a=ue))}function C(ue){var le=ue.b,de=!1;ue.d!==ue.b.d&&(de=!0,$(ue.d,ue.b.d)),ue.c===ue?z(ue.a,null):(ue.b.d.a=ue.b.e,ue.a.c=ue.c,A(ue,ue.b.e),de||N(ue,ue.d)),le.c===le?(z(le.a,null),$(le.d,null)):(ue.d.a=le.b.e,le.a.c=le.c,A(le,le.b.e)),D(ue)}function k(ue){var le=j(ue),de=le.b;return A(le,ue.e),le.a=ue.b.a,O(de,le.a),le.d=de.d=ue.d,le=le.b,A(ue.b,ue.b.b.e),A(ue.b,le),ue.b.a=le.a,le.b.a.c=le.b,le.b.d=ue.b.d,le.f=ue.f,le.b.f=ue.b.f,le}function E(ue,le){var de=!1,be=j(ue),Ae=be.b;return le.d!==ue.d&&(de=!0,$(le.d,ue.d)),A(be,ue.e),A(Ae,le),be.a=ue.b.a,Ae.a=le.a,be.d=Ae.d=ue.d,ue.d.a=Ae,de||N(be,ue.d),be}function j(ue){var le=new He,de=new He,be=ue.b.h;return(((de.h=be).b.h=le).h=ue).b.h=de,le.b=de,((le.c=le).e=de).b=le,(de.c=de).e=le}function A(ue,le){var de=ue.c,be=le.c;de.b.e=le,(be.b.e=ue).c=be,le.c=de}function O(ue,le){var de=le.f,be=new st(le,de);for(de.e=be,de=(le.f=be).c=ue;de.a=be,(de=de.c)!==ue;);}function N(ue,le){var de=le.d,be=new Me(le,de);for(de.b=be,(le.d=be).a=ue,be.c=le.c,de=ue;de.d=be,(de=de.e)!==ue;);}function D(ue){var le=ue.h;ue=ue.b.h,(le.b.h=ue).b.h=le}function z(ue,le){for(var de=ue.c,be=de;be.a=le,(be=be.c)!==de;);de=ue.f,((be=ue.e).f=de).e=be}function $(ue,le){for(var de=ue.a,be=de;be.d=le,(be=be.e)!==de;);de=ue.d,((be=ue.b).d=de).b=be}function B(ue){var le=0;return Math.abs(ue[1])>Math.abs(ue[0])&&(le=1),Math.abs(ue[2])>Math.abs(ue[le])?2:le}function F(ue,le){ue.f+=le.f,ue.b.f+=le.b.f}function G(ue,le,de){return ue=ue.a,le=le.a,de=de.a,le.b.a===ue?de.b.a===ue?d(le.a,de.a)?S(de.b.a,le.a,de.a)<=0:0<=S(le.b.a,de.a,le.a):S(de.b.a,ue,de.a)<=0:de.b.a===ue?0<=S(le.b.a,ue,le.a):(le=x(le.b.a,ue,le.a),(ue=x(de.b.a,ue,de.a))<=le)}function W(ue){ue.a.i=null;var le=ue.e;le.a.c=le.c,le.c.a=le.a,ue.e=null}function L(ue,le){C(ue.a),ue.c=!1,(ue.a=le).i=ue}function V(ue){for(var le=ue.a.a;(ue=Tt(ue)).a.a===le;);return ue.c&&(L(ue,le=E(kt(ue).a.b,ue.a.e)),ue=Tt(ue)),ue}function Y(ue,le,de){var be=new Ft;return be.a=de,be.e=me(ue.f,le.e,be),de.i=be}function Z(ue,le){switch(ue.s){case 100130:return(1&le)!=0;case 100131:return le!==0;case 100132:return 0<le;case 100133:return le<0;case 100134:return 2<=le||le<=-2}return!1}function J(ue){var le=ue.a,de=le.d;de.c=ue.d,de.a=le,W(ue)}function ne(ue,le,de){for(le=(ue=le).a;ue!==de;){ue.c=!1;var be=kt(ue),Ae=be.a;if(Ae.a!==le.a){if(!be.c){J(ue);break}L(be,Ae=E(le.c.b,Ae.b))}le.c!==Ae&&(_(Ae.b.e,Ae),_(le,Ae)),J(ue),le=be.a,ue=be}return le}function se(ue,le,de,be,Ae,Ze){for(var yt=!0;Y(ue,le,de.b),(de=de.c)!==be;);for(Ae===null&&(Ae=kt(le).a.b.c);(de=(be=kt(le)).a.b).a===Ae.a;)de.c!==Ae&&(_(de.b.e,de),_(Ae.b.e,de)),be.f=le.f-de.f,be.d=Z(ue,be.f),le.b=!0,!yt&&re(ue,le)&&(F(de,Ae),W(le),C(Ae)),yt=!1,le=be,Ae=de;le.b=!0,Ze&&he(ue,le)}function ie(ue,le,de,be,Ae){var Ze=[le.g[0],le.g[1],le.g[2]];le.d=null,le.d=ue.o&&ue.o(Ze,de,be,ue.c)||null,le.d===null&&(Ae?ue.n||(_e(ue,100156),ue.n=!0):le.d=de[0])}function X(ue,le,de){var be=[null,null,null,null];be[0]=le.a.d,be[1]=de.a.d,ie(ue,le.a,be,[.5,.5,0,0],!1),_(le,de)}function Q(ue,le,de,be,Ae){var Ze=Math.abs(le.b-ue.b)+Math.abs(le.a-ue.a),yt=Math.abs(de.b-ue.b)+Math.abs(de.a-ue.a),ht=Ae+1;be[Ae]=.5*yt/(Ze+yt),be[ht]=.5*Ze/(Ze+yt),ue.g[0]+=be[Ae]*le.g[0]+be[ht]*de.g[0],ue.g[1]+=be[Ae]*le.g[1]+be[ht]*de.g[1],ue.g[2]+=be[Ae]*le.g[2]+be[ht]*de.g[2]}function re(ue,le){var de=kt(le),be=le.a,Ae=de.a;if(d(be.a,Ae.a)){if(0<S(Ae.b.a,be.a,Ae.a))return;if(l(be.a,Ae.a)){if(be.a!==Ae.a){de=ue.e;var Ze=be.a.h;if(0<=Ze){var yt=(de=de.b).d,ht=de.e,De=de.c,wt=De[Ze];yt[wt]=yt[de.a],(De[yt[wt]]=wt)<=--de.a&&(wt<=1||d(ht[yt[wt>>1]],ht[yt[wt]])?dt:Ct)(de,wt),ht[Ze]=null,De[Ze]=de.b,de.b=Ze}else for(de.c[-(Ze+1)]=null;0<de.a&&de.c[de.d[de.a-1]]===null;)--de.a;X(ue,Ae.b.e,be)}}else k(Ae.b),_(be,Ae.b.e),le.b=de.b=!0}else{if(S(be.b.a,Ae.a,be.a)<0)return;Tt(le).b=le.b=!0,k(be.b),_(Ae.b.e,be)}return 1}function ce(ue,le){var de=kt(le),be=le.a,Ae=de.a,Ze=be.a,yt=Ae.a,ht=be.b.a,De=Ae.b.a,wt=new st;if(S(ht,ue.a,Ze),S(De,ue.a,yt),!(Ze===yt||Math.min(Ze.a,ht.a)>Math.max(yt.a,De.a))){if(d(Ze,yt)){if(0<S(De,Ze,yt))return}else if(S(ht,yt,Ze)<0)return;var At,nn,hn=ht,sn=Ze,tn=De,qt=yt;if(d(hn,sn)||(At=hn,hn=sn,sn=At),d(tn,qt)||(At=tn,tn=qt,qt=At),d(hn,tn)||(At=hn,hn=tn,tn=At,At=sn,sn=qt,qt=At),d(tn,sn)?d(sn,qt)?((At=x(hn,tn,sn))+(nn=x(tn,sn,qt))<0&&(At=-At,nn=-nn),wt.b=g(At,tn.b,nn,sn.b)):((At=S(hn,tn,sn))+(nn=-S(hn,qt,sn))<0&&(At=-At,nn=-nn),wt.b=g(At,tn.b,nn,qt.b)):wt.b=(tn.b+sn.b)/2,m(hn,sn)||(At=hn,hn=sn,sn=At),m(tn,qt)||(At=tn,tn=qt,qt=At),m(hn,tn)||(At=hn,hn=tn,tn=At,At=sn,sn=qt,qt=At),m(tn,sn)?m(sn,qt)?((At=y(hn,tn,sn))+(nn=y(tn,sn,qt))<0&&(At=-At,nn=-nn),wt.a=g(At,tn.a,nn,sn.a)):((At=b(hn,tn,sn))+(nn=-b(hn,qt,sn))<0&&(At=-At,nn=-nn),wt.a=g(At,tn.a,nn,qt.a)):wt.a=(tn.a+sn.a)/2,d(wt,ue.a)&&(wt.b=ue.a.b,wt.a=ue.a.a),hn=d(Ze,yt)?Ze:yt,d(hn,wt)&&(wt.b=hn.b,wt.a=hn.a),l(wt,Ze)||l(wt,yt))return re(ue,le),0;if(!l(ht,ue.a)&&0<=S(ht,ue.a,wt)||!l(De,ue.a)&&S(De,ue.a,wt)<=0){if(De===ue.a)k(be.b),_(Ae.b,be),be=kt(le=V(le)).a,ne(ue,kt(le),de),se(ue,le,be.b.e,be,be,!0);else{if(ht!==ue.a)return 0<=S(ht,ue.a,wt)&&(Tt(le).b=le.b=!0,k(be.b),be.a.b=ue.a.b,be.a.a=ue.a.a),void(S(De,ue.a,wt)<=0&&(le.b=de.b=!0,k(Ae.b),Ae.a.b=ue.a.b,Ae.a.a=ue.a.a));for(k(Ae.b),_(be.e,Ae.b.e),yt=(Ze=de=le).a.b.a;(Ze=Tt(Ze)).a.b.a===yt;);Ze=kt(le=Ze).a.b.c,de.a=Ae.b.e,se(ue,le,(Ae=ne(ue,de,null)).c,be.b.c,Ze,!0)}return 1}k(be.b),k(Ae.b),_(Ae.b.e,be),be.a.b=wt.b,be.a.a=wt.a,be.a.h=pt(ue.e,be.a),be=be.a,Ae=[0,0,0,0],wt=[Ze.d,ht.d,yt.d,De.d],be.g[0]=be.g[1]=be.g[2]=0,Q(be,Ze,ht,Ae,0),Q(be,yt,De,Ae,2),ie(ue,be,wt,Ae,!0),Tt(le).b=le.b=de.b=!0}}function he(ue,le){for(var de=kt(le);;){for(;de.b;)de=kt(le=de);if(!(le.b||(le=Tt(de=le))!==null&&le.b))break;le.b=!1;var be=le.a,Ae=de.a;if(Ze=be.b.a!==Ae.b.a)e:{var Ze,yt=kt(Ze=le),ht=Ze.a,De=yt.a,wt=void 0;if(d(ht.b.a,De.b.a)){if(S(ht.b.a,De.b.a,ht.a)<0){Ze=!1;break e}Tt(Ze).b=Ze.b=!0,wt=k(ht),_(De.b,wt),wt.d.c=Ze.d}else{if(0<S(De.b.a,ht.b.a,De.a)){Ze=!1;break e}Ze.b=yt.b=!0,wt=k(De),_(ht.e,De.b),wt.b.d.c=Ze.d}Ze=!0}if(Ze&&(de.c?(W(de),C(Ae),Ae=(de=kt(le)).a):le.c&&(W(le),C(be),be=(le=Tt(de)).a)),be.a!==Ae.a){if(be.b.a===Ae.b.a||le.c||de.c||be.b.a!==ue.a&&Ae.b.a!==ue.a)re(ue,le);else if(ce(ue,le))break}be.a===Ae.a&&be.b.a===Ae.b.a&&(F(Ae,be),W(le),C(be),le=Tt(de))}}function fe(ue,le){var de=new Ft,be=w(ue.b);be.a.b=4e150,be.a.a=le,be.b.a.b=-4e150,be.b.a.a=le,ue.a=be.b.a,de.a=be,de.f=0,de.d=!1,de.c=!1,de.h=!0,de.b=!1,be=me(be=ue.f,be.a,de),de.e=be}function oe(ue){this.a=new we,this.b=ue,this.c=G}function me(ue,le,de){for(;(le=le.c).b!==null&&!ue.c(ue.b,le.b,de););return ue=new we(de,le.a,le),le.a.c=ue,le.a=ue}function we(ue,le,de){this.b=ue||null,this.a=le||this,this.c=de||this}function ke(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function ve(ue,le){if(ue.d!==le)for(;ue.d!==le;)if(ue.d<le)switch(ue.d){case 0:_e(ue,100151),ue.u(null);break;case 1:_e(ue,100152),ue.t()}else switch(ue.d){case 2:_e(ue,100154),ue.v();break;case 1:_e(ue,100153),ue.w()}}function _e(ue,le){ue.p&&ue.p(le,ue.c)}function Me(ue,le){this.b=ue||this,this.d=le||this,this.a=null,this.c=!1}function He(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function ze(){this.c=new st,this.a=new Me,this.b=new He,this.d=new He,this.b.b=this.d,this.d.b=this.b}function st(ue,le){this.e=ue||this,this.f=le||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function gt(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new _t}function pt(ue,le){var de,be,Ae;return ue.e?(2*(be=++(de=ue.b).a)>de.f&&(de.f*=2,de.c=xe(de.c,de.f+1)),de.b===0?Ae=be:(Ae=de.b,de.b=de.c[de.b]),de.e[Ae]=le,de.c[Ae]=be,de.d[be]=Ae,de.h&&Ct(de,be),Ae):(de=ue.a++,ue.c[de]=le,-(de+1))}function Lt(ue){if(ue.a===0)return Ve(ue.b);var le=ue.c[ue.d[ue.a-1]];if(ue.b.a!==0&&d(We(ue.b),le))return Ve(ue.b);for(;--ue.a,0<ue.a&&ue.c[ue.d[ue.a-1]]===null;);return le}function _t(){this.d=xe([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function xe(ue,le){for(var de=Array(le),be=0;be<ue.length;be++)de[be]=ue[be];for(;be<le;be++)de[be]=0;return de}function We(ue){return ue.e[ue.d[1]]}function Ve(ue){var le=ue.d,de=ue.e,be=ue.c,Ae=le[1],Ze=de[Ae];return 0<ue.a&&(le[1]=le[ue.a],be[le[1]]=1,de[Ae]=null,be[Ae]=ue.b,ue.b=Ae,0<--ue.a&&dt(ue,1)),Ze}function dt(ue,le){for(var de=ue.d,be=ue.e,Ae=ue.c,Ze=le,yt=de[Ze];;){var ht=Ze<<1,De=(ht<ue.a&&d(be[de[ht+1]],be[de[ht]])&&(ht+=1),de[ht]);if(ht>ue.a||d(be[yt],be[De])){Ae[de[Ze]=yt]=Ze;break}Ae[de[Ze]=De]=Ze,Ze=ht}}function Ct(ue,le){for(var de=ue.d,be=ue.e,Ae=ue.c,Ze=le,yt=de[Ze];;){var ht=Ze>>1,De=de[ht];if(ht==0||d(be[De],be[yt])){Ae[de[Ze]=yt]=Ze;break}Ae[de[Ze]=De]=Ze,Ze=ht}}function Ft(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function kt(ue){return ue.e.c.b}function Tt(ue){return ue.e.a.b}(u=ke.prototype).x=function(){ve(this,0)},u.B=function(ue,le){switch(ue){case 100142:return;case 100140:switch(le){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=le)}break;case 100141:return void(this.m=!!le);default:return void _e(this,100900)}_e(this,100901)},u.y=function(ue){switch(ue){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:_e(this,100900)}return!1},u.A=function(ue,le,de){this.j[0]=ue,this.j[1]=le,this.j[2]=de},u.z=function(ue,le){var de=le||null;switch(ue){case 100100:case 100106:this.h=de;break;case 100104:case 100110:this.l=de;break;case 100101:case 100107:this.k=de;break;case 100102:case 100108:this.i=de;break;case 100103:case 100109:this.p=de;break;case 100105:case 100111:this.o=de;break;case 100112:this.r=de;break;default:_e(this,100900)}},u.C=function(ue,le){var de=!1,be=[0,0,0];ve(this,2);for(var Ae=0;Ae<3;++Ae){var Ze=ue[Ae];Ze<-1e150&&(Ze=-1e150,de=!0),1e150<Ze&&(Ze=1e150,de=!0),be[Ae]=Ze}de&&_e(this,100155),(de=this.q)===null?_(de=w(this.b),de.b):(k(de),de=de.e),de.a.d=le,de.a.g[0]=be[0],de.a.g[1]=be[1],de.a.g[2]=be[2],de.f=1,de.b.f=-1,this.q=de},u.u=function(ue){ve(this,0),this.d=1,this.b=new ze,this.c=ue},u.t=function(){ve(this,1),this.d=2,this.q=null},u.v=function(){ve(this,2),this.d=1},u.w=function(){ve(this,1),this.d=0;var ue,le,de=!1,be=[De=this.j[0],Ae=this.j[1],yt=this.j[2]];if(De===0&&Ae===0&&yt===0){for(var Ae=[-2e150,-2e150,-2e150],Ze=[2e150,2e150,2e150],yt=[],ht=[],De=(de=this.b.c).e;De!==de;De=De.e)for(var wt=0;wt<3;++wt){var At=De.g[wt];At<Ze[wt]&&(Ze[wt]=At,ht[wt]=De),At>Ae[wt]&&(Ae[wt]=At,yt[wt]=De)}if(Ae[1]-Ze[1]>Ae[De=0]-Ze[0]&&(De=1),Ze[De=Ae[2]-Ze[2]>Ae[De]-Ze[De]?2:De]>=Ae[De])be[0]=0,be[1]=0,be[2]=1;else{for(Ze=ht[De],yt=yt[De],ht=[Ae=0,0,0],Ze=[Ze.g[0]-yt.g[0],Ze.g[1]-yt.g[1],Ze.g[2]-yt.g[2]],wt=[0,0,0],De=de.e;De!==de;De=De.e)wt[0]=De.g[0]-yt.g[0],wt[1]=De.g[1]-yt.g[1],wt[2]=De.g[2]-yt.g[2],ht[0]=Ze[1]*wt[2]-Ze[2]*wt[1],ht[1]=Ze[2]*wt[0]-Ze[0]*wt[2],ht[2]=Ze[0]*wt[1]-Ze[1]*wt[0],Ae<(At=ht[0]*ht[0]+ht[1]*ht[1]+ht[2]*ht[2])&&(Ae=At,be[0]=ht[0],be[1]=ht[1],be[2]=ht[2]);Ae<=0&&(be[0]=be[1]=be[2]=0,be[B(Ze)]=1)}de=!0}for(ht=B(be),De=this.b.c,Ae=(ht+1)%3,yt=(ht+2)%3,ht=0<be[ht]?1:-1,be=De.e;be!==De;be=be.e)be.b=be.g[Ae],be.a=ht*be.g[yt];if(de){for(be=0,De=(de=this.b.a).b;De!==de;De=De.b)if(!((Ae=De.a).f<=0))for(;be+=(Ae.a.b-Ae.b.a.b)*(Ae.a.a+Ae.b.a.a),(Ae=Ae.e)!==De.a;);if(be<0)for(de=(be=this.b.c).e;de!==be;de=de.e)de.a=-de.a}for(this.n=!1,De=(be=this.b.b).h;De!==be;De=de)de=De.h,Ae=De.e,l(De.a,De.b.a)&&De.e.e!==De&&(X(this,Ae,De),C(De),Ae=(De=Ae).e),Ae.e===De&&(Ae!==De&&(Ae!==de&&Ae!==de.b||(de=de.h),C(Ae)),De!==de&&De!==de.b||(de=de.h),C(De));for(this.e=be=new gt,De=(de=this.b.c).e;De!==de;De=De.e)De.h=pt(be,De);var nn=be;nn.d=[];for(var hn=0;hn<nn.a;hn++)nn.d[hn]=hn;nn.d.sort(function(qt){return function(Qt,an){return d(qt[Qt],qt[an])?1:-1}}(nn.c)),nn.e=!0;for(var sn=nn.b,tn=sn.a;1<=tn;--tn)dt(sn,tn);for(sn.h=!0,this.f=new oe(this),fe(this,-4e150),fe(this,4e150);(be=Lt(this.e))!==null;){for(;;){e:if((De=this.e).a===0)de=We(De.b);else if(de=De.c[De.d[De.a-1]],De.b.a!==0&&d(De=We(De.b),de)){de=De;break e}if(de===null||!l(de,be))break;de=Lt(this.e),X(this,be.c,de.c)}(function qt(Qt,an){for(var pr,An=(Qt.a=an).c;An.i===null;)if((An=An.c)===an.c){An=Qt;var mr=an;(Cn=new Ft).a=mr.c.b;for(var Yr=(Sn=An.f).a;(Yr=Yr.a).b!==null&&!Sn.c(Sn.b,Cn,Yr.b););var Sn,vr,Cr=kt(Sn=Yr.b),Cn=Sn.a;return Yr=Cr.a,void(S(Cn.b.a,mr,Cn.a)===0?l((Cn=Sn.a).a,mr)||l(Cn.b.a,mr)||(k(Cn.b),Sn.c&&(C(Cn.c),Sn.c=!1),_(mr.c,Cn),qt(An,mr)):(vr=d(Yr.b.a,Cn.b.a)?Sn:Cr,Cr=void 0,Sn.d||vr.c?(Cr=vr===Sn?E(mr.c.b,Cn.e):E(Yr.b.c.b,mr.c).b,vr.c?L(vr,Cr):((Sn=Y(Cn=An,Sn,Cr)).f=Tt(Sn).f+Sn.a.f,Sn.d=Z(Cn,Sn.f)),qt(An,mr)):se(An,Sn,mr.c,mr.c,null,!0)))}Sn=(Cn=kt(An=V(An.i))).a,(Cn=ne(Qt,Cn,null)).c===Sn?(Cn=(Sn=Cn).c,Yr=kt(An),Cr=An.a,vr=Yr.a,pr=!1,Cr.b.a!==vr.b.a&&ce(Qt,An),l(Cr.a,Qt.a)&&(_(Cn.b.e,Cr),Cn=kt(An=V(An)).a,ne(Qt,kt(An),Yr),pr=!0),l(vr.a,Qt.a)&&(_(Sn,vr.b.e),Sn=ne(Qt,Yr,null),pr=!0),pr?se(Qt,An,Sn.c,Cn,Cn,!0):(mr=d(vr.a,Cr.a)?vr.b.e:Cr,se(Qt,An,mr=E(Sn.c.b,mr),mr.c,mr.c,!1),mr.b.i.c=!0,he(Qt,An))):se(Qt,An,Cn.c,Sn,Sn,!0)})(this,be)}for(this.a=this.f.a.a.b.a.a,be=0;(de=this.f.a.a.b)!==null;)de.h||++be,W(de);for(this.f=null,(be=this.e).b=null,be.d=null,this.e=be.c=null,De=(be=this.b).a.b;De!==be.a;De=de)de=De.b,(De=De.a).e.e===De&&(F(De.c,De),C(De));if(!this.n){if(be=this.b,this.m)for(De=be.b.h;De!==be.b;De=de)de=De.h,De.b.d.c!==De.d.c?De.f=De.d.c?1:-1:C(De);else for(De=be.a.b;De!==be.a;De=de)if(de=De.b,De.c){for(De=De.a;d(De.b.a,De.a);De=De.c.b);for(;d(De.a,De.b.a);De=De.e);for(Ae=De.c.b,yt=void 0;De.e!==Ae;)if(d(De.b.a,Ae.a)){for(;Ae.e!==De&&(d((le=Ae.e).b.a,le.a)||S(Ae.a,Ae.b.a,Ae.e.b.a)<=0);)Ae=(yt=E(Ae.e,Ae)).b;Ae=Ae.c.b}else{for(;Ae.e!==De&&(d((ue=De.c.b).a,ue.b.a)||0<=S(De.b.a,De.a,De.c.b.a));)De=(yt=E(De,De.c.b)).b;De=De.e}for(;Ae.e.e!==De;)Ae=(yt=E(Ae.e,Ae)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(de=(be=this.b).a.b;de!==be.a;de=de.b)if(de.c){for(this.h&&this.h(2,this.c),De=de.a;this.k&&this.k(De.a.d,this.c),(De=De.e)!==de.a;);this.i&&this.i(this.c)}}else{for(be=this.b,de=!!this.l,De=!1,Ae=-1,yt=be.a.d;yt!==be.a;yt=yt.d)if(yt.c)for(De||(this.h&&this.h(4,this.c),De=!0),ht=yt.a;de&&Ae!==(Ze=ht.b.d.c?0:1)&&(Ae=Ze,this.l&&this.l(!!Ae,this.c)),this.k&&this.k(ht.a.d,this.c),(ht=ht.e)!==yt.a;);De&&this.i&&this.i(this.c)}if(this.r){for(De=(be=this.b).a.b;De!==be.a;De=de)if(de=De.b,!De.c){for(yt=(Ae=De.a).e,ht=void 0;yt=(ht=yt).e,(ht.d=null)===ht.b.d&&(ht.c===ht?z(ht.a,null):(ht.a.c=ht.c,A(ht,ht.b.e)),(Ze=ht.b).c===Ze?z(Ze.a,null):(Ze.a.c=Ze.c,A(Ze,Ze.b.e)),D(ht)),ht!==Ae;);Ae=De.d,((De=De.b).d=Ae).b=De}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:ke,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},ke.prototype.gluDeleteTess=ke.prototype.x,ke.prototype.gluTessProperty=ke.prototype.B,ke.prototype.gluGetTessProperty=ke.prototype.y,ke.prototype.gluTessNormal=ke.prototype.A,ke.prototype.gluTessCallback=ke.prototype.z,ke.prototype.gluTessVertex=ke.prototype.C,ke.prototype.gluTessBeginPolygon=ke.prototype.u,ke.prototype.gluTessBeginContour=ke.prototype.t,ke.prototype.gluTessEndContour=ke.prototype.v,ke.prototype.gluTessEndPolygon=ke.prototype.w,h!==void 0&&(h.exports=this.libtess)},{}],246:[function(r,h,f){function u(l,d,x,S){for(var m=l[d++],y=1<<m,b=1+y,g=1+b,w=m+1,_=(1<<w)-1,C=0,k=0,E=0,j=l[d++],A=new Int32Array(4096),O=null;;){for(;C<16&&j!==0;)k|=l[d++]<<C,C+=8,j===1?j=l[d++]:--j;if(C<w)break;var N=k&_;if(k>>=w,C-=w,N==y)g=1+b,_=(1<<(w=m+1))-1,O=null;else{if(N==b)break;for(var D=N<g?N:O,z=0,$=D;y<$;)$=A[$]>>8,++z;var B=$;if(S<E+z+(D!==N?1:0))return void console.log("Warning, gif stream longer than expected.");x[E++]=B;var F=E+=z;for(D!==N&&(x[E++]=B),$=D;z--;)$=A[$],x[--F]=255&$,$>>=8;O!==null&&g<4096&&(A[g++]=O<<8|B,_+1<=g&&w<12&&(++w,_=_<<1|1)),O=N}}E!==S&&console.log("Warning, gif stream shorter than expected.")}try{f.GifWriter=function(l,d,x,S){var m=0,y=(S=S===void 0?{}:S).loop===void 0?null:S.loop,b=S.palette===void 0?null:S.palette;if(d<=0||x<=0||65535<d||65535<x)throw new Error("Width/Height invalid.");function g(O){if((O=O.length)<2||256<O||O&O-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return O}l[m++]=71,l[m++]=73,l[m++]=70,l[m++]=56,l[m++]=57,l[m++]=97;var w=0,_=0;if(b!==null){for(var C=g(b);C>>=1;)++w;if(C=1<<w,--w,S.background!==void 0){if(C<=(_=S.background))throw new Error("Background index out of range.");if(_===0)throw new Error("Background index explicitly passed as 0.")}}if(l[m++]=255&d,l[m++]=d>>8&255,l[m++]=255&x,l[m++]=x>>8&255,l[m++]=(b!==null?128:0)|w,l[m++]=_,l[m++]=0,b!==null)for(var k=0,E=b.length;k<E;++k){var j=b[k];l[m++]=j>>16&255,l[m++]=j>>8&255,l[m++]=255&j}if(y!==null){if(y<0||65535<y)throw new Error("Loop count invalid.");l[m++]=33,l[m++]=255,l[m++]=11,l[m++]=78,l[m++]=69,l[m++]=84,l[m++]=83,l[m++]=67,l[m++]=65,l[m++]=80,l[m++]=69,l[m++]=50,l[m++]=46,l[m++]=48,l[m++]=3,l[m++]=1,l[m++]=255&y,l[m++]=y>>8&255,l[m++]=0}var A=!1;this.addFrame=function(O,N,D,z,$,B){if(A===!0&&(--m,A=!1),B=B===void 0?{}:B,O<0||N<0||65535<O||65535<N)throw new Error("x/y invalid.");if(D<=0||z<=0||65535<D||65535<z)throw new Error("Width/Height invalid.");if($.length<D*z)throw new Error("Not enough pixels for the frame size.");var F=!0,G=B.palette;if(G==null&&(F=!1,G=b),G==null)throw new Error("Must supply either a local or global palette.");for(var W=g(G),L=0;W>>=1;)++L;W=1<<L;var V=B.delay===void 0?0:B.delay,Y=B.disposal===void 0?0:B.disposal;if(Y<0||3<Y)throw new Error("Disposal out of range.");var Z=!1,J=0;if(B.transparent!==void 0&&B.transparent!==null&&(Z=!0,(J=B.transparent)<0||W<=J))throw new Error("Transparent color index.");if(Y===0&&!Z&&V===0||(l[m++]=33,l[m++]=249,l[m++]=4,l[m++]=Y<<2|(Z===!0?1:0),l[m++]=255&V,l[m++]=V>>8&255,l[m++]=J,l[m++]=0),l[m++]=44,l[m++]=255&O,l[m++]=O>>8&255,l[m++]=255&N,l[m++]=N>>8&255,l[m++]=255&D,l[m++]=D>>8&255,l[m++]=255&z,l[m++]=z>>8&255,l[m++]=F===!0?128|L-1:0,F===!0)for(var ne=0,se=G.length;ne<se;++ne){var ie=G[ne];l[m++]=ie>>16&255,l[m++]=ie>>8&255,l[m++]=255&ie}return m=function(X,Q,re,ce){X[Q++]=re;var he=Q++,fe=1<<re,oe=fe-1,me=1+fe,we=1+me,ke=re+1,ve=0,_e=0;function Me(We){for(;We<=ve;)X[Q++]=255&_e,_e>>=8,ve-=8,Q===he+256&&(X[he]=255,he=Q++)}function He(We){_e|=We<<ve,ve+=ke,Me(8)}var ze=ce[0]&oe,st={};He(fe);for(var gt=1,pt=ce.length;gt<pt;++gt){var Lt=ce[gt]&oe,_t=ze<<8|Lt,xe=st[_t];if(xe===void 0){for(_e|=ze<<ve,ve+=ke;8<=ve;)X[Q++]=255&_e,_e>>=8,ve-=8,Q===he+256&&(X[he]=255,he=Q++);we===4096?(He(fe),we=1+me,ke=re+1,st={}):(1<<ke<=we&&++ke,st[_t]=we++),ze=Lt}else ze=xe}return He(ze),He(me),Me(1),he+1===Q?X[he]=0:(X[he]=Q-he-1,X[Q++]=0),Q}(l,m,L<2?2:L,$)},this.end=function(){return A===!1&&(l[m++]=59,A=!0),m},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(O){l=O},this.getOutputBufferPosition=function(){return m},this.setOutputBufferPosition=function(O){m=O}},f.GifReader=function(l){var d=0;if(l[d++]!==71||l[d++]!==73||l[d++]!==70||l[d++]!==56||(l[d++]+1&253)!=56||l[d++]!==97)throw new Error("Invalid GIF 87a/89a header.");var x=l[d++]|l[d++]<<8,S=l[d++]|l[d++]<<8,m=l[d++],y=1<<1+(7&m),b=(l[d++],l[d++],null),g=null,w=(m>>7&&(b=d,d+=3*(g=y)),!0),_=[],C=0,k=null,E=0,j=null;for(this.width=x,this.height=S;w&&d<l.length;)switch(l[d++]){case 33:switch(l[d++]){case 255:if(l[d]!==11||l[d+1]==78&&l[d+2]==69&&l[d+3]==84&&l[d+4]==83&&l[d+5]==67&&l[d+6]==65&&l[d+7]==80&&l[d+8]==69&&l[d+9]==50&&l[d+10]==46&&l[d+11]==48&&l[d+12]==3&&l[d+13]==1&&l[d+16]==0)d+=14,j=l[d++]|l[d++]<<8,d++;else for(d+=12;;){if(!(0<=(O=l[d++])))throw Error("Invalid block size");if(O===0)break;d+=O}break;case 249:if(l[d++]!==4||l[d+4]!==0)throw new Error("Invalid graphics extension block.");var A=l[d++];C=l[d++]|l[d++]<<8,k=l[d++],(1&A)==0&&(k=null),E=A>>2&7,d++;break;case 254:for(;;){if(!(0<=(O=l[d++])))throw Error("Invalid block size");if(O===0)break;d+=O}break;default:throw new Error("Unknown graphic control label: 0x"+l[d-1].toString(16))}break;case 44:var O,N=l[d++]|l[d++]<<8,D=l[d++]|l[d++]<<8,z=l[d++]|l[d++]<<8,$=l[d++]|l[d++]<<8,B=(L=l[d++])>>6&1,F=b,G=g,W=!1,L=(L>>7&&(W=!0,F=d,d+=3*(G=1<<1+(7&L))),d);for(d++;;){if(!(0<=(O=l[d++])))throw Error("Invalid block size");if(O===0)break;d+=O}_.push({x:N,y:D,width:z,height:$,has_local_palette:W,palette_offset:F,palette_size:G,data_offset:L,data_length:d-L,transparent_index:k,interlaced:!!B,delay:C,disposal:E});break;case 59:w=!1;break;default:throw new Error("Unknown gif block: 0x"+l[d-1].toString(16))}this.numFrames=function(){return _.length},this.loopCount=function(){return j},this.frameInfo=function(V){if(V<0||V>=_.length)throw new Error("Frame index out of range.");return _[V]},this.decodeAndBlitFrameBGRA=function(V,Y){for(var Z=(V=this.frameInfo(V)).width*V.height,J=new Uint8Array(Z),ne=(u(l,V.data_offset,J,Z),V.palette_offset),se=V.transparent_index,ie=(se===null&&(se=256),V.width),X=x-ie,Q=ie,re=4*(V.y*x+V.x),ce=4*((V.y+V.height)*x+V.x),he=re,fe=4*X,oe=(V.interlaced===!0&&(fe+=4*x*7),8),me=0,we=J.length;me<we;++me){var ke,ve,_e=J[me];Q===0&&(Q=ie,ce<=(he+=fe)&&(fe=4*X+4*x*(oe-1),he=re+(ie+X)*(oe<<1),oe>>=1)),_e===se?he+=4:(ke=l[ne+3*_e],ve=l[ne+3*_e+1],_e=l[ne+3*_e+2],Y[he++]=_e,Y[he++]=ve,Y[he++]=ke,Y[he++]=255),--Q}},this.decodeAndBlitFrameRGBA=function(V,Y){for(var Z=(V=this.frameInfo(V)).width*V.height,J=new Uint8Array(Z),ne=(u(l,V.data_offset,J,Z),V.palette_offset),se=V.transparent_index,ie=(se===null&&(se=256),V.width),X=x-ie,Q=ie,re=4*(V.y*x+V.x),ce=4*((V.y+V.height)*x+V.x),he=re,fe=4*X,oe=(V.interlaced===!0&&(fe+=4*x*7),8),me=0,we=J.length;me<we;++me){var ke,ve,_e=J[me];Q===0&&(Q=ie,ce<=(he+=fe)&&(fe=4*X+4*x*(oe-1),he=re+(ie+X)*(oe<<1),oe>>=1)),_e===se?he+=4:(ke=l[ne+3*_e],ve=l[ne+3*_e+1],_e=l[ne+3*_e+2],Y[he++]=ke,Y[he++]=ve,Y[he++]=_e,Y[he++]=255),--Q}}}}catch{}},{}],247:[function(r,h,f){(function(u){(function(l){function d(I){if(this==null)throw TypeError();var M,P=String(this),H=P.length;if(!((I=(I=I?Number(I):0)!=I?0:I)<0||H<=I))return 55296<=(M=P.charCodeAt(I))&&M<=56319&&I+1<H&&56320<=(H=P.charCodeAt(I+1))&&H<=57343?1024*(M-55296)+H-56320+65536:M}String.prototype.codePointAt||((x=function(){try{var I={},M=Object.defineProperty,P=M(I,I,I)&&M}catch{}return P}())?x(String.prototype,"codePointAt",{value:d,configurable:!0,writable:!0}):String.prototype.codePointAt=d);var x;function S(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function m(I,M){this.source=I,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=M,this.destLen=0,this.ltree=new S,this.dtree=new S}var y=new S,b=new S,g=new Uint8Array(30),w=new Uint16Array(30),_=new Uint8Array(30),C=new Uint16Array(30),k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new S,j=new Uint8Array(320);function A(I,M,P,H){for(var K,ee=0;ee<P;++ee)I[ee]=0;for(ee=0;ee<30-P;++ee)I[ee+P]=ee/P|0;for(K=H,ee=0;ee<30;++ee)M[ee]=K,K+=1<<I[ee]}var O=new Uint16Array(16);function N(I,M,P,H){for(var K,ee=0;ee<16;++ee)I.table[ee]=0;for(ee=0;ee<H;++ee)I.table[M[P+ee]]++;for(ee=K=I.table[0]=0;ee<16;++ee)O[ee]=K,K+=I.table[ee];for(ee=0;ee<H;++ee)M[P+ee]&&(I.trans[O[M[P+ee]]++]=ee)}function D(I,M,P){if(!M)return P;for(;I.bitcount<24;)I.tag|=I.source[I.sourceIndex++]<<I.bitcount,I.bitcount+=8;var H=I.tag&65535>>>16-M;return I.tag>>>=M,I.bitcount-=M,H+P}function z(I,M){for(;I.bitcount<24;)I.tag|=I.source[I.sourceIndex++]<<I.bitcount,I.bitcount+=8;for(var P=0,H=0,K=0,ee=I.tag;H=2*H+(1&ee),ee>>>=1,P+=M.table[++K],0<=(H-=M.table[K]););return I.tag=ee,I.bitcount-=K,M.trans[P+H]}function $(I,M,P){for(;;){if((ee=z(I,M))===256)return 0;if(ee<256)I.dest[I.destLen++]=ee;else for(var H,K=D(I,g[ee-=257],w[ee]),ee=z(I,P),te=H=I.destLen-D(I,_[ee],C[ee]);te<H+K;++te)I.dest[I.destLen++]=I.dest[te]}}for(var B=y,F=b,G=0;G<7;++G)B.table[G]=0;for(B.table[7]=24,B.table[8]=152,B.table[9]=112,G=0;G<24;++G)B.trans[G]=256+G;for(G=0;G<144;++G)B.trans[24+G]=G;for(G=0;G<8;++G)B.trans[168+G]=280+G;for(G=0;G<112;++G)B.trans[176+G]=144+G;for(G=0;G<5;++G)F.table[G]=0;for(F.table[5]=32,G=0;G<32;++G)F.trans[G]=G;A(g,w,4,3),A(_,C,2,1),g[28]=0,w[28]=258;function W(I,M,P,H,K){return Math.pow(1-K,3)*I+3*Math.pow(1-K,2)*K*M+3*(1-K)*Math.pow(K,2)*P+Math.pow(K,3)*H}function L(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function V(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function Y(I){throw new Error(I)}function Z(I,M){I||Y(M)}L.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},L.prototype.addPoint=function(I,M){typeof I=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=I,this.x2=I),I<this.x1&&(this.x1=I),I>this.x2&&(this.x2=I)),typeof M=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=M,this.y2=M),M<this.y1&&(this.y1=M),M>this.y2&&(this.y2=M))},L.prototype.addX=function(I){this.addPoint(I,null)},L.prototype.addY=function(I){this.addPoint(null,I)},L.prototype.addBezier=function(I,M,P,H,K,ee,te,ge){var Se=[I,M],Ce=[P,H],Re=[K,ee],Fe=[te,ge];this.addPoint(I,M),this.addPoint(te,ge);for(var Ue=0;Ue<=1;Ue++){var Ee,vt=6*Se[Ue]-12*Ce[Ue]+6*Re[Ue],tt=-3*Se[Ue]+9*Ce[Ue]-9*Re[Ue]+3*Fe[Ue],et=3*Ce[Ue]-3*Se[Ue];tt==0?vt==0||0<(Ee=-et/vt)&&Ee<1&&(Ue===0&&this.addX(W(Se[Ue],Ce[Ue],Re[Ue],Fe[Ue],Ee)),Ue===1&&this.addY(W(Se[Ue],Ce[Ue],Re[Ue],Fe[Ue],Ee))):(Ee=Math.pow(vt,2)-4*et*tt)<0||(0<(et=(-vt+Math.sqrt(Ee))/(2*tt))&&et<1&&(Ue===0&&this.addX(W(Se[Ue],Ce[Ue],Re[Ue],Fe[Ue],et)),Ue===1&&this.addY(W(Se[Ue],Ce[Ue],Re[Ue],Fe[Ue],et))),0<(et=(-vt-Math.sqrt(Ee))/(2*tt))&&et<1&&(Ue===0&&this.addX(W(Se[Ue],Ce[Ue],Re[Ue],Fe[Ue],et)),Ue===1&&this.addY(W(Se[Ue],Ce[Ue],Re[Ue],Fe[Ue],et))))}},L.prototype.addQuad=function(I,M,P,H,K,ee){P=I+2/3*(P-I),H=M+2/3*(H-M),this.addBezier(I,M,P,H,P+1/3*(K-I),H+1/3*(ee-M),K,ee)},V.prototype.moveTo=function(I,M){this.commands.push({type:"M",x:I,y:M})},V.prototype.lineTo=function(I,M){this.commands.push({type:"L",x:I,y:M})},V.prototype.curveTo=V.prototype.bezierCurveTo=function(I,M,P,H,K,ee){this.commands.push({type:"C",x1:I,y1:M,x2:P,y2:H,x:K,y:ee})},V.prototype.quadTo=V.prototype.quadraticCurveTo=function(I,M,P,H){this.commands.push({type:"Q",x1:I,y1:M,x:P,y:H})},V.prototype.close=V.prototype.closePath=function(){this.commands.push({type:"Z"})},V.prototype.extend=function(I){var M;if(I.commands)I=I.commands;else if(I instanceof L)return M=I,this.moveTo(M.x1,M.y1),this.lineTo(M.x2,M.y1),this.lineTo(M.x2,M.y2),this.lineTo(M.x1,M.y2),void this.close();Array.prototype.push.apply(this.commands,I)},V.prototype.getBoundingBox=function(){for(var I=new L,M=0,P=0,H=0,K=0,ee=0;ee<this.commands.length;ee++){var te=this.commands[ee];switch(te.type){case"M":I.addPoint(te.x,te.y),M=H=te.x,P=K=te.y;break;case"L":I.addPoint(te.x,te.y),H=te.x,K=te.y;break;case"Q":I.addQuad(H,K,te.x1,te.y1,te.x,te.y),H=te.x,K=te.y;break;case"C":I.addBezier(H,K,te.x1,te.y1,te.x2,te.y2,te.x,te.y),H=te.x,K=te.y;break;case"Z":H=M,K=P;break;default:throw new Error("Unexpected path command "+te.type)}}return I.isEmpty()&&I.addPoint(0,0),I},V.prototype.draw=function(I){I.beginPath();for(var M=0;M<this.commands.length;M+=1){var P=this.commands[M];P.type==="M"?I.moveTo(P.x,P.y):P.type==="L"?I.lineTo(P.x,P.y):P.type==="C"?I.bezierCurveTo(P.x1,P.y1,P.x2,P.y2,P.x,P.y):P.type==="Q"?I.quadraticCurveTo(P.x1,P.y1,P.x,P.y):P.type==="Z"&&I.closePath()}this.fill&&(I.fillStyle=this.fill,I.fill()),this.stroke&&(I.strokeStyle=this.stroke,I.lineWidth=this.strokeWidth,I.stroke())},V.prototype.toPathData=function(I){function M(){for(var ee=arguments,te="",ge=0;ge<arguments.length;ge+=1){var Se=ee[ge];0<=Se&&0<ge&&(te+=" "),te+=(Se=Se,Math.round(Se)===Se?""+Math.round(Se):Se.toFixed(I))}return te}I=I!==void 0?I:2;for(var P="",H=0;H<this.commands.length;H+=1){var K=this.commands[H];K.type==="M"?P+="M"+M(K.x,K.y):K.type==="L"?P+="L"+M(K.x,K.y):K.type==="C"?P+="C"+M(K.x1,K.y1,K.x2,K.y2,K.x,K.y):K.type==="Q"?P+="Q"+M(K.x1,K.y1,K.x,K.y):K.type==="Z"&&(P+="Z")}return P},V.prototype.toSVG=function(I){var M=(M='<path d="')+this.toPathData(I)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?M+=' fill="none"':M+=' fill="'+this.fill+'"'),this.stroke&&(M+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),M+"/>"},V.prototype.toDOMElement=function(I){I=this.toPathData(I);var M=document.createElementNS("http://www.w3.org/2000/svg","path");return M.setAttribute("d",I),M};var J={fail:Y,argument:Z,assert:Z},ne={},se={},ie={};function X(I){return function(){return I}}se.BYTE=function(I){return J.argument(0<=I&&I<=255,"Byte value should be between 0 and 255."),[I]},ie.BYTE=X(1),se.CHAR=function(I){return[I.charCodeAt(0)]},ie.CHAR=X(1),se.CHARARRAY=function(I){for(var M=[],P=0;P<I.length;P+=1)M[P]=I.charCodeAt(P);return M},ie.CHARARRAY=function(I){return I.length},se.USHORT=function(I){return[I>>8&255,255&I]},ie.USHORT=X(2),se.SHORT=function(I){return[(I=32768<=I?-(65536-I):I)>>8&255,255&I]},ie.SHORT=X(2),se.UINT24=function(I){return[I>>16&255,I>>8&255,255&I]},ie.UINT24=X(3),se.ULONG=function(I){return[I>>24&255,I>>16&255,I>>8&255,255&I]},ie.ULONG=X(4),se.LONG=function(I){return[(I=2147483648<=I?-(4294967296-I):I)>>24&255,I>>16&255,I>>8&255,255&I]},ie.LONG=X(4),se.FIXED=se.ULONG,ie.FIXED=ie.ULONG,se.FWORD=se.SHORT,ie.FWORD=ie.SHORT,se.UFWORD=se.USHORT,ie.UFWORD=ie.USHORT,se.LONGDATETIME=function(I){return[0,0,0,0,I>>24&255,I>>16&255,I>>8&255,255&I]},ie.LONGDATETIME=X(8),se.TAG=function(I){return J.argument(I.length===4,"Tag should be exactly 4 ASCII characters."),[I.charCodeAt(0),I.charCodeAt(1),I.charCodeAt(2),I.charCodeAt(3)]},ie.TAG=X(4),se.Card8=se.BYTE,ie.Card8=ie.BYTE,se.Card16=se.USHORT,ie.Card16=ie.USHORT,se.OffSize=se.BYTE,ie.OffSize=ie.BYTE,se.SID=se.USHORT,ie.SID=ie.USHORT,se.NUMBER=function(I){return-107<=I&&I<=107?[I+139]:108<=I&&I<=1131?[247+((I-=108)>>8),255&I]:-1131<=I&&I<=-108?[251+((I=-I-108)>>8),255&I]:-32768<=I&&I<=32767?se.NUMBER16(I):se.NUMBER32(I)},ie.NUMBER=function(I){return se.NUMBER(I).length},se.NUMBER16=function(I){return[28,I>>8&255,255&I]},ie.NUMBER16=X(3),se.NUMBER32=function(I){return[29,I>>24&255,I>>16&255,I>>8&255,255&I]},ie.NUMBER32=X(5),se.REAL=function(I){for(var M=I.toString(),P=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(M),H=(P&&(P=parseFloat("1e"+((P[2]?+P[2]:0)+P[1].length)),M=(Math.round(I*P)/P).toString()),""),K=0,ee=M.length;K<ee;K+=1){var te=M[K];H+=te==="e"?M[++K]==="-"?"c":"b":te==="."?"a":te==="-"?"e":te}for(var ge=[30],Se=0,Ce=(H+=1&H.length?"f":"ff").length;Se<Ce;Se+=2)ge.push(parseInt(H.substr(Se,2),16));return ge},ie.REAL=function(I){return se.REAL(I).length},se.NAME=se.CHARARRAY,ie.NAME=ie.CHARARRAY,se.STRING=se.CHARARRAY,ie.STRING=ie.CHARARRAY,ne.UTF8=function(I,M,P){for(var H=[],K=P,ee=0;ee<K;ee++,M+=1)H[ee]=I.getUint8(M);return String.fromCharCode.apply(null,H)},ne.UTF16=function(I,M,P){for(var H=[],K=P/2,ee=0;ee<K;ee++,M+=2)H[ee]=I.getUint16(M);return String.fromCharCode.apply(null,H)},se.UTF16=function(I){for(var M=[],P=0;P<I.length;P+=1){var H=I.charCodeAt(P);M[M.length]=H>>8&255,M[M.length]=255&H}return M},ie.UTF16=function(I){return 2*I.length};var Q,re={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},ce=(ne.MACSTRING=function(I,M,P,H){var K=re[H];if(K!==void 0){for(var ee="",te=0;te<P;te++){var ge=I.getUint8(M+te);ee+=ge<=127?String.fromCharCode(ge):K[127&ge]}return ee}},typeof WeakMap=="function"&&new WeakMap);function he(I){return-128<=I&&I<=127}se.MACSTRING=function(I,M){var P=function(te){if(!Q)for(var ge in Q={},re)Q[ge]=new String(ge);var Se=Q[te];if(Se!==void 0){if(ce){var Ce=ce.get(Se);if(Ce!==void 0)return Ce}var Re=re[te];if(Re!==void 0){for(var Fe={},Ue=0;Ue<Re.length;Ue++)Fe[Re.charCodeAt(Ue)]=Ue+128;return ce&&ce.set(Se,Fe),Fe}}}(M);if(P!==void 0){for(var H=[],K=0;K<I.length;K++){var ee=I.charCodeAt(K);if(128<=ee&&(ee=P[ee])===void 0)return;H[K]=ee}return H}},ie.MACSTRING=function(I,M){return(I=se.MACSTRING(I,M))!==void 0?I.length:0},se.VARDELTAS=function(I){for(var M=0,P=[];M<I.length;){var H=I[M];M=(H===0?function(K,ee,te){for(var ge=0,Se=K.length;ee<Se&&ge<64&&K[ee]===0;)++ee,++ge;return te.push(128|ge-1),ee}:-128<=H&&H<=127?function(K,ee,te){for(var ge=0,Se=K.length,Ce=ee;Ce<Se&&ge<64;){var Re=K[Ce];if(!he(Re)||Re===0&&Ce+1<Se&&K[Ce+1]===0)break;++Ce,++ge}te.push(ge-1);for(var Fe=ee;Fe<Ce;++Fe)te.push(K[Fe]+256&255);return Ce}:function(K,ee,te){for(var ge=0,Se=K.length,Ce=ee;Ce<Se&&ge<64;){var Re=K[Ce];if(Re===0||he(Re)&&Ce+1<Se&&he(K[Ce+1]))break;++Ce,++ge}te.push(64|ge-1);for(var Fe=ee;Fe<Ce;++Fe){var Ue=K[Fe];te.push(Ue+65536>>8&255,Ue+256&255)}return Ce})(I,M,P)}return P},se.INDEX=function(I){for(var M=1,P=[M],H=[],K=0;K<I.length;K+=1){var ee=se.OBJECT(I[K]);Array.prototype.push.apply(H,ee),M+=ee.length,P.push(M)}if(H.length===0)return[0,0];for(var te=[],ge=1+Math.floor(Math.log(M)/Math.log(2))/8|0,Se=[void 0,se.BYTE,se.USHORT,se.UINT24,se.ULONG][ge],Ce=0;Ce<P.length;Ce+=1){var Re=Se(P[Ce]);Array.prototype.push.apply(te,Re)}return Array.prototype.concat(se.Card16(I.length),se.OffSize(ge),te,H)},ie.INDEX=function(I){return se.INDEX(I).length},se.DICT=function(I){for(var M=[],P=Object.keys(I),H=P.length,K=0;K<H;K+=1){var ee=parseInt(P[K],0),te=I[ee];M=(M=M.concat(se.OPERAND(te.value,te.type))).concat(se.OPERATOR(ee))}return M},ie.DICT=function(I){return se.DICT(I).length},se.OPERATOR=function(I){return I<1200?[I]:[12,I-1200]},se.OPERAND=function(I,M){var P=[];if(Array.isArray(M))for(var H=0;H<M.length;H+=1)J.argument(I.length===M.length,"Not enough arguments given for type"+M),P=P.concat(se.OPERAND(I[H],M[H]));else if(M==="SID")P=P.concat(se.NUMBER(I));else if(M==="offset")P=P.concat(se.NUMBER32(I));else if(M==="number")P=P.concat(se.NUMBER(I));else{if(M!=="real")throw new Error("Unknown operand type "+M);P=P.concat(se.REAL(I))}return P},se.OP=se.BYTE,ie.OP=ie.BYTE;var fe=typeof WeakMap=="function"&&new WeakMap;function oe(I,M,P){for(var H=0;H<M.length;H+=1){var K=M[H];this[K.name]=K.value}if(this.tableName=I,this.fields=M,P)for(var ee=Object.keys(P),te=0;te<ee.length;te+=1){var ge=ee[te],Se=P[ge];this[ge]!==void 0&&(this[ge]=Se)}}function me(I,M,P){P===void 0&&(P=M.length);var H=new Array(M.length+1);H[0]={name:I+"Count",type:"USHORT",value:P};for(var K=0;K<M.length;K++)H[K+1]={name:I+K,type:"USHORT",value:M[K]};return H}function we(I,M,P){var H=M.length,K=new Array(H+1);K[0]={name:I+"Count",type:"USHORT",value:H};for(var ee=0;ee<H;ee++)K[ee+1]={name:I+ee,type:"TABLE",value:P(M[ee],ee)};return K}function ke(I,M,P){var H=M.length,K=[];K[0]={name:I+"Count",type:"USHORT",value:H};for(var ee=0;ee<H;ee++)K=K.concat(P(M[ee],ee));return K}function ve(I){I.format===1?oe.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(me("glyph",I.glyphs))):J.assert(!1,"Can't create coverage table format 2 yet.")}function _e(I){oe.call(this,"scriptListTable",ke("scriptRecord",I,function(M,P){var H=M.script,K=H.defaultLangSys;return J.assert(!!K,"Unable to write GSUB: script "+M.tag+" has no default language system."),[{name:"scriptTag"+P,type:"TAG",value:M.tag},{name:"script"+P,type:"TABLE",value:new oe("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new oe("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:K.reqFeatureIndex}].concat(me("featureIndex",K.featureIndexes)))}].concat(ke("langSys",H.langSysRecords,function(ee,te){var ge=ee.langSys;return[{name:"langSysTag"+te,type:"TAG",value:ee.tag},{name:"langSys"+te,type:"TABLE",value:new oe("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:ge.reqFeatureIndex}].concat(me("featureIndex",ge.featureIndexes)))}]})))}]}))}function Me(I){oe.call(this,"featureListTable",ke("featureRecord",I,function(M,P){var H=M.feature;return[{name:"featureTag"+P,type:"TAG",value:M.tag},{name:"feature"+P,type:"TABLE",value:new oe("featureTable",[{name:"featureParams",type:"USHORT",value:H.featureParams}].concat(me("lookupListIndex",H.lookupListIndexes)))}]}))}function He(I,M){oe.call(this,"lookupListTable",we("lookup",I,function(P){var H=M[P.lookupType];return J.assert(!!H,"Unable to write GSUB lookup type "+P.lookupType+" tables."),new oe("lookupTable",[{name:"lookupType",type:"USHORT",value:P.lookupType},{name:"lookupFlag",type:"USHORT",value:P.lookupFlag}].concat(we("subtable",P.subtables,H)))}))}se.CHARSTRING=function(I){if(fe){var M=fe.get(I);if(M!==void 0)return M}for(var P=[],H=I.length,K=0;K<H;K+=1){var ee=I[K];P=P.concat(se[ee.type](ee.value))}return fe&&fe.set(I,P),P},ie.CHARSTRING=function(I){return se.CHARSTRING(I).length},se.OBJECT=function(I){var M=se[I.type];return J.argument(M!==void 0,"No encoding function for type "+I.type),M(I.value)},ie.OBJECT=function(I){var M=ie[I.type];return J.argument(M!==void 0,"No sizeOf function for type "+I.type),M(I.value)},se.TABLE=function(I){for(var M=[],P=I.fields.length,H=[],K=[],ee=0;ee<P;ee+=1){var te=I.fields[ee],ge=se[te.type],Se=(J.argument(ge!==void 0,"No encoding function for field type "+te.type+" ("+te.name+")"),I[te.name]);ge=ge(Se=Se===void 0?te.value:Se),te.type==="TABLE"?(K.push(M.length),M=M.concat([0,0]),H.push(ge)):M=M.concat(ge)}for(var Ce=0;Ce<H.length;Ce+=1){var Re=K[Ce],Fe=M.length;J.argument(Fe<65536,"Table "+I.tableName+" too big."),M[Re]=Fe>>8,M[Re+1]=255&Fe,M=M.concat(H[Ce])}return M},ie.TABLE=function(I){for(var M=0,P=I.fields.length,H=0;H<P;H+=1){var K=I.fields[H],ee=ie[K.type],te=(J.argument(ee!==void 0,"No sizeOf function for field type "+K.type+" ("+K.name+")"),I[K.name]);M+=ee(te=te===void 0?K.value:te),K.type==="TABLE"&&(M+=2)}return M},se.RECORD=se.TABLE,ie.RECORD=ie.TABLE,se.LITERAL=function(I){return I},ie.LITERAL=function(I){return I.length},oe.prototype.encode=function(){return se.TABLE(this)},oe.prototype.sizeOf=function(){return ie.TABLE(this)};var ze={Table:oe,Record:oe,Coverage:(ve.prototype=Object.create(oe.prototype)).constructor=ve,ScriptList:(_e.prototype=Object.create(oe.prototype)).constructor=_e,FeatureList:(Me.prototype=Object.create(oe.prototype)).constructor=Me,LookupList:(He.prototype=Object.create(oe.prototype)).constructor=He,ushortList:me,tableList:we,recordList:ke};function st(I,M){return I.getUint8(M)}function gt(I,M){return I.getUint16(M,!1)}function pt(I,M){return I.getUint32(M,!1)}function Lt(I,M){return I.getInt16(M,!1)+I.getUint16(M+2,!1)/65535}var _t={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function xe(I,M){this.data=I,this.offset=M,this.relativeOffset=0}xe.prototype.parseByte=function(){var I=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,I},xe.prototype.parseChar=function(){var I=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,I},xe.prototype.parseCard8=xe.prototype.parseByte,xe.prototype.parseCard16=xe.prototype.parseUShort=function(){var I=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,I},xe.prototype.parseSID=xe.prototype.parseUShort,xe.prototype.parseOffset16=xe.prototype.parseUShort,xe.prototype.parseShort=function(){var I=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,I},xe.prototype.parseF2Dot14=function(){var I=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,I},xe.prototype.parseOffset32=xe.prototype.parseULong=function(){var I=pt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,I},xe.prototype.parseFixed=function(){var I=Lt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,I},xe.prototype.parseString=function(I){var M=this.data,P=this.offset+this.relativeOffset,H="";this.relativeOffset+=I;for(var K=0;K<I;K++)H+=String.fromCharCode(M.getUint8(P+K));return H},xe.prototype.parseTag=function(){return this.parseString(4)},xe.prototype.parseLongDateTime=function(){var I=pt(this.data,this.offset+this.relativeOffset+4);return I-=2082844800,this.relativeOffset+=8,I},xe.prototype.parseVersion=function(I){var M=gt(this.data,this.offset+this.relativeOffset),P=gt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,M+P/(I=I===void 0?4096:I)/10},xe.prototype.skip=function(I,M){this.relativeOffset+=_t[I]*(M=M===void 0?1:M)},xe.prototype.parseULongList=function(I){I===void 0&&(I=this.parseULong());for(var M=new Array(I),P=this.data,H=this.offset+this.relativeOffset,K=0;K<I;K++)M[K]=P.getUint32(H),H+=4;return this.relativeOffset+=4*I,M},xe.prototype.parseOffset16List=xe.prototype.parseUShortList=function(I){I===void 0&&(I=this.parseUShort());for(var M=new Array(I),P=this.data,H=this.offset+this.relativeOffset,K=0;K<I;K++)M[K]=P.getUint16(H),H+=2;return this.relativeOffset+=2*I,M},xe.prototype.parseShortList=function(I){for(var M=new Array(I),P=this.data,H=this.offset+this.relativeOffset,K=0;K<I;K++)M[K]=P.getInt16(H),H+=2;return this.relativeOffset+=2*I,M},xe.prototype.parseByteList=function(I){for(var M=new Array(I),P=this.data,H=this.offset+this.relativeOffset,K=0;K<I;K++)M[K]=P.getUint8(H++);return this.relativeOffset+=I,M},xe.prototype.parseList=function(I,M){M||(M=I,I=this.parseUShort());for(var P=new Array(I),H=0;H<I;H++)P[H]=M.call(this);return P},xe.prototype.parseList32=function(I,M){M||(M=I,I=this.parseULong());for(var P=new Array(I),H=0;H<I;H++)P[H]=M.call(this);return P},xe.prototype.parseRecordList=function(I,M){M||(M=I,I=this.parseUShort());for(var P=new Array(I),H=Object.keys(M),K=0;K<I;K++){for(var ee={},te=0;te<H.length;te++){var ge=H[te],Se=M[ge];ee[ge]=Se.call(this)}P[K]=ee}return P},xe.prototype.parseRecordList32=function(I,M){M||(M=I,I=this.parseULong());for(var P=new Array(I),H=Object.keys(M),K=0;K<I;K++){for(var ee={},te=0;te<H.length;te++){var ge=H[te],Se=M[ge];ee[ge]=Se.call(this)}P[K]=ee}return P},xe.prototype.parseStruct=function(I){if(typeof I=="function")return I.call(this);for(var M=Object.keys(I),P={},H=0;H<M.length;H++){var K=M[H],ee=I[K];P[K]=ee.call(this)}return P},xe.prototype.parseValueRecord=function(I){var M;if((I=I===void 0?this.parseUShort():I)!==0)return M={},1&I&&(M.xPlacement=this.parseShort()),2&I&&(M.yPlacement=this.parseShort()),4&I&&(M.xAdvance=this.parseShort()),8&I&&(M.yAdvance=this.parseShort()),16&I&&(M.xPlaDevice=void 0,this.parseShort()),32&I&&(M.yPlaDevice=void 0,this.parseShort()),64&I&&(M.xAdvDevice=void 0,this.parseShort()),128&I&&(M.yAdvDevice=void 0,this.parseShort()),M},xe.prototype.parseValueRecordList=function(){for(var I=this.parseUShort(),M=this.parseUShort(),P=new Array(M),H=0;H<M;H++)P[H]=this.parseValueRecord(I);return P},xe.prototype.parsePointer=function(I){var M=this.parseOffset16();if(0<M)return new xe(this.data,this.offset+M).parseStruct(I)},xe.prototype.parsePointer32=function(I){var M=this.parseOffset32();if(0<M)return new xe(this.data,this.offset+M).parseStruct(I)},xe.prototype.parseListOfLists=function(I){for(var M=this.parseOffset16List(),P=M.length,H=this.relativeOffset,K=new Array(P),ee=0;ee<P;ee++){var te=M[ee];if(te===0)K[ee]=void 0;else if(this.relativeOffset=te,I){for(var ge=this.parseOffset16List(),Se=new Array(ge.length),Ce=0;Ce<ge.length;Ce++)this.relativeOffset=te+ge[Ce],Se[Ce]=I.call(this);K[ee]=Se}else K[ee]=this.parseUShortList()}return this.relativeOffset=H,K},xe.prototype.parseCoverage=function(){var I=this.offset+this.relativeOffset,M=this.parseUShort(),P=this.parseUShort();if(M===1)return{format:1,glyphs:this.parseUShortList(P)};if(M!==2)throw new Error("0x"+I.toString(16)+": Coverage format must be 1 or 2.");for(var H=new Array(P),K=0;K<P;K++)H[K]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:H}},xe.prototype.parseClassDef=function(){var I=this.offset+this.relativeOffset,M=this.parseUShort();if(M===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(M===2)return{format:2,ranges:this.parseRecordList({start:xe.uShort,end:xe.uShort,classId:xe.uShort})};throw new Error("0x"+I.toString(16)+": ClassDef format must be 1 or 2.")},xe.list=function(I,M){return function(){return this.parseList(I,M)}},xe.list32=function(I,M){return function(){return this.parseList32(I,M)}},xe.recordList=function(I,M){return function(){return this.parseRecordList(I,M)}},xe.recordList32=function(I,M){return function(){return this.parseRecordList32(I,M)}},xe.pointer=function(I){return function(){return this.parsePointer(I)}},xe.pointer32=function(I){return function(){return this.parsePointer32(I)}},xe.tag=xe.prototype.parseTag,xe.byte=xe.prototype.parseByte,xe.uShort=xe.offset16=xe.prototype.parseUShort,xe.uShortList=xe.prototype.parseUShortList,xe.uLong=xe.offset32=xe.prototype.parseULong,xe.uLongList=xe.prototype.parseULongList,xe.struct=xe.prototype.parseStruct,xe.coverage=xe.prototype.parseCoverage,xe.classDef=xe.prototype.parseClassDef;var We={reserved:xe.uShort,reqFeatureIndex:xe.uShort,featureIndexes:xe.uShortList},Ve=(xe.prototype.parseScriptList=function(){return this.parsePointer(xe.recordList({tag:xe.tag,script:xe.pointer({defaultLangSys:xe.pointer(We),langSysRecords:xe.recordList({tag:xe.tag,langSys:xe.pointer(We)})})}))||[]},xe.prototype.parseFeatureList=function(){return this.parsePointer(xe.recordList({tag:xe.tag,feature:xe.pointer({featureParams:xe.offset16,lookupListIndexes:xe.uShortList})}))||[]},xe.prototype.parseLookupList=function(I){return this.parsePointer(xe.list(xe.pointer(function(){var M=this.parseUShort(),P=(J.argument(1<=M&&M<=9,"GPOS/GSUB lookup type "+M+" unknown."),this.parseUShort()),H=16&P;return{lookupType:M,lookupFlag:P,subtables:this.parseList(xe.pointer(I[M])),markFilteringSet:H?this.parseUShort():void 0}})))||[]},xe.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var I=this.parseUShort(),M=this.parseUShort();return J.argument(I===1&&M<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:xe.offset32,featureTableSubstitutionOffset:xe.offset32})})||[]},{getByte:st,getCard8:st,getUShort:gt,getCard16:gt,getShort:function(I,M){return I.getInt16(M,!1)},getULong:pt,getFixed:Lt,getTag:function(I,M){for(var P="",H=M;H<M+4;H+=1)P+=String.fromCharCode(I.getInt8(H));return P},getOffset:function(I,M,P){for(var H=0,K=0;K<P;K+=1)H=(H<<=8)+I.getUint8(M+K);return H},getBytes:function(I,M,P){for(var H=[],K=M;K<P;K+=1)H.push(I.getUint8(K));return H},bytesToString:function(I){for(var M="",P=0;P<I.length;P+=1)M+=String.fromCharCode(I[P]);return M},Parser:xe}),dt=function(I,M){for(var P={},H=(P.version=Ve.getUShort(I,M),J.argument(P.version===0,"cmap table version should be 0."),P.numTables=Ve.getUShort(I,M+2),-1),K=P.numTables-1;0<=K;--K){var ee=Ve.getUShort(I,M+4+8*K),te=Ve.getUShort(I,M+4+8*K+2);if(ee===3&&(te===0||te===1||te===10)||ee===0&&(te===0||te===1||te===2||te===3||te===4)){H=Ve.getULong(I,M+4+8*K+4);break}}if(H===-1)throw new Error("No valid cmap sub-tables found.");var ge=new Ve.Parser(I,M+H);if(P.format=ge.parseUShort(),P.format===12){var Se,Ce=P,Re=ge;Re.parseUShort(),Ce.length=Re.parseULong(),Ce.language=Re.parseULong(),Ce.groupCount=Se=Re.parseULong(),Ce.glyphIndexMap={};for(var Fe=0;Fe<Se;Fe+=1)for(var Ue=Re.parseULong(),Ee=Re.parseULong(),vt=Re.parseULong(),tt=Ue;tt<=Ee;tt+=1)Ce.glyphIndexMap[tt]=vt,vt++}else{if(P.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+P.format+").");var et=P,nt=I,it=M,Rt=H;et.length=ge.parseUShort(),et.language=ge.parseUShort(),et.segCount=jt=ge.parseUShort()>>1,ge.skip("uShort",3),et.glyphIndexMap={};for(var jt,Nt=new Ve.Parser(nt,it+Rt+14),ln=new Ve.Parser(nt,it+Rt+16+2*jt),yn=new Ve.Parser(nt,it+Rt+16+4*jt),_n=new Ve.Parser(nt,it+Rt+16+6*jt),Xn=it+Rt+16+8*jt,Ln=0;Ln<jt-1;Ln+=1)for(var Rn=void 0,en=Nt.parseUShort(),Yn=ln.parseUShort(),Gn=yn.parseShort(),dr=_n.parseUShort(),Nn=Yn;Nn<=en;Nn+=1)dr!==0?(Xn=(Xn=_n.offset+_n.relativeOffset-2)+dr+2*(Nn-Yn),(Rn=Ve.getUShort(nt,Xn))!==0&&(Rn=Rn+Gn&65535)):Rn=Nn+Gn&65535,et.glyphIndexMap[Nn]=Rn}return P},Ct=function(I){for(var M=!0,P=I.length-1;0<P;--P)if(65535<I.get(P).unicode){console.log("Adding CMAP format 12 (needed!)"),M=!1;break}var H,K,ee=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:M?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:M?12:20}],te=(ee=(ee=M?ee:ee.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new ze.Table("cmap",ee));for(te.segments=[],P=0;P<I.length;P+=1){for(var ge=I.get(P),Se=0;Se<ge.unicodes.length;Se+=1)H=ge.unicodes[Se],K=P,te.segments.push({end:H,start:H,delta:-(H-K),offset:0,glyphIndex:K});te.segments=te.segments.sort(function(it,Rt){return it.start-Rt.start})}te.segments.push({end:65535,start:65535,delta:1,offset:0});var Ce=te.segments.length,Re=0,Fe=[],Ue=[],Ee=[],vt=[],tt=[],et=[];for(P=0;P<Ce;P+=1){var nt=te.segments[P];nt.end<=65535&&nt.start<=65535?(Fe=Fe.concat({name:"end_"+P,type:"USHORT",value:nt.end}),Ue=Ue.concat({name:"start_"+P,type:"USHORT",value:nt.start}),Ee=Ee.concat({name:"idDelta_"+P,type:"SHORT",value:nt.delta}),vt=vt.concat({name:"idRangeOffset_"+P,type:"USHORT",value:nt.offset}),nt.glyphId!==void 0&&(tt=tt.concat({name:"glyph_"+P,type:"USHORT",value:nt.glyphId}))):Re+=1,M||nt.glyphIndex===void 0||(et=(et=(et=et.concat({name:"cmap12Start_"+P,type:"ULONG",value:nt.start})).concat({name:"cmap12End_"+P,type:"ULONG",value:nt.end})).concat({name:"cmap12Glyph_"+P,type:"ULONG",value:nt.glyphIndex}))}return te.segCountX2=2*(Ce-Re),te.searchRange=2*Math.pow(2,Math.floor(Math.log(Ce-Re)/Math.log(2))),te.entrySelector=Math.log(te.searchRange/2)/Math.log(2),te.rangeShift=te.segCountX2-te.searchRange,te.fields=te.fields.concat(Fe),te.fields.push({name:"reservedPad",type:"USHORT",value:0}),te.fields=te.fields.concat(Ue),te.fields=te.fields.concat(Ee),te.fields=te.fields.concat(vt),te.fields=te.fields.concat(tt),te.cmap4Length=14+2*Fe.length+2+2*Ue.length+2*Ee.length+2*vt.length+2*tt.length,M||(ee=16+4*et.length,te.cmap12Offset=20+te.cmap4Length,te.fields=te.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ee},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:et.length/3}]),te.fields=te.fields.concat(et)),te},Ft=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],kt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Tt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ue=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function le(I){this.font=I}function de(I){this.cmap=I}function be(I,M){this.encoding=I,this.charset=M}function Ae(I){switch(I.version){case 1:this.names=ue.slice();break;case 2:this.names=new Array(I.numberOfGlyphs);for(var M=0;M<I.numberOfGlyphs;M++)I.glyphNameIndex[M]<ue.length?this.names[M]=ue[I.glyphNameIndex[M]]:this.names[M]=I.names[I.glyphNameIndex[M]-ue.length];break;case 2.5:this.names=new Array(I.numberOfGlyphs);for(var P=0;P<I.numberOfGlyphs;P++)this.names[P]=ue[P+I.glyphNameIndex[P]];break;default:this.names=[]}}le.prototype.charToGlyphIndex=function(I){var M=I.codePointAt(0),P=this.font.glyphs;if(P){for(var H=0;H<P.length;H+=1)for(var K=P.get(H),ee=0;ee<K.unicodes.length;ee+=1)if(K.unicodes[ee]===M)return H}return null},de.prototype.charToGlyphIndex=function(I){return this.cmap.glyphIndexMap[I.codePointAt(0)]||0},be.prototype.charToGlyphIndex=function(I){return I=I.codePointAt(0),I=this.encoding[I],this.charset.indexOf(I)},Ae.prototype.nameToGlyphIndex=function(I){return this.names.indexOf(I)},Ae.prototype.glyphIndexToName=function(I){return this.names[I]};var Ze=function(I,M,P,H,K){I.beginPath(),I.moveTo(M,P),I.lineTo(H,K),I.stroke()};function yt(I){this.bindConstructorValues(I)}function ht(I,M,P){Object.defineProperty(I,M,{get:function(){return I.path,I[P]},set:function(H){I[P]=H},enumerable:!0,configurable:!0})}function De(I,M){if(this.font=I,this.glyphs={},Array.isArray(M))for(var P=0;P<M.length;P++)this.glyphs[P]=M[P];this.length=M&&M.length||0}yt.prototype.bindConstructorValues=function(I){var M;this.index=I.index||0,this.name=I.name||null,this.unicode=I.unicode||void 0,this.unicodes=I.unicodes||I.unicode!==void 0?[I.unicode]:[],I.xMin&&(this.xMin=I.xMin),I.yMin&&(this.yMin=I.yMin),I.xMax&&(this.xMax=I.xMax),I.yMax&&(this.yMax=I.yMax),I.advanceWidth&&(this.advanceWidth=I.advanceWidth),Object.defineProperty(this,"path",(I=I.path,M=I||new V,{configurable:!0,get:function(){return M=typeof M=="function"?M():M},set:function(P){M=P}}))},yt.prototype.addUnicode=function(I){this.unicodes.length===0&&(this.unicode=I),this.unicodes.push(I)},yt.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},yt.prototype.getPath=function(I,M,P,H,K){I=I!==void 0?I:0,M=M!==void 0?M:0,P=P!==void 0?P:72;for(var ee,te,ge=(H=H||{}).xScale,Se=H.yScale,Ce=((ee=H.hinting&&K&&K.hinting?this.path&&K.hinting.exec(this,P):ee)?(te=K.hinting.getCommands(ee),I=Math.round(I),M=Math.round(M),ge=Se=1):(te=this.path.commands,H=1/this.path.unitsPerEm*P,ge===void 0&&(ge=H),Se===void 0&&(Se=H)),new V),Re=0;Re<te.length;Re+=1){var Fe=te[Re];Fe.type==="M"?Ce.moveTo(I+Fe.x*ge,M+-Fe.y*Se):Fe.type==="L"?Ce.lineTo(I+Fe.x*ge,M+-Fe.y*Se):Fe.type==="Q"?Ce.quadraticCurveTo(I+Fe.x1*ge,M+-Fe.y1*Se,I+Fe.x*ge,M+-Fe.y*Se):Fe.type==="C"?Ce.curveTo(I+Fe.x1*ge,M+-Fe.y1*Se,I+Fe.x2*ge,M+-Fe.y2*Se,I+Fe.x*ge,M+-Fe.y*Se):Fe.type==="Z"&&Ce.closePath()}return Ce},yt.prototype.getContours=function(){if(this.points===void 0)return[];for(var I=[],M=[],P=0;P<this.points.length;P+=1){var H=this.points[P];M.push(H),H.lastPointOfContour&&(I.push(M),M=[])}return J.argument(M.length===0,"There are still points left in the current contour."),I},yt.prototype.getMetrics=function(){for(var I=this.path.commands,M=[],P=[],H=0;H<I.length;H+=1){var K=I[H];K.type!=="Z"&&(M.push(K.x),P.push(K.y)),K.type!=="Q"&&K.type!=="C"||(M.push(K.x1),P.push(K.y1)),K.type==="C"&&(M.push(K.x2),P.push(K.y2))}var ee={xMin:Math.min.apply(null,M),yMin:Math.min.apply(null,P),xMax:Math.max.apply(null,M),yMax:Math.max.apply(null,P),leftSideBearing:this.leftSideBearing};return isFinite(ee.xMin)||(ee.xMin=0),isFinite(ee.xMax)||(ee.xMax=this.advanceWidth),isFinite(ee.yMin)||(ee.yMin=0),isFinite(ee.yMax)||(ee.yMax=0),ee.rightSideBearing=this.advanceWidth-ee.leftSideBearing-(ee.xMax-ee.xMin),ee},yt.prototype.draw=function(I,M,P,H,K){this.getPath(M,P,H,K).draw(I)},yt.prototype.drawPoints=function(I,M,P,H){function K(Re,Fe,Ue,Ee){var vt=2*Math.PI;I.beginPath();for(var tt=0;tt<Re.length;tt+=1)I.moveTo(Fe+Re[tt].x*Ee,Ue+Re[tt].y*Ee),I.arc(Fe+Re[tt].x*Ee,Ue+Re[tt].y*Ee,2,0,vt,!1);I.closePath(),I.fill()}M=M!==void 0?M:0,P=P!==void 0?P:0,H=1/this.path.unitsPerEm*(H=H!==void 0?H:24);for(var ee=[],te=[],ge=this.path,Se=0;Se<ge.commands.length;Se+=1){var Ce=ge.commands[Se];Ce.x!==void 0&&ee.push({x:Ce.x,y:-Ce.y}),Ce.x1!==void 0&&te.push({x:Ce.x1,y:-Ce.y1}),Ce.x2!==void 0&&te.push({x:Ce.x2,y:-Ce.y2})}I.fillStyle="blue",K(ee,M,P,H),I.fillStyle="red",K(te,M,P,H)},yt.prototype.drawMetrics=function(I,M,P,H){M=M!==void 0?M:0,P=P!==void 0?P:0,H=1/this.path.unitsPerEm*(H=H!==void 0?H:24),I.lineWidth=1,I.strokeStyle="black",Ze(I,M,-1e4,M,1e4),Ze(I,-1e4,P,1e4,P);var K=this.xMin||0,ee=this.yMin||0,te=this.xMax||0,ge=this.yMax||0,Se=this.advanceWidth||0;I.strokeStyle="blue",Ze(I,M+K*H,-1e4,M+K*H,1e4),Ze(I,M+te*H,-1e4,M+te*H,1e4),Ze(I,-1e4,P+-ee*H,1e4,P+-ee*H),Ze(I,-1e4,P+-ge*H,1e4,P+-ge*H),I.strokeStyle="green",Ze(I,M+Se*H,-1e4,M+Se*H,1e4)},De.prototype.get=function(I){return typeof this.glyphs[I]=="function"&&(this.glyphs[I]=this.glyphs[I]()),this.glyphs[I]},De.prototype.push=function(I,M){this.glyphs[I]=M,this.length++};var wt={GlyphSet:De,glyphLoader:function(I,M){return new yt({index:M,font:I})},ttfGlyphLoader:function(I,M,P,H,K,ee){return function(){var te=new yt({index:M,font:I});return te.path=function(){P(te,H,K);var ge=ee(I.glyphs,te);return ge.unitsPerEm=I.unitsPerEm,ge},ht(te,"xMin","_xMin"),ht(te,"xMax","_xMax"),ht(te,"yMin","_yMin"),ht(te,"yMax","_yMax"),te}},cffGlyphLoader:function(I,M,P,H){return function(){var K=new yt({index:M,font:I});return K.path=function(){var ee=P(I,K,H);return ee.unitsPerEm=I.unitsPerEm,ee},K}}};function At(I){return I=I.length<1240?107:I.length<33900?1131:32768}function nn(I,M,P){var H,K=[],ee=[],te=Ve.getCard16(I,M);if(te!==0){for(var ge=Ve.getByte(I,M+2),Se=M+(te+1)*ge+2,Ce=M+3,Re=0;Re<te+1;Re+=1)K.push(Ve.getOffset(I,Ce,ge)),Ce+=ge;H=Se+K[te]}else H=M+2;for(var Fe=0;Fe<K.length-1;Fe+=1){var Ue=Ve.getBytes(I,Se+K[Fe],Se+K[Fe+1]);P&&(Ue=P(Ue)),ee.push(Ue)}return{objects:ee,startOffset:M,endOffset:H}}function hn(I,M){if(M===28)return I.parseByte()<<8|I.parseByte();if(M===29)return I.parseByte()<<24|I.parseByte()<<16|I.parseByte()<<8|I.parseByte();if(M===30){for(var P=I,H="",K=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var ee=(te=P.parseByte())>>4,te=15&te;if(ee==15||(H+=K[ee],te==15))break;H+=K[te]}return parseFloat(H)}if(32<=M&&M<=246)return M-139;if(247<=M&&M<=250)return 256*(M-247)+I.parseByte()+108;if(251<=M&&M<=254)return 256*-(M-251)-I.parseByte()-108;throw new Error("Invalid b0 "+M)}function sn(I,M,P){var H=new Ve.Parser(I,M=M!==void 0?M:0),K=[],ee=[];for(P=P!==void 0?P:I.length;H.relativeOffset<P;){var te=H.parseByte();te<=21?(te===12&&(te=1200+H.parseByte()),K.push([te,ee]),ee=[]):ee.push(hn(H,te))}for(var ge=K,Se={},Ce=0;Ce<ge.length;Ce+=1){var Re=ge[Ce][0],Fe=ge[Ce][1],Ue=Fe.length===1?Fe[0]:Fe;if(Se.hasOwnProperty(Re)&&!isNaN(Se[Re]))throw new Error("Object "+Se+" already has key "+Re);Se[Re]=Ue}return Se}function tn(I,M){return M<=390?Ft[M]:I[M-391]}function qt(I,M,P){for(var H,K={},ee=0;ee<M.length;ee+=1){var te=M[ee];if(Array.isArray(te.type)){var ge=[];ge.length=te.type.length;for(var Se=0;Se<te.type.length;Se++)(H=I[te.op]!==void 0?I[te.op][Se]:void 0)===void 0&&(H=te.value!==void 0&&te.value[Se]!==void 0?te.value[Se]:null),te.type[Se]==="SID"&&(H=tn(P,H)),ge[Se]=H;K[te.name]=ge}else(H=I[te.op])===void 0&&(H=te.value!==void 0?te.value:null),te.type==="SID"&&(H=tn(P,H)),K[te.name]=H}return K}var Qt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],an=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function pr(I,M,P,H){return qt(sn(I,M,P),an,H)}function An(I,M,P,H){for(var K=[],ee=0;ee<P.length;ee+=1){var te,ge=((te=(ge=H,qt(sn(te=new DataView(new Uint8Array(P[ee]).buffer),0,te.byteLength),Qt,ge)))._subrs=[],te._subrsBias=0,te.private[0]),Se=te.private[1];ge!==0&&Se!==0&&(ge=pr(I,Se+M,ge,H),te._defaultWidthX=ge.defaultWidthX,te._nominalWidthX=ge.nominalWidthX,ge.subrs!==0&&(Se=nn(I,Se+ge.subrs+M),te._subrs=Se.objects,te._subrsBias=At(te._subrs)),te._privateDict=ge),K.push(te)}return K}function mr(I,M,P){var H,K,ee,te,ge,Se,Ce,Re,Fe,Ue=new V,Ee=[],vt=0,tt=!1,et=!1,nt=0,it=0,Rt=(Fe=(I.isCIDFont?(ge=I.tables.cff.topDict._fdSelect[M.index],ge=I.tables.cff.topDict._fdArray[ge],Se=ge._subrs,Ce=ge._subrsBias,Re=ge._defaultWidthX,ge):(Se=I.tables.cff.topDict._subrs,Ce=I.tables.cff.topDict._subrsBias,Re=I.tables.cff.topDict._defaultWidthX,I.tables.cff.topDict))._nominalWidthX,Re);function jt(ln,yn){et&&Ue.closePath(),Ue.moveTo(ln,yn),et=!0}function Nt(){Ee.length%2==0||tt||(Rt=Ee.shift()+Fe),vt+=Ee.length>>1,Ee.length=0,tt=!0}return function ln(yn){for(var _n,Xn,Ln,Rn,en,Yn,Gn,dr,Nn,tr,Sr,Zr,Kn=0;Kn<yn.length;){var Mr=yn[Kn];switch(Kn+=1,Mr){case 1:case 3:Nt();break;case 4:1<Ee.length&&!tt&&(Rt=Ee.shift()+Fe,tt=!0),it+=Ee.pop(),jt(nt,it);break;case 5:for(;0<Ee.length;)nt+=Ee.shift(),it+=Ee.shift(),Ue.lineTo(nt,it);break;case 6:for(;0<Ee.length&&(nt+=Ee.shift(),Ue.lineTo(nt,it),Ee.length!==0);)it+=Ee.shift(),Ue.lineTo(nt,it);break;case 7:for(;0<Ee.length&&(it+=Ee.shift(),Ue.lineTo(nt,it),Ee.length!==0);)nt+=Ee.shift(),Ue.lineTo(nt,it);break;case 8:for(;0<Ee.length;)H=nt+Ee.shift(),K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),nt=ee+Ee.shift(),it=te+Ee.shift(),Ue.curveTo(H,K,ee,te,nt,it);break;case 10:en=Ee.pop()+Ce,(Yn=Se[en])&&ln(Yn);break;case 11:return;case 12:switch(Mr=yn[Kn],Kn+=1,Mr){case 35:H=nt+Ee.shift(),K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),Gn=ee+Ee.shift(),dr=te+Ee.shift(),Nn=Gn+Ee.shift(),tr=dr+Ee.shift(),Sr=Nn+Ee.shift(),Zr=tr+Ee.shift(),nt=Sr+Ee.shift(),it=Zr+Ee.shift(),Ee.shift(),Ue.curveTo(H,K,ee,te,Gn,dr),Ue.curveTo(Nn,tr,Sr,Zr,nt,it);break;case 34:H=nt+Ee.shift(),K=it,ee=H+Ee.shift(),te=K+Ee.shift(),Gn=ee+Ee.shift(),dr=te,Nn=Gn+Ee.shift(),tr=te,Sr=Nn+Ee.shift(),Zr=it,nt=Sr+Ee.shift(),Ue.curveTo(H,K,ee,te,Gn,dr),Ue.curveTo(Nn,tr,Sr,Zr,nt,it);break;case 36:H=nt+Ee.shift(),K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),Gn=ee+Ee.shift(),dr=te,Nn=Gn+Ee.shift(),tr=te,Sr=Nn+Ee.shift(),Zr=tr+Ee.shift(),nt=Sr+Ee.shift(),Ue.curveTo(H,K,ee,te,Gn,dr),Ue.curveTo(Nn,tr,Sr,Zr,nt,it);break;case 37:H=nt+Ee.shift(),K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),Gn=ee+Ee.shift(),dr=te+Ee.shift(),Nn=Gn+Ee.shift(),tr=dr+Ee.shift(),Sr=Nn+Ee.shift(),Zr=tr+Ee.shift(),Math.abs(Sr-nt)>Math.abs(Zr-it)?nt=Sr+Ee.shift():it=Zr+Ee.shift(),Ue.curveTo(H,K,ee,te,Gn,dr),Ue.curveTo(Nn,tr,Sr,Zr,nt,it);break;default:console.log("Glyph "+M.index+": unknown operator 1200"+Mr),Ee.length=0}break;case 14:0<Ee.length&&!tt&&(Rt=Ee.shift()+Fe,tt=!0),et&&(Ue.closePath(),et=!1);break;case 18:Nt();break;case 19:case 20:Nt(),Kn+=vt+7>>3;break;case 21:2<Ee.length&&!tt&&(Rt=Ee.shift()+Fe,tt=!0),it+=Ee.pop(),jt(nt+=Ee.pop(),it);break;case 22:1<Ee.length&&!tt&&(Rt=Ee.shift()+Fe,tt=!0),jt(nt+=Ee.pop(),it);break;case 23:Nt();break;case 24:for(;2<Ee.length;)H=nt+Ee.shift(),K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),nt=ee+Ee.shift(),it=te+Ee.shift(),Ue.curveTo(H,K,ee,te,nt,it);nt+=Ee.shift(),it+=Ee.shift(),Ue.lineTo(nt,it);break;case 25:for(;6<Ee.length;)nt+=Ee.shift(),it+=Ee.shift(),Ue.lineTo(nt,it);H=nt+Ee.shift(),K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),nt=ee+Ee.shift(),it=te+Ee.shift(),Ue.curveTo(H,K,ee,te,nt,it);break;case 26:for(Ee.length%2&&(nt+=Ee.shift());0<Ee.length;)H=nt,K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),nt=ee,it=te+Ee.shift(),Ue.curveTo(H,K,ee,te,nt,it);break;case 27:for(Ee.length%2&&(it+=Ee.shift());0<Ee.length;)H=nt+Ee.shift(),K=it,ee=H+Ee.shift(),te=K+Ee.shift(),nt=ee+Ee.shift(),it=te,Ue.curveTo(H,K,ee,te,nt,it);break;case 28:_n=yn[Kn],Xn=yn[Kn+1],Ee.push((_n<<24|Xn<<16)>>16),Kn+=2;break;case 29:en=Ee.pop()+I.gsubrsBias,(Yn=I.gsubrs[en])&&ln(Yn);break;case 30:for(;0<Ee.length&&(H=nt,K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),nt=ee+Ee.shift(),it=te+(Ee.length===1?Ee.shift():0),Ue.curveTo(H,K,ee,te,nt,it),Ee.length!==0);)H=nt+Ee.shift(),K=it,ee=H+Ee.shift(),te=K+Ee.shift(),it=te+Ee.shift(),nt=ee+(Ee.length===1?Ee.shift():0),Ue.curveTo(H,K,ee,te,nt,it);break;case 31:for(;0<Ee.length&&(H=nt+Ee.shift(),K=it,ee=H+Ee.shift(),te=K+Ee.shift(),it=te+Ee.shift(),nt=ee+(Ee.length===1?Ee.shift():0),Ue.curveTo(H,K,ee,te,nt,it),Ee.length!==0);)H=nt,K=it+Ee.shift(),ee=H+Ee.shift(),te=K+Ee.shift(),nt=ee+Ee.shift(),it=te+(Ee.length===1?Ee.shift():0),Ue.curveTo(H,K,ee,te,nt,it);break;default:Mr<32?console.log("Glyph "+M.index+": unknown operator "+Mr):Mr<247?Ee.push(Mr-139):Mr<251?(_n=yn[Kn],Kn+=1,Ee.push(256*(Mr-247)+_n+108)):Mr<255?(_n=yn[Kn],Kn+=1,Ee.push(256*-(Mr-251)-_n-108)):(_n=yn[Kn],Xn=yn[Kn+1],Ln=yn[Kn+2],Rn=yn[Kn+3],Kn+=4,Ee.push((_n<<24|Xn<<16|Ln<<8|Rn)/65536))}}}(P),M.advanceWidth=Rt,Ue}function Yr(I,M){var P,H=Ft.indexOf(I);return 0<=H&&(P=H),0<=(H=M.indexOf(I))?P=H+Ft.length:(P=Ft.length+M.length,M.push(I)),P}function Sn(I,M,P){for(var H={},K=0;K<I.length;K+=1){var ee=I[K],te=M[ee.name];te===void 0||function ge(Se,Ce){if(Se===Ce)return 1;if(Array.isArray(Se)&&Array.isArray(Ce)&&Se.length===Ce.length){for(var Re=0;Re<Se.length;Re+=1)if(!ge(Se[Re],Ce[Re]))return;return 1}}(te,ee.value)||(ee.type==="SID"&&(te=Yr(te,P)),H[ee.op]={name:ee.name,type:ee.type,value:te})}return H}function vr(I,M){var P=new ze.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return P.dict=Sn(Qt,I,M),P}function Cr(I){var M=new ze.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return M.topDicts=[{name:"topDict_0",type:"TABLE",value:I}],M}var Cn=function(I,M,P){P.tables.cff={},H=I,K=M,(ee={}).formatMajor=Ve.getCard8(H,K),ee.formatMinor=Ve.getCard8(H,K+1),ee.size=Ve.getCard8(H,K+2),ee.offsetSize=Ve.getCard8(H,K+3),ee.startOffset=K,ee.endOffset=K+4;var H=nn(I,ee.endOffset,Ve.bytesToString),K=nn(I,H.endOffset),ee=nn(I,K.endOffset,Ve.bytesToString);if(H=nn(I,ee.endOffset),P.gsubrs=H.objects,P.gsubrsBias=At(P.gsubrs),(H=An(I,M,K.objects,ee.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+H.length);if(K=H[0],(P.tables.cff.topDict=K)._privateDict&&(P.defaultWidthX=K._privateDict.defaultWidthX,P.nominalWidthX=K._privateDict.nominalWidthX),K.ros[0]!==void 0&&K.ros[1]!==void 0&&(P.isCIDFont=!0),P.isCIDFont){H=K.fdArray;var te=K.fdSelect;if(H===0||te===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");H=An(I,M,nn(I,H+=M).objects,ee.objects),K._fdArray=H,K._fdSelect=function(Re,Fe,Ue,Ee){var vt,tt=[],et=new Ve.Parser(Re,Fe);if((Re=et.parseCard8())===0)for(var nt=0;nt<Ue;nt++){if(Ee<=(vt=et.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+vt+" (FD count "+Ee+")");tt.push(vt)}else{if(Re!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Re);var it,Rt=et.parseCard16(),jt=et.parseCard16();if(jt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+jt);for(var Nt=0;Nt<Rt;Nt++){if(vt=et.parseCard8(),it=et.parseCard16(),Ee<=vt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+vt+" (FD count "+Ee+")");if(Ue<it)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+it);for(;jt<it;jt++)tt.push(vt);jt=it}if(it!==Ue)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+it)}return tt}(I,te+=M,P.numGlyphs,H.length)}H=pr(I,te=M+K.private[1],K.private[0],ee.objects);var ge=(P.defaultWidthX=H.defaultWidthX,P.nominalWidthX=H.nominalWidthX,H.subrs!==0?(te=nn(I,te+H.subrs),P.subrs=te.objects,P.subrsBias=At(P.subrs)):(P.subrs=[],P.subrsBias=0),nn(I,M+K.charStrings));P.nGlyphs=ge.objects.length,H=function(Re,Fe,Ue,Ee){var vt=new Ve.Parser(Re,Fe),tt=(--Ue,[".notdef"]);if((Re=vt.parseCard8())===0)for(var et=0;et<Ue;et+=1)nt=vt.parseSID(),tt.push(tn(Ee,nt));else if(Re===1)for(;tt.length<=Ue;)for(var nt=vt.parseSID(),it=vt.parseCard8(),Rt=0;Rt<=it;Rt+=1)tt.push(tn(Ee,nt)),nt+=1;else{if(Re!==2)throw new Error("Unknown charset format "+Re);for(;tt.length<=Ue;){nt=vt.parseSID(),it=vt.parseCard16();for(var jt=0;jt<=it;jt+=1)tt.push(tn(Ee,nt)),nt+=1}}return tt}(I,M+K.charset,P.nGlyphs,ee.objects),K.encoding===0?P.cffEncoding=new be(kt,H):K.encoding===1?P.cffEncoding=new be(Tt,H):P.cffEncoding=function(Re,Fe,Ue){var Ee={},vt=new Ve.Parser(Re,Fe);if((Re=vt.parseCard8())===0)for(var tt=vt.parseCard8(),et=0;et<tt;et+=1)Ee[it=vt.parseCard8()]=et;else{if(Re!==1)throw new Error("Unknown encoding format "+Re);for(var nt=vt.parseCard8(),it=1,Rt=0;Rt<nt;Rt+=1)for(var jt=vt.parseCard8(),Nt=vt.parseCard8(),ln=jt;ln<=jt+Nt;ln+=1)Ee[ln]=it,it+=1}return new be(Ee,Ue)}(I,M+K.encoding,H),P.encoding=P.encoding||P.cffEncoding,P.glyphs=new wt.GlyphSet(P);for(var Se=0;Se<P.nGlyphs;Se+=1){var Ce=ge.objects[Se];P.glyphs.push(Se,wt.cffGlyphLoader(P,Se,mr,Ce))}},Po=function(I,M){for(var P,H=new ze.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),K=1/M.unitsPerEm,ee=(K={version:M.version,fullName:M.fullName,familyName:M.familyName,weight:M.weightName,fontBBox:M.fontBBox||[0,0,0,0],fontMatrix:[K,0,0,K,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},[]),te=1;te<I.length;te+=1)P=I.get(te),ee.push(P.name);var ge,Se,Ce=[],Re=(M=(H.header=new ze.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),H.nameIndex=function(Fe){var Ue=new ze.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Ue.names=[];for(var Ee=0;Ee<Fe.length;Ee+=1)Ue.names.push({name:"name_"+Ee,type:"NAME",value:Fe[Ee]});return Ue}([M.postScriptName]),vr(K,Ce)),H.topDictIndex=Cr(M),H.globalSubrIndex=new ze.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),H.charsets=function(Fe,Ue){for(var Ee=new ze.Record("Charsets",[{name:"format",type:"Card8",value:0}]),vt=0;vt<Fe.length;vt+=1){var tt=Yr(Fe[vt],Ue);Ee.fields.push({name:"glyph_"+vt,type:"SID",value:tt})}return Ee}(ee,Ce),H.charStringsIndex=function(Fe){for(var Ue=new ze.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),Ee=0;Ee<Fe.length;Ee+=1){var vt=Fe.get(Ee),tt=function(et){for(var nt=[],it=et.path,Rt=(nt.push({name:"width",type:"NUMBER",value:et.advanceWidth}),0),jt=0,Nt=0;Nt<it.commands.length;Nt+=1){var ln,yn,_n,Xn,Ln=void 0,Rn=void 0,en=it.commands[Nt];(en=en.type==="Q"?{type:"C",x:en.x,y:en.y,x1:1/3*Rt+2/3*en.x1,y1:1/3*jt+2/3*en.y1,x2:1/3*en.x+2/3*en.x1,y2:1/3*en.y+2/3*en.y1}:en).type==="M"?(Ln=Math.round(en.x-Rt),Rn=Math.round(en.y-jt),nt.push({name:"dx",type:"NUMBER",value:Ln}),nt.push({name:"dy",type:"NUMBER",value:Rn}),nt.push({name:"rmoveto",type:"OP",value:21}),Rt=Math.round(en.x),jt=Math.round(en.y)):en.type==="L"?(Ln=Math.round(en.x-Rt),Rn=Math.round(en.y-jt),nt.push({name:"dx",type:"NUMBER",value:Ln}),nt.push({name:"dy",type:"NUMBER",value:Rn}),nt.push({name:"rlineto",type:"OP",value:5}),Rt=Math.round(en.x),jt=Math.round(en.y)):en.type==="C"&&(ln=Math.round(en.x1-Rt),yn=Math.round(en.y1-jt),_n=Math.round(en.x2-en.x1),Xn=Math.round(en.y2-en.y1),Ln=Math.round(en.x-en.x2),Rn=Math.round(en.y-en.y2),nt.push({name:"dx1",type:"NUMBER",value:ln}),nt.push({name:"dy1",type:"NUMBER",value:yn}),nt.push({name:"dx2",type:"NUMBER",value:_n}),nt.push({name:"dy2",type:"NUMBER",value:Xn}),nt.push({name:"dx",type:"NUMBER",value:Ln}),nt.push({name:"dy",type:"NUMBER",value:Rn}),nt.push({name:"rrcurveto",type:"OP",value:8}),Rt=Math.round(en.x),jt=Math.round(en.y))}return nt.push({name:"endchar",type:"OP",value:14}),nt}(vt);Ue.charStrings.push({name:vt.name,type:"CHARSTRING",value:tt})}return Ue}(I),H.privateDict=(Re={},ge=Ce,(Se=new ze.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Sn(an,Re,ge),Se),H.stringIndex=function(Fe){var Ue=new ze.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Ue.strings=[];for(var Ee=0;Ee<Fe.length;Ee+=1)Ue.strings.push({name:"string_"+Ee,type:"STRING",value:Fe[Ee]});return Ue}(Ce),H.header.sizeOf()+H.nameIndex.sizeOf()+H.topDictIndex.sizeOf()+H.stringIndex.sizeOf()+H.globalSubrIndex.sizeOf());return K.charset=Re,K.encoding=0,K.charStrings=K.charset+H.charsets.sizeOf(),K.private[1]=K.charStrings+H.charStringsIndex.sizeOf(),M=vr(K,Ce),H.topDictIndex=Cr(M),H},ia=function(I,M){var P={};return I=new Ve.Parser(I,M),P.version=I.parseVersion(),P.fontRevision=Math.round(1e3*I.parseFixed())/1e3,P.checkSumAdjustment=I.parseULong(),P.magicNumber=I.parseULong(),J.argument(P.magicNumber===1594834165,"Font header has wrong magic number."),P.flags=I.parseUShort(),P.unitsPerEm=I.parseUShort(),P.created=I.parseLongDateTime(),P.modified=I.parseLongDateTime(),P.xMin=I.parseShort(),P.yMin=I.parseShort(),P.xMax=I.parseShort(),P.yMax=I.parseShort(),P.macStyle=I.parseUShort(),P.lowestRecPPEM=I.parseUShort(),P.fontDirectionHint=I.parseShort(),P.indexToLocFormat=I.parseShort(),P.glyphDataFormat=I.parseShort(),P},Bo=function(I){var M=Math.round(new Date().getTime()/1e3)+2082844800,P=M;return I.createdTimestamp&&(P=I.createdTimestamp+2082844800),new ze.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:P},{name:"modified",type:"LONGDATETIME",value:M},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],I)},xr=function(I,M){var P={};return I=new Ve.Parser(I,M),P.version=I.parseVersion(),P.ascender=I.parseShort(),P.descender=I.parseShort(),P.lineGap=I.parseShort(),P.advanceWidthMax=I.parseUShort(),P.minLeftSideBearing=I.parseShort(),P.minRightSideBearing=I.parseShort(),P.xMaxExtent=I.parseShort(),P.caretSlopeRise=I.parseShort(),P.caretSlopeRun=I.parseShort(),P.caretOffset=I.parseShort(),I.relativeOffset+=8,P.metricDataFormat=I.parseShort(),P.numberOfHMetrics=I.parseUShort(),P},dl=function(I){return new ze.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],I)},Te=function(I,M,P,H,K){for(var ee,te,ge=new Ve.Parser(I,M),Se=0;Se<H;Se+=1){Se<P&&(ee=ge.parseUShort(),te=ge.parseShort());var Ce=K.get(Se);Ce.advanceWidth=ee,Ce.leftSideBearing=te}},bt=function(I){for(var M=new ze.Table("hmtx",[]),P=0;P<I.length;P+=1){var H=(K=I.get(P)).advanceWidth||0,K=K.leftSideBearing||0;M.fields.push({name:"advanceWidth_"+P,type:"USHORT",value:H}),M.fields.push({name:"leftSideBearing_"+P,type:"SHORT",value:K})}return M},Dt=function(I){for(var M=new ze.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:I.length}]),P="",H=12+4*I.length,K=0;K<I.length;++K){var ee=P.indexOf(I[K]);ee<0&&(ee=P.length,P+=I[K]),M.fields.push({name:"offset "+K,type:"USHORT",value:H+ee}),M.fields.push({name:"length "+K,type:"USHORT",value:I[K].length})}return M.fields.push({name:"stringPool",type:"CHARARRAY",value:P}),M},mt=function(I,M){for(var P=new Ve.Parser(I,M),H=P.parseULong(),K=(J.argument(H===1,"Unsupported ltag table version."),P.skip("uLong",1),P.parseULong()),ee=[],te=0;te<K;te++){for(var ge="",Se=M+P.parseUShort(),Ce=P.parseUShort(),Re=Se;Re<Se+Ce;++Re)ge+=String.fromCharCode(I.getInt8(Re));ee.push(ge)}return ee},gn=function(I,M){var P={};return I=new Ve.Parser(I,M),P.version=I.parseVersion(),P.numGlyphs=I.parseUShort(),P.version===1&&(P.maxPoints=I.parseUShort(),P.maxContours=I.parseUShort(),P.maxCompositePoints=I.parseUShort(),P.maxCompositeContours=I.parseUShort(),P.maxZones=I.parseUShort(),P.maxTwilightPoints=I.parseUShort(),P.maxStorage=I.parseUShort(),P.maxFunctionDefs=I.parseUShort(),P.maxInstructionDefs=I.parseUShort(),P.maxStackElements=I.parseUShort(),P.maxSizeOfInstructions=I.parseUShort(),P.maxComponentElements=I.parseUShort(),P.maxComponentDepth=I.parseUShort()),P},ut=function(I){return new ze.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:I}])},zn=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],$t={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},rn={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Et={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},kr="utf-16",Pr={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Kr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function cr(I,M,P){switch(I){case 0:return kr;case 1:return Kr[P]||Pr[M];case 3:if(M===1||M===10)return kr}}function ar(I){var M,P={};for(M in I)P[I[M]]=parseInt(M);return P}function os(I,M,P,H,K,ee){return new ze.Record("NameRecord",[{name:"platformID",type:"USHORT",value:I},{name:"encodingID",type:"USHORT",value:M},{name:"languageID",type:"USHORT",value:P},{name:"nameID",type:"USHORT",value:H},{name:"length",type:"USHORT",value:K},{name:"offset",type:"USHORT",value:ee}])}function as(I,M){if((P=function(ee,te){var ge=ee.length,Se=te.length-ge+1;e:for(var Ce=0;Ce<Se;Ce++)for(;Ce<Se;Ce++){for(var Re=0;Re<ge;Re++)if(te[Ce+Re]!==ee[Re])continue e;return Ce}return-1}(I,M))<0)for(var P=M.length,H=0,K=I.length;H<K;++H)M.push(I[H]);return P}var Vn=function(I,M,P){for(var H={},K=new Ve.Parser(I,M),ee=(M=K.parseUShort(),K.parseUShort()),te=K.offset+K.parseUShort(),ge=0;ge<ee;ge++){var Se=K.parseUShort(),Ce=K.parseUShort(),Re=K.parseUShort(),Fe=K.parseUShort(),Ue=(Fe=zn[Fe]||Fe,K.parseUShort()),Ee=K.parseUShort(),vt=function(tt,et,nt){switch(tt){case 0:if(et===65535)return"und";if(nt)return nt[et];break;case 1:return $t[et];case 3:return Et[et]}}(Se,Re,P);(Se=cr(Se,Ce,Re))!==void 0&&vt!==void 0&&(Ce=void 0,(Ce=Se===kr?ne.UTF16(I,te+Ee,Ue):ne.MACSTRING(I,te+Ee,Ue,Se))&&((Re=(Re=H[Fe])===void 0?H[Fe]={}:Re)[vt]=Ce))}return M===1&&K.parseUShort(),H},Nf=function(I,M){var P,H=[],K={},ee=ar(zn);for(P in I){var te=ee[P];if(te===void 0&&(te=P),Ue=parseInt(te),isNaN(Ue))throw new Error('Name table entry "'+P+'" does not exist, see nameTableNames for complete list.');K[Ue]=I[P],H.push(Ue)}for(var ge=ar($t),Se=ar(Et),Ce=[],Re=[],Fe=0;Fe<H.length;Fe++){var Ue,Ee,vt=K[Ue=H[Fe]];for(Ee in vt){var tt=vt[Ee],et=1,nt=ge[Ee],it=rn[nt],Rt=cr(et,it,nt),jt=((Rt=se.MACSTRING(tt,Rt))===void 0&&(et=0,(nt=M.indexOf(Ee))<0&&(nt=M.length,M.push(Ee)),it=4,Rt=se.UTF16(tt)),as(Rt,Re));(et=(Ce.push(os(et,it,nt,Ue,Rt.length,jt)),Se[Ee]))!==void 0&&(nt=as(it=se.UTF16(tt),Re),Ce.push(os(3,1,et,Ue,it.length,nt)))}}Ce.sort(function(yn,_n){return yn.platformID-_n.platformID||yn.encodingID-_n.encodingID||yn.languageID-_n.languageID||yn.nameID-_n.nameID});for(var Nt=new ze.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Ce.length},{name:"stringOffset",type:"USHORT",value:6+12*Ce.length}]),ln=0;ln<Ce.length;ln++)Nt.fields.push({name:"record_"+ln,type:"RECORD",value:Ce[ln]});return Nt.fields.push({name:"strings",type:"LITERAL",value:Re}),Nt},Df=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],gu=function(I,M){var P={},H=new Ve.Parser(I,M);P.version=H.parseUShort(),P.xAvgCharWidth=H.parseShort(),P.usWeightClass=H.parseUShort(),P.usWidthClass=H.parseUShort(),P.fsType=H.parseUShort(),P.ySubscriptXSize=H.parseShort(),P.ySubscriptYSize=H.parseShort(),P.ySubscriptXOffset=H.parseShort(),P.ySubscriptYOffset=H.parseShort(),P.ySuperscriptXSize=H.parseShort(),P.ySuperscriptYSize=H.parseShort(),P.ySuperscriptXOffset=H.parseShort(),P.ySuperscriptYOffset=H.parseShort(),P.yStrikeoutSize=H.parseShort(),P.yStrikeoutPosition=H.parseShort(),P.sFamilyClass=H.parseShort(),P.panose=[];for(var K=0;K<10;K++)P.panose[K]=H.parseByte();return P.ulUnicodeRange1=H.parseULong(),P.ulUnicodeRange2=H.parseULong(),P.ulUnicodeRange3=H.parseULong(),P.ulUnicodeRange4=H.parseULong(),P.achVendID=String.fromCharCode(H.parseByte(),H.parseByte(),H.parseByte(),H.parseByte()),P.fsSelection=H.parseUShort(),P.usFirstCharIndex=H.parseUShort(),P.usLastCharIndex=H.parseUShort(),P.sTypoAscender=H.parseShort(),P.sTypoDescender=H.parseShort(),P.sTypoLineGap=H.parseShort(),P.usWinAscent=H.parseUShort(),P.usWinDescent=H.parseUShort(),1<=P.version&&(P.ulCodePageRange1=H.parseULong(),P.ulCodePageRange2=H.parseULong()),2<=P.version&&(P.sxHeight=H.parseShort(),P.sCapHeight=H.parseShort(),P.usDefaultChar=H.parseUShort(),P.usBreakChar=H.parseUShort(),P.usMaxContent=H.parseUShort()),P},Mf=function(I){return new ze.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],I)},yu=function(I){for(var M=0;M<Df.length;M+=1){var P=Df[M];if(I>=P.begin&&I<P.end)return M}return-1},Uy=function(I,M){var P={},H=new Ve.Parser(I,M);switch(P.version=H.parseVersion(),P.italicAngle=H.parseFixed(),P.underlinePosition=H.parseShort(),P.underlineThickness=H.parseShort(),P.isFixedPitch=H.parseULong(),P.minMemType42=H.parseULong(),P.maxMemType42=H.parseULong(),P.minMemType1=H.parseULong(),P.maxMemType1=H.parseULong(),P.version){case 1:P.names=ue.slice();break;case 2:P.numberOfGlyphs=H.parseUShort(),P.glyphNameIndex=new Array(P.numberOfGlyphs);for(var K=0;K<P.numberOfGlyphs;K++)P.glyphNameIndex[K]=H.parseUShort();P.names=[];for(var ee,te=0;te<P.numberOfGlyphs;te++)P.glyphNameIndex[te]>=ue.length&&(ee=H.parseChar(),P.names.push(H.parseString(ee)));break;case 2.5:P.numberOfGlyphs=H.parseUShort(),P.offset=new Array(P.numberOfGlyphs);for(var ge=0;ge<P.numberOfGlyphs;ge++)P.offset[ge]=H.parseChar()}return P},Vs=function(){return new ze.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},Ms=new Array(9),Oa=(Ms[1]=function(){var I=this.offset+this.relativeOffset,M=this.parseUShort();return M===1?{substFormat:1,coverage:this.parsePointer(xe.coverage),deltaGlyphId:this.parseUShort()}:M===2?{substFormat:2,coverage:this.parsePointer(xe.coverage),substitute:this.parseOffset16List()}:void J.assert(!1,"0x"+I.toString(16)+": lookup type 1 format must be 1 or 2.")},Ms[2]=function(){var I=this.parseUShort();return J.argument(I===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:I,coverage:this.parsePointer(xe.coverage),sequences:this.parseListOfLists()}},Ms[3]=function(){var I=this.parseUShort();return J.argument(I===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:I,coverage:this.parsePointer(xe.coverage),alternateSets:this.parseListOfLists()}},Ms[4]=function(){var I=this.parseUShort();return J.argument(I===1,"GSUB ligature table identifier-format must be 1"),{substFormat:I,coverage:this.parsePointer(xe.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:xe.uShort,lookupListIndex:xe.uShort});Ms[5]=function(){var I,M,P=this.offset+this.relativeOffset,H=this.parseUShort();return H===1?{substFormat:H,coverage:this.parsePointer(xe.coverage),ruleSets:this.parseListOfLists(function(){var K=this.parseUShort(),ee=this.parseUShort();return{input:this.parseUShortList(K-1),lookupRecords:this.parseRecordList(ee,Oa)}})}:H===2?{substFormat:H,coverage:this.parsePointer(xe.coverage),classDef:this.parsePointer(xe.classDef),classSets:this.parseListOfLists(function(){var K=this.parseUShort(),ee=this.parseUShort();return{classes:this.parseUShortList(K-1),lookupRecords:this.parseRecordList(ee,Oa)}})}:H===3?(I=this.parseUShort(),M=this.parseUShort(),{substFormat:H,coverages:this.parseList(I,xe.pointer(xe.coverage)),lookupRecords:this.parseRecordList(M,Oa)}):void J.assert(!1,"0x"+P.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Ms[6]=function(){var I=this.offset+this.relativeOffset,M=this.parseUShort();return M===1?{substFormat:1,coverage:this.parsePointer(xe.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Oa)}})}:M===2?{substFormat:2,coverage:this.parsePointer(xe.coverage),backtrackClassDef:this.parsePointer(xe.classDef),inputClassDef:this.parsePointer(xe.classDef),lookaheadClassDef:this.parsePointer(xe.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Oa)}})}:M===3?{substFormat:3,backtrackCoverage:this.parseList(xe.pointer(xe.coverage)),inputCoverage:this.parseList(xe.pointer(xe.coverage)),lookaheadCoverage:this.parseList(xe.pointer(xe.coverage)),lookupRecords:this.parseRecordList(Oa)}:void J.assert(!1,"0x"+I.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Ms[7]=function(){var I=this.parseUShort(),M=(I=(J.argument(I===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),new xe(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:I,extension:Ms[I].call(M)}},Ms[8]=function(){var I=this.parseUShort();return J.argument(I===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:I,coverage:this.parsePointer(xe.coverage),backtrackCoverage:this.parseList(xe.pointer(xe.coverage)),lookaheadCoverage:this.parseList(xe.pointer(xe.coverage)),substitutes:this.parseUShortList()}};var di=new Array(9);di[1]=function(I){return I.substFormat===1?new ze.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ze.Coverage(I.coverage)},{name:"deltaGlyphID",type:"USHORT",value:I.deltaGlyphId}]):new ze.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ze.Coverage(I.coverage)}].concat(ze.ushortList("substitute",I.substitute)))},di[3]=function(I){return J.assert(I.substFormat===1,"Lookup type 3 substFormat must be 1."),new ze.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ze.Coverage(I.coverage)}].concat(ze.tableList("altSet",I.alternateSets,function(M){return new ze.Table("alternateSetTable",ze.ushortList("alternate",M))})))},di[4]=function(I){return J.assert(I.substFormat===1,"Lookup type 4 substFormat must be 1."),new ze.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ze.Coverage(I.coverage)}].concat(ze.tableList("ligSet",I.ligatureSets,function(M){return new ze.Table("ligatureSetTable",ze.tableList("ligature",M,function(P){return new ze.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:P.ligGlyph}].concat(ze.ushortList("component",P.components,P.components.length+1)))}))})))};var hi=function(I,M){return M=(I=new xe(I,M=M||0)).parseVersion(1),J.argument(M===1||M===1.1,"Unsupported GSUB table version."),M===1?{version:M,scripts:I.parseScriptList(),features:I.parseFeatureList(),lookups:I.parseLookupList(Ms)}:{version:M,scripts:I.parseScriptList(),features:I.parseFeatureList(),lookups:I.parseLookupList(Ms),variations:I.parseFeatureVariationsList()}},Of=function(I){return new ze.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ze.ScriptList(I.scripts)},{name:"features",type:"TABLE",value:new ze.FeatureList(I.features)},{name:"lookups",type:"TABLE",value:new ze.LookupList(I.lookups,di)}])},$f=function(I,M){for(var P=new Ve.Parser(I,M),H=P.parseULong(),K=(J.argument(H===1,"Unsupported META table version."),P.parseULong(),P.parseULong(),P.parseULong()),ee={},te=0;te<K;te++){var ge=P.parseTag(),Se=P.parseULong(),Ce=P.parseULong();Se=ne.UTF8(I,M+Se,Ce),ee[ge]=Se}return ee},fi=function(I){var M,P=Object.keys(I).length,H="",K=16+12*P,ee=new ze.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:K},{name:"numTags",type:"ULONG",value:P}]);for(M in I){var te=H.length;H+=I[M],ee.fields.push({name:"tag "+M,type:"TAG",value:M}),ee.fields.push({name:"offset "+M,type:"ULONG",value:K+te}),ee.fields.push({name:"length "+M,type:"ULONG",value:I[M].length})}return ee.fields.push({name:"stringPool",type:"CHARARRAY",value:H}),ee};function Lf(I){return Math.log(I)/Math.log(2)|0}function Bc(I){for(;I.length%4!=0;)I.push(0);for(var M=0,P=0;P<I.length;P+=4)M+=(I[P]<<24)+(I[P+1]<<16)+(I[P+2]<<8)+I[P+3];return M%Math.pow(2,32)}function Uc(I,M,P,H){return new ze.Record("Table Record",[{name:"tag",type:"TAG",value:I!==void 0?I:""},{name:"checkSum",type:"ULONG",value:M!==void 0?M:0},{name:"offset",type:"ULONG",value:P!==void 0?P:0},{name:"length",type:"ULONG",value:H!==void 0?H:0}])}function zc(I){for(var M=new ze.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),P=(M.tables=I,M.numTables=I.length,Math.pow(2,Lf(M.numTables))),H=(M.searchRange=16*P,M.entrySelector=Lf(P),M.rangeShift=16*M.numTables-M.searchRange,[]),K=[],ee=M.sizeOf()+Uc().sizeOf()*M.numTables;ee%4!=0;)ee+=1,K.push({name:"padding",type:"BYTE",value:0});for(var te=0;te<I.length;te+=1){var ge=I[te],Se=(J.argument(ge.tableName.length===4,"Table name"+ge.tableName+" is invalid."),ge.sizeOf()),Ce=Uc(ge.tableName,Bc(ge.encode()),ee,Se);for(H.push({name:Ce.tag+" Table Record",type:"RECORD",value:Ce}),K.push({name:ge.tableName+" table",type:"RECORD",value:ge}),ee+=Se,J.argument(!isNaN(ee),"Something went wrong calculating the offset.");ee%4!=0;)ee+=1,K.push({name:"padding",type:"BYTE",value:0})}return H.sort(function(Re,Fe){return Re.value.tag>Fe.value.tag?1:-1}),M.fields=M.fields.concat(H),M.fields=M.fields.concat(K),M}function Ff(I,M,P){for(var H=0;H<M.length;H+=1){var K=I.charToGlyphIndex(M[H]);if(0<K)return I.glyphs.get(K).getMetrics()}return P}var zy=function(I){for(var M,P=[],H=[],K=[],ee=[],te=[],ge=[],Se=[],Ce=0,Re=0,Fe=0,Ue=0,Ee=0,vt=0;vt<I.glyphs.length;vt+=1){var tt=I.glyphs.get(vt),et=0|tt.unicode;if(isNaN(tt.advanceWidth))throw new Error("Glyph "+tt.name+" ("+vt+"): advanceWidth is not a number.");if((et<M||M===void 0)&&0<et&&(M=et),Ce<et&&(Ce=et),(et=yu(et))<32)Re|=1<<et;else if(et<64)Fe|=1<<et-32;else if(et<96)Ue|=1<<et-64;else{if(!(et<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Ee|=1<<et-96}tt.name!==".notdef"&&(et=tt.getMetrics(),P.push(et.xMin),H.push(et.yMin),K.push(et.xMax),ee.push(et.yMax),ge.push(et.leftSideBearing),Se.push(et.rightSideBearing),te.push(tt.advanceWidth))}var nt,it={xMin:Math.min.apply(null,P),yMin:Math.min.apply(null,H),xMax:Math.max.apply(null,K),yMax:Math.max.apply(null,ee),advanceWidthMax:Math.max.apply(null,te),advanceWidthAvg:function(Mr){for(var ml=0,gl=0;gl<Mr.length;gl+=1)ml+=Mr[gl];return ml/Mr.length}(te),minLeftSideBearing:Math.min.apply(null,ge),maxLeftSideBearing:Math.max.apply(null,ge),minRightSideBearing:Math.min.apply(null,Se)},Rt=(it.ascender=I.ascender,it.descender=I.descender,Bo({flags:3,unitsPerEm:I.unitsPerEm,xMin:it.xMin,yMin:it.yMin,xMax:it.xMax,yMax:it.yMax,lowestRecPPEM:3,createdTimestamp:I.createdTimestamp})),jt=dl({ascender:it.ascender,descender:it.descender,advanceWidthMax:it.advanceWidthMax,minLeftSideBearing:it.minLeftSideBearing,minRightSideBearing:it.minRightSideBearing,xMaxExtent:it.maxLeftSideBearing+(it.xMax-it.xMin),numberOfHMetrics:I.glyphs.length}),Nt=ut(I.glyphs.length),ln=Mf({xAvgCharWidth:Math.round(it.advanceWidthAvg),usWeightClass:I.tables.os2.usWeightClass,usWidthClass:I.tables.os2.usWidthClass,usFirstCharIndex:M,usLastCharIndex:Ce,ulUnicodeRange1:Re,ulUnicodeRange2:Fe,ulUnicodeRange3:Ue,ulUnicodeRange4:Ee,fsSelection:I.tables.os2.fsSelection,sTypoAscender:it.ascender,sTypoDescender:it.descender,sTypoLineGap:0,usWinAscent:it.yMax,usWinDescent:Math.abs(it.yMin),ulCodePageRange1:1,sxHeight:Ff(I,"xyvw",{yMax:Math.round(it.ascender/2)}).yMax,sCapHeight:Ff(I,"HIKLEFJMNTZBDPRAGOQSUVWXY",it).yMax,usDefaultChar:I.hasChar(" ")?32:0,usBreakChar:I.hasChar(" ")?32:0}),yn=bt(I.glyphs),_n=Ct(I.glyphs),Xn=(dr=I.getEnglishName("fontFamily"))+" "+(Nn=I.getEnglishName("fontSubfamily")),Ln=(Ln=I.getEnglishName("postScriptName"))||dr.replace(/\s/g,"")+"-"+Nn,Rn={};for(nt in I.names)Rn[nt]=I.names[nt];Rn.uniqueID||(Rn.uniqueID={en:I.getEnglishName("manufacturer")+":"+Xn}),Rn.postScriptName||(Rn.postScriptName={en:Ln}),Rn.preferredFamily||(Rn.preferredFamily=I.names.fontFamily),Rn.preferredSubfamily||(Rn.preferredSubfamily=I.names.fontSubfamily);var en=Nf(Rn,Yn=[]),Yn=0<Yn.length?Dt(Yn):void 0,Gn=Vs(),dr=(Xn=Po(I.glyphs,{version:I.getEnglishName("version"),fullName:Xn,familyName:dr,weightName:Nn,postScriptName:Ln,unitsPerEm:I.unitsPerEm,fontBBox:[0,it.yMin,it.ascender,it.advanceWidthMax]}),I.metas&&0<Object.keys(I.metas).length?fi(I.metas):void 0),Nn=[Rt,jt,Nt,ln,en,_n,Gn,Xn,yn];Yn&&Nn.push(Yn),I.tables.gsub&&Nn.push(Of(I.tables.gsub)),dr&&Nn.push(dr);for(var tr=Bc((Ln=zc(Nn)).encode()),Sr=Ln.fields,Zr=!1,Kn=0;Kn<Sr.length;Kn+=1)if(Sr[Kn].name==="head table"){Sr[Kn].value.checkSumAdjustment=2981146554-tr,Zr=!0;break}if(Zr)return Ln;throw new Error("Could not find head table with checkSum to adjust.")};function pi(I,M){for(var P=0,H=I.length-1;P<=H;){var K=P+H>>>1,ee=I[K].tag;if(ee===M)return K;ee<M?P=1+K:H=K-1}return-P-1}function bu(I,M){for(var P=0,H=I.length-1;P<=H;){var K=P+H>>>1,ee=I[K];if(ee===M)return K;ee<M?P=1+K:H=K-1}return-P-1}function vu(I,M){for(var P=0,H=I.length-1;P<=H;){var K,ee=P+H>>>1,te=(K=I[ee]).start;if(te===M)return K;te<M?P=1+ee:H=ee-1}if(0<P)return M>(K=I[P-1]).end?0:K}function Uo(I,M){this.font=I,this.tableName=M}function zo(I){Uo.call(this,I,"gpos")}function to(I){Uo.call(this,I,"gsub")}function xu(I,M,P){for(var H=I.subtables,K=0;K<H.length;K++){var ee=H[K];if(ee.substFormat===M)return ee}if(P)return H.push(P),P}function Vc(I){for(var M=new ArrayBuffer(I.length),P=new Uint8Array(M),H=0;H<I.length;++H)P[H]=I[H];return M}function bo(I,M){if(!I)throw M}function vo(I,M,P,H,K){var ee=0<(M&H)?(ee=I.parseByte(),P+(ee=(M&K)==0?-ee:ee)):0<(M&K)?P:P+I.parseShort();return ee}function Gc(I,M,P){var H,K=new Ve.Parser(M,P);if(I.numberOfContours=K.parseShort(),I._xMin=K.parseShort(),I._yMin=K.parseShort(),I._xMax=K.parseShort(),I._yMax=K.parseShort(),0<I.numberOfContours){for(var ee=I.endPointIndices=[],te=0;te<I.numberOfContours;te+=1)ee.push(K.parseUShort());I.instructionLength=K.parseUShort(),I.instructions=[];for(var ge=0;ge<I.instructionLength;ge+=1)I.instructions.push(K.parseByte());for(var Se=ee[ee.length-1]+1,Ce=[],Re=0;Re<Se;Re+=1)if(H=K.parseByte(),Ce.push(H),0<(8&H))for(var Fe=K.parseByte(),Ue=0;Ue<Fe;Ue+=1)Ce.push(H),Re+=1;if(J.argument(Ce.length===Se,"Bad flags."),0<ee.length){var Ee,vt=[];if(0<Se){for(var tt=0;tt<Se;tt+=1)H=Ce[tt],(Ee={}).onCurve=!!(1&H),Ee.lastPointOfContour=0<=ee.indexOf(tt),vt.push(Ee);for(var et=0,nt=0;nt<Se;nt+=1)H=Ce[nt],(Ee=vt[nt]).x=vo(K,H,et,2,16),et=Ee.x;for(var it=0,Rt=0;Rt<Se;Rt+=1)H=Ce[Rt],(Ee=vt[Rt]).y=vo(K,H,it,4,32),it=Ee.y}I.points=vt}else I.points=[]}else if(I.numberOfContours===0)I.points=[];else{I.isComposite=!0,I.points=[],I.components=[];for(var jt=!0;jt;){Ce=K.parseUShort();var Nt={glyphIndex:K.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Ce)?0<(2&Ce)?(Nt.dx=K.parseShort(),Nt.dy=K.parseShort()):Nt.matchedPoints=[K.parseUShort(),K.parseUShort()]:0<(2&Ce)?(Nt.dx=K.parseChar(),Nt.dy=K.parseChar()):Nt.matchedPoints=[K.parseByte(),K.parseByte()],0<(8&Ce)?Nt.xScale=Nt.yScale=K.parseF2Dot14():0<(64&Ce)?(Nt.xScale=K.parseF2Dot14(),Nt.yScale=K.parseF2Dot14()):0<(128&Ce)&&(Nt.xScale=K.parseF2Dot14(),Nt.scale01=K.parseF2Dot14(),Nt.scale10=K.parseF2Dot14(),Nt.yScale=K.parseF2Dot14()),I.components.push(Nt),jt=!!(32&Ce)}if(256&Ce){I.instructionLength=K.parseUShort(),I.instructions=[];for(var ln=0;ln<I.instructionLength;ln+=1)I.instructions.push(K.parseByte())}}}function $a(I,M){for(var P=[],H=0;H<I.length;H+=1){var K=I[H];K={x:M.xScale*K.x+M.scale01*K.y+M.dx,y:M.scale10*K.x+M.yScale*K.y+M.dy,onCurve:K.onCurve,lastPointOfContour:K.lastPointOfContour},P.push(K)}return P}function Vo(I){var M=new V;if(I)for(var P=function(Fe){for(var Ue=[],Ee=[],vt=0;vt<Fe.length;vt+=1){var tt=Fe[vt];Ee.push(tt),tt.lastPointOfContour&&(Ue.push(Ee),Ee=[])}return J.argument(Ee.length===0,"There are still points left in the current contour."),Ue}(I),H=0;H<P.length;++H){var K,ee=P[H],te=ee[ee.length-1],ge=ee[0];te.onCurve?M.moveTo(te.x,te.y):ge.onCurve?M.moveTo(ge.x,ge.y):(K={x:.5*(te.x+ge.x),y:.5*(te.y+ge.y)},M.moveTo(K.x,K.y));for(var Se=0;Se<ee.length;++Se){var Ce,Re=te;te=ge,ge=ee[(Se+1)%ee.length],te.onCurve?M.lineTo(te.x,te.y):(Ce=ge,Re.onCurve||(te.x,Re.x,te.y,Re.y),ge.onCurve||(Ce={x:.5*(te.x+ge.x),y:.5*(te.y+ge.y)}),M.quadraticCurveTo(te.x,te.y,Ce.x,Ce.y))}M.closePath()}return M}function Wc(I,M){if(M.isComposite)for(var P=0;P<M.components.length;P+=1){var H=M.components[P],K=I.get(H.glyphIndex);if(K.getPath(),K.points){var ee=void 0;if(H.matchedPoints===void 0)ee=$a(K.points,H);else{if(H.matchedPoints[0]>M.points.length-1||H.matchedPoints[1]>K.points.length-1)throw Error("Matched points out of range in "+M.name);var te=M.points[H.matchedPoints[0]],ge=$a([ge=K.points[H.matchedPoints[1]]],H={xScale:H.xScale,scale01:H.scale01,scale10:H.scale10,yScale:H.yScale,dx:0,dy:0})[0];H.dx=te.x-ge.x,H.dy=te.y-ge.y,ee=$a(K.points,H)}M.points=M.points.concat(ee)}}return Vo(M.points)}(zo.prototype=Uo.prototype={searchTag:pi,binSearch:bu,getTable:function(I){var M=this.font.tables[this.tableName];return!M&&I?this.font.tables[this.tableName]=this.createDefaultTable():M},getScriptNames:function(){var I=this.getTable();return I?I.scripts.map(function(M){return M.tag}):[]},getDefaultScriptName:function(){var I=this.getTable();if(I){for(var M=!1,P=0;P<I.scripts.length;P++){var H=I.scripts[P].tag;if(H==="DFLT")return H;H==="latn"&&(M=!0)}return M?"latn":void 0}},getScriptTable:function(I,M){var P,H=this.getTable(M);if(H)return P=H.scripts,0<=(H=pi(H.scripts,I=I||"DFLT"))?P[H].script:M?(P.splice(-1-H,0,M={tag:I,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),M.script):void 0},getLangSysTable:function(I,M,P){var H;if(I=this.getScriptTable(I,P))return M&&M!=="dflt"&&M!=="DFLT"?0<=(H=pi(I.langSysRecords,M))?I.langSysRecords[H].langSys:P?(I.langSysRecords.splice(-1-H,0,P={tag:M,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),P.langSys):void 0:I.defaultLangSys},getFeatureTable:function(I,M,P,H){if(I=this.getLangSysTable(I,M,H)){for(var K,ee=I.featureIndexes,te=this.font.tables[this.tableName].features,ge=0;ge<ee.length;ge++)if((K=te[ee[ge]]).tag===P)return K.feature;if(H)return M=te.length,J.assert(M===0||P>=te[M-1].tag,"Features must be added in alphabetical order."),te.push(K={tag:P,feature:{params:0,lookupListIndexes:[]}}),ee.push(M),K.feature}},getLookupTables:function(I,M,P,H,K){var ee=[];if(I=this.getFeatureTable(I,M,P,K)){for(var te,ge=I.lookupListIndexes,Se=this.font.tables[this.tableName].lookups,Ce=0;Ce<ge.length;Ce++)(te=Se[ge[Ce]]).lookupType===H&&ee.push(te);if(ee.length===0&&K)return M=Se.length,Se.push(te={lookupType:H,lookupFlag:0,subtables:[],markFilteringSet:void 0}),ge.push(M),[te]}return ee},getGlyphClass:function(I,M){switch(I.format){case 1:return I.startGlyph<=M&&M<I.startGlyph+I.classes.length?I.classes[M-I.startGlyph]:0;case 2:var P=vu(I.ranges,M);return P?P.classId:0}},getCoverageIndex:function(I,M){switch(I.format){case 1:var P=bu(I.glyphs,M);return 0<=P?P:-1;case 2:return(P=vu(I.ranges,M))?P.index+M-P.start:-1}},expandCoverage:function(I){if(I.format===1)return I.glyphs;for(var M=[],P=I.ranges,H=0;H<P.length;H++)for(var K=P[H],ee=K.start,te=K.end,ge=ee;ge<=te;ge++)M.push(ge);return M}}).init=function(){var I=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(I)},zo.prototype.getKerningValue=function(I,M,P){for(var H=0;H<I.length;H++)for(var K=I[H].subtables,ee=0;ee<K.length;ee++){var te=K[ee],ge=this.getCoverageIndex(te.coverage,M);if(!(ge<0))switch(te.posFormat){case 1:for(var Se=te.pairSets[ge],Ce=0;Ce<Se.length;Ce++){var Re=Se[Ce];if(Re.secondGlyph===P)return Re.value1&&Re.value1.xAdvance||0}break;case 2:var Fe=this.getGlyphClass(te.classDef1,M),Ue=this.getGlyphClass(te.classDef2,P);return(Fe=te.classRecords[Fe][Ue]).value1&&Fe.value1.xAdvance||0}}return 0},zo.prototype.getKerningTables=function(I,M){if(this.font.tables.gpos)return this.getLookupTables(I,M,"kern",2)},(to.prototype=Uo.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},to.prototype.getSingle=function(I,M,P){for(var H=[],K=this.getLookupTables(M,P,I,1),ee=0;ee<K.length;ee++)for(var te=K[ee].subtables,ge=0;ge<te.length;ge++){var Se=te[ge],Ce=this.expandCoverage(Se.coverage),Re=void 0;if(Se.substFormat===1){var Fe=Se.deltaGlyphId;for(Re=0;Re<Ce.length;Re++){var Ue=Ce[Re];H.push({sub:Ue,by:Ue+Fe})}}else{var Ee=Se.substitute;for(Re=0;Re<Ce.length;Re++)H.push({sub:Ce[Re],by:Ee[Re]})}}return H},to.prototype.getAlternates=function(I,M,P){for(var H=[],K=this.getLookupTables(M,P,I,3),ee=0;ee<K.length;ee++)for(var te=K[ee].subtables,ge=0;ge<te.length;ge++)for(var Se=te[ge],Ce=this.expandCoverage(Se.coverage),Re=Se.alternateSets,Fe=0;Fe<Ce.length;Fe++)H.push({sub:Ce[Fe],by:Re[Fe]});return H},to.prototype.getLigatures=function(I,M,P){for(var H=[],K=this.getLookupTables(M,P,I,4),ee=0;ee<K.length;ee++)for(var te=K[ee].subtables,ge=0;ge<te.length;ge++)for(var Se=te[ge],Ce=this.expandCoverage(Se.coverage),Re=Se.ligatureSets,Fe=0;Fe<Ce.length;Fe++)for(var Ue=Ce[Fe],Ee=Re[Fe],vt=0;vt<Ee.length;vt++){var tt=Ee[vt];H.push({sub:[Ue].concat(tt.components),by:tt.ligGlyph})}return H},to.prototype.addSingle=function(I,M,P,H){P=xu(this.getLookupTables(P,H,I,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),J.assert(P.coverage.format===1,"Ligature: unable to modify coverage table format "+P.coverage.format),H=M.sub,(I=this.binSearch(P.coverage.glyphs,H))<0&&(P.coverage.glyphs.splice(I=-1-I,0,H),P.substitute.splice(I,0,0)),P.substitute[I]=M.by},to.prototype.addAlternate=function(I,M,P,H){P=xu(this.getLookupTables(P,H,I,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),J.assert(P.coverage.format===1,"Ligature: unable to modify coverage table format "+P.coverage.format),H=M.sub,(I=this.binSearch(P.coverage.glyphs,H))<0&&(P.coverage.glyphs.splice(I=-1-I,0,H),P.alternateSets.splice(I,0,0)),P.alternateSets[I]=M.by},to.prototype.addLigature=function(I,M,P,H){(H=(P=this.getLookupTables(P,H,I,4,!0)[0]).subtables[0])||(P.subtables[0]=H={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),J.assert(H.coverage.format===1,"Ligature: unable to modify coverage table format "+H.coverage.format),I=M.sub[0];var K=M.sub.slice(1);if(P={ligGlyph:M.by,components:K},0<=(M=this.binSearch(H.coverage.glyphs,I))){for(var ee=H.ligatureSets[M],te=0;te<ee.length;te++)if(function(ge,Se){var Ce=ge.length;if(Ce===Se.length){for(var Re=0;Re<Ce;Re++)if(ge[Re]!==Se[Re])return;return 1}}(ee[te].components,K))return;ee.push(P)}else H.coverage.glyphs.splice(M=-1-M,0,I),H.ligatureSets.splice(M,0,[P])},to.prototype.getFeature=function(I,M,P){if(/ss\d\d/.test(I))return this.getSingle(I,M,P);switch(I){case"aalt":case"salt":return this.getSingle(I,M,P).concat(this.getAlternates(I,M,P));case"dlig":case"liga":case"rlig":return this.getLigatures(I,M,P)}},to.prototype.add=function(I,M,P,H){if(/ss\d\d/.test(I))return this.addSingle(I,M,P,H);switch(I){case"aalt":case"salt":return typeof M.by=="number"?this.addSingle(I,M,P,H):this.addAlternate(I,M,P,H);case"dlig":case"liga":case"rlig":return this.addLigature(I,M,P,H)}};var hl={getPath:Vo,parse:function(I,M,P,H){for(var K=new wt.GlyphSet(H),ee=0;ee<P.length-1;ee+=1){var te=P[ee];te!==P[ee+1]?K.push(ee,wt.ttfGlyphLoader(H,ee,Gc,I,M+te,Wc)):K.push(ee,wt.glyphLoader(H,ee))}return K}};function Hc(I){this.font=I,this.getCommands=function(M){return hl.getPath(M).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function wu(I){return I}function fl(I){return Math.sign(I)*Math.round(Math.abs(I))}function Pf(I){return Math.sign(I)*Math.round(Math.abs(2*I))/2}function ks(I){return Math.sign(I)*(Math.round(Math.abs(I)+.5)-.5)}function La(I){return Math.sign(I)*Math.ceil(Math.abs(I))}function Su(I){return Math.sign(I)*Math.floor(Math.abs(I))}function mi(I){var M=this.srPeriod,P=this.srPhase,H=1;return I<0&&(I=-I,H=-1),I+=this.srThreshold-P,I=Math.trunc(I/M)*M,(I+=P)<0?P*H:I*H}var xo={x:1,y:0,axis:"x",distance:function(I,M,P,H){return(P?I.xo:I.x)-(H?M.xo:M.x)},interpolate:function(I,M,P,H){var K,ee,te,ge,Se,Ce,Re;if(!H||H===this)return K=I.xo-M.xo,ee=I.xo-P.xo,Se=M.x-M.xo,Ce=P.x-P.xo,(Re=(te=Math.abs(K))+(ge=Math.abs(ee)))===0?void(I.x=I.xo+(Se+Ce)/2):void(I.x=I.xo+(Se*ge+Ce*te)/Re);K=H.distance(I,M,!0,!0),ee=H.distance(I,P,!0,!0),Se=H.distance(M,M,!1,!0),Ce=H.distance(P,P,!1,!0),(Re=(te=Math.abs(K))+(ge=Math.abs(ee)))===0?xo.setRelative(I,I,(Se+Ce)/2,H,!0):xo.setRelative(I,I,(Se*ge+Ce*te)/Re,H,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(I,M,P,H,K){var ee,te;H&&H!==this?(ee=K?M.xo:M.x,te=K?M.yo:M.y,ee+=P*H.x,te+=P*H.y,I.x=ee+(I.y-te)/H.normalSlope):I.x=(K?M.xo:M.x)+P},slope:0,touch:function(I){I.xTouched=!0},touched:function(I){return I.xTouched},untouch:function(I){I.xTouched=!1}},no={x:0,y:1,axis:"y",distance:function(I,M,P,H){return(P?I.yo:I.y)-(H?M.yo:M.y)},interpolate:function(I,M,P,H){var K,ee,te,ge,Se,Ce,Re;if(!H||H===this)return K=I.yo-M.yo,ee=I.yo-P.yo,Se=M.y-M.yo,Ce=P.y-P.yo,(Re=(te=Math.abs(K))+(ge=Math.abs(ee)))===0?void(I.y=I.yo+(Se+Ce)/2):void(I.y=I.yo+(Se*ge+Ce*te)/Re);K=H.distance(I,M,!0,!0),ee=H.distance(I,P,!0,!0),Se=H.distance(M,M,!1,!0),Ce=H.distance(P,P,!1,!0),(Re=(te=Math.abs(K))+(ge=Math.abs(ee)))===0?no.setRelative(I,I,(Se+Ce)/2,H,!0):no.setRelative(I,I,(Se*ge+Ce*te)/Re,H,!0)},normalSlope:0,setRelative:function(I,M,P,H,K){var ee,te;H&&H!==this?(ee=K?M.xo:M.x,te=K?M.yo:M.y,ee+=P*H.x,te+=P*H.y,I.y=te+H.normalSlope*(I.x-ee)):I.y=(K?M.yo:M.y)+P},slope:Number.POSITIVE_INFINITY,touch:function(I){I.yTouched=!0},touched:function(I){return I.yTouched},untouch:function(I){I.yTouched=!1}};function Fa(I,M){this.x=I,this.y=M,this.axis=void 0,this.slope=M/I,this.normalSlope=-I/M,Object.freeze(this)}function Go(I,M){var P=Math.sqrt(I*I+M*M);return M/=P,(I/=P)==1&&M===0?xo:I===0&&M===1?no:new Fa(I,M)}function Gs(I,M,P,H){this.x=this.xo=Math.round(64*I)/64,this.y=this.yo=Math.round(64*M)/64,this.lastPointOfContour=P,this.onCurve=H,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(xo),Object.freeze(no),Fa.prototype.distance=function(I,M,P,H){return this.x*xo.distance(I,M,P,H)+this.y*no.distance(I,M,P,H)},Fa.prototype.interpolate=function(I,M,P,H){var K=H.distance(I,M,!0,!0),ee=H.distance(I,P,!0,!0),te=(M=H.distance(M,M,!1,!0),P=H.distance(P,P,!1,!0),(K=Math.abs(K))+(ee=Math.abs(ee)));te===0?this.setRelative(I,I,(M+P)/2,H,!0):this.setRelative(I,I,(M*ee+P*K)/te,H,!0)},Fa.prototype.setRelative=function(I,M,P,H,K){var ee=K?M.xo:M.x,te=(K=K?M.yo:M.y,M=ee+P*(H=H||this).x,ee=K+P*H.y,K=H.normalSlope,P=this.slope,H=I.x,I.y);I.x=(P*H-K*M+ee-te)/(P-K),I.y=P*(I.x-H)+te},Fa.prototype.touch=function(I){I.xTouched=!0,I.yTouched=!0},Gs.prototype.nextTouched=function(I){for(var M=this.nextPointOnContour;!I.touched(M)&&M!==this;)M=M.nextPointOnContour;return M},Gs.prototype.prevTouched=function(I){for(var M=this.prevPointOnContour;!I.touched(M)&&M!==this;)M=M.prevPointOnContour;return M};var gi=Object.freeze(new Gs(0,0)),Vy={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function la(I,M){switch(this.env=I,this.stack=[],this.prog=M,I){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xo,this.round=fl}}function _u(I){for(var M=I.tZone=new Array(I.gZone.length),P=0;P<M.length;P++)M[P]=new Gs(0,0)}function Cu(I,M){var P,H=I.prog,K=I.ip,ee=1;do if((P=H[++K])===88)ee++;else if(P===89)ee--;else if(P===64)K+=H[K+1]+1;else if(P===65)K+=2*H[K+1]+1;else if(176<=P&&P<=183)K+=P-176+1;else if(184<=P&&P<=191)K+=2*(P-184+1);else if(M&&ee===1&&P===27)break;while(0<ee);I.ip=K}function Bf(I,M){l.DEBUG&&console.log(M.step,"SVTCA["+I.axis+"]"),M.fv=M.pv=M.dpv=I}function Uf(I,M){l.DEBUG&&console.log(M.step,"SPVTCA["+I.axis+"]"),M.pv=M.dpv=I}function zf(I,M){l.DEBUG&&console.log(M.step,"SFVTCA["+I.axis+"]"),M.fv=I}function Vf(I,M){var P,H=(K=M.stack).pop(),K=K.pop(),ee=M.z2[H],te=M.z1[K];l.DEBUG&&console.log("SPVTL["+I+"]",H,K),H=I?(P=ee.y-te.y,te.x-ee.x):(P=te.x-ee.x,te.y-ee.y),M.pv=M.dpv=Go(P,H)}function Gf(I,M){var P,H=(K=M.stack).pop(),K=K.pop(),ee=M.z2[H],te=M.z1[K];l.DEBUG&&console.log("SFVTL["+I+"]",H,K),H=I?(P=ee.y-te.y,te.x-ee.x):(P=te.x-ee.x,te.y-ee.y),M.fv=Go(P,H)}function ku(I){l.DEBUG&&console.log(I.step,"POP[]"),I.stack.pop()}function Wf(I,M){var P=M.stack.pop(),H=M.z0[P],K=M.fv,ee=M.pv,te=(l.DEBUG&&console.log(M.step,"MDAP["+I+"]",P),ee.distance(H,gi));I&&(te=M.round(te)),K.setRelative(H,gi,te,ee),K.touch(H),M.rp0=M.rp1=P}function Hf(I,M){var P,H,K,ee=M.z2,te=ee.length-2;l.DEBUG&&console.log(M.step,"IUP["+I.axis+"]");for(var ge=0;ge<te;ge++)P=ee[ge],I.touched(P)||(H=P.prevTouched(I))!==P&&(H===(K=P.nextTouched(I))&&I.setRelative(P,P,I.distance(H,H,!1,!0),I,!0),I.interpolate(P,H,K,I))}function qf(I,M){for(var P=M.stack,H=I?M.rp1:M.rp2,K=(I?M.z0:M.z1)[H],ee=M.fv,te=M.pv,ge=M.loop,Se=M.z2;ge--;){var Ce=P.pop(),Re=Se[Ce],Fe=te.distance(K,K,!1,!0);ee.setRelative(Re,Re,Fe,te),ee.touch(Re),l.DEBUG&&console.log(M.step,(1<M.loop?"loop "+(M.loop-ge)+": ":"")+"SHP["+(I?"rp1":"rp2")+"]",Ce)}M.loop=1}function Xf(I,M){for(var P=M.stack,H=I?M.rp1:M.rp2,K=(I?M.z0:M.z1)[H],ee=M.fv,te=M.pv,ge=(H=P.pop(),M.z2[M.contours[H]]),Se=ge,Ce=(l.DEBUG&&console.log(M.step,"SHC["+I+"]",H),te.distance(K,K,!1,!0));Se!==K&&ee.setRelative(Se,Se,Ce,te),(Se=Se.nextPointOnContour)!==ge;);}function Tu(I,M){var P,H,K=M.stack,ee=I?M.rp1:M.rp2,te=(ee=(I?M.z0:M.z1)[ee],M.fv),ge=M.pv;switch(K=K.pop(),l.DEBUG&&console.log(M.step,"SHZ["+I+"]",K),K){case 0:P=M.tZone;break;case 1:P=M.gZone;break;default:throw new Error("Invalid zone")}for(var Se=ge.distance(ee,ee,!1,!0),Ce=P.length-2,Re=0;Re<Ce;Re++)H=P[Re],te.setRelative(H,H,Se,ge)}function Yf(I,M){var P=(H=M.stack).pop()/64,H=H.pop(),K=M.z1[H],ee=M.z0[M.rp0],te=M.fv,ge=M.pv;te.setRelative(K,ee,P,ge),te.touch(K),l.DEBUG&&console.log(M.step,"MSIRP["+I+"]",P,H),M.rp1=M.rp0,M.rp2=H,I&&(M.rp0=H)}function Kf(I,M){var P=(H=M.stack).pop(),H=H.pop(),K=M.z0[H],ee=M.fv,te=M.pv,ge=M.cvt[P];l.DEBUG&&console.log(M.step,"MIAP["+I+"]",P,"(",ge,")",H),P=te.distance(K,gi),I&&(Math.abs(P-ge)<M.cvCutIn&&(P=ge),P=M.round(P)),ee.setRelative(K,gi,P,te),M.zp0===0&&(K.xo=K.x,K.yo=K.y),ee.touch(K),M.rp0=M.rp1=H}function Zf(I,M){var P=M.stack,H=P.pop(),K=M.z2[H];l.DEBUG&&console.log(M.step,"GC["+I+"]",H),P.push(64*M.dpv.distance(K,gi,I,!1))}function qc(I,M){var P=(H=M.stack).pop(),H=H.pop(),K=M.z1[P],ee=M.z0[H];ee=M.dpv.distance(ee,K,I,I),l.DEBUG&&console.log(M.step,"MD["+I+"]",P,H,"->",ee),M.stack.push(Math.round(64*ee))}function Xc(I,M){var P=M.stack,H=P.pop(),K=M.fv,ee=M.pv,te=M.ppem,ge=M.deltaBase+16*(I-1),Se=M.deltaShift,Ce=M.z0;l.DEBUG&&console.log(M.step,"DELTAP["+I+"]",H,P);for(var Re=0;Re<H;Re++){var Fe=P.pop(),Ue=P.pop();ge+((240&Ue)>>4)===te&&(0<=(Ue=(15&Ue)-8)&&Ue++,l.DEBUG&&console.log(M.step,"DELTAPFIX",Fe,"by",Ue*Se),Fe=Ce[Fe],K.setRelative(Fe,Fe,Ue*Se,ee))}}function Eu(I,M){var P=M.stack,H=P.pop();l.DEBUG&&console.log(M.step,"ROUND[]"),P.push(64*M.round(H/64))}function Yc(I,M){var P=M.stack,H=P.pop(),K=M.ppem,ee=M.deltaBase+16*(I-1),te=M.deltaShift;l.DEBUG&&console.log(M.step,"DELTAC["+I+"]",H,P);for(var ge=0;ge<H;ge++){var Se=P.pop(),Ce=P.pop();ee+((240&Ce)>>4)===K&&(0<=(Ce=(15&Ce)-8)&&Ce++,Ce*=te,l.DEBUG&&console.log(M.step,"DELTACFIX",Se,"by",Ce),M.cvt[Se]+=Ce)}}function Qf(I,M){var P,H=(K=M.stack).pop(),K=K.pop(),ee=M.z2[H],te=M.z1[K];l.DEBUG&&console.log(M.step,"SDPVTL["+I+"]",H,K),H=I?(P=ee.y-te.y,te.x-ee.x):(P=te.x-ee.x,te.y-ee.y),M.dpv=Go(P,H)}function ua(I,M){var P=M.stack,H=M.prog,K=M.ip;l.DEBUG&&console.log(M.step,"PUSHB["+I+"]");for(var ee=0;ee<I;ee++)P.push(H[++K]);M.ip=K}function ca(I,M){var P=M.ip,H=M.prog,K=M.stack;l.DEBUG&&console.log(M.ip,"PUSHW["+I+"]");for(var ee=0;ee<I;ee++){var te=H[++P]<<8|H[++P];32768&te&&(te=-(1+(65535^te))),K.push(te)}M.ip=P}function Pt(I,M,P,H,K,ee){var te,ge,Se=ee.stack,Ce=I&&Se.pop(),Re=(Se=Se.pop(),ee.rp0),Fe=(Re=ee.z0[Re],ee.z1[Se]),Ue=ee.minDis,Ee=ee.fv,vt=ee.dpv,tt=te=vt.distance(Fe,Re,!0,!0),et=0<=tt?1:-1;tt=Math.abs(tt),I&&(ge=ee.cvt[Ce],H&&Math.abs(tt-ge)<ee.cvCutIn&&(tt=ge)),P&&tt<Ue&&(tt=Ue),H&&(tt=ee.round(tt)),Ee.setRelative(Fe,Re,et*tt,vt),Ee.touch(Fe),l.DEBUG&&console.log(ee.step,(I?"MIRP[":"MDRP[")+(M?"M":"m")+(P?">":"_")+(H?"R":"_")+(K===0?"Gr":K===1?"Bl":K===2?"Wh":"")+"]",I?Ce+"("+ee.cvt[Ce]+","+ge+")":"",Se,"(d =",te,"->",et*tt,")"),ee.rp1=ee.rp0,ee.rp2=Se,M&&(ee.rp0=Se)}Hc.prototype.exec=function(I,M){if(typeof M!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var P=this.font,H=this._prepState;if(!H||H.ppem!==M){var K=this._fpgmState;if(!K){la.prototype=Vy,(K=this._fpgmState=new la("fpgm",P.tables.fpgm)).funcs=[],K.font=P,l.DEBUG&&(console.log("---EXEC FPGM---"),K.step=-1);try{da(K)}catch(Ce){return console.log("Hinting error in FPGM:"+Ce),void(this._errorState=3)}}la.prototype=K,(H=this._prepState=new la("prep",P.tables.prep)).ppem=M;var ee=P.tables.cvt;if(ee)for(var te=H.cvt=new Array(ee.length),ge=M/P.unitsPerEm,Se=0;Se<ee.length;Se++)te[Se]=ee[Se]*ge;else H.cvt=[];l.DEBUG&&(console.log("---EXEC PREP---"),H.step=-1);try{da(H)}catch(Ce){this._errorState<2&&console.log("Hinting error in PREP:"+Ce),this._errorState=2}}if(!(1<this._errorState))try{return Gy(I,H)}catch(Ce){this._errorState<1&&(console.log("Hinting error:"+Ce),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Gy=function(I,M){var P=M.ppem/M.font.unitsPerEm,H=P,K=I.components;if(la.prototype=M,K){for(var ee=M.font,te=[],ge=[],Se=0;Se<K.length;Se++){var Ce=K[Se],Re=ee.glyphs.get(Ce.glyphIndex),Fe=new la("glyf",Re.instructions);l.DEBUG&&(console.log("---EXEC COMP "+Se+"---"),Fe.step=-1),Jf(Re,Fe,P,H);for(var Ue=Math.round(Ce.dx*P),Ee=Math.round(Ce.dy*H),vt=Fe.gZone,tt=Fe.contours,et=0;et<vt.length;et++){var nt=vt[et];nt.xTouched=nt.yTouched=!1,nt.xo=nt.x=nt.x+Ue,nt.yo=nt.y=nt.y+Ee}var it=te.length;te.push.apply(te,vt);for(var Rt=0;Rt<tt.length;Rt++)ge.push(tt[Rt]+it)}I.instructions&&!Fe.inhibitGridFit&&((Fe=new la("glyf",I.instructions)).gZone=Fe.z0=Fe.z1=Fe.z2=te,Fe.contours=ge,te.push(new Gs(0,0),new Gs(Math.round(I.advanceWidth*P),0)),l.DEBUG&&(console.log("---EXEC COMPOSITE---"),Fe.step=-1),da(Fe),te.length-=2)}else Fe=new la("glyf",I.instructions),l.DEBUG&&(console.log("---EXEC GLYPH---"),Fe.step=-1),Jf(I,Fe,P,H),te=Fe.gZone;return te},Jf=function(I,M,P,H){for(var K,ee,te,ge=I.points||[],Se=ge.length,Ce=M.gZone=M.z0=M.z1=M.z2=[],Re=M.contours=[],Fe=0;Fe<Se;Fe++)K=ge[Fe],Ce[Fe]=new Gs(K.x*P,K.y*H,K.lastPointOfContour,K.onCurve);for(var Ue=0;Ue<Se;Ue++)K=Ce[Ue],ee||(ee=K,Re.push(Ue)),K.lastPointOfContour?((K.nextPointOnContour=ee).prevPointOnContour=K,ee=void 0):(te=Ce[Ue+1],(K.nextPointOnContour=te).prevPointOnContour=K);if(!M.inhibitGridFit){if(l.DEBUG){console.log("PROCESSING GLYPH",M.stack);for(var Ee=0;Ee<Se;Ee++)console.log(Ee,Ce[Ee].x,Ce[Ee].y)}if(Ce.push(new Gs(0,0),new Gs(Math.round(I.advanceWidth*P),0)),da(M),Ce.length-=2,l.DEBUG){console.log("FINISHED GLYPH",M.stack);for(var vt=0;vt<Se;vt++)console.log(vt,Ce[vt].x,Ce[vt].y)}}},da=function(I){var M=I.prog;if(M){var P,H=M.length;for(I.ip=0;I.ip<H;I.ip++){if(l.DEBUG&&I.step++,!(P=pl[M[I.ip]]))throw new Error("unknown instruction: 0x"+Number(M[I.ip]).toString(16));P(I)}}},pl=[Bf.bind(void 0,no),Bf.bind(void 0,xo),Uf.bind(void 0,no),Uf.bind(void 0,xo),zf.bind(void 0,no),zf.bind(void 0,xo),Vf.bind(void 0,0),Vf.bind(void 0,1),Gf.bind(void 0,0),Gf.bind(void 0,1),function(I){var M=(P=I.stack).pop(),P=P.pop();l.DEBUG&&console.log(I.step,"SPVFS[]",M,P),I.pv=I.dpv=Go(P,M)},function(I){var M=(P=I.stack).pop(),P=P.pop();l.DEBUG&&console.log(I.step,"SPVFS[]",M,P),I.fv=Go(P,M)},function(I){var M=I.stack,P=I.pv;l.DEBUG&&console.log(I.step,"GPV[]"),M.push(16384*P.x),M.push(16384*P.y)},function(I){var M=I.stack,P=I.fv;l.DEBUG&&console.log(I.step,"GFV[]"),M.push(16384*P.x),M.push(16384*P.y)},function(I){I.fv=I.pv,l.DEBUG&&console.log(I.step,"SFVTPV[]")},function(I){var M=(ee=I.stack).pop(),P=ee.pop(),H=ee.pop(),K=ee.pop(),ee=ee.pop(),te=I.z0,ge=I.z1,Se=te[M],Ce=(te=te[P],ge[H]),Re=(ge=ge[K],I=I.z2[ee],M=(l.DEBUG&&console.log("ISECT[], ",M,P,H,K,ee),Se.x),P=Se.y,H=te.x,K=te.y,ee=Ce.x,Se=Ce.y,te=ge.x,ge=(M-H)*(Se-(Ce=ge.y))-(P-K)*(ee-te),M*K-P*H),Fe=ee*Ce-Se*te;I.x=(Re*(ee-te)-Fe*(M-H))/ge,I.y=(Re*(Se-Ce)-Fe*(P-K))/ge},function(I){I.rp0=I.stack.pop(),l.DEBUG&&console.log(I.step,"SRP0[]",I.rp0)},function(I){I.rp1=I.stack.pop(),l.DEBUG&&console.log(I.step,"SRP1[]",I.rp1)},function(I){I.rp2=I.stack.pop(),l.DEBUG&&console.log(I.step,"SRP2[]",I.rp2)},function(I){var M=I.stack.pop();switch(l.DEBUG&&console.log(I.step,"SZP0[]",M),I.zp0=M){case 0:I.tZone||_u(I),I.z0=I.tZone;break;case 1:I.z0=I.gZone;break;default:throw new Error("Invalid zone pointer")}},function(I){var M=I.stack.pop();switch(l.DEBUG&&console.log(I.step,"SZP1[]",M),I.zp1=M){case 0:I.tZone||_u(I),I.z1=I.tZone;break;case 1:I.z1=I.gZone;break;default:throw new Error("Invalid zone pointer")}},function(I){var M=I.stack.pop();switch(l.DEBUG&&console.log(I.step,"SZP2[]",M),I.zp2=M){case 0:I.tZone||_u(I),I.z2=I.tZone;break;case 1:I.z2=I.gZone;break;default:throw new Error("Invalid zone pointer")}},function(I){var M=I.stack.pop();switch(l.DEBUG&&console.log(I.step,"SZPS[]",M),I.zp0=I.zp1=I.zp2=M){case 0:I.tZone||_u(I),I.z0=I.z1=I.z2=I.tZone;break;case 1:I.z0=I.z1=I.z2=I.gZone;break;default:throw new Error("Invalid zone pointer")}},function(I){I.loop=I.stack.pop(),l.DEBUG&&console.log(I.step,"SLOOP[]",I.loop)},function(I){l.DEBUG&&console.log(I.step,"RTG[]"),I.round=fl},function(I){l.DEBUG&&console.log(I.step,"RTHG[]"),I.round=ks},function(I){var M=I.stack.pop();l.DEBUG&&console.log(I.step,"SMD[]",M),I.minDis=M/64},function(I){l.DEBUG&&console.log(I.step,"ELSE[]"),Cu(I,!1)},function(I){var M=I.stack.pop();l.DEBUG&&console.log(I.step,"JMPR[]",M),I.ip+=M-1},function(I){var M=I.stack.pop();l.DEBUG&&console.log(I.step,"SCVTCI[]",M),I.cvCutIn=M/64},void 0,void 0,function(I){var M=I.stack;l.DEBUG&&console.log(I.step,"DUP[]"),M.push(M[M.length-1])},ku,function(I){l.DEBUG&&console.log(I.step,"CLEAR[]"),I.stack.length=0},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"SWAP[]"),M.push(P),M.push(H)},function(I){var M=I.stack;l.DEBUG&&console.log(I.step,"DEPTH[]"),M.push(M.length)},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"CINDEX[]",P),M.push(M[M.length-P])},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"MINDEX[]",P),M.push(M.splice(M.length-P,1)[0])},void 0,void 0,void 0,function(I){var M=(H=I.stack).pop(),P=H.pop(),H=(l.DEBUG&&console.log(I.step,"LOOPCALL[]",M,P),I.ip),K=I.prog;I.prog=I.funcs[M];for(var ee=0;ee<P;ee++)da(I),l.DEBUG&&console.log(++I.step,ee+1<P?"next loopcall":"done loopcall",ee);I.ip=H,I.prog=K},function(I){var M=I.stack.pop(),P=(l.DEBUG&&console.log(I.step,"CALL[]",M),I.ip),H=I.prog;I.prog=I.funcs[M],da(I),I.ip=P,I.prog=H,l.DEBUG&&console.log(++I.step,"returning from",M)},function(I){if(I.env!=="fpgm")throw new Error("FDEF not allowed here");var M=I.stack,P=I.prog,H=I.ip,K=(M=M.pop(),H);for(l.DEBUG&&console.log(I.step,"FDEF[]",M);P[++H]!==45;);I.ip=H,I.funcs[M]=P.slice(K+1,H)},void 0,Wf.bind(void 0,0),Wf.bind(void 0,1),Hf.bind(void 0,no),Hf.bind(void 0,xo),qf.bind(void 0,0),qf.bind(void 0,1),Xf.bind(void 0,0),Xf.bind(void 0,1),Tu.bind(void 0,0),Tu.bind(void 0,1),function(I){for(var M=I.stack,P=I.loop,H=I.fv,K=M.pop()/64,ee=I.z2;P--;){var te=M.pop(),ge=ee[te];l.DEBUG&&console.log(I.step,(1<I.loop?"loop "+(I.loop-P)+": ":"")+"SHPIX[]",te,K),H.setRelative(ge,ge,K),H.touch(ge)}I.loop=1},function(I){for(var M=I.stack,P=I.rp1,H=I.rp2,K=I.loop,ee=I.z0[P],te=I.z1[H],ge=I.fv,Se=I.dpv,Ce=I.z2;K--;){var Re=M.pop(),Fe=Ce[Re];l.DEBUG&&console.log(I.step,(1<I.loop?"loop "+(I.loop-K)+": ":"")+"IP[]",Re,P,"<->",H),ge.interpolate(Fe,ee,te,Se),ge.touch(Fe)}I.loop=1},Yf.bind(void 0,0),Yf.bind(void 0,1),function(I){for(var M=I.stack,P=I.rp0,H=I.z0[P],K=I.loop,ee=I.fv,te=I.pv,ge=I.z1;K--;){var Se=M.pop(),Ce=ge[Se];l.DEBUG&&console.log(I.step,(1<I.loop?"loop "+(I.loop-K)+": ":"")+"ALIGNRP[]",Se),ee.setRelative(Ce,H,0,te),ee.touch(Ce)}I.loop=1},function(I){l.DEBUG&&console.log(I.step,"RTDG[]"),I.round=Pf},Kf.bind(void 0,0),Kf.bind(void 0,1),function(I){var M=I.prog,P=I.ip,H=I.stack,K=M[++P];l.DEBUG&&console.log(I.step,"NPUSHB[]",K);for(var ee=0;ee<K;ee++)H.push(M[++P]);I.ip=P},function(I){var M=I.ip,P=I.prog,H=I.stack,K=P[++M];l.DEBUG&&console.log(I.step,"NPUSHW[]",K);for(var ee=0;ee<K;ee++){var te=P[++M]<<8|P[++M];32768&te&&(te=-(1+(65535^te))),H.push(te)}I.ip=M},function(I){var M=I.stack,P=(P=I.store)||(I.store=[]),H=M.pop();M=M.pop(),l.DEBUG&&console.log(I.step,"WS",H,M),P[M]=H},function(I){var M=I.stack,P=I.store,H=M.pop();l.DEBUG&&console.log(I.step,"RS",H),I=P&&P[H]||0,M.push(I)},function(I){var M=(P=I.stack).pop(),P=P.pop();l.DEBUG&&console.log(I.step,"WCVTP",M,P),I.cvt[P]=M/64},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"RCVT",P),M.push(64*I.cvt[P])},Zf.bind(void 0,0),Zf.bind(void 0,1),void 0,qc.bind(void 0,0),qc.bind(void 0,1),function(I){l.DEBUG&&console.log(I.step,"MPPEM[]"),I.stack.push(I.ppem)},void 0,function(I){l.DEBUG&&console.log(I.step,"FLIPON[]"),I.autoFlip=!0},void 0,void 0,function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"LT[]",P,H),M.push(H<P?1:0)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"LTEQ[]",P,H),M.push(H<=P?1:0)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"GT[]",P,H),M.push(P<H?1:0)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"GTEQ[]",P,H),M.push(P<=H?1:0)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"EQ[]",P,H),M.push(P===H?1:0)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"NEQ[]",P,H),M.push(P!==H?1:0)},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"ODD[]",P),M.push(Math.trunc(P)%2?1:0)},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"EVEN[]",P),M.push(Math.trunc(P)%2?0:1)},function(I){var M=I.stack.pop();l.DEBUG&&console.log(I.step,"IF[]",M),M||(Cu(I,!0),l.DEBUG&&console.log(I.step,"EIF[]"))},function(I){l.DEBUG&&console.log(I.step,"EIF[]")},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"AND[]",P,H),M.push(P&&H?1:0)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"OR[]",P,H),M.push(P||H?1:0)},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"NOT[]",P),M.push(P?0:1)},Xc.bind(void 0,1),function(I){var M=I.stack.pop();l.DEBUG&&console.log(I.step,"SDB[]",M),I.deltaBase=M},function(I){var M=I.stack.pop();l.DEBUG&&console.log(I.step,"SDS[]",M),I.deltaShift=Math.pow(.5,M)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"ADD[]",P,H),M.push(H+P)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"SUB[]",P,H),M.push(H-P)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"DIV[]",P,H),M.push(64*H/P)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"MUL[]",P,H),M.push(H*P/64)},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"ABS[]",P),M.push(Math.abs(P))},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"NEG[]",P),M.push(-P)},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"FLOOR[]",P),M.push(64*Math.floor(P/64))},function(I){var M=I.stack,P=M.pop();l.DEBUG&&console.log(I.step,"CEILING[]",P),M.push(64*Math.ceil(P/64))},Eu.bind(void 0,0),Eu.bind(void 0,1),Eu.bind(void 0,2),Eu.bind(void 0,3),void 0,void 0,void 0,void 0,function(I){var M=(P=I.stack).pop(),P=P.pop();l.DEBUG&&console.log(I.step,"WCVTF[]",M,P),I.cvt[P]=M*I.ppem/I.font.unitsPerEm},Xc.bind(void 0,2),Xc.bind(void 0,3),Yc.bind(void 0,1),Yc.bind(void 0,2),Yc.bind(void 0,3),function(I){var M,P=I.stack.pop();switch(l.DEBUG&&console.log(I.step,"SROUND[]",P),I.round=mi,192&P){case 0:M=.5;break;case 64:M=1;break;case 128:M=2;break;default:throw new Error("invalid SROUND value")}switch(I.srPeriod=M,48&P){case 0:I.srPhase=0;break;case 16:I.srPhase=.25*M;break;case 32:I.srPhase=.5*M;break;case 48:I.srPhase=.75*M;break;default:throw new Error("invalid SROUND value")}I.srThreshold=(P&=15)==0?0:(P/8-.5)*M},function(I){var M,P=I.stack.pop();switch(l.DEBUG&&console.log(I.step,"S45ROUND[]",P),I.round=mi,192&P){case 0:M=Math.sqrt(2)/2;break;case 64:M=Math.sqrt(2);break;case 128:M=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(I.srPeriod=M,48&P){case 0:I.srPhase=0;break;case 16:I.srPhase=.25*M;break;case 32:I.srPhase=.5*M;break;case 48:I.srPhase=.75*M;break;default:throw new Error("invalid S45ROUND value")}I.srThreshold=(P&=15)==0?0:(P/8-.5)*M},void 0,void 0,function(I){l.DEBUG&&console.log(I.step,"ROFF[]"),I.round=wu},void 0,function(I){l.DEBUG&&console.log(I.step,"RUTG[]"),I.round=La},function(I){l.DEBUG&&console.log(I.step,"RDTG[]"),I.round=Su},ku,ku,void 0,void 0,void 0,void 0,void 0,function(I){var M=I.stack.pop();l.DEBUG&&console.log(I.step,"SCANCTRL[]",M)},Qf.bind(void 0,0),Qf.bind(void 0,1),function(I){var M=I.stack,P=M.pop(),H=0;l.DEBUG&&console.log(I.step,"GETINFO[]",P),1&P&&(H=35),32&P&&(H|=4096),M.push(H)},void 0,function(I){var M=I.stack,P=M.pop(),H=M.pop(),K=M.pop();l.DEBUG&&console.log(I.step,"ROLL[]"),M.push(H),M.push(P),M.push(K)},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"MAX[]",P,H),M.push(Math.max(H,P))},function(I){var M=I.stack,P=M.pop(),H=M.pop();l.DEBUG&&console.log(I.step,"MIN[]",P,H),M.push(Math.min(H,P))},function(I){var M=I.stack.pop();l.DEBUG&&console.log(I.step,"SCANTYPE[]",M)},function(I){var M=I.stack.pop(),P=I.stack.pop();switch(l.DEBUG&&console.log(I.step,"INSTCTRL[]",M,P),M){case 1:return void(I.inhibitGridFit=!!P);case 2:return void(I.ignoreCvt=!!P);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ua.bind(void 0,1),ua.bind(void 0,2),ua.bind(void 0,3),ua.bind(void 0,4),ua.bind(void 0,5),ua.bind(void 0,6),ua.bind(void 0,7),ua.bind(void 0,8),ca.bind(void 0,1),ca.bind(void 0,2),ca.bind(void 0,3),ca.bind(void 0,4),ca.bind(void 0,5),ca.bind(void 0,6),ca.bind(void 0,7),ca.bind(void 0,8),Pt.bind(void 0,0,0,0,0,0),Pt.bind(void 0,0,0,0,0,1),Pt.bind(void 0,0,0,0,0,2),Pt.bind(void 0,0,0,0,0,3),Pt.bind(void 0,0,0,0,1,0),Pt.bind(void 0,0,0,0,1,1),Pt.bind(void 0,0,0,0,1,2),Pt.bind(void 0,0,0,0,1,3),Pt.bind(void 0,0,0,1,0,0),Pt.bind(void 0,0,0,1,0,1),Pt.bind(void 0,0,0,1,0,2),Pt.bind(void 0,0,0,1,0,3),Pt.bind(void 0,0,0,1,1,0),Pt.bind(void 0,0,0,1,1,1),Pt.bind(void 0,0,0,1,1,2),Pt.bind(void 0,0,0,1,1,3),Pt.bind(void 0,0,1,0,0,0),Pt.bind(void 0,0,1,0,0,1),Pt.bind(void 0,0,1,0,0,2),Pt.bind(void 0,0,1,0,0,3),Pt.bind(void 0,0,1,0,1,0),Pt.bind(void 0,0,1,0,1,1),Pt.bind(void 0,0,1,0,1,2),Pt.bind(void 0,0,1,0,1,3),Pt.bind(void 0,0,1,1,0,0),Pt.bind(void 0,0,1,1,0,1),Pt.bind(void 0,0,1,1,0,2),Pt.bind(void 0,0,1,1,0,3),Pt.bind(void 0,0,1,1,1,0),Pt.bind(void 0,0,1,1,1,1),Pt.bind(void 0,0,1,1,1,2),Pt.bind(void 0,0,1,1,1,3),Pt.bind(void 0,1,0,0,0,0),Pt.bind(void 0,1,0,0,0,1),Pt.bind(void 0,1,0,0,0,2),Pt.bind(void 0,1,0,0,0,3),Pt.bind(void 0,1,0,0,1,0),Pt.bind(void 0,1,0,0,1,1),Pt.bind(void 0,1,0,0,1,2),Pt.bind(void 0,1,0,0,1,3),Pt.bind(void 0,1,0,1,0,0),Pt.bind(void 0,1,0,1,0,1),Pt.bind(void 0,1,0,1,0,2),Pt.bind(void 0,1,0,1,0,3),Pt.bind(void 0,1,0,1,1,0),Pt.bind(void 0,1,0,1,1,1),Pt.bind(void 0,1,0,1,1,2),Pt.bind(void 0,1,0,1,1,3),Pt.bind(void 0,1,1,0,0,0),Pt.bind(void 0,1,1,0,0,1),Pt.bind(void 0,1,1,0,0,2),Pt.bind(void 0,1,1,0,0,3),Pt.bind(void 0,1,1,0,1,0),Pt.bind(void 0,1,1,0,1,1),Pt.bind(void 0,1,1,0,1,2),Pt.bind(void 0,1,1,0,1,3),Pt.bind(void 0,1,1,1,0,0),Pt.bind(void 0,1,1,1,0,1),Pt.bind(void 0,1,1,1,0,2),Pt.bind(void 0,1,1,1,0,3),Pt.bind(void 0,1,1,1,1,0),Pt.bind(void 0,1,1,1,1,1),Pt.bind(void 0,1,1,1,1,2),Pt.bind(void 0,1,1,1,1,3)],Wy=Array.from||function(I){return I.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Pn(I){(I=I||{}).empty||(bo(I.familyName,"When creating a new Font object, familyName is required."),bo(I.styleName,"When creating a new Font object, styleName is required."),bo(I.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),bo(I.ascender,"When creating a new Font object, ascender is required."),bo(I.descender,"When creating a new Font object, descender is required."),bo(I.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:I.familyName||" "},fontSubfamily:{en:I.styleName||" "},fullName:{en:I.fullName||I.familyName+" "+I.styleName},postScriptName:{en:I.postScriptName||(I.familyName+I.styleName).replace(/\s/g,"")},designer:{en:I.designer||" "},designerURL:{en:I.designerURL||" "},manufacturer:{en:I.manufacturer||" "},manufacturerURL:{en:I.manufacturerURL||" "},license:{en:I.license||" "},licenseURL:{en:I.licenseURL||" "},version:{en:I.version||"Version 0.1"},description:{en:I.description||" "},copyright:{en:I.copyright||" "},trademark:{en:I.trademark||" "}},this.unitsPerEm=I.unitsPerEm||1e3,this.ascender=I.ascender,this.descender=I.descender,this.createdTimestamp=I.createdTimestamp,this.tables={os2:{usWeightClass:I.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:I.widthClass||this.usWidthClasses.MEDIUM,fsSelection:I.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new wt.GlyphSet(this,I.glyphs||[]),this.encoding=new le(this),this.position=new zo(this),this.substitution=new to(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Hc(this):void 0)}})}Pn.prototype.hasChar=function(I){return this.encoding.charToGlyphIndex(I)!==null},Pn.prototype.charToGlyphIndex=function(I){return this.encoding.charToGlyphIndex(I)},Pn.prototype.charToGlyph=function(I){return I=this.charToGlyphIndex(I),this.glyphs.get(I)||this.glyphs.get(0)},Pn.prototype.stringToGlyphs=function(I,M){M=M||this.defaultRenderOptions;for(var P=Wy(I),H=[],K=0;K<P.length;K+=1){var ee=P[K];H.push(this.charToGlyphIndex(ee))}var te=H.length;if(M.features){I=M.script||this.substitution.getDefaultScriptName();var ge=[];M.features.liga&&(ge=ge.concat(this.substitution.getFeature("liga",I,M.language))),M.features.rlig&&(ge=ge.concat(this.substitution.getFeature("rlig",I,M.language)));for(var Se=0;Se<te;Se+=1)for(var Ce=0;Ce<ge.length;Ce++){for(var Re=ge[Ce],Fe=Re.sub,Ue=Fe.length,Ee=0;Ee<Ue&&Fe[Ee]===H[Se+Ee];)Ee++;Ee===Ue&&(H.splice(Se,Ue,Re.by),te=te-Ue+1)}}for(var vt=new Array(te),tt=this.glyphs.get(0),et=0;et<te;et+=1)vt[et]=this.glyphs.get(H[et])||tt;return vt},Pn.prototype.nameToGlyphIndex=function(I){return this.glyphNames.nameToGlyphIndex(I)},Pn.prototype.nameToGlyph=function(I){return I=this.nameToGlyphIndex(I),this.glyphs.get(I)||this.glyphs.get(0)},Pn.prototype.glyphIndexToName=function(I){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(I):""},Pn.prototype.getKerningValue=function(I,M){I=I.index||I,M=M.index||M;var P=this.position.defaultKerningTables;return P?this.position.getKerningValue(P,I,M):this.kerningPairs[I+","+M]||0},Pn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Pn.prototype.forEachGlyph=function(I,M,P,H,K,ee){M=M!==void 0?M:0,P=P!==void 0?P:0,K=K||this.defaultRenderOptions;var te,ge=1/this.unitsPerEm*(H=H!==void 0?H:72),Se=this.stringToGlyphs(I,K);K.kerning&&(I=K.script||this.position.getDefaultScriptName(),te=this.position.getKerningTables(I,K.language));for(var Ce=0;Ce<Se.length;Ce+=1){var Re=Se[Ce];ee.call(this,Re,M,P,H,K),Re.advanceWidth&&(M+=Re.advanceWidth*ge),K.kerning&&Ce<Se.length-1&&(M+=(te?this.position.getKerningValue(te,Re.index,Se[Ce+1].index):this.getKerningValue(Re,Se[Ce+1]))*ge),K.letterSpacing?M+=K.letterSpacing*H:K.tracking&&(M+=K.tracking/1e3*H)}return M},Pn.prototype.getPath=function(I,M,P,H,K){var ee=new V;return this.forEachGlyph(I,M,P,H,K,function(te,ge,Se,Ce){te=te.getPath(ge,Se,Ce,K,this),ee.extend(te)}),ee},Pn.prototype.getPaths=function(I,M,P,H,K){var ee=[];return this.forEachGlyph(I,M,P,H,K,function(te,ge,Se,Ce){te=te.getPath(ge,Se,Ce,K,this),ee.push(te)}),ee},Pn.prototype.getAdvanceWidth=function(I,M,P){return this.forEachGlyph(I,0,0,M,P,function(){})},Pn.prototype.draw=function(I,M,P,H,K,ee){this.getPath(M,P,H,K,ee).draw(I)},Pn.prototype.drawPoints=function(I,M,P,H,K,ee){this.forEachGlyph(M,P,H,K,ee,function(te,ge,Se,Ce){te.drawPoints(I,ge,Se,Ce)})},Pn.prototype.drawMetrics=function(I,M,P,H,K,ee){this.forEachGlyph(M,P,H,K,ee,function(te,ge,Se,Ce){te.drawMetrics(I,ge,Se,Ce)})},Pn.prototype.getEnglishName=function(I){if(I=this.names[I])return I.en},Pn.prototype.validate=function(){var I=this;function M(P){(P=I.getEnglishName(P))&&P.trim().length}M("fontFamily"),M("weightName"),M("manufacturer"),M("copyright"),M("version"),this.unitsPerEm},Pn.prototype.toTables=function(){return zy(this)},Pn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Pn.prototype.toArrayBuffer=function(){for(var I=this.toTables().encode(),M=new ArrayBuffer(I.length),P=new Uint8Array(M),H=0;H<I.length;H++)P[H]=I[H];return M},Pn.prototype.download=function(I){var M=this.getEnglishName("fontFamily"),P=this.getEnglishName("fontSubfamily"),H=(I=I||M.replace(/\s/g,"")+"-"+P+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,H.byteLength,function(K){K.root.getFile(I,{create:!0},function(ee){ee.createWriter(function(te){var ge=new DataView(H);ge=new Blob([ge],{type:"font/opentype"}),te.write(ge),te.addEventListener("writeend",function(){location.href=ee.toURL()},!1)})})},function(K){throw new Error(K.name+": "+K.message)})):(M=r("fs"),P=function(K){for(var ee=new u(K.byteLength),te=new Uint8Array(K),ge=0;ge<ee.length;++ge)ee[ge]=te[ge];return ee}(H),M.writeFileSync(I,P))},Pn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Pn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Pn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var ep=function(I,M,P){for(var H,K,ee,te,ge=new Ve.Parser(I,M),Se=ge.parseULong(),Ce=(J.argument(Se===65536,"Unsupported fvar table version."),ge.parseOffset16()),Re=(ge.skip("uShort",1),ge.parseUShort()),Fe=ge.parseUShort(),Ue=ge.parseUShort(),Ee=ge.parseUShort(),vt=[],tt=0;tt<Re;tt++)vt.push((H=I,K=M+Ce+tt*Fe,ee=P,te={},H=new Ve.Parser(H,K),te.tag=H.parseTag(),te.minValue=H.parseFixed(),te.defaultValue=H.parseFixed(),te.maxValue=H.parseFixed(),H.skip("uShort",1),te.name=ee[H.parseUShort()]||{},te));for(var et=[],nt=M+Ce+Re*Fe,it=0;it<Ue;it++)et.push(function(Rt,jt,Nt,ln){var yn={},_n=new Ve.Parser(Rt,jt);yn.name=ln[_n.parseUShort()]||{},_n.skip("uShort",1),yn.coordinates={};for(var Xn=0;Xn<Nt.length;++Xn)yn.coordinates[Nt[Xn].tag]=_n.parseFixed();return yn}(I,nt+it*Ee,vt,P));return{axes:vt,instances:et}},Ws=new Array(10);Ws[1]=function(){var I=this.offset+this.relativeOffset,M=this.parseUShort();return M===1?{posFormat:1,coverage:this.parsePointer(xe.coverage),value:this.parseValueRecord()}:M===2?{posFormat:2,coverage:this.parsePointer(xe.coverage),values:this.parseValueRecordList()}:void J.assert(!1,"0x"+I.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Ws[2]=function(){var I,M,P,H,K=this.offset+this.relativeOffset,ee=this.parseUShort(),te=(K=(J.assert(ee===1||ee===2,"0x"+K.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(xe.coverage)),this.parseUShort()),ge=this.parseUShort();return ee===1?{posFormat:ee,coverage:K,valueFormat1:te,valueFormat2:ge,pairSets:this.parseList(xe.pointer(xe.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(te),value2:this.parseValueRecord(ge)}})))}:ee===2?(I=this.parsePointer(xe.classDef),M=this.parsePointer(xe.classDef),P=this.parseUShort(),H=this.parseUShort(),{posFormat:ee,coverage:K,valueFormat1:te,valueFormat2:ge,classDef1:I,classDef2:M,class1Count:P,class2Count:H,classRecords:this.parseList(P,xe.list(H,function(){return{value1:this.parseValueRecord(te),value2:this.parseValueRecord(ge)}}))}):void 0},Ws[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Ws[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Ws[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Ws[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Ws[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Ws[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Ws[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);var tp=function(I,M){return M=(I=new xe(I,M=M||0)).parseVersion(1),J.argument(M===1||M===1.1,"Unsupported GPOS table version "+M),M===1?{version:M,scripts:I.parseScriptList(),features:I.parseFeatureList(),lookups:I.parseLookupList(Ws)}:{version:M,scripts:I.parseScriptList(),features:I.parseFeatureList(),lookups:I.parseLookupList(Ws),variations:I.parseFeatureVariationsList()}},np=function(I,M){if((M=(I=new Ve.Parser(I,M)).parseUShort())===0){var P=I,H={},K=(P.skip("uShort"),P.parseUShort()),ee=(J.argument(K===0,"Unsupported kern sub-table version."),P.skip("uShort",2),P.parseUShort());P.skip("uShort",3);for(var te=0;te<ee;te+=1){var ge=P.parseUShort(),Se=P.parseUShort(),Ce=P.parseShort();H[ge+","+Se]=Ce}return H}if(M!==1)throw new Error("Unsupported kern table version ("+M+").");var Re=I,Fe={};if(Re.skip("uShort"),1<Re.parseULong()&&console.warn("Only the first kern subtable is supported."),Re.skip("uLong"),K=255&Re.parseUShort(),Re.skip("uShort"),K==0){var Ue=Re.parseUShort();Re.skip("uShort",3);for(var Ee=0;Ee<Ue;Ee+=1){var vt=Re.parseUShort(),tt=Re.parseUShort(),et=Re.parseShort();Fe[vt+","+tt]=et}}return Fe},yi=function(I,M,P,H){for(var K=new Ve.Parser(I,M),ee=H?K.parseUShort:K.parseULong,te=[],ge=0;ge<P+1;ge+=1){var Se=ee.call(K);H&&(Se*=2),te.push(Se)}return te};function Hy(I,M){r("fs").readFile(I,function(P,H){if(P)return M(P.message);M(null,Vc(H))})}function qy(I,M){var P=new XMLHttpRequest;P.open("get",I,!0),P.responseType="arraybuffer",P.onload=function(){return P.response?M(null,P.response):M("Font could not be loaded: "+P.statusText)},P.onerror=function(){M("Font could not be loaded")},P.send()}function rp(I,M){for(var P=[],H=12,K=0;K<M;K+=1){var ee=Ve.getTag(I,H),te=Ve.getULong(I,H+4),ge=Ve.getULong(I,H+8),Se=Ve.getULong(I,H+12);P.push({tag:ee,checksum:te,offset:ge,length:Se,compression:!1}),H+=16}return P}function wr(I,M){if(M.compression!=="WOFF")return{data:I,offset:M.offset};I=new Uint8Array(I.buffer,M.offset+2,M.compressedLength-2);var P=new Uint8Array(M.length);if(function(H,K){var ee,te,ge,Se=new m(H,K);do{switch((te=Se).bitcount--||(te.tag=te.source[te.sourceIndex++],te.bitcount=7),ge=1&te.tag,te.tag>>>=1,te=ge,D(Se,2,0)){case 0:ee=function(Nt){for(var ln,yn;8<Nt.bitcount;)Nt.sourceIndex--,Nt.bitcount-=8;if((ln=256*Nt.source[Nt.sourceIndex+1]+Nt.source[Nt.sourceIndex])!==(65535&~(256*Nt.source[Nt.sourceIndex+3]+Nt.source[Nt.sourceIndex+2])))return-3;for(Nt.sourceIndex+=4,yn=ln;yn;--yn)Nt.dest[Nt.destLen++]=Nt.source[Nt.sourceIndex++];return Nt.bitcount=0,0}(Se);break;case 1:ee=$(Se,y,b);break;case 2:Rt=it=nt=jt=Ce=et=void 0;for(var Ce,Re=Se,Fe=Se.ltree,Ue=Se.dtree,Ee=D(Re,5,257),vt=D(Re,5,1),tt=D(Re,4,4),et=0;et<19;++et)j[et]=0;for(et=0;et<tt;++et){var nt=D(Re,3,0);j[k[et]]=nt}for(N(E,j,0,19),Ce=0;Ce<Ee+vt;){var it=z(Re,E);switch(it){case 16:for(var Rt=j[Ce-1],jt=D(Re,2,3);jt;--jt)j[Ce++]=Rt;break;case 17:for(jt=D(Re,3,3);jt;--jt)j[Ce++]=0;break;case 18:for(jt=D(Re,7,11);jt;--jt)j[Ce++]=0;break;default:j[Ce++]=it}}N(Fe,j,0,Ee),N(Ue,j,Ee,vt),ee=$(Se,Se.ltree,Se.dtree);break;default:ee=-3}if(ee!==0)throw new Error("Data error")}while(!te);Se.destLen<Se.dest.length?typeof Se.dest.slice=="function"?Se.dest.slice(0,Se.destLen):Se.dest.subarray(0,Se.destLen):Se.dest}(I,P),P.byteLength!==M.length)throw new Error("Decompression error: "+M.tag+" decompressed length doesn't match recorded length");return{data:new DataView(P.buffer,0),offset:0}}function ju(I){var M,P,H,K,ee,te,ge,Se,Ce,Re,Fe,Ue,Ee,vt,tt=new Pn({empty:!0}),et=new DataView(I,0),nt=[];if((I=Ve.getTag(et,0))==="\0\0\0"||I==="true"||I==="typ1")tt.outlinesFormat="truetype",nt=rp(et,H=Ve.getUShort(et,4));else if(I==="OTTO")tt.outlinesFormat="cff",nt=rp(et,H=Ve.getUShort(et,4));else{if(I!=="wOFF")throw new Error("Unsupported OpenType signature "+I);if((Nt=Ve.getTag(et,4))==="\0\0\0")tt.outlinesFormat="truetype";else{if(Nt!=="OTTO")throw new Error("Unsupported OpenType flavor "+I);tt.outlinesFormat="cff"}nt=function(Gn,dr){for(var Nn=[],tr=44,Sr=0;Sr<dr;Sr+=1){var Zr=Ve.getTag(Gn,tr),Kn=Ve.getULong(Gn,tr+4),Mr=Ve.getULong(Gn,tr+8),ml=Ve.getULong(Gn,tr+12),gl=Mr<ml&&"WOFF";Nn.push({tag:Zr,offset:Kn,compression:gl,compressedLength:Mr,length:ml}),tr+=20}return Nn}(et,H=Ve.getUShort(et,12))}for(var it=0;it<H;it+=1){var Rt=nt[it],jt=void 0;switch(Rt.tag){case"cmap":jt=wr(et,Rt),tt.tables.cmap=dt(jt.data,jt.offset),tt.encoding=new de(tt.tables.cmap);break;case"cvt ":jt=wr(et,Rt),vt=new Ve.Parser(jt.data,jt.offset),tt.tables.cvt=vt.parseShortList(Rt.length/2);break;case"fvar":ee=Rt;break;case"fpgm":jt=wr(et,Rt),vt=new Ve.Parser(jt.data,jt.offset),tt.tables.fpgm=vt.parseByteList(Rt.length);break;case"head":jt=wr(et,Rt),tt.tables.head=ia(jt.data,jt.offset),tt.unitsPerEm=tt.tables.head.unitsPerEm,M=tt.tables.head.indexToLocFormat;break;case"hhea":jt=wr(et,Rt),tt.tables.hhea=xr(jt.data,jt.offset),tt.ascender=tt.tables.hhea.ascender,tt.descender=tt.tables.hhea.descender,tt.numberOfHMetrics=tt.tables.hhea.numberOfHMetrics;break;case"hmtx":Ce=Rt;break;case"ltag":jt=wr(et,Rt),P=mt(jt.data,jt.offset);break;case"maxp":jt=wr(et,Rt),tt.tables.maxp=gn(jt.data,jt.offset),tt.numGlyphs=tt.tables.maxp.numGlyphs;break;case"name":Ue=Rt;break;case"OS/2":jt=wr(et,Rt),tt.tables.os2=gu(jt.data,jt.offset);break;case"post":jt=wr(et,Rt),tt.tables.post=Uy(jt.data,jt.offset),tt.glyphNames=new Ae(tt.tables.post);break;case"prep":jt=wr(et,Rt),vt=new Ve.Parser(jt.data,jt.offset),tt.tables.prep=vt.parseByteList(Rt.length);break;case"glyf":te=Rt;break;case"loca":Fe=Rt;break;case"CFF ":K=Rt;break;case"kern":Re=Rt;break;case"GPOS":ge=Rt;break;case"GSUB":Se=Rt;break;case"meta":Ee=Rt}}if(Nt=wr(et,Ue),tt.tables.name=Vn(Nt.data,Nt.offset,P),tt.names=tt.tables.name,te&&Fe)I=M===0,Nt=wr(et,Fe),Nt=yi(Nt.data,Nt.offset,tt.numGlyphs,I),I=wr(et,te),tt.glyphs=hl.parse(I.data,I.offset,Nt,tt);else{if(!K)throw new Error("Font doesn't contain TrueType or CFF outlines.");I=wr(et,K),Cn(I.data,I.offset,tt)}for(var Nt=wr(et,Ce),ln=(Te(Nt.data,Nt.offset,tt.numberOfHMetrics,tt.numGlyphs,tt.glyphs),tt),yn=ln.tables.cmap.glyphIndexMap,_n=Object.keys(yn),Xn=0;Xn<_n.length;Xn+=1){var Ln,Rn=_n[Xn],en=yn[Rn];(Ln=ln.glyphs.get(en)).addUnicode(parseInt(Rn))}for(var Yn=0;Yn<ln.glyphs.length;Yn+=1)Ln=ln.glyphs.get(Yn),ln.cffEncoding?ln.isCIDFont?Ln.name="gid"+Yn:Ln.name=ln.cffEncoding.charset[Yn]:ln.glyphNames.names&&(Ln.name=ln.glyphNames.glyphIndexToName(Yn));return Re?(I=wr(et,Re),tt.kerningPairs=np(I.data,I.offset)):tt.kerningPairs={},ge&&(Nt=wr(et,ge),tt.tables.gpos=tp(Nt.data,Nt.offset),tt.position.init()),Se&&(I=wr(et,Se),tt.tables.gsub=hi(I.data,I.offset)),ee&&(Nt=wr(et,ee),tt.tables.fvar=ep(Nt.data,Nt.offset,tt.names)),Ee&&(I=wr(et,Ee),tt.tables.meta=$f(I.data,I.offset),tt.metas=tt.tables.meta),tt}l.Font=Pn,l.Glyph=yt,l.Path=V,l.BoundingBox=L,l._parse=Ve,l.parse=ju,l.load=function(I,M){(typeof window>"u"?Hy:qy)(I,function(P,H){if(P)return M(P);var K;try{K=ju(H)}catch(ee){return M(ee,null)}return M(null,K)})},l.loadSync=function(I){return ju(Vc(r("fs").readFileSync(I)))},Object.defineProperty(l,"__esModule",{value:!0})})(typeof f=="object"&&h!==void 0?f:this.opentype={})}).call(this,r("buffer").Buffer)},{buffer:4,fs:2}],248:[function(r,h,f){(function(u){function l(S,m){for(var y=0,b=S.length-1;0<=b;b--){var g=S[b];g==="."?S.splice(b,1):g===".."?(S.splice(b,1),y++):y&&(S.splice(b,1),y--)}if(m)for(;y--;)S.unshift("..");return S}function d(S,m){if(S.filter)return S.filter(m);for(var y=[],b=0;b<S.length;b++)m(S[b],b,S)&&y.push(S[b]);return y}f.resolve=function(){for(var S="",m=!1,y=arguments.length-1;-1<=y&&!m;y--){var b=0<=y?arguments[y]:u.cwd();if(typeof b!="string")throw new TypeError("Arguments to path.resolve must be strings");b&&(S=b+"/"+S,m=b.charAt(0)==="/")}return(m?"/":"")+(S=l(d(S.split("/"),function(g){return!!g}),!m).join("/"))||"."},f.normalize=function(S){var m=f.isAbsolute(S),y=x(S,-1)==="/";return(S=(S=l(d(S.split("/"),function(b){return!!b}),!m).join("/"))||m?S:".")&&y&&(S+="/"),(m?"/":"")+S},f.isAbsolute=function(S){return S.charAt(0)==="/"},f.join=function(){var S=Array.prototype.slice.call(arguments,0);return f.normalize(d(S,function(m,y){if(typeof m!="string")throw new TypeError("Arguments to path.join must be strings");return m}).join("/"))},f.relative=function(S,m){function y(E){for(var j=0;j<E.length&&E[j]==="";j++);for(var A=E.length-1;0<=A&&E[A]==="";A--);return A<j?[]:E.slice(j,A-j+1)}S=f.resolve(S).substr(1),m=f.resolve(m).substr(1);for(var b=y(S.split("/")),g=y(m.split("/")),w=Math.min(b.length,g.length),_=w,C=0;C<w;C++)if(b[C]!==g[C]){_=C;break}var k=[];for(C=_;C<b.length;C++)k.push("..");return(k=k.concat(g.slice(_))).join("/")},f.sep="/",f.delimiter=":",f.dirname=function(S){if(typeof S!="string"&&(S+=""),S.length===0)return".";for(var m=S.charCodeAt(0)===47,y=-1,b=!0,g=S.length-1;1<=g;--g)if(S.charCodeAt(g)===47){if(!b){y=g;break}}else b=!1;return y===-1?m?"/":".":m&&y===1?"/":S.slice(0,y)},f.basename=function(S,m){return S=function(y){typeof y!="string"&&(y+="");for(var b=0,g=-1,w=!0,_=y.length-1;0<=_;--_)if(y.charCodeAt(_)===47){if(!w){b=_+1;break}}else g===-1&&(w=!1,g=_+1);return g===-1?"":y.slice(b,g)}(S),m&&S.substr(-1*m.length)===m?S.substr(0,S.length-m.length):S},f.extname=function(S){typeof S!="string"&&(S+="");for(var m=-1,y=0,b=-1,g=!0,w=0,_=S.length-1;0<=_;--_){var C=S.charCodeAt(_);if(C===47){if(g)continue;y=_+1;break}b===-1&&(g=!1,b=_+1),C===46?m===-1?m=_:w!==1&&(w=1):m!==-1&&(w=-1)}return m===-1||b===-1||w===0||w===1&&m===b-1&&m===y+1?"":S.slice(m,b)};var x="ab".substr(-1)==="b"?function(S,m,y){return S.substr(m,y)}:function(S,m,y){return m<0&&(m=S.length+m),S.substr(m,y)}}).call(this,r("_process"))},{_process:249}],249:[function(r,h,f){var u,l;h=h.exports={};function d(){throw new Error("setTimeout has not been defined")}function x(){throw new Error("clearTimeout has not been defined")}try{u=typeof setTimeout=="function"?setTimeout:d}catch{u=d}try{l=typeof clearTimeout=="function"?clearTimeout:x}catch{l=x}function S(E){if(u===setTimeout)return setTimeout(E,0);if((u===d||!u)&&setTimeout)return(u=setTimeout)(E,0);try{return u(E,0)}catch{try{return u.call(null,E,0)}catch{return u.call(this,E,0)}}}var m,y=[],b=!1,g=-1;function w(){b&&m&&(b=!1,m.length?y=m.concat(y):g=-1,y.length&&_())}function _(){if(!b){for(var E=S(w),j=(b=!0,y.length);j;){for(m=y,y=[];++g<j;)m&&m[g].run();g=-1,j=y.length}m=null,b=!1,function(A){if(l===clearTimeout)return clearTimeout(A);if((l===x||!l)&&clearTimeout)return(l=clearTimeout)(A);try{l(A)}catch{try{return l.call(null,A)}catch{return l.call(this,A)}}}(E)}}function C(E,j){this.fun=E,this.array=j}function k(){}h.nextTick=function(E){var j=new Array(arguments.length-1);if(1<arguments.length)for(var A=1;A<arguments.length;A++)j[A-1]=arguments[A];y.push(new C(E,j)),y.length!==1||b||S(_)},C.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=k,h.addListener=k,h.once=k,h.off=k,h.removeListener=k,h.removeAllListeners=k,h.emit=k,h.prependListener=k,h.prependOnceListener=k,h.listeners=function(E){return[]},h.binding=function(E){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(E){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],250:[function(r,h,f){h=function(u){var l,d=Object.prototype,x=d.hasOwnProperty,S=(N=typeof Symbol=="function"?Symbol:{}).iterator||"@@iterator",m=N.asyncIterator||"@@asyncIterator",y=N.toStringTag||"@@toStringTag";function b(Y,Z,J,ne){var se,ie,X,Q;return Z=Z&&Z.prototype instanceof j?Z:j,Z=Object.create(Z.prototype),ne=new W(ne||[]),Z._invoke=(se=Y,ie=J,X=ne,Q=w,function(re,ce){if(Q===C)throw new Error("Generator is already running");if(Q===k){if(re==="throw")throw ce;return V()}for(X.method=re,X.arg=ce;;){var he=X.delegate;if(he&&(he=function fe(oe,me){var we=oe.iterator[me.method];if(we===l){if(me.delegate=null,me.method==="throw"){if(oe.iterator.return&&(me.method="return",me.arg=l,fe(oe,me),me.method==="throw"))return E;me.method="throw",me.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}return(we=g(we,oe.iterator,me.arg)).type==="throw"?(me.method="throw",me.arg=we.arg,me.delegate=null,E):(we=we.arg)?we.done?(me[oe.resultName]=we.value,me.next=oe.nextLoc,me.method!=="return"&&(me.method="next",me.arg=l),me.delegate=null,E):we:(me.method="throw",me.arg=new TypeError("iterator result is not an object"),me.delegate=null,E)}(he,X))){if(he===E)continue;return he}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(Q===w)throw Q=k,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);if(Q=C,(he=g(se,ie,X)).type==="normal"){if(Q=X.done?k:_,he.arg!==E)return{value:he.arg,done:X.done}}else he.type==="throw"&&(Q=k,X.method="throw",X.arg=he.arg)}}),Z}function g(Y,Z,J){try{return{type:"normal",arg:Y.call(Z,J)}}catch(ne){return{type:"throw",arg:ne}}}u.wrap=b;var w="suspendedStart",_="suspendedYield",C="executing",k="completed",E={};function j(){}function A(){}function O(){}var N,D,z=((D=(D=((N={})[S]=function(){return this},Object.getPrototypeOf))&&D(D(L([]))))&&D!==d&&x.call(D,S)&&(N=D),O.prototype=j.prototype=Object.create(N));function $(Y){["next","throw","return"].forEach(function(Z){Y[Z]=function(J){return this._invoke(Z,J)}})}function B(Y){var Z;this._invoke=function(J,ne){function se(){return new Promise(function(ie,X){(function Q(re,ce,he,fe){var oe;if((re=g(Y[re],Y,ce)).type!=="throw")return(ce=(oe=re.arg).value)&&typeof ce=="object"&&x.call(ce,"__await")?Promise.resolve(ce.__await).then(function(me){Q("next",me,he,fe)},function(me){Q("throw",me,he,fe)}):Promise.resolve(ce).then(function(me){oe.value=me,he(oe)},function(me){return Q("throw",me,he,fe)});fe(re.arg)})(J,ne,ie,X)})}return Z=Z?Z.then(se,se):se()}}function F(Y){var Z={tryLoc:Y[0]};1 in Y&&(Z.catchLoc=Y[1]),2 in Y&&(Z.finallyLoc=Y[2],Z.afterLoc=Y[3]),this.tryEntries.push(Z)}function G(Y){var Z=Y.completion||{};Z.type="normal",delete Z.arg,Y.completion=Z}function W(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(F,this),this.reset(!0)}function L(Y){if(Y){var Z,J=Y[S];if(J)return J.call(Y);if(typeof Y.next=="function")return Y;if(!isNaN(Y.length))return Z=-1,(J=function ne(){for(;++Z<Y.length;)if(x.call(Y,Z))return ne.value=Y[Z],ne.done=!1,ne;return ne.value=l,ne.done=!0,ne}).next=J}return{next:V}}function V(){return{value:l,done:!0}}return(A.prototype=z.constructor=O).constructor=A,O[y]=A.displayName="GeneratorFunction",u.isGeneratorFunction=function(Y){return!!(Y=typeof Y=="function"&&Y.constructor)&&(Y===A||(Y.displayName||Y.name)==="GeneratorFunction")},u.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,O):(Y.__proto__=O,y in Y||(Y[y]="GeneratorFunction")),Y.prototype=Object.create(z),Y},u.awrap=function(Y){return{__await:Y}},$(B.prototype),B.prototype[m]=function(){return this},u.AsyncIterator=B,u.async=function(Y,Z,J,ne){var se=new B(b(Y,Z,J,ne));return u.isGeneratorFunction(Z)?se:se.next().then(function(ie){return ie.done?ie.value:se.next()})},$(z),z[y]="Generator",z[S]=function(){return this},z.toString=function(){return"[object Generator]"},u.keys=function(Y){var Z,J=[];for(Z in Y)J.push(Z);return J.reverse(),function ne(){for(;J.length;){var se=J.pop();if(se in Y)return ne.value=se,ne.done=!1,ne}return ne.done=!0,ne}},u.values=L,W.prototype={constructor:W,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(G),!Y)for(var Z in this)Z.charAt(0)==="t"&&x.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=l)},stop:function(){this.done=!0;var Y=this.tryEntries[0].completion;if(Y.type==="throw")throw Y.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var Z=this;function J(re,ce){return ie.type="throw",ie.arg=Y,Z.next=re,ce&&(Z.method="next",Z.arg=l),!!ce}for(var ne=this.tryEntries.length-1;0<=ne;--ne){var se=this.tryEntries[ne],ie=se.completion;if(se.tryLoc==="root")return J("end");if(se.tryLoc<=this.prev){var X=x.call(se,"catchLoc"),Q=x.call(se,"finallyLoc");if(X&&Q){if(this.prev<se.catchLoc)return J(se.catchLoc,!0);if(this.prev<se.finallyLoc)return J(se.finallyLoc)}else if(X){if(this.prev<se.catchLoc)return J(se.catchLoc,!0)}else{if(!Q)throw new Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return J(se.finallyLoc)}}}},abrupt:function(Y,Z){for(var J=this.tryEntries.length-1;0<=J;--J){var ne=this.tryEntries[J];if(ne.tryLoc<=this.prev&&x.call(ne,"finallyLoc")&&this.prev<ne.finallyLoc){var se=ne;break}}var ie=(se=se&&(Y==="break"||Y==="continue")&&se.tryLoc<=Z&&Z<=se.finallyLoc?null:se)?se.completion:{};return ie.type=Y,ie.arg=Z,se?(this.method="next",this.next=se.finallyLoc,E):this.complete(ie)},complete:function(Y,Z){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&Z&&(this.next=Z),E},finish:function(Y){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var J=this.tryEntries[Z];if(J.finallyLoc===Y)return this.complete(J.completion,J.afterLoc),G(J),E}},catch:function(Y){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var J,ne,se=this.tryEntries[Z];if(se.tryLoc===Y)return(J=se.completion).type==="throw"&&(ne=J.arg,G(se)),ne}throw new Error("illegal catch attempt")},delegateYield:function(Y,Z,J){return this.delegate={iterator:L(Y),resultName:Z,nextLoc:J},this.method==="next"&&(this.arg=l),E}},u}(typeof h=="object"?h.exports:{});try{regeneratorRuntime=h}catch{Function("r","regeneratorRuntime = r")(h)}},{}],251:[function(r,h,f){(function(u){var l,d,x,S,m,y,b,g,w,_;function C(G){if(typeof G!="string"&&(G=String(G)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(G))throw new TypeError("Invalid character in header field name");return G.toLowerCase()}function k(G){return typeof G!="string"?String(G):G}function E(G){var W={next:function(){var L=G.shift();return{done:L===void 0,value:L}}};return d&&(W[Symbol.iterator]=function(){return W}),W}function j(G){this.map={},G instanceof j?G.forEach(function(W,L){this.append(L,W)},this):Array.isArray(G)?G.forEach(function(W){this.append(W[0],W[1])},this):G&&Object.getOwnPropertyNames(G).forEach(function(W){this.append(W,G[W])},this)}function A(G){if(G.bodyUsed)return Promise.reject(new TypeError("Already read"));G.bodyUsed=!0}function O(G){return new Promise(function(W,L){G.onload=function(){W(G.result)},G.onerror=function(){L(G.error)}})}function N(G){var W=new FileReader,L=O(W);return W.readAsArrayBuffer(G),L}function D(G){var W;return G.slice?G.slice(0):((W=new Uint8Array(G.byteLength)).set(new Uint8Array(G)),W.buffer)}function z(){return this.bodyUsed=!1,this._initBody=function(G){if(this._bodyInit=G)if(typeof G=="string")this._bodyText=G;else if(x&&Blob.prototype.isPrototypeOf(G))this._bodyBlob=G;else if(S&&FormData.prototype.isPrototypeOf(G))this._bodyFormData=G;else if(l&&URLSearchParams.prototype.isPrototypeOf(G))this._bodyText=G.toString();else if(m&&x&&b(G))this._bodyArrayBuffer=D(G.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m||!ArrayBuffer.prototype.isPrototypeOf(G)&&!g(G))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=D(G)}else this._bodyText="";this.headers.get("content-type")||(typeof G=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(G)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},x&&(this.blob=function(){var G=A(this);if(G)return G;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?A(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(N)}),this.text=function(){var G,W,L=A(this);if(L)return L;if(this._bodyBlob)return L=this._bodyBlob,W=O(G=new FileReader),G.readAsText(L),W;if(this._bodyArrayBuffer)return Promise.resolve(function(V){for(var Y=new Uint8Array(V),Z=new Array(Y.length),J=0;J<Y.length;J++)Z[J]=String.fromCharCode(Y[J]);return Z.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},S&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}function $(G,W){var L,V=(W=W||{}).body;if(G instanceof $){if(G.bodyUsed)throw new TypeError("Already read");this.url=G.url,this.credentials=G.credentials,W.headers||(this.headers=new j(G.headers)),this.method=G.method,this.mode=G.mode,V||G._bodyInit==null||(V=G._bodyInit,G.bodyUsed=!0)}else this.url=String(G);if(this.credentials=W.credentials||this.credentials||"omit",!W.headers&&this.headers||(this.headers=new j(W.headers)),this.method=(L=(G=W.method||this.method||"GET").toUpperCase(),-1<w.indexOf(L)?L:G),this.mode=W.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&V)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(V)}function B(G){var W=new FormData;return G.trim().split("&").forEach(function(L){var V;L&&(V=(L=L.split("=")).shift().replace(/\+/g," "),L=L.join("=").replace(/\+/g," "),W.append(decodeURIComponent(V),decodeURIComponent(L)))}),W}function F(G,W){W=W||{},this.type="default",this.status=W.status===void 0?200:W.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in W?W.statusText:"OK",this.headers=new j(W.headers),this.url=W.url||"",this._initBody(G)}u.fetch||(l="URLSearchParams"in u,d="Symbol"in u&&"iterator"in Symbol,x="FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),S="FormData"in u,(m="ArrayBuffer"in u)&&(y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(G){return G&&DataView.prototype.isPrototypeOf(G)},g=ArrayBuffer.isView||function(G){return G&&-1<y.indexOf(Object.prototype.toString.call(G))}),j.prototype.append=function(G,W){G=C(G),W=k(W);var L=this.map[G];this.map[G]=L?L+","+W:W},j.prototype.delete=function(G){delete this.map[C(G)]},j.prototype.get=function(G){return G=C(G),this.has(G)?this.map[G]:null},j.prototype.has=function(G){return this.map.hasOwnProperty(C(G))},j.prototype.set=function(G,W){this.map[C(G)]=k(W)},j.prototype.forEach=function(G,W){for(var L in this.map)this.map.hasOwnProperty(L)&&G.call(W,this.map[L],L,this)},j.prototype.keys=function(){var G=[];return this.forEach(function(W,L){G.push(L)}),E(G)},j.prototype.values=function(){var G=[];return this.forEach(function(W){G.push(W)}),E(G)},j.prototype.entries=function(){var G=[];return this.forEach(function(W,L){G.push([L,W])}),E(G)},d&&(j.prototype[Symbol.iterator]=j.prototype.entries),w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],$.prototype.clone=function(){return new $(this,{body:this._bodyInit})},z.call($.prototype),z.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new j(this.headers),url:this.url})},F.error=function(){var G=new F(null,{status:0,statusText:""});return G.type="error",G},_=[301,302,303,307,308],F.redirect=function(G,W){if(_.indexOf(W)===-1)throw new RangeError("Invalid status code");return new F(null,{status:W,headers:{location:G}})},u.Headers=j,u.Request=$,u.Response=F,u.fetch=function(G,W){return new Promise(function(L,V){var Y=new $(G,W),Z=new XMLHttpRequest;Z.onload=function(){var J,ne={status:Z.status,statusText:Z.statusText,headers:(ne=Z.getAllResponseHeaders()||"",J=new j,ne.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(ie){var X=(ie=ie.split(":")).shift().trim();X&&(ie=ie.join(":").trim(),J.append(X,ie))}),J)},se=(ne.url="responseURL"in Z?Z.responseURL:ne.headers.get("X-Request-URL"),"response"in Z?Z.response:Z.responseText);L(new F(se,ne))},Z.onerror=function(){V(new TypeError("Network request failed"))},Z.ontimeout=function(){V(new TypeError("Network request failed"))},Z.open(Y.method,Y.url,!0),Y.credentials==="include"?Z.withCredentials=!0:Y.credentials==="omit"&&(Z.withCredentials=!1),"responseType"in Z&&x&&(Z.responseType="blob"),Y.headers.forEach(function(J,ne){Z.setRequestHeader(ne,J)}),Z.send(Y._bodyInit===void 0?null:Y._bodyInit)})},u.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],252:[function(r,h,f){r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u,l=x(r("../core/main")),d=x(r("../color/color_conversion"));function x(y){return y&&y.__esModule?y:{default:y}}var S=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],m=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];l.default.prototype._rgbColorName=function(y){y=d.default._rgbaToHSBA(y);var b,g,w=[(u=y)[0],y[1],y[2]];w[0]!==0&&(w[0]=Math.round(100*w[0]),(y=w[0].toString().split(""))[g=y.length-1]=parseInt(y[g]),y[g]<2.5?y[g]=0:2.5<=y[g]&&y[g]<7.5&&(y[g]=5),y.length===2?(y[0]=parseInt(y[0]),7.5<=y[g]&&(y[g]=0,y[0]=y[0]+1),w[0]=10*y[0]+y[1]):7.5<=y[g]?w[0]=10:w[0]=y[g]),w[2]=w[2]/255;for(var _=w.length-1;1<=_;_--)w[_]<=.25?w[_]=0:.25<w[_]&&w[_]<.75?w[_]=.5:w[_]=1;if(w[0]===0&&w[1]===0&&w[2]===1){for(var C=2;0<=C;C--)u[C]=Math.round(1e4*u[C])/1e4;for(var k=0;k<S.length;k++){if(S[k].h===u[0]&&S[k].s===u[1]&&S[k].b===u[2]){b=S[k].name;break}b="white"}}else for(var E=0;E<m.length;E++)if(m[E].h===w[0]&&m[E].s===w[1]&&m[E].b===w[2]){b=m[E].name;break}return b},r=l.default,f.default=r},{"../color/color_conversion":258,"../core/main":273,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196}],253:[function(r,h,f){r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.replace"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r},l="_Description",d="_fallbackDesc",x="_fallbackTable",S="_Label",m="_labelDesc",y="_labelTable";function b(g){if(g==="label"||g==="fallback")throw new Error("description should not be LABEL or FALLBACK");return g.endsWith(".")||g.endsWith(";")||g.endsWith(",")||g.endsWith("?")||g.endsWith("!")||(g+="."),g}u.default.prototype.describe=function(g,w){var _;u.default._validateParameters("describe",arguments),typeof g=="string"&&(_=this.canvas.id,g=b(g),this.dummyDOM||(this.dummyDOM=document.getElementById(_).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==g&&(this.descriptions.fallback.innerHTML=g):this._describeHTML("fallback",g),w===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==g&&(this.descriptions.label.innerHTML=g):this._describeHTML("label",g)))},u.default.prototype.describeElement=function(g,w,_){var C,k;u.default._validateParameters("describeElement",arguments),typeof w=="string"&&typeof g=="string"&&(C=this.canvas.id,w=b(w),k=function(E){if(E==="label"||E==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return E.endsWith(".")||E.endsWith(";")||E.endsWith(",")?E=E.replace(/.$/,":"):E.endsWith(":")||(E+=":"),E}(g),g=g.replace(/[^a-zA-Z0-9]/g,""),k='<th scope="row">'.concat(k,"</th><td>").concat(w,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(C).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[g]?this.descriptions.fallbackElements[g].innerHTML!==k&&(this.descriptions.fallbackElements[g].innerHTML=k):this._describeElementHTML("fallback",g,k),_===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[g]?this.descriptions.labelElements[g].innerHTML!==k&&(this.descriptions.labelElements[g].innerHTML=k):this._describeElementHTML("label",g,k)))},u.default.prototype._describeHTML=function(g,w){var _,C=this.canvas.id;g==="fallback"?(this.dummyDOM.querySelector("#".concat(C+l))?this.dummyDOM.querySelector("#"+C+x).insertAdjacentHTML("beforebegin",'<p id="'.concat(C+d,'"></p>')):(_='<div id="'.concat(C).concat(l,'" role="region" aria-label="Canvas Description"><p id="').concat(C).concat(d,'"></p></div>'),this.dummyDOM.querySelector("#".concat(C,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(C,"accessibleOutput")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#".concat(C)).innerHTML=_),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(C).concat(d)),this.descriptions.fallback.innerHTML=w):g==="label"&&(this.dummyDOM.querySelector("#".concat(C+S))?this.dummyDOM.querySelector("#".concat(C+y))&&this.dummyDOM.querySelector("#".concat(C+y)).insertAdjacentHTML("beforebegin",'<p id="'.concat(C).concat(m,'"></p>')):(_='<div id="'.concat(C).concat(S,'" class="p5Label"><p id="').concat(C).concat(m,'"></p></div>'),this.dummyDOM.querySelector("#".concat(C,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(C,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",_):this.dummyDOM.querySelector("#"+C).insertAdjacentHTML("afterend",_)),this.descriptions.label=this.dummyDOM.querySelector("#"+C+m),this.descriptions.label.innerHTML=w)},u.default.prototype._describeElementHTML=function(g,w,_){var C,k=this.canvas.id;g==="fallback"?(this.dummyDOM.querySelector("#".concat(k+l))?this.dummyDOM.querySelector("#"+k+x)||this.dummyDOM.querySelector("#"+k+d).insertAdjacentHTML("afterend",'<table id="'.concat(k).concat(x,'"><caption>Canvas elements and their descriptions</caption></table>')):(C='<div id="'.concat(k).concat(l,'" role="region" aria-label="Canvas Description"><table id="').concat(k).concat(x,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(k,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(k,"accessibleOutput")).insertAdjacentHTML("beforebegin",C):this.dummyDOM.querySelector("#"+k).innerHTML=C),(C=document.createElement("tr")).id=k+"_fte_"+w,this.dummyDOM.querySelector("#"+k+x).appendChild(C),this.descriptions.fallbackElements[w]=this.dummyDOM.querySelector("#".concat(k).concat("_fte_").concat(w)),this.descriptions.fallbackElements[w].innerHTML=_):g==="label"&&(this.dummyDOM.querySelector("#".concat(k+S))?this.dummyDOM.querySelector("#".concat(k+y))||this.dummyDOM.querySelector("#"+k+m).insertAdjacentHTML("afterend",'<table id="'.concat(k+y,'"></table>')):(C='<div id="'.concat(k).concat(S,'" class="p5Label"><table id="').concat(k).concat(y,'"></table></div>'),this.dummyDOM.querySelector("#".concat(k,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(k,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",C):this.dummyDOM.querySelector("#"+k).insertAdjacentHTML("afterend",C)),(g=document.createElement("tr")).id=k+"_lte_"+w,this.dummyDOM.querySelector("#"+k+y).appendChild(g),this.descriptions.labelElements[w]=this.dummyDOM.querySelector("#".concat(k).concat("_lte_").concat(w)),this.descriptions.labelElements[w].innerHTML=_)},r=u.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.replace":194}],254:[function(r,h,f){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.map"),r("core-js/modules/es.string.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../core/main"))&&r.__esModule?r:{default:r}).default.prototype._updateGridOutput=function(u){var l,d,x,S;this.dummyDOM.querySelector("#".concat(u,"_summary"))&&(l=this._accessibleOutputs[u],x=function(m,y,b,g){return y="".concat(y," canvas, ").concat(b," by ").concat(g," pixels, contains ").concat(m[0]),y=(m[0]===1?"".concat(y," shape: "):"".concat(y," shapes: ")).concat(m[1])}((d=function(m,y){var b,g="",w="",_=0;for(b in y){var C,k=0;for(C in y[b]){var E='<li id="'.concat(m,"shape").concat(_,'">').concat(y[b][C].color," ").concat(b,",");b==="line"?E+=" location = ".concat(y[b][C].pos,", length = ").concat(y[b][C].length," pixels"):(E+=" location = ".concat(y[b][C].pos),b!=="point"&&(E+=", area = ".concat(y[b][C].area," %")),E+="</li>"),g+=E,k++,_++}w=1<k?"".concat(w," ").concat(k," ").concat(b,"s"):"".concat(w," ").concat(k," ").concat(b)}return{numShapes:[_,w],details:g}}(u,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),S=function(m,y){var b,g,w=0,_="",C=Array.from(Array(10),function(){return Array(10)});for(b in y)for(var k in y[b]){var E;E=b!=="line"?'<a href="#'.concat(m,"shape").concat(w,'">').concat(y[b][k].color," ").concat(b,"</a>"):'<a href="#'.concat(m,"shape").concat(w,'">').concat(y[b][k].color," ").concat(b," midpoint</a>"),C[y[b][k].loc.locY][y[b][k].loc.locX]?C[y[b][k].loc.locY][y[b][k].loc.locX]=C[y[b][k].loc.locY][y[b][k].loc.locX]+"  "+E:C[y[b][k].loc.locY][y[b][k].loc.locX]=E,w++}for(g in C){var j,A="<tr>";for(j in C[g])A+="<td>",C[g][j]!==void 0&&(A+=C[g][j]),A+="</td>";_=_+A+"</tr>"}return _}(u,this.ingredients.shapes),x!==l.summary.innerHTML&&(l.summary.innerHTML=x),S!==l.map.innerHTML&&(l.map.innerHTML=S),d.details!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=d.details),this._accessibleOutputs[u]=l)},r=r.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":157,"core-js/modules/es.array.map":163,"core-js/modules/es.string.iterator":190}],255:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(d,x,S){return(x=Math.floor(d[0]/x*10))===10&&(x-=1),(d=Math.floor(d[1]/S*10))===10&&(d-=1),{locX:x,locY:d}}u.default.prototype.textOutput=function(d){u.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},u.default.prototype.gridOutput=function(d){u.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},u.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},u.default.prototype._createOutput=function(d,x){var S,m,y,b=this.canvas.id,g=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),"");x==="Fallback"?(S=b+d,this.dummyDOM.querySelector("#".concat(m=b+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(b,"_Description"))?this.dummyDOM.querySelector("#".concat(b,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(m,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(b)).innerHTML='<div id="'.concat(m,'" role="region" aria-label="Canvas Outputs"></div>'))):x==="Label"&&(S=b+d+(g=x),this.dummyDOM.querySelector("#".concat(m=b+"accessibleOutput"+x))||(this.dummyDOM.querySelector("#".concat(b,"_Label"))?this.dummyDOM.querySelector("#".concat(b,"_Label")):this.dummyDOM.querySelector("#".concat(b))).insertAdjacentHTML("afterend",'<div id="'.concat(m,'"></div>'))),this._accessibleOutputs[S]={},d==="textOutput"?(g="#".concat(b,"gridOutput").concat(g),y='<div id="'.concat(S,'">Text Output<div id="').concat(S,'Summary" aria-label="text output summary"><p id="').concat(S,'_summary"></p><ul id="').concat(S,'_list"></ul></div><table id="').concat(S,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("beforebegin",y):this.dummyDOM.querySelector("#".concat(m)).innerHTML=y,this._accessibleOutputs[S].list=this.dummyDOM.querySelector("#".concat(S,"_list"))):d==="gridOutput"&&(g="#".concat(b,"textOutput").concat(g),y='<div id="'.concat(S,'">Grid Output<p id="').concat(S,'_summary" aria-label="grid output summary"><table id="').concat(S,'_map" summary="grid output content"></table><ul id="').concat(S,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(g)?this.dummyDOM.querySelector(g).insertAdjacentHTML("afterend",y):this.dummyDOM.querySelector("#".concat(m)).innerHTML=y,this._accessibleOutputs[S].map=this.dummyDOM.querySelector("#".concat(S,"_map"))),this._accessibleOutputs[S].shapeDetails=this.dummyDOM.querySelector("#".concat(S,"_shapeDetails")),this._accessibleOutputs[S].summary=this.dummyDOM.querySelector("#".concat(S,"_summary"))},u.default.prototype._updateAccsOutput=function(){var d=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(d+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(d+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(d+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(d+"gridOutputLabel"))},u.default.prototype._accsBackground=function(d){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==d&&(this.ingredients.colors.backgroundRGBA=d,this.ingredients.colors.background=this._rgbColorName(d))},u.default.prototype._accsCanvasColors=function(d,x){d==="fill"?this.ingredients.colors.fillRGBA!==x&&(this.ingredients.colors.fillRGBA=x,this.ingredients.colors.fill=this._rgbColorName(x)):d==="stroke"&&this.ingredients.colors.strokeRGBA!==x&&(this.ingredients.colors.strokeRGBA=x,this.ingredients.colors.stroke=this._rgbColorName(x))},u.default.prototype._accsOutput=function(d,x){d==="ellipse"&&x[2]===x[3]?d="circle":d==="rectangle"&&x[2]===x[3]&&(d="square");var S,m,y={},b=!0,g=function(_,C){var k;return _=_==="rectangle"||_==="ellipse"||_==="arc"||_==="circle"||_==="square"?(k=Math.round(C[0]+C[2]/2),Math.round(C[1]+C[3]/2)):_==="triangle"?(k=(C[0]+C[2]+C[4])/3,(C[1]+C[3]+C[5])/3):_==="quadrilateral"?(k=(C[0]+C[2]+C[4]+C[6])/4,(C[1]+C[3]+C[5]+C[7])/4):_==="line"?(k=(C[0]+C[2])/2,(C[1]+C[3])/2):(k=C[0],C[1]),[k,_]}(d,x);if(d==="line"?(y.color=this.ingredients.colors.stroke,y.length=Math.round(this.dist(x[0],x[1],x[2],x[3])),S=this._getPos(x[0],[1]),m=this._getPos(x[2],[3]),y.loc=l(g,this.width,this.height),y.pos=S===m?"at ".concat(S):"from ".concat(S," to ").concat(m)):(d==="point"?y.color=this.ingredients.colors.stroke:(y.color=this.ingredients.colors.fill,y.area=this._getArea(d,x)),y.pos=this._getPos.apply(this,function(_){return function(C){if(Array.isArray(C)){for(var k=0,E=new Array(C.length);k<C.length;k++)E[k]=C[k];return E}}(_)||function(C){if(Symbol.iterator in Object(C)||Object.prototype.toString.call(C)==="[object Arguments]")return Array.from(C)}(_)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(g)),y.loc=l(g,this.width,this.height)),this.ingredients.shapes[d]){if(this.ingredients.shapes[d]!==[y]){for(var w in this.ingredients.shapes[d])JSON.stringify(this.ingredients.shapes[d][w])===JSON.stringify(y)&&(b=!1);b===!0&&this.ingredients.shapes[d].push(y)}}else this.ingredients.shapes[d]=[y]},u.default.prototype._getPos=function(d,x){d=new DOMPointReadOnly(d,x),x=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),x=(d=d.matrixTransform(x)).x,d=d.y;var S=this.width,m=this.height;return x<.4*S?d<.4*m?"top left":.6*m<d?"bottom left":"mid left":.6*S<x?d<.4*m?"top right":.6*m<d?"bottom right":"mid right":d<.4*m?"top middle":.6*m<d?"bottom middle":"middle"},u.default.prototype._getArea=function(d,x){var S,m,y=0,b=(d==="arc"?(y=(S=((x[5]-x[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*x[2]*x[3]/8,x[6]!=="open"&&x[6]!=="chord"||(m=x[0],C=x[1],b=x[0]+x[2]/2*Math.cos(x[4]).toFixed(2),k=x[1]+x[3]/2*Math.sin(x[4]).toFixed(2),w=x[0]+x[2]/2*Math.cos(x[5]).toFixed(2),g=x[1]+x[3]/2*Math.sin(x[5]).toFixed(2),m=Math.abs(m*(k-g)+b*(g-C)+w*(C-k))/2,S>Math.PI?y+=m:y-=m)):d==="ellipse"||d==="circle"?y=3.14*x[2]/2*x[3]/2:d==="line"||d==="point"?y=0:d==="quadrilateral"?y=Math.abs((x[6]+x[0])*(x[7]-x[1])+(x[0]+x[2])*(x[1]-x[3])+(x[2]+x[4])*(x[3]-x[5])+(x[4]+x[6])*(x[5]-x[7]))/2:d==="rectangle"||d==="square"?y=x[2]*x[3]:d==="triangle"&&(y=Math.abs(x[0]*(x[3]-x[5])+x[2]*(x[5]-x[1])+x[4]*(x[1]-x[3]))/2),this.width*this._pixelDensity),g=this.height*this._pixelDensity,w=[new DOMPoint(0,0),new DOMPoint(b,0),new DOMPoint(b,g),new DOMPoint(0,g)],_=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),C=w.map(function(E){return E.matrixTransform(_)}),k=Math.abs((C[3].x+C[0].x)*(C[3].y-C[0].y)+(C[0].x+C[1].x)*(C[0].y-C[1].y)+(C[1].x+C[2].x)*(C[1].y-C[2].y)+(C[2].x+C[3].x)*(C[2].y-C[3].y))/2;return Math.round(100*y/k)},r=u.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],256:[function(r,h,f){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.concat"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../core/main"))&&r.__esModule?r:{default:r}).default.prototype._updateTextOutput=function(u){var l,d,x,S;this.dummyDOM.querySelector("#".concat(u,"_summary"))&&(l=this._accessibleOutputs[u],x=function(m,y,b,g){return b="Your output is a, ".concat(b," by ").concat(g," pixels, ").concat(y," canvas containing the following"),b=m===1?"".concat(b," shape:"):"".concat(b," ").concat(m," shapes:")}((d=function(m,y){var b,g="",w=0;for(b in y)for(var _ in y[b]){var C='<li><a href="#'.concat(m,"shape").concat(w,'">').concat(y[b][_].color," ").concat(b,"</a>");b==="line"?C+=", ".concat(y[b][_].pos,", ").concat(y[b][_].length," pixels long.</li>"):(C+=", at ".concat(y[b][_].pos),b!=="point"&&(C+=", covering ".concat(y[b][_].area,"% of the canvas")),C+=".</li>"),g+=C,w++}return{numShapes:w,listShapes:g}}(u,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),S=function(m,y){var b,g="",w=0;for(b in y)for(var _ in y[b]){var C='<tr id="'.concat(m,"shape").concat(w,'"><th>').concat(y[b][_].color," ").concat(b,"</th>");b==="line"?C+="<td>location = ".concat(y[b][_].pos,"</td><td>length = ").concat(y[b][_].length," pixels</td></tr>"):(C+="<td>location = ".concat(y[b][_].pos,"</td>"),b!=="point"&&(C+="<td> area = ".concat(y[b][_].area,"%</td>")),C+="</tr>"),g+=C,w++}return g}(u,this.ingredients.shapes),x!==l.summary.innerHTML&&(l.summary.innerHTML=x),d.listShapes!==l.list.innerHTML&&(l.list.innerHTML=d.listShapes),S!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=S),this._accessibleOutputs[u]=l)},r=r.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.concat":151}],257:[function(r,h,f){var u=(u=r("./core/main"))&&u.__esModule?u:{default:u};r("./core/constants"),r("./core/environment"),r("./core/friendly_errors/stacktrace"),r("./core/friendly_errors/validate_params"),r("./core/friendly_errors/file_errors"),r("./core/friendly_errors/fes_core"),r("./core/friendly_errors/sketch_reader"),r("./core/helpers"),r("./core/legacy"),r("./core/preload"),r("./core/p5.Element"),r("./core/p5.Graphics"),r("./core/p5.Renderer"),r("./core/p5.Renderer2D"),r("./core/rendering"),r("./core/shim"),r("./core/structure"),r("./core/transform"),r("./core/shape/2d_primitives"),r("./core/shape/attributes"),r("./core/shape/curves"),r("./core/shape/vertex"),r("./accessibility/outputs"),r("./accessibility/textOutput"),r("./accessibility/gridOutput"),r("./accessibility/color_namer"),r("./color/color_conversion"),r("./color/creating_reading"),r("./color/p5.Color"),r("./color/setting"),r("./data/p5.TypedDict"),r("./data/local_storage.js"),r("./dom/dom"),r("./accessibility/describe"),r("./events/acceleration"),r("./events/keyboard"),r("./events/mouse"),r("./events/touch"),r("./image/filters"),r("./image/image"),r("./image/loading_displaying"),r("./image/p5.Image"),r("./image/pixels"),r("./io/files"),r("./io/p5.Table"),r("./io/p5.TableRow"),r("./io/p5.XML"),r("./math/calculation"),r("./math/math"),r("./math/noise"),r("./math/p5.Vector"),r("./math/random"),r("./math/trigonometry"),r("./typography/attributes"),r("./typography/loading_displaying"),r("./typography/p5.Font"),r("./utilities/array_functions"),r("./utilities/conversion"),r("./utilities/string_functions"),r("./utilities/time_date"),r("./webgl/3d_primitives"),r("./webgl/interaction"),r("./webgl/light"),r("./webgl/loading"),r("./webgl/material"),r("./webgl/p5.Camera"),r("./webgl/p5.Geometry"),r("./webgl/p5.Matrix"),r("./webgl/p5.RendererGL.Immediate"),r("./webgl/p5.RendererGL"),r("./webgl/p5.RendererGL.Retained"),r("./webgl/p5.Framebuffer"),r("./webgl/p5.Shader"),r("./webgl/p5.RenderBuffer"),r("./webgl/p5.Texture"),r("./webgl/text"),r("./core/init"),h.exports=u.default},{"./accessibility/color_namer":252,"./accessibility/describe":253,"./accessibility/gridOutput":254,"./accessibility/outputs":255,"./accessibility/textOutput":256,"./color/color_conversion":258,"./color/creating_reading":259,"./color/p5.Color":260,"./color/setting":261,"./core/constants":262,"./core/environment":263,"./core/friendly_errors/fes_core":264,"./core/friendly_errors/file_errors":265,"./core/friendly_errors/sketch_reader":266,"./core/friendly_errors/stacktrace":267,"./core/friendly_errors/validate_params":268,"./core/helpers":269,"./core/init":270,"./core/legacy":272,"./core/main":273,"./core/p5.Element":274,"./core/p5.Graphics":275,"./core/p5.Renderer":276,"./core/p5.Renderer2D":277,"./core/preload":278,"./core/rendering":279,"./core/shape/2d_primitives":280,"./core/shape/attributes":281,"./core/shape/curves":282,"./core/shape/vertex":283,"./core/shim":284,"./core/structure":285,"./core/transform":286,"./data/local_storage.js":287,"./data/p5.TypedDict":288,"./dom/dom":289,"./events/acceleration":290,"./events/keyboard":291,"./events/mouse":292,"./events/touch":293,"./image/filters":294,"./image/image":295,"./image/loading_displaying":296,"./image/p5.Image":297,"./image/pixels":298,"./io/files":299,"./io/p5.Table":300,"./io/p5.TableRow":301,"./io/p5.XML":302,"./math/calculation":303,"./math/math":304,"./math/noise":305,"./math/p5.Vector":306,"./math/random":307,"./math/trigonometry":308,"./typography/attributes":309,"./typography/loading_displaying":310,"./typography/p5.Font":311,"./utilities/array_functions":312,"./utilities/conversion":313,"./utilities/string_functions":314,"./utilities/time_date":315,"./webgl/3d_primitives":316,"./webgl/interaction":317,"./webgl/light":318,"./webgl/loading":319,"./webgl/material":320,"./webgl/p5.Camera":321,"./webgl/p5.Framebuffer":322,"./webgl/p5.Geometry":323,"./webgl/p5.Matrix":324,"./webgl/p5.RenderBuffer":325,"./webgl/p5.RendererGL":328,"./webgl/p5.RendererGL.Immediate":326,"./webgl/p5.RendererGL.Retained":327,"./webgl/p5.Shader":329,"./webgl/p5.Texture":330,"./webgl/text":331}],258:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../core/main"))&&r.__esModule?r:{default:r}).default.ColorConversion={_hsbaToHSLA:function(u){var l=u[0],d=u[1],x=u[2],S=(2-d)*x/2;return S!=0&&(S==1?d=0:S<.5?d/=2-d:d=d*x/(2-2*S)),[l,d,S,u[3]]},_hsbaToRGBA:function(u){var l,d,x,S,m,y=6*u[0],b=u[1],g=u[2];return b===0?[g,g,g,u[3]]:(d=g*(1-b),x=g*(1-b*(y-(l=Math.floor(y)))),b=g*(1-b*(1+l-y)),y=l===1?(S=x,m=g,d):l===2?(S=d,m=g,b):l===3?(S=d,m=x,g):l===4?(S=b,m=d,g):l===5?(S=g,m=d,x):(S=g,m=b,d),[S,m,y,u[3]])},_hslaToHSBA:function(u){var l=u[0],d=u[1],x=u[2],S=x<.5?(1+d)*x:x+d-x*d;return[l,d=2*(S-x)/S,S,u[3]]},_hslaToRGBA:function(u){var l,d=6*u[0],x=u[1],S=u[2];return x===0?[S,S,S,u[3]]:[(l=function(m,y,b){return m<0?m+=6:6<=m&&(m-=6),m<1?y+(b-y)*m:m<3?b:m<4?y+(b-y)*(4-m):y})(2+d,x=2*S-(S=S<.5?(1+x)*S:S+x-S*x),S),l(d,x,S),l(d-2,x,S),u[3]]},_rgbaToHSBA:function(u){var l,d,x=u[0],S=u[1],m=u[2],y=Math.max(x,S,m),b=y-Math.min(x,S,m);return b==0?d=l=0:(d=b/y,x===y?l=(S-m)/b:S===y?l=2+(m-x)/b:m===y&&(l=4+(x-S)/b),l<0?l+=6:6<=l&&(l-=6)),[l/6,d,y,u[3]]},_rgbaToHSLA:function(u){var l,d,x,S=u[0],m=u[1],y=u[2],b=Math.max(S,m,y),g=b+(x=Math.min(S,m,y));return(x=b-x)==0?d=l=0:(d=g<1?x/g:x/(2-g),S===b?l=(m-y)/x:m===b?l=2+(y-S)/x:y===b&&(l=4+(S-m)/x),l<0?l+=6:6<=l&&(l-=6)),[l/6,d,g/2,u[3]]}},r=r.default.ColorConversion,f.default=r},{"../core/main":273}],259:[function(r,h,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function l(m){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(y){return u(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":u(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.map"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(S=r("../core/main"))&&S.__esModule?S:{default:S},x=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var y=function(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,C)}();if(y&&y.has(m))return y.get(m);var b,g={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in m){var _;Object.prototype.hasOwnProperty.call(m,b)&&((_=w?Object.getOwnPropertyDescriptor(m,b):null)&&(_.get||_.set)?Object.defineProperty(g,b,_):g[b]=m[b])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));r("./p5.Color"),r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),d.default.prototype.alpha=function(m){return d.default._validateParameters("alpha",arguments),this.color(m)._getAlpha()},d.default.prototype.blue=function(m){return d.default._validateParameters("blue",arguments),this.color(m)._getBlue()},d.default.prototype.brightness=function(m){return d.default._validateParameters("brightness",arguments),this.color(m)._getBrightness()},d.default.prototype.color=function(){var m;return d.default._validateParameters("color",arguments),arguments[0]instanceof d.default.Color?arguments[0]:(m=arguments[0]instanceof Array?arguments[0]:arguments,new d.default.Color(this,m))},d.default.prototype.green=function(m){return d.default._validateParameters("green",arguments),this.color(m)._getGreen()},d.default.prototype.hue=function(m){return d.default._validateParameters("hue",arguments),this.color(m)._getHue()},d.default.prototype.lerpColor=function(m,y,b){d.default._validateParameters("lerpColor",arguments);var g,w,_,C=this._colorMode,k=this._colorMaxes;if(C===x.RGB)w=m.levels.map(function(E){return E/255}),_=y.levels.map(function(E){return E/255});else if(C===x.HSB)m._getBrightness(),y._getBrightness(),w=m.hsba,_=y.hsba;else{if(C!==x.HSL)throw new Error("".concat(C,"cannot be used for interpolation."));m._getLightness(),y._getLightness(),w=m.hsla,_=y.hsla}return b=Math.max(Math.min(b,1),0),this.lerp===void 0&&(this.lerp=function(E,j,A){return A*(j-E)+E}),m=this.lerp(w[0],_[0],b),y=this.lerp(w[1],_[1],b),g=this.lerp(w[2],_[2],b),w=this.lerp(w[3],_[3],b),m*=k[C][0],y*=k[C][1],g*=k[C][2],w*=k[C][3],this.color(m,y,g,w)},d.default.prototype.lightness=function(m){return d.default._validateParameters("lightness",arguments),this.color(m)._getLightness()},d.default.prototype.red=function(m){return d.default._validateParameters("red",arguments),this.color(m)._getRed()},d.default.prototype.saturation=function(m){return d.default._validateParameters("saturation",arguments),this.color(m)._getSaturation()};var S=d.default;f.default=S},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],260:[function(r,h,f){function u(k){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(k)}function l(k){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(E){return u(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":u(E)})(k)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=m(r("../core/main")),x=function(k){if(k&&k.__esModule)return k;if(k===null||l(k)!=="object"&&typeof k!="function")return{default:k};var E=function(){var D;return typeof WeakMap!="function"?null:(D=new WeakMap,D)}();if(E&&E.has(k))return E.get(k);var j,A={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in k){var N;Object.prototype.hasOwnProperty.call(k,j)&&((N=O?Object.getOwnPropertyDescriptor(k,j):null)&&(N.get||N.set)?Object.defineProperty(A,j,N):A[j]=k[j])}return A.default=k,E&&E.set(k,A),A}(r("../core/constants")),S=m(r("./color_conversion"));function m(k){return k&&k.__esModule?k:{default:k}}function y(k,E){for(var j=0;j<E.length;j++){var A=E[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},g=(r=/\s*/,/(\d{1,3})/),w=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,_=new RegExp("".concat(w.source,"%")),C={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",g.source,",",g.source,",",g.source,"\\)$"].join(r.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",_.source,",",_.source,",",_.source,"\\)$"].join(r.source),"i"),RGBA:new RegExp(["^rgba\\(",g.source,",",g.source,",",g.source,",",w.source,"\\)$"].join(r.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",_.source,",",_.source,",",_.source,",",w.source,"\\)$"].join(r.source),"i"),HSL:new RegExp(["^hsl\\(",g.source,",",_.source,",",_.source,"\\)$"].join(r.source),"i"),HSLA:new RegExp(["^hsla\\(",g.source,",",_.source,",",_.source,",",w.source,"\\)$"].join(r.source),"i"),HSB:new RegExp(["^hsb\\(",g.source,",",_.source,",",_.source,"\\)$"].join(r.source),"i"),HSBA:new RegExp(["^hsba\\(",g.source,",",_.source,",",_.source,",",w.source,"\\)$"].join(r.source),"i")};d.default.Color=function(){function k(O,N){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(O._colorMode,O._colorMaxes),![x.RGB,x.HSL,x.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=k._parseInputs.apply(this,N),this._calculateLevels()}var E,j,A;return E=k,A=[{key:"_parseInputs",value:function(O,N,D,z){var $,B=arguments.length,F=this.mode,G=this.maxes[F],W=[];if(3<=B){for(W[0]=O/G[0],W[1]=N/G[1],W[2]=D/G[2],W[3]=typeof z=="number"?z/G[3]:1,$=W.length-1;0<=$;--$){var L=W[$];L<0?W[$]=0:1<L&&(W[$]=1)}return F===x.HSL?S.default._hslaToRGBA(W):F===x.HSB?S.default._hsbaToRGBA(W):W}if(B===1&&typeof O=="string"){if(D=O.trim().toLowerCase(),b[D])return k._parseInputs.call(this,b[D]);if(C.HEX3.test(D))return(W=C.HEX3.exec(D).slice(1).map(function(V){return parseInt(V+V,16)/255}))[3]=1,W;if(C.HEX6.test(D))return(W=C.HEX6.exec(D).slice(1).map(function(V){return parseInt(V,16)/255}))[3]=1,W;if(C.HEX4.test(D))return C.HEX4.exec(D).slice(1).map(function(V){return parseInt(V+V,16)/255});if(C.HEX8.test(D))return C.HEX8.exec(D).slice(1).map(function(V){return parseInt(V,16)/255});if(C.RGB.test(D))return(W=C.RGB.exec(D).slice(1).map(function(V){return V/255}))[3]=1,W;if(C.RGB_PERCENT.test(D))return(W=C.RGB_PERCENT.exec(D).slice(1).map(function(V){return parseFloat(V)/100}))[3]=1,W;if(C.RGBA.test(D))return C.RGBA.exec(D).slice(1).map(function(V,Y){return Y===3?parseFloat(V):V/255});if(C.RGBA_PERCENT.test(D))return C.RGBA_PERCENT.exec(D).slice(1).map(function(V,Y){return Y===3?parseFloat(V):parseFloat(V)/100});if(C.HSL.test(D)?(W=C.HSL.exec(D).slice(1).map(function(V,Y){return Y===0?parseInt(V,10)/360:parseInt(V,10)/100}))[3]=1:C.HSLA.test(D)&&(W=C.HSLA.exec(D).slice(1).map(function(V,Y){return Y===0?parseInt(V,10)/360:Y===3?parseFloat(V):parseInt(V,10)/100})),(W=W.map(function(V){return Math.max(Math.min(V,1),0)})).length)return S.default._hslaToRGBA(W);if(C.HSB.test(D)?(W=C.HSB.exec(D).slice(1).map(function(V,Y){return Y===0?parseInt(V,10)/360:parseInt(V,10)/100}))[3]=1:C.HSBA.test(D)&&(W=C.HSBA.exec(D).slice(1).map(function(V,Y){return Y===0?parseInt(V,10)/360:Y===3?parseFloat(V):parseInt(V,10)/100})),W.length){for($=W.length-1;0<=$;--$)W[$]=Math.max(Math.min(W[$],1),0);return S.default._hsbaToRGBA(W)}W=[1,1,1,1]}else{if(B!==1&&B!==2||typeof O!="number")throw new Error("".concat(arguments,"is not a valid color representation."));W[0]=O/G[2],W[1]=O/G[2],W[2]=O/G[2],W[3]=typeof N=="number"?N/G[3]:1,W=W.map(function(V){return Math.max(Math.min(V,1),0)})}return W}}],(j=[{key:"toString",value:function(O){var N=this.levels,D=this._array,z=D[3];switch(O){case"#rrggbb":return"#".concat(N[0]<16?"0".concat(N[0].toString(16)):N[0].toString(16),N[1]<16?"0".concat(N[1].toString(16)):N[1].toString(16),N[2]<16?"0".concat(N[2].toString(16)):N[2].toString(16));case"#rrggbbaa":return"#".concat(N[0]<16?"0".concat(N[0].toString(16)):N[0].toString(16),N[1]<16?"0".concat(N[1].toString(16)):N[1].toString(16),N[2]<16?"0".concat(N[2].toString(16)):N[2].toString(16),N[3]<16?"0".concat(N[3].toString(16)):N[3].toString(16));case"#rgb":return"#".concat(Math.round(15*D[0]).toString(16),Math.round(15*D[1]).toString(16),Math.round(15*D[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*D[0]).toString(16),Math.round(15*D[1]).toString(16),Math.round(15*D[2]).toString(16),Math.round(15*D[3]).toString(16));case"rgb":return"rgb(".concat(N[0],", ",N[1],", ",N[2],")");case"rgb%":return"rgb(".concat((100*D[0]).toPrecision(3),"%, ",(100*D[1]).toPrecision(3),"%, ",(100*D[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*D[0]).toPrecision(3),"%, ",(100*D[1]).toPrecision(3),"%, ",(100*D[2]).toPrecision(3),"%, ",(100*D[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=S.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[x.HSB][0],", ",this.hsba[1]*this.maxes[x.HSB][1],", ",this.hsba[2]*this.maxes[x.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=S.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=S.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[x.HSB][0],", ",this.hsba[1]*this.maxes[x.HSB][1],", ",this.hsba[2]*this.maxes[x.HSB][2],", ",z,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=S.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*z).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=S.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[x.HSL][0],", ",this.hsla[1]*this.maxes[x.HSL][1],", ",this.hsla[2]*this.maxes[x.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=S.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=S.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[x.HSL][0],", ",this.hsla[1]*this.maxes[x.HSL][1],", ",this.hsla[2]*this.maxes[x.HSL][2],", ",z,")");case"hsla%":return this.hsla||(this.hsla=S.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*z).toPrecision(3),"%)");default:return"rgba(".concat(N[0],",",N[1],",",N[2],",",z,")")}}},{key:"setRed",value:function(O){this._array[0]=O/this.maxes[x.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(O){this._array[1]=O/this.maxes[x.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(O){this._array[2]=O/this.maxes[x.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(O){this._array[3]=O/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var O=this._array,N=this.levels=new Array(O.length),D=O.length-1;0<=D;--D)N[D]=Math.round(255*O[D]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(O,N){this.mode=O,this.maxes=N}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[x.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=S.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[x.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[x.RGB][1]}},{key:"_getHue",value:function(){return this.mode===x.HSB?(this.hsba||(this.hsba=S.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[x.HSB][0]):(this.hsla||(this.hsla=S.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[x.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=S.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[x.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[x.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===x.HSB?(this.hsba||(this.hsba=S.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[x.HSB][1]):(this.hsla||(this.hsla=S.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[x.HSL][1])}}])&&y(E.prototype,j),A&&y(E,A),k}(),g=d.default.Color,f.default=g},{"../core/constants":262,"../core/main":273,"./color_conversion":258,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],261:[function(r,h,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function l(m){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(y){return u(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":u(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.fill"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(S=r("../core/main"))&&S.__esModule?S:{default:S},x=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var y=function(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,C)}();if(y&&y.has(m))return y.get(m);var b,g={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in m){var _;Object.prototype.hasOwnProperty.call(m,b)&&((_=w?Object.getOwnPropertyDescriptor(m,b):null)&&(_.get||_.set)?Object.defineProperty(g,b,_):g[b]=m[b])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));r("./p5.Color"),d.default.prototype.background=function(){var m;return(m=this._renderer).background.apply(m,arguments),this},d.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},d.default.prototype.colorMode=function(m,y,b,g,w){return d.default._validateParameters("colorMode",arguments),m!==x.RGB&&m!==x.HSB&&m!==x.HSL||(this._colorMode=m,m=this._colorMaxes[m],arguments.length===2?(m[0]=y,m[1]=y,m[2]=y,m[3]=y):arguments.length===4?(m[0]=y,m[1]=b,m[2]=g):arguments.length===5&&(m[0]=y,m[1]=b,m[2]=g,m[3]=w)),this},d.default.prototype.fill=function(){var m;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(m=this._renderer).fill.apply(m,arguments),this},d.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},d.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},d.default.prototype.stroke=function(){var m;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(m=this._renderer).stroke.apply(m,arguments),this},d.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},d.default.prototype.noErase=function(){return this._renderer.noErase(),this};var S=d.default;f.default=S},{"../core/constants":262,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],262:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.QUADRATIC=f.LINEAR=f._CTX_MIDDLE=f._DEFAULT_LEADMULT=f._DEFAULT_TEXT_FILL=f.WORD=f.CHAR=f.BOLDITALIC=f.BOLD=f.ITALIC=f.NORMAL=f.BLUR=f.ERODE=f.DILATE=f.POSTERIZE=f.INVERT=f.OPAQUE=f.GRAY=f.THRESHOLD=f.BURN=f.DODGE=f.SOFT_LIGHT=f.HARD_LIGHT=f.OVERLAY=f.REPLACE=f.SCREEN=f.MULTIPLY=f.EXCLUSION=f.SUBTRACT=f.DIFFERENCE=f.LIGHTEST=f.DARKEST=f.ADD=f.REMOVE=f.BLEND=f.UP_ARROW=f.TAB=f.SHIFT=f.RIGHT_ARROW=f.RETURN=f.OPTION=f.LEFT_ARROW=f.ESCAPE=f.ENTER=f.DOWN_ARROW=f.DELETE=f.CONTROL=f.BACKSPACE=f.ALT=f.AUTO=f.HSL=f.HSB=f.RGB=f.MITER=f.BEVEL=f.ROUND=f.SQUARE=f.PROJECT=f.PIE=f.CHORD=f.OPEN=f.CLOSE=f.TESS=f.QUAD_STRIP=f.QUADS=f.TRIANGLE_STRIP=f.TRIANGLE_FAN=f.TRIANGLES=f.LINE_LOOP=f.LINE_STRIP=f.LINES=f.POINTS=f.BASELINE=f.BOTTOM=f.TOP=f.CENTER=f.LEFT=f.RIGHT=f.RADIUS=f.CORNERS=f.CORNER=f.RAD_TO_DEG=f.DEG_TO_RAD=f.RADIANS=f.DEGREES=f.TWO_PI=f.TAU=f.QUARTER_PI=f.PI=f.HALF_PI=f.WAIT=f.TEXT=f.MOVE=f.HAND=f.CROSS=f.ARROW=f.WEBGL2=f.WEBGL=f.P2D=f.VERSION=void 0,f.RGBA=f.HALF_FLOAT=f.FLOAT=f.UNSIGNED_INT=f.UNSIGNED_BYTE=f.COVER=f.CONTAIN=f.FALLBACK=f.LABEL=f.AXES=f.GRID=f._DEFAULT_FILL=f._DEFAULT_STROKE=f.PORTRAIT=f.LANDSCAPE=f.MIRROR=f.CLAMP=f.REPEAT=f.NEAREST=f.IMAGE=f.IMMEDIATE=f.TEXTURE=f.FILL=f.STROKE=f.CURVE=f.BEZIER=void 0;var u=Math.PI,l=(f.VERSION="1.7.0",f.P2D="p2d",f.WEBGL="webgl",f.WEBGL2="webgl2",f.ARROW="default",f.CROSS="crosshair",f.HAND="pointer",f.MOVE="move",f.TEXT="text",f.WAIT="wait",u/2);f.HALF_PI=l,l=u,f.PI=l,l=u/4,f.QUARTER_PI=l,l=2*u,f.TAU=l,l=2*u,f.TWO_PI=l,f.DEGREES="degrees",f.RADIANS="radians",l=u/180,f.DEG_TO_RAD=l,l=180/u,f.RAD_TO_DEG=l,f.CORNER="corner",f.CORNERS="corners",f.RADIUS="radius",f.RIGHT="right",f.LEFT="left",f.CENTER="center",f.TOP="top",f.BOTTOM="bottom",f.BASELINE="alphabetic",f.POINTS=0,f.LINES=1,f.LINE_STRIP=3,f.LINE_LOOP=2,f.TRIANGLES=4,f.TRIANGLE_FAN=6,f.TRIANGLE_STRIP=5,f.QUADS="quads",f.QUAD_STRIP="quad_strip",f.TESS="tess",f.CLOSE="close",f.OPEN="open",f.CHORD="chord",f.PIE="pie",f.PROJECT="square",f.SQUARE="butt",f.ROUND="round",f.BEVEL="bevel",f.MITER="miter",f.RGB="rgb",f.HSB="hsb",f.HSL="hsl",f.AUTO="auto",f.ALT=18,f.BACKSPACE=8,f.CONTROL=17,f.DELETE=46,f.DOWN_ARROW=40,f.ENTER=13,f.ESCAPE=27,f.LEFT_ARROW=37,f.OPTION=18,f.RETURN=13,f.RIGHT_ARROW=39,f.SHIFT=16,f.TAB=9,f.UP_ARROW=38,f.BLEND="source-over",f.REMOVE="destination-out",f.ADD="lighter",f.DARKEST="darken",f.LIGHTEST="lighten",f.DIFFERENCE="difference",f.SUBTRACT="subtract",f.EXCLUSION="exclusion",f.MULTIPLY="multiply",f.SCREEN="screen",f.REPLACE="copy",f.OVERLAY="overlay",f.HARD_LIGHT="hard-light",f.SOFT_LIGHT="soft-light",f.DODGE="color-dodge",f.BURN="color-burn",f.THRESHOLD="threshold",f.GRAY="gray",f.OPAQUE="opaque",f.INVERT="invert",f.POSTERIZE="posterize",f.DILATE="dilate",f.ERODE="erode",f.BLUR="blur",f.NORMAL="normal",f.ITALIC="italic",f.BOLD="bold",f.BOLDITALIC="bold italic",f.CHAR="CHAR",f.WORD="WORD",f._DEFAULT_TEXT_FILL="#000000",f._DEFAULT_LEADMULT=1.25,f._CTX_MIDDLE="middle",f.LINEAR="linear",f.QUADRATIC="quadratic",f.BEZIER="bezier",f.CURVE="curve",f.STROKE="stroke",f.FILL="fill",f.TEXTURE="texture",f.IMMEDIATE="immediate",f.IMAGE="image",f.NEAREST="nearest",f.REPEAT="repeat",f.CLAMP="clamp",f.MIRROR="mirror",f.LANDSCAPE="landscape",f.PORTRAIT="portrait",f._DEFAULT_STROKE="#000000",f._DEFAULT_FILL="#FFFFFF",f.GRID="grid",f.AXES="axes",f.LABEL="label",f.FALLBACK="fallback",f.CONTAIN="contain",f.COVER="cover",f.UNSIGNED_BYTE="unsigned-byte",f.UNSIGNED_INT="unsigned-int",f.FLOAT="float",f.HALF_FLOAT="half-float",f.RGBA="rgba"},{}],263:[function(r,h,f){function u(g){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(g)}function l(g){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.search"),r("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(x=r("./main"))&&x.__esModule?x:{default:x},x=function(g){if(g&&g.__esModule)return g;if(g===null||l(g)!=="object"&&typeof g!="function")return{default:g};var w=function(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,j)}();if(w&&w.has(g))return w.get(g);var _,C={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in g){var E;Object.prototype.hasOwnProperty.call(g,_)&&((E=k?Object.getOwnPropertyDescriptor(g,_):null)&&(E.get||E.set)?Object.defineProperty(C,_,E):C[_]=g[_])}return C.default=g,w&&w.set(g,C),C}(r("./constants")),S=[x.ARROW,x.CROSS,x.HAND,x.MOVE,x.TEXT,x.WAIT],m=(d.default.prototype._frameRate=0,d.default.prototype._lastFrameTime=window.performance.now(),d.default.prototype._targetFrameRate=60,window.print);function y(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function b(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}d.default.prototype.print=function(){var g;arguments.length?(g=console).log.apply(g,arguments):m()},d.default.prototype.frameCount=0,d.default.prototype.deltaTime=0,d.default.prototype.focused=document.hasFocus(),d.default.prototype.cursor=function(g,w,_){var C,k="auto",E=this._curElement.elt;S.includes(g)?k=g:typeof g=="string"&&(C="",w&&_&&typeof w=="number"&&typeof _=="number"&&(C="".concat(w," ").concat(_)),k=g.substring(0,7)==="http://"||g.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(g)?"url(".concat(g,") ").concat(C,", auto"):g),E.style.cursor=k},d.default.prototype.frameRate=function(g){return d.default._validateParameters("frameRate",arguments),typeof g!="number"||g<0?this._frameRate:(this._setProperty("_targetFrameRate",g),g===0&&this._setProperty("_frameRate",g),this)},d.default.prototype.getFrameRate=function(){return this.frameRate()},d.default.prototype.setFrameRate=function(g){return this.frameRate(g)},d.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},d.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},d.default.prototype.webglVersion=x.P2D,d.default.prototype.displayWidth=screen.width,d.default.prototype.displayHeight=screen.height,d.default.prototype.windowWidth=y(),d.default.prototype.windowHeight=b(),d.default.prototype._onresize=function(g){this._setProperty("windowWidth",y()),this._setProperty("windowHeight",b());var w=this._isGlobal?window:this;typeof w.windowResized!="function"||(w=w.windowResized(g))===void 0||w||g.preventDefault()},d.default.prototype.width=0,d.default.prototype.height=0,d.default.prototype.fullscreen=function(g){if(d.default._validateParameters("fullscreen",arguments),g===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(g){if(g=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},d.default.prototype.pixelDensity=function(g){var w;return d.default._validateParameters("pixelDensity",arguments),typeof g=="number"?(g!==this._pixelDensity&&(this._pixelDensity=g),(w=this).resizeCanvas(this.width,this.height,!0)):w=this._pixelDensity,w},d.default.prototype.displayDensity=function(){return window.devicePixelRatio},d.default.prototype.getURL=function(){return location.href},d.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(g){return g!==""})},d.default.prototype.getURLParams=function(){for(var g,w=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,_={};(g=w.exec(location.search))!=null;)g.index===w.lastIndex&&w.lastIndex++,_[g[1]]=g[2];return _},r=d.default,f.default=r},{"./constants":262,"./main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.search":195,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],264:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.starts-with"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(m=r("../main"))&&m.__esModule?m:{default:m};function l(y,b){b=b||console.log.bind(console),d||x(),d.some(function(g){var w;if(y.message&&y.message.match("\\W?".concat(g.name,"\\W"))!==null)return w=g.type==="function"?"".concat(g.name,"()"):g.name,b("Did you just try to use p5.js's ".concat(w," ").concat(g.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(S)),!0})}r("../internationalization");var d=null,x=null,S=(u.default._friendlyError=u.default._checkForUserDefinedFunctions=u.default._fesErrorMonitor=function(){},d=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),m=(x=function(){function y(g){return Object.getOwnPropertyNames(g).filter(function(w){return w[0]!=="_"&&!(w in b)&&(b[w]=!0)}).map(function(w){var _=typeof g[w]=="function"?"function":w===w.toUpperCase()?"constant":"variable";return{name:w,type:_}})}var b={};(d=[].concat(y(u.default.prototype),y(r("../constants")))).sort(function(g,w){return w.name.length-g.name.length})},u.default.prototype._helpForMisusedAtTopLevelCode=l,document.readyState!=="complete"&&(window.addEventListener("error",l,!1),window.addEventListener("load",function(){window.removeEventListener("error",l,!1)})),u.default);f.default=m},{"../constants":262,"../internationalization":271,"../main":273,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.function.name":167,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.starts-with":197,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],265:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(u=r("../main"))&&u.__esModule?u:{default:u};r("../internationalization"),u.default._friendlyFileLoadError=function(){},r=u.default,f.default=r},{"../internationalization":271,"../main":273}],266:[function(r,h,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function l(m){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(y){return u(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":u(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=function(m){return m&&m.__esModule?m:{default:m}}(r("../main"));r("../internationalization"),function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var y=x();if(y&&y.has(m))return y.get(m);var b,g,w={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in m)Object.prototype.hasOwnProperty.call(m,b)&&((g=_?Object.getOwnPropertyDescriptor(m,b):null)&&(g.get||g.set)?Object.defineProperty(w,b,g):w[b]=m[b]);w.default=m,y&&y.set(m,w)}(r("../constants"));function x(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,x=function(){return m},m)}d.default._fesCodeReader=function(){};var S=d.default;f.default=S},{"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],267:[function(r,h,f){function u(){var l=/(^|@)\S+:\d+/,d=/^\s*at .*(\S+:\d+|\(native\))/m,x=/^(eval@)?(\[native code])?$/;return{parse:function(S){return S.stacktrace!==void 0||S["opera#sourceloc"]!==void 0?this.parseOpera(S):S.stack&&S.stack.match(d)?this.parseV8OrIE(S):S.stack?this.parseFFOrSafari(S):void 0},extractLocation:function(S){return S.indexOf(":")===-1?[S]:[(S=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(S.replace(/[()]/g,"")))[1],S[2]||void 0,S[3]||void 0]},parseV8OrIE:function(S){return S.stack.split(`
`).filter(function(m){return!!m.match(d)},this).map(function(m){var y=(b=(m=-1<m.indexOf("(eval ")?m.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):m).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),b=(b=y?b.replace(y[0],""):b).split(/\s+/).slice(1);return y=this.extractLocation(y?y[1]:b.pop()),{functionName:b.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(y[0])?void 0:y[0],lineNumber:y[1],columnNumber:y[2],source:m}},this)},parseFFOrSafari:function(S){return S.stack.split(`
`).filter(function(m){return!m.match(x)},this).map(function(m){var y,b;return(m=-1<m.indexOf(" > eval")?m.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):m).indexOf("@")===-1&&m.indexOf(":")===-1?{functionName:m}:{functionName:(b=m.match(y=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&b[1]?b[1]:void 0,fileName:(b=this.extractLocation(m.replace(y,"")))[0],lineNumber:b[1],columnNumber:b[2],source:m}},this)},parseOpera:function(S){return!S.stacktrace||-1<S.message.indexOf(`
`)&&S.message.split(`
`).length>S.stacktrace.split(`
`).length?this.parseOpera9(S):S.stack?this.parseOpera11(S):this.parseOpera10(S)},parseOpera9:function(S){for(var m=/Line (\d+).*script (?:in )?(\S+)/i,y=S.message.split(`
`),b=[],g=2,w=y.length;g<w;g+=2){var _=m.exec(y[g]);_&&b.push({fileName:_[2],lineNumber:_[1],source:y[g]})}return b},parseOpera10:function(S){for(var m=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,y=S.stacktrace.split(`
`),b=[],g=0,w=y.length;g<w;g+=2){var _=m.exec(y[g]);_&&b.push({functionName:_[3]||void 0,fileName:_[2],lineNumber:_[1],source:y[g]})}return b},parseOpera11:function(S){return S.stack.split(`
`).filter(function(m){return!!m.match(l)&&!m.match(/^Error created at/)},this).map(function(m){var y,b=m.split("@"),g=this.extractLocation(b.pop());return{functionName:(b=b.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(y=b.match(/\(([^)]*)\)/)?b.replace(/^[^(]+\(([^)]*)\)$/,"$1"):y)===void 0||y==="[arguments not available]"?void 0:y.split(","),fileName:g[0],lineNumber:g[1],columnNumber:g[2],source:m}},this)}}}r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../main"))&&r.__esModule?r:{default:r}).default._getErrorStackParser=function(){return new u},r=r.default,f.default=r},{"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196}],268:[function(r,h,f){function u(x){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(l=r("../main"))&&l.__esModule?l:{default:l};function d(x){return(d=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(S){return u(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":u(S)})(x)}(function(x){if(!(x&&x.__esModule||x===null||d(x)!=="object"&&typeof x!="function")){var S=function(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,w)}();if(S&&S.has(x))return S.get(x);var m,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in x){var g;Object.prototype.hasOwnProperty.call(x,m)&&((g=b?Object.getOwnPropertyDescriptor(x,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=x[m])}y.default=x,S&&S.set(x,y)}})(r("../constants")),r("../internationalization"),l.default._validateParameters=l.default._clearValidateParamsCache=function(){},r=l.default,f.default=r},{"../../../docs/parameterData.json":void 0,"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.map":168,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],269:[function(r,h,f){function u(x){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(x)}function l(x){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(S){return u(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":u(S)})(x)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var S=function(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,w)}();if(S&&S.has(x))return S.get(x);var m,y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in x){var g;Object.prototype.hasOwnProperty.call(x,m)&&((g=b?Object.getOwnPropertyDescriptor(x,m):null)&&(g.get||g.set)?Object.defineProperty(y,m,g):y[m]=x[m])}return y.default=x,S&&S.set(x,y),y}(r("./constants"));f.default={modeAdjust:function(x,S,m,y,b){return b===d.CORNER?{x,y:S,w:m,h:y}:b===d.CORNERS?{x,y:S,w:m-x,h:y-S}:b===d.RADIUS?{x:x-m,y:S-y,w:2*m,h:2*y}:b===d.CENTER?{x:x-.5*m,y:S-.5*y,w:m,h:y}:void 0}}},{"./constants":262,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],270:[function(r,h,f){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var u=(l=r("../core/main"))&&l.__esModule?l:{default:l};r("./internationalization");var l=Promise.resolve();Promise.all([new Promise(function(d,x){document.readyState==="complete"?d():window.addEventListener("load",d,!1)}),l]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!u.default.instance&&new u.default})},{"../core/main":273,"./internationalization":271,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/web.dom-collections.iterator":236}],271:[function(r,h,f){r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.setTranslatorLanguage=f.currentTranslatorLanguage=f.availableTranslatorLanguages=f.initialize=f.translator=void 0;var u,l=x(r("i18next")),d=x(r("i18next-browser-languagedetector"));function x(y){return y&&y.__esModule?y:{default:y}}function S(y,b){for(var g=0;g<b.length;g++){var w=b[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}var m=function(){function y(w,_){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this.init(w,_)}var b,g;return b=y,(g=[{key:"fetchWithTimeout",value:function(w,_){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(w,_),new Promise(function(k,E){return setTimeout(function(){return E(new Error("timeout"))},C)})])}},{key:"init",value:function(w){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=w,this.options=_}},{key:"read",value:function(w,_,C){var k=this.options.loadPath;w===this.options.fallback?C(null,u[w][_]):(void 0).includes(w)?(k=this.services.interpolator.interpolate(k,{lng:w,ns:_}),this.loadUrl(k,C)):C("Not found",!1)}},{key:"loadUrl",value:function(w,_){this.fetchWithTimeout(w).then(function(C){if(C.ok)return C.json();throw new Error("failed loading ".concat(w))},function(){throw new Error("failed loading ".concat(w))}).then(function(C){return _(null,C)}).catch(_)}}])&&S(b.prototype,g),y}();m.type="backend",f.translator=function(y,b){console.debug("p5.js translator called before translations were loaded"),l.default.t(y,b)},f.initialize=function(){return l.default.use(d.default).use(m).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:u}).then(function(y){f.translator=y},function(y){return console.debug("Translations failed to load (".concat(y,")"))})},f.availableTranslatorLanguages=function(){return l.default.languages},f.currentTranslatorLanguage=function(y){return l.default.language},f.setTranslatorLanguage=function(y){return l.default.changeLanguage(y||void 0,function(b){return console.debug("Translations failed to load (".concat(b,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236,i18next:3,"i18next-browser-languagedetector":3}],272:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("./main"))&&r.__esModule?r:{default:r}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r=r.default,f.default=r},{"./main":273}],273:[function(r,h,f){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-names"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,r("./shim");var d=function(y){if(y&&y.__esModule)return y;if(y===null||l(y)!=="object"&&typeof y!="function")return{default:y};var b=function(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,k)}();if(b&&b.has(y))return b.get(y);var g,w={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in y){var C;Object.prototype.hasOwnProperty.call(y,g)&&((C=_?Object.getOwnPropertyDescriptor(y,g):null)&&(C.get||C.set)?Object.defineProperty(w,g,C):w[g]=y[g])}return w.default=y,b&&b.set(y,w),w}(r("./constants"));function x(y,b){for(var g=0;g<b.length;g++){var w=b[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(y,w.key,w)}}var S,m=function(){function y(w,_,C){var k=this;if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=_,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},_=Object.getOwnPropertyNames(y.prototype._registeredMethods);var E=!0,j=!1,A=void 0;try{for(var O,N=_[Symbol.iterator]();!(E=(O=N.next()).done);E=!0){var D=O.value;this._registeredMethods[D]=y.prototype._registeredMethods[D].slice()}}catch(Y){j=!0,A=Y}finally{try{E||N.return==null||N.return()}finally{if(j)throw A}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){k._userNode&&typeof k._userNode=="string"&&(k._userNode=document.getElementById(k._userNode));var Y=k._isGlobal?window:k;if(Y.preload){var Z,J=document.getElementById(k._loadingScreenId),ne=(J||((J=document.createElement("div")).innerHTML="Loading...",J.style.position="absolute",J.id=k._loadingScreenId,(k._userNode||document.body).appendChild(J)),k._preloadMethods);for(Z in ne){ne[Z]=ne[Z]||y;var se=ne[Z];se!==y.prototype&&se!==y||(k._isGlobal&&(window[Z]=k._wrapPreload(k,Z)),se=k),k._registeredPreloadMethods[Z]=se[Z],se[Z]=k._wrapPreload(se,Z)}Y.preload(),k._runIfPreloadsAreDone()}else k._setup(),k._recording||k._draw()},this._runIfPreloadsAreDone=function(){var Y,Z=this._isGlobal?window:this;Z._preloadCount===0&&((Y=document.getElementById(Z._loadingScreenId))&&Y.parentNode.removeChild(Y),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),Z._setup(),this._recording||Z._draw()))},this._decrementPreload=function(){var Y=this._isGlobal?window:this;Y._preloadDone||typeof Y.preload!="function"||(Y._setProperty("_preloadCount",Y._preloadCount-1),Y._runIfPreloadsAreDone())},this._wrapPreload=function(Y,Z){var J=this;return function(){J._incrementPreload();for(var ne=arguments.length,se=new Array(ne),ie=0;ie<ne;ie++)se[ie]=arguments[ie];return J._registeredPreloadMethods[Z].apply(Y,se)}},this._incrementPreload=function(){var Y=this._isGlobal?window:this;Y._preloadDone||Y._setProperty("_preloadCount",Y._preloadCount+1)},this._setup=function(){k.createCanvas(k._defaultCanvasSize.width,k._defaultCanvasSize.height,"p2d");var Y=k._isGlobal?window:k;if(typeof Y.preload=="function")for(var Z in k._preloadMethods)Y[Z]=k._preloadMethods[Z][Z],Y[Z]&&k&&(Y[Z]=Y[Z].bind(k));k._millisStart=window.performance.now(),Y._preloadDone=!0,typeof Y.setup=="function"&&Y.setup();var J=document.getElementsByTagName("canvas"),ne=!0,se=!1,ie=void 0;try{for(var X,Q=J[Symbol.iterator]();!(ne=(X=Q.next()).done);ne=!0){var re=X.value;re.dataset.hidden==="true"&&(re.style.visibility="",delete re.dataset.hidden)}}catch(ce){se=!0,ie=ce}finally{try{ne||Q.return==null||Q.return()}finally{if(se)throw ie}}k._lastTargetFrameTime=window.performance.now(),k._lastRealFrameTime=window.performance.now(),k._setupDone=!0,(k._accessibleOutputs.grid||k._accessibleOutputs.text)&&k._updateAccsOutput()},this._draw=function(){var Y=window.performance.now(),Z=Y-k._lastTargetFrameTime,J=1e3/k._targetFrameRate;(!k._loop||J-5<=Z)&&(k.deltaTime=Y-k._lastRealFrameTime,k._setProperty("deltaTime",k.deltaTime),k._frameRate=1e3/k.deltaTime,k.redraw(),k._lastTargetFrameTime=Math.max(k._lastTargetFrameTime+J,Y),k._lastRealFrameTime=Y,k._updateMouseCoords!==void 0&&(k._updateMouseCoords(),k._setProperty("movedX",0),k._setProperty("movedY",0))),k._loop&&(k._requestAnimId=window.requestAnimationFrame(k._draw))},this._setProperty=function(Y,Z){k[Y]=Z,k._isGlobal&&(window[Y]=Z)},this.remove=function(){if((J=document.getElementById(k._loadingScreenId))&&(J.parentNode.removeChild(J),k._incrementPreload()),k._curElement){for(var Y in k._loop=!1,k._requestAnimId&&window.cancelAnimationFrame(k._requestAnimId),k._events)window.removeEventListener(Y,k._events[Y]);var Z=!0,J=!1,ne=void 0;try{for(var se,ie=k._elements[Symbol.iterator]();!(Z=(se=ie.next()).done);Z=!0){var X,Q=se.value;for(X in Q.elt&&Q.elt.parentNode&&Q.elt.parentNode.removeChild(Q.elt),Q._events)Q.elt.removeEventListener(X,Q._events[X])}}catch(fe){J=!0,ne=fe}finally{try{Z||ie.return==null||ie.return()}finally{if(J)throw ne}}var re=k;k._registeredMethods.remove.forEach(function(fe){fe!==void 0&&fe.call(re)})}if(k._isGlobal){for(var ce in y.prototype)try{delete window[ce]}catch{window[ce]=void 0}for(var he in k)if(k.hasOwnProperty(he))try{delete window[he]}catch{window[he]=void 0}y.instance=null}},this._registeredMethods.init.forEach(function(Y){Y!==void 0&&Y.call(this)},this),this._setupPromisePreloads();var z,$,B=this._createFriendlyGlobalFunctionBinder();if(w)w(this),y._checkForUserDefinedFunctions(this);else{for(var F in this._isGlobal=!0,y.instance=this,y.prototype)typeof y.prototype[F]=="function"?(z=F.substring(2),this._events.hasOwnProperty(z)||(Math.hasOwnProperty(F)&&Math[F]===y.prototype[F]?B(F,y.prototype[F]):B(F,y.prototype[F].bind(this)))):B(F,y.prototype[F]);for(var G in this)this.hasOwnProperty(G)&&B(G,this[G])}for($ in this._events){var W=this["_on".concat($)];W&&(W=W.bind(this),window.addEventListener($,W,{passive:!1}),this._events[$]=W)}function L(){k._setProperty("focused",!0)}function V(){k._setProperty("focused",!1)}window.addEventListener("focus",L),window.addEventListener("blur",V),this.registerMethod("remove",function(){window.removeEventListener("focus",L),window.removeEventListener("blur",V)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var b,g;return b=y,(g=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=d.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(w,_){y.prototype._preloadMethods.hasOwnProperty(w)||(y.prototype._preloadMethods[w]=_)}},{key:"registerMethod",value:function(w,_){var C=this||y.prototype;C._registeredMethods.hasOwnProperty(w)||(C._registeredMethods[w]=[]),C._registeredMethods[w].push(_)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},_=w.globalObject||window;return w.log||console.log.bind(console),function(C,k){y.disableFriendlyErrors,_[C]=k}}}])&&x(b.prototype,g),y}();for(S in m.instance=null,m.disableFriendlyErrors=!1,d)m.prototype[S]=d[S];m.VERSION=d.VERSION,m.prototype._preloadMethods={loadJSON:m.prototype,loadImage:m.prototype,loadStrings:m.prototype,loadXML:m.prototype,loadBytes:m.prototype,loadTable:m.prototype,loadFont:m.prototype,loadModel:m.prototype,loadShader:m.prototype},m.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},m.prototype._registeredPreloadMethods={},f.default=m},{"./constants":262,"./shim":284,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],274:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("./main"))&&r.__esModule?r:{default:r};function l(d,x){for(var S=0;S<x.length;S++){var m=x[S];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}u.default.Element=function(){function d(y,b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.elt=y,this._pInst=this._pixelsState=b,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var x,S,m;return x=d,m=[{key:"_adjustListener",value:function(y,b,g){return b===!1?u.default.Element._detachListener(y,g):u.default.Element._attachListener(y,b,g),this}},{key:"_attachListener",value:function(y,b,g){g._events[y]&&u.default.Element._detachListener(y,g),b=b.bind(g),g.elt.addEventListener(y,b,!1),g._events[y]=b}},{key:"_detachListener",value:function(y,b){var g=b._events[y];b.elt.removeEventListener(y,g,!1),b._events[y]=null}}],(S=[{key:"parent",value:function(y){return y===void 0?this.elt.parentNode:(typeof y=="string"?(y[0]==="#"&&(y=y.substring(1)),y=document.getElementById(y)):y instanceof u.default.Element&&(y=y.elt),y.appendChild(this.elt),this)}},{key:"id",value:function(y){return y===void 0?this.elt.id:(this.elt.id=y,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(y){return y===void 0?this.elt.className:(this.elt.className=y,this)}},{key:"mousePressed",value:function(y){return u.default.Element._adjustListener("mousedown",function(b){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(b),y.call(this,b)},this),this}},{key:"doubleClicked",value:function(y){return u.default.Element._adjustListener("dblclick",y,this),this}},{key:"mouseWheel",value:function(y){return u.default.Element._adjustListener("wheel",y,this),this}},{key:"mouseReleased",value:function(y){return u.default.Element._adjustListener("mouseup",y,this),this}},{key:"mouseClicked",value:function(y){return u.default.Element._adjustListener("click",y,this),this}},{key:"mouseMoved",value:function(y){return u.default.Element._adjustListener("mousemove",y,this),this}},{key:"mouseOver",value:function(y){return u.default.Element._adjustListener("mouseover",y,this),this}},{key:"mouseOut",value:function(y){return u.default.Element._adjustListener("mouseout",y,this),this}},{key:"touchStarted",value:function(y){return u.default.Element._adjustListener("touchstart",y,this),this}},{key:"touchMoved",value:function(y){return u.default.Element._adjustListener("touchmove",y,this),this}},{key:"touchEnded",value:function(y){return u.default.Element._adjustListener("touchend",y,this),this}},{key:"dragOver",value:function(y){return u.default.Element._adjustListener("dragover",y,this),this}},{key:"dragLeave",value:function(y){return u.default.Element._adjustListener("dragleave",y,this),this}},{key:"_setProperty",value:function(y,b){this[y]=b}}])&&l(x.prototype,S),m&&l(x,m),d}(),r=u.default.Element,f.default=r},{"./main":273}],275:[function(r,h,f){function u(C){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(C)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(_=r("./main"))&&_.__esModule?_:{default:_},d=function(C){if(C&&C.__esModule)return C;if(C===null||x(C)!=="object"&&typeof C!="function")return{default:C};var k=function(){var N;return typeof WeakMap!="function"?null:(N=new WeakMap,N)}();if(k&&k.has(C))return k.get(C);var E,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in C){var O;Object.prototype.hasOwnProperty.call(C,E)&&((O=A?Object.getOwnPropertyDescriptor(C,E):null)&&(O.get||O.set)?Object.defineProperty(j,E,O):j[E]=C[E])}return j.default=C,k&&k.set(C,j),j}(r("./constants"));function x(C){return(x=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(k){return u(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":u(k)})(C)}function S(C,k){for(var E=0;E<k.length;E++){var j=k[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}function m(C,k){return(m=Object.setPrototypeOf||function(E,j){return E.__proto__=j,E})(C,k)}function y(C){return function(){var k,E=w(C);return b(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=w(this).constructor,Reflect.construct(E,arguments,k)):E.apply(this,arguments))}}function b(C,k){return!k||x(k)!=="object"&&typeof k!="function"?g(C):k}function g(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function w(C){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(C)}l.default.Graphics=function(C){var k=j;if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(C&&C.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),C&&m(k,C);var E=y(j);function j(A,O,N,D,z){var $;if(!(this instanceof j))throw new TypeError("Cannot call a class as a function");F=z||document.createElement("canvas"),($=E.call(this,F,D)).canvas=F;var B,F=N||d.P2D;N=D._userNode||document.body;for(B in z||N.appendChild($.canvas),l.default.prototype)$[B]||(typeof l.default.prototype[B]=="function"?$[B]=l.default.prototype[B].bind(g($)):$[B]=l.default.prototype[B]);return l.default.prototype._initializeInstanceVariables.apply(g($)),$.width=A,$.height=O,$._pixelDensity=D._pixelDensity,F===d.WEBGL?$._renderer=new l.default.RendererGL($.canvas,g($),!1):$._renderer=new l.default.Renderer2D($.canvas,g($),!1),D._elements.push(g($)),Object.defineProperty(g($),"deltaTime",{get:function(){return this._pInst.deltaTime}}),$._renderer.resize(A,O),$._renderer._applyDefaults(),b($,g($))}return k=j,(C=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var A,O=this._pInst._elements.indexOf(this);for(A in O!==-1&&this._pInst._elements.splice(O,1),this._events)this.elt.removeEventListener(A,this._events[A])}},{key:"createFramebuffer",value:function(A){return new l.default.Framebuffer(this,A)}}])&&S(k.prototype,C),j}(l.default.Element);var _=l.default.Graphics;f.default=_},{"./constants":262,"./main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],276:[function(r,h,f){function u(C){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(C)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(w=r("./main"))&&w.__esModule?w:{default:w},d=function(C){if(C&&C.__esModule)return C;if(C===null||x(C)!=="object"&&typeof C!="function")return{default:C};var k=function(){var N;return typeof WeakMap!="function"?null:(N=new WeakMap,N)}();if(k&&k.has(C))return k.get(C);var E,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in C){var O;Object.prototype.hasOwnProperty.call(C,E)&&((O=A?Object.getOwnPropertyDescriptor(C,E):null)&&(O.get||O.set)?Object.defineProperty(j,E,O):j[E]=C[E])}return j.default=C,k&&k.set(C,j),j}(r("../core/constants"));function x(C){return(x=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(k){return u(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":u(k)})(C)}function S(C,k){for(var E=0;E<k.length;E++){var j=k[E];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(C,j.key,j)}}function m(C,k){return(m=Object.setPrototypeOf||function(E,j){return E.__proto__=j,E})(C,k)}function y(C){return function(){var k,E,j=g(C);return k=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(k=g(this).constructor,Reflect.construct(j,arguments,k)):j.apply(this,arguments),j=this,!(E=k)||x(E)!=="object"&&typeof E!="function"?b(j):E}}function b(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function g(C){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(C)}var w=function(C){var k=j;if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(C&&C.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),C&&m(k,C);var E=y(j);function j(A,O,N){var D;if(this instanceof j)return(D=E.call(this,A,O)).canvas=A,D._pixelsState=O,N?(D._isMainCanvas=!0,D._pInst._setProperty("_curElement",b(D)),D._pInst._setProperty("canvas",D.canvas),D._pInst._setProperty("width",D.width),D._pInst._setProperty("height",D.height)):(D.canvas.style.display="none",D._styles=[]),D._textSize=12,D._textLeading=15,D._textFont="sans-serif",D._textStyle=d.NORMAL,D._textAscent=null,D._textDescent=null,D._textAlign=d.LEFT,D._textBaseline=d.BASELINE,D._textWrap=d.WORD,D._rectMode=d.CORNER,D._ellipseMode=d.CENTER,D._curveTightness=0,D._imageMode=d.CORNER,D._tint=null,D._doStroke=!0,D._doFill=!0,D._strokeSet=!1,D._fillSet=!1,D._leadingSet=!1,D;throw new TypeError("Cannot call a class as a function")}return k=j,(C=[{key:"push",value:function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(A){A.properties&&Object.assign(this,A.properties)}},{key:"resize",value:function(A,O){this.width=A,this.height=O,this.elt.width=A*this._pInst._pixelDensity,this.elt.height=O*this._pInst._pixelDensity,this.elt.style.width="".concat(A,"px"),this.elt.style.height="".concat(O,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(A,O,N,D){var z=this._pixelsState,$=z._pixelDensity,B=this.canvas;if(A===void 0&&O===void 0)A=O=0,N=z.width,D=z.height;else if(A*=$,O*=$,N===void 0&&D===void 0)return A<0||O<0||A>=B.width||O>=B.height?[0,0,0,0]:this._getPixel(A,O);return(z=new l.default.Image(N,D)).canvas.getContext("2d").drawImage(B,A,O,N*$,D*$,0,0,N,D),z}},{key:"textLeading",value:function(A){return typeof A=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",A),this._pInst):this._textLeading}},{key:"textStyle",value:function(A){return A?(A!==d.NORMAL&&A!==d.ITALIC&&A!==d.BOLD&&A!==d.BOLDITALIC||this._setProperty("_textStyle",A),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(A,O){return A!==void 0?(this._setProperty("_textAlign",A),O!==void 0&&this._setProperty("_textBaseline",O),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(A){return this._setProperty("_textWrap",A),this._textWrap}},{key:"text",value:function(A,O,N,D,z){var $,B,F,G,W=this._pInst,L=this._textWrap,V=Number.MAX_VALUE,Y=N;if((this._doFill||this._doStroke)&&A!==void 0){if($=(A=(A=typeof A!="string"?A.toString():A).replace(/(\t)/g,"  ")).split(`
`),D!==void 0){switch(this._rectMode===d.CENTER&&(O-=D/2),this._textAlign){case d.CENTER:O+=D/2;break;case d.RIGHT:O+=D}if(z!==void 0){this._rectMode===d.CENTER&&(N-=z/2,Y-=z/2),A=N;var Z=W.textAscent();switch(this._textBaseline){case d.BOTTOM:G=N+z,N=Math.max(G,N),Y+=Z;break;case d.CENTER:G=N+z/2,N=Math.max(G,N),Y+=Z/2}V=N+z-Z,this._textBaseline===d.CENTER&&(V=A+z-Z/2)}else this._textBaseline!==d.BOTTOM&&this._textBaseline!==d.CENTER||(Y=N-(A=W.textSize()*this._textLeading)/2,V=N+A/2);if(L===d.WORD){for(var J=[],ne=0;ne<$.length;ne++){for(var se="",ie=$[ne].split(" "),X=0;X<ie.length;X++)B="".concat(se+ie[X])+" ",se=D<(F=this.textWidth(B))&&0<se.length?(J.push(se),"".concat(ie[X])+" "):B;J.push(se)}var Q=0;this._textBaseline===d.CENTER?Q=(J.length-1)*W.textLeading()/2:this._textBaseline===d.BOTTOM&&(Q=(J.length-1)*W.textLeading());for(var re=0;re<$.length;re++){se="",ie=$[re].split(" ");for(var ce=0;ce<ie.length;ce++)B="".concat(se+ie[ce])+" ",D<(F=this.textWidth(B))&&0<se.length?(this._renderText(W,se.trim(),O,N-Q,V,Y),se="".concat(ie[ce])+" ",N+=W.textLeading()):se=B;this._renderText(W,se.trim(),O,N-Q,V,Y),N+=W.textLeading()}}else{for(var he=[],fe=0;fe<$.length;fe++)for(var oe=$[fe].split(se=""),me=0;me<oe.length;me++)B="".concat(se+oe[me]),(F=this.textWidth(B))<=D?se+=oe[me]:D<F&&0<se.length&&(he.push(se),se="".concat(oe[me]));he.push(se);var we=0;this._textBaseline===d.CENTER?we=(he.length-1)*W.textLeading()/2:this._textBaseline===d.BOTTOM&&(we=(he.length-1)*W.textLeading());for(var ke=0;ke<$.length;ke++){oe=$[ke].split(se="");for(var ve=0;ve<oe.length;ve++)B="".concat(se+oe[ve]),(F=this.textWidth(B))<=D?se+=oe[ve]:D<F&&0<se.length&&(this._renderText(W,se.trim(),O,N-we,V,Y),N+=W.textLeading(),se="".concat(oe[ve]))}this._renderText(W,se.trim(),O,N-we,V,Y),N+=W.textLeading()}}else{var _e=0;this._textBaseline===d.CENTER?_e=($.length-1)*W.textLeading()/2:this._textBaseline===d.BOTTOM&&(_e=($.length-1)*W.textLeading());for(var Me=0;Me<$.length;Me++)this._renderText(W,$[Me],O,N-_e,V,Y-_e),N+=W.textLeading()}return W}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var A=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return x(A)==="object"&&A.font&&A.font.supported}},{key:"_updateTextMetrics",value:function(){var A,O,N,D,z,$;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((A=document.createElement("span")).style.fontFamily=this._textFont,A.style.fontSize="".concat(this._textSize,"px"),A.innerHTML="ABCjgq|",($=document.createElement("div")).style.display="inline-block",$.style.width="1px",$.style.height="0px",(O=document.createElement("div")).appendChild(A),O.appendChild($),O.style.height="0px",O.style.overflow="hidden",document.body.appendChild(O),$.style.verticalAlign="baseline",D=_($),z=_(A),N=D[1]-z[1],$.style.verticalAlign="bottom",D=_($),z=_(A),$=D[1]-z[1]-N,document.body.removeChild(O),this._setProperty("_textAscent",N),this._setProperty("_textDescent",$)),this}}])&&S(k.prototype,C),j}(l.default.Element);function _(C){var k=0,E=0;if(C.offsetParent)for(;k+=C.offsetLeft,E+=C.offsetTop,C=C.offsetParent;);else k+=C.offsetLeft,E+=C.offsetTop;return[k,E]}w.prototype.textSize=function(C){return typeof C=="number"?(this._setProperty("_textSize",C),this._leadingSet||this._setProperty("_textLeading",C*d._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},l.default.Renderer=w,r=l.default.Renderer,f.default=r},{"../core/constants":262,"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],277:[function(r,h,f){function u(_){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(_)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.reflect.get"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.reflect.get"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(w=r("./main"))&&w.__esModule?w:{default:w},d=function(_){if(_&&_.__esModule)return _;if(_===null||x(_)!=="object"&&typeof _!="function")return{default:_};var C=function(){var O;return typeof WeakMap!="function"?null:(O=new WeakMap,O)}();if(C&&C.has(_))return C.get(_);var k,E={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in _){var A;Object.prototype.hasOwnProperty.call(_,k)&&((A=j?Object.getOwnPropertyDescriptor(_,k):null)&&(A.get||A.set)?Object.defineProperty(E,k,A):E[k]=_[k])}return E.default=_,C&&C.set(_,E),E}(r("./constants"));function x(_){return(x=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(C){return u(C)}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":u(C)})(_)}function S(_,C){for(var k=0;k<C.length;k++){var E=C[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}function m(_,C,k){return(m=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(E,j,A){if(E=function(O,N){for(;!Object.prototype.hasOwnProperty.call(O,N)&&(O=b(O))!==null;);return O}(E,j))return(E=Object.getOwnPropertyDescriptor(E,j)).get?E.get.call(A):E.value})(_,C,k||_)}function y(_,C){return(y=Object.setPrototypeOf||function(k,E){return k.__proto__=E,k})(_,C)}function b(_){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)})(_)}r("./p5.Renderer");var g="rgba(0,0,0,0)",w=function(_){var C=E;if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(_&&_.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),_&&y(C,_);var k=function(j){return function(){var A,O=b(j);if(A=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(A=b(this).constructor,Reflect.construct(O,arguments,A)):O.apply(this,arguments),O=this,!A||x(A)!=="object"&&typeof A!="function"){if(O!==void 0)return O;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return A}}(E);function E(j,A,O){if(this instanceof E)return(j=k.call(this,j,A,O)).drawingContext=j.canvas.getContext("2d"),j._pInst._setProperty("drawingContext",j.drawingContext),j;throw new TypeError("Cannot call a class as a function")}return C=E,(_=[{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=d.BLEND,this._setFill(d._DEFAULT_FILL),this._setStroke(d._DEFAULT_STROKE),this.drawingContext.lineCap=d.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(j,A){m(b(E.prototype),"resize",this).call(this,j,A),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var j,A;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(j=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(j,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(j=this._getFill(),A=(A=this._pInst).color.apply(A,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(A.levels),A=A.toString(),this._setFill(A),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(j),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var j=(j=this._pInst).color.apply(j,arguments);this._setFill(j.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",j.levels)}},{key:"stroke",value:function(){var j=(j=this._pInst).color.apply(j,arguments);this._setStroke(j.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",j.levels)}},{key:"erase",value:function(j,A){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,j=this._pInst.color(255,j).toString(),this.drawingContext.fillStyle=j,this._cachedStrokeStyle=this.drawingContext.strokeStyle,j=this._pInst.color(255,A).toString(),this.drawingContext.strokeStyle=j,A=this._cachedBlendMode,this.blendMode(d.REMOVE),this._cachedBlendMode=A,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"image",value:function(j,A,O,N,D,z,$,B,F){j.gifProperties&&j._animateGif(this._pInst);try{l.default.MediaElement&&j instanceof l.default.MediaElement&&j._ensureCanvas();var G=(G=this._tint&&j.canvas?this._getTintedImageCanvas(j):G)||j.canvas||j.elt,W=1;j.width&&0<j.width&&(W=G.width/j.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(G,W*A,W*O,W*N,W*D,z,$,B,F),this._isErasing&&this._pInst.erase()}catch(L){if(L.name!=="NS_ERROR_NOT_AVAILABLE")throw L}}},{key:"_getTintedImageCanvas",value:function(j){if(!j.canvas)return j;j.tintCanvas||(j.tintCanvas=document.createElement("canvas")),j.tintCanvas.width!==j.canvas.width&&(j.tintCanvas.width=j.canvas.width),j.tintCanvas.height!==j.canvas.height&&(j.tintCanvas.height=j.canvas.height);var A=j.tintCanvas.getContext("2d");return A.save(),A.clearRect(0,0,j.canvas.width,j.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(A.drawImage(j.canvas,0,0),A.globalCompositeOperation="luminosity",A.drawImage(j.canvas,0,0),A.globalCompositeOperation="color",A.drawImage(j.canvas,0,0),A.globalCompositeOperation="multiply",A.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),A.fillRect(0,0,j.canvas.width,j.canvas.height),A.globalCompositeOperation="destination-in"),A.globalAlpha=this._tint[3]/255,A.drawImage(j.canvas,0,0),A.restore(),j.tintCanvas}},{key:"blendMode",value:function(j){if(j===d.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(j!==d.BLEND&&j!==d.REMOVE&&j!==d.DARKEST&&j!==d.LIGHTEST&&j!==d.DIFFERENCE&&j!==d.MULTIPLY&&j!==d.EXCLUSION&&j!==d.SCREEN&&j!==d.REPLACE&&j!==d.OVERLAY&&j!==d.HARD_LIGHT&&j!==d.SOFT_LIGHT&&j!==d.DODGE&&j!==d.BURN&&j!==d.ADD)throw new Error("Mode ".concat(j," not recognized."));this._cachedBlendMode=j,this.drawingContext.globalCompositeOperation=j}}},{key:"blend",value:function(){for(var j=this.drawingContext.globalCompositeOperation,A=arguments.length,O=new Array(A),N=0;N<A;N++)O[N]=arguments[N];var D=O[O.length-1],z=Array.prototype.slice.call(O,0,O.length-1);this.drawingContext.globalCompositeOperation=D,l.default.prototype.copy.apply(this,z),this.drawingContext.globalCompositeOperation=j}},{key:"_getPixel",value:function(j,A){return[(j=this.drawingContext.getImageData(j,A,1,1).data)[0],j[1],j[2],j[3]]}},{key:"loadPixels",value:function(){var j=this._pixelsState,A=j._pixelDensity,O=this.width*A;A=this.height*A,O=this.drawingContext.getImageData(0,0,O,A),j._setProperty("imageData",O),j._setProperty("pixels",O.data)}},{key:"set",value:function(j,A,O){j=Math.floor(j),A=Math.floor(A);var N=this._pixelsState;if(O instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(N._pixelDensity,N._pixelDensity),this.drawingContext.clearRect(j,A,O.width,O.height),this.drawingContext.drawImage(O.canvas,j,A),this.drawingContext.restore();else{var D=0,z=0,$=0,B=0,F=4*(A*N._pixelDensity*(this.width*N._pixelDensity)+j*N._pixelDensity);if(N.imageData||N.loadPixels.call(N),typeof O=="number")F<N.pixels.length&&($=z=D=O,B=255);else if(O instanceof Array){if(O.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");F<N.pixels.length&&(D=O[0],z=O[1],$=O[2],B=O[3])}else O instanceof l.default.Color&&F<N.pixels.length&&(D=O.levels[0],z=O.levels[1],$=O.levels[2],B=O.levels[3]);for(var G=0;G<N._pixelDensity;G++)for(var W=0;W<N._pixelDensity;W++)F=4*((A*N._pixelDensity+W)*this.width*N._pixelDensity+(j*N._pixelDensity+G)),N.pixels[F]=D,N.pixels[F+1]=z,N.pixels[F+2]=$,N.pixels[F+3]=B}}},{key:"updatePixels",value:function(j,A,O,N){var D=this._pixelsState,z=D._pixelDensity;j===void 0&&A===void 0&&O===void 0&&N===void 0&&(A=j=0,O=this.width,N=this.height),j*=z,A*=z,O*=z,N*=z,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=D.imageData),this.drawingContext.putImageData(D.imageData,j,A,0,0,O,N)}},{key:"_acuteArcToBezier",value:function(j,A){var O=A/2,N=Math.cos(O),D=Math.sin(O),z=1/Math.tan(O),$=(O=j+O,Math.cos(O)),B=(O=Math.sin(O),(4-N)/3);return D+=(N-B)*z,{ax:Math.cos(j).toFixed(7),ay:Math.sin(j).toFixed(7),bx:(B*$+D*O).toFixed(7),by:(B*O-D*$).toFixed(7),cx:(B*$-D*O).toFixed(7),cy:(B*O+D*$).toFixed(7),dx:Math.cos(j+A).toFixed(7),dy:Math.sin(j+A).toFixed(7)}}},{key:"arc",value:function(j,A,O,N,D,z,$){var B,F=this.drawingContext,G=O/2,W=N/2,L=[];for(j+=G,A+=W;1e-5<=z-D;)B=Math.min(z-D,d.HALF_PI),L.push(this._acuteArcToBezier(D,B)),D+=B;return this._doFill&&(F.beginPath(),L.forEach(function(V,Y){Y===0&&F.moveTo(j+V.ax*G,A+V.ay*W),F.bezierCurveTo(j+V.bx*G,A+V.by*W,j+V.cx*G,A+V.cy*W,j+V.dx*G,A+V.dy*W)}),$!==d.PIE&&$!=null||F.lineTo(j,A),F.closePath(),F.fill()),this._doStroke&&(F.beginPath(),L.forEach(function(V,Y){Y===0&&F.moveTo(j+V.ax*G,A+V.ay*W),F.bezierCurveTo(j+V.bx*G,A+V.by*W,j+V.cx*G,A+V.cy*W,j+V.dx*G,A+V.dy*W)}),$===d.PIE?(F.lineTo(j,A),F.closePath()):$===d.CHORD&&F.closePath(),F.stroke()),this}},{key:"ellipse",value:function(j){var A=this.drawingContext,O=this._doFill,N=this._doStroke,D=parseFloat(j[0]),z=parseFloat(j[1]),$=parseFloat(j[2]);if(j=parseFloat(j[3]),O&&!N){if(this._getFill()===g)return this}else if(!O&&N&&this._getStroke()===g)return this;var B=$/2*.5522847498,F=j/2*.5522847498,G=D+$,W=z+j;$=D+$/2,j=z+j/2,A.beginPath(),A.moveTo(D,j),A.bezierCurveTo(D,j-F,$-B,z,$,z),A.bezierCurveTo($+B,z,G,j-F,G,j),A.bezierCurveTo(G,j+F,$+B,W,$,W),A.bezierCurveTo($-B,W,D,j+F,D,j),O&&A.fill(),N&&A.stroke()}},{key:"line",value:function(j,A,O,N){var D=this.drawingContext;return this._doStroke&&this._getStroke()!==g&&(D.beginPath(),D.moveTo(j,A),D.lineTo(O,N),D.stroke()),this}},{key:"point",value:function(j,A){var O,N,D=this.drawingContext;return this._doStroke&&this._getStroke()!==g?(O=this._getStroke(),N=this._getFill(),this._setFill(O),D.beginPath(),D.arc(j,A,D.lineWidth/2,0,d.TWO_PI,!1),D.fill(),void this._setFill(N)):this}},{key:"quad",value:function(j,A,O,N,D,z,$,B){var F=this.drawingContext,G=this._doFill,W=this._doStroke;if(G&&!W){if(this._getFill()===g)return this}else if(!G&&W&&this._getStroke()===g)return this;return F.beginPath(),F.moveTo(j,A),F.lineTo(O,N),F.lineTo(D,z),F.lineTo($,B),F.closePath(),G&&F.fill(),W&&F.stroke(),this}},{key:"rect",value:function(j){var A,O,N=j[0],D=j[1],z=j[2],$=j[3],B=j[4],F=j[5],G=j[6],W=(j=j[7],this.drawingContext),L=this._doFill,V=this._doStroke;if(L&&!V){if(this._getFill()===g)return this}else if(!L&&V&&this._getStroke()===g)return this;return W.beginPath(),B===void 0?W.rect(N,D,z,$):(F===void 0&&(F=B),G===void 0&&(G=F),j===void 0&&(j=G),V=(L=Math.abs(z))/2,O=(A=Math.abs($))/2,A<2*(B=L<2*B?V:B)&&(B=O),A<2*(F=L<2*F?V:F)&&(F=O),A<2*(G=L<2*G?V:G)&&(G=O),A<2*(j=L<2*j?V:j)&&(j=O),W.beginPath(),W.moveTo(N+B,D),W.arcTo(N+z,D,N+z,D+$,F),W.arcTo(N+z,D+$,N,D+$,G),W.arcTo(N,D+$,N,D,j),W.arcTo(N,D,N+z,D,B),W.closePath()),this._doFill&&W.fill(),this._doStroke&&W.stroke(),this}},{key:"triangle",value:function(j){var A=this.drawingContext,O=this._doFill,N=this._doStroke,D=j[0],z=j[1],$=j[2],B=j[3],F=j[4];if(j=j[5],O&&!N){if(this._getFill()===g)return this}else if(!O&&N&&this._getStroke()===g)return this;A.beginPath(),A.moveTo(D,z),A.lineTo($,B),A.lineTo(F,j),A.closePath(),O&&A.fill(),N&&A.stroke()}},{key:"endShape",value:function(j,A,O,N,D,z,$){if(A.length!==0&&(this._doStroke||this._doFill)){var B,F,G,W=j===d.CLOSE,L=(W&&!z&&A.push(A[0]),A.length);if(!O||$!==d.POLYGON&&$!==null)if(!N||$!==d.POLYGON&&$!==null)if(!D||$!==d.POLYGON&&$!==null)if($===d.POINTS)for(F=0;F<L;F++)B=A[F],this._doStroke&&this._pInst.stroke(B[6]),this._pInst.point(B[0],B[1]);else if($===d.LINES)for(F=0;F+1<L;F+=2)B=A[F],this._doStroke&&this._pInst.stroke(A[F+1][6]),this._pInst.line(B[0],B[1],A[F+1][0],A[F+1][1]);else if($===d.TRIANGLES)for(F=0;F+2<L;F+=3)B=A[F],this.drawingContext.beginPath(),this.drawingContext.moveTo(B[0],B[1]),this.drawingContext.lineTo(A[F+1][0],A[F+1][1]),this.drawingContext.lineTo(A[F+2][0],A[F+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(A[F+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(A[F+2][6]),this.drawingContext.stroke());else if($===d.TRIANGLE_STRIP)for(F=0;F+1<L;F++)B=A[F],this.drawingContext.beginPath(),this.drawingContext.moveTo(A[F+1][0],A[F+1][1]),this.drawingContext.lineTo(B[0],B[1]),this._doStroke&&this._pInst.stroke(A[F+1][6]),this._doFill&&this._pInst.fill(A[F+1][5]),F+2<L&&(this.drawingContext.lineTo(A[F+2][0],A[F+2][1]),this._doStroke&&this._pInst.stroke(A[F+2][6]),this._doFill&&this._pInst.fill(A[F+2][5])),this._doFillStrokeClose(W);else if($===d.TRIANGLE_FAN){if(2<L){for(this.drawingContext.beginPath(),F=2;F<L;F++)B=A[F],this.drawingContext.moveTo(A[0][0],A[0][1]),this.drawingContext.lineTo(A[F-1][0],A[F-1][1]),this.drawingContext.lineTo(B[0],B[1]),this.drawingContext.lineTo(A[0][0],A[0][1]),F<L-1&&(this._doFill&&B[5]!==A[F+1][5]||this._doStroke&&B[6]!==A[F+1][6])&&(this._doFill&&(this._pInst.fill(B[5]),this.drawingContext.fill(),this._pInst.fill(A[F+1][5])),this._doStroke&&(this._pInst.stroke(B[6]),this.drawingContext.stroke(),this._pInst.stroke(A[F+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(W)}}else if($===d.QUADS)for(F=0;F+3<L;F+=4){for(B=A[F],this.drawingContext.beginPath(),this.drawingContext.moveTo(B[0],B[1]),G=1;G<4;G++)this.drawingContext.lineTo(A[F+G][0],A[F+G][1]);this.drawingContext.lineTo(B[0],B[1]),this._doFill&&this._pInst.fill(A[F+3][5]),this._doStroke&&this._pInst.stroke(A[F+3][6]),this._doFillStrokeClose(W)}else if($===d.QUAD_STRIP){if(3<L)for(F=0;F+1<L;F+=2)B=A[F],this.drawingContext.beginPath(),F+3<L?(this.drawingContext.moveTo(A[F+2][0],A[F+2][1]),this.drawingContext.lineTo(B[0],B[1]),this.drawingContext.lineTo(A[F+1][0],A[F+1][1]),this.drawingContext.lineTo(A[F+3][0],A[F+3][1]),this._doFill&&this._pInst.fill(A[F+3][5]),this._doStroke&&this._pInst.stroke(A[F+3][6])):(this.drawingContext.moveTo(B[0],B[1]),this.drawingContext.lineTo(A[F+1][0],A[F+1][1])),this._doFillStrokeClose(W)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(A[0][0],A[0][1]),F=1;F<L;F++)(B=A[F]).isVert&&(B.moveTo?this.drawingContext.moveTo(B[0],B[1]):this.drawingContext.lineTo(B[0],B[1]));this._doFillStrokeClose(W)}else{for(this.drawingContext.beginPath(),F=0;F<L;F++)A[F].isVert?A[F].moveTo?this.drawingContext.moveTo(A[F][0],A[F][1]):this.drawingContext.lineTo(A[F][0],A[F][1]):this.drawingContext.quadraticCurveTo(A[F][0],A[F][1],A[F][2],A[F][3]);this._doFillStrokeClose(W)}else{for(this.drawingContext.beginPath(),F=0;F<L;F++)A[F].isVert?A[F].moveTo?this.drawingContext.moveTo(A[F][0],A[F][1]):this.drawingContext.lineTo(A[F][0],A[F][1]):this.drawingContext.bezierCurveTo(A[F][0],A[F][1],A[F][2],A[F][3],A[F][4],A[F][5]);this._doFillStrokeClose(W)}else if(3<L){var V=[],Y=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(A[1][0],A[1][1]),F=1;F+2<L;F++)B=A[F],V[0]=[B[0],B[1]],V[1]=[B[0]+(Y*A[F+1][0]-Y*A[F-1][0])/6,B[1]+(Y*A[F+1][1]-Y*A[F-1][1])/6],V[2]=[A[F+1][0]+(Y*A[F][0]-Y*A[F+2][0])/6,A[F+1][1]+(Y*A[F][1]-Y*A[F+2][1])/6],V[3]=[A[F+1][0],A[F+1][1]],this.drawingContext.bezierCurveTo(V[1][0],V[1][1],V[2][0],V[2][1],V[3][0],V[3][1]);W&&this.drawingContext.lineTo(A[F+1][0],A[F+1][1]),this._doFillStrokeClose(W)}z=D=N=O=!1,W&&A.pop()}return this}},{key:"strokeCap",value:function(j){return j!==d.ROUND&&j!==d.SQUARE&&j!==d.PROJECT||(this.drawingContext.lineCap=j),this}},{key:"strokeJoin",value:function(j){return j!==d.ROUND&&j!==d.BEVEL&&j!==d.MITER||(this.drawingContext.lineJoin=j),this}},{key:"strokeWeight",value:function(j){return this.drawingContext.lineWidth=j===void 0||j===0?1e-4:j,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(j){j!==this._cachedFillStyle&&(this.drawingContext.fillStyle=j,this._cachedFillStyle=j)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(j){j!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=j,this._cachedStrokeStyle=j)}},{key:"bezier",value:function(j,A,O,N,D,z,$,B){return this._pInst.beginShape(),this._pInst.vertex(j,A),this._pInst.bezierVertex(O,N,D,z,$,B),this._pInst.endShape(),this}},{key:"curve",value:function(j,A,O,N,D,z,$,B){return this._pInst.beginShape(),this._pInst.curveVertex(j,A),this._pInst.curveVertex(O,N),this._pInst.curveVertex(D,z),this._pInst.curveVertex($,B),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(j){j&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(j,A,O,N,D,z){this.drawingContext.transform(j,A,O,N,D,z)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(j){this.drawingContext.rotate(j)}},{key:"scale",value:function(j,A){return this.drawingContext.scale(j,A),this}},{key:"translate",value:function(j,A){return j instanceof l.default.Vector&&(A=j.y,j=j.x),this.drawingContext.translate(j,A),this}},{key:"_renderText",value:function(j,A,O,N,D,z){if(!(N<z||D<=N))return j.push(),this._isOpenType()?this._textFont._renderPath(A,O,N,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(A,O,N),this._doFill&&(this._fillSet||this._setFill(d._DEFAULT_TEXT_FILL),this.drawingContext.fillText(A,O,N))),j.pop(),j}},{key:"textWidth",value:function(j){return this._isOpenType()?this._textFont._textWidth(j,this._textSize):this.drawingContext.measureText(j).width}},{key:"_applyTextProperties",value:function(){var j,A=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),j=this._textFont,this._isOpenType()&&(j=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(j||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===d.CENTER?this.drawingContext.textBaseline=d._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,A}},{key:"push",value:function(){return this.drawingContext.save(),m(b(E.prototype),"push",this).call(this)}},{key:"pop",value:function(j){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,m(b(E.prototype),"pop",this).call(this,j)}}])&&S(C.prototype,_),E}(l.default.Renderer);w.prototype.text=function(_,C,k,E,j){E!==void 0&&this.drawingContext.textBaseline===d.BASELINE&&(A=!0,this.drawingContext.textBaseline=d.TOP);var A;return E=l.default.Renderer.prototype.text.apply(this,arguments),A&&(this.drawingContext.textBaseline=d.BASELINE),E},l.default.Renderer2D=w,r=l.default.Renderer2D,f.default=r},{"./constants":262,"./main":273,"./p5.Renderer":276,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],278:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var u=(r=r("./main"))&&r.__esModule?r:{default:r};function l(){return{}}u.default.prototype._promisePreloads=[];var d=!(u.default.prototype.registerPromisePreload=function(x){u.default.prototype._promisePreloads.push(x)});u.default.prototype._setupPromisePreloads=function(){var x=!0,S=!1,m=void 0;try{for(var y,b=this._promisePreloads[Symbol.iterator]();!(x=(y=b.next()).done);x=!0){var g=y.value,w=this,_=g.method,C=g.addCallbacks,k=g.legacyPreloadSetup,E=g.target||this,j=E[_].bind(E);if(E===u.default.prototype){if(d)continue;w=null,j=E[_]}E[_]=this._wrapPromisePreload(w,j,C),k&&(E[k.method]=this._legacyPreloadGenerator(w,k,E[_]))}}catch(A){S=!0,m=A}finally{try{x||b.return==null||b.return()}finally{if(S)throw m}}d=!0},u.default.prototype._wrapPromisePreload=function(x,S,m){var y=function(){for(var b=this,g=(this._incrementPreload(),null),w=null,_=arguments.length,C=new Array(_),k=0;k<_;k++)C[k]=arguments[k];if(m)for(var E=C.length-1;0<=E&&!w&&typeof C[E]=="function";E--)w=g,g=C.pop();var j=Promise.resolve(S.apply(this,C));return g&&j.then(g),w&&j.catch(w),j.then(function(){return b._decrementPreload()}),j};return x?y.bind(x):y},u.default.prototype._legacyPreloadGenerator=function(x,S,m){var y=S.createBaseObject||l;return S=function(){var b=this;this._incrementPreload();for(var g=arguments.length,w=new Array(g),_=0;_<g;_++)w[_]=arguments[_];var C=y.apply(this,w);return m.apply(this,w).then(function(k){Object.assign(C,k),b._decrementPreload()}),C},x?S.bind(x):S}},{"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],279:[function(r,h,f){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(m=r("./main"))&&m.__esModule?m:{default:m},d=function(y){if(y&&y.__esModule)return y;if(y===null||x(y)!=="object"&&typeof y!="function")return{default:y};var b=function(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,k)}();if(b&&b.has(y))return b.get(y);var g,w={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in y){var C;Object.prototype.hasOwnProperty.call(y,g)&&((C=_?Object.getOwnPropertyDescriptor(y,g):null)&&(C.get||C.set)?Object.defineProperty(w,g,C):w[g]=y[g])}return w.default=y,b&&b.set(y,w),w}(r("./constants"));function x(y){return(x=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(y)}r("./p5.Graphics"),r("./p5.Renderer2D"),r("../webgl/p5.RendererGL");var S="defaultCanvas0",m=(l.default.prototype.createCanvas=function(y,b,g,w){var _,C,k;if(l.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(g=d.P2D,w=arguments[2]):_=g||d.P2D,w)(k=document.getElementById(S))&&k.parentNode.removeChild(k),k=w,this._defaultGraphicsCreated=!1;else{if(_===d.WEBGL)(k=document.getElementById(S))&&(k.parentNode.removeChild(k),C=this._renderer,this._elements=this._elements.filter(function(j){return j!==C})),(k=document.createElement("canvas")).id=S,k.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)k=this.canvas;else{k=w||document.createElement("canvas");for(var E=0;document.getElementById("defaultCanvas".concat(E));)E++;S="defaultCanvas".concat(E),k.id=S,k.classList.add("p5Canvas")}this._setupDone||(k.dataset.hidden=!0,k.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(g=document.createElement("main"),document.body.appendChild(g)),document.getElementsByTagName("main")[0])).appendChild(k)}return _===d.WEBGL?(this._setProperty("_renderer",new l.default.RendererGL(k,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new l.default.Renderer2D(k,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(y,b),this._renderer._applyDefaults(),this._renderer},l.default.prototype.resizeCanvas=function(y,b,g){if(l.default._validateParameters("resizeCanvas",arguments),this._renderer){var w,_,C={};for(w in this.drawingContext){var k=this.drawingContext[w];x(k)!=="object"&&typeof k!="function"&&(C[w]=k)}for(_ in this.width=y,this.height=b,this._renderer.resize(y,b),C)try{this.drawingContext[_]=C[_]}catch{}g||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},l.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},l.default.prototype.createGraphics=function(y,b,g,w){return arguments[2]instanceof HTMLCanvasElement&&(g=d.P2D,w=arguments[2]),l.default._validateParameters("createGraphics",arguments),new l.default.Graphics(y,b,g,this,w)},l.default.prototype.createFramebuffer=function(y){return new l.default.Framebuffer(this,y)},l.default.prototype.blendMode=function(y){l.default._validateParameters("blendMode",arguments),y===d.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),y=d.BLEND),this._renderer.blendMode(y)},l.default);f.default=m},{"../webgl/p5.RendererGL":328,"./constants":262,"./main":273,"./p5.Graphics":275,"./p5.Renderer2D":277,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],280:[function(r,h,f){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(b)}function l(b){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(g){return u(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":u(g)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=m(r("../main")),x=function(b){if(b&&b.__esModule)return b;if(b===null||l(b)!=="object"&&typeof b!="function")return{default:b};var g=function(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,E)}();if(g&&g.has(b))return g.get(b);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in b){var k;Object.prototype.hasOwnProperty.call(b,w)&&((k=C?Object.getOwnPropertyDescriptor(b,w):null)&&(k.get||k.set)?Object.defineProperty(_,w,k):_[w]=b[w])}return _.default=b,g&&g.set(b,_),_}(r("../constants")),S=m(r("../helpers"));function m(b){return b&&b.__esModule?b:{default:b}}function y(b){return function(g){if(Array.isArray(g)){for(var w=0,_=new Array(g.length);w<g.length;w++)_[w]=g[w];return _}}(b)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),d.default.prototype._normalizeArcAngles=function(b,g,w,_,C){var k;return b-=x.TWO_PI*Math.floor(b/x.TWO_PI),g-=x.TWO_PI*Math.floor(g/x.TWO_PI),k=Math.min(Math.abs(b-g),x.TWO_PI-Math.abs(b-g)),C&&(b=b<=x.HALF_PI?Math.atan(w/_*Math.tan(b)):b>x.HALF_PI&&b<=3*x.HALF_PI?Math.atan(w/_*Math.tan(b))+x.PI:Math.atan(w/_*Math.tan(b))+x.TWO_PI,g=g<=x.HALF_PI?Math.atan(w/_*Math.tan(g)):g>x.HALF_PI&&g<=3*x.HALF_PI?Math.atan(w/_*Math.tan(g))+x.PI:Math.atan(w/_*Math.tan(g))+x.TWO_PI),g<b&&(g+=x.TWO_PI),{start:b,stop:g,correspondToSamePoint:k<1e-5}},d.default.prototype.arc=function(b,g,w,_,C,k,E,j){return d.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&C!==k&&(C=this._toRadians(C),k=this._toRadians(k),w=Math.abs(w),_=Math.abs(_),b=S.default.modeAdjust(b,g,w,_,this._renderer._ellipseMode),(g=this._normalizeArcAngles(C,k,b.w,b.h,!0)).correspondToSamePoint?this._renderer.ellipse([b.x,b.y,b.w,b.h,j]):(this._renderer.arc(b.x,b.y,b.w,b.h,g.start,g.stop,E,j),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[b.x,b.y,b.w,b.h,g.start,g.stop,E]))),this},d.default.prototype.ellipse=function(b,g,w,_,C){return d.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},d.default.prototype.circle=function(){d.default._validateParameters("circle",arguments);var b=Array.prototype.slice.call(arguments,0,2);return b.push(arguments[2]),b.push(arguments[2]),this._renderEllipse.apply(this,y(b))},d.default.prototype._renderEllipse=function(b,g,w,_,C){return(this._renderer._doStroke||this._renderer._doFill)&&(w<0&&(w=Math.abs(w)),_===void 0?_=w:_<0&&(_=Math.abs(_)),b=S.default.modeAdjust(b,g,w,_,this._renderer._ellipseMode),this._renderer.ellipse([b.x,b.y,b.w,b.h,C]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[b.x,b.y,b.w,b.h])),this},d.default.prototype.line=function(){for(var b,g=arguments.length,w=new Array(g),_=0;_<g;_++)w[_]=arguments[_];return d.default._validateParameters("line",w),this._renderer._doStroke&&(b=this._renderer).line.apply(b,w),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",w),this},d.default.prototype.point=function(){for(var b,g=arguments.length,w=new Array(g),_=0;_<g;_++)w[_]=arguments[_];return d.default._validateParameters("point",w),this._renderer._doStroke&&(w.length===1&&w[0]instanceof d.default.Vector?this._renderer.point.call(this._renderer,w[0].x,w[0].y,w[0].z):((b=this._renderer).point.apply(b,w),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",w))),this},d.default.prototype.quad=function(){for(var b,g=arguments.length,w=new Array(g),_=0;_<g;_++)w[_]=arguments[_];return d.default._validateParameters("quad",w),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&w.length<12?this._renderer.quad.call(this._renderer,w[0],w[1],0,w[2],w[3],0,w[4],w[5],0,w[6],w[7],0,w[8],w[9]):((b=this._renderer).quad.apply(b,w),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",w))),this},d.default.prototype.rect=function(){for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];return d.default._validateParameters("rect",g),this._renderRect.apply(this,g)},d.default.prototype.square=function(b,g,w,_,C,k,E){return d.default._validateParameters("square",arguments),this._renderRect.call(this,b,g,w,w,_,C,k,E)},d.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var b=S.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),g=[b.x,b.y,b.w,b.h],w=4;w<arguments.length;w++)g[w]=arguments[w];this._renderer.rect(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[b.x,b.y,b.w,b.h])}return this},d.default.prototype.triangle=function(){for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];return d.default._validateParameters("triangle",g),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(g),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",g),this},r=d.default,f.default=r},{"../constants":262,"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../helpers":269,"../main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],281:[function(r,h,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function l(m){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(y){return u(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":u(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(S=r("../main"))&&S.__esModule?S:{default:S},x=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var y=function(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,C)}();if(y&&y.has(m))return y.get(m);var b,g={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in m){var _;Object.prototype.hasOwnProperty.call(m,b)&&((_=w?Object.getOwnPropertyDescriptor(m,b):null)&&(_.get||_.set)?Object.defineProperty(g,b,_):g[b]=m[b])}return g.default=m,y&&y.set(m,g),g}(r("../constants"));d.default.prototype.ellipseMode=function(m){return d.default._validateParameters("ellipseMode",arguments),m!==x.CORNER&&m!==x.CORNERS&&m!==x.RADIUS&&m!==x.CENTER||(this._renderer._ellipseMode=m),this},d.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},d.default.prototype.rectMode=function(m){return d.default._validateParameters("rectMode",arguments),m!==x.CORNER&&m!==x.CORNERS&&m!==x.RADIUS&&m!==x.CENTER||(this._renderer._rectMode=m),this},d.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},d.default.prototype.strokeCap=function(m){return d.default._validateParameters("strokeCap",arguments),m!==x.ROUND&&m!==x.SQUARE&&m!==x.PROJECT||this._renderer.strokeCap(m),this},d.default.prototype.strokeJoin=function(m){return d.default._validateParameters("strokeJoin",arguments),m!==x.ROUND&&m!==x.BEVEL&&m!==x.MITER||this._renderer.strokeJoin(m),this},d.default.prototype.strokeWeight=function(m){return d.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(m),this};var S=d.default;f.default=S},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],282:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(l=r("../main"))&&l.__esModule?l:{default:l};r("../friendly_errors/fes_core"),r("../friendly_errors/file_errors"),r("../friendly_errors/validate_params"),u.default.prototype.bezier=function(){for(var d,x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];return u.default._validateParameters("bezier",S),(this._renderer._doStroke||this._renderer._doFill)&&(d=this._renderer).bezier.apply(d,S),this},u.default.prototype.bezierDetail=function(d){return u.default._validateParameters("bezierDetail",arguments),this._bezierDetail=d,this},u.default.prototype.bezierPoint=function(d,x,S,m,y){u.default._validateParameters("bezierPoint",arguments);var b=1-y;return Math.pow(b,3)*d+3*Math.pow(b,2)*y*x+3*b*Math.pow(y,2)*S+Math.pow(y,3)*m},u.default.prototype.bezierTangent=function(d,x,S,m,y){u.default._validateParameters("bezierTangent",arguments);var b=1-y;return 3*m*Math.pow(y,2)-3*S*Math.pow(y,2)+6*S*b*y-6*x*b*y+3*x*Math.pow(b,2)-3*d*Math.pow(b,2)},u.default.prototype.curve=function(){for(var d,x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];return u.default._validateParameters("curve",S),this._renderer._doStroke&&(d=this._renderer).curve.apply(d,S),this},u.default.prototype.curveDetail=function(d){return u.default._validateParameters("curveDetail",arguments),this._curveDetail=d<3?3:d,this},u.default.prototype.curveTightness=function(d){return u.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=d,this},u.default.prototype.curvePoint=function(d,x,S,m,y){u.default._validateParameters("curvePoint",arguments);var b=this._renderer._curveTightness,g=y*y*y,w=y*y;return d*((b-1)/2*g+(1-b)*w+(b-1)/2*y)+x*((b+3)/2*g+(-5-b)/2*w+1)+S*((-3-b)/2*g+(b+2)*w+(1-b)/2*y)+m*((1-b)/2*g+(b-1)/2*w)},u.default.prototype.curveTangent=function(d,x,S,m,y){u.default._validateParameters("curveTangent",arguments);var b=this._renderer._curveTightness,g=y*y*3;return d*((b-1)/2*g+(1-b)*(y=2*y)+(b-1)/2)+x*((b+3)/2*g+(-5-b)/2*y)+S*((-3-b)/2*g+(b+2)*y+(1-b)/2)+m*((1-b)/2*g+(b-1)/2*y)};var l=u.default;f.default=l},{"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../main":273}],283:[function(r,h,f){function u(E){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(E)}function l(E){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(j){return u(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":u(j)})(E)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.slice"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(k=r("../main"))&&k.__esModule?k:{default:k},x=function(E){if(E&&E.__esModule)return E;if(E===null||l(E)!=="object"&&typeof E!="function")return{default:E};var j=function(){var z;return typeof WeakMap!="function"?null:(z=new WeakMap,z)}();if(j&&j.has(E))return j.get(E);var A,O={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in E){var D;Object.prototype.hasOwnProperty.call(E,A)&&((D=N?Object.getOwnPropertyDescriptor(E,A):null)&&(D.get||D.set)?Object.defineProperty(O,A,D):O[A]=E[A])}return O.default=E,j&&j.set(E,O),O}(r("../constants")),S=null,m=[],y=[],b=!1,g=!1,w=!1,_=!1,C=!0,k=(d.default.prototype.beginContour=function(){return y=[],_=!0,this},d.default.prototype.beginShape=function(E){var j;return d.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(j=this._renderer).beginShape.apply(j,arguments):(S=E===x.POINTS||E===x.LINES||E===x.TRIANGLES||E===x.TRIANGLE_FAN||E===x.TRIANGLE_STRIP||E===x.QUADS||E===x.QUAD_STRIP?E:null,m=[],y=[]),this},d.default.prototype.bezierVertex=function(){for(var E,j=arguments.length,A=new Array(j),O=0;O<j;O++)A[O]=arguments[O];if(d.default._validateParameters("bezierVertex",A),this._renderer.isP3D)(E=this._renderer).bezierVertex.apply(E,A);else if(m.length===0)d.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{b=!0;for(var N=[],D=0;D<A.length;D++)N[D]=A[D];N.isVert=!1,(_?y:m).push(N)}return this},d.default.prototype.curveVertex=function(){for(var E,j=arguments.length,A=new Array(j),O=0;O<j;O++)A[O]=arguments[O];return d.default._validateParameters("curveVertex",A),this._renderer.isP3D?(E=this._renderer).curveVertex.apply(E,A):(g=!0,this.vertex(A[0],A[1])),this},d.default.prototype.endContour=function(){var E=y[0].slice();E.isVert=y[0].isVert,E.moveTo=!1,y.push(E),C&&(m.push(m[0]),C=!1);for(var j=0;j<y.length;j++)m.push(y[j]);return this},d.default.prototype.endShape=function(E){if(d.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(E,g,b,w,_,S);else{if(m.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var j=E===x.CLOSE;j&&!_&&m.push(m[0]),this._renderer.endShape(E,m,g,b,w,_,S),C=!(_=w=b=g=!1),j&&m.pop()}return this},d.default.prototype.quadraticVertex=function(){for(var E,j=arguments.length,A=new Array(j),O=0;O<j;O++)A[O]=arguments[O];if(d.default._validateParameters("quadraticVertex",A),this._renderer.isP3D)(E=this._renderer).quadraticVertex.apply(E,A);else{if(this._contourInited)return(E={}).x=A[0],E.y=A[1],E.x3=A[2],E.y3=A[3],E.type=x.QUADRATIC,this._contourVertices.push(E),this;if(0<m.length){w=!0;for(var N=[],D=0;D<A.length;D++)N[D]=A[D];N.isVert=!1,(_?y:m).push(N)}else d.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},d.default.prototype.vertex=function(E,j,A,O,N){var D;return this._renderer.isP3D?(D=this._renderer).vertex.apply(D,arguments):((D=[]).isVert=!0,D[0]=E,D[1]=j,D[2]=0,D[3]=0,D[4]=0,D[5]=this._renderer._getFill(),D[6]=this._renderer._getStroke(),A&&(D.moveTo=A),(_?(y.length===0&&(D.moveTo=!0),y):m).push(D)),this},d.default.prototype.normal=function(E,j,A){var O;return this._assert3d("normal"),d.default._validateParameters("normal",arguments),(O=this._renderer).normal.apply(O,arguments),this},d.default);f.default=k},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],284:[function(r,h,f){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return function(b){if(Array.isArray(b)){for(var g=0,w=new Array(b.length);g<b.length;g++)w[g]=b[g];return w}}(y)||function(b){if(Symbol.iterator in Object(b)||Object.prototype.toString.call(b)==="[object Arguments]")return Array.from(b)}(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(y){return(d=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(y)}var x,S,m;r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(y,b){window.setTimeout(y,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(x=Object.keys,r=Object.defineProperty,S=typeof Symbol=="function"&&d(Symbol())==="symbol",m=Object.prototype.propertyIsEnumerable,r(Object,"assign",{value:function(y,b){if(y==null)throw new TypeError("target must be an object");for(var g,w=Object(y),_=1;_<arguments.length;++_){var C=Object(arguments[_]),k=x(C);for(S&&Object.getOwnPropertySymbols&&k.push.apply(k,l(Object.getOwnPropertySymbols(C).filter(function(E){return function(j){return m.call(E,j)}}(C)))),g=0;g<k.length;++g)w[k[g]]=C[k[g]]}return w},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/web.dom-collections.iterator":236}],285:[function(r,h,f){r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.object.assign"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("./main"))&&r.__esModule?r:{default:r}).default.prototype.noLoop=function(){this._loop=!1},r.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},r.default.prototype.isLooping=function(){return this._loop},r.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.default.prototype.pop=function(){var u=this._styles.pop();u?(this._renderer.pop(u.renderer),Object.assign(this,u.props)):console.warn("pop() was called without matching push()")},r.default.prototype.redraw=function(u){if(!this._inUserDraw&&this._setupDone){var l=parseInt(u),d=((isNaN(l)||l<1)&&(l=1),this._isGlobal?window:this);if(typeof d.draw=="function"){d.setup===void 0&&d.scale(d._pixelDensity,d._pixelDensity);for(var x=function(m){m.call(d)},S=0;S<l;S++){d.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),d._renderer.isP3D&&d._renderer._update(),d._setProperty("frameCount",d.frameCount+1),d._registeredMethods.pre.forEach(x),this._inUserDraw=!0;try{d.draw()}finally{this._inUserDraw=!1}d._registeredMethods.post.forEach(x)}}}},r=r.default,f.default=r},{"./main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.object.assign":174,"core-js/modules/web.dom-collections.for-each":235}],286:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("./main"))&&r.__esModule?r:{default:r};function l(d){return function(x){if(Array.isArray(x)){for(var S=0,m=new Array(x.length);S<x.length;S++)m[S]=x[S];return m}}(d)||function(x){if(Symbol.iterator in Object(x)||Object.prototype.toString.call(x)==="[object Arguments]")return Array.from(x)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}u.default.prototype.applyMatrix=function(){var d=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||d?(d=this._renderer).applyMatrix.apply(d,l(arguments.length<=0?void 0:arguments[0])):(d=this._renderer).applyMatrix.apply(d,arguments),this},u.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},u.default.prototype.rotate=function(d,x){return u.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(d),x),this},u.default.prototype.rotateX=function(d){return this._assert3d("rotateX"),u.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(d)),this},u.default.prototype.rotateY=function(d){return this._assert3d("rotateY"),u.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(d)),this},u.default.prototype.rotateZ=function(d){return this._assert3d("rotateZ"),u.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(d)),this},u.default.prototype.scale=function(d,x,S){var m;return u.default._validateParameters("scale",arguments),d instanceof u.default.Vector?(d=(m=d).x,x=m.y,S=m.z):d instanceof Array&&(d=(m=d)[0],x=m[1],S=m[2]||1),isNaN(x)?x=S=d:isNaN(S)&&(S=1),this._renderer.scale.call(this._renderer,d,x,S),this},u.default.prototype.shearX=function(d){return u.default._validateParameters("shearX",arguments),d=this._toRadians(d),this._renderer.applyMatrix(1,0,Math.tan(d),1,0,0),this},u.default.prototype.shearY=function(d){return u.default._validateParameters("shearY",arguments),d=this._toRadians(d),this._renderer.applyMatrix(1,Math.tan(d),0,1,0,0),this},u.default.prototype.translate=function(d,x,S){return u.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(d,x,S):this._renderer.translate(d,x),this},r=u.default,f.default=r},{"./main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236}],287:[function(r,h,f){function u(S){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.ends-with"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator");var l=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(S){return function(m){if(Array.isArray(m)){for(var y=0,b=new Array(m.length);y<m.length;y++)b[y]=m[y];return b}}(S)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(S)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(S){return(x=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(m){return u(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":u(m)})(S)}l.default.prototype.storeItem=function(S,m){typeof S!="string"&&console.log("The argument that you passed to storeItem() - ".concat(S," is not a string.")),S.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(S," must not end with 'p5TypeID'.")),m===void 0&&console.log("You cannot store undefined variables using storeItem().");var y=x(m);switch(y){case"number":case"boolean":m=m.toString();break;case"object":m instanceof l.default.Color?y="p5.Color":m instanceof l.default.Vector&&(y="p5.Vector",m=[m.x,m.y,m.z]),m=JSON.stringify(m)}localStorage.setItem(S,m),S="".concat(S,"p5TypeID"),localStorage.setItem(S,y)},l.default.prototype.getItem=function(S){var m=localStorage.getItem(S),y=localStorage.getItem("".concat(S,"p5TypeID"));if(y===void 0)console.log("Unable to determine type of item stored under ".concat(S,"in local storage. Did you save the item with something other than setItem()?"));else if(m!==null)switch(y){case"number":m=parseFloat(m);break;case"boolean":m=m==="true";break;case"object":m=JSON.parse(m);break;case"p5.Color":m=JSON.parse(m),m=this.color.apply(this,d(m.levels));break;case"p5.Vector":m=JSON.parse(m),m=this.createVector.apply(this,d(m))}return m},l.default.prototype.clearStorage=function(){localStorage.clear()},l.default.prototype.removeItem=function(S){typeof S!="string"&&console.log("The argument that you passed to removeItem() - ".concat(S," is not a string.")),localStorage.removeItem(S),localStorage.removeItem("".concat(S,"p5TypeID"))}},{"../core/main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],288:[function(r,h,f){function u(w){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(w)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(w){return(d=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(_){return u(_)}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":u(_)})(w)}function x(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),_&&function(C,k){(Object.setPrototypeOf||function(E,j){return E.__proto__=j,E})(C,k)}(w,_)}function S(w){return function(){var _,C=m(w);if(_=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(_=m(this).constructor,Reflect.construct(C,arguments,_)):C.apply(this,arguments),C=this,!_||d(_)!=="object"&&typeof _!="function"){if(C!==void 0)return C;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return _}}function m(w){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(w)}function y(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function b(w,_){for(var C=0;C<_.length;C++){var k=_[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}function g(w,_,C){_&&b(w.prototype,_)}l.default.prototype.createStringDict=function(w,_){return l.default._validateParameters("createStringDict",arguments),new l.default.StringDict(w,_)},l.default.prototype.createNumberDict=function(w,_){return l.default._validateParameters("createNumberDict",arguments),new l.default.NumberDict(w,_)},l.default.TypedDict=function(){function w(_,C){return y(this,w),_ instanceof Object?this.data=_:(this.data={},this.data[_]=C),this}return g(w,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(_){return this.data.hasOwnProperty(_)}},{key:"get",value:function(_){if(this.data.hasOwnProperty(_))return this.data[_];console.log("".concat(_," does not exist in this Dictionary"))}},{key:"set",value:function(_,C){this._validate(C)?this.data[_]=C:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(_){for(var C in _)this.set(C,_[C])}},{key:"create",value:function(_,C){_ instanceof Object&&C===void 0?this._addObj(_):_!==void 0?this.set(_,C):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(_){if(!this.data.hasOwnProperty(_))throw new Error("".concat(_," does not exist in this Dictionary"));delete this.data[_]}},{key:"print",value:function(){for(var _ in this.data)console.log("key:".concat(_," value:").concat(this.data[_]))}},{key:"saveTable",value:function(_){var C,k="";for(C in this.data)k+="".concat(C,",").concat(this.data[C],`
`);var E=new Blob([k],{type:"text/csv"});l.default.prototype.downloadFile(E,_||"mycsv","csv")}},{key:"saveJSON",value:function(_,C){l.default.prototype.saveJSON(this.data,_,C)}},{key:"_validate",value:function(_){return!0}}]),w}(),l.default.StringDict=function(){x(_,l.default.TypedDict);var w=S(_);function _(){y(this,_);for(var C=arguments.length,k=new Array(C),E=0;E<C;E++)k[E]=arguments[E];return w.call.apply(w,[this].concat(k))}return g(_,[{key:"_validate",value:function(C){return typeof C=="string"}}]),_}(),l.default.NumberDict=function(){x(_,l.default.TypedDict);var w=S(_);function _(){y(this,_);for(var C=arguments.length,k=new Array(C),E=0;E<C;E++)k[E]=arguments[E];return w.call.apply(w,[this].concat(k))}return g(_,[{key:"_validate",value:function(C){return typeof C=="number"}},{key:"add",value:function(C,k){this.data.hasOwnProperty(C)?this.data[C]+=k:console.log("The key - ".concat(C," does not exist in this dictionary."))}},{key:"sub",value:function(C,k){this.add(C,-k)}},{key:"mult",value:function(C,k){this.data.hasOwnProperty(C)?this.data[C]*=k:console.log("The key - ".concat(C," does not exist in this dictionary."))}},{key:"div",value:function(C,k){this.data.hasOwnProperty(C)?this.data[C]/=k:console.log("The key - ".concat(C," does not exist in this dictionary."))}},{key:"_valueTest",value:function(C){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var k,E=this.data[Object.keys(this.data)[0]];for(k in this.data)this.data[k]*C<E*C&&(E=this.data[k]);return E}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(C){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var k=Object.keys(this.data)[0],E=1;E<Object.keys(this.data).length;E++)Object.keys(this.data)[E]*C<k*C&&(k=Object.keys(this.data)[E]);return k}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),_}(),r=l.default.TypedDict,f.default=r},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],289:[function(r,h,f){function u(E){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(E)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(r=r("../core/main"))&&r.__esModule?r:{default:r};function d(E,j){for(var A=0;A<j.length;A++){var O=j[A];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,O.key,O)}}function x(E,j,A){j&&d(E.prototype,j),A&&d(E,A)}function S(E,j){return(S=Object.setPrototypeOf||function(A,O){return A.__proto__=O,A})(E,j)}function m(E){return function(){var j,A,O=b(E);return j=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(j=b(this).constructor,Reflect.construct(O,arguments,j)):O.apply(this,arguments),O=this,!(A=j)||w(A)!=="object"&&typeof A!="function"?y(O):A}}function y(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function b(E){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)})(E)}function g(E,j){if(!(E instanceof j))throw new TypeError("Cannot call a class as a function")}function w(E){return(w=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(j){return u(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":u(j)})(E)}function _(E,j,A){return(j._userNode||document.body).appendChild(E),A=new(A?l.default.MediaElement:l.default.Element)(E,j),j._elements.push(A),A}function C(E,j,A,O){var N=document.createElement(j),D=(typeof(A=A||"")=="string"&&(A=[A]),!0),z=(j=!1,void 0);try{for(var $,B=A[Symbol.iterator]();!(D=($=B.next()).done);D=!0){var F=$.value,G=document.createElement("source");G.setAttribute("src",F),N.appendChild(G)}}catch(L){j=!0,z=L}finally{try{D||B.return==null||B.return()}finally{if(j)throw z}}typeof O=="function"&&N.addEventListener("canplaythrough",function L(){O(),N.removeEventListener("canplaythrough",L)});var W=_(N,E,!0);return W.loadedmetadata=!1,N.addEventListener("loadedmetadata",function(){W.width=N.videoWidth,W.height=N.videoHeight,W.elt.width===0&&(W.elt.width=N.videoWidth),W.elt.height===0&&(W.elt.height=N.videoHeight),W.presetPlaybackRate&&(W.elt.playbackRate=W.presetPlaybackRate,delete W.presetPlaybackRate),W.loadedmetadata=!0}),W}function k(E,j,A,O){g(this,k),this.callback=E,this.time=j,this.id=A,this.val=O}l.default.prototype.select=function(E,j){return l.default._validateParameters("select",arguments),(j=this._getContainer(j).querySelector(E))?this._wrapElement(j):null},l.default.prototype.selectAll=function(E,j){l.default._validateParameters("selectAll",arguments);var A=[],O=this._getContainer(j).querySelectorAll(E);if(O)for(var N=0;N<O.length;N++){var D=this._wrapElement(O[N]);A.push(D)}return A},l.default.prototype._getContainer=function(E){var j=document;return typeof E=="string"?j=document.querySelector(E)||document:E instanceof l.default.Element?j=E.elt:E instanceof HTMLElement&&(j=E),j},l.default.prototype._wrapElement=function(E){var j,A=Array.prototype.slice.call(E.children);return E.tagName==="INPUT"&&E.type==="checkbox"?((j=new l.default.Element(E,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},j):E.tagName==="VIDEO"||E.tagName==="AUDIO"?new l.default.MediaElement(E,this):E.tagName==="SELECT"?this.createSelect(new l.default.Element(E,this)):0<A.length&&A.every(function(O){return O.tagName==="INPUT"||O.tagName==="LABEL"})?this.createRadio(new l.default.Element(E,this)):new l.default.Element(E,this)},l.default.prototype.removeElements=function(E){l.default._validateParameters("removeElements",arguments),this._elements.filter(function(j){return!(j.elt instanceof HTMLCanvasElement)}).map(function(j){return j.remove()})},l.default.Element.prototype.changed=function(E){return l.default.Element._adjustListener("change",E,this),this},l.default.Element.prototype.input=function(E){return l.default.Element._adjustListener("input",E,this),this},l.default.prototype.createDiv=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",j=document.createElement("div");return j.innerHTML=E,_(j,this)},l.default.prototype.createP=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",j=document.createElement("p");return j.innerHTML=E,_(j,this)},l.default.prototype.createSpan=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",j=document.createElement("span");return j.innerHTML=E,_(j,this)},l.default.prototype.createImg=function(){l.default._validateParameters("createImg",arguments);var E,j=document.createElement("img"),A=arguments;return 1<A.length&&typeof A[1]=="string"&&(j.alt=A[1]),2<A.length&&typeof A[2]=="string"&&(j.crossOrigin=A[2]),j.src=A[0],E=_(j,this),j.addEventListener("load",function(){E.width=j.offsetWidth||j.width,E.height=j.offsetHeight||j.height;var O=A[A.length-1];typeof O=="function"&&O(E)}),E},l.default.prototype.createA=function(E,j,A){l.default._validateParameters("createA",arguments);var O=document.createElement("a");return O.href=E,O.innerHTML=j,A&&(O.target=A),_(O,this)},l.default.prototype.createSlider=function(E,j,A,O){l.default._validateParameters("createSlider",arguments);var N=document.createElement("input");return N.type="range",N.min=E,N.max=j,O===0?N.step=1e-18:O&&(N.step=O),typeof A=="number"&&(N.value=A),_(N,this)},l.default.prototype.createButton=function(E,j){l.default._validateParameters("createButton",arguments);var A=document.createElement("button");return A.innerHTML=E,j&&(A.value=j),_(A,this)},l.default.prototype.createCheckbox=function(){for(var E=arguments.length,j=new Array(E),A=0;A<E;A++)j[A]=arguments[A];l.default._validateParameters("createCheckbox",j);var O=document.createElement("div"),N=document.createElement("input"),D=(N.type="checkbox",document.createElement("label")),z=(D.appendChild(N),O.appendChild(D),_(O,this));return z.checked=function(){var $=z.elt.firstElementChild.getElementsByTagName("input")[0];if($){if(arguments.length===0)return $.checked;$.checked=!(arguments.length<=0||!arguments[0])}return z},this.value=function($){return z.value=$,this},j[0]&&(z.value(j[0]),(O=document.createElement("span")).innerHTML=j[0],D.appendChild(O)),j[1]&&(N.checked=!0),z},l.default.prototype.createSelect=function(){for(var E,j=arguments.length,A=new Array(j),O=0;O<j;O++)A[O]=arguments[O];l.default._validateParameters("createSelect",A);var N,D=A[0];return D instanceof l.default.Element&&D.elt instanceof HTMLSelectElement?this.elt=(E=D).elt:D instanceof HTMLSelectElement?(E=_(D,this),this.elt=D):(N=document.createElement("select"),D&&typeof D=="boolean"&&N.setAttribute("multiple","true"),E=_(N,this),this.elt=N),E.option=function(z,$){var B;if(z!==void 0){for(var F,G=0;G<this.elt.length;G+=1)if(this.elt[G].textContent===z){B=G;break}B!==void 0?$===!1?this.elt.remove(B):this.elt[B].value=$:((F=document.createElement("option")).textContent=z,F.value=$===void 0?z:$,this.elt.appendChild(F),this._pInst._elements.push(F))}},E.selected=function(z){if(z!==void 0){for(var $=0;$<this.elt.length;$+=1)this.elt[$].value.toString()===z.toString()&&(this.elt.selectedIndex=$);return this}if(this.elt.getAttribute("multiple")){var B=[],F=!0,G=!1,W=void 0;try{for(var L,V=this.elt.selectedOptions[Symbol.iterator]();!(F=(L=V.next()).done);F=!0){var Y=L.value;B.push(Y.value)}}catch(Z){G=!0,W=Z}finally{try{F||V.return==null||V.return()}finally{if(G)throw W}}return B}return this.elt.value},E.disable=function(z){if(typeof z=="string")for(var $=0;$<this.elt.length;$++)this.elt[$].value.toString()===z&&(this.elt[$].disabled=!0,this.elt[$].selected=!1);else this.elt.disabled=!0;return this},E.enable=function(z){if(typeof z=="string")for(var $=0;$<this.elt.length;$++)this.elt[$].value.toString()===z&&(this.elt[$].disabled=!1,this.elt[$].selected=!1);else{this.elt.disabled=!1;for(var B=0;B<this.elt.length;B++)this.elt[B].disabled=!1,this.elt[B].selected=!1}return this},E},l.default.prototype.createRadio=function(){function E(z){return z instanceof HTMLInputElement&&z.type==="radio"}function j(z){return z instanceof HTMLLabelElement}var A,O,N,D=arguments.length<=0?void 0:arguments[0];return D instanceof l.default.Element&&(D.elt instanceof HTMLDivElement||D.elt instanceof HTMLSpanElement)?(A=D,this.elt=D.elt):D instanceof HTMLDivElement||D instanceof HTMLSpanElement?(A=_(D,this),O=this.elt=D,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(N=arguments.length<=1?void 0:arguments[1])):(typeof D=="string"&&(N=D),O=document.createElement("div"),A=_(O,this),this.elt=O),A._name=N||"radioOption",A._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(z){return E(z)||j(z)&&E(z.firstElementChild)}).map(function(z){return E(z)?z:z.firstElementChild})},A.option=function(z,$){var B,F,G,W=!0,L=!1,V=void 0;try{for(var Y,Z=A._getOptionsArray()[Symbol.iterator]();!(W=(Y=Z.next()).done);W=!0){var J=Y.value;if(J.value===z){B=J;break}}}catch(ne){L=!0,V=ne}finally{try{W||Z.return==null||Z.return()}finally{if(L)throw V}}return B===void 0&&((B=document.createElement("input")).setAttribute("type","radio"),B.setAttribute("value",z)),B.setAttribute("name",A._name),j(B.parentElement)?F=B.parentElement:(F=document.createElement("label")).insertAdjacentElement("afterbegin",B),F.lastElementChild instanceof HTMLSpanElement?G=F.lastElementChild:(G=document.createElement("span"),B.insertAdjacentElement("afterend",G)),G.innerHTML=$===void 0?z:$,this.elt.appendChild(F),B},A.remove=function(z){var $=!0,B=!1,F=void 0;try{for(var G,W=A._getOptionsArray()[Symbol.iterator]();!($=(G=W.next()).done);$=!0){var L=G.value;if(L.value===z)return void(j(L.parentElement)?L.parentElement:L).remove()}}catch(V){B=!0,F=V}finally{try{$||W.return==null||W.return()}finally{if(B)throw F}}},A.value=function(){var z="",$=!0,B=!1,F=void 0;try{for(var G,W=A._getOptionsArray()[Symbol.iterator]();!($=(G=W.next()).done);$=!0){var L=G.value;if(L.checked){z=L.value;break}}}catch(V){B=!0,F=V}finally{try{$||W.return==null||W.return()}finally{if(B)throw F}}return z},A.selected=function(z){var $=null;if(z===void 0){var B=!0,F=!1,G=void 0;try{for(var W,L=A._getOptionsArray()[Symbol.iterator]();!(B=(W=L.next()).done);B=!0){var V=W.value;if(V.checked){$=V;break}}}catch(se){F=!0,G=se}finally{try{B||L.return==null||L.return()}finally{if(F)throw G}}}else{A._getOptionsArray().forEach(function(se){se.checked=!1,se.removeAttribute("checked")});var Y=!0;F=!1,G=void 0;try{for(var Z,J=A._getOptionsArray()[Symbol.iterator]();!(Y=(Z=J.next()).done);Y=!0){var ne=Z.value;ne.value===z&&(ne.setAttribute("checked",!0),ne.checked=!0,$=ne)}}catch(se){F=!0,G=se}finally{try{Y||J.return==null||J.return()}finally{if(F)throw G}}}return $},A.disable=function(){var z=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],$=!0,B=!1,F=void 0;try{for(var G,W=A._getOptionsArray()[Symbol.iterator]();!($=(G=W.next()).done);$=!0)G.value.setAttribute("disabled",z)}catch(L){B=!0,F=L}finally{try{$||W.return==null||W.return()}finally{if(B)throw F}}},A},l.default.prototype.createColorPicker=function(E){l.default._validateParameters("createColorPicker",arguments);var j=document.createElement("input");return j.type="color",E?E instanceof l.default.Color?j.value=E.toString("#rrggbb"):(l.default.prototype._colorMode="rgb",l.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},j.value=l.default.prototype.color(E).toString("#rrggbb")):j.value="#000000",(j=_(j,this)).color=function(){return E&&(E.mode&&(l.default.prototype._colorMode=E.mode),E.maxes&&(l.default.prototype._colorMaxes=E.maxes)),l.default.prototype.color(this.elt.value)},j},l.default.prototype.createInput=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",j=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",A=(l.default._validateParameters("createInput",arguments),document.createElement("input"));return A.setAttribute("value",E),A.setAttribute("type",j),_(A,this)},l.default.prototype.createFileInput=function(E){var j,A=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(l.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(j=document.createElement("input")).setAttribute("type","file"),A&&j.setAttribute("multiple",!0),j.addEventListener("change",function(O){var N=!0,D=!1,z=void 0;try{for(var $,B=O.target.files[Symbol.iterator]();!(N=($=B.next()).done);N=!0){var F=$.value;l.default.File._load(F,E)}}catch(G){D=!0,z=G}finally{try{N||B.return==null||B.return()}finally{if(D)throw z}}},!1),_(j,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},l.default.prototype.createVideo=function(E,j){return l.default._validateParameters("createVideo",arguments),C(this,"video",E,j)},l.default.prototype.createAudio=function(E,j){return l.default._validateParameters("createAudio",arguments),C(this,"audio",E,j)},l.default.prototype.VIDEO="video",l.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(E){var j=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return j?new Promise(function(A,O){j.call(navigator,E,A,O)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),l.default.prototype.createCapture=function(){for(var E=arguments.length,j=new Array(E),A=0;A<E;A++)j[A]=arguments[A];if(l.default._validateParameters("createCapture",j),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var O,N=!0,D=!0,z=0,$=j;z<$.length;z++){var B=$[z];B===l.default.prototype.VIDEO?D=!1:B===l.default.prototype.AUDIO?N=!1:w(B)==="object"?F=B:typeof B=="function"&&(O=B)}var F=F||{video:N,audio:D},G=document.createElement("video"),W=(G.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(F).then(function(L){try{"srcObject"in G?G.srcObject=L:G.src=window.URL.createObjectURL(L)}catch{G.src=L}},console.log),_(G,this,!0));return W.loadedmetadata=!1,G.addEventListener("loadedmetadata",function(){G.play(),G.width?(W.width=G.width,W.height=G.height):(W.width=W.elt.width=G.videoWidth,W.height=W.elt.height=G.videoHeight),W.loadedmetadata=!0,O&&O(G.srcObject)}),W},l.default.prototype.createElement=function(E,j){return l.default._validateParameters("createElement",arguments),E=document.createElement(E),j!==void 0&&(E.innerHTML=j),_(E,this)},l.default.Element.prototype.addClass=function(E){return this.elt.className?this.hasClass(E)||(this.elt.className=this.elt.className+" "+E):this.elt.className=E,this},l.default.Element.prototype.removeClass=function(E){return this.elt.classList.remove(E),this},l.default.Element.prototype.hasClass=function(E){return this.elt.classList.contains(E)},l.default.Element.prototype.toggleClass=function(E){return this.elt.classList.contains(E)?this.elt.classList.remove(E):this.elt.classList.add(E),this},l.default.Element.prototype.child=function(E){return E===void 0?this.elt.childNodes:(typeof E=="string"?(E[0]==="#"&&(E=E.substring(1)),E=document.getElementById(E)):E instanceof l.default.Element&&(E=E.elt),E instanceof HTMLElement&&this.elt.appendChild(E),this)},l.default.Element.prototype.center=function(E){var j=this.elt.style.display,A=this.elt.style.display==="none",O=this.parent().style.display==="none",N={x:this.elt.offsetLeft,y:this.elt.offsetTop},D=(A&&this.show(),O&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),z=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return E==="both"||E===void 0?this.position(D/2+this.parent().offsetLeft,z/2+this.parent().offsetTop):E==="horizontal"?this.position(D/2+this.parent().offsetLeft,N.y):E==="vertical"&&this.position(N.x,z/2+this.parent().offsetTop),this.style("display",j),A&&this.hide(),O&&this.parent().hide(),this},l.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},l.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},l.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var E="";return this.elt.style.transform&&(E=(E=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=E,this},l.default.Element.prototype._rotate=function(){var E="";return this.elt.style.transform&&(E=(E=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=E,this},l.default.Element.prototype.style=function(E,j){if((j=j instanceof l.default.Color?"rgba("+j.levels[0]+","+j.levels[1]+","+j.levels[2]+","+j.levels[3]/255+")":j)===void 0){if(E.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(E);for(var A=E.split(";"),O=0;O<A.length;O++){var N=A[O].split(":");N[0]&&N[1]&&(this.elt.style[N[0].trim()]=N[1].trim())}}else this.elt.style[E]=j,E!=="width"&&E!=="height"&&E!=="left"&&E!=="top"||(j=window.getComputedStyle(this.elt).getPropertyValue(E).replace(/[^\d.]/g,""),this[E]=Math.round(parseFloat(j,10)));return this},l.default.Element.prototype.attribute=function(E,j){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return j===void 0?this.elt.getAttribute(E):(this.elt.setAttribute(E,j),this);if(j===void 0)return this.elt.firstChild.getAttribute(E);for(var A=0;A<this.elt.childNodes.length;A++)this.elt.childNodes[A].setAttribute(E,j)},l.default.Element.prototype.removeAttribute=function(E){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var j=0;j<this.elt.childNodes.length;j++)this.elt.childNodes[j].removeAttribute(E);return this.elt.removeAttribute(E),this},l.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},l.default.Element.prototype.show=function(){return this.elt.style.display="block",this},l.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},l.default.Element.prototype.size=function(E,j){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var A=E,O=j,N=l.default.prototype.AUTO;if(A!==N||O!==N){if(A===N?A=j*this.width/this.height:O===N&&(O=E*this.height/this.width),this.elt instanceof HTMLCanvasElement){var D,z={},$=this.elt.getContext("2d");for(D in $)z[D]=$[D];for(D in this.elt.setAttribute("width",A*this._pInst._pixelDensity),this.elt.setAttribute("height",O*this._pInst._pixelDensity),this.elt.style.width=A+"px",this.elt.style.height=O+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),z)this.elt.getContext("2d")[D]=z[D]}else this.elt.style.width=A+"px",this.elt.style.height=O+"px",this.elt.width=A,this.elt.height=O;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},l.default.Element.prototype.remove=function(){this instanceof l.default.MediaElement&&(this.stop(),(j=this.elt.srcObject)!==null&&j.getTracks().forEach(function(A){A.stop()}));var E,j=this._pInst._elements.indexOf(this);for(E in j!==-1&&this._pInst._elements.splice(j,1),this._events)this.elt.removeEventListener(E,this._events[E]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},l.default.Element.prototype.drop=function(E,j){var A;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",A=function(O){O.preventDefault()}),this.elt.addEventListener("dragleave",A)),l.default.Element._attachListener("drop",function(O){O.preventDefault(),typeof j=="function"&&j.call(this,O),O=O.dataTransfer.files;var N=!0,D=!1,z=void 0;try{for(var $,B=O[Symbol.iterator]();!(N=($=B.next()).done);N=!0){var F=$.value;l.default.File._load(F,E)}}catch(G){D=!0,z=G}finally{try{N||B.return==null||B.return()}finally{if(D)throw z}}},this)):console.log("The File APIs are not fully supported in this browser."),this},r=function(E){var j=O;if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(E&&E.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),E&&S(j,E);var A=m(O);function O(N,D){g(this,O);var z=y(D=A.call(this,N,D));return D.elt.crossOrigin="anonymous",D._prevTime=0,D._cueIDCounter=0,D._cues=[],D.pixels=[],D._pixelsState=y(D),D._pixelDensity=1,D._modified=!1,D._frameOnCanvas=-1,Object.defineProperty(z,"src",{get:function(){var $=z.elt.children[0].src,B=z.elt.src===window.location.href?"":z.elt.src;return $===window.location.href?B:$},set:function($){for(var B=0;B<z.elt.children.length;B++)z.elt.removeChild(z.elt.children[B]);var F=document.createElement("source");F.src=$,N.appendChild(F),z.elt.src=$,z.modified=!0}}),z._onended=function(){},z.elt.onended=function(){z._onended(z)},D}return x(O,[{key:"play",value:function(){var N;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(N=this.elt.play())&&N.catch&&N.catch(function(D){D.name==="NotAllowedError"?console.error(D):console.error("Media play method encountered an unexpected error",D)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var N=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(N)},{passive:!0,once:!0})}},{key:"autoplay",value:function(N){var D=this,z=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",N),N&&!z&&(N=function(){return D._setupAutoplayFailDetection()},this.elt.readyState===4?N():this.elt.addEventListener("canplay",N,{passive:!0,once:!0})),this}},{key:"volume",value:function(N){if(N===void 0)return this.elt.volume;this.elt.volume=N}},{key:"speed",value:function(N){if(N===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=N:this.presetPlaybackRate=N}},{key:"time",value:function(N){return N===void 0?this.elt.currentTime:(this.elt.currentTime=N,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var N=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&N&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var N=arguments.length,D=new Array(N),z=0;z<N;z++)D[z]=arguments[z];return l.default.Renderer2D.prototype.loadPixels.apply(this,D)}},{key:"updatePixels",value:function(N,D,z,$){return this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.updatePixels.call(this,N,D,z,$)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var N=arguments.length,D=new Array(N),z=0;z<N;z++)D[z]=arguments[z];return l.default.Renderer2D.prototype.get.apply(this,D)}},{key:"_getPixel",value:function(){this.loadPixels();for(var N=arguments.length,D=new Array(N),z=0;z<N;z++)D[z]=arguments[z];return l.default.Renderer2D.prototype._getPixel.apply(this,D)}},{key:"set",value:function(N,D,z){this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.set.call(this,N,D,z),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var N=arguments.length,D=new Array(N),z=0;z<N;z++)D[z]=arguments[z];l.default.prototype.copy.apply(this,D)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var N=arguments.length,D=new Array(N),z=0;z<N;z++)D[z]=arguments[z];l.default.Image.prototype.mask.apply(this,D)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(N){this._modified=N}},{key:"onended",value:function(N){return this._onended=N,this}},{key:"connect",value:function(N){var D,z;if(typeof l.default.prototype.getAudioContext=="function")D=l.default.prototype.getAudioContext(),z=l.default.soundOut.input;else try{z=(D=N.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=D.createMediaElementSource(this.elt),this.audioSourceNode.connect(z)),N?N.input?this.audioSourceNode.connect(N.input):this.audioSourceNode.connect(N):this.audioSourceNode.connect(z)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(N,D,z){var $=this._cueIDCounter++;return D=new k(D,N,$,z),this._cues.push(D),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),$}},{key:"removeCue",value:function(N){for(var D=0;D<this._cues.length;D++)this._cues[D].id===N&&(console.log(N),this._cues.splice(D,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var N=this.time(),D=0;D<this._cues.length;D++){var z=this._cues[D].time,$=this._cues[D].val;this._prevTime<z&&z<=N&&this._cues[D].callback($)}this._prevTime=N}}]),O}(l.default.Element),l.default.MediaElement=r,r=function(){function E(j,A){g(this,E),this.file=j,this._pInst=A,A=j.type.split("/"),this.type=A[0],this.subtype=A[1],this.name=j.name,this.size=j.size,this.data=void 0}return x(E,null,[{key:"_createLoader",value:function(j,A){var O=new FileReader;return O.onload=function(N){var D,z=new l.default.File(j);z.file.type==="application/json"?z.data=JSON.parse(N.target.result):z.file.type==="text/xml"?(D=new DOMParser().parseFromString(N.target.result,"text/xml"),z.data=new l.default.XML(D.documentElement)):z.data=N.target.result,A(z)},O}},{key:"_load",value:function(j,A){var O;/^text\//.test(j.type)||j.type==="application/json"?l.default.File._createLoader(j,A).readAsText(j):/^(video|audio)\//.test(j.type)?((O=new l.default.File(j)).data=URL.createObjectURL(j),A(O)):l.default.File._createLoader(j,A).readAsDataURL(j)}}]),E}(),l.default.File=r,r=l.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238}],290:[function(r,h,f){function u(E){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(E)}function l(E){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(j){return u(j)}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":u(j)})(E)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(k=r("../core/main"))&&k.__esModule?k:{default:k},x=function(E){if(E&&E.__esModule)return E;if(E===null||l(E)!=="object"&&typeof E!="function")return{default:E};var j=function(){var z;return typeof WeakMap!="function"?null:(z=new WeakMap,z)}();if(j&&j.has(E))return j.get(E);var A,O={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in E){var D;Object.prototype.hasOwnProperty.call(E,A)&&((D=N?Object.getOwnPropertyDescriptor(E,A):null)&&(D.get||D.set)?Object.defineProperty(O,A,D):O[A]=E[A])}return O.default=E,j&&j.set(E,O),O}(r("../core/constants"));d.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",d.default.prototype.accelerationX=0,d.default.prototype.accelerationY=0,d.default.prototype.accelerationZ=0,d.default.prototype.pAccelerationX=0,d.default.prototype.pAccelerationY=0,d.default.prototype.pAccelerationZ=0,d.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},d.default.prototype.rotationX=0,d.default.prototype.rotationY=0,d.default.prototype.rotationZ=0,d.default.prototype.pRotationX=0,d.default.prototype.pRotationY=0;var S=d.default.prototype.pRotationZ=0,m=0,y=0,b="clockwise",g="clockwise",w="clockwise",_=(d.default.prototype.pRotateDirectionX=void 0,d.default.prototype.pRotateDirectionY=void 0,d.default.prototype.pRotateDirectionZ=void 0,d.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},d.default.prototype.turnAxis=void 0,.5),C=30,k=(d.default.prototype.setMoveThreshold=function(E){d.default._validateParameters("setMoveThreshold",arguments),_=E},d.default.prototype.setShakeThreshold=function(E){d.default._validateParameters("setShakeThreshold",arguments),C=E},d.default.prototype._ondeviceorientation=function(E){this._updatePRotations(),this._angleMode===x.radians&&(E.beta=E.beta*(_PI/180),E.gamma=E.gamma*(_PI/180),E.alpha=E.alpha*(_PI/180)),this._setProperty("rotationX",E.beta),this._setProperty("rotationY",E.gamma),this._setProperty("rotationZ",E.alpha),this._handleMotion()},d.default.prototype._ondevicemotion=function(E){this._updatePAccelerations(),this._setProperty("accelerationX",2*E.acceleration.x),this._setProperty("accelerationY",2*E.acceleration.y),this._setProperty("accelerationZ",2*E.acceleration.z),this._handleMotion()},d.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var E,j,A,O,N,D=this._isGlobal?window:this;typeof D.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>_||Math.abs(this.accelerationY-this.pAccelerationY)>_||Math.abs(this.accelerationZ-this.pAccelerationZ)>_)&&D.deviceMoved(),typeof D.deviceTurned=="function"&&(j=this.rotationX+180,E=this.pRotationX+180,A=S+180,0<j-E&&j-E<270||j-E<-270?b="clockwise":(j-E<0||270<j-E)&&(b="counter-clockwise"),b!==this.pRotateDirectionX&&(A=j),90<Math.abs(j-A)&&Math.abs(j-A)<270&&(A=j,this._setProperty("turnAxis","X"),D.deviceTurned()),this.pRotateDirectionX=b,S=A-180,E=this.rotationY+180,j=this.pRotationY+180,A=m+180,0<E-j&&E-j<270||E-j<-270?g="clockwise":(E-j<0||270<E-this.pRotationY)&&(g="counter-clockwise"),g!==this.pRotateDirectionY&&(A=E),90<Math.abs(E-A)&&Math.abs(E-A)<270&&(A=E,this._setProperty("turnAxis","Y"),D.deviceTurned()),this.pRotateDirectionY=g,m=A-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?w="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(w="counter-clockwise"),w!==this.pRotateDirectionZ&&(y=this.rotationZ),90<Math.abs(this.rotationZ-y)&&Math.abs(this.rotationZ-y)<270&&(y=this.rotationZ,this._setProperty("turnAxis","Z"),D.deviceTurned()),this.pRotateDirectionZ=w,this._setProperty("turnAxis",void 0)),typeof D.deviceShaken=="function"&&(this.pAccelerationX!==null&&(O=Math.abs(this.accelerationX-this.pAccelerationX),N=Math.abs(this.accelerationY-this.pAccelerationY)),C<O+N&&D.deviceShaken())},d.default);f.default=k},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],291:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};u.default.prototype.isKeyPressed=!1,u.default.prototype.keyIsPressed=!1,u.default.prototype.key="",u.default.prototype.keyCode=0,u.default.prototype._onkeydown=function(l){var d;this._downKeys[l.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",l.which),this._downKeys[l.which]=!0,this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(d=this._isGlobal?window:this).keyPressed!="function"||l.charCode||d.keyPressed(l)===!1&&l.preventDefault())},u.default.prototype._onkeyup=function(l){this._downKeys[l.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),this._setProperty("keyCode",l.which);var d=this._isGlobal?window:this;typeof d.keyReleased=="function"&&d.keyReleased(l)===!1&&l.preventDefault()},u.default.prototype._onkeypress=function(l){var d;l.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",l.which),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(d=this._isGlobal?window:this).keyTyped=="function"&&d.keyTyped(l)===!1&&l.preventDefault())},u.default.prototype._onblur=function(l){this._downKeys={}},u.default.prototype.keyIsDown=function(l){return u.default._validateParameters("keyIsDown",arguments),this._downKeys[l]||!1},u.default.prototype._areDownKeys=function(){for(var l in this._downKeys)if(this._downKeys.hasOwnProperty(l)&&this._downKeys[l]===!0)return!0;return!1},r=u.default,f.default=r},{"../core/main":273}],292:[function(r,h,f){function u(S){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(S)}function l(S){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(m){return u(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":u(m)})(S)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(d=r("../core/main"))&&d.__esModule?d:{default:d},x=function(S){if(S&&S.__esModule)return S;if(S===null||l(S)!=="object"&&typeof S!="function")return{default:S};var m=function(){var _;return typeof WeakMap!="function"?null:(_=new WeakMap,_)}();if(m&&m.has(S))return m.get(S);var y,b={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in S){var w;Object.prototype.hasOwnProperty.call(S,y)&&((w=g?Object.getOwnPropertyDescriptor(S,y):null)&&(w.get||w.set)?Object.defineProperty(b,y,w):b[y]=S[y])}return b.default=S,m&&m.set(S,b),b}(r("../core/constants"));d.default.prototype.movedX=0,d.default.prototype.movedY=0,d.default.prototype._hasMouseInteracted=!1,d.default.prototype.mouseX=0,d.default.prototype.mouseY=0,d.default.prototype.pmouseX=0,d.default.prototype.pmouseY=0,d.default.prototype.winMouseX=0,d.default.prototype.winMouseY=0,d.default.prototype.pwinMouseX=0,d.default.prototype.pwinMouseY=0,d.default.prototype.mouseButton=0,d.default.prototype.mouseIsPressed=!1,d.default.prototype._updateNextMouseCoords=function(S){var m,y,b,g,w;this._curElement!==null&&(!S.touches||0<S.touches.length)&&(m=this._curElement.elt,y=this.width,b=this.height,(g=S)&&!g.clientX&&(g.touches?g=g.touches[0]:g.changedTouches&&(g=g.changedTouches[0])),w=m.getBoundingClientRect(),y=m.scrollWidth/y||1,m=m.scrollHeight/b||1,b={x:(g.clientX-w.left)/y,y:(g.clientY-w.top)/m,winX:g.clientX,winY:g.clientY,id:g.identifier},this._setProperty("movedX",S.movementX),this._setProperty("movedY",S.movementY),this._setProperty("mouseX",b.x),this._setProperty("mouseY",b.y),this._setProperty("winMouseX",b.winX),this._setProperty("winMouseY",b.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},d.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},d.default.prototype._setMouseButton=function(S){S.button===1?this._setProperty("mouseButton",x.CENTER):S.button===2?this._setProperty("mouseButton",x.RIGHT):this._setProperty("mouseButton",x.LEFT)},d.default.prototype._onmousemove=function(S){var m=this._isGlobal?window:this;this._updateNextMouseCoords(S),this.mouseIsPressed?typeof m.mouseDragged=="function"?m.mouseDragged(S)===!1&&S.preventDefault():typeof m.touchMoved=="function"&&m.touchMoved(S)===!1&&S.preventDefault():typeof m.mouseMoved=="function"&&m.mouseMoved(S)===!1&&S.preventDefault()},d.default.prototype._onmousedown=function(S){var m=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(S),this._updateNextMouseCoords(S),typeof m.mousePressed=="function"?m.mousePressed(S)===!1&&S.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof m.touchStarted=="function"&&m.touchStarted(S)===!1&&S.preventDefault()},d.default.prototype._onmouseup=function(S){var m=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof m.mouseReleased=="function"?m.mouseReleased(S)===!1&&S.preventDefault():typeof m.touchEnded=="function"&&m.touchEnded(S)===!1&&S.preventDefault()},d.default.prototype._ondragend=d.default.prototype._onmouseup,d.default.prototype._ondragover=d.default.prototype._onmousemove,d.default.prototype._onclick=function(S){var m=this._isGlobal?window:this;typeof m.mouseClicked=="function"&&m.mouseClicked(S)===!1&&S.preventDefault()},d.default.prototype._ondblclick=function(S){var m=this._isGlobal?window:this;typeof m.doubleClicked=="function"&&m.doubleClicked(S)===!1&&S.preventDefault()},d.default.prototype._mouseWheelDeltaY=0,d.default.prototype._pmouseWheelDeltaY=0,d.default.prototype._onwheel=function(S){var m=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",S.deltaY),typeof m.mouseWheel=="function"&&(S.delta=S.deltaY,m.mouseWheel(S)===!1&&S.preventDefault())},d.default.prototype.requestPointerLock=function(){var S=this._curElement.elt;return S.requestPointerLock=S.requestPointerLock||S.mozRequestPointerLock,S.requestPointerLock?(S.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},d.default.prototype.exitPointerLock=function(){document.exitPointerLock()},r=d.default,f.default=r},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],293:[function(r,h,f){r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.string.includes"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../core/main"))&&r.__esModule?r:{default:r}).default.prototype.touches=[],r.default.prototype._updateTouchCoords=function(u){if(this._curElement!==null){for(var l=[],d=0;d<u.touches.length;d++)l[d]=function(x,S,m,y){var b=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,g=x.getBoundingClientRect();return S=x.scrollWidth/S||1,x=x.scrollHeight/m||1,{x:((m=y.touches[b]||y.changedTouches[b]).clientX-g.left)/S,y:(m.clientY-g.top)/x,winX:m.clientX,winY:m.clientY,id:m.identifier}}(this._curElement.elt,this.width,this.height,u,d);this._setProperty("touches",l)}},r.default.prototype._ontouchstart=function(u){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(u),this._updateNextMouseCoords(u),this._updateMouseCoords(),typeof l.touchStarted=="function"?l.touchStarted(u)===!1&&u.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof l.mousePressed=="function"&&l.mousePressed(u)===!1&&u.preventDefault()},r.default.prototype._ontouchmove=function(u){var l=this._isGlobal?window:this;this._updateTouchCoords(u),this._updateNextMouseCoords(u),typeof l.touchMoved=="function"?l.touchMoved(u)===!1&&u.preventDefault():typeof l.mouseDragged=="function"&&l.mouseDragged(u)===!1&&u.preventDefault()},r.default.prototype._ontouchend=function(u){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(u),this._updateNextMouseCoords(u);var l=this._isGlobal?window:this;typeof l.touchEnded=="function"?l.touchEnded(u)===!1&&u.preventDefault():typeof l.mouseReleased=="function"&&l.mouseReleased(u)===!1&&u.preventDefault()},r=r.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.string.includes":189}],294:[function(r,h,f){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.int32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u,l,d,x,S={_toPixels:function(m){var y,b;return m instanceof ImageData?m.data:m.getContext("2d")?m.getContext("2d").getImageData(0,0,m.width,m.height).data:m.getContext("webgl")?(b=(y=m.getContext("webgl")).drawingBufferWidth*y.drawingBufferHeight*4,b=new Uint8Array(b),y.readPixels(0,0,m.width,m.height,y.RGBA,y.UNSIGNED_BYTE,b),b):void 0},_getARGB:function(m,y){return m[3+(y*=4)]<<24&4278190080|m[y]<<16&16711680|m[1+y]<<8&65280|255&m[2+y]},_setPixels:function(m,y){for(var b,g=0,w=m.length;g<w;g++)m[0+(b=4*g)]=(16711680&y[g])>>>16,m[1+b]=(65280&y[g])>>>8,m[2+b]=255&y[g],m[3+b]=(4278190080&y[g])>>>24},_toImageData:function(m){return m instanceof ImageData?m:m.getContext("2d").getImageData(0,0,m.width,m.height)},_createImageData:function(m,y){return S._tmpCanvas=document.createElement("canvas"),S._tmpCtx=S._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(m,y)},apply:function(m,y,b){var g=m.getContext("2d"),w=g.getImageData(0,0,m.width,m.height);(y=y(w,b))instanceof ImageData?g.putImageData(y,0,0,0,0,m.width,m.height):g.putImageData(w,0,0,0,0,m.width,m.height)},threshold:function(m,y){for(var b=S._toPixels(m),g=(y===void 0&&(y=.5),Math.floor(255*y)),w=0;w<b.length;w+=4){var _=g<=.2126*b[w]+.7152*b[w+1]+.0722*b[w+2]?255:0;b[w]=b[w+1]=b[w+2]=_}},gray:function(m){for(var y=S._toPixels(m),b=0;b<y.length;b+=4){var g=y[b],w=y[b+1],_=y[b+2];y[b]=y[b+1]=y[b+2]=.2126*g+.7152*w+.0722*_}},opaque:function(m){for(var y=S._toPixels(m),b=0;b<y.length;b+=4)y[b+3]=255;return y},invert:function(m){for(var y=S._toPixels(m),b=0;b<y.length;b+=4)y[b]=255-y[b],y[b+1]=255-y[b+1],y[b+2]=255-y[b+2]},posterize:function(m,y){var b=S._toPixels(m);if(y<2||255<y)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var g=y-1,w=0;w<b.length;w+=4){var _=b[w],C=b[w+1],k=b[w+2];b[w]=255*(_*y>>8)/g,b[w+1]=255*(C*y>>8)/g,b[w+2]=255*(k*y>>8)/g}},dilate:function(m){for(var y,b,g,w,_,C,k,E,j,A=S._toPixels(m),O=0,N=A.length?A.length/4:0,D=new Int32Array(N);O<N;)for(b=(y=O)+m.width;O<b;)w=g=S._getARGB(A,O),(j=O-1)<y&&(j=O),b<=(E=O+1)&&(E=O),(_=O-m.width)<0&&(_=0),N<=(C=O+m.width)&&(C=O),_=S._getARGB(A,_),j=S._getARGB(A,j),C=S._getARGB(A,C),(w=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))<(k=77*(j>>16&255)+151*(j>>8&255)+28*(255&j))&&(g=j,w=k),w<(k=77*((j=S._getARGB(A,E))>>16&255)+151*(j>>8&255)+28*(255&j))&&(g=j,w=k),w<(E=77*(_>>16&255)+151*(_>>8&255)+28*(255&_))&&(g=_,w=E),w<(j=77*(C>>16&255)+151*(C>>8&255)+28*(255&C))&&(g=C,w=j),D[O++]=g;S._setPixels(A,D)},erode:function(m){for(var y,b,g,w,_,C,k,E,j,A=S._toPixels(m),O=0,N=A.length?A.length/4:0,D=new Int32Array(N);O<N;)for(b=(y=O)+m.width;O<b;)w=g=S._getARGB(A,O),(j=O-1)<y&&(j=O),b<=(E=O+1)&&(E=O),(_=O-m.width)<0&&(_=0),N<=(C=O+m.width)&&(C=O),_=S._getARGB(A,_),j=S._getARGB(A,j),C=S._getARGB(A,C),(k=77*(j>>16&255)+151*(j>>8&255)+28*(255&j))<(w=77*(w>>16&255)+151*(w>>8&255)+28*(255&w))&&(g=j,w=k),(k=77*((j=S._getARGB(A,E))>>16&255)+151*(j>>8&255)+28*(255&j))<w&&(g=j,w=k),(E=77*(_>>16&255)+151*(_>>8&255)+28*(255&_))<w&&(g=_,w=E),(j=77*(C>>16&255)+151*(C>>8&255)+28*(255&C))<w&&(g=C,w=j),D[O++]=g;S._setPixels(A,D)},blur:function(m,y){for(var b,g,w,_,C,k,E,j,A,O,N=S._toPixels(m),D=m.width,z=m.height,$=D*z,B=new Int32Array($),F=0;F<$;F++)B[F]=S._getARGB(N,F);var G,W,L,V,Y,Z,J,ne,se=new Int32Array($),ie=new Int32Array($),X=new Int32Array($),Q=new Int32Array($),re=0,ce=3.5*y|0;if(u!==(ce=ce<1?1:ce<248?ce:248)){l=1+(u=ce)<<1,d=new Int32Array(l),x=new Array(l);for(var he=0;he<l;he++)x[he]=new Int32Array(256);for(var fe=1,oe=ce-1;fe<ce;fe++){d[ce+fe]=d[oe]=Z=oe*oe,J=x[ce+fe],ne=x[oe--];for(var me=0;me<256;me++)J[me]=ne[me]=Z*me}Y=d[ce]=ce*ce,J=x[ce];for(var we=0;we<256;we++)J[we]=Y*we}for(W=0;W<z;W++){for(G=0;G<D;G++){if(_=w=g=C=b=0,(k=G-u)<0)O=-k,k=0;else{if(D<=k)break;O=0}for(L=O;L<l&&!(D<=k);L++){var ke=B[k+re];C+=(V=x[L])[(-16777216&ke)>>>24],g+=V[(16711680&ke)>>16],w+=V[(65280&ke)>>8],_+=V[255&ke],b+=d[L],k++}se[E=re+G]=C/b,ie[E]=g/b,X[E]=w/b,Q[E]=_/b}re+=D}for(A=(j=-u)*D,W=re=0;W<z;W++){for(G=0;G<D;G++){if(_=w=g=C=b=0,j<0)O=E=-j,k=G;else{if(z<=j)break;O=0,E=j,k=G+A}for(L=O;L<l&&!(z<=E);L++)C+=(V=x[L])[se[k]],g+=V[ie[k]],w+=V[X[k]],_+=V[Q[k]],b+=d[L],E++,k+=D;B[G+re]=C/b<<24|g/b<<16|w/b<<8|_/b}re+=D,A+=D,j++}S._setPixels(N,B)}};f.default=S},{"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int32-array":215,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232}],295:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=d(r("../core/main")),l=d(r("omggif"));function d(S){return S&&S.__esModule?S:{default:S}}function x(S){return function(m){if(Array.isArray(m)){for(var y=0,b=new Array(m.length);y<m.length;y++)b[y]=m[y];return b}}(S)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(S)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}u.default.prototype.createImage=function(S,m){return u.default._validateParameters("createImage",arguments),new u.default.Image(S,m)},u.default.prototype.saveCanvas=function(){u.default._validateParameters("saveCanvas",arguments);var S,m,y,b,g=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(S=arguments[0],g.shift()):arguments[0]instanceof u.default.Element?(S=arguments[0].elt,g.shift()):S=this._curElement&&this._curElement.elt,1<=g.length&&(m=g[0]),y=(y=2<=g.length?g[1]:y)||u.default.prototype._checkFileExtension(m,y)[1]||"png"){default:b="image/png";break;case"jpeg":case"jpg":b="image/jpeg"}S.toBlob(function(w){u.default.prototype.downloadFile(w,m,y)},b)},u.default.prototype.encodeAndDownloadGif=function(S,m){for(var y=S.gifProperties,b=((J=y.loopLimit)===1?J=null:J===null&&(J=0),new Uint8Array(S.width*S.height*y.numFrames)),g=[],w={},_=0;_<y.numFrames;_++){for(var C=new Set,k=y.frames[_].image.data,E=k.length,j=new Uint32Array(S.width*S.height),A=0,O=0;A<E;A+=4,O++){var N=k[A+0]<<16|k[A+1]<<8|k[A+2]<<0;C.add(N),j[O]=N}var D=x(C).sort().toString();w[D]===void 0?w[D]={freq:1,frames:[_]}:(w[D].freq+=1,w[D].frames.push(_)),g.push(j)}for(var z=[],$=Object.keys(w).sort(function(X,Q){return w[Q].freq-w[X].freq}),B=$[0].split(",").map(function(X){return parseInt(X)}),F=(z=z.concat(w[B].frames),new Set(B)),G=1;G<$.length;G++){var W=$[G].split(",").map(function(X){return parseInt(X)}).filter(function(X){return!F.has(X)});if(B.length+W.length<=256){for(var L=0;L<W.length;L++)B.push(W[L]),F.add(W[L]);z=z.concat(w[$[G]].frames)}}z=new Set(z);for(var V={},Y=0;Y<B.length;Y++)V[B[Y]]||(V[B[Y]]=Y);for(var Z=1;Z<B.length;)Z<<=1;B.length=Z;for(var J={loop:J,palette:new Uint32Array(B)},ne=new l.default.GifWriter(b,S.width,S.height,J),se={},ie=0;ie<y.numFrames;ie++)(function(X){var Q=!z.has(X),re=Q?[]:B,ce=new Uint8Array(S.width*S.height),he={},fe=new Set,oe=(g[X].forEach(function(_e,Me){Q?(he[_e]===void 0&&(he[_e]=re.length,re.push(_e)),ce[Me]=he[_e]):ce[Me]=V[_e],0<X&&g[X-1][Me]!==_e&&fe.add(_e)}),{});if(0<(me=re.filter(function(_e){return!fe.has(_e)})).length){var me=me[0],we=(Q?he:V)[me];if(0<X){for(var ke=0;ke<g[X].length;ke++)g[X-1][ke]===g[X][ke]&&(ce[ke]=we);oe.transparent=we,se.frameOpts.disposal=1}}if(oe.delay=y.frames[X].delay/10,Q){for(var ve=1;ve<re.length;)ve<<=1;re.length=ve,oe.palette=new Uint32Array(re)}0<X&&ne.addFrame(0,0,S.width,S.height,se.pixelPaletteIndex,se.frameOpts),se={pixelPaletteIndex:ce,frameOpts:oe}})(ie);se.frameOpts.disposal=1,ne.addFrame(0,0,S.width,S.height,se.pixelPaletteIndex,se.frameOpts),J=new Blob([b.slice(0,ne.end())],{type:"image/gif"}),u.default.prototype.downloadFile(J,m,"gif")},u.default.prototype.saveFrames=function(S,m,y,b,g){u.default._validateParameters("saveFrames",arguments),y=u.default.prototype.constrain(y=y||3,0,15),y*=1e3,b=u.default.prototype.constrain(b||15,0,22);var w=0,_=u.default.prototype._makeFrame,C=this._curElement.elt,k=[],E=setInterval(function(){k.push(_(S+w,m,C)),w++},1e3/b);setTimeout(function(){if(clearInterval(E),g)g(k);else{var j=!0,A=!1,O=void 0;try{for(var N,D=k[Symbol.iterator]();!(j=(N=D.next()).done);j=!0){var z=N.value;u.default.prototype.downloadFile(z.imageData,z.filename,z.ext)}}catch($){A=!0,O=$}finally{try{j||D.return==null||D.return()}finally{if(A)throw O}}}k=[]},.01+y)},u.default.prototype._makeFrame=function(S,m,y){var b;if(y=this?this._curElement.elt:y,m)switch(m.toLowerCase()){case"png":b="image/png";break;case"jpeg":case"jpg":b="image/jpeg";break;default:b="image/png"}else m="png",b="image/png";y=(y=y.toDataURL(b)).replace(b,"image/octet-stream");var g={};return g.imageData=y,g.filename=S,g.ext=m,g},r=u.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,omggif:246}],296:[function(r,h,f){function u(C){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(C)}function l(C){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(k){return u(k)}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":u(k)})(C)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,r("regenerator-runtime/runtime");var d=b(r("../core/main")),x=b(r("../core/helpers")),S=function(C){if(C&&C.__esModule)return C;if(C===null||l(C)!=="object"&&typeof C!="function")return{default:C};var k=function(){var N;return typeof WeakMap!="function"?null:(N=new WeakMap,N)}();if(k&&k.has(C))return k.get(C);var E,j={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in C){var O;Object.prototype.hasOwnProperty.call(C,E)&&((O=A?Object.getOwnPropertyDescriptor(C,E):null)&&(O.get||O.set)?Object.defineProperty(j,E,O):j[E]=C[E])}return j.default=C,k&&k.set(C,j),j}(r("../core/constants")),m=b(r("omggif")),y=r("gifenc");function b(C){return C&&C.__esModule?C:{default:C}}function g(C,k,E,j,A,O,N){try{var D=C[O](N),z=D.value}catch($){return void E($)}D.done?k(z):Promise.resolve(z).then(j,A)}function w(C,k,E,j,A,O,N,D,z,$,B){var F,G,W,L,V,Y,Z,J,ne;return C===S.COVER&&(F=k,W=E,Z=O,J=N,Y=D,ne=z,G=$,L=B,Z/=V=Math.max(Z/G,J/L),J/=V,V=Y,Y=ne,F===S.CENTER?V+=(G-Z)/2:F===S.RIGHT&&(V+=G-Z),W===S.CENTER?Y+=(L-J)/2:W===S.BOTTOM&&(Y+=L-J),D=(ne={x:V,y:Y,w:Z,h:J}).x,z=ne.y,$=ne.w,B=ne.h),C===S.CONTAIN&&(F=k,G=E,W=j,L=A,V=O,Y=N,Z=$,J=B,Z/=ne=Math.max(Z/V,J/Y),J/=ne,ne=W,W=L,F===S.CENTER?ne+=(V-Z)/2:F===S.RIGHT&&(ne+=V-Z),G===S.CENTER?W+=(Y-J)/2:G===S.BOTTOM&&(W+=Y-J),j=(C={x:ne,y:W,w:Z,h:J}).x,A=C.y,O=C.w,N=C.h),{sx:D,sy:z,sw:$,sh:B,dx:j,dy:A,dw:O,dh:N}}function _(C,k){return 0<C&&C<k?C:k}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),d.default.prototype.loadImage=function(C,k,E){d.default._validateParameters("loadImage",arguments);var j=new d.default.Image(1,1,this),A=this,O=new Request(C,{method:"GET",mode:"cors"});return fetch(C,O).then(function(N){var D,z=N.headers.get("content-type");z===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),z&&z.includes("image/gif")?N.arrayBuffer().then(function($){if($){$=new Uint8Array($);for(var B=j,F=k,G=E,W=(function(X){A._decrementPreload()}).bind(A),L=new m.default.GifReader($),V=(B.width=B.canvas.width=L.width,B.height=B.canvas.height=L.height,[]),Y=L.numFrames(),Z=new Uint8ClampedArray(B.width*B.height*4),J=0;J<Y;J++){var ne=L.frameInfo(J),se=B.drawingContext.getImageData(0,0,B.width,B.height),ie=(Z=se.data.slice(),function(X,Q){try{Q.decodeAndBlitFrameRGBA(X,Z)}catch(re){d.default._friendlyFileLoadError(8,B.src),typeof G=="function"?G(re):console.error(re)}}(J,L),new ImageData(Z,B.width,B.height));(ie=(B.drawingContext.putImageData(ie,0,0),ne.delay))===0&&(ie=10),V.push({image:B.drawingContext.getImageData(0,0,B.width,B.height),delay:10*ie}),ne.disposal===2?B.drawingContext.clearRect(ne.x,ne.y,ne.width,ne.height):ne.disposal===3&&B.drawingContext.putImageData(se,0,0,ne.x,ne.y,ne.width,ne.height)}($=L.loopCount())===null?$=1:$===0&&($=null),B.drawingContext.putImageData(V[0].image,0,0),1<V.length&&(B.gifProperties={displayIndex:0,loopLimit:$,loopCount:0,frames:V,numFrames:Y,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof F=="function"&&F(B),W()}},function($){typeof E=="function"?(E($),A._decrementPreload()):console.error($)}):((D=new Image).onload=function(){j.width=j.canvas.width=D.width,j.height=j.canvas.height=D.height,j.drawingContext.drawImage(D,0,0),j.modified=!0,typeof k=="function"&&k(j),A._decrementPreload()},D.onerror=function($){d.default._friendlyFileLoadError(0,D.src),typeof E=="function"?(E($),A._decrementPreload()):console.error($)},C.indexOf("data:image/")!==0&&(D.crossOrigin="Anonymous"),D.src=C),j.modified=!0}).catch(function(N){d.default._friendlyFileLoadError(0,C),typeof E=="function"?(E(N),A._decrementPreload()):console.error(N)}),j},d.default.prototype.saveGif=function(){C=regeneratorRuntime.mark(function E(j,A){var O,N,D,z,$,B,F,G,W,L,V,Y,Z,J,ne,se,ie,X,Q,re,ce,he,fe,oe,me,we,ke=arguments;return regeneratorRuntime.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(O=2<ke.length&&ke[2]!==void 0?ke[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof j!="string")throw TypeError("fileName parameter must be a string");ve.next=3;break;case 3:if(typeof A!="number")throw TypeError("Duration parameter must be a number");ve.next=5;break;case 5:if(N=O&&O.delay||0,D=O&&O.units||"seconds",z=O&&O.silent||!1,$=O&&O.notificationDuration||0,B=O&&O.notificationID||"progressBar",typeof N!="number")throw TypeError("Delay parameter must be a number");ve.next=12;break;case 12:if(D!=="seconds"&&D!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ve.next=14;break;case 14:if(typeof z!="boolean")throw TypeError("Silent parameter must be a boolean");ve.next=16;break;case 16:if(typeof $!="number")throw TypeError("Notification duration parameter must be a number");ve.next=18;break;case 18:if(typeof B!="string")throw TypeError("Notification ID parameter must be a string");ve.next=20;break;case 20:return this._recording=!0,L=this._targetFrameRate,F=(F=1/(L=L!==1/0&&L!==void 0&&L!==0?L:60)*1e3)<20?20:F,W=(G=D==="seconds"?A*L:A)+(L=D==="seconds"?N*L:N),L=L,this.frameCount=L,V=this._pixelDensity,this.pixelDensity(1),Y=[],document.getElementById(B)!==null&&document.getElementById(B).remove(),z||((Z=this.createP("")).id(B),Z.style("font-size","16px"),Z.style("font-family","Montserrat"),Z.style("background-color","#ffffffa0"),Z.style("padding","8px"),Z.style("border-radius","10px"),Z.position(0,0)),this._renderer instanceof d.default.RendererGL&&(ne=this.drawingContext,J=new Uint8Array(ne.drawingBufferWidth*ne.drawingBufferHeight*4)),this.noLoop(),ve.next=39,Promise.resolve();case 39:if(L<W)return this.redraw(),oe=void 0,oe=this._renderer instanceof d.default.RendererGL?(J=new Uint8Array(ne.drawingBufferWidth*ne.drawingBufferHeight*4),ne.readPixels(0,0,ne.drawingBufferWidth,ne.drawingBufferHeight,ne.RGBA,ne.UNSIGNED_BYTE,J),function(_e){for(var Me=parseInt(height/2),He=4*width,ze=new Uint8Array(4*width),st=0;st<Me;++st){var gt=st*He,pt=(height-st-1)*He;ze.set(_e.subarray(gt,gt+He)),_e.copyWithin(gt,pt,pt+He),_e.set(ze,pt)}return _e}(J)):this.drawingContext.getImageData(0,0,this.width,this.height).data,Y.push(oe),L++,z||Z.html("Saved frame <b>"+Y.length.toString()+"</b> out of "+G.toString()),ve.next=48,new Promise(function(_e){return setTimeout(_e,0)});ve.next=50;break;case 48:ve.next=39;break;case 50:z||Z.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(V),se=(0,y.GIFEncoder)(),ie=function(_e){for(var Me=new Uint8Array(_e.length*_e[0].length),He=0;He<_e.length;He++)Me.set(_e[He],He*_e[0].length);var ze=(0,y.quantize)(Me,256,{format:"rgba4444",oneBitAlpha:!0});return ze.length===256?ze[ze.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:ze.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),ze}(Y),X={},Q=function(_e){for(var Me=_e.length/4,He=new Uint8Array(Me),ze=0;ze<Me;ze++){var st=_e[4*ze]<<24|_e[4*ze+1]<<16|_e[4*ze+2]<<8|_e[4*ze+3];X[st]===void 0&&(X[st]=(0,y.nearestColorIndex)(ie,_e.slice(4*ze,4*(ze+1)))),He[ze]=X[st]}return He},re=ie.length-1,ce=[],he=0;case 60:if(!(he<Y.length)){ve.next=71;break}if(fe=Q(Y[he]),oe=fe.slice(),he===0)se.writeFrame(fe,this.width,this.height,{palette:ie,delay:F,dispose:1});else{for(me=0;me<fe.length;me++)fe[me]===ce[me]&&(fe[me]=re);se.writeFrame(fe,this.width,this.height,{delay:F,transparent:!0,transparentIndex:re,dispose:1})}return ce=oe,z||Z.html("Rendered frame <b>"+he.toString()+"</b> out of "+G.toString()),ve.next=68,new Promise(function(_e){return setTimeout(_e,0)});case 68:he++,ve.next=60;break;case 71:se.finish(),we=se.bytesView(),we=new Blob([we],{type:"image/gif"}),Y=[],this._recording=!1,this.loop(),z||(Z.html("Done. Downloading your gif!🌸"),0<$&&setTimeout(function(){return Z.remove()},1e3*$)),d.default.prototype.downloadFile(we,j,"gif");case 80:case"end":return ve.stop()}},E,this)});var C,k=function(){var E=this,j=arguments;return new Promise(function(A,O){var N=C.apply(E,j);function D($){g(N,A,O,D,z,"next",$)}function z($){g(N,A,O,D,z,"throw",$)}D(void 0)})};return function(E,j){return k.apply(this,arguments)}}(),d.default.prototype.image=function(C,k,E,j,A,O,N,D,z,$,B,F){d.default._validateParameters("image",arguments);var G=C.width,W=C.height,L=(F=F||S.CENTER,B=B||S.CENTER,C.elt&&C.elt.videoWidth&&!C.canvas&&(G=C.elt.videoWidth,W=C.elt.videoHeight),j||G);A=A||W,O=O||0,N=N||0,D=_(D||G,G),G=_(z||W,W),z=1,C.elt&&!C.canvas&&C.elt.style.width&&(z=C.elt.videoWidth&&!j?C.elt.videoWidth:C.elt.width,z/=parseInt(C.elt.style.width,10)),O*=z,N*=z,G*=z,D*=z,W=w($,B,F,(W=x.default.modeAdjust(k,E,L,A,this._renderer._imageMode)).x,W.y,W.w,W.h,O,N,D,G),this._renderer.image(C,W.sx,W.sy,W.sw,W.sh,W.dx,W.dy,W.dw,W.dh)},d.default.prototype.tint=function(){for(var C=arguments.length,k=new Array(C),E=0;E<C;E++)k[E]=arguments[E];d.default._validateParameters("tint",k);var j=this.color.apply(this,k);this._renderer._tint=j.levels},d.default.prototype.noTint=function(){this._renderer._tint=null},d.default.prototype._getTintedImageCanvas=d.default.Renderer2D.prototype._getTintedImageCanvas,d.default.prototype.imageMode=function(C){d.default._validateParameters("imageMode",arguments),C!==S.CORNER&&C!==S.CORNERS&&C!==S.CENTER||(this._renderer._imageMode=C)},r=d.default,f.default=r},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/helpers":269,"../core/main":273,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,gifenc:243,omggif:246,"regenerator-runtime/runtime":250}],297:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=d(r("../core/main")),l=d(r("./filters"));function d(S){return S&&S.__esModule?S:{default:S}}function x(S,m){for(var y=0;y<m.length;y++){var b=m[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}u.default.Image=function(){function S(b,g){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.width=b,this.height=g,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var m,y;return m=S,(y=[{key:"_animateGif",value:function(b){var g,w=this.gifProperties;b=b._lastRealFrameTime,w.lastChangeTime===0&&(w.lastChangeTime=b),w.playing&&(w.timeDisplayed=b-w.lastChangeTime,g=w.frames[w.displayIndex].delay,w.timeDisplayed>=g&&(g=Math.floor(w.timeDisplayed/g),w.timeDisplayed=0,w.lastChangeTime=b,w.displayIndex+=g,w.loopCount=Math.floor(w.displayIndex/w.numFrames),w.loopLimit!==null&&w.loopCount>=w.loopLimit?w.playing=!1:(b=w.displayIndex%w.numFrames,this.drawingContext.putImageData(w.frames[b].image,0,0),w.displayIndex=b,this.setModified(!0))))}},{key:"_setProperty",value:function(b,g){this[b]=g,this.setModified(!0)}},{key:"loadPixels",value:function(){u.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(b,g,w,_){u.default.Renderer2D.prototype.updatePixels.call(this,b,g,w,_),this.setModified(!0)}},{key:"get",value:function(b,g,w,_){return u.default._validateParameters("p5.Image.get",arguments),u.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];return u.default.Renderer2D.prototype._getPixel.apply(this,g)}},{key:"set",value:function(b,g,w){u.default.Renderer2D.prototype.set.call(this,b,g,w),this.setModified(!0)}},{key:"resize",value:function(b,g){b===0&&g===0?(b=this.canvas.width,g=this.canvas.height):b===0?b=this.canvas.width*g/this.canvas.height:g===0&&(g=this.canvas.height*b/this.canvas.width),b=Math.floor(b),g=Math.floor(g);var w=document.createElement("canvas");if(w.width=b,w.height=g,this.gifProperties)for(var _=this.gifProperties,C=0;C<_.numFrames;C++){for(var k=this.drawingContext.createImageData(b,g),E=(D=D=N=O=A=void 0,_.frames[C].image),j=k,A=0,O=0;O<j.height;O++)for(var N=0;N<j.width;N++){var D=Math.floor(N*E.width/j.width);D=4*(Math.floor(O*E.height/j.height)*E.width+D),j.data[A++]=E.data[D++],j.data[A++]=E.data[D++],j.data[A++]=E.data[D++],j.data[A++]=E.data[+D]}_.frames[C].image=k}w.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,w.width,w.height),this.canvas.width=this.width=b,this.canvas.height=this.height=g,this.drawingContext.drawImage(w,0,0,b,g,0,0,b,g),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];u.default.prototype.copy.apply(this,g)}},{key:"mask",value:function(b){var g=this.drawingContext.globalCompositeOperation,w=1,_=[b=b===void 0?this:b,0,0,(w=b instanceof u.default.Renderer?b._pInst._pixelDensity:w)*b.width,w*b.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var C=0;C<this.gifProperties.frames.length;C++)this.drawingContext.putImageData(this.gifProperties.frames[C].image,0,0),this.copy.apply(this,_),this.gifProperties.frames[C].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,_);this.drawingContext.globalCompositeOperation=g,this.setModified(!0)}},{key:"filter",value:function(b,g){l.default.apply(this.canvas,l.default[b],g),this.setModified(!0)}},{key:"blend",value:function(){for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];u.default._validateParameters("p5.Image.blend",arguments),u.default.prototype.blend.apply(this,g),this.setModified(!0)}},{key:"setModified",value:function(b){this._modified=b}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(b,g){this.gifProperties?u.default.prototype.encodeAndDownloadGif(this,b):u.default.prototype.saveCanvas(this.canvas,b,g)}},{key:"reset",value:function(){var b;this.gifProperties&&((b=this.gifProperties).playing=!0,b.timeSinceStart=0,b.timeDisplayed=0,b.lastChangeTime=0,b.loopCount=0,b.displayIndex=0,this.drawingContext.putImageData(b.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var b;if(this.gifProperties)return(b=this.gifProperties).displayIndex%b.numFrames}},{key:"setFrame",value:function(b){var g;this.gifProperties&&(b<(g=this.gifProperties).numFrames&&0<=b?(g.timeDisplayed=0,g.lastChangeTime=0,g.displayIndex=b,this.drawingContext.putImageData(g.frames[b].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(b,g){if(this.gifProperties){var w=this.gifProperties;if(g<w.numFrames&&0<=g)w.frames[g].delay=b;else{var _=!0,C=(g=!1,void 0);try{for(var k,E=w.frames[Symbol.iterator]();!(_=(k=E.next()).done);_=!0)k.value.delay=b}catch(j){g=!0,C=j}finally{try{_||E.return==null||E.return()}finally{if(g)throw C}}}}}}])&&x(m.prototype,y),S}(),r=u.default.Image,f.default=r},{"../core/main":273,"./filters":294,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],298:[function(r,h,f){r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.filter"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=d(r("../core/main")),l=d(r("./filters"));function d(x){return x&&x.__esModule?x:{default:x}}r("../color/p5.Color"),u.default.prototype.pixels=[],u.default.prototype.blend=function(){for(var x,S=arguments.length,m=new Array(S),y=0;y<S;y++)m[y]=arguments[y];u.default._validateParameters("blend",m),this._renderer?(x=this._renderer).blend.apply(x,m):u.default.Renderer2D.prototype.blend.apply(this,m)},u.default.prototype.copy=function(){for(var x,S,m,y,b,g,w,_,C,k=arguments.length,E=new Array(k),j=0;j<k;j++)E[j]=arguments[j];if(u.default._validateParameters("copy",E),E.length===9)x=E[0],S=E[1],m=E[2],y=E[3],b=E[4],g=E[5],w=E[6],_=E[7],C=E[8];else{if(E.length!==8)throw new Error("Signature not supported");x=this,S=E[0],m=E[1],y=E[2],b=E[3],g=E[4],w=E[5],_=E[6],C=E[7]}u.default.prototype._copyHelper(this,x,S,m,y,b,g,w,_,C)},u.default.prototype._copyHelper=function(x,S,m,y,b,g,w,_,C,k){S.loadPixels();var E=S.canvas.width/S.width,j=0,A=0;S._renderer&&S._renderer.isP3D&&(j=S.width/2,A=S.height/2),x._renderer&&x._renderer.isP3D?u.default.RendererGL.prototype.image.call(x._renderer,S,m+j,y+A,b,g,w,_,C,k):x.drawingContext.drawImage(S.canvas,E*(m+j),E*(y+A),E*b,E*g,w,_,C,k)},u.default.prototype.filter=function(x,S){u.default._validateParameters("filter",arguments),this.canvas!==void 0?l.default.apply(this.canvas,l.default[x],S):l.default.apply(this.elt,l.default[x],S)},u.default.prototype.get=function(x,S,m,y){var b;return u.default._validateParameters("get",arguments),(b=this._renderer).get.apply(b,arguments)},u.default.prototype.loadPixels=function(){for(var x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];u.default._validateParameters("loadPixels",S),this._renderer.loadPixels()},u.default.prototype.set=function(x,S,m){this._renderer.set(x,S,m)},u.default.prototype.updatePixels=function(x,S,m,y){u.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(x,S,m,y)},r=u.default,f.default=r},{"../color/p5.Color":260,"../core/main":273,"./filters":294,"core-js/modules/es.array.filter":155}],299:[function(r,h,f){function u(g){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.promise"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/web.url"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=S(r("../core/main")),d=(r("whatwg-fetch"),r("es6-promise/auto"),S(r("fetch-jsonp"))),x=S(r("file-saver"));function S(g){return g&&g.__esModule?g:{default:g}}function m(g){return(m=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)})(g)}function y(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function b(g,w){w&&w!==!0&&w!=="true"||(w="");var _="";return(g=g||"untitled")&&g.includes(".")&&(_=g.split(".").pop()),w&&_!==w&&(_=w,g="".concat(g,".").concat(_)),[g,_]}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),l.default.prototype.loadJSON=function(){for(var g=arguments.length,w=new Array(g),_=0;_<g;_++)w[_]=arguments[_];l.default._validateParameters("loadJSON",w);for(var C,k,E,j=w[0],A={},O="json",N=1;N<w.length;N++){var D=w[N];typeof D=="string"?D!=="jsonp"&&D!=="json"||(O=D):typeof D=="function"?C?k=D:C=D:m(D)==="object"&&(D.hasOwnProperty("jsonpCallback")||D.hasOwnProperty("jsonpCallbackFunction"))&&(O="jsonp",E=D)}var z=this;return this.httpDo(j,"GET",E,O,function($){for(var B in $)A[B]=$[B];C!==void 0&&C($),z._decrementPreload()},function($){if(l.default._friendlyFileLoadError(5,j),!k)throw $;k($)}),A},l.default.prototype.loadStrings=function(){for(var g=arguments.length,w=new Array(g),_=0;_<g;_++)w[_]=arguments[_];l.default._validateParameters("loadStrings",w);for(var C,k,E=[],j=1;j<w.length;j++){var A=w[j];typeof A=="function"&&(C===void 0?C=A:k===void 0&&(k=A))}var O=this;return l.default.prototype.httpDo.call(this,w[0],"GET","text",function(N){for(var D=N.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),z=0,$=D.length;z<$;z+=32768)Array.prototype.push.apply(E,D.slice(z,Math.min(z+32768,$)));C!==void 0&&C(E),O._decrementPreload()},function(N){if(l.default._friendlyFileLoadError(3,N),!k)throw N;k(N)}),E},l.default.prototype.loadTable=function(g){var w,_,C,k=!1,E=g.substring(g.lastIndexOf(".")+1,g.length);E==="csv"?C=",":E==="ssv"?C=";":E==="tsv"&&(C="	");for(var j=1;j<arguments.length;j++)typeof arguments[j]=="function"?w===void 0?w=arguments[j]:_===void 0&&(_=arguments[j]):typeof arguments[j]=="string"&&(arguments[j]==="header"&&(k=!0),arguments[j]==="csv"?C=",":arguments[j]==="ssv"?C=";":arguments[j]==="tsv"&&(C="	"));var A=new l.default.Table,O=this;return this.httpDo(g,"GET","table",function(N){for(var D,z,$={},B=[],F=0,G=null,W=function(){$.currentState=0,$.token=""},L=function(){G.push($.token),W()},V=function(){$.currentState=4,B.push(G),G=null};;){if((D=N[F++])==null){if($.escaped)throw new Error("Unclosed quote in file.");if(G){L(),V();break}}if(G===null&&($.escaped=!1,G=[],W()),$.currentState===0){if(D==='"'){$.escaped=!0,$.currentState=1;continue}$.currentState=1}if($.currentState===1&&$.escaped)if(D==='"')N[F]==='"'?($.token+='"',F++):($.escaped=!1,$.currentState=2);else{if(D==="\r")continue;$.token+=D}else D==="\r"?(N[F]===`
`&&F++,L(),V()):D===`
`?(L(),V()):D===C?L():$.currentState===1&&($.token+=D)}if(k)A.columns=B.shift();else for(var Y=0;Y<B[0].length;Y++)A.columns[Y]="null";for(var Z=0;Z<B.length;Z++)(B[Z].length!==1||B[Z][0]!=="undefined"&&B[Z][0]!=="")&&((z=new l.default.TableRow).arr=B[Z],z.obj=function(J,ne){if((ne=ne||[])===void 0)for(var se=0;se<J.length;se++)ne[se.toString()]=se;return Object.fromEntries(ne.map(function(ie,X){return[ie,J[X]]}))}(B[Z],A.columns),A.addRow(z));typeof w=="function"&&w(A),O._decrementPreload()},function(N){l.default._friendlyFileLoadError(2,g),_?_(N):console.error(N)}),A},l.default.prototype.loadXML=function(){for(var g=arguments.length,w=new Array(g),_=0;_<g;_++)w[_]=arguments[_];for(var C,k,E=new l.default.XML,j=1;j<w.length;j++){var A=w[j];typeof A=="function"&&(C===void 0?C=A:k===void 0&&(k=A))}var O=this;return this.httpDo(w[0],"GET","xml",function(N){for(var D in N)E[D]=N[D];C!==void 0&&C(E),O._decrementPreload()},function(N){if(l.default._friendlyFileLoadError(1,N),!k)throw N;k(N)}),E},l.default.prototype.loadBytes=function(g,w,_){var C={},k=this;return this.httpDo(g,"GET","arrayBuffer",function(E){C.bytes=new Uint8Array(E),typeof w=="function"&&w(C),k._decrementPreload()},function(E){if(l.default._friendlyFileLoadError(6,g),!_)throw E;_(E)}),C},l.default.prototype.httpGet=function(){l.default._validateParameters("httpGet",arguments);var g=Array.prototype.slice.call(arguments);return g.splice(1,0,"GET"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpPost=function(){l.default._validateParameters("httpPost",arguments);var g=Array.prototype.slice.call(arguments);return g.splice(1,0,"POST"),l.default.prototype.httpDo.apply(this,g)},l.default.prototype.httpDo=function(){for(var g,w,_,C={},k=0,E="text/plain",j=arguments.length-1;0<j&&typeof(j<0||arguments.length<=j?void 0:arguments[j])=="function";j--)k++;var A=arguments.length<=0?void 0:arguments[0];if((B=arguments.length-k)==2&&typeof A=="string"&&m(arguments.length<=1?void 0:arguments[1])==="object")F=new Request(A,arguments.length<=1?void 0:arguments[1]),w=arguments.length<=2?void 0:arguments[2],_=arguments.length<=3?void 0:arguments[3];else{for(var O,N="GET",D=1;D<arguments.length;D++){var z=D<0||arguments.length<=D?void 0:arguments[D];if(typeof z=="string")z==="GET"||z==="POST"||z==="PUT"||z==="DELETE"?N=z:z==="json"||z==="jsonp"||z==="binary"||z==="arrayBuffer"||z==="xml"||z==="text"||z==="table"?g=z:O=z;else if(typeof z=="number")O=z.toString();else if(m(z)==="object")if(z.hasOwnProperty("jsonpCallback")||z.hasOwnProperty("jsonpCallbackFunction"))for(var $ in z)C[$]=z[$];else E=z instanceof l.default.XML?(O=z.serialize(),"application/xml"):(O=JSON.stringify(z),"application/json");else typeof z=="function"&&(w?_=z:w=z)}var B=N==="GET"?new Headers:new Headers({"Content-Type":E}),F=new Request(A,{method:N,mode:"cors",body:O,headers:B})}return(B=(B=(g=g||(A.includes("json")?"json":A.includes("xml")?"xml":"text"))==="jsonp"?(0,d.default)(A,C):fetch(F)).then(function(G){if(!G.ok)throw(W=new Error(G.body)).status=G.status,W.ok=!1,W;var W=0;switch((W=g!=="jsonp"?G.headers.get("content-length"):W)&&64e6<W&&l.default._friendlyFileLoadError(7,A),g){case"json":case"jsonp":return G.json();case"binary":return G.blob();case"arrayBuffer":return G.arrayBuffer();case"xml":return G.text().then(function(L){return L=new DOMParser().parseFromString(L,"text/xml"),new l.default.XML(L.documentElement)});default:return G.text()}})).then(w||function(){}),B.catch(_||console.error),B},window.URL=window.URL||window.webkitURL,l.default.prototype._pWriters=[],l.default.prototype.createWriter=function(g,w){var _,C;for(C in l.default.prototype._pWriters)if(l.default.prototype._pWriters[C].name===g)return _=new l.default.PrintWriter(g+this.millis(),w),l.default.prototype._pWriters.push(_),_;return _=new l.default.PrintWriter(g,w),l.default.prototype._pWriters.push(_),_},l.default.PrintWriter=function(g,w){var _=this;this.name=g,this.content="",this.write=function(C){this.content+=C},this.print=function(C){this.content+="".concat(C,`
`)},this.clear=function(){this.content=""},this.close=function(){var C,k=[];for(C in k.push(this.content),l.default.prototype.writeFile(k,g,w),l.default.prototype._pWriters)l.default.prototype._pWriters[C].name===this.name&&l.default.prototype._pWriters.splice(C,1);_.clear(),_={}}},l.default.prototype.save=function(g,w,_){var C=arguments,k=(this._curElement||this).elt;if(C.length===0)l.default.prototype.saveCanvas(k);else if(C[0]instanceof l.default.Renderer||C[0]instanceof l.default.Graphics)l.default.prototype.saveCanvas(C[0].elt,C[1],C[2]);else if(C.length===1&&typeof C[0]=="string")l.default.prototype.saveCanvas(k,C[0]);else switch(b(C[1],C[2])[1]){case"json":return void l.default.prototype.saveJSON(C[0],C[1],C[2]);case"txt":return void l.default.prototype.saveStrings(C[0],C[1],C[2]);default:C[0]instanceof Array?l.default.prototype.saveStrings(C[0],C[1],C[2]):C[0]instanceof l.default.Table?l.default.prototype.saveTable(C[0],C[1],C[2]):C[0]instanceof l.default.Image?l.default.prototype.saveCanvas(C[0].canvas,C[1]):C[0]instanceof l.default.SoundFile&&l.default.prototype.saveSound(C[0],C[1],C[2],C[3])}},l.default.prototype.saveJSON=function(g,w,_){l.default._validateParameters("saveJSON",arguments),_=_?JSON.stringify(g):JSON.stringify(g,void 0,2),this.saveStrings(_.split(`
`),w,"json")},l.default.prototype.saveJSONObject=l.default.prototype.saveJSON,l.default.prototype.saveJSONArray=l.default.prototype.saveJSON,l.default.prototype.saveStrings=function(g,w,_,C){l.default._validateParameters("saveStrings",arguments);for(var k=this.createWriter(w,_||"txt"),E=0;E<g.length;E++)C?k.write(g[E]+`\r
`):k.write(g[E]+`
`);k.close(),k.clear()},l.default.prototype.saveTable=function(g,w,_){l.default._validateParameters("saveTable",arguments),C=_===void 0?w.substring(w.lastIndexOf(".")+1,w.length):_;var C,k=this.createWriter(w,C),E=g.columns,j=C==="tsv"?"	":",";if(C!=="html"){if(E[0]!=="0"){for(var A=0;A<E.length;A++)A<E.length-1?k.write(E[A]+j):k.write(E[A]);k.write(`
`)}for(var O=0;O<g.rows.length;O++){var N=void 0;for(N=0;N<g.rows[O].arr.length;N++)N<g.rows[O].arr.length-1?C==="csv"&&String(g.rows[O].arr[N]).includes(",")?k.write('"'+g.rows[O].arr[N]+'"'+j):k.write(g.rows[O].arr[N]+j):C==="csv"&&String(g.rows[O].arr[N]).includes(",")?k.write('"'+g.rows[O].arr[N]+'"'):k.write(g.rows[O].arr[N]);k.write(`
`)}}else{if(k.print("<html>"),k.print("<head>"),k.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),k.print("</head>"),k.print("<body>"),k.print("  <table>"),E[0]!=="0"){k.print("    <tr>");for(var D=0;D<E.length;D++){var z=y(E[D]);k.print("      <td>".concat(z)),k.print("      </td>")}k.print("    </tr>")}for(var $=0;$<g.rows.length;$++){k.print("    <tr>");for(var B=0;B<g.columns.length;B++){var F=y(g.rows[$].getString(B));k.print("      <td>".concat(F)),k.print("      </td>")}k.print("    </tr>")}k.print("  </table>"),k.print("</body>"),k.print("</html>")}k.close(),k.clear()},l.default.prototype.writeFile=function(g,w,_){var C="application/octet-stream";l.default.prototype._isSafari()&&(C="text/plain"),g=new Blob(g,{type:C}),l.default.prototype.downloadFile(g,w,_)},l.default.prototype.downloadFile=function(g,w,_){var C;_=(w=b(w,_))[0],g instanceof Blob?x.default.saveAs(g,_):((C=document.createElement("a")).href=g,C.download=_,C.onclick=function(k){document.body.removeChild(k.target),k.stopPropagation()},C.style.display="none",document.body.appendChild(C),l.default.prototype._isSafari()&&(g=(g=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(w[1],'"'),alert(g)),C.click())},l.default.prototype._checkFileExtension=b,l.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},r=l.default,f.default=r},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238,"es6-promise/auto":239,"fetch-jsonp":241,"file-saver":242,"whatwg-fetch":251}],300:[function(r,h,f){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.replace"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(d,x){for(var S=0;S<x.length;S++){var m=x[S];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}u.default.Table=function(){function d(m){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var x,S;return x=d,(S=[{key:"addRow",value:function(m){if((m=m||new u.default.TableRow).arr===void 0||m.obj===void 0)throw new Error("invalid TableRow: ".concat(m));return(m.table=this).rows.push(m),m}},{key:"removeRow",value:function(m){this.rows[m].table=null,m=this.rows.splice(m+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(m)}},{key:"getRow",value:function(m){return this.rows[m]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(m,y){if(typeof y=="string"){for(var b=0;b<this.rows.length;b++)if(this.rows[b].obj[y]===m)return this.rows[b]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].arr[y]===m)return this.rows[g];return null}},{key:"findRows",value:function(m,y){var b=[];if(typeof y=="string")for(var g=0;g<this.rows.length;g++)this.rows[g].obj[y]===m&&b.push(this.rows[g]);else for(var w=0;w<this.rows.length;w++)this.rows[w].arr[y]===m&&b.push(this.rows[w]);return b}},{key:"matchRow",value:function(m,y){if(typeof y=="number"){for(var b=0;b<this.rows.length;b++)if(this.rows[b].arr[y].match(m))return this.rows[b]}else for(var g=0;g<this.rows.length;g++)if(this.rows[g].obj[y].match(m))return this.rows[g];return null}},{key:"matchRows",value:function(m,y){var b=[];if(typeof y=="number")for(var g=0;g<this.rows.length;g++)this.rows[g].arr[y].match(m)&&b.push(this.rows[g]);else for(var w=0;w<this.rows.length;w++)this.rows[w].obj[y].match(m)&&b.push(this.rows[w]);return b}},{key:"getColumn",value:function(m){var y=[];if(typeof m=="string")for(var b=0;b<this.rows.length;b++)y.push(this.rows[b].obj[m]);else for(var g=0;g<this.rows.length;g++)y.push(this.rows[g].arr[m]);return y}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(m){this.columns.push(m||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(m,y){for(var b=[],g=0;g<m.length;g++)b.push(m.charAt(g).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var w=new RegExp(b.join("|"),"g");if(y===void 0)for(var _=0;_<this.columns.length;_++)for(var C=0;C<this.rows.length;C++){var k=(k=this.rows[C].arr[_]).replace(w,"");this.rows[C].arr[_]=k,this.rows[C].obj[this.columns[_]]=k}else if(typeof y=="string")for(var E=0;E<this.rows.length;E++){var j=(j=this.rows[E].obj[y]).replace(w,""),A=(this.rows[E].obj[y]=j,this.columns.indexOf(y));this.rows[E].arr[A]=j}else for(var O=0;O<this.rows.length;O++){var N=(N=this.rows[O].arr[y]).replace(w,"");this.rows[O].arr[y]=N,this.rows[O].obj[this.columns[y]]=N}}},{key:"trim",value:function(m){var y=new RegExp(" ","g");if(m===void 0)for(var b=0;b<this.columns.length;b++)for(var g=0;g<this.rows.length;g++){var w=(w=this.rows[g].arr[b]).replace(y,"");this.rows[g].arr[b]=w,this.rows[g].obj[this.columns[b]]=w}else if(typeof m=="string")for(var _=0;_<this.rows.length;_++){var C=(C=this.rows[_].obj[m]).replace(y,""),k=(this.rows[_].obj[m]=C,this.columns.indexOf(m));this.rows[_].arr[k]=C}else for(var E=0;E<this.rows.length;E++){var j=(j=this.rows[E].arr[m]).replace(y,"");this.rows[E].arr[m]=j,this.rows[E].obj[this.columns[m]]=j}}},{key:"removeColumn",value:function(m){typeof m=="string"?b=this.columns.indexOf(y=m):y=this.columns[b=m];var y,b;m=this.columns.splice(b+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(m);for(var g=0;g<this.rows.length;g++){var w=this.rows[g].arr,_=w.splice(b+1,w.length);w.pop(),this.rows[g].arr=w.concat(_),delete this.rows[g].obj[y]}}},{key:"set",value:function(m,y,b){this.rows[m].set(y,b)}},{key:"setNum",value:function(m,y,b){this.rows[m].setNum(y,b)}},{key:"setString",value:function(m,y,b){this.rows[m].setString(y,b)}},{key:"get",value:function(m,y){return this.rows[m].get(y)}},{key:"getNum",value:function(m,y){return this.rows[m].getNum(y)}},{key:"getString",value:function(m,y){return this.rows[m].getString(y)}},{key:"getObject",value:function(m){for(var y,b={},g=0;g<this.rows.length;g++)if(y=this.rows[g].obj,typeof m=="string"){if(!(0<=this.columns.indexOf(m)))throw new Error('This table has no column named "'.concat(m,'"'));b[y[m]]=y}else b[g]=this.rows[g].obj;return b}},{key:"getArray",value:function(){for(var m=[],y=0;y<this.rows.length;y++)m.push(this.rows[y].arr);return m}}])&&l(x.prototype,S),d}(),r=u.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.splice":166,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194}],301:[function(r,h,f){function u(l,d){for(var x=0;x<d.length;x++){var S=d[x];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.from-entries"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../core/main"))&&r.__esModule?r:{default:r}).default.TableRow=function(){function l(S,m){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var y=[];S&&(y=S.split(m=m||",")),this.arr=y,this.obj=Object.fromEntries(y.entries()),this.table=null}var d,x;return d=l,(x=[{key:"set",value:function(S,m){if(typeof S=="string"){var y=this.table.columns.indexOf(S);if(!(0<=y))throw new Error('This table has no column named "'.concat(S,'"'));this.obj[S]=m,this.arr[y]=m}else{if(!(S<this.table.columns.length))throw new Error("Column #".concat(S," is out of the range of this table"));this.arr[S]=m,y=this.table.columns[S],this.obj[y]=m}}},{key:"setNum",value:function(S,m){m=parseFloat(m),this.set(S,m)}},{key:"setString",value:function(S,m){m=m.toString(),this.set(S,m)}},{key:"get",value:function(S){return(typeof S=="string"?this.obj:this.arr)[S]}},{key:"getNum",value:function(S){var m=parseFloat(typeof S=="string"?this.obj[S]:this.arr[S]);if(m.toString()==="NaN")throw"Error: ".concat(this.obj[S]," is NaN (Not a Number)");return m}},{key:"getString",value:function(S){return(typeof S=="string"?this.obj:this.arr)[S].toString()}}])&&u(d.prototype,x),l}(),r=r.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236}],302:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.replace"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(d,x){for(var S=0;S<x.length;S++){var m=x[S];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}u.default.XML=function(){function d(m){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");m?this.DOM=m:(m=document.implementation.createDocument(null,"doc"),this.DOM=m.createElement("root"))}var x,S;return x=d,(S=[{key:"getParent",value:function(){return new u.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(m){var y=this.DOM.innerHTML,b=this.DOM.attributes,g=document.implementation.createDocument(null,"default").createElement(m);g.innerHTML=y;for(var w=0;w<b.length;w++)g.setAttribute(b[w].nodeName,b.nodeValue);this.DOM=g}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var m=[],y=0;y<this.DOM.childNodes.length;y++)m.push(this.DOM.childNodes[y].nodeName);return m}},{key:"getChildren",value:function(m){return function(y){for(var b=[],g=0;g<y.length;g++)b.push(new u.default.XML(y[g]));return b}(m?this.DOM.getElementsByTagName(m):this.DOM.children)}},{key:"getChild",value:function(m){if(typeof m!="string")return new u.default.XML(this.DOM.children[m]);var y=!0,b=!1,g=void 0;try{for(var w,_=this.DOM.children[Symbol.iterator]();!(y=(w=_.next()).done);y=!0){var C=w.value;if(C.tagName===m)return new u.default.XML(C)}}catch(k){b=!0,g=k}finally{try{y||_.return==null||_.return()}finally{if(b)throw g}}}},{key:"addChild",value:function(m){m instanceof u.default.XML&&this.DOM.appendChild(m.DOM)}},{key:"removeChild",value:function(m){var y=-1;if(typeof m=="string"){for(var b=0;b<this.DOM.children.length;b++)if(this.DOM.children[b].tagName===m){y=b;break}}else y=m;y!==-1&&this.DOM.removeChild(this.DOM.children[y])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var m=[],y=!0,b=!1,g=void 0;try{for(var w,_=this.DOM.attributes[Symbol.iterator]();!(y=(w=_.next()).done);y=!0){var C=w.value;m.push(C.nodeName)}}catch(k){b=!0,g=k}finally{try{y||_.return==null||_.return()}finally{if(b)throw g}}return m}},{key:"hasAttribute",value:function(m){var y={},b=!0,g=!1,w=void 0;try{for(var _,C=this.DOM.attributes[Symbol.iterator]();!(b=(_=C.next()).done);b=!0){var k=_.value;y[k.nodeName]=k.nodeValue}}catch(E){g=!0,w=E}finally{try{b||C.return==null||C.return()}finally{if(g)throw w}}return!!y[m]}},{key:"getNum",value:function(m,y){var b={},g=!0,w=!1,_=void 0;try{for(var C,k=this.DOM.attributes[Symbol.iterator]();!(g=(C=k.next()).done);g=!0){var E=C.value;b[E.nodeName]=E.nodeValue}}catch(j){w=!0,_=j}finally{try{g||k.return==null||k.return()}finally{if(w)throw _}}return Number(b[m])||y||0}},{key:"getString",value:function(m,y){var b={},g=!0,w=!1,_=void 0;try{for(var C,k=this.DOM.attributes[Symbol.iterator]();!(g=(C=k.next()).done);g=!0){var E=C.value;b[E.nodeName]=E.nodeValue}}catch(j){w=!0,_=j}finally{try{g||k.return==null||k.return()}finally{if(w)throw _}}return b[m]?String(b[m]):y||null}},{key:"setAttribute",value:function(m,y){this.DOM.setAttribute(m,y)}},{key:"getContent",value:function(m){var y=this.DOM.textContent;return(y=y.replace(/\s\s+/g,","))||m||null}},{key:"setContent",value:function(m){this.DOM.children.length||(this.DOM.textContent=m)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&l(x.prototype,S),d}(),r=u.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],303:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var d=arguments.length,x=[],S=0,m=0;m<d;m++){var y=arguments[m];if((y=+y)==1/0||y===-1/0)return 1/0;S<(y=Math.abs(y))&&(S=y),x[m]=y}S===0&&(S=1);for(var b=0,g=0,w=0;w<d;w++){var _,C=b+(_=(_=x[w]/S)*_-g);g=C-b-_,b=C}return Math.sqrt(b)*S}u.default.prototype.abs=Math.abs,u.default.prototype.ceil=Math.ceil,u.default.prototype.constrain=function(d,x,S){return u.default._validateParameters("constrain",arguments),Math.max(Math.min(d,S),x)},u.default.prototype.dist=function(){for(var d=arguments.length,x=new Array(d),S=0;S<d;S++)x[S]=arguments[S];return u.default._validateParameters("dist",x),x.length===4?l(x[2]-x[0],x[3]-x[1]):x.length===6?l(x[3]-x[0],x[4]-x[1],x[5]-x[2]):void 0},u.default.prototype.exp=Math.exp,u.default.prototype.floor=Math.floor,u.default.prototype.lerp=function(d,x,S){return u.default._validateParameters("lerp",arguments),S*(x-d)+d},u.default.prototype.log=Math.log,u.default.prototype.mag=function(d,x){return u.default._validateParameters("mag",arguments),l(d,x)},u.default.prototype.map=function(d,x,S,m,y,b){return u.default._validateParameters("map",arguments),d=(d-x)/(S-x)*(y-m)+m,b?m<y?this.constrain(d,m,y):this.constrain(d,y,m):d},u.default.prototype.max=function(){for(var d=function(y){var b=-1/0,g=!0,w=!1,_=void 0;try{for(var C,k=y[Symbol.iterator]();!(g=(C=k.next()).done);g=!0){var E=C.value;b=b<E?E:b}}catch(j){w=!0,_=j}finally{try{g||k.return==null||k.return()}finally{if(w)throw _}}return b},x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];return S[0]instanceof Array?d(S[0]):d(S)},u.default.prototype.min=function(){for(var d=function(y){var b=1/0,g=!0,w=!1,_=void 0;try{for(var C,k=y[Symbol.iterator]();!(g=(C=k.next()).done);g=!0){var E=C.value;b=E<b?E:b}}catch(j){w=!0,_=j}finally{try{g||k.return==null||k.return()}finally{if(w)throw _}}return b},x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];return S[0]instanceof Array?d(S[0]):d(S)},u.default.prototype.norm=function(d,x,S){return u.default._validateParameters("norm",arguments),this.map(d,x,S,0,1)},u.default.prototype.pow=Math.pow,u.default.prototype.round=function(d,x){return x?(x=Math.pow(10,x),Math.round(d*x)/x):Math.round(d)},u.default.prototype.sq=function(d){return d*d},u.default.prototype.sqrt=Math.sqrt,u.default.prototype.fract=function(d){u.default._validateParameters("fract",arguments);var x,S=0;return d=Number(d),isNaN(d)||Math.abs(d)===1/0?d:(d<0&&(d=-d,S=1),String(d).includes(".")&&!String(d).includes("e")?(x=String(d),x=+("0"+x.slice(x.indexOf("."))),Math.abs(S-x)):d<1?Math.abs(S-d):0)},r=u.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],304:[function(r,h,f){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(x,S,m){return(l=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(y,b,g){var w=[null];return w.push.apply(w,b),b=new(Function.bind.apply(y,w)),g&&d(b,g.prototype),b}).apply(null,arguments)}function d(x,S){return(d=Object.setPrototypeOf||function(m,y){return m.__proto__=y,m})(x,S)}u.default.prototype.createVector=function(x,S,m){return this instanceof u.default?l(u.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new u.default.Vector(x,S,m)},r=u.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186}],305:[function(r,h,f){function u(m){return .5*(1-Math.cos(m*Math.PI))}Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,r=(r=r("../core/main"))&&r.__esModule?r:{default:r};var l,d=4095,x=4,S=.5;r.default.prototype.noise=function(m){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(l==null){l=new Array(4096);for(var g=0;g<4096;g++)l[g]=Math.random()}m<0&&(m=-m),y<0&&(y=-y),b<0&&(b=-b);for(var w,_,C=Math.floor(m),k=Math.floor(y),E=Math.floor(b),j=m-C,A=y-k,O=b-E,N=0,D=.5,z=0;z<x;z++){var $=C+(k<<4)+(E<<8),B=u(j),F=u(A),G=l[$&d];G+=B*(l[$+1&d]-G),w=l[$+16&d],G+=F*((w+=B*(l[$+16+1&d]-w))-G),w=l[($+=256)&d],w+=B*(l[$+1&d]-w),_=l[$+16&d],w+=F*((_+=B*(l[$+16+1&d]-_))-w),N+=(G+=u(O)*(w-G))*D,D*=S,C<<=1,k<<=1,E<<=1,1<=(j*=2)&&(C++,j--),1<=(A*=2)&&(k++,A--),1<=(O*=2)&&(E++,O--)}return N},r.default.prototype.noiseDetail=function(m,y){0<m&&(x=m),0<y&&(S=y)},r.default.prototype.noiseSeed=function(m){b=4294967296;var y,b,g=function(){return(y=(1664525*y+1013904223)%b)/b};(function(_){y=(_??Math.random()*b)>>>0})(m),l=new Array(4096);for(var w=0;w<4096;w++)l[w]=g()},r=r.default,f.default=r},{"../core/main":273}],306:[function(r,h,f){function u(g){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(g)}function l(g){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.number.is-finite"),r("core-js/modules/es.string.sub"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(b=r("../core/main"))&&b.__esModule?b:{default:b},x=function(g){if(g&&g.__esModule)return g;if(g===null||l(g)!=="object"&&typeof g!="function")return{default:g};var w=function(){var j;return typeof WeakMap!="function"?null:(j=new WeakMap,j)}();if(w&&w.has(g))return w.get(g);var _,C={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in g){var E;Object.prototype.hasOwnProperty.call(g,_)&&((E=k?Object.getOwnPropertyDescriptor(g,_):null)&&(E.get||E.set)?Object.defineProperty(C,_,E):C[_]=g[_])}return C.default=g,w&&w.set(g,C),C}(r("../core/constants"));function S(g,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}function m(g,w){return g!==0&&(this.x=this.x%g),w!==0&&(this.y=this.y%w),this}function y(g,w,_){return g!==0&&(this.x=this.x%g),w!==0&&(this.y=this.y%w),_!==0&&(this.z=this.z%_),this}d.default.Vector=function(){function g(){var k=g;if(!((A=this)instanceof k))throw new TypeError("Cannot call a class as a function");var E,j,A=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],E=(arguments.length<=2?void 0:arguments[2])||0,j=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(E=(arguments.length<=0?void 0:arguments[0])||0,j=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=E,this.y=j,this.z=A}var w,_,C;return w=g,C=[{key:"fromAngle",value:function(k,E){return new d.default.Vector((E=E===void 0?1:E)*Math.cos(k),E*Math.sin(k),0)}},{key:"fromAngles",value:function(k,E,j){j===void 0&&(j=1);var A=Math.cos(E),O=(E=Math.sin(E),Math.cos(k));return k=Math.sin(k),new d.default.Vector(j*k*E,-j*O,j*k*A)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*x.TWO_PI)}},{key:"random3D",value:function(){var k=Math.random()*x.TWO_PI,E=2*Math.random()-1,j=(A=Math.sqrt(1-E*E))*Math.cos(k),A=A*Math.sin(k);return new d.default.Vector(j,A,E)}},{key:"copy",value:function(k){return k.copy(k)}},{key:"add",value:function(k,E,j){return j?j.set(k):(j=k.copy(),arguments.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),j.add(E),j}},{key:"rem",value:function(k,E){if(k instanceof d.default.Vector&&E instanceof d.default.Vector)return(k=k.copy()).rem(E),k}},{key:"sub",value:function(k,E,j){return j?j.set(k):(j=k.copy(),arguments.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),j.sub(E),j}},{key:"mult",value:function(k,E,j){return j?j.set(k):(j=k.copy(),arguments.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),j.mult(E),j}},{key:"rotate",value:function(k,E,j){return arguments.length===2?j=k.copy():(j instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),j.set(k)),j.rotate(E),j}},{key:"div",value:function(k,E,j){return j?j.set(k):(j=k.copy(),arguments.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),j.div(E),j}},{key:"dot",value:function(k,E){return k.dot(E)}},{key:"cross",value:function(k,E){return k.cross(E)}},{key:"dist",value:function(k,E){return k.dist(E)}},{key:"lerp",value:function(k,E,j,A){return A?A.set(k):(A=k.copy(),arguments.length===4&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),A.lerp(E,j),A}},{key:"slerp",value:function(k,E,j,A){return A?A.set(k):(A=k.copy(),arguments.length===4&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),A.slerp(E,j),A}},{key:"mag",value:function(k){return k.mag()}},{key:"magSq",value:function(k){return k.magSq()}},{key:"normalize",value:function(k,E){return arguments.length<2?E=k.copy():(E instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),E.set(k)),E.normalize()}},{key:"limit",value:function(k,E,j){return arguments.length<3?j=k.copy():(j instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),j.set(k)),j.limit(E)}},{key:"setMag",value:function(k,E,j){return arguments.length<3?j=k.copy():(j instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),j.set(k)),j.setMag(E)}},{key:"heading",value:function(k){return k.heading()}},{key:"angleBetween",value:function(k,E){return k.angleBetween(E)}},{key:"reflect",value:function(k,E,j){return arguments.length<3?j=k.copy():(j instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),j.set(k)),j.reflect(E)}},{key:"array",value:function(k){return k.array()}},{key:"equals",value:function(k,E){var j;return k instanceof d.default.Vector?j=k:k instanceof Array?j=new d.default.Vector().set(k):d.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),j.equals(E)}}],(_=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(k,E,j){return k instanceof d.default.Vector?(this.x=k.x||0,this.y=k.y||0,this.z=k.z||0):Array.isArray(k)?(this.x=k[0]||0,this.y=k[1]||0,this.z=k[2]||0):(this.x=k||0,this.y=E||0,this.z=j||0),this}},{key:"copy",value:function(){return this.isPInst?new d.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new d.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(k,E,j){return k instanceof d.default.Vector?(this.x+=k.x||0,this.y+=k.y||0,this.z+=k.z||0):Array.isArray(k)?(this.x+=k[0]||0,this.y+=k[1]||0,this.z+=k[2]||0):(this.x+=k||0,this.y+=E||0,this.z+=j||0),this}},{key:"rem",value:function(k,E,j){var A;if(k instanceof d.default.Vector){if([k.x,k.y,k.z].every(Number.isFinite))return O=parseFloat(k.x),N=parseFloat(k.y),A=parseFloat(k.z),y.call(this,O,N,A)}else if(Array.isArray(k)){if(k.every(function(D){return Number.isFinite(D)}))return k.length===2?m.call(this,k[0],k[1]):k.length===3?y.call(this,k[0],k[1],k[2]):void 0}else if(arguments.length===1){if(Number.isFinite(k)&&k!==0)return this.x=this.x%k,this.y=this.y%k,this.z=this.z%k,this}else if(arguments.length===2){var O=Array.prototype.slice.call(arguments);if(O.every(function(D){return Number.isFinite(D)})&&O.length===2)return m.call(this,O[0],O[1])}else if(arguments.length===3){var N=Array.prototype.slice.call(arguments);if(N.every(function(D){return Number.isFinite(D)})&&N.length===3)return y.call(this,N[0],N[1],N[2])}}},{key:"sub",value:function(k,E,j){return k instanceof d.default.Vector?(this.x-=k.x||0,this.y-=k.y||0,this.z-=k.z||0):Array.isArray(k)?(this.x-=k[0]||0,this.y-=k[1]||0,this.z-=k[2]||0):(this.x-=k||0,this.y-=E||0,this.z-=j||0),this}},{key:"mult",value:function(k,E,j){var A;return k instanceof d.default.Vector?Number.isFinite(k.x)&&Number.isFinite(k.y)&&Number.isFinite(k.z)&&typeof k.x=="number"&&typeof k.y=="number"&&typeof k.z=="number"?(this.x*=k.x,this.y*=k.y,this.z*=k.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(k)?k.every(function(O){return Number.isFinite(O)})&&k.every(function(O){return typeof O=="number"})?k.length===1?(this.x*=k[0],this.y*=k[0],this.z*=k[0]):k.length===2?(this.x*=k[0],this.y*=k[1]):k.length===3&&(this.x*=k[0],this.y*=k[1],this.z*=k[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(A=Array.prototype.slice.call(arguments)).every(function(O){return Number.isFinite(O)})&&A.every(function(O){return typeof O=="number"})?(arguments.length===1&&(this.x*=k,this.y*=k,this.z*=k),arguments.length===2&&(this.x*=k,this.y*=E),arguments.length===3&&(this.x*=k,this.y*=E,this.z*=j)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(k,E,j){if(k instanceof d.default.Vector)if(Number.isFinite(k.x)&&Number.isFinite(k.y)&&Number.isFinite(k.z)&&typeof k.x=="number"&&typeof k.y=="number"&&typeof k.z=="number"){var A=k.z===0&&this.z===0;if(k.x===0||k.y===0||!A&&k.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=k.x,this.y/=k.y,A||(this.z/=k.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(k))if(k.every(function(O){return Number.isFinite(O)})&&k.every(function(O){return typeof O=="number"})){if(k.some(function(O){return O===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;k.length===1?(this.x/=k[0],this.y/=k[0],this.z/=k[0]):k.length===2?(this.x/=k[0],this.y/=k[1]):k.length===3&&(this.x/=k[0],this.y/=k[1],this.z/=k[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if((A=Array.prototype.slice.call(arguments)).every(function(O){return Number.isFinite(O)})&&A.every(function(O){return typeof O=="number"})){if(A.some(function(O){return O===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=k,this.y/=k,this.z/=k),arguments.length===2&&(this.x/=k,this.y/=E),arguments.length===3&&(this.x/=k,this.y/=E,this.z/=j)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var k=this.x,E=this.y,j=this.z;return k*k+E*E+j*j}},{key:"dot",value:function(k,E,j){return k instanceof d.default.Vector?this.dot(k.x,k.y,k.z):this.x*(k||0)+this.y*(E||0)+this.z*(j||0)}},{key:"cross",value:function(k){var E=this.y*k.z-this.z*k.y,j=this.z*k.x-this.x*k.z;return k=this.x*k.y-this.y*k.x,this.isPInst?new d.default.Vector(this._fromRadians,this._toRadians,E,j,k):new d.default.Vector(E,j,k)}},{key:"dist",value:function(k){return k.copy().sub(this).mag()}},{key:"normalize",value:function(){var k=this.mag();return k!==0&&this.mult(1/k),this}},{key:"limit",value:function(k){var E=this.magSq();return k*k<E&&this.div(Math.sqrt(E)).mult(k),this}},{key:"setMag",value:function(k){return this.normalize().mult(k)}},{key:"heading",value:function(){var k=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(k):k}},{key:"setHeading",value:function(k){this.isPInst&&(k=this._toRadians(k));var E=this.mag();return this.x=E*Math.cos(k),this.y=E*Math.sin(k),this}},{key:"rotate",value:function(k){k=this.heading()+k;var E=(this.isPInst&&(k=this._toRadians(k)),this.mag());return this.x=Math.cos(k)*E,this.y=Math.sin(k)*E,this}},{key:"angleBetween",value:function(k){var E;return this.magSq()*k.magSq()==0?NaN:(E=this.cross(k),k=Math.atan2(E.mag(),this.dot(k))*Math.sign(E.z||1),this.isPInst?this._fromRadians(k):k)}},{key:"lerp",value:function(k,E,j,A){return k instanceof d.default.Vector?this.lerp(k.x,k.y,k.z,E):(this.x+=(k-this.x)*A||0,this.y+=(E-this.y)*A||0,this.z+=(j-this.z)*A||0,this)}},{key:"slerp",value:function(k,E){if(E!==0){if(E===1)return this.set(k);var j=this.mag(),A=k.mag();if(j*A==0)this.mult(1-E).add(k.x*E,k.y*E,k.z*E);else{var O=this.cross(k),N=O.mag(),D=Math.atan2(N,this.dot(k));if(0<N)O.x/=N,O.y/=N,O.z/=N;else{if(D<.5*Math.PI)return this.mult(1-E).add(k.x*E,k.y*E,k.z*E),this;this.z===0&&k.z===0?O.set(0,0,1):this.x!==0?O.set(this.y,-this.x,0).normalize():O.set(1,0,0)}N=O.cross(this),O=(k=1-E+E*A/j)*Math.cos(E*D),A=k*Math.sin(E*D),this.x=this.x*O+N.x*A,this.y=this.y*O+N.y*A,this.z=this.z*O+N.z*A}}return this}},{key:"reflect",value:function(k){return k.normalize(),this.sub(k.mult(2*this.dot(k)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(k,E,j){var A,O;return k=k instanceof d.default.Vector?(A=k.x||0,O=k.y||0,k.z||0):Array.isArray(k)?(A=k[0]||0,O=k[1]||0,k[2]||0):(A=k||0,O=E||0,j||0),this.x===A&&this.y===O&&this.z===k}}])&&S(w.prototype,_),C&&S(w,C),g}();var b=d.default.Vector;f.default=b},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.constructor":171,"core-js/modules/es.number.is-finite":172,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],307:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r},l="_lcg_random_state",d=4294967296,x=0;u.default.prototype._lcg=function(S){return this[S]=(1664525*this[S]+1013904223)%d,this[S]/d},u.default.prototype._lcgSetSeed=function(S,m){this[S]=(m??Math.random()*d)>>>0},u.default.prototype.randomSeed=function(S){this._lcgSetSeed(l,S),this._gaussian_previous=!1},u.default.prototype.random=function(S,m){var y,b;return u.default._validateParameters("random",arguments),y=this[l]!=null?this._lcg(l):Math.random(),S===void 0?y:m===void 0?S instanceof Array?S[Math.floor(y*S.length)]:y*S:(m<S&&(b=S,S=m,m=b),y*(m-S)+S)},u.default.prototype.randomGaussian=function(S){var m,y,b,g,w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)m=x,this._gaussian_previous=!1;else{for(;1<=(g=(y=this.random(2)-1)*y+(b=this.random(2)-1)*b););m=y*(g=Math.sqrt(-2*Math.log(g)/g)),x=b*g,this._gaussian_previous=!0}return m*w+(S||0)},r=u.default,f.default=r},{"../core/main":273}],308:[function(r,h,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function l(m){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(y){return u(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":u(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(S=r("../core/main"))&&S.__esModule?S:{default:S},x=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var y=function(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,C)}();if(y&&y.has(m))return y.get(m);var b,g={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in m){var _;Object.prototype.hasOwnProperty.call(m,b)&&((_=w?Object.getOwnPropertyDescriptor(m,b):null)&&(_.get||_.set)?Object.defineProperty(g,b,_):g[b]=m[b])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));d.default.prototype._angleMode=x.RADIANS,d.default.prototype.acos=function(m){return this._fromRadians(Math.acos(m))},d.default.prototype.asin=function(m){return this._fromRadians(Math.asin(m))},d.default.prototype.atan=function(m){return this._fromRadians(Math.atan(m))},d.default.prototype.atan2=function(m,y){return this._fromRadians(Math.atan2(m,y))},d.default.prototype.cos=function(m){return Math.cos(this._toRadians(m))},d.default.prototype.sin=function(m){return Math.sin(this._toRadians(m))},d.default.prototype.tan=function(m){return Math.tan(this._toRadians(m))},d.default.prototype.degrees=function(m){return m*x.RAD_TO_DEG},d.default.prototype.radians=function(m){return m*x.DEG_TO_RAD},d.default.prototype.angleMode=function(m){if(d.default._validateParameters("angleMode",arguments),m===void 0)return this._angleMode;m!==x.DEGREES&&m!==x.RADIANS||(this._angleMode=m)},d.default.prototype._toRadians=function(m){return this._angleMode===x.DEGREES?m*x.DEG_TO_RAD:m},d.default.prototype._toDegrees=function(m){return this._angleMode===x.RADIANS?m*x.RAD_TO_DEG:m},d.default.prototype._fromRadians=function(m){return this._angleMode===x.DEGREES?m*x.RAD_TO_DEG:m};var S=d.default;f.default=S},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],309:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};u.default.prototype.textAlign=function(l,d){var x;return u.default._validateParameters("textAlign",arguments),(x=this._renderer).textAlign.apply(x,arguments)},u.default.prototype.textLeading=function(l){var d;return u.default._validateParameters("textLeading",arguments),(d=this._renderer).textLeading.apply(d,arguments)},u.default.prototype.textSize=function(l){var d;return u.default._validateParameters("textSize",arguments),(d=this._renderer).textSize.apply(d,arguments)},u.default.prototype.textStyle=function(l){var d;return u.default._validateParameters("textStyle",arguments),(d=this._renderer).textStyle.apply(d,arguments)},u.default.prototype.textWidth=function(){for(var l,d=arguments.length,x=new Array(d),S=0;S<d;S++)x[S]=arguments[S];return x[0]+="",u.default._validateParameters("textWidth",x),x[0].length===0?0:(l=this._renderer).textWidth.apply(l,x)},u.default.prototype.textAscent=function(){for(var l=arguments.length,d=new Array(l),x=0;x<l;x++)d[x]=arguments[x];return u.default._validateParameters("textAscent",d),this._renderer.textAscent()},u.default.prototype.textDescent=function(){for(var l=arguments.length,d=new Array(l),x=0;x<l;x++)d[x]=arguments[x];return u.default._validateParameters("textDescent",d),this._renderer.textDescent()},u.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},u.default.prototype.textWrap=function(l){if(l!=="WORD"&&l!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(l)},r=u.default,f.default=r},{"../core/main":273}],310:[function(r,h,f){function u(g){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(g)}function l(g){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)})(g)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.last-index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(b=r("../core/main"))&&b.__esModule?b:{default:b},x=y(r("../core/constants")),S=y(r("opentype.js"));function m(){var g;return typeof WeakMap!="function"?null:(g=new WeakMap,m=function(){return g},g)}function y(g){if(g&&g.__esModule)return g;if(g===null||l(g)!=="object"&&typeof g!="function")return{default:g};var w=m();if(w&&w.has(g))return w.get(g);var _,C,k={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(_ in g)Object.prototype.hasOwnProperty.call(g,_)&&((C=E?Object.getOwnPropertyDescriptor(g,_):null)&&(C.get||C.set)?Object.defineProperty(k,_,C):k[_]=g[_]);return k.default=g,w&&w.set(g,k),k}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),d.default.prototype.loadFont=function(g,w,_){d.default._validateParameters("loadFont",arguments);var C=new d.default.Font(this),k=this;return S.load(g,function(E,j){if(E)return d.default._friendlyFileLoadError(4,g),_!==void 0?_(E):void console.error(E,g);C.font=j,w!==void 0&&w(C),k._decrementPreload();var A=(j=(E=g.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:E.slice(j+1);["ttf","otf","woff","woff2"].includes(A)&&(A=E.slice(0,j!==-1?j:0),(E=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(A,`;
src: url(`).concat(g,`);
}
`))),document.head.appendChild(E))}),C},d.default.prototype.text=function(g,w,_,C,k){var E;return d.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(E=this._renderer).text.apply(E,arguments):this},d.default.prototype.textFont=function(g,w){if(d.default._validateParameters("textFont",arguments),arguments.length){if(g)return this._renderer._setProperty("_textFont",g),w&&(this._renderer._setProperty("_textSize",w),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",w*x._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var b=d.default;f.default=b},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,"opentype.js":247}],311:[function(r,h,f){function u(N){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(N)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(l=r("../core/main"))&&l.__esModule?l:{default:l},d=function(N){if(N&&N.__esModule)return N;if(N===null||x(N)!=="object"&&typeof N!="function")return{default:N};var D=function(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,G)}();if(D&&D.has(N))return D.get(N);var z,$={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(z in N){var F;Object.prototype.hasOwnProperty.call(N,z)&&((F=B?Object.getOwnPropertyDescriptor(N,z):null)&&(F.get||F.set)?Object.defineProperty($,z,F):$[z]=N[z])}return $.default=N,D&&D.set(N,$),$}(r("../core/constants"));function x(N){return(x=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(D){return u(D)}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":u(D)})(N)}function S(N,D){for(var z=0;z<D.length;z++){var $=D[z];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(N,$.key,$)}}function m(N,D){var z=N.length;return N[D<0?D%z+z:D%z]}function y(N,D,z,$){var B,F,G;return $?(y.tmpPoint1===void 0&&(y.tmpPoint1=[],y.tmpPoint2=[]),F=y.tmpPoint1,G=y.tmpPoint2,F.x=D.x-N.x,F.y=D.y-N.y,G.x=z.x-D.x,G.y=z.y-D.y,B=F.x*G.x+F.y*G.y,F=Math.sqrt(F.x*F.x+F.y*F.y),G=Math.sqrt(G.x*G.x+G.y*G.y),Math.acos(B/(F*G))<$):(D[0]-N[0])*(z[1]-N[1])-(z[0]-N[0])*(D[1]-N[1])==0}function b(N,D,z,$,B,F,G,W,L){var V=1-L,Y=(Z=Math.pow(V,3))*N+3*(J=Math.pow(V,2))*L*z+3*V*L*L*B+(ne=(ie=L*L)*L)*G,Z=Z*D+3*J*L*$+3*V*L*L*F+ne*W,J=N+2*L*(z-N)+ie*(B-2*z+N),ne=D+2*L*($-D)+ie*(F-2*$+D),se=z+2*L*(B-z)+ie*(G-2*B+z),ie=$+2*L*(F-$)+ie*(W-2*F+$);return N=V*N+L*z,z=V*D+L*$,D=V*B+L*G,$=V*F+L*W,B=90-180*Math.atan2(J-se,ne-ie)/Math.PI,(se<J||ne<ie)&&(B+=180),{x:Y,y:Z,m:{x:J,y:ne},n:{x:se,y:ie},start:{x:N,y:z},end:{x:D,y:$},alpha:B}}function g(N,D,z,$,B,F,G,W,L){return L==null?A(N,D,z,$,B,F,G,W):b(N,D,z,$,B,F,G,W,function(V,Y,Z,J,ne,se,ie,X,Q){if(!(Q<0||A(V,Y,Z,J,ne,se,ie,X)<Q)){var re,ce=.5,he=1-ce;for(re=A(V,Y,Z,J,ne,se,ie,X,he);.01<Math.abs(re-Q);)re=A(V,Y,Z,J,ne,se,ie,X,he+=(re<Q?1:-1)*(ce/=2));return he}}(N,D,z,$,B,F,G,W,L))}function w(N,D,z){for(var $,B,F,G,W,L=0,V=0,Y=(N=function(Z,J){function ne(_e,Me,He){var ze,st;if(!_e)return["C",Me.x,Me.y,Me.x,Me.y,Me.x,Me.y];switch(_e[0]in{T:1,Q:1}||(Me.qx=Me.qy=null),_e[0]){case"M":Me.X=_e[1],Me.Y=_e[2];break;case"A":_e=["C"].concat(C.apply(0,[Me.x,Me.y].concat(_e.slice(1))));break;case"S":st=He==="C"||He==="S"?(ze=2*Me.x-Me.bx,2*Me.y-Me.by):(ze=Me.x,Me.y),_e=["C",ze,st].concat(_e.slice(1));break;case"T":He==="Q"||He==="T"?(Me.qx=2*Me.x-Me.qx,Me.qy=2*Me.y-Me.qy):(Me.qx=Me.x,Me.qy=Me.y),_e=["C"].concat(j(Me.x,Me.y,Me.qx,Me.qy,_e[1],_e[2]));break;case"Q":Me.qx=_e[1],Me.qy=_e[2],_e=["C"].concat(j(Me.x,Me.y,_e[1],_e[2],_e[3],_e[4]));break;case"L":_e=["C"].concat(E(Me.x,Me.y,_e[1],_e[2]));break;case"H":_e=["C"].concat(E(Me.x,Me.y,_e[1],Me.y));break;case"V":_e=["C"].concat(E(Me.x,Me.y,Me.x,_e[1]));break;case"Z":_e=["C"].concat(E(Me.x,Me.y,Me.X,Me.Y))}return _e}function se(_e,Me){if(7<_e[Me].length){_e[Me].shift();for(var He=_e[Me];He.length;)fe[Me]="A",_e.splice(Me++,0,["C"].concat(He.splice(0,6)));_e.splice(Me,1),X=Math.max(Q.length,0)}}function ie(_e,Me,He,ze,st){_e&&Me&&_e[st][0]==="M"&&Me[st][0]!=="M"&&(Me.splice(st,0,["M",ze.x,ze.y]),He.bx=0,He.by=0,He.x=_e[st][1],He.y=_e[st][2],X=Math.max(Q.length,0))}var X,Q=_(Z),re=J,ce={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},he={x:0,y:0,bx:0,by:0},fe=[],oe="",me="";X=Math.max(Q.length,0);for(var we=0;we<X;we++){(oe=Q[we]?Q[we][0]:oe)!=="C"&&(fe[we]=oe,we&&(me=fe[we-1])),Q[we]=ne(Q[we],ce,me),fe[we]!=="A"&&oe==="C"&&(fe[we]="C"),se(Q,we),ie(Q,re,ce,he,we),ie(re,Q,he,ce,we);var ke=Q[we],ve=ke.length;ce.x=ke[ve-2],ce.y=ke[ve-1],ce.bx=parseFloat(ke[ve-4])||ce.x,ce.by=parseFloat(ke[ve-3])||ce.y,he.bx=re,he.by=re,he.x=re,he.y=re}return re?[Q,re]:Q}(N)).length;V<Y;V++){if((F=N[V])[0]==="M")$=+F[1],B=+F[2];else{if(D<L+(G=g($,B,F[1],F[2],F[3],F[4],F[5],F[6]))&&!z)return{x:(W=g($,B,F[1],F[2],F[3],F[4],F[5],F[6],D-L)).x,y:W.y,alpha:W.alpha};L+=G,$=+F[5],B=+F[6]}F.shift()}return(W=z?L:b($,B,F[0],F[1],F[2],F[3],F[4],F[5],1)).alpha?{x:W.x,y:W.y,alpha:W.alpha}:W}function _(N){var D=[],z=0,$=0,B=0,F=0,G=0;if(N){N[0][0]==="M"&&(B=z=+N[0][1],F=$=+N[0][2],G++,D[0]=["M",z,$]);for(var W,L,V=N.length===3&&N[0][0]==="M"&&N[1][0].toUpperCase()==="R"&&N[2][0].toUpperCase()==="Z",Y=G,Z=N.length;Y<Z;Y++){if(D.push(W=[]),(L=N[Y])[0]!==String.prototype.toUpperCase.call(L[0]))switch(W[0]=String.prototype.toUpperCase.call(L[0]),W[0]){case"A":W[1]=L[1],W[2]=L[2],W[3]=L[3],W[4]=L[4],W[5]=L[5],W[6]=+(L[6]+z),W[7]=+(L[7]+$);break;case"V":W[1]=+L[1]+$;break;case"H":W[1]=+L[1]+z;break;case"R":for(var J,ne=2,se=(J=[z,$].concat(L.slice(1))).length;ne<se;ne++)J[ne]=+J[ne]+z,J[++ne]=+J[ne]+$;D.pop(),D=D.concat(k(J,V));break;case"M":B=+L[1]+z,F=+L[2]+$;break;default:for(var ie=1,X=L.length;ie<X;ie++)W[ie]=+L[ie]+(ie%2?z:$)}else if(L[0]==="R")J=[z,$].concat(L.slice(1)),D.pop(),D=D.concat(k(J,V)),W=["R"].concat(L.slice(-2));else for(var Q=0,re=L.length;Q<re;Q++)W[Q]=L[Q];switch(W[0]){case"Z":z=B,$=F;break;case"H":z=W[1];break;case"V":$=W[1];break;case"M":B=W[W.length-2],F=W[W.length-1];break;default:z=W[W.length-2],$=W[W.length-1]}}}return D}function C(N,D,z,$,B,F,G,W,L,V){function Y(ve,_e,Me){return{x:ve*Math.cos(Me)-_e*Math.sin(Me),y:ve*Math.sin(Me)+_e*Math.cos(Me)}}var Z,J=120*(Q=Math.PI)/180,ne=Q/180*(+B||0),se=[],ie=(V?(oe=V[0],Z=V[1],he=V[2],fe=V[3]):(N=(re=Y(N,D,-ne)).x,D=re.y,1<(ie=(X=(N-(W=(re=Y(W,L,-ne)).x))/2)*X/(z*z)+(re=(D-(L=re.y))/2)*re/($*$))&&(z*=ie=Math.sqrt(ie),$*=ie),ie=z*z,ce=$*$,he=(F=(F===G?-1:1)*Math.sqrt(Math.abs((ie*ce-ie*re*re-ce*X*X)/(ie*re*re+ce*X*X))))*z*re/$+(N+W)/2,fe=F*-$*X/z+(D+L)/2,oe=Math.asin(((D-fe)/$).toFixed(9)),Z=Math.asin(((L-fe)/$).toFixed(9)),(oe=N<he?Q-oe:oe)<0&&(oe=2*Q+oe),(Z=W<he?Q-Z:Z)<0&&(Z=2*Q+Z),G&&Z<oe&&(oe-=2*Q),!G&&oe<Z&&(Z-=2*Q)),Z-oe),X=(Math.abs(ie)>J&&(ce=Z,re=W,F=L,Z=oe+J*(G&&oe<Z?1:-1),se=C(W=he+z*Math.cos(Z),L=fe+$*Math.sin(Z),z,$,B,0,G,re,F,[Z,ce,he,fe])),ie=Z-oe,Math.cos(oe)),Q=Math.sin(oe),re=(J=Math.cos(Z),B=Math.sin(Z),4/3*z*(G=Math.tan(ie/4))),ce=[N,D],he=[N+re*Q,D-(F=4/3*$*G)*X],fe=[W+re*B,L-F*J],oe=[W,L];if(he[0]=2*ce[0]-he[0],he[1]=2*ce[1]-he[1],V)return[he,fe,oe].concat(se);for(var me=[],we=0,ke=(se=[he,fe,oe].concat(se).join().split(",")).length;we<ke;we++)me[we]=we%2?Y(se[we-1],se[we],ne).y:Y(se[we],se[we+1],ne).x;return me}function k(N,D){for(var z=[],$=0,B=N.length;$<B-2*!D;$+=2){var F=[{x:+N[$-2],y:+N[$-1]},{x:+N[$],y:+N[$+1]},{x:+N[$+2],y:+N[$+3]},{x:+N[$+4],y:+N[$+5]}];D?$?B-4===$?F[3]={x:+N[0],y:+N[1]}:B-2===$&&(F[2]={x:+N[0],y:+N[1]},F[3]={x:+N[2],y:+N[3]}):F[0]={x:+N[B-2],y:+N[B-1]}:B-4===$?F[3]=F[2]:$||(F[0]={x:+N[$],y:+N[$+1]}),z.push(["C",(-F[0].x+6*F[1].x+F[2].x)/6,(-F[0].y+6*F[1].y+F[2].y)/6,(F[1].x+6*F[2].x-F[3].x)/6,(F[1].y+6*F[2].y-F[3].y)/6,F[2].x,F[2].y])}return z}function E(N,D,z,$){return[N,D,z,$,z,$]}function j(N,D,z,$,B,F){return[1/3*N+2/3*z,1/3*D+2/3*$,1/3*B+2/3*z,1/3*F+2/3*$,B,F]}function A(N,D,z,$,B,F,G,W,L){for(var V=(L=1<(L=L??1)?1:L<0?0:L)/2,Y=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Z=0,J=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ne=0;ne<12;ne++){var se=O(ie=V*Y[ne]+V,N,z,B,G),ie=O(ie,D,$,F,W);Z+=J[ne]*Math.sqrt(se*se+ie*ie)}return V*Z}function O(N,D,z,$,B){return N*(N*(-3*D+9*z-9*$+3*B)+6*D-12*z+6*$)-3*D+3*z}l.default.Font=function(){function N($){if(!(this instanceof N))throw new TypeError("Cannot call a class as a function");this.parent=$,this.cache={},this.font=void 0}var D,z;return D=N,(z=[{key:"textBounds",value:function($){var B=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,F=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,G=3<arguments.length?arguments[3]:void 0,W=4<arguments.length?arguments[4]:void 0,L=W&&W.renderer&&W.renderer._pInst||this.parent;if((ce=L._renderer.drawingContext).textAlign||d.LEFT,ce.textBaseline||d.BASELINE,G=G||L._renderer._textSize,!he){for(var V=[],Y=[],Z=[],J=(Z[0]=[],[]),ne=this._scale(G),se=L._renderer.textLeading(),ie=0,X=(this.font.forEachGlyph($,B,F,G,W,function(fe,oe,me,we){var ke=fe.getMetrics();fe.index===0||fe.index===10?Z[ie+=1]=[]:(Z[ie].push(oe+ke.xMin*ne),Z[ie].push(oe+ke.xMax*ne),J.push(me+ie*se+-ke.yMin*ne),J.push(me+ie*se+-ke.yMax*ne))}),0<Z[ie].length&&(V[ie]=Math.min.apply(null,Z[ie]),Y[ie]=Math.max.apply(null,Z[ie])),0),Q=0;Q<=ie;Q++){V[Q]=Math.min.apply(null,Z[Q]),Y[Q]=Math.max.apply(null,Z[Q]);var re=Y[Q]-V[Q];X<re&&(X=re)}var ce,he={x:ce=Math.min.apply(null,V),y:F=Math.min.apply(null,J),h:Math.max.apply(null,J)-F,w:X,advance:ce-B};G=this._handleAlignment(L._renderer,$,he.x,he.y,he.w+he.advance),he.x=G.x,he.y=G.y}return he}},{key:"textToPoints",value:function($,B,F,G,W){var L=0,V=[],Y=this._getGlyphs($);G=G||this.parent._renderer._textSize;for(var Z,J=0;J<Y.length;J++){if(!(Y[Z=J].name&&Y[Z].name==="space"||$.length===Y.length&&$[Z]===" "))for(var ne=function(Q){for(var re,ce=[],he=0;he<Q.length;he++)Q[he].type==="M"&&(re&&ce.push(re),re=[]),re.push(function(fe){var oe=[fe.type];return fe.type==="M"||fe.type==="L"?oe.push(fe.x,fe.y):fe.type==="C"?oe.push(fe.x1,fe.y1,fe.x2,fe.y2,fe.x,fe.y):fe.type==="Q"&&oe.push(fe.x1,fe.y1,fe.x,fe.y),oe}(Q[he]));return ce.push(re),ce}(Y[J].getPath(B,F,G).commands),se=0;se<ne.length;se++)for(var ie=function(Q,re){re=function(me,we){if(x(me)!=="object")me=we;else for(var ke in we)me[ke]===void 0&&(me[ke]=we[ke]);return me}(re,{sampleFactor:.1,simplifyThreshold:0});for(var ce=w(Q,0,1),he=ce/(ce*re.sampleFactor),fe=[],oe=0;oe<ce;oe+=he)fe.push(w(Q,oe));return re.simplifyThreshold&&function(me){for(var we=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ke=me.length-1;3<me.length&&0<=ke;--ke)y(m(me,ke-1),m(me,ke),m(me,ke+1),we)&&me.splice(ke%me.length,1)}(fe,re.simplifyThreshold),fe}(ne[se],W),X=0;X<ie.length;X++)ie[X].x+=L,V.push(ie[X]);L+=Y[J].advanceWidth*this._scale(G)}return V}},{key:"_getGlyphs",value:function($){return this.font.stringToGlyphs($)}},{key:"_getPath",value:function($,B,F,G){var W=(G&&G.renderer&&G.renderer._pInst||this.parent)._renderer;return B=this._handleAlignment(W,$,B,F),this.font.getPath($,B.x,B.y,W._textSize,G)}},{key:"_getPathData",value:function($,B,F,G){var W=3;return typeof $=="string"&&2<arguments.length?$=this._getPath($,B,F,G):x(B)==="object"&&(G=B),G&&typeof G.decimals=="number"&&(W=G.decimals),$.toPathData(W)}},{key:"_getSVG",value:function($,B,F,G){var W=3;return typeof $=="string"&&2<arguments.length?$=this._getPath($,B,F,G):x(B)==="object"&&(G=B),G&&(typeof G.decimals=="number"&&(W=G.decimals),typeof G.strokeWidth=="number"&&($.strokeWidth=G.strokeWidth),G.fill!==void 0&&($.fill=G.fill),G.stroke!==void 0&&($.stroke=G.stroke)),$.toSVG(W)}},{key:"_renderPath",value:function($,B,F,G){var W=G&&G.renderer||this.parent._renderer,L=W.drawingContext,V=($=(x($)==="object"&&$.commands?$:this._getPath($,B,F,G)).commands,L.beginPath(),!0);B=!1,F=void 0;try{for(var Y,Z=$[Symbol.iterator]();!(V=(Y=Z.next()).done);V=!0){var J=Y.value;J.type==="M"?L.moveTo(J.x,J.y):J.type==="L"?L.lineTo(J.x,J.y):J.type==="C"?L.bezierCurveTo(J.x1,J.y1,J.x2,J.y2,J.x,J.y):J.type==="Q"?L.quadraticCurveTo(J.x1,J.y1,J.x,J.y):J.type==="Z"&&L.closePath()}}catch(ne){B=!0,F=ne}finally{try{V||Z.return==null||Z.return()}finally{if(B)throw F}}return W._doStroke&&W._strokeSet&&L.stroke(),W._doFill&&(W._fillSet||W._setFill(d._DEFAULT_TEXT_FILL),L.fill()),this}},{key:"_textWidth",value:function($,B){return this.font.getAdvanceWidth($,B)}},{key:"_textAscent",value:function($){return this.font.ascender*this._scale($)}},{key:"_textDescent",value:function($){return-this.font.descender*this._scale($)}},{key:"_scale",value:function($){return 1/this.font.unitsPerEm*($||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function($,B,F,G,W){var L=$._textSize;switch(W===void 0&&(W=this._textWidth(B,L)),$._textAlign){case d.CENTER:F-=W/2;break;case d.RIGHT:F-=W}switch($._textBaseline){case d.TOP:G+=this._textAscent(L);break;case d.CENTER:G+=this._textAscent(L)/2;break;case d.BOTTOM:G-=this._textDescent(L)}return{x:F,y:G}}}])&&S(D.prototype,z),N}(),r=l.default,f.default=r},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],312:[function(r,h,f){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.array-buffer.constructor"),r("core-js/modules/es.object.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../core/main"))&&r.__esModule?r:{default:r}).default.prototype.append=function(u,l){return u.push(l),u},r.default.prototype.arrayCopy=function(u,l,d,x,S){var m,y;u=S!==void 0?(y=Math.min(S,u.length),m=x,u.slice(l,y+l)):(y=d!==void 0?(y=d,Math.min(y,u.length)):u.length,d=l,u.slice(m=0,y)),Array.prototype.splice.apply(d,[m,y].concat(u))},r.default.prototype.concat=function(u,l){return u.concat(l)},r.default.prototype.reverse=function(u){return u.reverse()},r.default.prototype.shorten=function(u){return u.pop(),u},r.default.prototype.shuffle=function(u,l){for(var d,x,S=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(u),m=(u=l||S?u:u.slice()).length;1<m;)d=this.random(0,1)*m|0,x=u[--m],u[m]=u[d],u[d]=x;return u},r.default.prototype.sort=function(u,l){var d=l?u.slice(0,Math.min(l,u.length)):u;return l=l?u.slice(Math.min(l,u.length)):[],(d=typeof d[0]=="string"?d.sort():d.sort(function(x,S){return x-S})).concat(l)},r.default.prototype.splice=function(u,l,d){return Array.prototype.splice.apply(u,[d,0].concat(l)),u},r.default.prototype.subset=function(u,l,d){return d!==void 0?u.slice(l,l+d):u.slice(l,u.length)},r=r.default,f.default=r},{"../core/main":273,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180}],313:[function(r,h,f){r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),r("core-js/modules/es.array.map"),r("core-js/modules/es.number.constructor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.repeat"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};u.default.prototype.float=function(l){return l instanceof Array?l.map(parseFloat):parseFloat(l)},u.default.prototype.int=function(l){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return l===1/0||l==="Infinity"?1/0:l===-1/0||l==="-Infinity"?-1/0:typeof l=="string"?parseInt(l,d):typeof l=="number"?0|l:typeof l=="boolean"?l?1:0:l instanceof Array?l.map(function(x){return u.default.prototype.int(x,d)}):void 0},u.default.prototype.str=function(l){return l instanceof Array?l.map(u.default.prototype.str):String(l)},u.default.prototype.boolean=function(l){return typeof l=="number"?l!==0:typeof l=="string"?l.toLowerCase()==="true":typeof l=="boolean"?l:l instanceof Array?l.map(u.default.prototype.boolean):void 0},u.default.prototype.byte=function(l){return typeof(l=u.default.prototype.int(l,10))=="number"?(l+128)%256-128:l instanceof Array?l.map(u.default.prototype.byte):void 0},u.default.prototype.char=function(l){return typeof l!="number"||isNaN(l)?l instanceof Array?l.map(u.default.prototype.char):typeof l=="string"?u.default.prototype.char(parseInt(l,10)):void 0:String.fromCharCode(l)},u.default.prototype.unchar=function(l){return typeof l=="string"&&l.length===1?l.charCodeAt(0):l instanceof Array?l.map(u.default.prototype.unchar):void 0},u.default.prototype.hex=function(l,d){if(d=d??8,l instanceof Array)return l.map(function(S){return u.default.prototype.hex(S,d)});if(l===1/0||l===-1/0)return(l===1/0?"F":"0").repeat(d);if(typeof l=="number"){l<0&&(l=4294967295+l+1);for(var x=Number(l).toString(16).toUpperCase();x.length<d;)x="0".concat(x);return x.length>=d?x.substring(x.length-d,x.length):x}},u.default.prototype.unhex=function(l){return l instanceof Array?l.map(u.default.prototype.unhex):parseInt("0x".concat(l),16)},r=u.default,f.default=r},{"../core/main":273,"core-js/modules/es.array.map":163,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.repeat":193}],314:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.filter"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.constructor"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.pad-start"),r("core-js/modules/es.string.replace"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(y=r("../core/main"))&&y.__esModule?y:{default:y};function l(b,g){return function(w){if(Array.isArray(w))return w}(b)||function(w,_){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]"){var C=[],k=!0,E=!1,j=void 0;try{for(var A,O=w[Symbol.iterator]();!(k=(A=O.next()).done)&&(C.push(A.value),!_||C.length!==_);k=!0);}catch(N){E=!0,j=N}finally{try{k||O.return==null||O.return()}finally{if(E)throw j}}return C}}(b,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(b,g,w){var _=(C=l(b.toString().split("."),2))[0],C=C[1];return w===void 0?(_=_.padStart(g,"0"),C?_+"."+C:_):(_=(b=l(b.toFixed(w).toString().split("."),2))[0],C=b[1],(_=_.padStart(g,"0"))+"."+C)}function x(b,g){var w=(b=b.toString()).indexOf("."),_=w!==-1?b.substring(w):"";if(b=(b=w!==-1?b.substring(0,w):b).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),g===0)_="";else if(g!==void 0)if(g>_.length)for(var C=g-(_+=w===-1?".":"").length+1,k=0;k<C;k++)_+="0";else _=_.substring(0,g+1);return b+_}function S(b){return 0<parseFloat(b)?"+".concat(b.toString()):b.toString()}function m(b){return 0<=parseFloat(b)?" ".concat(b.toString()):b.toString()}r("../core/friendly_errors/validate_params"),r("../core/friendly_errors/file_errors"),r("../core/friendly_errors/fes_core"),u.default.prototype.join=function(b,g){return u.default._validateParameters("join",arguments),b.join(g)},u.default.prototype.match=function(b,g){return u.default._validateParameters("match",arguments),b.match(g)},u.default.prototype.matchAll=function(b,g){u.default._validateParameters("matchAll",arguments);for(var w=new RegExp(g,"g"),_=w.exec(b),C=[];_!==null;)C.push(_),_=w.exec(b);return C},u.default.prototype.nf=function(b,g,w){return u.default._validateParameters("nf",arguments),b instanceof Array?b.map(function(_){return d(_,g,w)}):Object.prototype.toString.call(b)==="[object Arguments]"?b.length===3?this.nf(b[0],b[1],b[2]):b.length===2?this.nf(b[0],b[1]):this.nf(b[0]):d(b,g,w)},u.default.prototype.nfc=function(b,g){return u.default._validateParameters("nfc",arguments),b instanceof Array?b.map(function(w){return x(w,g)}):x(b,g)},u.default.prototype.nfp=function(){for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];u.default._validateParameters("nfp",g);var _=u.default.prototype.nf.apply(this,g);return _ instanceof Array?_.map(S):S(_)},u.default.prototype.nfs=function(){for(var b=arguments.length,g=new Array(b),w=0;w<b;w++)g[w]=arguments[w];u.default._validateParameters("nfs",g);var _=u.default.prototype.nf.apply(this,g);return _ instanceof Array?_.map(m):m(_)},u.default.prototype.split=function(b,g){return u.default._validateParameters("split",arguments),b.split(g)},u.default.prototype.splitTokens=function(b,g){var w,_;return u.default._validateParameters("splitTokens",arguments),_=g!==void 0?(_=/\]/g.exec(g=g),(w=/\[/g.exec(g))&&_?(g=g.slice(0,_.index)+g.slice(_.index+1),w=/\[/g.exec(g),g=g.slice(0,w.index)+g.slice(w.index+1),new RegExp("[\\[".concat(g,"\\]]"),"g")):_?(g=g.slice(0,_.index)+g.slice(_.index+1),new RegExp("[".concat(g,"\\]]"),"g")):w?(g=g.slice(0,w.index)+g.slice(w.index+1),new RegExp("[".concat(g,"\\[]"),"g")):new RegExp("[".concat(g,"]"),"g")):/\s/g,b.split(_).filter(function(C){return C})},u.default.prototype.trim=function(b){return u.default._validateParameters("trim",arguments),b instanceof Array?b.map(this.trim):b.trim()};var y=u.default;f.default=y},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.pad-start":192,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],315:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../core/main"))&&r.__esModule?r:{default:r}).default.prototype.day=function(){return new Date().getDate()},r.default.prototype.hour=function(){return new Date().getHours()},r.default.prototype.minute=function(){return new Date().getMinutes()},r.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},r.default.prototype.month=function(){return new Date().getMonth()+1},r.default.prototype.second=function(){return new Date().getSeconds()},r.default.prototype.year=function(){return new Date().getFullYear()},r=r.default,f.default=r},{"../core/main":273}],316:[function(r,h,f){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.number.to-fixed"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(m=r("../core/main"))&&m.__esModule?m:{default:m},x=(r("./p5.Geometry"),function(y){if(y&&y.__esModule)return y;if(y===null||l(y)!=="object"&&typeof y!="function")return{default:y};var b=function(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,k)}();if(b&&b.has(y))return b.get(y);var g,w={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in y){var C;Object.prototype.hasOwnProperty.call(y,g)&&((C=_?Object.getOwnPropertyDescriptor(y,g):null)&&(C.get||C.set)?Object.defineProperty(w,g,C):w[g]=y[g])}return w.default=y,b&&b.set(y,w),w}(r("../core/constants")));function S(y,b,g,w,_,C,k){y=y<=0?1:y,b=b<0?0:b,g=g<=0?y:g,w=w<3?3:w;for(var E,j,A=(C=C===void 0||C)?-2:0,O=(_=_<1?1:_)+((k=k===void 0?b!==0:k)?2:0),N=Math.atan2(y-b,g),D=Math.sin(N),z=Math.cos(N),$=A;$<=O;++$){var B=$/_,F=g*B,G=void 0;for(G=$<0?(B=F=0,y):_<$?(F=g,B=1,b):y+(b-y)*B,$!==-2&&$!==_+2||(G=0),F-=g/2,E=0;E<w;++E){var W=E/(w-1),L=2*Math.PI*W,V=Math.sin(L),Y=(L=Math.cos(L),this.vertices.push(new d.default.Vector(V*G,F,L*G)));Y=$<0?new d.default.Vector(0,-1,0):_<$&&b?new d.default.Vector(0,1,0):new d.default.Vector(V*z,D,L*z),this.vertexNormals.push(Y),this.uvs.push(W,B)}}var Z=0;if(C){for(j=0;j<w;++j)this.faces.push([Z+j,Z+w+(j+1)%w,Z+w+j]);Z+=2*w}for($=0;$<_;++$){for(E=0;E<w;++E){var J=(E+1)%w;this.faces.push([Z+E,Z+J,Z+w+J]),this.faces.push([Z+E,Z+w+J,Z+w+E])}Z+=w}if(k)for(Z+=w,E=0;E<w;++E)this.faces.push([Z+E,Z+(E+1)%w,Z+w])}d.default.prototype.plane=function(y,b,g,w){this._assert3d("plane"),d.default._validateParameters("plane",arguments),y===void 0&&(y=50),b===void 0&&(b=y),w===void 0&&(w=1);var _,C="plane|".concat(g=g===void 0?1:g,"|").concat(w);return this._renderer.geometryInHash(C)||((_=new d.default.Geometry(g,w,function(){for(var k,E,j=0;j<=this.detailY;j++)for(var A=j/this.detailY,O=0;O<=this.detailX;O++)k=O/this.detailX,E=new d.default.Vector(k-.5,A-.5,0),this.vertices.push(E),this.uvs.push(k,A)})).computeFaces().computeNormals(),g<=1&&w<=1?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(C,_)),this._renderer.drawBuffersScaled(C,y,b,1),this},d.default.prototype.box=function(y,b,g,w,_){this._assert3d("box"),d.default._validateParameters("box",arguments),y===void 0&&(y=50),b===void 0&&(b=y),g===void 0&&(g=b);var C,k=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return _===void 0&&(_=k?1:4),k="box|".concat(w=w===void 0?k?1:4:w,"|").concat(_),this._renderer.geometryInHash(k)||((C=new d.default.Geometry(w,_,function(){var E=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(j,A){A*=4;for(var O=0;O<4;O++){var N=j[O];N=new d.default.Vector((2*(1&N)-1)/2,((2&N)-1)/2,((4&N)/2-1)/2),E.vertices.push(N),E.uvs.push(1&O,(2&O)/2)}E.faces.push([A,1+A,2+A]),E.faces.push([2+A,1+A,3+A])})})).computeNormals(),w<=4&&_<=4?C._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(k,C)),this._renderer.drawBuffersScaled(k,y,b,g),this},d.default.prototype.sphere=function(y,b,g){return this._assert3d("sphere"),d.default._validateParameters("sphere",arguments),this.ellipsoid(y=y===void 0?50:y,y,y,b=b===void 0?24:b,g=g===void 0?16:g),this},d.default.prototype.cylinder=function(y,b,g,w,_,C){this._assert3d("cylinder"),d.default._validateParameters("cylinder",arguments),y===void 0&&(y=50),b===void 0&&(b=y),w===void 0&&(w=1),C===void 0&&(C=!0),_===void 0&&(_=!0);var k,E="cylinder|".concat(g=g===void 0?24:g,"|").concat(w,"|").concat(_,"|").concat(C);return this._renderer.geometryInHash(E)||(k=new d.default.Geometry(g,w),S.call(k,1,1,1,g,w,_,C),g<=24&&w<=16?k._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(E,k)),this._renderer.drawBuffersScaled(E,y,b,y),this},d.default.prototype.cone=function(y,b,g,w,_){this._assert3d("cone"),d.default._validateParameters("cone",arguments),y===void 0&&(y=50),b===void 0&&(b=y),w===void 0&&(w=1),_===void 0&&(_=!0);var C,k="cone|".concat(g=g===void 0?24:g,"|").concat(w,"|").concat(_);return this._renderer.geometryInHash(k)||(C=new d.default.Geometry(g,w),S.call(C,1,0,1,g,w,_,!1),g<=24&&w<=16?C._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(k,C)),this._renderer.drawBuffersScaled(k,y,b,y),this},d.default.prototype.ellipsoid=function(y,b,g,w,_){this._assert3d("ellipsoid"),d.default._validateParameters("ellipsoid",arguments),y===void 0&&(y=50),b===void 0&&(b=y),g===void 0&&(g=y),_===void 0&&(_=16);var C,k="ellipsoid|".concat(w=w===void 0?24:w,"|").concat(_);return this._renderer.geometryInHash(k)||((C=new d.default.Geometry(w,_,function(){for(var E=0;E<=this.detailY;E++)for(var j=E/this.detailY,A=Math.PI*j-Math.PI/2,O=Math.cos(A),N=Math.sin(A),D=0;D<=this.detailX;D++){var z=D/this.detailX,$=2*Math.PI*z,B=Math.cos($);$=Math.sin($),$=new d.default.Vector(O*$,N,O*B),this.vertices.push($),this.vertexNormals.push($),this.uvs.push(z,j)}})).computeFaces(),w<=24&&_<=24?C._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(k,C)),this._renderer.drawBuffersScaled(k,y,b,g),this},d.default.prototype.torus=function(y,b,g,w){if(this._assert3d("torus"),d.default._validateParameters("torus",arguments),y===void 0)y=50;else if(!y)return;if(b===void 0)b=10;else if(!b)return;g===void 0&&(g=24),w===void 0&&(w=16);var _,C=(b/y).toPrecision(4);return b="torus|".concat(C,"|").concat(g,"|").concat(w),this._renderer.geometryInHash(b)||((_=new d.default.Geometry(g,w,function(){for(var k=0;k<=this.detailY;k++)for(var E=k/this.detailY,j=2*Math.PI*E,A=Math.cos(j),O=Math.sin(j),N=1+C*A,D=0;D<=this.detailX;D++){var z=D/this.detailX,$=2*Math.PI*z,B=Math.cos($),F=($=Math.sin($),new d.default.Vector(N*B,N*$,C*O));B=new d.default.Vector(A*B,A*$,O),this.vertices.push(F),this.vertexNormals.push(B),this.uvs.push(z,E)}})).computeFaces(),g<=24&&w<=16?_._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,_)),this._renderer.drawBuffersScaled(b,y,y,y),this},d.default.RendererGL.prototype.point=function(y,b,g){var w=[];return w.push(new d.default.Vector(y,b,g=g===void 0?0:g)),this._drawPoints(w,this.immediateMode.buffers.point),this},d.default.RendererGL.prototype.triangle=function(y){var b=y[0],g=y[1],w=y[2],_=y[3],C=y[4],k=(y=y[5],this.geometryInHash("tri")||((k=new d.default.Geometry(1,1,function(){var A=[];A.push(new d.default.Vector(0,0,0)),A.push(new d.default.Vector(1,0,0)),A.push(new d.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=A,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),k.computeNormals(),this.createBuffers("tri",k)),this.uMVMatrix.copy());try{var E=Math.sign(b*_-w*g+w*y-C*_+C*g-b*y),j=new d.default.Matrix([w-b,_-g,0,0,C-b,y-g,0,0,0,0,E,0,b,g,0,1]).mult(this.uMVMatrix);this.uMVMatrix=j,this.drawBuffers("tri")}finally{this.uMVMatrix=k}return this},d.default.RendererGL.prototype.ellipse=function(y){this.arc(y[0],y[1],y[2],y[3],0,x.TWO_PI,x.OPEN,y[4])},d.default.RendererGL.prototype.arc=function(y){var b,g=arguments[1],w=arguments[2],_=arguments[3],C=arguments[4],k=arguments[5],E=arguments[6],j=arguments[7]||25,A=(Math.abs(k-C)>=x.TWO_PI?"".concat(O="ellipse","|"):"".concat(O="arc","|").concat(C,"|").concat(k,"|").concat(E,"|")).concat(j,"|"),O=(this.geometryInHash(A)||((b=new d.default.Geometry(j,1,function(){if(C.toFixed(10)!==k.toFixed(10)){E!==x.PIE&&E!==void 0||(this.vertices.push(new d.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var N=0;N<=j;N++){var D=N/j*(k-C)+C,z=.5+Math.cos(D)/2;D=.5+Math.sin(D)/2,this.vertices.push(new d.default.Vector(z,D,0)),this.uvs.push([z,D]),N<j-1&&(this.faces.push([0,N+1,N+2]),this.edges.push([N+1,N+2]))}switch(E){case x.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case x.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case x.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),j<=50?b._edgesToVertices(b):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(O," with more than 50 detail")),this.createBuffers(A,b)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([y,g,0]),this.uMVMatrix.scale(w,_,1),this.drawBuffers(A)}finally{this.uMVMatrix=O}return this},d.default.RendererGL.prototype.rect=function(y){var b=y[0],g=y[1],w=y[2],_=y[3];if(y[4]===void 0){var C=this._pInst._glAttributes.perPixelLighting,k=y[4]||(C?1:24),E=y[5]||(C?1:16),j=(C="rect|".concat(k,"|").concat(E),this.geometryInHash(C)||((j=new d.default.Geometry(k,E,function(){for(var Y=0;Y<=this.detailY;Y++)for(var Z=Y/this.detailY,J=0;J<=this.detailX;J++){var ne=J/this.detailX,se=new d.default.Vector(ne,Z,0);this.vertices.push(se),this.uvs.push(ne,Z)}0<k&&0<E&&(this.edges=[[0,k],[k,(k+1)*(E+1)-1],[(k+1)*(E+1)-1,(k+1)*E],[(k+1)*E,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(C,j)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([b,g,0]),this.uMVMatrix.scale(w,_,1),this.drawBuffers(C)}finally{this.uMVMatrix=j}}else{C=y[4],j=y[5]===void 0?C:y[5];var A=y[6]===void 0?j:y[6],O=(y=y[7]===void 0?A:y[7],w),N=_,D=(($=((O+=b)<b&&($=b,b=O,O=$),(N+=g)<g&&($=g,g=N,N=$),Math.min((O-b)/2,(N-g)/2)))<C&&(C=$),$<j&&(j=$),$<A&&(A=$),$<y&&(y=$),b),z=g,$=O,B=(b=N,this.beginShape(),j!==0?(this.vertex($-j,z),this.quadraticVertex($,z,$,z+j)):this.vertex($,z),A!==0?(this.vertex($,b-A),this.quadraticVertex($,b,$-A,b)):this.vertex($,b),y!==0?(this.vertex(D+y,b),this.quadraticVertex(D,b,D,b-y)):this.vertex(D,b),C!==0?(this.vertex(D,z+C),this.quadraticVertex(D,z,D+C,z)):this.vertex(D,z),!(this.immediateMode.geometry.uvs.length=0));g=!1,O=void 0;try{for(var F,G=this.immediateMode.geometry.vertices[Symbol.iterator]();!(B=(F=G.next()).done);B=!0){var W=F.value,L=(W.x-D)/w,V=(W.y-z)/_;this.immediateMode.geometry.uvs.push(L,V)}}catch(Y){g=!0,O=Y}finally{try{B||G.return==null||G.return()}finally{if(g)throw O}}this.endShape(x.CLOSE)}return this},d.default.RendererGL.prototype.quad=function(y,b,g,w,_,C,k,E,j,A,O,N,D,z){D===void 0&&(D=2),z===void 0&&(z=2);var $="quad|".concat(y,"|").concat(b,"|").concat(g,"|").concat(w,"|").concat(_,"|").concat(C,"|").concat(k,"|").concat(E,"|").concat(j,"|").concat(A,"|").concat(O,"|").concat(N,"|").concat(D,"|").concat(z);if(!this.geometryInHash($)){var B=new d.default.Geometry(D,z,function(){for(var Y=1/(this.detailX-1),Z=1/(this.detailY-1),J=0;J<this.detailY;J++)for(var ne=0;ne<this.detailX;ne++){var se=ne*Y,ie=J*Z;this.vertices.push(new d.default.Vector((1-se)*((1-ie)*y+ie*A)+se*((1-ie)*w+ie*k),(1-se)*((1-ie)*b+ie*O)+se*((1-ie)*_+ie*E),(1-se)*((1-ie)*g+ie*N)+se*((1-ie)*C+ie*j))),this.uvs.push([se,ie])}});B.faces=[];for(var F=0;F<z-1;F++)for(var G=0;G<D-1;G++){var W=G+F*D,L=G+1+(F+1)*D,V=G+(F+1)*D;B.faces.push([W,G+1+F*D,L]),B.faces.push([W,L,V])}B.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers($,B)}return this.drawBuffers($),this},d.default.RendererGL.prototype.bezier=function(y,b,g,w,_,C,k,E,j,A,O,N){arguments.length===8&&(O=E,A=k,E=C,k=_,_=w,w=g,g=C=j=N=0);var D=this._pInst._bezierDetail||20;this.beginShape();for(var z=0;z<=D;z++){var $=Math.pow(1-z/D,3),B=z/D*3*Math.pow(1-z/D,2),F=3*Math.pow(z/D,2)*(1-z/D),G=Math.pow(z/D,3);this.vertex(y*$+w*B+k*F+A*G,b*$+_*B+E*F+O*G,g*$+C*B+j*F+N*G)}return this.endShape(),this},d.default.RendererGL.prototype.curve=function(y,b,g,w,_,C,k,E,j,A,O,N){arguments.length===8&&(A=k,O=E,k=_,E=w,_=w=g,g=C=j=N=0);var D=this._pInst._curveDetail;this.beginShape();for(var z=0;z<=D;z++){var $=.5*Math.pow(z/D,3),B=.5*Math.pow(z/D,2),F=z/D*.5;this.vertex($*(3*w-y-3*k+A)+B*(2*y-5*w+4*k-A)+F*(-y+k)+2*w*.5,$*(3*_-b-3*E+O)+B*(2*b-5*_+4*E-O)+F*(-b+E)+2*_*.5,$*(3*C-g-3*j+N)+B*(2*g-5*C+4*j-N)+F*(-g+j)+2*C*.5)}return this.endShape(),this},d.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(x.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(x.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},d.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var y,b,g,w,_,C,k=[],E=[],j=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var A=1/this._lutBezierDetail,O=0,N=1,D=0;O<1;){if(C=parseFloat(O.toFixed(6)),this._lookUpTableBezier[D]=this._bezierCoefficients(C),N.toFixed(6)===A.toFixed(6)){C=parseFloat(N.toFixed(6))+parseFloat(O.toFixed(6)),++D,this._lookUpTableBezier[D]=this._bezierCoefficients(C);break}O+=A,N-=A,++D}}for(var z=this._lookUpTableBezier.length,$=[],B=0;B<4;B++)$.push([]);$[0]=this.immediateMode.geometry.vertexColors.slice(-4),$[3]=this.curFillColor.slice();var F=[];for(B=0;B<4;B++)F.push([]);if(F[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),F[3]=this.curStrokeColor.slice(),j===6){this.isBezier=!0,k=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],E=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var G=Math.hypot(k[0]-k[1],E[0]-E[1]),W=Math.hypot(k[1]-k[2],E[1]-E[2]),L=Math.hypot(k[2]-k[3],E[2]-E[3]);for(G/=W=G+W+L,L/=W,_=0;_<4;_++)$[1].push($[0][_]*(1-G)+$[3][_]*G),$[2].push($[0][_]*L+$[3][_]*(1-L)),F[1].push(F[0][_]*(1-G)+F[3][_]*G),F[2].push(F[0][_]*L+F[3][_]*(1-L));for(w=0;w<z;w++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],B=y=b=0;B<4;B++){for(_=0;_<4;_++)this.curFillColor[_]+=this._lookUpTableBezier[w][B]*$[B][_],this.curStrokeColor[_]+=this._lookUpTableBezier[w][B]*F[B][_];y+=k[B]*this._lookUpTableBezier[w][B],b+=E[B]*this._lookUpTableBezier[w][B]}this.vertex(y,b)}this.curFillColor=$[3],this.curStrokeColor=F[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(j===9){this.isBezier=!0,k=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],E=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var V=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],Y=Math.hypot(k[0]-k[1],E[0]-E[1],V[0]-V[1]),Z=(W=Math.hypot(k[1]-k[2],E[1]-E[2],V[1]-V[2]),Math.hypot(k[2]-k[3],E[2]-E[3],V[2]-V[3]));for(Y/=j=Y+W+Z,Z/=j,_=0;_<4;_++)$[1].push($[0][_]*(1-Y)+$[3][_]*Y),$[2].push($[0][_]*Z+$[3][_]*(1-Z)),F[1].push(F[0][_]*(1-Y)+F[3][_]*Y),F[2].push(F[0][_]*Z+F[3][_]*(1-Z));for(w=0;w<z;w++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],B=y=b=g=0;B<4;B++){for(_=0;_<4;_++)this.curFillColor[_]+=this._lookUpTableBezier[w][B]*$[B][_],this.curStrokeColor[_]+=this._lookUpTableBezier[w][B]*F[B][_];y+=k[B]*this._lookUpTableBezier[w][B],b+=E[B]*this._lookUpTableBezier[w][B],g+=V[B]*this._lookUpTableBezier[w][B]}this.vertex(y,b,g)}this.curFillColor=$[3],this.curStrokeColor=F[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},d.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var y,b,g,w,_,C,k=[],E=[],j=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var A=1/this._lutQuadraticDetail,O=0,N=1,D=0;O<1;){if(C=parseFloat(O.toFixed(6)),this._lookUpTableQuadratic[D]=this._quadraticCoefficients(C),N.toFixed(6)===A.toFixed(6)){C=parseFloat(N.toFixed(6))+parseFloat(O.toFixed(6)),++D,this._lookUpTableQuadratic[D]=this._quadraticCoefficients(C);break}O+=A,N-=A,++D}}for(var z=this._lookUpTableQuadratic.length,$=[],B=0;B<3;B++)$.push([]);$[0]=this.immediateMode.geometry.vertexColors.slice(-4),$[2]=this.curFillColor.slice();var F=[];for(B=0;B<3;B++)F.push([]);if(F[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),F[2]=this.curStrokeColor.slice(),j===4){this.isQuadratic=!0,k=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],E=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var G=Math.hypot(k[0]-k[1],E[0]-E[1]);for(G/=G+Math.hypot(k[1]-k[2],E[1]-E[2]),_=0;_<4;_++)$[1].push($[0][_]*(1-G)+$[2][_]*G),F[1].push(F[0][_]*(1-G)+F[2][_]*G);for(w=0;w<z;w++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],B=y=b=0;B<3;B++){for(_=0;_<4;_++)this.curFillColor[_]+=this._lookUpTableQuadratic[w][B]*$[B][_],this.curStrokeColor[_]+=this._lookUpTableQuadratic[w][B]*F[B][_];y+=k[B]*this._lookUpTableQuadratic[w][B],b+=E[B]*this._lookUpTableQuadratic[w][B]}this.vertex(y,b)}this.curFillColor=$[2],this.curStrokeColor=F[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(j===6){this.isQuadratic=!0,k=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],E=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var W=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],L=Math.hypot(k[0]-k[1],E[0]-E[1],W[0]-W[1]);for(L/=L+Math.hypot(k[1]-k[2],E[1]-E[2],W[1]-W[2]),_=0;_<4;_++)$[1].push($[0][_]*(1-L)+$[2][_]*L),F[1].push(F[0][_]*(1-L)+F[2][_]*L);for(w=0;w<z;w++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],B=y=b=g=0;B<3;B++){for(_=0;_<4;_++)this.curFillColor[_]+=this._lookUpTableQuadratic[w][B]*$[B][_],this.curStrokeColor[_]+=this._lookUpTableQuadratic[w][B]*F[B][_];y+=k[B]*this._lookUpTableQuadratic[w][B],b+=E[B]*this._lookUpTableQuadratic[w][B],g+=W[B]*this._lookUpTableQuadratic[w][B]}this.vertex(y,b,g)}this.curFillColor=$[2],this.curStrokeColor=F[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},d.default.RendererGL.prototype.curveVertex=function(){var y,b,g,w,_,C,k=[],E=[],j=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var A=1/this._lutBezierDetail,O=0,N=1,D=0;O<1;){if(C=parseFloat(O.toFixed(6)),this._lookUpTableBezier[D]=this._bezierCoefficients(C),N.toFixed(6)===A.toFixed(6)){C=parseFloat(N.toFixed(6))+parseFloat(O.toFixed(6)),++D,this._lookUpTableBezier[D]=this._bezierCoefficients(C);break}O+=A,N-=A,++D}}var z=this._lookUpTableBezier.length;if(j===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,k=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),E=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),_=0;_<z;_++)b=k[0]*this._lookUpTableBezier[_][0]+k[1]*this._lookUpTableBezier[_][1]+k[2]*this._lookUpTableBezier[_][2]+k[3]*this._lookUpTableBezier[_][3],g=E[0]*this._lookUpTableBezier[_][0]+E[1]*this._lookUpTableBezier[_][1]+E[2]*this._lookUpTableBezier[_][2]+E[3]*this._lookUpTableBezier[_][3],this.vertex(b,g);for(_=0;_<j;_++)this.immediateMode._curveVertex.shift()}}else if(j===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,k=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),E=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),y=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),_=0;_<z;_++)b=k[0]*this._lookUpTableBezier[_][0]+k[1]*this._lookUpTableBezier[_][1]+k[2]*this._lookUpTableBezier[_][2]+k[3]*this._lookUpTableBezier[_][3],g=E[0]*this._lookUpTableBezier[_][0]+E[1]*this._lookUpTableBezier[_][1]+E[2]*this._lookUpTableBezier[_][2]+E[3]*this._lookUpTableBezier[_][3],w=y[0]*this._lookUpTableBezier[_][0]+y[1]*this._lookUpTableBezier[_][1]+y[2]*this._lookUpTableBezier[_][2]+y[3]*this._lookUpTableBezier[_][3],this.vertex(b,g,w);for(_=0;_<j;_++)this.immediateMode._curveVertex.shift()}},d.default.RendererGL.prototype.image=function(y,b,g,w,_,C,k,E,j){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(y),this._pInst.textureMode(x.NORMAL);var A=0,O=(b<=y.width&&(A=b/y.width),1);b+w<=y.width&&(O=(b+w)/y.width),b=0,g<=y.height&&(b=g/y.height),w=1,g+_<=y.height&&(w=(g+_)/y.height),this.beginShape(),this.vertex(C,k,0,A,b),this.vertex(C+E,k,0,O,b),this.vertex(C+E,k+j,0,O,w),this.vertex(C,k+j,0,A,w),this.endShape(x.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(x.REMOVE)};var m=d.default;f.default=m},{"../core/constants":262,"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],317:[function(r,h,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.math.sign"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(S=r("../core/main"))&&S.__esModule?S:{default:S},d=function(m){if(m&&m.__esModule)return m;if(m===null||x(m)!=="object"&&typeof m!="function")return{default:m};var y=function(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,C)}();if(y&&y.has(m))return y.get(m);var b,g={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in m){var _;Object.prototype.hasOwnProperty.call(m,b)&&((_=w?Object.getOwnPropertyDescriptor(m,b):null)&&(_.get||_.set)?Object.defineProperty(g,b,_):g[b]=m[b])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));function x(m){return(x=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(y){return u(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":u(y)})(m)}l.default.prototype.orbitControl=function(m,y,b,g){var w=this,_=(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);m===void 0&&(m=1),y===void 0&&(y=m),b===void 0&&(b=1),x(g)!=="object"&&(g={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var C=g.disableTouchActions;this.touchActionsDisabled===!0||C!==void 0&&!C||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),g=(C=g.freeRotation)!==void 0&&C;var k,E,j,A=[],O=(C=(this.touches.forEach(function(F){w._renderer.prevTouches.forEach(function(G){F.id===G.id&&(G={x:F.x,y:F.y,px:G.x,py:G.y},A.push(G))})}),this._renderer.prevTouches=this.touches,0),0),N=0,D=0,z=0,$=this.height<this.width?this.height:this.width,B=!1;return 0<A.length?(B=0<A[0].x&&A[0].x<this.width&&0<A[0].y&&A[0].y<this.height,A.length===1?(O=-m*((k=A[0]).x-k.px)/$,N=y*(k.y-k.py)/$):(k=A[0],E=A[1],C=-(Math.hypot(k.x-E.x,k.y-E.y)-Math.hypot(k.px-E.px,k.py-E.py))*b*4e-4,D=.5*(k.x+E.x)-.5*(k.px+E.px),z=.5*(k.y+E.y)-.5*(k.py+E.py)),0<this.touches.length?B&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(B=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(C=Math.sign(this._mouseWheelDeltaY)*b,C*=.01,this._mouseWheelDeltaY=0,B&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(O=-m*this.movedX/$,N=y*this.movedY/$):this.mouseButton===this.RIGHT&&(D=this.movedX,z=this.movedY),B&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),C!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=C),.001<Math.abs(this._renderer.zoomVelocity)?(g?_._orbitFree(0,0,this._renderer.zoomVelocity):_._orbit(0,0,this._renderer.zoomVelocity),_.projMatrix.mat4[15]!==0&&(_.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),_.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=_.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=_.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,O===0&&N===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*O,.6*N),1e-6<this._renderer.rotateVelocity.magSq()?(g?_._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):_._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),D===0&&z===0||!this._renderer.executeRotateAndMove||(k=2*D/this.width,E=2*-z/this.height,this._renderer.moveVelocity.add(.15*k,.15*E)),1e-6<this._renderer.moveVelocity.magSq()?(b=_._getLocalAxes(),m=_.eyeX-_.centerX,y=_.eyeY-_.centerY,$=_.eyeZ-_.centerZ,B=Math.sqrt(m*m+y*y+$*$),C=new l.default.Vector(_.centerX,_.centerY,_.centerZ),C=_.cameraMatrix.multiplyPoint(C),(C=this._renderer.uPMatrix.multiplyAndNormalizePoint(C)).x-=this._renderer.moveVelocity.x,C.y-=this._renderer.moveVelocity.y,N=(O=this._renderer.uPMatrix.mat4)[15]===0?(j=(O[8]+C.x)/O[0]*B,(O[9]+C.y)/O[5]*B):(j=(C.x-O[12])/O[0],(C.y-O[13])/O[5]),_.setPosition(_.eyeX+j*b.x[0]+N*b.y[0],_.eyeY+j*b.x[1]+N*b.y[1],_.eyeZ+j*b.x[2]+N*b.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];l.default._validateParameters("debugMode",y);for(var g=this._registeredMethods.post.length-1;0<=g;g--)this._registeredMethods.post[g].toString()!==this._grid().toString()&&this._registeredMethods.post[g].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(g,1);y[0]===d.GRID?this.registerMethod("post",this._grid.call(this,y[1],y[2],y[3],y[4],y[5])):y[0]===d.AXES?this.registerMethod("post",this._axesIcon.call(this,y[1],y[2],y[3],y[4])):(this.registerMethod("post",this._grid.call(this,y[0],y[1],y[2],y[3],y[4])),this.registerMethod("post",this._axesIcon.call(this,y[5],y[6],y[7],y[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var m=this._registeredMethods.post.length-1;0<=m;m--)this._registeredMethods.post[m].toString()!==this._grid().toString()&&this._registeredMethods.post[m].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(m,1)},l.default.prototype._grid=function(m,y,b,g,w){m===void 0&&(m=this.width/2),y===void 0&&(y=Math.round(m/30)<4?4:Math.round(m/30)),b===void 0&&(b=0),g===void 0&&(g=0),w===void 0&&(w=0);var _=m/y,C=m/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var k=0;k<=y;k++)this.beginShape(this.LINES),this.vertex(-C+b,g,k*_-C+w),this.vertex(C+b,g,k*_-C+w),this.endShape();for(var E=0;E<=y;E++)this.beginShape(this.LINES),this.vertex(E*_-C+b,g,-C+w),this.vertex(E*_-C+b,g,C+w),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(m,y,b,g){return m===void 0&&(m=40<this.width/20?this.width/20:40),y===void 0&&(y=-this.width/4),b===void 0&&(b=y),g===void 0&&(g=y),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(y,b,g),this.vertex(y+m,b,g),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(y,b,g),this.vertex(y,b+m,g),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(y,b,g),this.vertex(y,b,g+m),this.endShape(),this.pop()}};var S=l.default;f.default=S},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],318:[function(r,h,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};u.default.prototype.ambientLight=function(l,d,x,S){this._assert3d("ambientLight"),u.default._validateParameters("ambientLight",arguments);var m=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(m._array[0],m._array[1],m._array[2]),this._renderer._enableLighting=!0,this},u.default.prototype.specularColor=function(l,d,x){this._assert3d("specularColor"),u.default._validateParameters("specularColor",arguments);var S=this.color.apply(this,arguments);return this._renderer.specularColors=[S._array[0],S._array[1],S._array[2]],this},u.default.prototype.directionalLight=function(l,d,x,S,m,y){this._assert3d("directionalLight"),u.default._validateParameters("directionalLight",arguments),l=l instanceof u.default.Color?l:this.color(l,d,x);var b,g;return x=typeof(d=arguments[arguments.length-1])=="number"?(b=arguments[arguments.length-3],g=arguments[arguments.length-2],arguments[arguments.length-1]):(b=d.x,g=d.y,d.z),d=Math.sqrt(b*b+g*g+x*x),this._renderer.directionalLightDirections.push(b/d,g/d,x/d),this._renderer.directionalLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},u.default.prototype.pointLight=function(l,d,x,S,m,y){this._assert3d("pointLight"),u.default._validateParameters("pointLight",arguments),l=l instanceof u.default.Color?l:this.color(l,d,x);var b,g;return x=typeof(d=arguments[arguments.length-1])=="number"?(b=arguments[arguments.length-3],g=arguments[arguments.length-2],arguments[arguments.length-1]):(b=d.x,g=d.y,d.z),this._renderer.pointLightPositions.push(b,g,x),this._renderer.pointLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},u.default.prototype.lights=function(){this._assert3d("lights");var l=this.color("rgb(128,128,128)");return this.ambientLight(l),this.directionalLight(l,0,0,-1),this},u.default.prototype.lightFalloff=function(l,d,x){return this._assert3d("lightFalloff"),u.default._validateParameters("lightFalloff",arguments),l<0&&(l=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),x<0&&(x=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),l===0&&d===0&&x===0&&(l=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=l,this._renderer.linearAttenuation=d,this._renderer.quadraticAttenuation=x,this},u.default.prototype.spotLight=function(l,d,x,S,m,y,b,g,w,_,C){this._assert3d("spotLight"),u.default._validateParameters("spotLight",arguments);var k,E,j,A=arguments.length;switch(A){case 11:case 10:k=this.color(l,d,x),E=new u.default.Vector(S,m,y),j=new u.default.Vector(b,g,w);break;case 9:l instanceof u.default.Color?(k=l,E=new u.default.Vector(d,x,S),j=new u.default.Vector(m,y,b),_=g,C=w):S instanceof u.default.Vector?(k=this.color(l,d,x),E=S,j=new u.default.Vector(m,y,b),_=g,C=w):b instanceof u.default.Vector?(k=this.color(l,d,x),E=new u.default.Vector(S,m,y),j=b,_=g,C=w):(k=this.color(l,d,x),E=new u.default.Vector(S,m,y),j=new u.default.Vector(b,g,w));break;case 8:j=l instanceof u.default.Color?(k=l,E=new u.default.Vector(d,x,S),new u.default.Vector(m,y,b)):S instanceof u.default.Vector?(k=this.color(l,d,x),E=S,new u.default.Vector(m,y,b)):(k=this.color(l,d,x),E=new u.default.Vector(S,m,y),b),_=g;break;case 7:l instanceof u.default.Color&&d instanceof u.default.Vector?(k=l,E=d,j=new u.default.Vector(x,S,m),_=y,C=b):l instanceof u.default.Color&&m instanceof u.default.Vector?(k=l,E=new u.default.Vector(d,x,S),j=m,_=y,C=b):S instanceof u.default.Vector&&m instanceof u.default.Vector?(k=this.color(l,d,x),E=S,j=m,_=y,C=b):j=l instanceof u.default.Color?(k=l,E=new u.default.Vector(d,x,S),new u.default.Vector(m,y,b)):S instanceof u.default.Vector?(k=this.color(l,d,x),E=S,new u.default.Vector(m,y,b)):(k=this.color(l,d,x),E=new u.default.Vector(S,m,y),b);break;case 6:S instanceof u.default.Vector&&m instanceof u.default.Vector?(k=this.color(l,d,x),E=S,j=m,_=y):l instanceof u.default.Color&&m instanceof u.default.Vector?(k=l,E=new u.default.Vector(d,x,S),j=m,_=y):l instanceof u.default.Color&&d instanceof u.default.Vector&&(k=l,E=d,j=new u.default.Vector(x,S,m),_=y);break;case 5:l instanceof u.default.Color&&d instanceof u.default.Vector&&x instanceof u.default.Vector?(k=l,E=d,j=x,_=S,C=m):S instanceof u.default.Vector&&m instanceof u.default.Vector?(k=this.color(l,d,x),E=S,j=m):l instanceof u.default.Color&&m instanceof u.default.Vector?(k=l,E=new u.default.Vector(d,x,S),j=m):l instanceof u.default.Color&&d instanceof u.default.Vector&&(k=l,E=d,j=new u.default.Vector(x,S,m));break;case 4:k=l,E=d,j=x,_=S;break;case 3:k=l,E=d,j=x;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(A<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(k._array[0],k._array[1],k._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(E.x,E.y,E.z),j.normalize(),this._renderer.spotLightDirections.push(j.x,j.y,j.z),_===void 0&&(_=Math.PI/3),C!==void 0&&C<1?(C=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):C===void 0&&(C=100),_=this._renderer._pInst._toRadians(_),this._renderer.spotLightAngle.push(Math.cos(_)),this._renderer.spotLightConc.push(C),this._renderer._enableLighting=!0,this},u.default.prototype.noLights=function(){this._assert3d("noLights");for(var l=arguments.length,d=new Array(l),x=0;x<l;x++)d[x]=arguments[x];return u.default._validateParameters("noLights",d),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},r=u.default,f.default=r},{"../core/main":273}],319:[function(r,h,f){r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.splice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.match"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(l=r("../core/main"))&&l.__esModule?l:{default:l};r("./p5.Geometry"),u.default.prototype.loadModel=function(d){u.default._validateParameters("loadModel",arguments);var x,S,m,y=d.slice(-4),b=(typeof arguments[1]=="boolean"?(x=arguments[1],S=arguments[2],m=arguments[3],arguments[4]!==void 0&&(y=arguments[4])):(x=!1,S=arguments[1],m=arguments[2],arguments[3]!==void 0&&(y=arguments[3])),new u.default.Geometry),g=(b.gid="".concat(d,"|").concat(x),this);return y.match(/\.stl$/i)?this.httpDo(d,"GET","arrayBuffer",function(w){(function(_,C){if(function(k){for(var E=new DataView(k),j=[115,111,108,105,100],A=0;A<5;A++)if(function(O,N,D){for(var z=0,$=O.length;z<$;z++)if(O[z]!==N.getUint8(D+z,!1))return;return 1}(j,E,A))return;return 1}(C))(function(k,E){for(var j,A,O,N,D,z,$,B=new DataView(E),F=B.getUint32(80,!0),G=!1,W=0;W<70;W++)B.getUint32(W,!1)===1129270351&&B.getUint8(W+4)===82&&B.getUint8(W+5)===61&&(G=!0,N=[],D=B.getUint8(W+6)/255,z=B.getUint8(W+7)/255,$=B.getUint8(W+8)/255);for(var L=0;L<F;L++){for(var V,Y=84+50*L,Z=B.getFloat32(Y,!0),J=B.getFloat32(4+Y,!0),ne=B.getFloat32(8+Y,!0),se=(G&&(O=(32768&(V=B.getUint16(48+Y,!0)))==0?(j=(31&V)/31,A=(V>>5&31)/31,(V>>10&31)/31):(j=D,A=z,$)),new u.default.Vector(Z,J,ne)),ie=1;ie<=3;ie++){var X=Y+12*ie;X=new u.default.Vector(B.getFloat32(X,!0),B.getFloat32(4+X,!0),B.getFloat32(8+X,!0)),k.vertices.push(X),k.vertexNormals.push(se),G&&N.push(j,A,O)}k.faces.push([3*L,3*L+1,3*L+2]),k.uvs.push([0,0],[0,0],[0,0])}})(_,C);else{if(C=new DataView(C),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");(function(k,E){for(var j,A,O="",N=[],D=0;D<E.length;++D){for(var z=E[D].trim(),$=z.split(" "),B=0;B<$.length;++B)$[B]===""&&$.splice(B,1);if($.length!==0)switch(O){case"":if($[0]!=="solid")return console.error(z),console.error('Invalid state "'.concat($[0],'", should be "solid"'));O="solid";break;case"solid":if($[0]!=="facet"||$[1]!=="normal")return console.error(z),console.error('Invalid state "'.concat($[0],'", should be "facet normal"'));j=new u.default.Vector(parseFloat($[2]),parseFloat($[3]),parseFloat($[4])),k.vertexNormals.push(j,j,j),O="facet normal";break;case"facet normal":if($[0]!=="outer"||$[1]!=="loop")return console.error(z),console.error('Invalid state "'.concat($[0],'", should be "outer loop"'));O="vertex";break;case"vertex":if($[0]==="vertex")A=new u.default.Vector(parseFloat($[1]),parseFloat($[2]),parseFloat($[3])),k.vertices.push(A),k.uvs.push([0,0]),N.push(k.vertices.indexOf(A));else{if($[0]!=="endloop")return console.error(z),console.error('Invalid state "'.concat($[0],'", should be "vertex" or "endloop"'));k.faces.push(N),N=[],O="endloop"}break;case"endloop":if($[0]!=="endfacet")return console.error(z),console.error('Invalid state "'.concat($[0],'", should be "endfacet"'));O="endfacet";break;case"endfacet":if($[0]!=="endsolid"){if($[0]!=="facet"||$[1]!=="normal")return console.error(z),console.error('Invalid state "'.concat($[0],'", should be "endsolid" or "facet normal"'));j=new u.default.Vector(parseFloat($[2]),parseFloat($[3]),parseFloat($[4])),k.vertexNormals.push(j,j,j),O="facet normal"}break;default:console.error('Invalid state "'.concat(O,'"'))}}})(_,C=new TextDecoder("utf-8").decode(C).split(`
`))}})(b,w),x&&b.normalize(),g._decrementPreload(),typeof S=="function"&&S(b)},m):y.match(/\.obj$/i)?this.loadStrings(d,function(w){for(var _=b,C=w,k={v:[],vt:[],vn:[]},E={},j=0;j<C.length;++j){var A=C[j].trim().split(/\b\s+/);if(0<A.length){if(A[0]==="v"||A[0]==="vn"){var O=new u.default.Vector(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3]));k[A[0]].push(O)}else if(A[0]==="vt")O=[parseFloat(A[1]),1-parseFloat(A[2])],k[A[0]].push(O);else if(A[0]==="f")for(var N=3;N<A.length;++N){for(var D=[],z=[1,N-1,N],$=0;$<z.length;++$){var B=A[z[$]],F=0;if(E[B]!==void 0)F=E[B];else{for(var G=B.split("/"),W=0;W<G.length;W++)G[W]=parseInt(G[W])-1;F=E[B]=_.vertices.length,_.vertices.push(k.v[G[0]].copy()),k.vt[G[1]]?_.uvs.push(k.vt[G[1]].slice()):_.uvs.push([0,0]),k.vn[G[2]]&&_.vertexNormals.push(k.vn[G[2]].copy())}D.push(F)}D[0]!==D[1]&&D[0]!==D[2]&&D[1]!==D[2]&&_.faces.push(D)}}}_.vertexNormals.length===0&&_.computeNormals(),x&&b.normalize(),g._decrementPreload(),typeof S=="function"&&S(b)},m):(u.default._friendlyFileLoadError(3,d),m?m():u.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),b},u.default.prototype.model=function(d){this._assert3d("model"),u.default._validateParameters("model",arguments),0<d.vertices.length&&(this._renderer.geometryInHash(d.gid)||(d.edges.length===0&&d._makeTriangleEdges(),d._edgesToVertices(),this._renderer.createBuffers(d.gid,d)),this._renderer.drawBuffers(d.gid))};var l=u.default;f.default=l},{"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199}],320:[function(r,h,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(m)}function l(m){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(y){return u(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":u(y)})(m)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.join"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(S=r("../core/main"))&&S.__esModule?S:{default:S},x=function(m){if(m&&m.__esModule)return m;if(m===null||l(m)!=="object"&&typeof m!="function")return{default:m};var y=function(){var C;return typeof WeakMap!="function"?null:(C=new WeakMap,C)}();if(y&&y.has(m))return y.get(m);var b,g={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in m){var _;Object.prototype.hasOwnProperty.call(m,b)&&((_=w?Object.getOwnPropertyDescriptor(m,b):null)&&(_.get||_.set)?Object.defineProperty(g,b,_):g[b]=m[b])}return g.default=m,y&&y.set(m,g),g}(r("../core/constants"));r("./p5.Texture"),d.default.prototype.loadShader=function(m,y,b,g){function w(){C._decrementPreload(),b&&b(_)}d.default._validateParameters("loadShader",arguments),g=g||console.error;var _=new d.default.Shader,C=this,k=!1,E=!1;return this.loadStrings(m,function(j){_._vertSrc=j.join(`
`),E=!0,k&&w()},g),this.loadStrings(y,function(j){_._fragSrc=j.join(`
`),k=!0,E&&w()},g),_},d.default.prototype.createShader=function(m,y){return this._assert3d("createShader"),d.default._validateParameters("createShader",arguments),new d.default.Shader(this._renderer,m,y)},d.default.prototype.shader=function(m){return this._assert3d("shader"),d.default._validateParameters("shader",arguments),m._renderer===void 0&&(m._renderer=this._renderer),m.init(),m.isStrokeShader()?this._renderer.userStrokeShader=m:(this._renderer.userFillShader=m,this._renderer._useNormalMaterial=!1),this},d.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},d.default.prototype.texture=function(m){return this._assert3d("texture"),d.default._validateParameters("texture",arguments),m.gifProperties&&m._animateGif(this),this._renderer.drawMode=x.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=m,this._renderer._setProperty("_doFill",!0),this},d.default.prototype.textureMode=function(m){m!==x.IMAGE&&m!==x.NORMAL?console.warn("You tried to set ".concat(m," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=m},d.default.prototype.textureWrap=function(m){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:m,b=(this._renderer.textureWrapX=m,this._renderer.textureWrapY=y,!0),g=!1,w=void 0;try{for(var _,C=this._renderer.textures.values()[Symbol.iterator]();!(b=(_=C.next()).done);b=!0)_.value.setWrapMode(m,y)}catch(k){g=!0,w=k}finally{try{b||C.return==null||C.return()}finally{if(g)throw w}}},d.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];return d.default._validateParameters("normalMaterial",y),this._renderer.drawMode=x.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},d.default.prototype.ambientMaterial=function(m,y,b){this._assert3d("ambientMaterial"),d.default._validateParameters("ambientMaterial",arguments);var g=d.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=g._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},d.default.prototype.emissiveMaterial=function(m,y,b,g){this._assert3d("emissiveMaterial"),d.default._validateParameters("emissiveMaterial",arguments);var w=d.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=w._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},d.default.prototype.specularMaterial=function(m,y,b,g){this._assert3d("specularMaterial"),d.default._validateParameters("specularMaterial",arguments);var w=d.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=w._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},d.default.prototype.shininess=function(m){return this._assert3d("shininess"),d.default._validateParameters("shininess",arguments),this._renderer._useShininess=m=m<1?1:m,this},d.default.RendererGL.prototype._applyColorBlend=function(m){var y=this.GL,b=this.drawMode===x.TEXTURE;return(b=this.userFillShader||this.userStrokeShader||this.userPointShader||b||this.curBlendMode!==x.BLEND||m[m.length-1]<1||this._isErasing)!==this._isBlending&&(b||this.curBlendMode!==x.BLEND&&this.curBlendMode!==x.ADD?y.enable(y.BLEND):y.disable(y.BLEND),y.depthMask(!0),this._isBlending=b),this._applyBlendMode(),m},d.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var m=this.GL;switch(this.curBlendMode){case x.BLEND:m.blendEquation(m.FUNC_ADD),m.blendFunc(m.ONE,m.ONE_MINUS_SRC_ALPHA);break;case x.ADD:m.blendEquation(m.FUNC_ADD),m.blendFunc(m.ONE,m.ONE);break;case x.REMOVE:m.blendEquation(m.FUNC_ADD),m.blendFunc(m.ZERO,m.ONE_MINUS_SRC_ALPHA);break;case x.MULTIPLY:m.blendEquation(m.FUNC_ADD),m.blendFunc(m.DST_COLOR,m.ONE_MINUS_SRC_ALPHA);break;case x.SCREEN:m.blendEquation(m.FUNC_ADD),m.blendFunc(m.ONE,m.ONE_MINUS_SRC_COLOR);break;case x.EXCLUSION:m.blendEquationSeparate(m.FUNC_ADD,m.FUNC_ADD),m.blendFuncSeparate(m.ONE_MINUS_DST_COLOR,m.ONE_MINUS_SRC_COLOR,m.ONE,m.ONE);break;case x.REPLACE:m.blendEquation(m.FUNC_ADD),m.blendFunc(m.ONE,m.ZERO);break;case x.SUBTRACT:m.blendEquationSeparate(m.FUNC_REVERSE_SUBTRACT,m.FUNC_ADD),m.blendFuncSeparate(m.ONE,m.ONE,m.ONE,m.ONE_MINUS_SRC_ALPHA);break;case x.DARKEST:this.blendExt?(m.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,m.FUNC_ADD),m.blendFuncSeparate(m.ONE,m.ONE,m.ONE,m.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case x.LIGHTEST:this.blendExt?(m.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,m.FUNC_ADD),m.blendFuncSeparate(m.ONE,m.ONE,m.ONE,m.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var S=d.default;f.default=S},{"../core/constants":262,"../core/main":273,"./p5.Texture":330,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],321:[function(r,h,f){r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.math.hypot"),r("core-js/modules/es.string.sub"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(d,x){for(var S=0;S<x.length;S++){var m=x[S];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}u.default.prototype.camera=function(){var d;this._assert3d("camera");for(var x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];return u.default._validateParameters("camera",S),(d=this._renderer._curCamera).camera.apply(d,S),this},u.default.prototype.perspective=function(){var d;this._assert3d("perspective");for(var x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];return u.default._validateParameters("perspective",S),(d=this._renderer._curCamera).perspective.apply(d,S),this},u.default.prototype.ortho=function(){var d;this._assert3d("ortho");for(var x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];return u.default._validateParameters("ortho",S),(d=this._renderer._curCamera).ortho.apply(d,S),this},u.default.prototype.frustum=function(){var d;this._assert3d("frustum");for(var x=arguments.length,S=new Array(x),m=0;m<x;m++)S[m]=arguments[m];return u.default._validateParameters("frustum",S),(d=this._renderer._curCamera).frustum.apply(d,S),this},u.default.prototype.createCamera=function(){this._assert3d("createCamera");var d=new u.default.Camera(this._renderer);return d._computeCameraDefaultSettings(),d._setDefaultCamera(),this._renderer._curCamera=d},u.default.Camera=function(){function d(m){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._renderer=m,this.cameraType="default",this.cameraMatrix=new u.default.Matrix,this.projMatrix=new u.default.Matrix,this.yScale=1}var x,S;return x=d,(S=[{key:"perspective",value:function(m,y,b,g){this.cameraType=0<arguments.length?"custom":"default",m===void 0?(m=this.defaultCameraFOV,this.cameraFOV=m):this.cameraFOV=this._renderer._pInst._toRadians(m),y===void 0&&(y=this.defaultAspectRatio),b===void 0&&(b=this.defaultCameraNear),g===void 0&&(g=this.defaultCameraFar),b<=1e-4&&(b=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),g<b&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=y,this.cameraNear=b,this.cameraFar=g,this.projMatrix=u.default.Matrix.identity(),m=1/Math.tan(this.cameraFOV/2);var w=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(m/y,0,0,0,0,-m*this.yScale,0,0,0,0,(g+b)*w,-1,0,0,2*g*b*w,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(m,y,b,g,w,_){m===void 0&&(m=-this._renderer.width/2),y===void 0&&(y=+this._renderer.width/2),b===void 0&&(b=-this._renderer.height/2),g===void 0&&(g=+this._renderer.height/2),w===void 0&&(w=0),_===void 0&&(_=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=w;var C=y-m,k=g-b,E=(this.cameraFar=_)-w,j=2/C,A=2/k*this.yScale,O=-2/E;y=-(y+m)/C,m=-(g+b)/k,C=-(_+w)/E,this.projMatrix=u.default.Matrix.identity(),this.projMatrix.set(j,0,0,0,0,-A,0,0,0,0,O,0,y,m,C,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(m,y,b,g,w,_){m===void 0&&(m=.05*-this._renderer.width),y===void 0&&(y=.05*+this._renderer.width),b===void 0&&(b=.05*+this._renderer.height),g===void 0&&(g=.05*-this._renderer.height),w===void 0&&(w=this.defaultCameraNear),_===void 0&&(_=this.defaultCameraFar),this.cameraNear=w;var C=y-m,k=g-b,E=(this.cameraFar=_)-w,j=2*w/C,A=2*w/k*this.yScale,O=-2*_*w/E;y=(y+m)/C,m=(g+b)/k,C=-(_+w)/E,this.projMatrix=u.default.Matrix.identity(),this.projMatrix.set(j,0,0,0,0,-A,0,0,y,m,C,-1,0,0,O,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(m,y,b,g){var w=this.centerX,_=this.centerY,C=this.centerZ,k=(w-=this.eyeX,_-=this.eyeY,C-=this.eyeZ,u.default.Matrix.identity(this._renderer._pInst));(m=(k.rotate(this._renderer._pInst._toRadians(m),y,b,g),[w*k.mat4[0]+_*k.mat4[4]+C*k.mat4[8],w*k.mat4[1]+_*k.mat4[5]+C*k.mat4[9],w*k.mat4[2]+_*k.mat4[6]+C*k.mat4[10]]))[0]+=this.eyeX,m[1]+=this.eyeY,m[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,m[0],m[1],m[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(m){var y=this._getLocalAxes();this._rotateView(m,y.y[0],y.y[1],y.y[2])}},{key:"tilt",value:function(m){var y=this._getLocalAxes();this._rotateView(m,y.x[0],y.x[1],y.x[2])}},{key:"lookAt",value:function(m,y,b){this.camera(this.eyeX,this.eyeY,this.eyeZ,m,y,b,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(m,y,b,g,w,_,C,k,E){return m===void 0&&(m=this.defaultEyeX,y=this.defaultEyeY,b=this.defaultEyeZ,g=m,w=y,k=1,E=C=_=0),this.eyeX=m,this.eyeY=y,this.eyeZ=b,g!==void 0&&(this.centerX=g,this.centerY=w,this.centerZ=_),C!==void 0&&(this.upX=C,this.upY=k,this.upZ=E),g=this._getLocalAxes(),this.cameraMatrix.set(g.x[0],g.y[0],g.z[0],0,g.x[1],g.y[1],g.z[1],0,g.x[2],g.y[2],g.z[2],0,0,0,0,1),w=-m,this.cameraMatrix.translate([w,-y,-b]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(m,y,b){m=[(g=this._getLocalAxes()).x[0]*m,g.x[1]*m,g.x[2]*m],y=[g.y[0]*y,g.y[1]*y,g.y[2]*y];var g=[g.z[0]*b,g.z[1]*b,g.z[2]*b];this.camera(this.eyeX+m[0]+y[0]+g[0],this.eyeY+m[1]+y[1]+g[1],this.eyeZ+m[2]+y[2]+g[2],this.centerX+m[0]+y[0]+g[0],this.centerY+m[1]+y[1]+g[1],this.centerZ+m[2]+y[2]+g[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(m,y,b){var g=m-this.eyeX,w=y-this.eyeY,_=b-this.eyeZ;this.camera(m,y,b,this.centerX+g,this.centerY+w,this.centerZ+_,this.upX,this.upY,this.upZ)}},{key:"set",value:function(m){for(var y=0,b=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType"];y<b.length;y++){var g=b[y];this[g]=m[g]}this.cameraMatrix=m.cameraMatrix.copy(),this.projMatrix=m.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(m,y,b){var g,w,_,C,k,E,j,A,O,N,D,z,$,B,F,G,W,L;b===0?this.set(m):b===1?this.set(y):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=m.projMatrix.mat4[0]*Math.pow(y.projMatrix.mat4[0]/m.projMatrix.mat4[0],b),this.projMatrix.mat4[5]=m.projMatrix.mat4[5]*Math.pow(y.projMatrix.mat4[5]/m.projMatrix.mat4[5],b),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),C=new u.default.Vector(m.eyeX,m.eyeY,m.eyeZ),k=new u.default.Vector(y.eyeX,y.eyeY,y.eyeZ),G=new u.default.Vector(m.centerX,m.centerY,m.centerZ),L=new u.default.Vector(y.centerX,y.centerY,y.centerZ),_=u.default.Vector.dist(C,G),g=u.default.Vector.dist(k,L),g=_*Math.pow(g/_,b),_=u.default.Vector.sub(C,k),w=1,1e-6<(W=(B=C.copy().sub(k).sub(G).add(L)).magSq())&&(w=u.default.Vector.dot(_,B)/W,w=Math.max(0,Math.min(w,1))),_=u.default.Vector.lerp(u.default.Vector.lerp(C,G,w),u.default.Vector.lerp(k,L,w),b),B=m.cameraMatrix.createSubMatrix3x3(),W=y.cameraMatrix.createSubMatrix3x3(),C=B.column(2),G=W.column(2),k=B.column(1),L=W.column(1),m=new u.default.Vector,y=new u.default.Vector,E=new u.default.Vector,j=new u.default.Vector,1-(A=.5*((B=(W=W.mult3x3(B.copy().transpose3x3())).diagonal())[0]+B[1]+B[2]-1))<1e-7?(m.set(u.default.Vector.lerp(C,G,b)).normalize(),E.set(m).mult(w*g).add(_),j.set(m).mult((w-1)*g).add(_),y.set(u.default.Vector.lerp(k,L,b)).normalize()):(G=1/(1-A),L=Math.max(B[0],B[1],B[2]),z=W.mat3[1]+W.mat3[3],$=W.mat3[2]+W.mat3[6],F=W.mat3[5]+W.mat3[7],L=L===B[0]?(N=.5*z*(G/=O=Math.sqrt((B[0]-A)*G)),D=.5*$*G,.5*(W.mat3[7]-W.mat3[5])/O):L===B[1]?(D=.5*F*(G/=N=Math.sqrt((B[1]-A)*G)),O=.5*z*G,.5*(W.mat3[2]-W.mat3[6])/N):(O=.5*$*(G/=D=Math.sqrt((B[2]-A)*G)),N=.5*F*G,.5*(W.mat3[3]-W.mat3[1])/D),z=b*Math.atan2(L,A),$=Math.cos(z),B=Math.sin(z),(L=new u.default.Matrix("mat3",[$+(F=1-$)*O*O,F*(G=O*N)-B*D,F*(W=D*O)+B*N,F*G+B*D,$+F*N*N,F*(b=N*D)-B*O,F*W-B*N,F*b+B*O,$+F*D*D])).multiplyVec3(C,m),E.set(m).mult(w*g).add(_),j.set(m).mult((w-1)*g).add(_),L.multiplyVec3(k,y)),this.camera(E.x,E.y,E.z,j.x,j.y,j.z,y.x,y.y,y.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)}},{key:"copy",value:function(){var m=new u.default.Camera(this._renderer);return m.cameraFOV=this.cameraFOV,m.aspectRatio=this.aspectRatio,m.eyeX=this.eyeX,m.eyeY=this.eyeY,m.eyeZ=this.eyeZ,m.centerX=this.centerX,m.centerY=this.centerY,m.centerZ=this.centerZ,m.upX=this.upX,m.upY=this.upY,m.upZ=this.upZ,m.cameraNear=this.cameraNear,m.cameraFar=this.cameraFar,m.cameraType=this.cameraType,m.cameraMatrix=this.cameraMatrix.copy(),m.projMatrix=this.projMatrix.copy(),m}},{key:"_getLocalAxes",value:function(){var m,y=this.eyeX-this.centerX,b=this.eyeY-this.centerY,g=this.eyeZ-this.centerZ,w=((w=Math.sqrt(y*y+b*b+g*g))!==0&&(y/=w,b/=w,g/=w),this.upX),_=(E=this.upY)*g-(j=this.upZ)*b,C=-w*g+j*y,k=w*b-E*y,E=(w=b*k-g*C,-y*k+g*_),j=y*C-b*_;return(m=((m=Math.sqrt(_*_+C*C+k*k))!==0&&(_/=m,C/=m,k/=m),Math.sqrt(w*w+E*E+j*j)))!==0&&(w/=m,E/=m,j/=m),{x:[_,C,k],y:[w,E,j],z:[y,b,g]}}},{key:"_orbit",value:function(m,y,b){var g=this.eyeX-this.centerX,w=this.eyeY-this.centerY,_=this.eyeZ-this.centerZ,C=Math.hypot(g,w,_),k=(g=new u.default.Vector(g,w,_).normalize(),w=new u.default.Vector(this.upX,this.upY,this.upZ).normalize(),_=new u.default.Vector.cross(w,g).normalize(),new u.default.Vector.cross(_,w));(C=(C*=Math.pow(10,b))<this.cameraNear?this.cameraNear:C)>this.cameraFar&&(C=this.cameraFar),b=Math.acos(Math.max(-1,Math.min(1,u.default.Vector.dot(g,w))))+y,y=m,(b<=0||b>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),w.mult(Math.cos(b)),k.mult(Math.cos(y)*Math.sin(b)),_.mult(Math.sin(y)*Math.sin(b)),g.set(w).add(k).add(_),this.eyeX=C*g.x+this.centerX,this.eyeY=C*g.y+this.centerY,this.eyeZ=C*g.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(m,y,b){var g=this.eyeX-this.centerX,w=this.eyeY-this.centerY,_=this.eyeZ-this.centerZ,C=Math.hypot(g,w,_),k=(g=new u.default.Vector(g,w,_).normalize(),w=new u.default.Vector(this.upX,this.upY,this.upZ),_=new u.default.Vector.cross(w,g).normalize(),new u.default.Vector.cross(g,_)),E=Math.atan2(y,m),j=(E=(k.mult(Math.sin(E)),_.mult(Math.cos(E)).add(k),Math.sqrt(m*m+y*y)),k=new u.default.Vector.cross(g,_),m=((C=(C*=Math.pow(10,b))<this.cameraNear?this.cameraNear:C)>this.cameraFar&&(C=this.cameraFar),Math.cos(E)),y=Math.sin(E),(b=w.dot(g))*m+(E=w.dot(_))*y);b=-b*y+E*m,E=w.dot(k),w.x=j*g.x+b*_.x+E*k.x,w.y=j*g.y+b*_.y+E*k.y,w.z=j*g.z+b*_.z+E*k.z,_.mult(-y),g.mult(m).add(_).mult(C),this.camera(g.x+this.centerX,g.y+this.centerY,g.z+this.centerZ,this.centerX,this.centerY,this.centerZ,w.x,w.y,w.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&l(x.prototype,S),d}(),u.default.prototype.setCamera=function(d){this._renderer._curCamera=d,this._renderer.uPMatrix.set(d.projMatrix.mat4[0],d.projMatrix.mat4[1],d.projMatrix.mat4[2],d.projMatrix.mat4[3],d.projMatrix.mat4[4],d.projMatrix.mat4[5],d.projMatrix.mat4[6],d.projMatrix.mat4[7],d.projMatrix.mat4[8],d.projMatrix.mat4[9],d.projMatrix.mat4[10],d.projMatrix.mat4[11],d.projMatrix.mat4[12],d.projMatrix.mat4[13],d.projMatrix.mat4[14],d.projMatrix.mat4[15])},r=u.default.Camera,f.default=r},{"../core/main":273,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.string.sub":198}],322:[function(r,h,f){function u(N){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(N)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.reflect.get"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.reflect.get"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint8-clamped-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var l=(O=r("../core/main"))&&O.__esModule?O:{default:O},d=function(N){if(N&&N.__esModule)return N;if(N===null||b(N)!=="object"&&typeof N!="function")return{default:N};var D=function(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,G)}();if(D&&D.has(N))return D.get(N);var z,$={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(z in N){var F;Object.prototype.hasOwnProperty.call(N,z)&&((F=B?Object.getOwnPropertyDescriptor(N,z):null)&&(F.get||F.set)?Object.defineProperty($,z,F):$[z]=N[z])}return $.default=N,D&&D.set(N,$),$}(r("../core/constants")),x=r("./p5.Texture"),S=r("./p5.RendererGL");function m(N,D){return function(z){if(Array.isArray(z))return z}(N)||function(z,$){if(Symbol.iterator in Object(z)||Object.prototype.toString.call(z)==="[object Arguments]"){var B=[],F=!0,G=!1,W=void 0;try{for(var L,V=z[Symbol.iterator]();!(F=(L=V.next()).done)&&(B.push(L.value),!$||B.length!==$);F=!0);}catch(Y){G=!0,W=Y}finally{try{F||V.return==null||V.return()}finally{if(G)throw W}}return B}}(N,D)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(N,D,z){return D in N?Object.defineProperty(N,D,{value:z,enumerable:!0,configurable:!0,writable:!0}):N[D]=z,N}function b(N){return(b=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(D){return u(D)}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":u(D)})(N)}function g(N,D){if(!(N instanceof D))throw new TypeError("Cannot call a class as a function")}function w(N,D){for(var z=0;z<D.length;z++){var $=D[z];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(N,$.key,$)}}function _(N,D,z){D&&w(N.prototype,D)}function C(N,D,z){return(C=typeof Reflect<"u"&&Reflect.get?Reflect.get:function($,B,F){if($=function(G,W){for(;!Object.prototype.hasOwnProperty.call(G,W)&&(G=E(G))!==null;);return G}($,B))return($=Object.getOwnPropertyDescriptor($,B)).get?$.get.call(F):$.value})(N,D,z||N)}function k(N,D){return(k=Object.setPrototypeOf||function(z,$){return z.__proto__=$,z})(N,D)}function E(N){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(N)}var j=function(N){var D=$;if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),N&&k(D,N);var z=function(B){return function(){var F,G=E(B);if(F=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(F=E(this).constructor,Reflect.construct(G,arguments,F)):G.apply(this,arguments),G=this,!F||b(F)!=="object"&&typeof F!="function"){if(G!==void 0)return G;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return F}}($);function $(B){var F;return g(this,$),(F=z.call(this,B.target._renderer)).fbo=B,F.yScale=-1,F}return _($,[{key:"_computeCameraDefaultSettings",value:function(){C(E($.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultEyeZ=this.fbo.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_resize",value:function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this.fbo.width/this.fbo.height)}}]),$}(l.default.Camera),A=(l.default.FramebufferCamera=j,function(){function N(D,z){g(this,N),this.framebuffer=D,this.property=z}return _(N,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),N}()),O=(l.default.FramebufferTexture=A,function(){function N(D){var z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(g(this,N),this.target=D,this.target._renderer.framebuffers.add(this),this.pixels=[],this.format=z.format||d.UNSIGNED_BYTE,this.channels=z.channels||(D._renderer._pInst._glAttributes.alpha?d.RGBA:d.RGB),this.useDepth=z.depth===void 0||z.depth,this.depthFormat=z.depthFormat||d.FLOAT,this.textureFiltering=z.textureFiltering||d.LINEAR,z.antialias===void 0?this.antialiasSamples=D._renderer._pInst._glAttributes.antialias?2:0:typeof z.antialias=="number"?this.antialiasSamples=z.antialias:this.antialiasSamples=z.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&D.webglVersion!==d.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),z.width&&z.height?(this.width=z.width,this.height=z.height,this.autoSized=!1):(z.width===void 0!=(z.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=D.width,this.height=D.height,this.autoSized=!0),this.density=z.density||D.pixelDensity(),z=D._renderer.GL,this.gl=z,this._checkIfFormatsAvailable(),this.framebuffer=z.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=z.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),D=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=D}return _(N,[{key:"resize",value:function(D,z){this.autoSized=!1,this.width=D,this.height=z,this._handleResize()}},{key:"pixelDensity",value:function(D){if(!D)return this.density;this.autoSized=!1,this.density=D,this._handleResize()}},{key:"autoSized",value:function(D){if(D===void 0)return this.autoSized;this.autoSized=D,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var D=this.gl;(D=(this.useDepth&&this.target.webglVersion===d.WEBGL&&!D.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===d.WEBGL&&this.depthFormat===d.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),[d.UNSIGNED_BYTE,d.FLOAT,d.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&![d.UNSIGNED_INT,d.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=d.FLOAT),(0,x.checkWebGLCapabilities)(this.target._renderer))).float||this.format!==d.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&!D.float&&this.depthFormat===d.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),D.halfFloat||this.format!==d.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.channels===d.RGB&&[d.FLOAT,d.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=d.RGBA)}},{key:"_recreateTextures",value:function(){var D=this.gl,z=(this._updateSize(),D.getParameter(D.TEXTURE_BINDING_2D)),$=D.getParameter(D.FRAMEBUFFER_BINDING);if(!(F=D.createTexture()))throw new Error("Unable to create color texture");D.bindTexture(D.TEXTURE_2D,F);var B=this._glColorFormat();if(D.texImage2D(D.TEXTURE_2D,0,B.internalFormat,this.width*this.density,this.height*this.density,0,B.format,B.type,null),this.colorTexture=F,D.bindFramebuffer(D.FRAMEBUFFER,this.framebuffer),D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,F,0),this.useDepth){var F;if(!(F=D.createTexture()))throw new Error("Unable to create depth texture");var G=this._glDepthFormat();D.bindTexture(D.TEXTURE_2D,F),D.texImage2D(D.TEXTURE_2D,0,G.internalFormat,this.width*this.density,this.height*this.density,0,G.format,G.type,null),D.framebufferTexture2D(D.FRAMEBUFFER,D.DEPTH_ATTACHMENT,D.TEXTURE_2D,F,0),this.depthTexture=F}this.antialias&&(this.colorRenderbuffer=D.createRenderbuffer(),D.bindRenderbuffer(D.RENDERBUFFER,this.colorRenderbuffer),D.renderbufferStorageMultisample(D.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,D.getParameter(D.MAX_SAMPLES))),B.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(G=this._glDepthFormat(),this.depthRenderbuffer=D.createRenderbuffer(),D.bindRenderbuffer(D.RENDERBUFFER,this.depthRenderbuffer),D.renderbufferStorageMultisample(D.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,D.getParameter(D.MAX_SAMPLES))),G.internalFormat,this.width*this.density,this.height*this.density)),D.bindFramebuffer(D.FRAMEBUFFER,this.aaFramebuffer),D.framebufferRenderbuffer(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&D.framebufferRenderbuffer(D.FRAMEBUFFER,D.DEPTH_ATTACHMENT,D.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new A(this,"depthTexture"),F=D.NEAREST,this.depthP5Texture=new l.default.Texture(this.target._renderer,this.depth,{minFilter:F,magFilter:F}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new A(this,"colorTexture"),B=this.textureFiltering===d.LINEAR?D.LINEAR:D.NEAREST,this.colorP5Texture=new l.default.Texture(this.target._renderer,this.color,{glMinFilter:B,glMagFilter:B}),this.target._renderer.textures.set(this.color,this.colorP5Texture),D.bindTexture(D.TEXTURE_2D,z),D.bindFramebuffer(D.FRAMEBUFFER,$)}},{key:"_glColorFormat",value:function(){var D,z,$=this.gl,B=this.format===d.FLOAT?$.FLOAT:this.format===d.HALF_FLOAT?this.target.webglVersion===d.WEBGL2?$.HALF_FLOAT:$.getExtension("OES_texture_half_float").HALF_FLOAT_OES:$.UNSIGNED_BYTE,F=this.channels===d.RGBA?$.RGBA:$.RGB;return{internalFormat:this.target.webglVersion===d.WEBGL2?(y(z={},$.FLOAT,y({},$.RGBA,$.RGBA32F)),y(z,$.HALF_FLOAT,y({},$.RGBA,$.RGBA16F)),y(z,$.UNSIGNED_BYTE,(y(D={},$.RGBA,$.RGBA8),y(D,$.RGB,$.RGB8),D)),z[B][F]):this.format===d.HALF_FLOAT?$.RGBA:F,format:F,type:B}}},{key:"_glDepthFormat",value:function(){var D=this.gl,z=this.depthFormat===d.FLOAT?D.FLOAT:D.UNSIGNED_INT,$=D.DEPTH_COMPONENT;return{internalFormat:D=this.target.webglVersion===d.WEBGL2?this.depthFormat===d.FLOAT?D.DEPTH_COMPONENT32F:D.DEPTH_COMPONENT24:D.DEPTH_COMPONENT,format:$,type:z}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var D=this.color,z=this.depth,$=this.colorRenderbuffer,B=this.depthRenderbuffer;this._deleteTexture(D),z&&this._deleteTexture(z),D=this.gl,$&&D.deleteRenderbuffer($),B&&D.deleteRenderbuffer(B),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var D=new j(this);return D._computeCameraDefaultSettings(),D._setDefaultCamera(),this.target._renderer._curCamera=D}},{key:"_deleteTexture",value:function(D){this.gl.deleteTexture(D.rawTexture()),this.target._renderer.textures.delete(D)}},{key:"remove",value:function(){var D=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),D.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&D.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&D.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&D.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){var D=this.gl;this.prevFramebuffer=D.getParameter(D.FRAMEBUFFER_BINDING),this.antialias?D.bindFramebuffer(D.FRAMEBUFFER,this.aaFramebuffer):D.bindFramebuffer(D.FRAMEBUFFER,this.framebuffer),this.prevViewport=D.getParameter(D.VIEWPORT),D.viewport(0,0,this.width*this.density,this.height*this.density),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"end",value:function(){var D=this.gl;if(this.antialias){D.bindFramebuffer(D.READ_FRAMEBUFFER,this.aaFramebuffer),D.bindFramebuffer(D.DRAW_FRAMEBUFFER,this.framebuffer);var z=[[D.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]];this.useDepth&&z.push([D.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var $=0,B=z;$<B.length;$++){var F=(G=m(B[$],2))[0],G=G[1];D.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,F,G)}}D.bindFramebuffer(D.FRAMEBUFFER,this.prevFramebuffer),D.viewport.apply(D,function(W){return function(L){if(Array.isArray(L)){for(var V=0,Y=new Array(L.length);V<L.length;V++)Y[V]=L[V];return Y}}(W)||function(L){if(Symbol.iterator in Object(L)||Object.prototype.toString.call(L)==="[object Arguments]")return Array.from(L)}(W)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(this.prevViewport)),this.target.pop()}},{key:"draw",value:function(D){this.begin(),D(),this.end()}},{key:"loadPixels",value:function(){var D=this.gl,z=D.getParameter(D.FRAMEBUFFER_BINDING),$=(D.bindFramebuffer(D.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,S.readPixelsWebGL)(this.pixels,D,this.framebuffer,0,0,this.width*this.density,this.height*this.density,$.format,$.type),D.bindFramebuffer(D.FRAMEBUFFER,z)}},{key:"get",value:function(D,z,$,B){l.default._validateParameters("p5.Framebuffer.get",arguments);var F=this._glColorFormat();if(D===void 0&&z===void 0)z=D=0,$=this.width,B=this.height;else if($===void 0&&B===void 0)return(D<0||z<0||D>=this.width||z>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),D=this.target.constrain(D,0,this.width-1),z=this.target.constrain(z,0,this.height-1)),(0,S.readPixelWebGL)(this.gl,this.framebuffer,D*this.density,z*this.density,F.format,F.type);D=this.target.constrain(D,0,this.width-1),z=this.target.constrain(z,0,this.height-1),$=this.target.constrain($,1,this.width-D),B=this.target.constrain(B,1,this.height-z);for(var G=(0,S.readPixelsWebGL)(void 0,this.gl,this.framebuffer,D*this.density,z*this.density,$*this.density,B*this.density,F.format,F.type),W=new Uint8ClampedArray($*B*this.density*this.density*4),L=(W.fill(255),F.type===this.gl.RGB?3:4),V=0;V<B*this.density;V++)for(var Y=0;Y<$*this.density;Y++)for(var Z=0;Z<4;Z++){var J,ne=4*(V*$*this.density+Y)+Z;Z<L&&(J=L==4?ne:(V*$*this.density+Y)*L+Z,W[ne]=G[J])}return(D=new l.default.Image($*this.density,B*this.density)).imageData=D.canvas.getContext("2d").createImageData(D.width,D.height),D.imageData.data.set(W),D.pixels=D.imageData.data,D.updatePixels(),this.density!==1&&D.resize($,B),D}},{key:"updatePixels",value:function(){var D=this.gl,z=(this.colorP5Texture.bindTexture(),this._glColorFormat()),$=z.format===D.RGBA?4:3,B=($=this.width*this.height*this.density*this.density*$,z.type===D.UNSIGNED_BYTE?Uint8Array:Float32Array);if(!(this.pixels instanceof B)||this.pixels.length!==$)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");D.texImage2D(D.TEXTURE_2D,0,z.internalFormat,this.width*this.density,this.height*this.density,0,z.format,z.type,this.pixels),this.colorP5Texture.unbindTexture(),this.prevFramebuffer=D.getParameter(D.FRAMEBUFFER_BINDING),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(D.clearDepth(1),D.clear(D.DEPTH_BUFFER_BIT)),this.end()):(D.bindFramebuffer(D.FRAMEBUFFER,this.framebuffer),this.useDepth&&(D.clearDepth(1),D.clear(D.DEPTH_BUFFER_BIT)),D.bindFramebuffer(D.FRAMEBUFFER,this.prevFramebuffer))}}]),N}());r=l.default.Framebuffer=O,f.default=r},{"../core/constants":262,"../core/main":273,"./p5.RendererGL":328,"./p5.Texture":330,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],323:[function(r,h,f){r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.for-each"),r("core-js/modules/es.array.for-each"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(d,x){for(var S=0;S<x.length;S++){var m=x[S];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}u.default.Geometry=function(){function d(m,y,b){if(this instanceof d)return this.vertices=[],this.lineVertices=[],this.lineTangentsIn=[],this.lineTangentsOut=[],this.lineSides=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=[],this.detailX=m!==void 0?m:1,this.detailY=y!==void 0?y:1,this.dirtyFlags={},b instanceof Function&&b.call(this),this;throw new TypeError("Cannot call a class as a function")}var x,S;return x=d,(S=[{key:"reset",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"computeFaces",value:function(){this.faces.length=0;for(var m,y,b,g=this.detailX+1,w=0;w<this.detailY;w++)for(var _=0;_<this.detailX;_++)y=(w+1)*g+_+1,this.faces.push([w*g+_,m=w*g+_+1,b=(w+1)*g+_]),this.faces.push([b,m,y]);return this}},{key:"_getFaceNormal",value:function(m){m=this.faces[m];var y=this.vertices[m[0]],b=this.vertices[m[1]],g=(m=this.vertices[m[2]],b=u.default.Vector.sub(b,y),m=u.default.Vector.sub(m,y),y=u.default.Vector.cross(b,m),u.default.Vector.mag(y));return(b=g/(u.default.Vector.mag(b)*u.default.Vector.mag(m)))===0||isNaN(b)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),y):(1<b&&(b=1),y.mult(Math.asin(b)/g))}},{key:"computeNormals",value:function(){for(var m=this,y=this.vertexNormals,b=this.vertices,g=this.faces,w=y.length=0;w<b.length;++w)y.push(new u.default.Vector);for(g.forEach(function(_,C){for(var k=m._getFaceNormal(C),E=0;E<3;++E){var j=_[E];y[j].add(k)}}),w=0;w<b.length;++w)y[w].normalize();return this}},{key:"averageNormals",value:function(){for(var m=0;m<=this.detailY;m++){var y=this.detailX+1,b=u.default.Vector.add(this.vertexNormals[m*y],this.vertexNormals[m*y+this.detailX]);b=u.default.Vector.div(b,2),this.vertexNormals[m*y]=b,this.vertexNormals[m*y+this.detailX]=b}return this}},{key:"averagePoleNormals",value:function(){for(var m=new u.default.Vector(0,0,0),y=0;y<this.detailX;y++)m.add(this.vertexNormals[y]);m=u.default.Vector.div(m,this.detailX);for(var b=0;b<this.detailX;b++)this.vertexNormals[b]=m;m=new u.default.Vector(0,0,0);for(var g=this.vertices.length-1;g>this.vertices.length-1-this.detailX;g--)m.add(this.vertexNormals[g]);m=u.default.Vector.div(m,this.detailX);for(var w=this.vertices.length-1;w>this.vertices.length-1-this.detailX;w--)this.vertexNormals[w]=m;return this}},{key:"_makeTriangleEdges",value:function(){for(var m=this.edges.length=0;m<this.faces.length;m++)this.edges.push([this.faces[m][0],this.faces[m][1]]),this.edges.push([this.faces[m][1],this.faces[m][2]]),this.edges.push([this.faces[m][2],this.faces[m][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0;for(var m,y=1<this.edges.length&&this.edges[0][0]===this.edges[this.edges.length-1][1],b=!1,g=0;g<this.edges.length;g++){var w=this.edges[g-1],_=this.edges[g],C=this.vertices[_[0]],k=this.vertices[_[1]],E=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*_[0],4*(_[0]+1)):[0,0,0,0],j=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*_[1],4*(_[1]+1)):[0,0,0,0],A=k.copy().sub(C).normalize(),O=0<A.magSq();O&&this._addSegment(C,k,E,j,A),0<g&&w[1]===_[0]?(m&&O&&A.dot(m)<1-1e-8&&this._addJoin(C,m,A,E),!O||b||y||(this._addCap(C,A.copy().mult(-1),E),b=!0)):(b=!1,O&&(!y||0<g)&&(this._addCap(C,A.copy().mult(-1),E),b=!0),m&&(!y||g<this.edges.length-1)&&(this._addCap(this.vertices[w[1]],m,E),m=void 0)),g===this.edges.length-1&&(y?this._addJoin(k,A,this.vertices[this.edges[0][1]].copy().sub(k).normalize(),j):this._addCap(k,A,j)),O&&(m=A)}return this}},{key:"_addSegment",value:function(m,y,b,g,w){m=m.array(),y=y.array();var _=w.array();this.lineSides.push(1,-1,1,1,-1,-1);for(var C=0,k=[this.lineTangentsIn,this.lineTangentsOut];C<k.length;C++)k[C].push(_,_,_,_,_,_);return this.lineVertices.push(m,m,y,y,m,y),this.lineVertexColors.push(b,b,g,g,b,g),this}},{key:"_addCap",value:function(m,y,b){for(var g=m.array(),w=y.array(),_=[0,0,0],C=0;C<6;C++)this.lineVertices.push(g),this.lineTangentsIn.push(w),this.lineTangentsOut.push(_),this.lineVertexColors.push(b);return this.lineSides.push(-1,-2,2,2,1,-1),this}},{key:"_addJoin",value:function(m,y,b,g){for(var w=m.array(),_=y.array(),C=b.array(),k=0;k<12;k++)this.lineVertices.push(w),this.lineTangentsIn.push(_),this.lineTangentsOut.push(C),this.lineVertexColors.push(g);for(var E=0,j=[-1,1];E<j.length;E++){var A=j[E];this.lineSides.push(A,2*A,3*A,A,3*A,0)}return this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var m=this.vertices[0].copy(),y=this.vertices[0].copy(),b=0;b<this.vertices.length;b++)m.x=Math.max(m.x,this.vertices[b].x),y.x=Math.min(y.x,this.vertices[b].x),m.y=Math.max(m.y,this.vertices[b].y),y.y=Math.min(y.y,this.vertices[b].y),m.z=Math.max(m.z,this.vertices[b].z),y.z=Math.min(y.z,this.vertices[b].z);for(var g=u.default.Vector.lerp(m,y,.5),w=u.default.Vector.sub(m,y),_=200/Math.max(Math.max(w.x,w.y),w.z),C=0;C<this.vertices.length;C++)this.vertices[C].sub(g),this.vertices[C].mult(_)}return this}}])&&l(x.prototype,S),d}(),r=u.default.Geometry,f.default=r},{"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.slice":164,"core-js/modules/es.string.sub":198,"core-js/modules/web.dom-collections.for-each":235}],324:[function(r,h,f){r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(S,m){for(var y=0;y<m.length;y++){var b=m[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(S,b.key,b)}}var d=Array,x=function(S){return Array.isArray(S)};typeof Float32Array<"u"&&(d=Float32Array,x=function(S){return Array.isArray(S)||S instanceof Float32Array}),u.default.Matrix=function(){function S(){var g=this,w=S;if(g instanceof w)return arguments.length&&((g=arguments.length-1)<0||arguments.length<=g?void 0:arguments[g])instanceof u.default&&(this.p5=(w=arguments.length-1)<0||arguments.length<=w?void 0:arguments[w]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new d([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new d([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var m,y,b;return m=S,b=[{key:"identity",value:function(g){return new u.default.Matrix(g)}}],(y=[{key:"set",value:function(g){return g instanceof u.default.Matrix?this.mat4=g.mat4:x(g)?this.mat4=g:arguments.length===16&&(this.mat4[0]=g,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new u.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var g;return this.mat3!==void 0?((g=new u.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],g.mat3[1]=this.mat3[1],g.mat3[2]=this.mat3[2],g.mat3[3]=this.mat3[3],g.mat3[4]=this.mat3[4],g.mat3[5]=this.mat3[5],g.mat3[6]=this.mat3[6],g.mat3[7]=this.mat3[7],g.mat3[8]=this.mat3[8]):((g=new u.default.Matrix(this.p5)).mat4[0]=this.mat4[0],g.mat4[1]=this.mat4[1],g.mat4[2]=this.mat4[2],g.mat4[3]=this.mat4[3],g.mat4[4]=this.mat4[4],g.mat4[5]=this.mat4[5],g.mat4[6]=this.mat4[6],g.mat4[7]=this.mat4[7],g.mat4[8]=this.mat4[8],g.mat4[9]=this.mat4[9],g.mat4[10]=this.mat4[10],g.mat4[11]=this.mat4[11],g.mat4[12]=this.mat4[12],g.mat4[13]=this.mat4[13],g.mat4[14]=this.mat4[14],g.mat4[15]=this.mat4[15]),g}},{key:"transpose",value:function(g){var w,_,C,k,E,j;return g instanceof u.default.Matrix?(w=g.mat4[1],_=g.mat4[2],C=g.mat4[3],k=g.mat4[6],E=g.mat4[7],j=g.mat4[11],this.mat4[0]=g.mat4[0],this.mat4[1]=g.mat4[4],this.mat4[2]=g.mat4[8],this.mat4[3]=g.mat4[12],this.mat4[4]=w,this.mat4[5]=g.mat4[5],this.mat4[6]=g.mat4[9],this.mat4[7]=g.mat4[13],this.mat4[8]=_,this.mat4[9]=k,this.mat4[10]=g.mat4[10],this.mat4[11]=g.mat4[14],this.mat4[12]=C,this.mat4[13]=E,this.mat4[14]=j,this.mat4[15]=g.mat4[15]):x(g)&&(w=g[1],_=g[2],C=g[3],k=g[6],E=g[7],j=g[11],this.mat4[0]=g[0],this.mat4[1]=g[4],this.mat4[2]=g[8],this.mat4[3]=g[12],this.mat4[4]=w,this.mat4[5]=g[5],this.mat4[6]=g[9],this.mat4[7]=g[13],this.mat4[8]=_,this.mat4[9]=k,this.mat4[10]=g[10],this.mat4[11]=g[14],this.mat4[12]=C,this.mat4[13]=E,this.mat4[14]=j,this.mat4[15]=g[15]),this}},{key:"invert",value:function(g){g instanceof u.default.Matrix?(w=g.mat4[0],_=g.mat4[1],C=g.mat4[2],k=g.mat4[3],E=g.mat4[4],j=g.mat4[5],A=g.mat4[6],O=g.mat4[7],N=g.mat4[8],D=g.mat4[9],z=g.mat4[10],$=g.mat4[11],B=g.mat4[12],F=g.mat4[13],G=g.mat4[14],W=g.mat4[15]):x(g)&&(w=g[0],_=g[1],C=g[2],k=g[3],E=g[4],j=g[5],A=g[6],O=g[7],N=g[8],D=g[9],z=g[10],$=g[11],B=g[12],F=g[13],G=g[14],W=g[15]);var w,_,C,k,E,j,A,O,N,D,z,$,B,F,G,W,L=w*A-C*E,V=w*O-k*E,Y=_*A-C*j,Z=_*O-k*j,J=C*O-k*A,ne=N*F-D*B,se=N*G-z*B,ie=N*W-$*B,X=D*G-z*F,Q=D*W-$*F,re=z*W-$*G,ce=(g=w*j-_*E)*re-L*Q+V*X+Y*ie-Z*se+J*ne;return ce?(this.mat4[0]=(j*re-A*Q+O*X)*(ce=1/ce),this.mat4[1]=(C*Q-_*re-k*X)*ce,this.mat4[2]=(F*J-G*Z+W*Y)*ce,this.mat4[3]=(z*Z-D*J-$*Y)*ce,this.mat4[4]=(A*ie-E*re-O*se)*ce,this.mat4[5]=(w*re-C*ie+k*se)*ce,this.mat4[6]=(G*V-B*J-W*L)*ce,this.mat4[7]=(N*J-z*V+$*L)*ce,this.mat4[8]=(E*Q-j*ie+O*ne)*ce,this.mat4[9]=(_*ie-w*Q-k*ne)*ce,this.mat4[10]=(B*Z-F*V+W*g)*ce,this.mat4[11]=(D*V-N*Z-$*g)*ce,this.mat4[12]=(j*se-E*X-A*ne)*ce,this.mat4[13]=(w*X-_*se+C*ne)*ce,this.mat4[14]=(F*L-B*Y-G*g)*ce,this.mat4[15]=(N*Y-D*L+z*g)*ce,this):null}},{key:"invert3x3",value:function(){var g=this.mat3[0],w=this.mat3[1],_=this.mat3[2],C=this.mat3[3],k=this.mat3[4],E=this.mat3[5],j=this.mat3[6],A=this.mat3[7],O=this.mat3[8],N=O*k-E*A,D=-O*C+E*j,z=A*C-k*j,$=g*N+w*D+_*z;return $?(this.mat3[0]=N*($=1/$),this.mat3[1]=(-O*w+_*A)*$,this.mat3[2]=(E*w-_*k)*$,this.mat3[3]=D*$,this.mat3[4]=(O*g-_*j)*$,this.mat3[5]=(-E*g+_*C)*$,this.mat3[6]=z*$,this.mat3[7]=(-A*g+w*j)*$,this.mat3[8]=(k*g-w*C)*$,this):null}},{key:"transpose3x3",value:function(g){var w=(g=g===void 0?this.mat3:g)[1],_=g[2],C=g[5];return this.mat3[0]=g[0],this.mat3[1]=g[3],this.mat3[2]=g[6],this.mat3[3]=w,this.mat3[4]=g[4],this.mat3[5]=g[7],this.mat3[6]=_,this.mat3[7]=C,this.mat3[8]=g[8],this}},{key:"inverseTranspose",value:function(g){if(g=g.mat4,this.mat3===void 0?u.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=g[0],this.mat3[1]=g[1],this.mat3[2]=g[2],this.mat3[3]=g[4],this.mat3[4]=g[5],this.mat3[5]=g[6],this.mat3[6]=g[8],this.mat3[7]=g[9],this.mat3[8]=g[10]),g=this.invert3x3())g.transpose3x3(this.mat3);else for(var w=0;w<9;w++)this.mat3[w]=0;return this}},{key:"determinant",value:function(){var g=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],w=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],_=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],C=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],k=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],E=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],j=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],A=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],O=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],N=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],D=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return g*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-w*D+_*N+C*O-k*A+E*j}},{key:"mult",value:function(g){var w;if(g===this||g===this.mat4)w=this.copy().mat4;else if(g instanceof u.default.Matrix)w=g.mat4;else if(x(g))w=g;else{if(arguments.length!==16)return;w=arguments}g=this.mat4[0];var _=this.mat4[1],C=this.mat4[2],k=this.mat4[3];return this.mat4[0]=g*w[0]+_*w[4]+C*w[8]+k*w[12],this.mat4[1]=g*w[1]+_*w[5]+C*w[9]+k*w[13],this.mat4[2]=g*w[2]+_*w[6]+C*w[10]+k*w[14],this.mat4[3]=g*w[3]+_*w[7]+C*w[11]+k*w[15],g=this.mat4[4],_=this.mat4[5],C=this.mat4[6],k=this.mat4[7],this.mat4[4]=g*w[0]+_*w[4]+C*w[8]+k*w[12],this.mat4[5]=g*w[1]+_*w[5]+C*w[9]+k*w[13],this.mat4[6]=g*w[2]+_*w[6]+C*w[10]+k*w[14],this.mat4[7]=g*w[3]+_*w[7]+C*w[11]+k*w[15],g=this.mat4[8],_=this.mat4[9],C=this.mat4[10],k=this.mat4[11],this.mat4[8]=g*w[0]+_*w[4]+C*w[8]+k*w[12],this.mat4[9]=g*w[1]+_*w[5]+C*w[9]+k*w[13],this.mat4[10]=g*w[2]+_*w[6]+C*w[10]+k*w[14],this.mat4[11]=g*w[3]+_*w[7]+C*w[11]+k*w[15],g=this.mat4[12],_=this.mat4[13],C=this.mat4[14],k=this.mat4[15],this.mat4[12]=g*w[0]+_*w[4]+C*w[8]+k*w[12],this.mat4[13]=g*w[1]+_*w[5]+C*w[9]+k*w[13],this.mat4[14]=g*w[2]+_*w[6]+C*w[10]+k*w[14],this.mat4[15]=g*w[3]+_*w[7]+C*w[11]+k*w[15],this}},{key:"apply",value:function(g){var w;if(g===this||g===this.mat4)w=this.copy().mat4;else if(g instanceof u.default.Matrix)w=g.mat4;else if(x(g))w=g;else{if(arguments.length!==16)return;w=arguments}var _=(g=this.mat4)[0],C=g[4],k=g[8],E=g[12];return g[0]=w[0]*_+w[1]*C+w[2]*k+w[3]*E,g[4]=w[4]*_+w[5]*C+w[6]*k+w[7]*E,g[8]=w[8]*_+w[9]*C+w[10]*k+w[11]*E,g[12]=w[12]*_+w[13]*C+w[14]*k+w[15]*E,_=g[1],C=g[5],k=g[9],E=g[13],g[1]=w[0]*_+w[1]*C+w[2]*k+w[3]*E,g[5]=w[4]*_+w[5]*C+w[6]*k+w[7]*E,g[9]=w[8]*_+w[9]*C+w[10]*k+w[11]*E,g[13]=w[12]*_+w[13]*C+w[14]*k+w[15]*E,_=g[2],C=g[6],k=g[10],E=g[14],g[2]=w[0]*_+w[1]*C+w[2]*k+w[3]*E,g[6]=w[4]*_+w[5]*C+w[6]*k+w[7]*E,g[10]=w[8]*_+w[9]*C+w[10]*k+w[11]*E,g[14]=w[12]*_+w[13]*C+w[14]*k+w[15]*E,_=g[3],C=g[7],k=g[11],E=g[15],g[3]=w[0]*_+w[1]*C+w[2]*k+w[3]*E,g[7]=w[4]*_+w[5]*C+w[6]*k+w[7]*E,g[11]=w[8]*_+w[9]*C+w[10]*k+w[11]*E,g[15]=w[12]*_+w[13]*C+w[14]*k+w[15]*E,this}},{key:"scale",value:function(g,w,_){return g instanceof u.default.Vector?(w=g.y,_=g.z,g=g.x):g instanceof Array&&(w=g[1],_=g[2],g=g[0]),this.mat4[0]*=g,this.mat4[1]*=g,this.mat4[2]*=g,this.mat4[3]*=g,this.mat4[4]*=w,this.mat4[5]*=w,this.mat4[6]*=w,this.mat4[7]*=w,this.mat4[8]*=_,this.mat4[9]*=_,this.mat4[10]*=_,this.mat4[11]*=_,this}},{key:"rotate",value:function(g,w,_,C){w instanceof u.default.Vector?(_=w.y,C=w.z,w=w.x):w instanceof Array&&(_=w[1],C=w[2],w=w[0]);var k=(w*=1/(k=Math.sqrt(w*w+_*_+C*C)),_*=1/k,C*=1/k,this.mat4[0]),E=this.mat4[1],j=this.mat4[2],A=this.mat4[3],O=this.mat4[4],N=this.mat4[5],D=this.mat4[6],z=this.mat4[7],$=this.mat4[8],B=this.mat4[9],F=this.mat4[10],G=this.mat4[11],W=Math.sin(g),L=1-(g=Math.cos(g)),V=w*w*L+g,Y=_*w*L+C*W,Z=C*w*L-_*W,J=w*_*L-C*W,ne=_*_*L+g,se=C*_*L+w*W,ie=w*C*L+_*W;return _=_*C*L-w*W,w=C*C*L+g,this.mat4[0]=k*V+O*Y+$*Z,this.mat4[1]=E*V+N*Y+B*Z,this.mat4[2]=j*V+D*Y+F*Z,this.mat4[3]=A*V+z*Y+G*Z,this.mat4[4]=k*J+O*ne+$*se,this.mat4[5]=E*J+N*ne+B*se,this.mat4[6]=j*J+D*ne+F*se,this.mat4[7]=A*J+z*ne+G*se,this.mat4[8]=k*ie+O*_+$*w,this.mat4[9]=E*ie+N*_+B*w,this.mat4[10]=j*ie+D*_+F*w,this.mat4[11]=A*ie+z*_+G*w,this}},{key:"translate",value:function(g){var w=g[0],_=g[1];g=g[2]||0,this.mat4[12]+=this.mat4[0]*w+this.mat4[4]*_+this.mat4[8]*g,this.mat4[13]+=this.mat4[1]*w+this.mat4[5]*_+this.mat4[9]*g,this.mat4[14]+=this.mat4[2]*w+this.mat4[6]*_+this.mat4[10]*g,this.mat4[15]+=this.mat4[3]*w+this.mat4[7]*_+this.mat4[11]*g}},{key:"rotateX",value:function(g){this.rotate(g,1,0,0)}},{key:"rotateY",value:function(g){this.rotate(g,0,1,0)}},{key:"rotateZ",value:function(g){this.rotate(g,0,0,1)}},{key:"perspective",value:function(g,w,_,C){g=1/Math.tan(g/2);var k=1/(_-C);return this.mat4[0]=g/w,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=g,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(C+_)*k,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*C*_*k,this.mat4[15]=0,this}},{key:"ortho",value:function(g,w,_,C,k,E){var j=1/(g-w),A=1/(_-C),O=1/(k-E);return this.mat4[0]=-2*j,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*A,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*O,this.mat4[11]=0,this.mat4[12]=(g+w)*j,this.mat4[13]=(C+_)*A,this.mat4[14]=(E+k)*O,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(g,w,_,C){var k=new Array(4),E=this.mat4;return k[0]=E[0]*g+E[4]*w+E[8]*_+E[12]*C,k[1]=E[1]*g+E[5]*w+E[9]*_+E[13]*C,k[2]=E[2]*g+E[6]*w+E[10]*_+E[14]*C,k[3]=E[3]*g+E[7]*w+E[11]*_+E[15]*C,k}},{key:"multiplyPoint",value:function(g){var w=g.x,_=g.y;return g=g.z,w=this.multiplyVec4(w,_,g,1),new u.default.Vector(w[0],w[1],w[2])}},{key:"multiplyAndNormalizePoint",value:function(g){var w=g.x,_=g.y;return g=g.z,(w=this.multiplyVec4(w,_,g,1))[0]/=w[3],w[1]/=w[3],w[2]/=w[3],new u.default.Vector(w[0],w[1],w[2])}},{key:"multiplyDirection",value:function(g){var w=g.x,_=g.y;return g=g.z,w=this.multiplyVec4(w,_,g,0),new u.default.Vector(w[0],w[1],w[2])}},{key:"mult3x3",value:function(g){var w;if(g===this||g===this.mat3)w=this.copy().mat3;else if(g instanceof u.default.Matrix)w=g.mat3;else if(x(g))w=g;else{if(arguments.length!==9)return;w=arguments}g=this.mat3[0];var _=this.mat3[1],C=this.mat3[2];return this.mat3[0]=g*w[0]+_*w[3]+C*w[6],this.mat3[1]=g*w[1]+_*w[4]+C*w[7],this.mat3[2]=g*w[2]+_*w[5]+C*w[8],g=this.mat3[3],_=this.mat3[4],C=this.mat3[5],this.mat3[3]=g*w[0]+_*w[3]+C*w[6],this.mat3[4]=g*w[1]+_*w[4]+C*w[7],this.mat3[5]=g*w[2]+_*w[5]+C*w[8],g=this.mat3[6],_=this.mat3[7],C=this.mat3[8],this.mat3[6]=g*w[0]+_*w[3]+C*w[6],this.mat3[7]=g*w[1]+_*w[4]+C*w[7],this.mat3[8]=g*w[2]+_*w[5]+C*w[8],this}},{key:"column",value:function(g){return new u.default.Vector(this.mat3[g],this.mat3[g+3],this.mat3[g+6])}},{key:"row",value:function(g){return new u.default.Vector(this.mat3[3*g],this.mat3[3*g+1],this.mat3[3*g+2])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(g,w){return(w=w===void 0?g.copy():w).x=this.row(0).dot(g),w.y=this.row(1).dot(g),w.z=this.row(2).dot(g),w}},{key:"createSubMatrix3x3",value:function(){var g=new u.default.Matrix("mat3");return g.mat3[0]=this.mat4[0],g.mat3[1]=this.mat4[1],g.mat3[2]=this.mat4[2],g.mat3[3]=this.mat4[4],g.mat3[4]=this.mat4[5],g.mat3[5]=this.mat4[6],g.mat3[6]=this.mat4[8],g.mat3[7]=this.mat4[9],g.mat3[8]=this.mat4[10],g}}])&&l(m.prototype,y),b&&l(m,b),S}(),r=u.default.Matrix,f.default=r},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229}],325:[function(r,h,f){function u(l,d){for(var x=0;x<d.length;x++){var S=d[x];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}r("core-js/modules/es.array.map"),r("core-js/modules/es.array.map"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,(r=(r=r("../core/main"))&&r.__esModule?r:{default:r}).default.RenderBuffer=function(){function l(S,m,y,b,g,w){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.size=S,this.src=m,this.dst=y,this.attr=b,this._renderer=g,this.map=w}var d,x;return d=l,(x=[{key:"_prepareBuffer",value:function(S,m){var y,b,g,w=m.attributes,_=this._renderer.GL,C=S.model||S;(w=w[this.attr])&&(y=S[this.dst],0<(b=C[this.src]).length?((g=!y)&&(S[this.dst]=y=_.createBuffer()),_.bindBuffer(_.ARRAY_BUFFER,y),!g&&C.dirtyFlags[this.src]===!1||(g=(S=this.map)?S(b):b,this._renderer._bindBuffer(y,_.ARRAY_BUFFER,g),C.dirtyFlags[this.src]=!1),m.enableAttrib(w,this.size)):(S=w.location)!==-1&&this._renderer.registerEnabled[S]&&(_.disableVertexAttribArray(S),this._renderer.registerEnabled[S]=!1))}}])&&u(d.prototype,x),l}(),r=r.default.RenderBuffer,f.default=r},{"../core/main":273,"core-js/modules/es.array.map":163}],326:[function(r,h,f){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(b)}function l(b){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(g){return u(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":u(g)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.map"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(y=r("../core/main"))&&y.__esModule?y:{default:y},x=function(b){if(b&&b.__esModule)return b;if(b===null||l(b)!=="object"&&typeof b!="function")return{default:b};var g=function(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,E)}();if(g&&g.has(b))return g.get(b);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in b){var k;Object.prototype.hasOwnProperty.call(b,w)&&((k=C?Object.getOwnPropertyDescriptor(b,w):null)&&(k.get||k.set)?Object.defineProperty(_,w,k):_[w]=b[w])}return _.default=b,g&&g.set(b,_),_}(r("../core/constants"));function S(b){return function(g){if(Array.isArray(g)){for(var w=0,_=new Array(g.length);w<g.length;w++)_[w]=g[w];return _}}(b)||function(g){if(Symbol.iterator in Object(g)||Object.prototype.toString.call(g)==="[object Arguments]")return Array.from(g)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r("./p5.RenderBuffer"),d.default.RendererGL.prototype.beginShape=function(b){return this.immediateMode.shapeMode=b!==void 0?b:x.TESS,this.immediateMode.geometry.reset(),this};var m={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},y=(d.default.RendererGL.prototype.vertex=function(b,g){if(this.immediateMode.shapeMode===x.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var w in m){var _=m[w];(w=this.immediateMode.geometry[w]).push.apply(w,S(w.slice(w.length-3*_,w.length-2*_)).concat(S(w.slice(w.length-_,w.length))))}var C,k,E=C=k=0,j=(arguments.length===3?E=arguments[2]:arguments.length===4?(C=arguments[2],k=arguments[3]):arguments.length===5&&(E=arguments[2],C=arguments[3],k=arguments[4]),new d.default.Vector(b,g,E));return this.immediateMode.geometry.vertices.push(j),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),j=this.curFillColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexColors.push(j[0],j[1],j[2],j[3]),j=this.curStrokeColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexStrokeColors.push(j[0],j[1],j[2],j[3]),this.textureMode===x.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(C/=this._tex.width,k/=this._tex.height):!this.isProcessingVertices&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(C,k),this.immediateMode._bezierVertex[0]=b,this.immediateMode._bezierVertex[1]=g,this.immediateMode._bezierVertex[2]=E,this.immediateMode._quadraticVertex[0]=b,this.immediateMode._quadraticVertex[1]=g,this.immediateMode._quadraticVertex[2]=E,this},d.default.RendererGL.prototype.normal=function(b,g,w){return b instanceof d.default.Vector?this._currentNormal=b:this._currentNormal=new d.default.Vector(b,g,w),this},d.default.RendererGL.prototype.endShape=function(b,g,w,_,C,k){return this.immediateMode.shapeMode===x.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},d.default.RendererGL.prototype._processVertices=function(b){var g;this.immediateMode.geometry.vertices.length!==0&&(g=this._doStroke,b=b===x.CLOSE,g&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,b),this.immediateMode.geometry._edgesToVertices()),g=this.immediateMode.shapeMode===x.TESS,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||g)&&this.immediateMode.shapeMode!==x.LINES&&this._tesselateShape())},d.default.RendererGL.prototype._calculateEdges=function(b,g,w){var _=[],C=0;switch(b){case x.TRIANGLE_STRIP:for(C=0;C<g.length-2;C++)_.push([C,C+1]),_.push([C,C+2]);_.push([C,C+1]);break;case x.TRIANGLE_FAN:for(C=1;C<g.length-1;C++)_.push([0,C]),_.push([C,C+1]);_.push([0,g.length-1]);break;case x.TRIANGLES:for(C=0;C<g.length-2;C+=3)_.push([C,C+1]),_.push([C+1,C+2]),_.push([C+2,C]);break;case x.LINES:for(C=0;C<g.length-1;C+=2)_.push([C,C+1]);break;case x.QUADS:for(C=0;C<g.length-5;C+=6)_.push([C,C+1]),_.push([C+1,C+2]),_.push([C+3,C+5]),_.push([C+4,C+5]);break;case x.QUAD_STRIP:for(C=0;C<g.length-2;C+=2)_.push([C,C+1]),_.push([C,C+2]),_.push([C+1,C+3]);_.push([C,C+1]);break;default:for(C=0;C<g.length-1;C++)_.push([C,C+1])}return w&&_.push([g.length-1,0]),_},d.default.RendererGL.prototype._tesselateShape=function(){for(var b=this,g=(this.immediateMode.shapeMode=x.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(E,j){return[E.x,E.y,E.z,b.immediateMode.geometry.uvs[2*j],b.immediateMode.geometry.uvs[2*j+1],b.immediateMode.geometry.vertexColors[4*j],b.immediateMode.geometry.vertexColors[4*j+1],b.immediateMode.geometry.vertexColors[4*j+2],b.immediateMode.geometry.vertexColors[4*j+3],b.immediateMode.geometry.vertexNormals[j].x,b.immediateMode.geometry.vertexNormals[j].y,b.immediateMode.geometry.vertexNormals[j].z]}))]),w=this._triangulate(g),_=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),C=0,k=w.length;C<k;C+=d.default.RendererGL.prototype.tessyVertexSize)_.push.apply(_,S(w.slice(C+5,C+9))),this.normal.apply(this,S(w.slice(C+9,C+12))),this.vertex.apply(this,S(w.slice(C,C+5)));this.immediateMode.geometry.vertexColors=_},d.default.RendererGL.prototype._drawImmediateFill=function(){var b=this.GL,g=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,this._getImmediateFillShader()),w=(this._setFillUniforms(g),!0),_=!1,C=void 0;try{for(var k,E=this.immediateMode.buffers.fill[Symbol.iterator]();!(w=(k=E.next()).done);w=!0)k.value._prepareBuffer(this.immediateMode.geometry,g)}catch(j){_=!0,C=j}finally{try{w||E.return==null||E.return()}finally{if(_)throw C}}this.immediateMode.shapeMode!==x.LINE_STRIP&&this.immediateMode.shapeMode!==x.LINES||(this.immediateMode.shapeMode=x.TRIANGLE_FAN),this.immediateMode.shapeMode===x.QUADS?this.immediateMode.shapeMode=x.TRIANGLES:this.immediateMode.shapeMode===x.QUAD_STRIP&&(this.immediateMode.shapeMode=x.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),b.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),g.unbindShader()},d.default.RendererGL.prototype._drawImmediateStroke=function(){var b=this.GL,g=b.isEnabled(b.CULL_FACE),w=(b.disable(b.CULL_FACE),this._getImmediateStrokeShader()),_=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._setStrokeUniforms(w),!0),C=!1,k=void 0;try{for(var E,j=this.immediateMode.buffers.stroke[Symbol.iterator]();!(_=(E=j.next()).done);_=!0)E.value._prepareBuffer(this.immediateMode.geometry,w)}catch(A){C=!0,k=A}finally{try{_||j.return==null||j.return()}finally{if(C)throw k}}this._applyColorBlend(this.curStrokeColor),b.drawArrays(b.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),g&&b.enable(b.CULL_FACE),w.unbindShader()},d.default.RendererGL);f.default=y},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],327:[function(r,h,f){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(y)}function l(y){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(y)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.some"),r("core-js/modules/es.object.keys"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var d=(m=r("../core/main"))&&m.__esModule?m:{default:m},x=(r("./p5.RendererGL"),r("./p5.RenderBuffer"),function(y){if(y&&y.__esModule)return y;if(y===null||l(y)!=="object"&&typeof y!="function")return{default:y};var b=function(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,k)}();if(b&&b.has(y))return b.get(y);var g,w={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(g in y){var C;Object.prototype.hasOwnProperty.call(y,g)&&((C=_?Object.getOwnPropertyDescriptor(y,g):null)&&(C.get||C.set)?Object.defineProperty(w,g,C):w[g]=y[g])}return w.default=y,b&&b.set(y,w),w}(r("../core/constants"))),S=0,m=(d.default.RendererGL.prototype._initBufferDefaults=function(y){var b;return this._freeBuffers(y),1e3<++S&&(b=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[b],S--),this.retainedMode.geometry[y]={}},d.default.RendererGL.prototype._freeBuffers=function(y){var b,g=this.retainedMode.geometry[y];function w(_){var C=!0,k=!1,E=void 0;try{for(var j,A=_[Symbol.iterator]();!(C=(j=A.next()).done);C=!0){var O=j.value;g[O.dst]&&(b.deleteBuffer(g[O.dst]),g[O.dst]=null)}}catch(N){k=!0,E=N}finally{try{C||A.return==null||A.return()}finally{if(k)throw E}}}g&&(delete this.retainedMode.geometry[y],S--,b=this.GL,g.indexBuffer&&b.deleteBuffer(g.indexBuffer),w(this.retainedMode.buffers.stroke),w(this.retainedMode.buffers.fill))},d.default.RendererGL.prototype.createBuffers=function(y,b){var g,w,_,C=this.GL,k=((y=this._initBufferDefaults(y)).model=b,y.indexBuffer);return b.faces.length?(k=k||(y.indexBuffer=C.createBuffer()),_=(w=(g=d.default.RendererGL.prototype._flatten(b.faces)).some(function(E){return 65535<E}))?Uint32Array:Uint16Array,this._bindBuffer(k,C.ELEMENT_ARRAY_BUFFER,g,_),y.indexBufferType=w?C.UNSIGNED_INT:C.UNSIGNED_SHORT,y.vertexCount=3*b.faces.length):(k&&(C.deleteBuffer(k),y.indexBuffer=null),y.vertexCount=b.vertices?b.vertices.length:0),y.lineVertexCount=b.lineVertices?b.lineVertices.length:0,y},d.default.RendererGL.prototype.drawBuffers=function(y){var b=this.GL,g=this.retainedMode.geometry[y];if(this._doFill){this._useVertexColor=0<g.model.vertexColors.length;var w=this._getRetainedFillShader(),_=(this._setFillUniforms(w),!0),C=!1,k=void 0;try{for(var E,j=this.retainedMode.buffers.fill[Symbol.iterator]();!(_=(E=j.next()).done);_=!0)E.value._prepareBuffer(g,w)}catch($){C=!0,k=$}finally{try{_||j.return==null||j.return()}finally{if(C)throw k}}g.indexBuffer&&this._bindBuffer(g.indexBuffer,b.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(b.TRIANGLES,y),w.unbindShader()}if(this._doStroke&&0<g.lineVertexCount){C=b.isEnabled(b.CULL_FACE);var A=(b.disable(b.CULL_FACE),this._getRetainedStrokeShader()),O=(this._useLineColor=0<g.model.vertexStrokeColors.length,this._setStrokeUniforms(A),!0),N=(k=!1,void 0);try{for(var D,z=this.retainedMode.buffers.stroke[Symbol.iterator]();!(O=(D=z.next()).done);O=!0)D.value._prepareBuffer(g,A)}catch($){k=!0,N=$}finally{try{O||z.return==null||z.return()}finally{if(k)throw N}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(b.TRIANGLES,y),C&&b.enable(b.CULL_FACE),A.unbindShader()}return this},d.default.RendererGL.prototype.drawBuffersScaled=function(y,b,g,w){var _=this.uMVMatrix.copy();try{this.uMVMatrix.scale(b,g,w),this.drawBuffers(y)}finally{this.uMVMatrix=_}},d.default.RendererGL.prototype._drawArrays=function(y,b){return this.GL.drawArrays(y,0,this.retainedMode.geometry[b].lineVertexCount),this},d.default.RendererGL.prototype._drawElements=function(y,b){b=this.retainedMode.geometry[b];var g=this.GL;if(b.indexBuffer){if(this._pInst.webglVersion!==x.WEBGL2&&b.indexBufferType===g.UNSIGNED_INT&&!g.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");g.drawElements(g.TRIANGLES,b.vertexCount,b.indexBufferType,0)}else g.drawArrays(y||g.TRIANGLES,0,b.vertexCount)},d.default.RendererGL.prototype._drawPoints=function(y,b){var g=this.GL,w=this._getImmediatePointShader();this._setPointUniforms(w),this._bindBuffer(b,g.ARRAY_BUFFER,this._vToNArray(y),Float32Array,g.STATIC_DRAW),w.enableAttrib(w.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),g.drawArrays(g.Points,0,y.length),w.unbindShader()},d.default.RendererGL);f.default=m},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"./p5.RendererGL":328,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.some":165,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],328:[function(r,h,f){function u(B){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(B)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.map"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.float64-array"),r("core-js/modules/es.typed-array.int16-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.concat"),r("core-js/modules/es.array.copy-within"),r("core-js/modules/es.array.every"),r("core-js/modules/es.array.fill"),r("core-js/modules/es.array.from"),r("core-js/modules/es.array.includes"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.array.some"),r("core-js/modules/es.map"),r("core-js/modules/es.object.assign"),r("core-js/modules/es.object.get-prototype-of"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.reflect.construct"),r("core-js/modules/es.regexp.to-string"),r("core-js/modules/es.set"),r("core-js/modules/es.string.includes"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.float32-array"),r("core-js/modules/es.typed-array.float64-array"),r("core-js/modules/es.typed-array.int16-array"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.uint16-array"),r("core-js/modules/es.typed-array.uint32-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.readPixelsWebGL=z,f.readPixelWebGL=$,f.default=void 0;var l=S(r("../core/main")),d=function(B){if(B&&B.__esModule)return B;if(B===null||m(B)!=="object"&&typeof B!="function")return{default:B};var F=function(){var Y;return typeof WeakMap!="function"?null:(Y=new WeakMap,Y)}();if(F&&F.has(B))return F.get(B);var G,W={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(G in B){var V;Object.prototype.hasOwnProperty.call(B,G)&&((V=L?Object.getOwnPropertyDescriptor(B,G):null)&&(V.get||V.set)?Object.defineProperty(W,G,V):W[G]=B[G])}return W.default=B,F&&F.set(B,W),W}(r("../core/constants")),x=S(r("libtess"));function S(B){return B&&B.__esModule?B:{default:B}}function m(B){return(m=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(F){return u(F)}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":u(F)})(B)}function y(B){return function(F){if(Array.isArray(F)){for(var G=0,W=new Array(F.length);G<F.length;G++)W[G]=F[G];return W}}(B)||function(F){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]")return Array.from(F)}(B)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(B,F){for(var G=0;G<F.length;G++){var W=F[G];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(B,W.key,W)}}function g(B,F){return(g=Object.setPrototypeOf||function(G,W){return G.__proto__=W,G})(B,F)}function w(B){return function(){var F,G,W=C(B);return F=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(F=C(this).constructor,Reflect.construct(W,arguments,F)):W.apply(this,arguments),W=this,!(G=F)||m(G)!=="object"&&typeof G!="function"?_(W):G}}function _(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function C(B){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)})(B)}function k(B,F){O+="#define STROKE_CAP_".concat(B," ").concat(F,`
`),j[d[B]]=F}function E(B,F){O+="#define STROKE_JOIN_".concat(B," ").concat(F,`
`),A[d[B]]=F}r("./p5.Shader"),r("./p5.Camera"),r("../core/p5.Renderer"),r("./p5.Matrix"),r("path");var j={},A={},O="",N=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`,D={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;
varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:(r=(k("ROUND",0),k("PROJECT",1),k("SQUARE",2),E("ROUND",0),E("MITER",1),E("BEVEL",2),`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`))+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? texture2D(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    gl_FragColor = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:r+`// include lighting.glsl
precision highp float;
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? texture2D(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  gl_FragColor = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:N+`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec2 pixelScale = vec2(
    1. / uModelViewMatrix[0][0],
    1. / uModelViewMatrix[1][1]
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:N+`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:O+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump float;
precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

attribute vec4 aPosition;
attribute vec3 aTangentIn;
attribute vec3 aTangentOut;
attribute float aSide;
attribute vec4 aVertexColor;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5 * curPerspScale;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset / curPerspScale;

  gl_Position.xy = p.xy + offset.xy;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:O+`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`};function z(B,F,G,W,L,V,Y,Z,J,ne){var se=F.getParameter(F.FRAMEBUFFER_BINDING),ie=V*Y*(G=(F.bindFramebuffer(F.FRAMEBUFFER,G),Z===F.RGBA?4:3)),X=J===F.UNSIGNED_BYTE?Uint8Array:Float32Array;if(B instanceof X&&B.length===ie||(B=new X(ie)),F.readPixels(W,ne?ne-L-Y:L,V,Y,Z,J,B),F.bindFramebuffer(F.FRAMEBUFFER,se),ne)for(var Q=Math.floor(Y/2),re=new X(V*G),ce=0;ce<Q;ce++){var he=ce*V*4,fe=(Y-ce-1)*V*4;re.set(B.subarray(he,he+4*V)),B.copyWithin(he,fe,fe+4*V),B.set(re,fe)}return B}function $(B,F,G,W,L,V,Y){var Z=B.getParameter(B.FRAMEBUFFER_BINDING);return B.bindFramebuffer(B.FRAMEBUFFER,F),F=L===B.RGBA?4:3,F=new(V===B.UNSIGNED_BYTE?Uint8Array:Float32Array)(F),B.readPixels(G,Y?Y-W-1:W,1,1,L,V,F),B.bindFramebuffer(B.FRAMEBUFFER,Z),Array.from(F)}l.default.prototype.setAttributes=function(B,F){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var G=!0;if(F!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[B]!==F&&(this._glAttributes[B]=F,G=!1)):B instanceof Object&&this._glAttributes!==B&&(this._glAttributes=B,G=!1),this._renderer.isP3D&&!G){if(!this._setupDone){for(var W in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(W))return void l.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL=function(B){var F=W;if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(B&&B.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),B&&g(F,B);var G=w(W);function W(L,V,Y,Z){if(this instanceof W)return(L=G.call(this,L,V,Y))._setAttributeDefaults(V),L._initContext(),L.isP3D=!0,L.GL=L.drawingContext,L._pInst._setProperty("drawingContext",L.drawingContext),L._isErasing=!1,L._enableLighting=!1,L.ambientLightColors=[],L.specularColors=[1,1,1],L.directionalLightDirections=[],L.directionalLightDiffuseColors=[],L.directionalLightSpecularColors=[],L.pointLightPositions=[],L.pointLightDiffuseColors=[],L.pointLightSpecularColors=[],L.spotLightPositions=[],L.spotLightDirections=[],L.spotLightDiffuseColors=[],L.spotLightSpecularColors=[],L.spotLightAngle=[],L.spotLightConc=[],L.drawMode=d.FILL,L.curFillColor=L._cachedFillStyle=[1,1,1,1],L.curAmbientColor=L._cachedFillStyle=[1,1,1,1],L.curSpecularColor=L._cachedFillStyle=[0,0,0,0],L.curEmissiveColor=L._cachedFillStyle=[0,0,0,0],L.curStrokeColor=L._cachedStrokeStyle=[0,0,0,1],L.curBlendMode=d.BLEND,L._cachedBlendMode=void 0,L.webglVersion===d.WEBGL2?L.blendExt=L.GL:L.blendExt=L.GL.getExtension("EXT_blend_minmax"),L._isBlending=!1,L._hasSetAmbient=!1,L._useSpecularMaterial=!1,L._useEmissiveMaterial=!1,L._useNormalMaterial=!1,L._useShininess=1,L._useLineColor=!1,L._useVertexColor=!1,L.registerEnabled=[],L._tint=[255,255,255,255],L.constantAttenuation=1,L.linearAttenuation=0,L.quadraticAttenuation=0,L.uMVMatrix=new l.default.Matrix,L.uPMatrix=new l.default.Matrix,L.uNMatrix=new l.default.Matrix("mat3"),L._currentNormal=new l.default.Vector(0,0,1),L._curCamera=new l.default.Camera(_(L)),L._curCamera._computeCameraDefaultSettings(),L._curCamera._setDefaultCamera(),L.prevTouches=[],L.zoomVelocity=0,L.rotateVelocity=new l.default.Vector(0,0),L.moveVelocity=new l.default.Vector(0,0),L.executeZoom=!1,L.executeRotateAndMove=!1,L._defaultLightShader=void 0,L._defaultImmediateModeShader=void 0,L._defaultNormalShader=void 0,L._defaultColorShader=void 0,L._defaultPointShader=void 0,L.userFillShader=void 0,L.userStrokeShader=void 0,L.userPointShader=void 0,L.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",_(L),L._flatten),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",_(L),L._flatten),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",_(L),L._flatten),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",_(L),L._flatten),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",_(L))],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",_(L),L._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",_(L),L._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",_(L)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",_(L)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",_(L),L._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",_(L),L._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",_(L),L._flatten)]}},L.immediateMode={geometry:new l.default.Geometry,shapeMode:d.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",_(L),L._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",_(L),L._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",_(L)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",_(L)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",_(L),L._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",_(L),L._flatten),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",_(L),L._flatten),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",_(L),L._flatten),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",_(L),L._flatten),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",_(L))],point:L.GL.createBuffer()}},L.pointSize=5,L.curStrokeWeight=1,L.curStrokeCap=d.ROUND,L.curStrokeJoin=d.ROUND,L.textures=new Map,L.framebuffers=new Set,L.textureMode=d.IMAGE,L.textureWrapX=d.CLAMP,L.textureWrapY=d.CLAMP,L._tex=null,L._curveTightness=6,L._lookUpTableBezier=[],L._lookUpTableQuadratic=[],L._lutBezierDetail=0,L._lutQuadraticDetail=0,L.isProcessingVertices=!1,L._tessy=L._initTessy(),L.fontInfos={},L._curShader=void 0,L;throw new TypeError("Cannot call a class as a function")}return F=W,(B=[{key:"_setAttributeDefaults",value:function(L){var V={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};L._glAttributes===null?L._glAttributes=V:L._glAttributes=Object.assign(V,L._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?d.WEBGL2:d.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var L=this.drawingContext;L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.viewport(0,0,L.drawingBufferWidth,L.drawingBufferHeight),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(L,V){var Y,Z=this.width,J=this.height,ne=this.canvas.id,se=this._pInst instanceof l.default.Graphics;se?((Y=this._pInst).canvas.parentNode.removeChild(Y.canvas),Y.canvas=document.createElement("canvas"),(Y._pInst._userNode||document.body).appendChild(Y.canvas),l.default.Element.call(Y,Y.canvas,Y._pInst),Y.width=Z,Y.height=J):((Y=this.canvas)&&Y.parentNode.removeChild(Y),(Y=document.createElement("canvas")).id=ne,(this._pInst._userNode||document.body).appendChild(Y),this._pInst.canvas=Y,this.canvas=Y),ne=new l.default.RendererGL(this._pInst.canvas,this._pInst,!se),this._pInst._setProperty("_renderer",ne),ne.resize(Z,J),ne._applyDefaults(),se||this._pInst._elements.push(ne),typeof V=="function"&&setTimeout(function(){V.apply(window._renderer,L)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"background",value:function(){var L=(Z=(Z=this._pInst).color.apply(Z,arguments)).levels[0]/255,V=Z.levels[1]/255,Y=Z.levels[2]/255,Z=Z.levels[3]/255;this.clear(L,V,Y,Z)}},{key:"fill",value:function(L,V,Y,Z){var J=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=J._array,this.drawMode=d.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(L,V,Y,Z){var J=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=J._array}},{key:"strokeCap",value:function(L){this.curStrokeCap=L}},{key:"strokeJoin",value:function(L){this.curStrokeJoin=L}},{key:"filter",value:function(L){l.default._friendlyError("filter() does not work in WEBGL mode")}},{key:"blendMode",value:function(L){L===d.DARKEST||L===d.LIGHTEST||L===d.ADD||L===d.BLEND||L===d.SUBTRACT||L===d.SCREEN||L===d.EXCLUSION||L===d.REPLACE||L===d.MULTIPLY||L===d.REMOVE?this.curBlendMode=L:L!==d.BURN&&L!==d.OVERLAY&&L!==d.HARD_LIGHT&&L!==d.SOFT_LIGHT&&L!==d.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(L,V){this._isErasing||(this._applyBlendMode(d.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,L/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,V/255])}},{key:"noErase",value:function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))}},{key:"strokeWeight",value:function(L){this.curStrokeWeight!==L&&(this.pointSize=L,this.curStrokeWeight=L)}},{key:"_getPixel",value:function(L,V){var Y=this.GL;return $(Y,null,L,V,Y.RGBA,Y.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var L,V,Y=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(L=this._pInst._pixelDensity,V=this.GL,Y._setProperty("pixels",z(Y.pixels,V,null,0,0,this.width*L,this.height*L,V.RGBA,V.UNSIGNED_BYTE,this.height*L)))}},{key:"updatePixels",value:function(){var L=this._getTempFramebuffer();L.pixels=this._pixelsState.pixels,L.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(d.CENTER),this._pInst.image(L,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:d.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:d.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(L){return this.retainedMode.geometry[L]!==void 0}},{key:"resize",value:function(L,V){l.default.Renderer.prototype.resize.call(this,L,V),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var Y=((L=this._pixelsState).pixels!==void 0&&L._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);V=!1,L=void 0;try{for(var Z,J=this.framebuffers[Symbol.iterator]();!(Y=(Z=J.next()).done);Y=!0)Z.value._canvasSizeChanged()}catch(ne){V=!0,L=ne}finally{try{Y||J.return==null||J.return()}finally{if(V)throw L}}}},{key:"clear",value:function(){var L=(arguments.length<=0?void 0:arguments[0])||0,V=(arguments.length<=1?void 0:arguments[1])||0,Y=(arguments.length<=2?void 0:arguments[2])||0,Z=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(L*Z,V*Z,Y*Z,Z),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(L,V,Y,Z,J,ne){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([L,V,0,0,Y,Z,0,0,0,0,1,0,J,ne,0,1])}},{key:"translate",value:function(L,V,Y){return L instanceof l.default.Vector&&(Y=L.z,V=L.y,L=L.x),this.uMVMatrix.translate([L,V,Y]),this}},{key:"scale",value:function(L,V,Y){return this.uMVMatrix.scale(L,V,Y),this}},{key:"rotate",value:function(L,V){return V===void 0?this.rotateZ(L):(l.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(L){return this.rotate(L,1,0,0),this}},{key:"rotateY",value:function(L){return this.rotate(L,0,1,0),this}},{key:"rotateZ",value:function(L){return this.rotate(L,0,0,1),this}},{key:"push",value:function(){var L=l.default.Renderer.prototype.push.apply(this),V=L.properties;return V.uMVMatrix=this.uMVMatrix.copy(),V.uPMatrix=this.uPMatrix.copy(),V._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),V.ambientLightColors=this.ambientLightColors.slice(),V.specularColors=this.specularColors.slice(),V.directionalLightDirections=this.directionalLightDirections.slice(),V.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),V.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),V.pointLightPositions=this.pointLightPositions.slice(),V.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),V.pointLightSpecularColors=this.pointLightSpecularColors.slice(),V.spotLightPositions=this.spotLightPositions.slice(),V.spotLightDirections=this.spotLightDirections.slice(),V.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),V.spotLightSpecularColors=this.spotLightSpecularColors.slice(),V.spotLightAngle=this.spotLightAngle.slice(),V.spotLightConc=this.spotLightConc.slice(),V.userFillShader=this.userFillShader,V.userStrokeShader=this.userStrokeShader,V.userPointShader=this.userPointShader,V.pointSize=this.pointSize,V.curStrokeWeight=this.curStrokeWeight,V.curStrokeColor=this.curStrokeColor,V.curFillColor=this.curFillColor,V.curAmbientColor=this.curAmbientColor,V.curSpecularColor=this.curSpecularColor,V.curEmissiveColor=this.curEmissiveColor,V._hasSetAmbient=this._hasSetAmbient,V._useSpecularMaterial=this._useSpecularMaterial,V._useEmissiveMaterial=this._useEmissiveMaterial,V._useShininess=this._useShininess,V.constantAttenuation=this.constantAttenuation,V.linearAttenuation=this.linearAttenuation,V.quadraticAttenuation=this.quadraticAttenuation,V._enableLighting=this._enableLighting,V._useNormalMaterial=this._useNormalMaterial,V._tex=this._tex,V.drawMode=this.drawMode,V._currentNormal=this._currentNormal,V.curBlendMode=this.curBlendMode,L}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var L=this.userStrokeShader;return L&&L.isStrokeShader()?L:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var L=this.userFillShader;if(this._useNormalMaterial&&(!L||!L.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!L||!L.isLightShader())return this._getLightShader()}else if(this._tex){if(!L||!L.isTextureShader())return this._getLightShader()}else if(!L)return this._getImmediateModeShader();return L}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var L=this.userFillShader;if(this._enableLighting){if(!L||!L.isLightShader())return this._getLightShader()}else if(this._tex){if(!L||!L.isTextureShader())return this._getLightShader()}else if(!L)return this._getColorShader();return L}},{key:"_getImmediatePointShader",value:function(){var L=this.userPointShader;return L&&L.isPointShader()?L:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,D.phongVert,D.phongFrag):this._defaultLightShader=new l.default.Shader(this,D.lightVert,D.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,D.immediateVert,D.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,D.normalVert,D.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,D.normalVert,D.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,D.pointVert,D.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,D.lineVert,D.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===d.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+D.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+D.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(L,V){var Y="";return this.webglVersion===d.WEBGL2&&(Y+=`#version 300 es
#define WEBGL2
`),L==="vert"?Y+=`#define VERTEX_SHADER
`:L==="frag"&&(Y+=`#define FRAGMENT_SHADER
`),V&&(Y+="precision ".concat(V,` float;
`)),Y}},{key:"_getEmptyTexture",value:function(){var L;return this._emptyTexture||((L=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,L)),this._emptyTexture}},{key:"getTexture",value:function(L){L instanceof l.default.Framebuffer&&(L=L.color);var V=this.textures.get(L);return V||(V=new l.default.Texture(this,L),this.textures.set(L,V),V)}},{key:"createFramebuffer",value:function(L){return new l.default.Framebuffer(this,L)}},{key:"_setStrokeUniforms",value:function(L){L.bindShader(),L.setUniform("uUseLineColor",this._useLineColor),L.setUniform("uMaterialColor",this.curStrokeColor),L.setUniform("uStrokeWeight",this.curStrokeWeight),L.setUniform("uStrokeCap",j[this.curStrokeCap]),L.setUniform("uStrokeJoin",A[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(L){L.bindShader(),L.setUniform("uUseVertexColor",this._useVertexColor),L.setUniform("uMaterialColor",this.curFillColor),L.setUniform("isTexture",!!this._tex),this._tex&&L.setUniform("uSampler",this._tex),L.setUniform("uTint",this._tint),L.setUniform("uHasSetAmbient",this._hasSetAmbient),L.setUniform("uAmbientMatColor",this.curAmbientColor),L.setUniform("uSpecularMatColor",this.curSpecularColor),L.setUniform("uEmissiveMatColor",this.curEmissiveColor),L.setUniform("uSpecular",this._useSpecularMaterial),L.setUniform("uEmissive",this._useEmissiveMaterial),L.setUniform("uShininess",this._useShininess),L.setUniform("uUseLighting",this._enableLighting);var V=this.pointLightDiffuseColors.length/3;L.setUniform("uPointLightCount",V),L.setUniform("uPointLightLocation",this.pointLightPositions),L.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),L.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),V=this.directionalLightDiffuseColors.length/3,L.setUniform("uDirectionalLightCount",V),L.setUniform("uLightingDirection",this.directionalLightDirections),L.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),L.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),V=this.ambientLightColors.length/3,L.setUniform("uAmbientLightCount",V),L.setUniform("uAmbientColor",this.ambientLightColors),V=this.spotLightDiffuseColors.length/3,L.setUniform("uSpotLightCount",V),L.setUniform("uSpotLightAngle",this.spotLightAngle),L.setUniform("uSpotLightConc",this.spotLightConc),L.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),L.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),L.setUniform("uSpotLightLocation",this.spotLightPositions),L.setUniform("uSpotLightDirection",this.spotLightDirections),L.setUniform("uConstantAttenuation",this.constantAttenuation),L.setUniform("uLinearAttenuation",this.linearAttenuation),L.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),L.bindTextures()}},{key:"_setPointUniforms",value:function(L){L.bindShader(),L.setUniform("uMaterialColor",this.curStrokeColor),L.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(L,V,Y,Z,J){V=V||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(V,L),Y!==void 0&&(L=new(Z||Float32Array)(Y),this.GL.bufferData(V,L,J||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(L,V){return L.length===V.length&&L.every(function(Y,Z){return Y===V[Z]})}},{key:"_isTypedArray",value:function(L){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(V){return L instanceof V})}},{key:"_flatten",value:function(L){if(L.length===0)return[];var V;if(2e4<L.length){for(var Y=[],Z=L.slice(),J=Z.pop();Array.isArray(J)?Z.push.apply(Z,y(J)):Y.push(J),Z.length&&(J=Z.pop())!==void 0;);return Y.reverse(),Y}return(V=[]).concat.apply(V,y(L))}},{key:"_vToNArray",value:function(L){var V=[],Y=!0,Z=!1,J=void 0;try{for(var ne,se=L[Symbol.iterator]();!(Y=(ne=se.next()).done);Y=!0){var ie=ne.value;V.push(ie.x,ie.y,ie.z)}}catch(X){Z=!0,J=X}finally{try{Y||se.return==null||se.return()}finally{if(Z)throw J}}return V}},{key:"_bezierCoefficients",value:function(L){var V=L*L,Y=1-L,Z=Y*Y;return[Z*Y,3*Z*L,3*Y*V,V*L]}},{key:"_quadraticCoefficients",value:function(L){var V=1-L;return[V*V,2*V*L,L*L]}},{key:"_bezierToCatmull",value:function(L){return[L[1],L[1]+(L[2]-L[0])/this._curveTightness,L[2]-(L[3]-L[1])/this._curveTightness,L[2]]}},{key:"_initTessy",value:function(){var L=new x.default.GluTesselator;return L.gluTessCallback(x.default.gluEnum.GLU_TESS_VERTEX_DATA,function(V,Y){for(var Z=0;Z<V.length;Z++)Y.push(V[Z])}),L.gluTessCallback(x.default.gluEnum.GLU_TESS_BEGIN,function(V){V!==x.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(V))}),L.gluTessCallback(x.default.gluEnum.GLU_TESS_ERROR,function(V){console.log("error callback"),console.log("error number: ".concat(V))}),L.gluTessCallback(x.default.gluEnum.GLU_TESS_COMBINE,function(V,Y,Z){for(var J=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),ne=0;ne<Z.length;ne++)for(var se=0;se<J.length;se++)Z[ne]!==0&&Y[ne]&&(J[se]+=Y[ne][se]*Z[ne]);return J}),L.gluTessCallback(x.default.gluEnum.GLU_TESS_EDGE_FLAG,function(V){}),L}},{key:"_triangulate",value:function(L){var V=L[0]?L[0][2]:void 0,Y=!0,Z=!0,J=!1,ne=void 0;try{for(var se,ie=L[Symbol.iterator]();!(Z=(se=ie.next()).done);Z=!0)for(var X=se.value,Q=0;Q<X.length;Q+=l.default.RendererGL.prototype.tessyVertexSize)if(X[Q+2]!==V){Y=!1;break}}catch(ke){J=!0,ne=ke}finally{try{Z||ie.return==null||ie.return()}finally{if(J)throw ne}}Y?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0),J=[];var re=(this._tessy.gluTessBeginPolygon(J),!0),ce=(ne=!1,void 0);try{for(var he,fe=L[Symbol.iterator]();!(re=(he=fe.next()).done);re=!0){var oe=he.value;this._tessy.gluTessBeginContour();for(var me=0;me<oe.length;me+=l.default.RendererGL.prototype.tessyVertexSize){var we=oe.slice(me,me+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(we,we)}this._tessy.gluTessEndContour()}}catch(ke){ne=!0,ce=ke}finally{try{re||fe.return==null||fe.return()}finally{if(ne)throw ce}}return this._tessy.gluTessEndPolygon(),J}}])&&b(F.prototype,B),W}(l.default.Renderer),l.default.prototype._assert3d=function(B){if(!this._renderer.isP3D)throw new Error("".concat(B,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,r=l.default.RendererGL,f.default=r},{"../core/constants":262,"../core/main":273,"../core/p5.Renderer":276,"./p5.Camera":321,"./p5.Matrix":324,"./p5.Shader":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.map":168,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.float64-array":210,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int16-array":214,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,libtess:245,path:248}],329:[function(r,h,f){r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.index-of"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.array.slice"),r("core-js/modules/es.function.name"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(r=r("../core/main"))&&r.__esModule?r:{default:r};function l(d,x){for(var S=0;S<x.length;S++){var m=x[S];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}u.default.Shader=function(){function d(m,y,b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._renderer=m,this._vertSrc=y,this._fragSrc=b,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var x,S;return x=d,(S=[{key:"init",value:function(){if(this._glProgram===0){var m=this._renderer.GL;if(this._vertShader=m.createShader(m.VERTEX_SHADER),m.shaderSource(this._vertShader,this._vertSrc),m.compileShader(this._vertShader),!m.getShaderParameter(this._vertShader,m.COMPILE_STATUS))return u.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(m.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=m.createShader(m.FRAGMENT_SHADER),m.shaderSource(this._fragShader,this._fragSrc),m.compileShader(this._fragShader),!m.getShaderParameter(this._fragShader,m.COMPILE_STATUS))return u.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(m.getShaderInfoLog(this._fragShader))),null;this._glProgram=m.createProgram(),m.attachShader(this._glProgram,this._vertShader),m.attachShader(this._glProgram,this._fragShader),m.linkProgram(this._glProgram),m.getProgramParameter(this._glProgram,m.LINK_STATUS)||u.default._friendlyError("Snap! Error linking shader program: ".concat(m.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var m=this._renderer.GL,y=m.getProgramParameter(this._glProgram,m.ACTIVE_ATTRIBUTES),b=0;b<y;++b){var g=m.getActiveAttrib(this._glProgram,b),w=g.name,_=m.getAttribLocation(this._glProgram,w),C={};C.name=w,C.location=_,C.index=b,C.type=g.type,C.size=g.size,this.attributes[w]=C}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var m=this._renderer.GL,y=m.getProgramParameter(this._glProgram,m.ACTIVE_UNIFORMS),b=0,g=0;g<y;++g){var w=m.getActiveUniform(this._glProgram,g),_={},C=(_.location=m.getUniformLocation(this._glProgram,w.name),_.size=w.size,w.name);1<w.size&&(C=C.substring(0,C.indexOf("[0]"))),_.name=C,_.type=w.type,_._cachedData=void 0,_.type===m.SAMPLER_2D&&(_.samplerIndex=b,b++,this.samplers.push(_)),_.isArray=1<w.size||_.type===m.FLOAT_MAT3||_.type===m.FLOAT_MAT4||_.type===m.FLOAT_VEC2||_.type===m.FLOAT_VEC3||_.type===m.FLOAT_VEC4||_.type===m.INT_VEC2||_.type===m.INT_VEC4||_.type===m.INT_VEC3,this.uniforms[C]=_}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var m=this._renderer.GL,y=!0,b=!1,g=void 0;try{for(var w,_=this.samplers[Symbol.iterator]();!(y=(w=_.next()).done);y=!0){var C=w.value,k=C.texture;k===void 0&&(k=this._renderer._getEmptyTexture()),m.activeTexture(m.TEXTURE0+C.samplerIndex),k.bindTexture(),k.update(),m.uniform1i(C.location,C.samplerIndex)}}catch(E){b=!0,g=E}finally{try{y||_.return==null||_.return()}finally{if(b)throw g}}}},{key:"updateTextures",value:function(){var m=!0,y=!1,b=void 0;try{for(var g,w=this.samplers[Symbol.iterator]();!(m=(g=w.next()).done);m=!0){var _=g.value.texture;_&&_.update()}}catch(C){y=!0,b=C}finally{try{m||w.return==null||w.return()}finally{if(y)throw b}}}},{key:"unbindTextures",value:function(){var m=!0,y=!1,b=void 0;try{for(var g,w=this.samplers[Symbol.iterator]();!(m=(g=w.next()).done);m=!0){var _=g.value;this.setUniform(_.name,this._renderer._getEmptyTexture())}}catch(C){y=!0,b=C}finally{try{m||w.return==null||w.return()}finally{if(y)throw b}}}},{key:"_setMatrixUniforms",value:function(){var m=this._renderer._curCamera.cameraMatrix,y=this._renderer.uPMatrix,b=this._renderer.uMVMatrix,g=b.copy();g.mult(y),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",m.mat4),this.setUniform("uProjectionMatrix",y.mat4),this.setUniform("uModelViewMatrix",b.mat4),this.setUniform("uModelViewProjectionMatrix",g.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var m=this._renderer.GL;return this._renderer._curShader!==this&&(m.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(m,y){var b=this.uniforms[m];if(b){var g=this._renderer.GL;if(b.isArray){if(b._cachedData&&this._renderer._arraysEqual(b._cachedData,y))return;b._cachedData=y.slice(0)}else{if(b._cachedData&&b._cachedData===y)return;Array.isArray(y)?b._cachedData=y.slice(0):b._cachedData=y}var w=b.location;switch(this.useProgram(),b.type){case g.BOOL:y===!0?g.uniform1i(w,1):g.uniform1i(w,0);break;case g.INT:1<b.size?y.length&&g.uniform1iv(w,y):g.uniform1i(w,y);break;case g.FLOAT:1<b.size?y.length&&g.uniform1fv(w,y):g.uniform1f(w,y);break;case g.FLOAT_MAT3:g.uniformMatrix3fv(w,!1,y);break;case g.FLOAT_MAT4:g.uniformMatrix4fv(w,!1,y);break;case g.FLOAT_VEC2:1<b.size?y.length&&g.uniform2fv(w,y):g.uniform2f(w,y[0],y[1]);break;case g.FLOAT_VEC3:1<b.size?y.length&&g.uniform3fv(w,y):g.uniform3f(w,y[0],y[1],y[2]);break;case g.FLOAT_VEC4:1<b.size?y.length&&g.uniform4fv(w,y):g.uniform4f(w,y[0],y[1],y[2],y[3]);break;case g.INT_VEC2:1<b.size?y.length&&g.uniform2iv(w,y):g.uniform2i(w,y[0],y[1]);break;case g.INT_VEC3:1<b.size?y.length&&g.uniform3iv(w,y):g.uniform3i(w,y[0],y[1],y[2]);break;case g.INT_VEC4:1<b.size?y.length&&g.uniform4iv(w,y):g.uniform4i(w,y[0],y[1],y[2],y[3]);break;case g.SAMPLER_2D:g.activeTexture(g.TEXTURE0+b.samplerIndex),b.texture=y instanceof u.default.Texture?y:this._renderer.getTexture(y),g.uniform1i(w,b.samplerIndex),b.texture.src.gifProperties&&b.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(m,y,b,g,w,_){var C;return m&&(m=m.location)!==-1&&(C=this._renderer.GL,this._renderer.registerEnabled[m]||(C.enableVertexAttribArray(m),this._renderer.registerEnabled[m]=!0),this._renderer.GL.vertexAttribPointer(m,y,b||C.FLOAT,g||!1,w||0,_||0)),this}}])&&l(x.prototype,S),d}(),r=u.default.Shader,f.default=r},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],330:[function(r,h,f){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(b)}function l(b){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(g){return u(g)}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":u(g)})(b)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.typed-array.uint8-array"),r("core-js/modules/es.typed-array.copy-within"),r("core-js/modules/es.typed-array.every"),r("core-js/modules/es.typed-array.fill"),r("core-js/modules/es.typed-array.filter"),r("core-js/modules/es.typed-array.find"),r("core-js/modules/es.typed-array.find-index"),r("core-js/modules/es.typed-array.for-each"),r("core-js/modules/es.typed-array.includes"),r("core-js/modules/es.typed-array.index-of"),r("core-js/modules/es.typed-array.iterator"),r("core-js/modules/es.typed-array.join"),r("core-js/modules/es.typed-array.last-index-of"),r("core-js/modules/es.typed-array.map"),r("core-js/modules/es.typed-array.reduce"),r("core-js/modules/es.typed-array.reduce-right"),r("core-js/modules/es.typed-array.reverse"),r("core-js/modules/es.typed-array.set"),r("core-js/modules/es.typed-array.slice"),r("core-js/modules/es.typed-array.some"),r("core-js/modules/es.typed-array.sort"),r("core-js/modules/es.typed-array.subarray"),r("core-js/modules/es.typed-array.to-locale-string"),r("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.checkWebGLCapabilities=m,f.default=void 0;var d=(y=r("../core/main"))&&y.__esModule?y:{default:y},x=function(b){if(b&&b.__esModule)return b;if(b===null||l(b)!=="object"&&typeof b!="function")return{default:b};var g=function(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,E)}();if(g&&g.has(b))return g.get(b);var w,_={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in b){var k;Object.prototype.hasOwnProperty.call(b,w)&&((k=C?Object.getOwnPropertyDescriptor(b,w):null)&&(k.get||k.set)?Object.defineProperty(_,w,k):_[w]=b[w])}return _.default=b,g&&g.set(b,_),_}(r("../core/constants"));function S(b,g){for(var w=0;w<g.length;w++){var _=g[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}function m(b){var g=b.GL,w=(b=b.webglVersion)===x.WEBGL2?g.getExtension("EXT_color_buffer_float")&&g.getExtension("EXT_float_blend"):g.getExtension("OES_texture_float");return{float:w,floatLinear:w&&g.getExtension("OES_texture_float_linear"),halfFloat:b=b===x.WEBGL2?g.getExtension("EXT_color_buffer_float"):g.getExtension("OES_texture_half_float"),halfFloatLinear:b&&g.getExtension("OES_texture_half_float_linear")}}d.default.Texture=function(){function b(_,C,k){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._renderer=_;var E=this._renderer.GL;return k=k||{},this.src=C,this.glTex=void 0,this.glTarget=E.TEXTURE_2D,this.glFormat=k.format||E.RGBA,this.mipmaps=!1,this.glMinFilter=k.minFilter||E.LINEAR,this.glMagFilter=k.magFilter||E.LINEAR,this.glWrapS=k.wrapS||E.CLAMP_TO_EDGE,this.glWrapT=k.wrapT||E.CLAMP_TO_EDGE,this.glDataType=k.dataType||E.UNSIGNED_BYTE,k=m(_),this.glFormat!==E.HALF_FLOAT||k.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=E.FLOAT),this.glFormat!==E.HALF_FLOAT||this.glMinFilter!==E.LINEAR&&this.glMagFilter!==E.LINEAR||k.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===E.LINEAR&&(this.glMinFilter=E.NEAREST),this.glMagFilter===E.LINEAR&&(this.glMagFilter=E.NEAREST)),this.glFormat!==E.FLOAT||k.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=E.UNSIGNED_BYTE),this.glFormat!==E.FLOAT||this.glMinFilter!==E.LINEAR&&this.glMagFilter!==E.LINEAR||k.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===E.LINEAR&&(this.glMinFilter=E.NEAREST),this.glMagFilter===E.LINEAR&&(this.glMagFilter=E.NEAREST)),this.isSrcMediaElement=d.default.MediaElement!==void 0&&C instanceof d.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=d.default.Element!==void 0&&C instanceof d.default.Element&&!(C instanceof d.default.Graphics)&&!(C instanceof d.default.Renderer),this.isSrcP5Image=C instanceof d.default.Image,this.isSrcP5Graphics=C instanceof d.default.Graphics,this.isSrcP5Renderer=C instanceof d.default.Renderer,this.isImageData=typeof ImageData<"u"&&C instanceof ImageData,this.isFramebufferTexture=C instanceof d.default.FramebufferTexture,_=this._getTextureDataFromSource(),this.width=_.width,this.height=_.height,this.init(_),this}var g,w;return g=b,(w=[{key:"_getTextureDataFromSource",value:function(){var _;return this.isFramebufferTexture?_=this.src.rawTexture():this.isSrcP5Image?_=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?_=this.src.elt:this.isImageData&&(_=this.src),_}},{key:"init",value:function(_){var C,k=this._renderer.GL;this.isFramebufferTexture||(this.glTex=k.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,this.glMagFilter),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(C=new Uint8Array([1,1,1,1]),k.texImage2D(this.glTarget,0,k.RGBA,1,1,0,this.glFormat,this.glDataType,C)):k.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,_))}},{key:"update",value:function(){var _,C,k,E=this.src;return E.width!==0&&E.height!==0&&!this.isFramebufferTexture&&(_=this._getTextureDataFromSource(),C=!1,k=this._renderer.GL,_.width!==this.width||_.height!==this.height?(C=!0,this.width=_.width||E.width,this.height=_.height||E.height,this.isSrcP5Image?E.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&E.setModified(!0)):this.isSrcP5Image?E.isModified()&&E.setModified(!(C=!0)):this.isSrcMediaElement?E.isModified()?E.setModified(!(C=!0)):E.loadedmetadata&&this._videoPrevUpdateTime!==E.time()&&(this._videoPrevUpdateTime=E.time(),C=!0):this.isImageData?E._dirty&&(C=!(E._dirty=!1)):C=!0,C&&(this.bindTexture(),k.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,_)),C)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(_,C){var k=this._renderer.GL;_===x.NEAREST?this.glMinFilter=k.NEAREST:this.glMinFilter=k.LINEAR,C===x.NEAREST?this.glMagFilter=k.NEAREST:this.glMagFilter=k.LINEAR,this.bindTexture(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,this.glMinFilter),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"setWrapMode",value:function(_,C){function k(O){return(O&O-1)==0}var E=this._renderer.GL,j=(j=this._getTextureDataFromSource()).naturalWidth&&j.naturalHeight?(A=j.naturalWidth,j.naturalHeight):(A=this.width,this.height),A=k(A);j=k(j),_===x.REPEAT?this._renderer.webglVersion===x.WEBGL2||A&&j?this.glWrapS=E.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=E.CLAMP_TO_EDGE):_===x.MIRROR?this._renderer.webglVersion===x.WEBGL2||A&&j?this.glWrapS=E.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=E.CLAMP_TO_EDGE):this.glWrapS=E.CLAMP_TO_EDGE,C===x.REPEAT?this._renderer.webglVersion===x.WEBGL2||A&&j?this.glWrapT=E.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=E.CLAMP_TO_EDGE):C===x.MIRROR?this._renderer.webglVersion===x.WEBGL2||A&&j?this.glWrapT=E.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=E.CLAMP_TO_EDGE):this.glWrapT=E.CLAMP_TO_EDGE,this.bindTexture(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this.glWrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}])&&S(g.prototype,w),b}();var y=d.default.Texture;f.default=y},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],331:[function(r,h,f){function u(k){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(k)}function l(k){return(l=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(E){return u(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":u(E)})(k)}r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.get-own-property-descriptor"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/es.weak-map"),r("core-js/modules/web.dom-collections.iterator"),r("core-js/modules/es.symbol"),r("core-js/modules/es.symbol.description"),r("core-js/modules/es.symbol.iterator"),r("core-js/modules/es.array.iterator"),r("core-js/modules/es.object.to-string"),r("core-js/modules/es.regexp.exec"),r("core-js/modules/es.string.iterator"),r("core-js/modules/es.string.split"),r("core-js/modules/es.string.sub"),r("core-js/modules/web.dom-collections.iterator");var d,x=(d=r("../core/main"))&&d.__esModule?d:{default:d},S=function(k){if(k&&k.__esModule)return k;if(k===null||l(k)!=="object"&&typeof k!="function")return{default:k};var E=function(){var D;return typeof WeakMap!="function"?null:(D=new WeakMap,D)}();if(E&&E.has(k))return E.get(k);var j,A={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(j in k){var N;Object.prototype.hasOwnProperty.call(k,j)&&((N=O?Object.getOwnPropertyDescriptor(k,j):null)&&(N.get||N.set)?Object.defineProperty(A,j,N):A[j]=k[j])}return A.default=k,E&&E.set(k,A),A}(r("../core/constants"));function m(k,E){if(!(k instanceof E))throw new TypeError("Cannot call a class as a function")}function y(k,E){for(var j=0;j<E.length;j++){var A=E[j];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}function b(k,E,j){E&&y(k.prototype,E)}r("./p5.Shader"),r("./p5.RendererGL.Retained"),x.default.RendererGL.prototype._applyTextProperties=function(){},x.default.RendererGL.prototype.textWidth=function(k){return this._isOpenType()?this._textFont._textWidth(k,this._textSize):0};var g=function(){function k(E,j){m(this,k),this.width=E,this.height=j,this.infos=[]}return b(k,[{key:"findImage",value:function(E){var j,A,O=this.width*this.height;if(O<E)throw new Error("font is too complex to render in 3D");for(var N=this.infos.length-1;0<=N;--N){var D=this.infos[N];if(D.index+E<O){A=(j=D).imageData;break}}if(!j){try{A=new ImageData(this.width,this.height)}catch{var z=document.getElementsByTagName("canvas")[0],$=!z,B=(z||((z=document.createElement("canvas")).style.display="none",document.body.appendChild(z)),z.getContext("2d"));B&&(A=B.createImageData(this.width,this.height)),$&&document.body.removeChild(z)}this.infos.push(j={index:0,imageData:A})}return B=j.index,j.index+=E,A._dirty=!0,{imageData:A,index:B}}}]),k}();function w(k,E,j,A,O){var N=k.imageData.data;k=4*k.index++,N[k++]=E,N[k++]=j,N[k++]=A,N[+k]=O}var _=Math.sqrt(3),C=function(){function k(E){m(this,k),this.font=E,this.strokeImageInfos=new g(64,64),this.colDimImageInfos=new g(64,64),this.rowDimImageInfos=new g(64,64),this.colCellImageInfos=new g(64,64),this.rowCellImageInfos=new g(64,64),this.glyphInfos={}}return b(k,[{key:"getGlyphInfo",value:function(E){var j=this.glyphInfos[E.index];if(!j){var A=E.getBoundingBox(),O=A.x1,N=A.y1,D=A.x2-O,z=A.y2-N,$=E.path.commands;if(D==0||z==0||!$.length)return this.glyphInfos[E.index]={};for(var B=[],F=[],G=[],W=8;0<=W;--W)G.push([]);for(W=8;0<=W;--W)F.push([]);var L,V,Y,Z,J=function(){function xe(We,Ve,dt,Ct){m(this,xe),this.p0=We,this.c0=Ve,this.c1=dt,this.p1=Ct}return b(xe,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return x.default.Vector.sub(x.default.Vector.sub(this.p1,this.p0),x.default.Vector.mult(x.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(We){var Ve=x.default.Vector.lerp(this.p0,this.c0,We),dt=x.default.Vector.lerp(this.c0,this.c1,We),Ct=x.default.Vector.lerp(Ve,dt,We);return this.c1=x.default.Vector.lerp(this.c1,this.p1,We),this.c0=x.default.Vector.lerp(dt,this.c1,We),dt=x.default.Vector.lerp(Ct,this.c0,We),We=new xe(this.p0,Ve,Ct,dt),this.p0=dt,We}},{key:"splitInflections",value:function(){var We=x.default.Vector.sub(this.c0,this.p0),Ve=x.default.Vector.sub(x.default.Vector.sub(this.c1,this.c0),We),dt=x.default.Vector.sub(x.default.Vector.sub(x.default.Vector.sub(this.p1,this.c1),We),x.default.Vector.mult(Ve,2)),Ct=[],Ft=Ve.x*dt.y-Ve.y*dt.x;return Ft!==0&&0<=(We=(dt=We.x*dt.y-We.y*dt.x)*dt-4*Ft*(We.x*Ve.y-We.y*Ve.x))&&(Ft<0&&(Ft=-Ft,dt=-dt),We=(-dt+(Ve=Math.sqrt(We)))/(2*Ft),0<(dt=(-dt-Ve)/(2*Ft))&&dt<1&&(Ct.push(this.split(dt)),We=1-(1-We)/(1-dt)),0<We&&We<1&&Ct.push(this.split(We))),Ct.push(this),Ct}}]),xe}(),ne=!0,se=!1,ie=void 0;try{for(var X,Q=$[Symbol.iterator]();!(ne=(X=Q.next()).done);ne=!0){var re=X.value,ce=(re.x-O)/D,he=(re.y-N)/z;if(!Lt(L,V,ce,he)){switch(re.type){case"M":Y=ce,Z=he;break;case"L":pt(L,V,ce,he);break;case"Q":var fe=(re.x1-O)/D,oe=(re.y1-N)/z;st([L,ce,fe],[V,he,oe],{x:L,y:V,cx:fe,cy:oe});break;case"Z":Lt(L,V,Y,Z)?B.push({x:L,y:V}):(pt(L,V,Y,Z),B.push({x:Y,y:Z}));break;case"C":for(var me=function(xe,We,Ve,dt,Ct,Ft,kt,Tt){xe=new J(new x.default.Vector(xe,We),new x.default.Vector(Ve,dt),new x.default.Vector(Ct,Ft),new x.default.Vector(kt,Tt)).splitInflections();var ue=[],le=30/_,de=!0;We=!1,Ve=void 0;try{for(var be,Ae=xe[Symbol.iterator]();!(de=(be=Ae.next()).done);de=!0){for(var Ze=be.value,yt=[],ht=void 0;!(.125<=(ht=le/Ze.quadError()));){var De=Math.pow(ht,.3333333333333333),wt=Ze.split(De),At=Ze.split(1-De/(1-De));ue.push(wt),yt.push(Ze),Ze=At}ht<1&&ue.push(Ze.split(.5)),ue.push(Ze),Array.prototype.push.apply(ue,yt.reverse())}}catch(nn){We=!0,Ve=nn}finally{try{de||Ae.return==null||Ae.return()}finally{if(We)throw Ve}}return ue}(L,V,(re.x1-O)/D,(re.y1-N)/z,(re.x2-O)/D,(re.y2-N)/z,ce,he),we=0;we<me.length;we++){var ke=me[we].toQuadratic();st([ke.x,ke.x1,ke.cx],[ke.y,ke.y1,ke.cy],ke)}break;default:throw new Error("unknown command type: ".concat(re.type))}L=ce,V=he}}}catch(xe){se=!0,ie=xe}finally{try{ne||Q.return==null||Q.return()}finally{if(se)throw ie}}for(var ve=B.length,_e=this.strokeImageInfos.findImage(ve),Me=_e.index,He=0;He<ve;++He){var ze=B[He];w(_e,gt(ze.x),gt(ze.y),gt(ze.cx),gt(ze.cy))}(j=this.glyphInfos[E.index]={glyph:E,uGlyphRect:[A.x1,-A.y1,A.x2,-A.y2],strokeImageInfo:_e,strokes:B,colInfo:_t(G,this.colDimImageInfos,this.colCellImageInfos),rowInfo:_t(F,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[j.colInfo.dimOffset,j.rowInfo.dimOffset]}return j;function st(xe,We,Ve){var dt=B.length;function Ct(le,de,be){for(var Ae=le.length;0<Ae--;){var Ze=le[Ae];Ze<de&&(de=Ze),be<Ze&&(be=Ze)}return{min:de,max:be}}B.push(Ve),Ve=Ct(xe,1,0),xe=Math.max(Math.floor(9*Ve.min-.5),0);for(var Ft=Math.min(Math.ceil(9*Ve.max+.5),9),kt=xe;kt<Ft;++kt)G[kt].push(dt);Ve=Ct(We,1,0),xe=Math.max(Math.floor(9*Ve.min-.5),0);for(var Tt=Math.min(Math.ceil(9*Ve.max+.5),9),ue=xe;ue<Tt;++ue)F[ue].push(dt)}function gt(xe){return(xe=255*xe)<0?0:255<xe?255:xe}function pt(xe,We,Ve,dt){st([xe,Ve],[We,dt],{x:xe,y:We,cx:(xe+Ve)/2,cy:(We+dt)/2})}function Lt(xe,We,Ve,dt){return Math.abs(Ve-xe)<1e-5&&Math.abs(dt-We)<1e-5}function _t(xe,We,Ve){for(var dt=xe.length,Ct=We.findImage(dt),Ft=(We=Ct.index,0),kt=0;kt<dt;++kt)Ft+=xe[kt].length;for(var Tt=Ve.findImage(Ft),ue=0;ue<dt;++ue){var le=xe[ue],de=le.length,be=Tt.index;w(Ct,be>>7,127&be,de>>7,127&de);for(var Ae=0;Ae<de;++Ae){var Ze=le[Ae]+Me;w(Tt,Ze>>7,127&Ze,0,0)}}return{cellImageInfo:Tt,dimOffset:We,dimImageInfo:Ct}}}}]),k}();x.default.RendererGL.prototype._renderText=function(k,E,j,A,O){if(this._textFont&&typeof this._textFont!="string"){if(!(O<=A)&&this._doFill){if(this._isOpenType()){k.push(),O=this._doStroke;var N=this.drawMode,D=(this._doStroke=!1,this.drawMode=S.TEXTURE,this._textFont.font),z=(z=this._textFont._fontInfo)||(this._textFont._fontInfo=new C(D)),$=(j=this._textFont._handleAlignment(this,E,j,A),A=this._textSize/D.unitsPerEm,this.translate(j.x,j.y,0),this.scale(A,A,1),this.GL),B=(j=!this._defaultFontShader,this._getFontShader()),F=(B.init(),B.bindShader(),j&&(B.setUniform("uGridImageSize",[64,64]),B.setUniform("uCellsImageSize",[64,64]),B.setUniform("uStrokeImageSize",[64,64]),B.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),G=(F||((A=this._textGeom=new x.default.Geometry(1,1,function(){for(var fe=0;fe<=1;fe++)for(var oe=0;oe<=1;oe++)this.vertices.push(new x.default.Vector(oe,fe,0)),this.uvs.push(oe,fe)})).computeFaces().computeNormals(),F=this.createBuffers("glyph",A)),!0);j=!1,A=void 0;try{for(var W,L=this.retainedMode.buffers.text[Symbol.iterator]();!(G=(W=L.next()).done);G=!0)W.value._prepareBuffer(F,B)}catch(fe){j=!0,A=fe}finally{try{G||L.return==null||L.return()}finally{if(j)throw A}}this._bindBuffer(F.indexBuffer,$.ELEMENT_ARRAY_BUFFER),B.setUniform("uMaterialColor",this.curFillColor),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var V=0,Y=null,Z=D.stringToGlyphs(E),J=!0,ne=!1,se=void 0;try{for(var ie,X=Z[Symbol.iterator]();!(J=(ie=X.next()).done);J=!0){var Q,re,ce=ie.value,he=(Y&&(V+=D.getKerningValue(Y,ce)),z.getGlyphInfo(ce));he.uGlyphRect&&(Q=he.rowInfo,re=he.colInfo,B.setUniform("uSamplerStrokes",he.strokeImageInfo.imageData),B.setUniform("uSamplerRowStrokes",Q.cellImageInfo.imageData),B.setUniform("uSamplerRows",Q.dimImageInfo.imageData),B.setUniform("uSamplerColStrokes",re.cellImageInfo.imageData),B.setUniform("uSamplerCols",re.dimImageInfo.imageData),B.setUniform("uGridOffset",he.uGridOffset),B.setUniform("uGlyphRect",he.uGlyphRect),B.setUniform("uGlyphOffset",V),B.bindTextures(),$.drawElements($.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),V+=ce.advanceWidth,Y=ce}}catch(fe){ne=!0,se=fe}finally{try{J||X.return==null||X.return()}finally{if(ne)throw se}}}finally{B.unbindShader(),this._doStroke=O,this.drawMode=N,$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),k.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return k}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":262,"../core/main":273,"./p5.RendererGL.Retained":327,"./p5.Shader":329,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}]},{},[257])(257)})}).call(this,i(3))},function(o,a,i){i.r(a),i.d(a,"p5Events",function(){return y}),i.d(a,"default",function(){return b});var p=i(0),r=i.n(p),h=i(1),f=i.n(h);function u(g){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(g)}function l(g,w){for(var _=0;_<w.length;_++){var C=w[_];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,(k=C.key,E=void 0,E=function(j,A){if(u(j)!=="object"||j===null)return j;var O=j[Symbol.toPrimitive];if(O!==void 0){var N=O.call(j,A);if(u(N)!=="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(j)}(k,"string"),u(E)==="symbol"?E:String(E)),C)}var k,E}function d(g,w){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,C){return _.__proto__=C,_})(g,w)}function x(g){var w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var _,C=m(g);if(w){var k=m(this).constructor;_=Reflect.construct(C,arguments,k)}else _=C.apply(this,arguments);return S(this,_)}}function S(g,w){if(w&&(u(w)==="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}(g)}function m(g){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)})(g)}typeof window<"u"&&(window.p5=f.a);var y=["draw","windowResized","preload","mouseClicked","doubleClicked","mouseMoved","mousePressed","mouseWheel","mouseDragged","mouseReleased","keyPressed","keyReleased","keyTyped","touchStarted","touchMoved","touchEnded","deviceMoved","deviceTurned","deviceShaken"],b=function(g){(function(E,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(j&&j.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),j&&d(E,j)})(k,g);var w,_,C=x(k);function k(E){var j;return function(A,O){if(!(A instanceof O))throw new TypeError("Cannot call a class as a function")}(this,k),(j=C.call(this,E)).canvasParentRef=r.a.createRef(),j}return w=k,(_=[{key:"componentDidMount",value:function(){var E=this;this.sketch=new f.a(function(j){j.setup=function(){E.props.setup(j,E.canvasParentRef.current)},y.forEach(function(A){E.props[A]&&(j[A]=function(){for(var O,N=arguments.length,D=new Array(N),z=0;z<N;z++)D[z]=arguments[z];(O=E.props)[A].apply(O,[j].concat(D))})})})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.sketch.remove()}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.canvasParentRef,className:this.props.className||"react-p5","data-testid":"react-p5",style:this.props.style||{}})}}])&&l(w.prototype,_),Object.defineProperty(w,"prototype",{writable:!1}),k}(r.a.Component)},function(o,a){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}o.exports=i}]).default})}(bm)),bm.exports}var VM=zM();const GM=r1(VM),WM=()=>{const s=window.innerHeight/window.innerWidth;return s>1?1:s},oT=(s,t=1)=>{const n=WM();if(s){const o=s.offsetWidth*t,a=o*n;return{width:o,height:a}}},HM=(s,t=1)=>n=>{const{width:o,height:a}=oT(s.current,t);n.resizeCanvas(o,a)},qM=s=>{const t={};for(let n in s){t[n]={...s[n],reverseFlag:!1};const o="--reversed";t[n+o]={...s[n],reverseFlag:!0}}return t},nC=.5,rC=s=>s[Math.floor(Math.random()*s.length)];function XM({dayCard:s}){const t=lr.useRef(0),n=lr.useRef({card:null,cardpack:null}),o=lr.useRef({card:{},cardLeft:{},cardRight:{},cardpack:null,plane:null}),a=lr.useRef(null),i=lr.useRef(null),p=l=>{n.current.card=l.loadModel("/models/card.obj",!0),n.current.cardpack=l.loadModel("/models/cardpack.obj",!0);const d=rC(Object.values(hv)),x=rC(Object.values(hv));o.current.card={image:l.loadImage(s.path),item:s},o.current.cardLeft={image:l.loadImage(d.path),item:d},o.current.cardRight={image:l.loadImage(x.path),item:x},o.current.cardpack=l.loadImage("/models/cards-package-map.png"),o.current.plane=l.loadImage("/models/plane-white-marble.jpg")},r=(l,d)=>{i.current=d,l.pixelDensity(2);const{width:x,height:S}=oT(d,nC);l.createCanvas(x,S,l.WEBGL).parent(d),a.current=l.createCamera(),a.current.setPosition(0,400,600),a.current.lookAt(0,200,0)};let h=0;const f=l=>{l.background(0),l.scale(1.3),l.rotateY(t.current);let d=10,x=d*l.cos(h),S=d*l.sin(h);a.current.setPosition(x+20,250+S,400),a.current.lookAt(20,150,0),h+=.02,l.ambientLight(50),l.pointLight(255,255,255,50,-250,200),l.push(),l.specularMaterial(150),l.shininess(50),l.texture(o.current.plane),l.translate(0,100,0),l.noStroke();const{width:m,height:y}=o.current.plane;if(l.plane(m*1.25,y*1.25),l.pop(),n.current.cardpack&&o.current.cardpack&&(l.push(),l.specularMaterial(150),l.shininess(50),l.translate(0,0,25),l.noStroke(),l.scale(1,-1,1),l.rotateY(-l.HALF_PI),l.rotateX(-l.HALF_PI/2),l.texture(o.current.cardpack),l.model(n.current.cardpack),l.pop()),n.current.card&&o.current.card){const b=l.millis()%3e3-1500;l.ambientLight(100);const g=(_=100)=>{const C=50*BM(b,300);for(let k=1;k<20;k++)l.pointLight(C,C,C,b,0+100*k,_)},w=(_=!1)=>_?l.PI:0;l.push(),l.pointLight(255,255,255,50,-100,400),l.translate(-50,175,150),g(300),l.specularMaterial(125),l.shininess(5),l.noStroke(),l.rotateX(-l.PI/16+w(o.current.card.item.reverseFlag)),l.rotateY(l.HALF_PI),l.texture(o.current.card.image),l.model(n.current.card),l.pop(),l.push(),l.translate(-150,225,55),g(150),l.specularMaterial(125),l.shininess(5),l.noStroke(),l.rotateY(l.HALF_PI*1.3),l.rotateX(l.PI-l.HALF_PI/8+w(o.current.cardLeft.item.reverseFlag)),l.texture(o.current.cardLeft.image),l.model(n.current.card),l.pop(),l.push(),l.translate(150,225,5),g(),l.specularMaterial(125),l.shininess(5),l.noStroke(),l.rotateY(l.HALF_PI),l.rotateX(l.PI+l.HALF_PI/8+w(o.current.cardRight.item.reverseFlag)),l.texture(o.current.cardRight.image),l.model(n.current.card),l.pop()}},u=HM(i,nC);return Ke.jsx(GM,{preload:p,setup:r,draw:f,windowResized:u})}function YM(){return Ke.jsxs("div",{className:"psycho-test__notice",children:[Ke.jsx("p",{children:Ke.jsx("b",{children:"🎭 Проверка психотип по подчерку"})}),Ke.jsx("p",{children:Ke.jsx("b",{children:"📢 Фотография должна быть"})}),Ke.jsxs("ul",{children:[Ke.jsx("li",{children:"Тетрадный лист (не снимок тетради целиком), в клетку или линию"}),Ke.jsx("li",{children:"Фотография по центру c заполнением области"}),Ke.jsx("li",{children:"Лист заполнен хотя-бы на половину"}),Ke.jsx("li",{children:"Хорошее освещение, отсутствие размытия"})]})]})}const s1={Холерик:{traits:["Решительный","Скрупулёзный"],description:`
      Холерик — движущая сила коллектива, человек деловых решений и конкретных шагов.
      В его почерке проявляется железная логика: каждое слово ясно сформулировано,
      а линии твёрды и уверены, словно выкованная сталь.
      Такой человек ценит порядок и любит держать всё под контролем.
    `,thresholds:{strokeWidth:[2.5,5],letterHeight:[3.5,5],lineSpacing:[3,6]},variations:[{name:"Холерик-«пылающий»",when:({displacement:s,strokeWidthDetail:t})=>s<.7&&t>60,detail:`
          Ваши штрихи массивны, но руки почти не дрожат — внутренняя сила
          гармонирует с хладнокровием. Холерик-«пылающий» точно знает, чего хочет,
          и умело ведёт команду к цели, не позволяя эмоциям взять верх.
        `},{name:"Холерик-«взрывной»",when:({displacement:s,strokeWidthDetail:t})=>s>=.7&&t>=58,detail:`
          Резкие рывки пера и лёгкая дрожь в штрихах говорят о высоком уровне
          внутреннего напряжения. Холерик-«взрывной» склонен к быстрым решениям,
          но порой стоит научиться сдерживать спонтанность, чтобы действовать ещё
          более продуктивно.
        `},{name:"Холерик-«самообладание»",when:({displacement:s,strokeWidthDetail:t})=>s<.6&&t<56,detail:`
          Умеренный нажим и ровный ритм письма свидетельствуют о хорошем уровне
          самоконтроля. Холерик-«самообладание» умеет совмещать драйв с логикой,
          добиваясь успеха без излишнего эмоционального накала.
        `}]},Сангвиник:{traits:["Общительный","Оптимистичный"],description:`
      Сангвиник — душа компании и источник светлых идей. Его почерк словно
      лёгкая мелодия: гибкие линии с мягкими изгибами и чуть заметная
      вибрация, отражающая открытость миру и доверие к людям.
      Он легко находит общий язык с окружающими и заряжает их позитивом.
    `,thresholds:{strokeWidth:[.5,2],letterHeight:[2,4],lineSpacing:[6,9]},variations:[{name:"Сангвиник-«беззаботный»",when:({displacement:s})=>s<.6,detail:`
          Почерк ровный и размеренный, без дрожания и резких перепадов.
          Сангвиник-«беззаботный» наслаждается моментом, умеет сосредотачиваться
          и при этом не утрачивает лёгкости общения.
        `},{name:"Сангвиник-«возбуждённый»",when:({displacement:s})=>s>=.6,detail:`
          Линия слегка вибрирует — вы полны энтузиазма и иногда спешите
          выразить свои мысли. Сангвиник-«возбуждённый» готов к новым идеям,
          но стоит иногда притормозить и обдумать детали.
        `}]},Меланхолик:{traits:["Вдумчивый","Чувствительный"],description:`
      Меланхолик — исследователь глубин мысли. Письмо его плавно и
      вальяжно, буквы выверены, каждая линия – словно штрих художника,
      погружённого в своё творчество. Он тщательно анализирует и ценит тишину.
    `,thresholds:{strokeWidth:[.5,1.5],letterHeight:[.5,2.5],lineSpacing:[3,5]},variations:[{name:"Меланхолик-«тревожный»",when:({displacement:s})=>s>.8,detail:`
          Лёгкая дрожь пера и нерешительность в линиях говорят о скрытом волнении.
          Меланхолик-«тревожный» нередко сомневается, но именно это даёт ему
          глубину восприятия и умение предвидеть риски.
        `},{name:"Меланхолик-«глубокий»",when:({displacement:s,strokeWidthDetail:t})=>s<.7&&t<56,detail:`
          Плавный и размеренный штрих без колебаний. Меланхолик-«глубокий»
          сосредоточен и способен воспринимать нюансы, видя подлинную суть вещей.
        `}]},Флегматик:{traits:["Спокойный","Надёжный"],description:`
      Флегматик — каменная глыба устойчивости: его почерк тяжёл и ровен,
      как мерный плеск волн. Он не спешит, но его решения прочны,
      а поступки — продуманы до мелочей.
    `,thresholds:{strokeWidth:[1.5,3],letterHeight:[2.5,3.5],lineSpacing:[5,7]},variations:[{name:"Флегматик-«непоколебимый»",when:({displacement:s})=>s<.6,detail:`
          Почерк абсолютно ровный, без дрожи и рывков. Флегматик-«непоколебимый»
          гарантирует своим действиям устойчивость и последовательность.
        `},{name:"Флегматик-«задерживающий»",when:({strokeWidthDetail:s})=>s>62,detail:`
          Слишком тяжёлый штрих замедляет движение пера, и строки ложатся
          медленно. Флегматик-«задерживающий» — надёжный, но порой требует
          дополнительной мотивации для старта действий.
        `}]}},KM=([s,t])=>Math.hypot(s,t);function ZM(s){const t={};return Object.entries(s1).forEach(([n,{thresholds:o}])=>{let a=0;const{strokeWidth:i,letterHeight:p,lineSpacing:r}=o;s.strokeWidth>=i[0]&&s.strokeWidth<=i[1]&&a++,s.letterHeight>=p[0]&&s.letterHeight<=p[1]&&a++,s.lineSpacing>=r[0]&&s.lineSpacing<=r[1]&&a++,t[n]=a}),Object.keys(t).reduce((n,o)=>t[n]>=t[o]?n:o)}function QM(s,t){return s1[s].variations.find(o=>o.when(t))||null}function JM({results:s}){var l,d,x;const t=lr.useRef(null),n=((l=s.find(S=>S.modelName==="charWH"))==null?void 0:l.data)||[],o=((d=s.find(S=>S.modelName==="charXY"))==null?void 0:d.data)||[],a=((x=s.find(S=>S.modelName==="lineWH"))==null?void 0:x.data)||[],i={strokeWidth:n[0],letterHeight:n[1],displacement:KM(o),lineSpacing:a[1],strokeWidthDetail:n[0]*25},p=ZM(i),r=QM(p,i),h=s1[p],f=[];f.push(`Ваш психотип: ${p}`),f.push(h.description.trim()),f.push(`Ключевые черты: ${h.traits.join(", ")}`),r&&(f.push(`Подтип: ${r.name}`),f.push(r.detail.trim()));const u=f.join(`

`);return lr.useEffect(()=>{const S=new sT(t.current,{strings:[u],typeSpeed:15,backSpeed:0,showCursor:!1});return()=>S.destroy()},[u]),Ke.jsxs("div",{className:"psycho-solution",children:[Ke.jsx("h4",{className:"h-header h4-header psycho-solution__header",children:"🔍 Ваш анализ"}),Ke.jsx("pre",{className:"psycho-solution__text",children:Ke.jsx("span",{ref:t})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eO=1e-7,tO=1e-4;class aT{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class o1{refCount(t){return Ys("refCount")}incRef(t){return Ys("incRef")}timerAvailable(){return!0}time(t){return Ys("time")}read(t){return Ys("read")}readSync(t){return Ys("readSync")}readToGPU(t,n){return Ys("readToGPU")}numDataIds(){return Ys("numDataIds")}disposeData(t,n){return Ys("disposeData")}write(t,n,o){return Ys("write")}move(t,n,o,a,i){return Ys("move")}createTensorFromGPUData(t,n,o){return Ys("createTensorFromGPUData")}memory(){return Ys("memory")}floatPrecision(){return Ys("floatPrecision")}epsilon(){return this.floatPrecision()===32?eO:tO}dispose(){return Ys("dispose")}}function Ys(s){throw new Error(`'${s}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nO(s){let t=s.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,sc(s,t,n)}function Vl(s,t,n){return Math.max(s,Math.min(t,n))}function a1(s){return s%2===0?s:s+1}function sc(s,t,n){const o=s[t];s[t]=s[n],s[n]=o}function rO(s){let t=0;for(let n=0;n<s.length;n++)t+=s[n];return t}function ye(s,t){if(!s)throw new Error(typeof t=="string"?t:t())}function i1(s,t,n=""){ye($n(s,t),()=>n+` Shapes ${s} and ${t} must match`)}function l1(s){ye(s!=null,()=>"The input to the tensor constructor must be a non-null value.")}function at(s){if(s.length===0)return 1;let t=s[0];for(let n=1;n<s.length;n++)t*=s[n];return t}function $n(s,t){if(s===t)return!0;if(s==null||t==null||s.length!==t.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!==t[n])return!1;return!0}function hc(s){return s%1===0}function fv(s){const t=Math.ceil(Math.sqrt(s));return[t,Math.ceil(s/t)]}function ic(s,t){return t<=s.length?s:s+" ".repeat(t-s.length)}function sC(s,t=a=>0,n,o){return new Promise((a,i)=>{let p=0;const r=()=>{if(s()){a();return}p++;const h=t(p);if(n!=null&&p>=n){i();return}o!=null?o(r,h):setTimeout(r,h)};r()})}function iT(s,t){let n=1,o=-1;for(let i=0;i<s.length;++i)if(s[i]>=0)n*=s[i];else if(s[i]===-1){if(o!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${o} and dim ${i}`);o=i}else if(s[i]<0)throw Error(`Shapes can not be < 0. Found ${s[i]} at dim ${i}`);if(o===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${s}`);return s}if(n===0)throw Error(`Cannot infer the missing size in [${s}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const a=s.slice();return a[o]=t/n,a}function pn(s,t){const n=t.length;return s=s==null?t.map((o,a)=>a):[].concat(s),ye(s.every(o=>o>=-n&&o<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${s}`),ye(s.every(o=>hc(o)),()=>`All values in axis param must be integers but got axis ${s}`),s.map(o=>o<0?n+o:o)}function el(s,t){const n=[],o=[],a=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||a?null:pn(t,s).sort();let p=0;for(let r=0;r<s.length;++r){if(i!=null){if(i[p]===r&&s[r]!==1)throw new Error(`Can't squeeze axis ${r} since its dim '${s[r]}' is not 1`);(i[p]==null||i[p]>r)&&s[r]===1&&(n.push(s[r]),o.push(r)),i[p]<=r&&p++}s[r]!==1&&(n.push(s[r]),o.push(r))}return{newShape:n,keptDims:o}}function vs(s,t){return jr(s,t)}function jr(s,t){let n=null;if(s==null||s==="float32")n=new Float32Array(t);else if(s==="int32")n=new Int32Array(t);else if(s==="bool")n=new Uint8Array(t);else if(s==="string")n=new Array(t);else throw new Error(`Unknown data type ${s}`);return n}function sO(s,t){for(let n=0;n<s.length;n++){const o=s[n];if(isNaN(o)||!isFinite(o))throw Error(`A tensor of type ${t} being uploaded contains ${o}.`)}}function oO(s){return s==="bool"||s==="complex64"||s==="float32"||s==="int32"||s==="string"}function lT(s,t){return!(t==="complex64"||t==="float32"&&s!=="complex64"||t==="int32"&&s!=="float32"&&s!=="complex64"||t==="bool"&&s==="bool")}function jm(s){if(s==="float32"||s==="int32")return 4;if(s==="complex64")return 8;if(s==="bool")return 1;throw new Error(`Unknown dtype ${s}`)}function aO(s){if(s==null)return 0;let t=0;return s.forEach(n=>t+=n.length),t}function dh(s){return typeof s=="string"||s instanceof String}function iO(s){return typeof s=="boolean"}function pv(s){return typeof s=="number"}function Cc(s){return Array.isArray(s)?Cc(s[0]):s instanceof Float32Array?"float32":s instanceof Int32Array||s instanceof Uint8Array||s instanceof Uint8ClampedArray?"int32":pv(s)?"float32":dh(s)?"string":iO(s)?"bool":"float32"}function mv(s){return!!(s&&s.constructor&&s.call&&s.apply)}function gv(s,t){for(let n=t;n<s;++n)if(s%n===0)return n;return s}function Vt(s){const t=s.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=s[t-1];for(let o=t-3;o>=0;--o)n[o]=n[o+1]*s[o+1];return n}function uT(s,t,n,o=!1){const a=new Array;if(t.length===1){const i=t[0]*(o?2:1);for(let p=0;p<i;p++)a[p]=n[s+p]}else{const i=t[0],p=t.slice(1),r=p.reduce((h,f)=>h*f)*(o?2:1);for(let h=0;h<i;h++)a[h]=uT(s+h*r,p,n,o)}return a}function ea(s,t,n=!1){if(s.length===0)return t[0];const o=s.reduce((a,i)=>a*i)*(n?2:1);if(o===0)return[];if(o!==t.length)throw new Error(`[${s}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return uT(0,s,t,n)}function lO(s,t){if(Array.isArray(s))return s;if(t==="float32")return s instanceof Float32Array?s:new Float32Array(s);if(t==="int32")return s instanceof Int32Array?s:new Int32Array(s);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(s));throw new Error(`Unknown dtype ${t}`)}function u1(s,t){const n=xs(s,t);for(let o=0;o<n.length;o++)n[o]=1;return n}function xs(s,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(s);if(t==="int32")return new Int32Array(s);if(t==="bool")return new Uint8Array(s);throw new Error(`Unknown data type ${t}`)}function cT(s,t){const n=s.reduce((o,a)=>o*a,1);if(t==null||t==="float32")return ea(s,new Float32Array(n));if(t==="int32")return ea(s,new Int32Array(n));if(t==="bool")return ea(s,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function ii(s){s.forEach(t=>{ye(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${s}].`)})}function _a(s,t,n){if(t===0)return 0;if(t===1)return s[0];let o=s[s.length-1];for(let a=0;a<s.length-1;++a)o+=n[a]*s[a];return o}function kc(s,t,n){if(t===0)return[];if(t===1)return[s];const o=new Array(t);for(let a=0;a<o.length-1;++a)o[a]=Math.floor(s/n[a]),s-=o[a]*n[a];return o[o.length-1]=s,o}function c1(s){return s&&s.then&&typeof s.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oC="tfjsflags";class uO{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=cO,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,o){if(this.flagRegistry[t]={evaluationFn:n,setHook:o},this.urlFlags[t]!=null){const a=this.urlFlags[t];Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${a}.`),this.set(t,a)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(c1(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);oC in t&&t[oC].split(",").forEach(o=>{const[a,i]=o.split(":");this.urlFlags[a]=hO(a,i)})}}function cO(s){const t={};return s.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...o)=>(dO(t,o[0],o[1]),o.join("="))),t}function dO(s,t,n){s[decodeURIComponent(t)]=decodeURIComponent(n||"")}function hO(s,t){const n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function Qe(){return dT}let dT=null;function fO(s){dT=s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Fb;function hT(){if(Fb==null){let s;if(typeof window<"u")s=window;else if(typeof global<"u")s=global;else if(typeof process<"u")s=process;else if(typeof self<"u")s=self;else throw new Error("Could not find a global object");Fb=s}return Fb}function pO(){const s=hT();return s._tfGlobals==null&&(s._tfGlobals=new Map),s._tfGlobals}function d1(s,t){const n=pO();if(n.has(s))return n.get(s);{const o=t();return n.set(s,o),n.get(s)}}const ug="Abs",hh="Acos",fh="Acosh",Tc="Add",h1="AddN",f1="All",p1="Any",cg="ArgMax",dg="ArgMin",ph="Asin",mh="Asinh",gh="Atan",yh="Atanh",bh="Atan2",hg="AvgPool",m1="AvgPoolGrad",fg="AvgPool3D",g1="AvgPool3DGrad",pg="BatchMatMul",mg="BatchToSpaceND",y1="Bincount",b1="BitwiseAnd",mO="BroadcastTo",fT="BroadcastArgs",vh="Cast",xh="Ceil",wh="ClipByValue",v1="Complex",gg="ComplexAbs",yg="Concat",bg="Conv2D",x1="Conv2DBackpropFilter",vg="Conv2DBackpropInput",xg="Conv3D",w1="Conv3DBackpropFilterV2",S1="Conv3DBackpropInputV2",Sh="Cos",_h="Cosh",_1="Cumprod",wg="Cumsum",C1="CropAndResize",k1="DenseBincount",T1="DepthToSpace",Sg="DepthwiseConv2dNative",E1="DepthwiseConv2dNativeBackpropFilter",j1="DepthwiseConv2dNativeBackpropInput",pT="Diag",_g="Dilation2D",yv="Dilation2DBackpropInput",bv="Dilation2DBackpropFilter",gO="Draw",Ch="RealDiv",I1="Einsum",kh="Elu",A1="EluGrad",Th="Erf",Cg="Equal",Eh="Exp",kg="ExpandDims",jh="Expm1",R1="FFT",N1="Fill",D1="FlipLeftRight",Ih="Floor",Ah="FloorDiv",Tg="FusedBatchNorm",Eg="GatherV2",mT="GatherNd",jg="Greater",Rh="GreaterEqual",Nh="Identity",M1="IFFT",O1="Imag",Dh="IsFinite",Mh="IsInf",Oh="IsNan",Ig="LeakyRelu",Ag="Less",Rg="LessEqual",gT="LinSpace",$h="Log",Lh="Log1p",Ng="LogicalAnd",Dg="LogicalNot",Mg="LogicalOr",yO="LogSoftmax",Og="LRN",$1="LRNGrad",$g="Max",Fh="Maximum",Lg="MaxPool",L1="MaxPoolGrad",Fg="MaxPool3D",F1="MaxPool3DGrad",yT="MaxPoolWithArgmax",Pg="Mean",Bg="Min",Ph="Minimum",Ug="MirrorPad",Bh="Mod",bT="Multinomial",Uh="Multiply",zg="Neg",Vg="NotEqual",P1="NonMaxSuppressionV3",B1="NonMaxSuppressionV4",U1="NonMaxSuppressionV5",Gg="OnesLike",Wg="OneHot",Hg="Pack",qg="PadV2",zh="Pow",Xg="Prelu",Yg="Prod",vT="RaggedGather",xT="RaggedRange",wT="RaggedTensorToTensor",z1="Range",V1="Real",Vh="Reciprocal",Gh="Relu",Kg="Reshape",Zg="ResizeNearestNeighbor",G1="ResizeNearestNeighborGrad",Qg="ResizeBilinear",W1="ResizeBilinearGrad",Wh="Relu6",Jg="Reverse",Hh="Round",qh="Rsqrt",ST="ScatterNd",_T="TensorScatterUpdate",CT="SearchSorted",ey="Select",Xh="Selu",ty="Slice",Yh="Sin",Kh="Sinh",Zh="Sign",Qh="Sigmoid",Jh="Softplus",ef="Sqrt",ny="Sum",ry="SpaceToBatchND",sy="SplitV",oy="Softmax",kT="SparseFillEmptyRows",TT="SparseReshape",ET="SparseSegmentMean",jT="SparseSegmentSum",IT="SparseToDense",tf="SquaredDifference",H1="Square",q1="StaticRegexReplace",X1="StridedSlice",AT="StringNGrams",RT="StringSplit",NT="StringToHashBucketFast",nf="Sub",rf="Tan",sf="Tanh",of="Tile",Y1="TopK",K1="Transform",lc="Transpose",Z1="Unique",ay="Unpack",iy="UnsortedSegmentSum",ly="ZerosLike",af="Step",vv="FromPixels",Q1="RotateWithOffset",Im="_FusedMatMul",Am="FusedConv2D",DT="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uo(...s){Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(...s)}function bO(...s){Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.log(...s)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rm=d1("kernelRegistry",()=>new Map),xv=d1("gradRegistry",()=>new Map);function wv(s,t){const n=OT(s,t);return Rm.get(n)}function aC(s){return xv.get(s)}function iC(s){const t=Rm.entries(),n=[];for(;;){const{done:o,value:a}=t.next();if(o)break;const[i,p]=a,[r]=i.split("_");r===s&&n.push(p)}return n}function MT(s){const{kernelName:t,backendName:n}=s,o=OT(t,n);Rm.has(o)&&uo(`The kernel '${t}' for backend '${n}' is already registered`),Rm.set(o,s)}function vO(s){const{kernelName:t}=s;xv.has(t)&&Qe().getBool("DEBUG")&&uo(`Overriding the gradient for '${t}'`),xv.set(t,s)}function OT(s,t){return`${t}_${s}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $T(s){return s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array||s instanceof Uint8ClampedArray}var Pb,lC;function xO(){if(lC)return Pb;lC=1,Pb=t;var s=null;try{s=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(O,N,D){this.low=O|0,this.high=N|0,this.unsigned=!!D}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function n(O){return(O&&O.__isLong__)===!0}t.isLong=n;var o={},a={};function i(O,N){var D,z,$;return N?(O>>>=0,($=0<=O&&O<256)&&(z=a[O],z)?z:(D=r(O,(O|0)<0?-1:0,!0),$&&(a[O]=D),D)):(O|=0,($=-128<=O&&O<128)&&(z=o[O],z)?z:(D=r(O,O<0?-1:0,!1),$&&(o[O]=D),D))}t.fromInt=i;function p(O,N){if(isNaN(O))return N?g:b;if(N){if(O<0)return g;if(O>=S)return E}else{if(O<=-9223372036854776e3)return j;if(O+1>=m)return k}return O<0?p(-O,N).neg():r(O%x|0,O/x|0,N)}t.fromNumber=p;function r(O,N,D){return new t(O,N,D)}t.fromBits=r;var h=Math.pow;function f(O,N,D){if(O.length===0)throw Error("empty string");if(O==="NaN"||O==="Infinity"||O==="+Infinity"||O==="-Infinity")return b;if(typeof N=="number"?(D=N,N=!1):N=!!N,D=D||10,D<2||36<D)throw RangeError("radix");var z;if((z=O.indexOf("-"))>0)throw Error("interior hyphen");if(z===0)return f(O.substring(1),N,D).neg();for(var $=p(h(D,8)),B=b,F=0;F<O.length;F+=8){var G=Math.min(8,O.length-F),W=parseInt(O.substring(F,F+G),D);if(G<8){var L=p(h(D,G));B=B.mul(L).add(p(W))}else B=B.mul($),B=B.add(p(W))}return B.unsigned=N,B}t.fromString=f;function u(O,N){return typeof O=="number"?p(O,N):typeof O=="string"?f(O,N):r(O.low,O.high,typeof N=="boolean"?N:O.unsigned)}t.fromValue=u;var l=65536,d=1<<24,x=l*l,S=x*x,m=S/2,y=i(d),b=i(0);t.ZERO=b;var g=i(0,!0);t.UZERO=g;var w=i(1);t.ONE=w;var _=i(1,!0);t.UONE=_;var C=i(-1);t.NEG_ONE=C;var k=r(-1,2147483647,!1);t.MAX_VALUE=k;var E=r(-1,-1,!0);t.MAX_UNSIGNED_VALUE=E;var j=r(0,-2147483648,!1);t.MIN_VALUE=j;var A=t.prototype;return A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*x+(this.low>>>0):this.high*x+(this.low>>>0)},A.toString=function(N){if(N=N||10,N<2||36<N)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(j)){var D=p(N),z=this.div(D),$=z.mul(D).sub(this);return z.toString(N)+$.toInt().toString(N)}else return"-"+this.neg().toString(N);for(var B=p(h(N,6),this.unsigned),F=this,G="";;){var W=F.div(B),L=F.sub(W.mul(B)).toInt()>>>0,V=L.toString(N);if(F=W,F.isZero())return V+G;for(;V.length<6;)V="0"+V;G=""+V+G}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(j)?64:this.neg().getNumBitsAbs();for(var N=this.high!=0?this.high:this.low,D=31;D>0&&(N&1<<D)==0;D--);return this.high!=0?D+33:D+1},A.isZero=function(){return this.high===0&&this.low===0},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return(this.low&1)===1},A.isEven=function(){return(this.low&1)===0},A.equals=function(N){return n(N)||(N=u(N)),this.unsigned!==N.unsigned&&this.high>>>31===1&&N.high>>>31===1?!1:this.high===N.high&&this.low===N.low},A.eq=A.equals,A.notEquals=function(N){return!this.eq(N)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(N){return this.comp(N)<0},A.lt=A.lessThan,A.lessThanOrEqual=function(N){return this.comp(N)<=0},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(N){return this.comp(N)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(N){return this.comp(N)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(N){if(n(N)||(N=u(N)),this.eq(N))return 0;var D=this.isNegative(),z=N.isNegative();return D&&!z?-1:!D&&z?1:this.unsigned?N.high>>>0>this.high>>>0||N.high===this.high&&N.low>>>0>this.low>>>0?-1:1:this.sub(N).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(j)?j:this.not().add(w)},A.neg=A.negate,A.add=function(N){n(N)||(N=u(N));var D=this.high>>>16,z=this.high&65535,$=this.low>>>16,B=this.low&65535,F=N.high>>>16,G=N.high&65535,W=N.low>>>16,L=N.low&65535,V=0,Y=0,Z=0,J=0;return J+=B+L,Z+=J>>>16,J&=65535,Z+=$+W,Y+=Z>>>16,Z&=65535,Y+=z+G,V+=Y>>>16,Y&=65535,V+=D+F,V&=65535,r(Z<<16|J,V<<16|Y,this.unsigned)},A.subtract=function(N){return n(N)||(N=u(N)),this.add(N.neg())},A.sub=A.subtract,A.multiply=function(N){if(this.isZero())return b;if(n(N)||(N=u(N)),s){var D=s.mul(this.low,this.high,N.low,N.high);return r(D,s.get_high(),this.unsigned)}if(N.isZero())return b;if(this.eq(j))return N.isOdd()?j:b;if(N.eq(j))return this.isOdd()?j:b;if(this.isNegative())return N.isNegative()?this.neg().mul(N.neg()):this.neg().mul(N).neg();if(N.isNegative())return this.mul(N.neg()).neg();if(this.lt(y)&&N.lt(y))return p(this.toNumber()*N.toNumber(),this.unsigned);var z=this.high>>>16,$=this.high&65535,B=this.low>>>16,F=this.low&65535,G=N.high>>>16,W=N.high&65535,L=N.low>>>16,V=N.low&65535,Y=0,Z=0,J=0,ne=0;return ne+=F*V,J+=ne>>>16,ne&=65535,J+=B*V,Z+=J>>>16,J&=65535,J+=F*L,Z+=J>>>16,J&=65535,Z+=$*V,Y+=Z>>>16,Z&=65535,Z+=B*L,Y+=Z>>>16,Z&=65535,Z+=F*W,Y+=Z>>>16,Z&=65535,Y+=z*V+$*L+B*W+F*G,Y&=65535,r(J<<16|ne,Y<<16|Z,this.unsigned)},A.mul=A.multiply,A.divide=function(N){if(n(N)||(N=u(N)),N.isZero())throw Error("division by zero");if(s){if(!this.unsigned&&this.high===-2147483648&&N.low===-1&&N.high===-1)return this;var D=(this.unsigned?s.div_u:s.div_s)(this.low,this.high,N.low,N.high);return r(D,s.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?g:b;var z,$,B;if(this.unsigned){if(N.unsigned||(N=N.toUnsigned()),N.gt(this))return g;if(N.gt(this.shru(1)))return _;B=g}else{if(this.eq(j)){if(N.eq(w)||N.eq(C))return j;if(N.eq(j))return w;var F=this.shr(1);return z=F.div(N).shl(1),z.eq(b)?N.isNegative()?w:C:($=this.sub(N.mul(z)),B=z.add($.div(N)),B)}else if(N.eq(j))return this.unsigned?g:b;if(this.isNegative())return N.isNegative()?this.neg().div(N.neg()):this.neg().div(N).neg();if(N.isNegative())return this.div(N.neg()).neg();B=b}for($=this;$.gte(N);){z=Math.max(1,Math.floor($.toNumber()/N.toNumber()));for(var G=Math.ceil(Math.log(z)/Math.LN2),W=G<=48?1:h(2,G-48),L=p(z),V=L.mul(N);V.isNegative()||V.gt($);)z-=W,L=p(z,this.unsigned),V=L.mul(N);L.isZero()&&(L=w),B=B.add(L),$=$.sub(V)}return B},A.div=A.divide,A.modulo=function(N){if(n(N)||(N=u(N)),s){var D=(this.unsigned?s.rem_u:s.rem_s)(this.low,this.high,N.low,N.high);return r(D,s.get_high(),this.unsigned)}return this.sub(this.div(N).mul(N))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return r(~this.low,~this.high,this.unsigned)},A.and=function(N){return n(N)||(N=u(N)),r(this.low&N.low,this.high&N.high,this.unsigned)},A.or=function(N){return n(N)||(N=u(N)),r(this.low|N.low,this.high|N.high,this.unsigned)},A.xor=function(N){return n(N)||(N=u(N)),r(this.low^N.low,this.high^N.high,this.unsigned)},A.shiftLeft=function(N){return n(N)&&(N=N.toInt()),(N&=63)===0?this:N<32?r(this.low<<N,this.high<<N|this.low>>>32-N,this.unsigned):r(0,this.low<<N-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(N){return n(N)&&(N=N.toInt()),(N&=63)===0?this:N<32?r(this.low>>>N|this.high<<32-N,this.high>>N,this.unsigned):r(this.high>>N-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(N){if(n(N)&&(N=N.toInt()),N&=63,N===0)return this;var D=this.high;if(N<32){var z=this.low;return r(z>>>N|D<<32-N,D>>>N,this.unsigned)}else return N===32?r(D,0,this.unsigned):r(D>>>N-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},A.toBytes=function(N){return N?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var N=this.high,D=this.low;return[D&255,D>>>8&255,D>>>16&255,D>>>24,N&255,N>>>8&255,N>>>16&255,N>>>24]},A.toBytesBE=function(){var N=this.high,D=this.low;return[N>>>24,N>>>16&255,N>>>8&255,N&255,D>>>24,D>>>16&255,D>>>8&255,D&255]},t.fromBytes=function(N,D,z){return z?t.fromBytesLE(N,D):t.fromBytesBE(N,D)},t.fromBytesLE=function(N,D){return new t(N[0]|N[1]<<8|N[2]<<16|N[3]<<24,N[4]|N[5]<<8|N[6]<<16|N[7]<<24,D)},t.fromBytesBE=function(N,D){return new t(N[4]<<24|N[5]<<16|N[6]<<8|N[7],N[0]<<24|N[1]<<16|N[2]<<8|N[3],D)},Pb}var LT=xO();const FT=r1(LT),wO=bM({__proto__:null,default:FT},[LT]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ol=FT||wO;function uy(s){return Ol.fromString(s,!0,16)}const PT=uy("c3a5c85c97cb3127"),Dl=uy("b492b66fbe98f273"),Is=uy("9ae16a3b2f90404f");function Sv(s){return s.xor(s.shru(47))}function BT(s,t,n){const o=s.slice(t,t+n);return Ol.fromBytes(Array.from(o),!0,!0)}function rr(s,t){return BT(s,t,8)}function uC(s,t){return BT(s,t,4)}function ts(s,t){return t===0?s:s.shru(t).or(s.shl(64-t))}function Vi(s,t,n=uy("9ddfea08eb382d69")){let o=s.xor(t).mul(n);o=o.xor(o.shru(47));let a=t.xor(o).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function SO(s,t,n,o,a,i){a=a.add(s),i=ts(i.add(a).add(o),21);const p=a;return a=a.add(t),a=a.add(n),i=i.add(ts(a,44)),[a.add(o),i.add(p)]}function rm(s,t,n,o){return SO(rr(s,t),rr(s,t+8),rr(s,t+16),rr(s,t+24),n,o)}function _O(s,t=s.length){if(t>=8){const n=Is.add(t*2),o=rr(s,0).add(Is),a=rr(s,t-8),i=ts(a,37).mul(n).add(o),p=ts(o,25).add(a).mul(n);return Vi(i,p,n)}if(t>=4){const n=Is.add(t*2),o=uC(s,0);return Vi(o.shl(3).add(t),uC(s,t-4),n)}if(t>0){const n=s[0],o=s[t>>1],a=s[t-1],i=n+(o<<8),p=t+(a<<2);return Sv(Is.mul(i).xor(PT.mul(p))).mul(Is)}return Is}function CO(s,t=s.length){const n=Is.add(t*2),o=rr(s,0).mul(Dl),a=rr(s,8),i=rr(s,t-8).mul(n),p=rr(s,t-16).mul(Is);return Vi(ts(o.add(a),43).add(ts(i,30)).add(p),o.add(ts(a.add(Is),18)).add(i),n)}function kO(s,t=s.length){const n=Is.add(t*2),o=rr(s,0).mul(Is),a=rr(s,8),i=rr(s,t-8).mul(n),p=rr(s,t-16).mul(Is),r=ts(o.add(a),43).add(ts(i,30)).add(p),h=Vi(r,o.add(ts(a.add(Is),18)).add(i),n),f=rr(s,16).mul(n),u=rr(s,24),l=r.add(rr(s,t-32)).mul(n),d=h.add(rr(s,t-24)).mul(n);return Vi(ts(f.add(u),43).add(ts(l,30)).add(d),f.add(ts(u.add(o),18)).add(l),n)}function TO(s,t=s.length){const n=Ol.fromNumber(81,!0);if(t<=32)return t<=16?_O(s,t):CO(s,t);if(t<=64)return kO(s,t);let o=n,a=n.mul(Dl).add(113),i=Sv(a.mul(Is).add(113)).mul(Is),p=[Ol.UZERO,Ol.UZERO],r=[Ol.UZERO,Ol.UZERO];o=o.mul(Is).add(rr(s,0));let h=0;const f=(t-1>>6)*64,u=f+(t-1&63)-63;do o=ts(o.add(a).add(p[0]).add(rr(s,h+8)),37).mul(Dl),a=ts(a.add(p[1]).add(rr(s,h+48)),42).mul(Dl),o=o.xor(r[1]),a=a.add(p[0]).add(rr(s,h+40)),i=ts(i.add(r[0]),33).mul(Dl),p=rm(s,h,p[1].mul(Dl),o.add(r[0])),r=rm(s,h+32,i.add(r[1]),a.add(rr(s,h+16))),[i,o]=[o,i],h+=64;while(h!==f);const l=Dl.add(i.and(255).shl(1));return h=u,r[0]=r[0].add(t-1&63),p[0]=p[0].add(r[0]),r[0]=r[0].add(p[0]),o=ts(o.add(a).add(p[0]).add(rr(s,h+8)),37).mul(l),a=ts(a.add(p[1]).add(rr(s,h+48)),42).mul(l),o=o.xor(r[1].mul(9)),a=a.add(p[0].mul(9).add(rr(s,h+40))),i=ts(i.add(r[0]),33).mul(l),p=rm(s,h,p[1].mul(l),o.add(r[0])),r=rm(s,h+32,i.add(r[1]),a.add(rr(s,h+16))),[i,o]=[o,i],Vi(Vi(p[0],r[0],l).add(Sv(a).mul(PT)).add(i),Vi(p[1],r[1],l).add(o),l)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tl(s,t){return t==="string"?Gi(s):au([s],t)}function EO(s,t){return s instanceof Float32Array&&t==="float32"||s instanceof Int32Array&&t==="int32"||s instanceof Uint8Array&&t==="bool"}function au(s,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(s)&&(s=Gl(s)),Qe().getBool("DEBUG")&&sO(s,t),EO(s,t))return s;if(t==null||t==="float32"||t==="complex64")return new Float32Array(s);if(t==="int32")return new Int32Array(s);if(t==="bool"){const n=new Uint8Array(s.length);for(let o=0;o<n.length;++o)Math.round(s[o])!==0&&(n[o]=1);return n}else throw new Error(`Unknown data type ${t}`)}function $s(){return Qe().platform.now()}function Gi(s,t="utf-8"){return t=t||"utf-8",Qe().platform.encode(s,t)}function qi(s,t="utf-8"){return t=t||"utf-8",Qe().platform.decode(s,t)}function Mo(s){return Qe().platform.isTypedArray!=null?Qe().platform.isTypedArray(s):$T(s)}function Gl(s,t=[],n=!1){if(t==null&&(t=[]),typeof s=="boolean"||typeof s=="number"||typeof s=="string"||c1(s)||s==null||Mo(s)&&n)t.push(s);else if(Array.isArray(s)||Mo(s))for(let o=0;o<s.length;++o)Gl(s[o],t,n);else{let o=-1;for(const a of Object.keys(s))/^([1-9]+[0-9]*|0)$/.test(a)&&(o=Math.max(o,Number(a)));for(let a=0;a<=o;a++)Gl(s[a],t,n)}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jO{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new AO)}profileKernel(t,n,o){let a;const i=()=>{a=o()};let p;const r=$s();if(this.backendTimer.timerAvailable())p=this.backendTimer.time(i);else{i();for(const f of a)f.dataSync();p=Promise.resolve({kernelMs:$s()-r})}if(Qe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let f=0;f<a.length;f++){const u=a[f];u.data().then(l=>{IO(l,u.dtype,t)})}return{kernelName:t,outputs:a,inputs:n,timeMs:p.then(f=>f.kernelMs),extraInfo:p.then(f=>f.getExtraProfileInfo!=null?f.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:o,timeMs:a,inputs:i,extraInfo:p}=t;o.forEach(r=>{Promise.all([r.data(),a,p]).then(h=>{this.logger.logKernelProfile(n,r,h[0],h[1],i,h[2])})})}}function IO(s,t,n){if(t!=="float32")return!1;for(let o=0;o<s.length;o++){const a=s[o];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class AO{logKernelProfile(t,n,o,a,i,p){const r=typeof a=="number"?ic(`${a}ms`,9):a.error,h=ic(t,25),f=n.rank,u=n.size,l=ic(n.shape.toString(),14);let d="";for(const x in i){const S=i[x];if(S!=null){const m=S.shape||n.shape,y=m.length;d+=`${x}: ${y}D ${y>0?m:""} `}}console.log(`%c${h}	%c${r}	%c${f}D ${l}	%c${u}	%c${d}	%c${p}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RO(s,t,n){const o={},a={};for(let h=0;h<t.length;h++)o[t[h].id]=!0;for(let h=0;h<s.length;h++){const f=s[h],u=f.inputs;for(const l in u){const d=u[l];let x=!1;for(let S=0;S<t.length;S++)if(o[d.id]){f.outputs.forEach(m=>o[m.id]=!0),x=!0,a[f.id]=!0;break}if(x)break}}const i={};i[n.id]=!0;const p={};for(let h=s.length-1;h>=0;h--){const f=s[h],u=f.inputs;for(let l=0;l<f.outputs.length;l++)if(i[f.outputs[l].id]){for(const d in u)i[u[d].id]=!0,p[f.id]=!0;break}}const r=[];for(let h=0;h<s.length;h++){const f=s[h];if(a[f.id]&&p[f.id]){const u={};for(const d in f.inputs){const x=f.inputs[d];o[x.id]&&(u[d]=x)}const l=Object.assign({},f);l.inputs=u,l.outputs=f.outputs,r.push(l)}}return r}function NO(s,t,n,o){for(let a=t.length-1;a>=0;a--){const i=t[a],p=[];if(i.outputs.forEach(h=>{const f=s[h.id];f!=null?p.push(f):p.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const r=i.gradient(p);for(const h in i.inputs){if(!(h in r))throw new Error(`Cannot backprop through input ${h}. Available gradients found: ${Object.keys(r)}.`);const f=n(()=>r[h]());if(f.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${h} must have 'float32' dtype, but has '${f.dtype}'`);const u=i.inputs[h];if(!$n(f.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${h}' has shape '${f.shape}', which does not match the shape of the input '${u.shape}'`);if(s[u.id]==null)s[u.id]=f;else{const l=s[u.id];s[u.id]=o(l,f),l.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cC=20,Od=3,Bb=7;function DO(s,t,n,o){const a=Vt(t),i=MO(s,t,n,a),p=t.length,r=vm(s,t,n,a,i),h=["Tensor"];return o&&(h.push(`  dtype: ${n}`),h.push(`  rank: ${p}`),h.push(`  shape: [${t}]`),h.push("  values:")),h.push(r.map(f=>"    "+f).join(`
`)),h.join(`
`)}function MO(s,t,n,o){const a=at(t),i=o[o.length-1],p=new Array(i).fill(0),r=t.length,h=n==="complex64"?Bd(s):s;if(r>1)for(let f=0;f<a/i;f++){const u=f*i;for(let l=0;l<i;l++)p[l]=Math.max(p[l],Pd(h[u+l],0,n).length)}return p}function Pd(s,t,n){let o;return Array.isArray(s)?o=`${parseFloat(s[0].toFixed(Bb))} + ${parseFloat(s[1].toFixed(Bb))}j`:dh(s)?o=`'${s}'`:n==="bool"?o=UT(s):o=parseFloat(s.toFixed(Bb)).toString(),ic(o,t)}function UT(s){return s===0?"false":"true"}function vm(s,t,n,o,a,i=!0){const p=n==="complex64"?2:1,r=t[0],h=t.length;if(h===0){if(n==="complex64"){const m=Bd(s);return[Pd(m[0],0,n)]}return n==="bool"?[UT(s[0])]:[s[0].toString()]}if(h===1){if(r>cC){const y=Od*p;let b=Array.from(s.slice(0,y)),g=Array.from(s.slice((r-Od)*p,r*p));return n==="complex64"&&(b=Bd(b),g=Bd(g)),["["+b.map((w,_)=>Pd(w,a[_],n)).join(", ")+", ..., "+g.map((w,_)=>Pd(w,a[r-Od+_],n)).join(", ")+"]"]}return["["+(n==="complex64"?Bd(s):Array.from(s)).map((y,b)=>Pd(y,a[b],n)).join(", ")+"]"]}const f=t.slice(1),u=o.slice(1),l=o[0]*p,d=[];if(r>cC){for(let m=0;m<Od;m++){const y=m*l,b=y+l;d.push(...vm(s.slice(y,b),f,n,u,a,!1))}d.push("...");for(let m=r-Od;m<r;m++){const y=m*l,b=y+l;d.push(...vm(s.slice(y,b),f,n,u,a,m===r-1))}}else for(let m=0;m<r;m++){const y=m*l,b=y+l;d.push(...vm(s.slice(y,b),f,n,u,a,m===r-1))}const x=h===2?",":"";d[0]="["+(r>0?d[0]+x:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+x;let S=`,
`;for(let m=2;m<h;m++)S+=`
`;return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":S),d}function Bd(s){const t=[];for(let n=0;n<s.length;n+=2)t.push([s[n],s[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ds{constructor(t,n,o){if(this.dtype=n,this.shape=t.slice(),this.size=at(t),o!=null){const a=o.length;ye(a===this.size,()=>`Length of values '${a}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=o||jr(n,this.size),this.strides=Vt(t)}set(t,...n){n.length===0&&(n=[0]),ye(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const o=this.locToIndex(n);this.values[o]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const a of t){if(a<0||a>=this.shape[n]){const i=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let o=t[t.length-1];for(let a=0;a<t.length-1;++a)o+=this.strides[a]*t[a];return this.values[o]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let o=0;o<t.length-1;++o)n+=this.strides[o]*t[o];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(t/this.strides[o]),t-=n[o]*this.strides[o];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return Ko().makeTensor(this.values,this.shape,this.dtype)}}let Ko=null,oc=null;function OO(s){Ko=s}function $O(s){oc=s}class zr{constructor(t,n,o,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=at(t),this.strides=Vt(t),this.dataId=o,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return oc.buffer(this.shape,this.dtype,t)}bufferSync(){return oc.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return ea(this.shape,t,this.dtype==="complex64")}arraySync(){return ea(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=Ko().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(o=>qi(o))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),Ko().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=Ko().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>qi(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Ko().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ko().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return oc.print(this,t)}clone(){return this.throwIfDisposed(),oc.clone(this)}toString(t=!1){const n=this.dataSync();return DO(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),oc.cast(this,t)}variable(t=!0,n,o){return this.throwIfDisposed(),Ko().makeVariable(this,t,n,o)}}Object.defineProperty(zr,Symbol.hasInstance,{value:s=>!!s&&s.data!=null&&s.dataSync!=null&&s.throwIfDisposed!=null});function ot(){return d1("Tensor",()=>zr)}ot();class Nm extends zr{constructor(t,n,o,a){super(t.shape,t.dtype,t.dataId,a),this.trainable=n,this.name=o}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!$n(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Ko().disposeTensor(this),this.dataId=t.dataId,Ko().incRef(this,null)}dispose(){Ko().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Nm,Symbol.hasInstance,{value:s=>s instanceof zr&&s.assign!=null&&s.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var dC;(function(s){s.R0="R0",s.R1="R1",s.R2="R2",s.R3="R3",s.R4="R4",s.R5="R5",s.R6="R6"})(dC||(dC={}));var _v;(function(s){s.float32="float32",s.int32="int32",s.bool="int32",s.complex64="complex64"})(_v||(_v={}));var Cv;(function(s){s.float32="float32",s.int32="int32",s.bool="bool",s.complex64="complex64"})(Cv||(Cv={}));var kv;(function(s){s.float32="float32",s.int32="float32",s.bool="float32",s.complex64="complex64"})(kv||(kv={}));var Tv;(function(s){s.float32="complex64",s.int32="complex64",s.bool="complex64",s.complex64="complex64"})(Tv||(Tv={}));const LO={float32:kv,int32:_v,bool:Cv,complex64:Tv};function Qs(s,t){if(s==="string"||t==="string"){if(s==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${s} with ${t}`)}return LO[s][t]}function J1(s){return Qs(s,"int32")}function zT(s){return s!=null&&typeof s=="object"&&"texture"in s&&s.texture instanceof WebGLTexture}function VT(s){return typeof GPUBuffer<"u"&&s!=null&&typeof s=="object"&&"buffer"in s&&s.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ar(s,t){if(s.dtype===t.dtype)return[s,t];const n=Qs(s.dtype,t.dtype);return[s.cast(n),t.cast(n)]}function GT(s){const t=[];return WT(s,t,new Set),t}function WT(s,t,n){if(s==null)return;if(s instanceof zr){t.push(s);return}if(!FO(s))return;const o=s;for(const a in o){const i=o[a];n.has(i)||(n.add(i),WT(i,t,n))}}function FO(s){return Array.isArray(s)||typeof s=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ub(s){return s.kernelName!=null}class hC{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class fc{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new hC}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const o=t[n];if(await this.initializeBackend(o).success){await this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,o=1){return t in this.registryFactory?(uo(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:o},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:o}=this.initializeBackend(t);if(!(o?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new jO(this.backendInstance),!0}setupRegisteredKernels(){iC(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){iC(t).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const o=n.factory();if(o&&!(o instanceof o1)&&typeof o.then=="function"){const a=++this.pendingBackendInitId,i=o.then(p=>a<this.pendingBackendInitId?!1:(this.registry[t]=p,this.pendingBackendInit=null,!0)).catch(p=>(a<this.pendingBackendInitId||(this.pendingBackendInit=null,uo(`Initialization of backend ${t} failed`),uo(p.stack||p.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[t]=o,{success:!0,asyncInit:!1}}catch(o){return uo(`Initialization of backend ${t} failed`),uo(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const o=t[n],{success:a,asyncInit:i}=this.initializeBackend(o);if(i||a)return{name:o,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const o=this.state.tensorInfo.get(n),a=o.backend,i=this.readSync(n),p=a.refCount(n);a.disposeData(n,!0),o.backend=t,t.move(n,i,o.shape,o.dtype,p),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let o=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}let a;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(a),()=>(a=n(),a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a))}scopedRun(t,n,o){t();try{const a=o();return n(),a}catch(a){throw n(),a}}nextTensorId(){return fc.nextTensorId++}nextVariableId(){return fc.nextVariableId++}clone(t){const n=Le.runKernel(Nh,{x:t}),o={x:t},a=p=>({x:()=>{const r="float32",h={x:p},f={dtype:r};return Le.runKernel(vh,h,f)}}),i=[];return this.addTapeNode(this.state.activeScope.name,o,[n],a,i,{}),n}runKernel(t,n,o){if(this.backendName==null&&this.backend,!(wv(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,o){const a=this.backend.numDataIds();let i=0;o.forEach(h=>{i+=h.dtype==="complex64"?3:1});const p=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],r=a-n-i-p;if(r>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${r} data ids) after running '${t}'`)}runKernelFunc(t){let n,o=[];const a=this.isTapeOn(),i=this.state.numBytes,p=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let r;this.backendName==null&&this.backend;let h;const f=Ub(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Ub(t)){const{kernelName:S,inputs:m,attrs:y}=t;this.backendName==null&&this.backend;const b=wv(S,this.backendName);ye(b!=null,()=>`Cannot find registered kernel '${S}' for backend '${this.backendName}'`),r=()=>{const g=this.backend.numDataIds();h=b.kernelFunc({inputs:m,attrs:y,backend:this.backend});const w=Array.isArray(h)?h:[h];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(S,g,w);const _=w.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(a){const C=this.getTensorsForGradient(S,m,_);o=this.saveTensorsForBackwardMode(C)}return _}}else{const{forwardFunc:S}=t,m=y=>{a&&(o=y.map(b=>this.keep(this.clone(b))))};r=()=>{const y=this.backend.numDataIds();h=this.tidy(()=>S(this.backend,m));const b=Array.isArray(h)?h:[h];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,y,b),b}}const{inputs:u,attrs:l}=t,d=Ub(t)?null:t.backwardsFunc;let x;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=r():(x=this.profiler.profileKernel(f,u,()=>r()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(x),n=x.outputs)}),a&&this.addTapeNode(f,u,n,d,o,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:f,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-p,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(S=>u[S]!=null?u[S].shape:null),outputShapes:n.map(S=>S.shape),kernelTimeMs:x.timeMs,extraInfo:x.extraInfo}),Array.isArray(h)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(t,n,o){const a=aC(t);if(a!=null){const i=a.inputsToSave||[],p=a.outputsToSave||[];let r;a.saveAllInputs?(ye(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),r=Object.keys(n).map(f=>n[f])):r=i.map(f=>n[f]);const h=o.filter((f,u)=>p[u]);return r.concat(h)}return[]}makeTensor(t,n,o,a){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",a=a||this.backend;let i=t;o==="string"&&dh(t[0])&&(i=t.map(h=>Gi(h)));const p=a.write(i,n,o),r=new zr(n,o,p,this.nextTensorId());if(this.trackTensor(r,a),o==="string"){const h=this.state.tensorInfo.get(p),f=aO(i);this.state.numBytes+=f-h.bytes,h.bytes=f}return r}makeTensorFromDataId(t,n,o,a){o=o||"float32";const i={dataId:t,shape:n,dtype:o};return this.makeTensorFromTensorInfo(i,a)}makeTensorFromTensorInfo(t,n){const{dataId:o,shape:a,dtype:i}=t,p=new zr(a,i,o,this.nextTensorId());return this.trackTensor(p,n),p}makeVariable(t,n=!0,o,a){o=o||this.nextVariableId().toString(),a!=null&&a!==t.dtype&&(t=t.cast(a));const i=new Nm(t,n,o,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let o=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(o=t.size*jm(t.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:o})),t instanceof Nm||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const o=t.size*jm(t.dtype);this.state.numBytes-=o}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-o;for(const a of this.state.activeProfile.kernels)a.kernelTimeMs=await a.kernelTimeMs,a.extraInfo=await a.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,o,a,i,p){const r={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:o,saved:i},h=aC(t);h!=null&&(a=h.gradFunc),a!=null&&(r.gradient=f=>(f=f.map((u,l)=>{if(u==null){const d=o[l],x=xs(d.size,d.dtype);return this.makeTensor(x,d.shape,d.dtype)}return u}),a(f.length>1?f:f[0],i,p))),this.state.activeTape.push(r)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=GT(t),o=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const p=this.state.activeScope.track[i];!p.kept&&!o.has(p.id)&&p.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===a.id&&this.track(i)})}gradients(t,n,o,a=!1){if(ye(n.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));ye(i instanceof zr,()=>"The result y returned by f() must be a tensor.");const p=RO(this.state.activeTape,n,i);if(!a&&p.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const r={};r[i.id]=o??PO(i.shape),NO(r,p,f=>this.tidy(f),BO);const h=n.map(f=>r[f.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(f=>{for(const u of f.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:h}})}customGrad(t){return ye(mv(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{ye(n.every(r=>r instanceof zr),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o;const a={};n.forEach((r,h)=>{a[h]=r});const i=(r,h)=>(o=t(...n,h),ye(o.value instanceof zr,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),ye(mv(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),p=(r,h)=>{const f=o.gradFunc(r,h),u=Array.isArray(f)?f:[f];ye(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),ye(u.every(d=>d instanceof zr),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const l={};return u.forEach((d,x)=>{l[x]=()=>d}),l};return this.runKernelFunc({forwardFunc:i,backwardsFunc:p,inputs:a})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=$s(),o=await this.backend.time(t);return o.wallMs=$s()-n,o}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new hC;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}fc.nextTensorId=0;fc.nextVariableId=0;function PO(s){const t=u1(at(s),"float32");return Le.makeTensor(t,s,"float32")}function HT(){const s=hT();if(s._tfengine==null){const t=new uO(s);s._tfengine=new fc(t)}return fO(s._tfengine.ENV),OO(()=>s._tfengine),s._tfengine}const Le=HT();function BO(s,t){const n={a:s,b:t};return Le.runKernel(Tc,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UO(){return typeof navigator<"u"&&navigator!=null}function qT(s){if(s||UO()){if(s||(s=navigator),s.product==="ReactNative")return!0;const t=s.userAgent||s.vendor||(typeof window<"u"?window.opera:"");if(!t){const n=s;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function XT(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bs=Qe();Bs.registerFlag("DEBUG",()=>!1,s=>{s&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Bs.registerFlag("IS_BROWSER",()=>XT());Bs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Bs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Bs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Bs.registerFlag("PROD",()=>!1);Bs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Bs.getBool("DEBUG"));Bs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Bs.registerFlag("IS_TEST",()=>!1);Bs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Bs.getBool("DEBUG"));Bs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Bs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Bs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lf(s,t){let n=s;if(Mo(s))return t==="string"?[]:[s.length];if(zT(s)){const a=s.channels||"RGBA";return[s.height,s.width*a.length]}else if(VT(s))return[s.buffer.size/(t==null?4:jm(t))];if(!Array.isArray(s))return[];const o=[];for(;Array.isArray(n)||Mo(n)&&t!=="string";)o.push(n.length),n=n[0];return Array.isArray(s)&&Qe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&YT(s,o,[]),o}function YT(s,t,n){if(n=n||[],!Array.isArray(s)&&!Mo(s)){ye(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}ye(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${s.length} elements`),ye(s.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${s.length} elements`);const o=t.slice(1);for(let a=0;a<s.length;++a)YT(s[a],o,n.concat(a))}function fC(s,t,n,o){if(s!=="string_or_numeric"){if(s==null)throw new Error("Expected dtype cannot be null.");if(s!=="numeric"&&s!==t||s==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${o}' must be ${s} tensor, but got ${t} tensor`)}}function je(s,t,n,o="numeric"){if(s instanceof ot())return fC(o,s.dtype,t,n),s;let a=Cc(s);if(a!=="string"&&["bool","int32","float32"].indexOf(o)>=0&&(a=o),fC(o,a,t,n),s==null||!Mo(s)&&!Array.isArray(s)&&typeof s!="number"&&typeof s!="boolean"&&typeof s!="string"){const h=s==null?"null":s.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${h}'`)}const i=lf(s,a);!Mo(s)&&!Array.isArray(s)&&(s=[s]);const r=a!=="string"?au(s,a):Gl(s,[],!0);return Le.makeTensor(r,i,a)}function KT(s,t,n,o="numeric"){if(!Array.isArray(s))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return s.map((i,p)=>je(i,`${t}[${p}]`,n,o))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zO="__op";function Be(s){const t=Object.keys(s);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const o=s[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+zO;const a=(...i)=>{Le.startScope(n);try{const p=o(...i);return c1(p)&&console.error("Cannot return a Promise inside of tidy."),Le.endScope(p),p}catch(p){throw Le.endScope(null),p}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VO(s,t){const n=je(s,"real","complex"),o=je(t,"imag","complex");i1(n.shape,o.shape,`real and imag shapes, ${n.shape} and ${o.shape}, must match in call to tf.complex().`);const a={real:n,imag:o};return Le.runKernel(v1,a)}const Wl=Be({complex_:VO});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uf(s,t,n,o){if(o==null)o=Cc(s);else if(o==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(VT(s)||zT(s)){if(o!=="float32"&&o!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${o}.`);return Le.backend.createTensorFromGPUData(s,t||n,o)}if(!Mo(s)&&!Array.isArray(s)&&typeof s!="number"&&typeof s!="boolean"&&typeof s!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){ii(t);const a=at(t),i=at(n);ye(a===i,()=>`Based on the provided shape, [${t}], the tensor should have ${a} values but has ${i}`);for(let p=0;p<n.length;++p){const r=n[p],h=p===n.length-1?r!==at(t.slice(p)):!0;ye(n[p]===t[p]||!h,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Mo(s)&&!Array.isArray(s)&&(s=[s]),t=t||n,s=o!=="string"?au(s,o):Gl(s,[],!0),Le.makeTensor(s,t,o)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(s,t,n){const o=lf(s,n);return uf(s,t,o,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dm={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class nl{static join(t){return new nl(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(o=>Mo(o)?o.buffer:o),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let o=0;o<t.length;o++){const a=t[o];o!==t.length-1&&a.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+a.byteLength;this.shards.push({buffer:a,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);const o=this.findShardForByte(t);if(o===-1)throw new Error(`Could not find start shard for byte ${t}`);const a=n-t,i=new ArrayBuffer(a),p=new Uint8Array(i);let r=0;for(let h=o;h<this.shards.length;h++){const f=this.shards[h],l=t+r-f.start,d=r,S=Math.min(n,f.end)-f.start,m=new Uint8Array(f.buffer,l,S-l);if(p.set(m,d),r+=m.length,n<f.end)break}return i}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(a){return t<a.start?-1:t>=a.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const o=GO(this.shards,n);return o===-1?-1:(this.previousShardIndex=o,this.previousShardIndex)}}function GO(s,t){let n=0,o=s.length;for(;n<=o;){const a=Math.floor((o-n)/2)+n,i=t(s[a]);if(i===0)return a;i<0?o=a:n=a+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ya(){return Le}function pC(){return Le.memory()}function Xe(s,t){return Le.tidy(s,t)}function cn(s){GT(s).forEach(n=>n.dispose())}function Ca(s){return Le.keep(s)}function ZT(s,t,n=1){return Le.registerBackend(s,t,n)}function WO(){return Le.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pc=4;async function mC(s,t){const n=[],o=[],a=Array.isArray(s)?s.map(p=>p.name):Object.keys(s);for(let p=0;p<a.length;++p){const r=a[p],h=Array.isArray(s)?s[p].tensor:s[r];if(h.dtype!=="float32"&&h.dtype!=="int32"&&h.dtype!=="bool"&&h.dtype!=="string"&&h.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${r}': ${h.dtype}`);const f={name:r,shape:h.shape,dtype:h.dtype};if(h.dtype==="string"){const u=new Promise(async l=>{const d=await h.bytes(),x=d.reduce((y,b)=>y+b.length,0)+pc*d.length,S=new Uint8Array(x);let m=0;for(let y=0;y<d.length;y++){const b=d[y],g=new Uint8Array(new Uint32Array([b.length]).buffer);S.set(g,m),m+=pc,S.set(b,m),m+=b.length}l(S)});o.push(u)}else o.push(h.data());t!=null&&(f.group=t),n.push(f)}const i=await Promise.all(o);return{data:YO(i),specs:n}}function HO(s,t){const n=new nl(s),o={};let a=0;for(const i of t){const p=qO(i,(r,h)=>n.slice(a+r,a+h));o[i.name]=XO(i,n.slice(a,a+p)),a+=p}return o}function qO(s,t){const n=at(s.shape);let o;if("quantization"in s){const a=s.quantization;o=Dm[a.dtype]}else if(s.dtype==="string"){let a=0;for(let i=0;i<n;i++)a+=pc+new Uint32Array(t(a,a+pc))[0];return a}else o=Dm[s.dtype];return n*o}function XO(s,t){const n=s.name,o=s.dtype,a=s.shape,i=at(a);let p,r=0;if("quantization"in s){const h=s.quantization;if(h.dtype==="uint8"||h.dtype==="uint16"){if(!("min"in h&&"scale"in h))throw new Error(`Weight ${s.name} with quantization ${h.dtype} doesn't have corresponding metadata min and scale.`)}else if(h.dtype==="float16"){if(o!=="float32")throw new Error(`Weight ${s.name} is quantized with ${h.dtype} which only supports weights of type float32 not ${o}.`)}else throw new Error(`Weight ${s.name} has unknown quantization dtype ${h.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const f=Dm[h.dtype],u=h.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(o==="float32")if(h.dtype==="uint8"||h.dtype==="uint16"){p=new Float32Array(u.length);for(let l=0;l<u.length;l++){const d=u[l];p[l]=d*h.scale+h.min}}else if(h.dtype==="float16")p=o3()(u);else throw new Error(`Unsupported quantization type ${h.dtype} for weight type float32.`);else if(o==="int32"){if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error(`Unsupported quantization type ${h.dtype} for weight type int32.`);p=new Int32Array(u.length);for(let l=0;l<u.length;l++){const d=u[l];p[l]=Math.round(d*h.scale+h.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);r+=i*f}else if(o==="string"){const h=at(s.shape);p=[];for(let f=0;f<h;f++){const u=new Uint32Array(t.slice(r,r+pc))[0];r+=pc;const l=new Uint8Array(t.slice(r,r+u));p.push(l),r+=u}}else{const h=Dm[o];if(o==="float32")p=new Float32Array(t);else if(o==="int32")p=new Int32Array(t);else if(o==="bool")p=new Uint8Array(t);else if(o==="complex64"){p=new Float32Array(t);const f=new Float32Array(p.length/2),u=new Float32Array(p.length/2);for(let S=0;S<f.length;S++)f[S]=p[S*2],u[S]=p[S*2+1];const l=Hd(f,a,"float32"),d=Hd(u,a,"float32"),x=Wl(l,d);return l.dispose(),d.dispose(),x}else throw new Error(`Unsupported dtype in weight '${n}': ${o}`);r+=i*h}return Hd(p,a,o)}function YO(s){if(s===null)throw new Error(`Invalid input value: ${JSON.stringify(s)}`);let t=0;const n=[];s.forEach(i=>{if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const o=new Uint8Array(t);let a=0;return n.forEach(i=>{o.set(new Uint8Array(i.buffer),a),a+=i.byteLength}),o.buffer}const ex=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function gC(s){return ex?Buffer.byteLength(s,"utf8"):new Blob([s]).size}function KO(s){if(ex)return Buffer.from(s).toString("base64");const t=new Uint8Array(s);let n="";for(let o=0,a=t.length;o<a;o++)n+=String.fromCharCode(t[o]);return btoa(n)}function ZO(s){if(ex){const o=Buffer.from(s,"base64");return o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)}const t=atob(s),n=new Uint8Array(t.length);for(let o=0;o<t.length;++o)n.set([t.charCodeAt(o)],o);return n.buffer}function QO(s){return nl.join(s)}function JO(s,t){const n={modelTopology:s.modelTopology,format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy,weightsManifest:t};return s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(n.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig),n}function e3(s,t,n){const o={modelTopology:s.modelTopology,format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy};if(s.trainingConfig!=null&&(o.trainingConfig=s.trainingConfig),s.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");o.weightSpecs=t,o.weightData=n}return s.signature!=null&&(o.signature=s.signature),s.userDefinedMetadata!=null&&(o.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(o.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(o.initializerSignature=s.initializerSignature),o}async function t3(s,t){let n,o;return s.weightsManifest!=null&&([n,o]=await t(s.weightsManifest)),e3(s,n,o)}function tx(s){if(s.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:s.modelTopology==null?0:gC(JSON.stringify(s.modelTopology)),weightSpecsBytes:s.weightSpecs==null?0:gC(JSON.stringify(s.weightSpecs)),weightDataBytes:s.weightData==null?0:new nl(s.weightData).byteLength}}function yC(s){const t=[];for(const n of s)t.push(...n.weights);return t}function n3(){const s=n=>{let o=n<<13,a=0;for(;(o&8388608)===0;)a-=8388608,o<<=1;return o&=-8388609,a+=947912704,o|a},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=s(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function r3(){const s=new Uint32Array(64);s[0]=0,s[31]=1199570944,s[32]=2147483648,s[63]=3347054592;for(let t=1;t<31;t++)s[t]=t<<23;for(let t=33;t<63;t++)s[t]=2147483648+(t-32<<23);return s}function s3(){const s=new Uint32Array(64);for(let t=0;t<64;t++)s[t]=1024;return s[0]=s[32]=0,s}function o3(){const s=n3(),t=r3(),n=s3();return o=>{const a=new ArrayBuffer(4*o.length),i=new Uint32Array(a);for(let p=0;p<o.length;p++){const r=o[p],h=s[n[r>>10]+(r&1023)]+t[r>>10];i[p]=h}return new Float32Array(a)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class es{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return es.instance==null&&(es.instance=new es),es.instance}static registerSaveRouter(t){es.getInstance().saveRouters.push(t)}static registerLoadRouter(t){es.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return es.getHandlers(t,"save")}static getLoadHandlers(t,n){return es.getHandlers(t,"load",n)}static getHandlers(t,n,o){const a=[];return(n==="load"?es.getInstance().loadRouters:es.getInstance().saveRouters).forEach(p=>{const r=p(t,o);r!==null&&a.push(r)}),a}}const a3=s=>es.getSaveHandlers(s),i3=(s,t)=>es.getLoadHandlers(s,t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ev="tensorflowjs",jv=1,Fl="models_store",Bi="model_info_store";function QT(){if(!Qe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const s=typeof window>"u"?self:window,t=s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB||s.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Iv(s){const t=s.result;t.createObjectStore(Fl,{keyPath:"modelPath"}),t.createObjectStore(Bi,{keyPath:"modelPath"})}class Hl{constructor(t){if(this.indexedDB=QT(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((o,a)=>{const i=this.indexedDB.open(Ev,jv);i.onupgradeneeded=()=>Iv(i),i.onsuccess=()=>{const p=i.result;if(n==null){const r=p.transaction(Fl,"readonly"),f=r.objectStore(Fl).get(this.modelPath);f.onsuccess=()=>{if(f.result==null)return p.close(),a(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(f.result.modelArtifacts)},f.onerror=u=>(p.close(),a(f.error)),r.oncomplete=()=>p.close()}else{n.weightData=nl.join(n.weightData);const r=tx(n),h=p.transaction(Bi,"readwrite");let f=h.objectStore(Bi),u;try{u=f.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(d){return a(d)}let l;u.onsuccess=()=>{l=p.transaction(Fl,"readwrite");const d=l.objectStore(Fl);let x;try{x=d.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:r})}catch(S){return a(S)}x.onsuccess=()=>o({modelArtifactsInfo:r}),x.onerror=S=>{f=h.objectStore(Bi);const m=f.delete(this.modelPath);m.onsuccess=()=>(p.close(),a(x.error)),m.onerror=y=>(p.close(),a(x.error))}},u.onerror=d=>(p.close(),a(u.error)),h.oncomplete=()=>{l==null?p.close():l.oncomplete=()=>p.close()}}},i.onerror=p=>a(i.error)})}}Hl.URL_SCHEME="indexeddb://";const JT=s=>Qe().getBool("IS_BROWSER")&&!Array.isArray(s)&&s.startsWith(Hl.URL_SCHEME)?l3(s.slice(Hl.URL_SCHEME.length)):null;es.registerSaveRouter(JT);es.registerLoadRouter(JT);function l3(s){return new Hl(s)}function u3(s){return s.startsWith(Hl.URL_SCHEME)?s.slice(Hl.URL_SCHEME.length):s}class c3{constructor(){this.indexedDB=QT()}async listModels(){return new Promise((t,n)=>{const o=this.indexedDB.open(Ev,jv);o.onupgradeneeded=()=>Iv(o),o.onsuccess=()=>{const a=o.result,i=a.transaction(Bi,"readonly"),r=i.objectStore(Bi).getAll();r.onsuccess=()=>{const h={};for(const f of r.result)h[f.modelPath]=f.modelArtifactsInfo;t(h)},r.onerror=h=>(a.close(),n(r.error)),i.oncomplete=()=>a.close()},o.onerror=a=>n(o.error)})}async removeModel(t){return t=u3(t),new Promise((n,o)=>{const a=this.indexedDB.open(Ev,jv);a.onupgradeneeded=()=>Iv(a),a.onsuccess=()=>{const i=a.result,p=i.transaction(Bi,"readwrite"),r=p.objectStore(Bi),h=r.get(t);let f;h.onsuccess=()=>{if(h.result==null)return i.close(),o(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const u=r.delete(t),l=()=>{f=i.transaction(Fl,"readwrite");const x=f.objectStore(Fl).delete(t);x.onsuccess=()=>n(h.result.modelArtifactsInfo),x.onerror=S=>o(h.error)};u.onsuccess=l,u.onerror=d=>(l(),i.close(),o(h.error))}},h.onerror=u=>(i.close(),o(h.error)),p.oncomplete=()=>{f==null?i.close():f.oncomplete=()=>i.close()}},a.onerror=i=>o(a.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ja="/",ac="tensorflowjs_models",eE="info",d3="model_topology",h3="weight_specs",f3="weight_data",p3="model_metadata";function tE(s){return{info:[ac,s,eE].join(Ja),topology:[ac,s,d3].join(Ja),weightSpecs:[ac,s,h3].join(Ja),weightData:[ac,s,f3].join(Ja),modelMetadata:[ac,s,p3].join(Ja)}}function nE(s){for(const t of Object.values(s))window.localStorage.removeItem(t)}function m3(s){const t=s.split(Ja);if(t.length<3)throw new Error(`Invalid key format: ${s}`);return t.slice(1,t.length-1).join(Ja)}function g3(s){return s.startsWith(ql.URL_SCHEME)?s.slice(ql.URL_SCHEME.length):s}class ql{constructor(t){if(!Qe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=tE(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),o=JSON.stringify(t.weightSpecs),a=tx(t),i=nl.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,KO(i));const p={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(p)),{modelArtifactsInfo:a}}catch{throw nE(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=o;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(a==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=a;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const r=JSON.parse(i);n.format=r.format,n.generatedBy=r.generatedBy,n.convertedBy=r.convertedBy,r.signature!=null&&(n.signature=r.signature),r.userDefinedMetadata!=null&&(n.userDefinedMetadata=r.userDefinedMetadata),r.modelInitializer!=null&&(n.modelInitializer=r.modelInitializer),r.initializerSignature!=null&&(n.initializerSignature=r.initializerSignature),r.trainingConfig!=null&&(n.trainingConfig=r.trainingConfig)}const p=this.LS.getItem(this.keys.weightData);if(p==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=ZO(p),n}}ql.URL_SCHEME="localstorage://";const rE=s=>Qe().getBool("IS_BROWSER")&&!Array.isArray(s)&&s.startsWith(ql.URL_SCHEME)?y3(s.slice(ql.URL_SCHEME.length)):null;es.registerSaveRouter(rE);es.registerLoadRouter(rE);function y3(s){return new ql(s)}class b3{constructor(){ye(Qe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),ye(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=ac+Ja,o=Ja+eE;for(let a=0;a<this.LS.length;++a){const i=this.LS.key(a);if(i.startsWith(n)&&i.endsWith(o)){const p=m3(i);t[p]=JSON.parse(this.LS.getItem(i))}}return t}async removeModel(t){t=g3(t);const n=tE(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const o=JSON.parse(this.LS.getItem(n.info));return nE(n),o}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bC="://";class ba{constructor(){this.managers={}}static getInstance(){return ba.instance==null&&(ba.instance=new ba),ba.instance}static registerManager(t,n){ye(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(bC)&&(t=t.slice(0,t.indexOf(bC))),ye(t.length>0,()=>"scheme must not be an empty string.");const o=ba.getInstance();ye(o.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),o.managers[t]=n}static getManager(t){const n=ba.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(ba.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v3{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!Qe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",o=>{if(o.source===window&&o.data.name===this.messageName){o.stopPropagation();const a=this.functionRefs[o.data.index];a(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return $T(t)}}if(Qe().get("IS_BROWSER")){Qe().setPlatform("browser",new v3);try{ba.registerManager(ql.URL_SCHEME,new b3)}catch{}try{ba.registerManager(Hl.URL_SCHEME,new c3)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x3={importFetch:()=>require("node-fetch")};let zb;class w3{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return Qe().global.fetch!=null?Qe().global.fetch(t,n):(zb==null&&(zb=x3.importFetch()),zb(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}Qe().get("IS_NODE")&&!Qe().get("IS_BROWSER")&&Qe().setPlatform("node",new w3);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fn(s,t="float32",n){return t=t||"float32",ii(s),new ds(s,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3(s,t){const n=je(s,"x","cast");if(!oO(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const o={x:n},a={dtype:t};return Le.runKernel(vh,o,a)}const Ot=Be({cast_:S3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3(s){const n={x:je(s,"x","clone","string_or_numeric")};return Le.runKernel(Nh,n)}const Bl=Be({clone_:_3});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3(s,t=!1){console.log(s.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */HT();const k3={buffer:fn,cast:Ot,clone:Bl,print:C3};$O(k3);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3(s,t){let n=je(s,"a","add"),o=je(t,"b","add");[n,o]=Ar(n,o);const a={a:n,b:o};return Le.runKernel(Tc,a)}const St=Be({add_:T3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3(s,t){let n=je(s,"a","floorDiv"),o=je(t,"b","floorDiv");[n,o]=Ar(n,o);const a={a:n,b:o};return Le.runKernel(Ah,a)}const sE=Be({floorDiv_:E3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3(s,t){let n=je(s,"a","div"),o=je(t,"b","div");if([n,o]=Ar(n,o),n.dtype==="int32"&&o.dtype==="int32")return sE(n,o);const a={a:n,b:o},i={};return Le.runKernel(Ch,a,i)}const Ht=Be({div_:j3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3(s,t){let n=je(s,"a","mul"),o=je(t,"b","mul");[n,o]=Ar(n,o);const a={a:n,b:o};return Le.runKernel(Uh,a)}const $e=Be({mul_:I3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3(s){const t=je(s,"x","abs");if(t.dtype==="complex64"){const n={x:t};return Le.runKernel(gg,n)}else{const n={x:t};return Le.runKernel(ug,n)}}const js=Be({abs_:A3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3(s){const n={x:je(s,"x","acos")};return Le.runKernel(hh,n)}const N3=Be({acos_:R3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3(s){const n={x:je(s,"x","acosh")};return Le.runKernel(fh,n)}const M3=Be({acosh_:D3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3(s,t=null,n=!1){const a={x:je(s,"x","all","bool")},i={axis:t,keepDims:n};return Le.runKernel(f1,a,i)}const oE=Be({all_:O3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3(s,t=null,n=!1){const a={x:je(s,"x","any","bool")},i={axis:t,keepDims:n};return Le.runKernel(p1,a,i)}const Av=Be({any_:$3});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3(s,t=0){const o={x:je(s,"x","argMax")},a={axis:t};return Le.runKernel(cg,o,a)}const Yd=Be({argMax_:L3});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3(s,t=0){const o={x:je(s,"x","argMin")},a={axis:t};return Le.runKernel(dg,o,a)}const P3=Be({argMin_:F3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3(s){const n={x:je(s,"x","asin")};return Le.runKernel(ph,n)}const U3=Be({asin_:B3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3(s){const n={x:je(s,"x","asinh")};return Le.runKernel(mh,n)}const V3=Be({asinh_:z3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G3(s){const n={x:je(s,"x","atan")};return Le.runKernel(gh,n)}const W3=Be({atan_:G3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3(s,t){let n=je(s,"a","atan2"),o=je(t,"b","atan2");[n,o]=Ar(n,o);const a={a:n,b:o};return Le.runKernel(bh,a)}const q3=Be({atan2_:H3});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3(s){const n={x:je(s,"x","atanh")};return Le.runKernel(yh,n)}const Y3=Be({atanh_:X3});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cf(s,t,n,o,a="NHWC",i){const p=s[3],r=[...t,p],h=ui(a);return hs(s,r,n,i,o,null,null,h)}function $o(s,t,n,o,a,i,p="channelsLast"){const[r,h]=Kd(t);let f;if(p==="channelsLast")f=[r,h,s[3],s[3]];else if(p==="channelsFirst")f=[r,h,s[1],s[1]];else throw new Error(`Unknown dataFormat ${p}`);return hs(s,f,n,o,a,i,!1,p)}function li(s,t,n,o,a,i,p="NDHWC"){const[r,h,f]=Rv(t);let u,l;if(p==="NDHWC")l="channelsLast",u=[r,h,f,s[4],s[4]];else if(p==="NCDHW")l="channelsFirst",u=[r,h,f,s[1],s[1]];else throw new Error(`Unknown dataFormat ${p}`);return rl(s,u,n,o,a,!1,l,i)}function hs(s,t,n,o,a,i,p=!1,r="channelsLast"){let[h,f,u,l]=[-1,-1,-1,-1];if(r==="channelsLast")[h,f,u,l]=s;else if(r==="channelsFirst")[h,l,f,u]=s;else throw new Error(`Unknown dataFormat ${r}`);const[d,x,,S]=t,[m,y]=Kd(n),[b,g]=Kd(o),w=uc(d,b),_=uc(x,g),{padInfo:C,outHeight:k,outWidth:E}=Q3(a,f,u,m,y,w,_,i,r),j=p?S*l:S;let A;return r==="channelsFirst"?A=[h,j,k,E]:r==="channelsLast"&&(A=[h,k,E,j]),{batchSize:h,dataFormat:r,inHeight:f,inWidth:u,inChannels:l,outHeight:k,outWidth:E,outChannels:j,padInfo:C,strideHeight:m,strideWidth:y,filterHeight:d,filterWidth:x,effectiveFilterHeight:w,effectiveFilterWidth:_,dilationHeight:b,dilationWidth:g,inShape:s,outShape:A,filterShape:t}}function rl(s,t,n,o,a,i=!1,p="channelsLast",r){let[h,f,u,l,d]=[-1,-1,-1,-1,-1];if(p==="channelsLast")[h,f,u,l,d]=s;else if(p==="channelsFirst")[h,d,f,u,l]=s;else throw new Error(`Unknown dataFormat ${p}`);const[x,S,m,,y]=t,[b,g,w]=Rv(n),[_,C,k]=Rv(o),E=uc(x,_),j=uc(S,C),A=uc(m,k),{padInfo:O,outDepth:N,outHeight:D,outWidth:z}=J3(a,f,u,l,b,g,w,E,j,A,r),$=i?y*d:y;let B;return p==="channelsFirst"?B=[h,$,N,D,z]:p==="channelsLast"&&(B=[h,N,D,z,$]),{batchSize:h,dataFormat:p,inDepth:f,inHeight:u,inWidth:l,inChannels:d,outDepth:N,outHeight:D,outWidth:z,outChannels:$,padInfo:O,strideDepth:b,strideHeight:g,strideWidth:w,filterDepth:x,filterHeight:S,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:j,effectiveFilterWidth:A,dilationDepth:_,dilationHeight:C,dilationWidth:k,inShape:s,outShape:B,filterShape:t}}function K3(s,t,n,o,a){o==null&&(o=nx(s,t,n));const i=s[0],p=s[1],r=Zd((i-t+2*o)/n+1,a),h=Zd((p-t+2*o)/n+1,a);return[r,h]}function Z3(s,t,n,o,a,i){a==null&&(a=nx(s,t[0],o[0]));const p=[0,0,0,n];for(let r=0;r<3;r++)s[r]+2*a>=t[r]&&(p[r]=Zd((s[r]-t[r]+2*a)/o[r]+1,i));return p}function nx(s,t,n,o=1){const a=uc(t,o);return Math.floor((s[0]*(n-1)-n+a)/2)}function Kd(s){return typeof s=="number"?[s,s,s]:s.length===2?[s[0],s[1],1]:s}function Rv(s){return typeof s=="number"?[s,s,s]:s}function uc(s,t){return t<=1?s:s+(s-1)*(t-1)}function Q3(s,t,n,o,a,i,p,r,h){let f,u,l;if(typeof s=="number"){f={top:s,bottom:s,left:s,right:s,type:s===0?"VALID":"NUMBER"};const x=K3([t,n],i,o,s,r);u=x[0],l=x[1]}else if(s==="same"){u=Math.ceil(t/o),l=Math.ceil(n/a);const d=Math.max(0,(u-1)*o+i-t),x=Math.max(0,(l-1)*a+p-n),S=Math.floor(d/2),m=d-S,y=Math.floor(x/2),b=x-y;f={top:S,bottom:m,left:y,right:b,type:"SAME"}}else if(s==="valid")f={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/o),l=Math.ceil((n-p+1)/a);else if(typeof s=="object"){const d=h==="channelsLast"?s[1][0]:s[2][0],x=h==="channelsLast"?s[1][1]:s[2][1],S=h==="channelsLast"?s[2][0]:s[3][0],m=h==="channelsLast"?s[2][1]:s[3][1];f={top:d,bottom:x,left:S,right:m,type:d===0&&x===0&&S===0&&m===0?"VALID":"EXPLICIT"},u=Zd((t-i+d+x)/o+1,r),l=Zd((n-p+S+m)/a+1,r)}else throw Error(`Unknown padding parameter: ${s}`);return{padInfo:f,outHeight:u,outWidth:l}}function J3(s,t,n,o,a,i,p,r,h,f,u){let l,d,x,S;if(s==="valid"&&(s=0),typeof s=="number"){l={top:s,bottom:s,left:s,right:s,front:s,back:s,type:s===0?"VALID":"NUMBER"};const y=Z3([t,n,o,1],[r,h,f],1,[a,i,p],s,u);d=y[0],x=y[1],S=y[2]}else if(s==="same"){d=Math.ceil(t/a),x=Math.ceil(n/i),S=Math.ceil(o/p);const m=(d-1)*a+r-t,y=(x-1)*i+h-n,b=(S-1)*p+f-o,g=Math.floor(m/2),w=m-g,_=Math.floor(y/2),C=y-_,k=Math.floor(b/2),E=b-k;l={top:_,bottom:C,left:k,right:E,front:g,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${s}`);return{padInfo:l,outDepth:d,outHeight:x,outWidth:S}}function Zd(s,t){if(!t)return Math.trunc(s);switch(t){case"round":return Math.round(s);case"ceil":return Math.ceil(s);case"floor":return Math.floor(s);default:throw new Error(`Unknown roundingMode ${t}`)}}function Xl(s){const[t,n,o]=Kd(s);return t===1&&n===1&&o===1}function Ss(s,t){return Xl(s)||Xl(t)}function Yl(s){return Kd(s).every(t=>t>0)}function ui(s){if(s==="NHWC")return"channelsLast";if(s==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${s}`)}function zs(s,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${s}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")ye(hc(t),()=>`Error in ${s}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(o=>{o.forEach(a=>{ye(hc(a),()=>`Error in ${s}: pad must be an integer when using dimRoundingMode ${n} but got pad ${a}.`)})});else throw Error(`Error in ${s}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$(s,t){const o={x:je(s,"x","reshape","string_or_numeric")},a={shape:t};return Le.runKernel(Kg,o,a)}const Pe=Be({reshape_:e$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t$(s,t,n,o,a){const i=je(s,"x","avgPool","float32"),p=1;ye(Ss(n,p),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${p}'`);let r=i,h=!1;i.rank===3&&(h=!0,r=Pe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ye(r.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${r.rank}.`),zs("avgPool",o,a);const f={x:r},u={filterSize:t,strides:n,pad:o,dimRoundingMode:a};let l=Le.runKernel(hg,f,u);return l=Ot(l,i.dtype),h?Pe(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const rx=Be({avgPool_:t$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$(s,t,n,o,a,i="NDHWC"){const p=je(s,"x","avgPool3d","float32");let r=p,h=!1;p.rank===4&&(h=!0,r=Pe(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),ye(r.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${r.rank}.`),ye(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),ye(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),zs("avgPool3d",o,a);const f={x:r},u={filterSize:t,strides:n,pad:o,dimRoundingMode:a,dataFormat:i};let l=Le.runKernel(fg,f,u);return l=Ot(l,r.dtype),h?Pe(l,[l.shape[1],l.shape[2],l.shape[3],l.shape[4]]):l}const r$=Be({avgPool3d_:n$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$(s,t=0){ye(s.length>=1,()=>"Pass at least one tensor to concat");const n=KT(s,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Bl(n[0]);const o=n,a={axis:t};return Le.runKernel(yg,o,a)}const Ps=Be({concat_:s$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o$(s,t,n=!1,o=!1){let a=je(s,"a","matMul"),i=je(t,"b","matMul");[a,i]=Ar(a,i);const p={a,b:i},r={transposeA:n,transposeB:o};return Le.runKernel(pg,p,r)}const Mn=Be({matMul_:o$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a$(s){const n={x:je(s,"x","sigmoid","float32")};return Le.runKernel(Qh,n)}const Ec=Be({sigmoid_:a$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$(s,t,n){const o=je(s,"x","slice","string_or_numeric");if(o.rank===0)throw new Error("Slicing scalar is not possible");const a={x:o},i={begin:t,size:n};return Le.runKernel(ty,a,i)}const sr=Be({slice_:i$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$(s){const n={x:je(s,"x","tanh","float32")};return Le.runKernel(sf,n)}const cy=Be({tanh_:l$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u$(s,t,n){const o=je(s,"x","batchToSpaceND"),a=t.reduce((r,h)=>r*h);ye(o.rank>=1+t.length,()=>`input rank is ${o.rank} but should be > than blockShape.length ${t.length}`),ye(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),ye(o.shape[0]%a===0,()=>`input tensor batch is ${o.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${a}`);const i={x:o},p={blockShape:t,crops:n};return Le.runKernel(mg,i,p)}const sx=Be({batchToSpaceND_:u$});function c$(s){let t;return s.rank===0||s.rank===1?t=Pe(s,[1,1,1,s.size]):s.rank===2?t=Pe(s,[1,1,s.shape[0],s.shape[1]]):s.rank===3?t=Pe(s,[1,s.shape[0],s.shape[1],s.shape[2]]):t=s,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d$(s,t,n,o,a,i){i==null&&(i=.001);const p=je(s,"x","batchNorm"),r=je(t,"mean","batchNorm"),h=je(n,"variance","batchNorm");let f;a!=null&&(f=je(a,"scale","batchNorm"));let u;o!=null&&(u=je(o,"offset","batchNorm")),ye(r.rank===h.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ye(u==null||r.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ye(f==null||r.rank===f.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d={x:c$(p),scale:f,offset:u,mean:r,variance:h},x={varianceEpsilon:i},S=Le.runKernel(Tg,d,x);return Pe(S,p.shape)}const dy=Be({batchNorm_:d$});function h$(s,t,n,o,a,i){const p=je(s,"x","batchNorm"),r=je(t,"mean","batchNorm"),h=je(n,"variance","batchNorm");let f;a!=null&&(f=je(a,"scale","batchNorm"));let u;return o!=null&&(u=je(o,"offset","batchNorm")),ye(p.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${p.rank}.`),ye(r.rank===2||r.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${r.rank}.`),ye(h.rank===2||h.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${h.rank}.`),f!=null&&ye(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${f.rank}.`),u!=null&&ye(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),dy(p,r,h,u,f,i)}const f$=Be({batchNorm2d_:h$});function p$(s,t,n,o,a,i){const p=je(s,"x","batchNorm"),r=je(t,"mean","batchNorm"),h=je(n,"variance","batchNorm");let f;a!=null&&(f=je(a,"scale","batchNorm"));let u;return o!=null&&(u=je(o,"offset","batchNorm")),ye(p.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${p.rank}.`),ye(r.rank===3||r.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${r.rank}.`),ye(h.rank===3||h.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${h.rank}.`),f!=null&&ye(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${f.rank}.`),u!=null&&ye(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),dy(p,r,h,u,f,i)}const m$=Be({batchNorm3d_:p$});function g$(s,t,n,o,a,i){const p=je(s,"x","batchNorm"),r=je(t,"mean","batchNorm"),h=je(n,"variance","batchNorm");let f;a!=null&&(f=je(a,"scale","batchNorm"));let u;return o!=null&&(u=je(o,"offset","batchNorm")),ye(p.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${p.rank}.`),ye(r.rank===4||r.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${r.rank}.`),ye(h.rank===4||h.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${h.rank}.`),f!=null&&ye(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${f.rank}.`),u!=null&&ye(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),dy(p,r,h,u,f,i)}const y$=Be({batchNorm4d_:g$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$(s,t,n){const o=je(s,"x","bincount"),a=je(t,"weights","bincount");ye(o.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${o.dtype}`),ye(n>=0,()=>`size must be non-negative, but got ${n}.`),ye(a.size===o.size||a.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${o.shape}, weights shape: ${a.shape}.`);const i={x:o,weights:a},p={size:n};return Le.runKernel(y1,i,p)}const v$=Be({bincount_:b$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$(s,t){let n=je(s,"broadcastTo","x");const o=n.shape;if(ii(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const f=n.shape.slice();for(;f.length<t.length;)f.unshift(1);n=Pe(n,f)}const a=n.shape,i=Array.from(t);for(let f=t.length-1;f>=0;f--)if(a[f]===t[f])i[f]=1;else if(n.shape[f]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${t}].`);if(i.map((f,u)=>f>1?u:-1).filter(f=>f>=0).length===0)return Bl(n);const r={x:n},h={reps:i};return Le.runKernel(of,r,h)}const qd=Be({broadcastTo_:x$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w$(s){const n={x:je(s,"x","ceil","float32")};return Le.runKernel(xh,n)}const S$=Be({ceil_:w$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hy(s,t,n){ii(s),n=n||Cc(t);const o={shape:s,value:t,dtype:n};return Le.runKernel(N1,{},o)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$(s,t,n){const o=je(s,"x","clipByValue");if(ye(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return hy(o.shape,t,o.dtype);const a={x:o},i={clipValueMin:t,clipValueMax:n};return Le.runKernel(wh,a,i)}const fo=Be({clipByValue_:_$});function C$(s){return Ps(s,0)}const k$=Be({concat1d_:C$});function T$(s,t){return Ps(s,t)}const E$=Be({concat2d_:T$});function j$(s,t){return Ps(s,t)}const I$=Be({concat3d_:j$});function A$(s,t){return Ps(s,t)}const R$=Be({concat4d_:A$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$(s,t,n,o,a="NHWC",i=[1,1],p){const r=je(s,"x","conv2d","float32"),h=je(t,"filter","conv2d","float32");let f=r,u=!1;r.rank===3&&(u=!0,f=Pe(r,[1,r.shape[0],r.shape[1],r.shape[2]])),ye(f.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${f.rank}.`),ye(h.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${h.rank}.`),zs("conv2d",o,p);const l=a==="NHWC"?f.shape[3]:f.shape[1];ye(l===h.shape[2],()=>`Error in conv2d: depth of input (${l}) must match input depth for filter ${h.shape[2]}.`),ye(Ss(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),ye(Yl(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),ye(Yl(n),()=>"Error in conv2D: Strides should be larger than 0.");const d={x:f,filter:h},x={strides:n,pad:o,dataFormat:a,dilations:i,dimRoundingMode:p},S=Le.runKernel(bg,d,x);return u?Pe(S,[S.shape[1],S.shape[2],S.shape[3]]):S}const Kl=Be({conv2d_:N$});function D$(s,t,n,o,a="NWC",i=1,p){const r=je(s,"x","conv1d"),h=je(t,"filter","conv1d");let f=r,u=!1;r.rank===2&&(u=!0,f=Pe(r,[1,r.shape[0],r.shape[1]])),ye(f.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`),ye(h.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${h.rank}.`),zs("conv1d",o,p),ye(f.shape[2]===h.shape[1],()=>`Error in conv1d: depth of input (${f.shape[2]}) must match input depth for filter ${h.shape[1]}.`),ye(Ss(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),ye(Yl(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),ye(Yl(n),()=>"Error in conv1D: Stride should be larger than 0."),ye(a==="NWC",()=>`Error in conv1d: got dataFormat of ${a} but only NWC is currently supported.`);const l=Pe(h,[1,h.shape[0],h.shape[1],h.shape[2]]),d=Pe(f,[f.shape[0],1,f.shape[1],f.shape[2]]),y=Kl(d,l,[1,n],o,"NHWC",[1,i],p);return u?Pe(y,[y.shape[2],y.shape[3]]):Pe(y,[y.shape[0],y.shape[2],y.shape[3]])}const aE=Be({conv1d_:D$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$(s,t,n,o,a,i="NHWC",p){ye(s.length===t.rank,()=>`Length of inShape (${s.length}) and rank of dy (${t.rank}) must match`);let r=s,h=t,f=!1;t.rank===3&&(f=!0,h=Pe(t,[1,t.shape[0],t.shape[1],t.shape[2]]),r=[1,s[0],s[1],s[2]]),ye(r.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${r.length}.`),ye(h.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${h.rank}`),ye(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?r[3]:r[1],l=i==="NHWC"?h.shape[3]:h.shape[1];ye(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),ye(l===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${l}) must match output depth for filter ${n.shape[3]}.`),zs("conv2dDerInput",a,p);const d={dy:h,filter:n},x={strides:o,pad:a,dataFormat:i,dimRoundingMode:p,inputShape:r},S=Le.runKernel(vg,d,x);return f?Pe(S,[S.shape[1],S.shape[2],S.shape[3]]):S}const ox=Be({conv2DBackpropInput_:M$});function O$(s,t,n,o,a,i){const p=je(s,"x","conv2dTranspose"),r=je(t,"filter","conv2dTranspose");return ox(n,p,r,o,a,"NHWC",i)}const iE=Be({conv2dTranspose_:O$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $$(s,t,n,o,a="NDHWC",i=[1,1,1]){const p=je(s,"x","conv3d"),r=je(t,"filter","conv3d");let h=p,f=!1;p.rank===4&&(f=!0,h=Pe(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),ye(h.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${h.rank}.`),ye(r.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${r.rank}.`),ye(h.shape[4]===r.shape[3],()=>`Error in conv3d: depth of input (${h.shape[4]}) must match input depth for filter ${r.shape[3]}.`),ye(Ss(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),ye(a==="NDHWC",()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`),ye(Yl(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),ye(Yl(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:h,filter:r},l={strides:n,pad:o,dataFormat:a,dilations:i},d=Le.runKernel(xg,u,l);return f?Pe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const L$=Be({conv3d_:$$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$(s,t,n,o,a){ye(s.length===t.rank,()=>`Length of inShape (${s.length}) and rank of dy (${t.rank}) must match`);let i=s,p=t,r=!1;t.rank===4&&(r=!0,p=Pe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,s[0],s[1],s[2],s[3]]);const h=i[4],f=p.shape[4];ye(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),ye(p.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${p.rank}`),ye(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),ye(h===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${h}) must match input depth for filter ${n.shape[3]}.`),ye(f===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[4]}.`);const u={dy:p,filter:n},l={pad:a,strides:o,inputShape:i},d=Le.runKernel(S1,u,l);return r?Pe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const lE=Be({conv3DBackpropInput_:F$});function P$(s,t,n,o,a){const i=je(s,"x","conv3dTranspose"),p=je(t,"filter","conv3dTranspose");return lE(n,i,p,o,a)}const B$=Be({conv3dTranspose_:P$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U$(s){const n={x:je(s,"x","cos","float32")};return Le.runKernel(Sh,n)}const ax=Be({cos_:U$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$(s){const n={x:je(s,"x","cosh","float32")};return Le.runKernel(_h,n)}const uE=Be({cosh_:z$});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$(s,t=0,n=!1,o=!1){const i={x:je(s,"x","cumprod")},p={axis:t,exclusive:n,reverse:o};return Le.runKernel(_1,i,p)}const Nv=Be({cumprod_:V$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$(s,t=0,n=!1,o=!1){const i={x:je(s,"x","cumsum")},p={axis:t,exclusive:n,reverse:o};return Le.runKernel(wg,i,p)}const cE=Be({cumsum_:G$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W$(s,t,n,o=!1){const a=je(s,"x","denseBincount"),i=je(t,"weights","denseBincount");ye(a.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),ye(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),ye(n>=0,()=>`size must be non-negative, but got ${n}.`),ye(i.size===a.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`);const p={x:a,weights:i},r={size:n,binaryOutput:o};return Le.runKernel(k1,p,r)}const vC=Be({denseBincount_:W$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$(s,t,n="NHWC"){const o=je(s,"x","depthToSpace","float32"),a=n==="NHWC"?o.shape[1]:o.shape[2],i=n==="NHWC"?o.shape[2]:o.shape[3],p=n==="NHWC"?o.shape[3]:o.shape[1];ye(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),ye(a*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${t}  for depthToSpace with input shape
    ${o.shape}`),ye(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t} for depthToSpace with input shape
        ${o.shape}`),ye(p%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${p} for depthToSpace with input shape ${o.shape}`);const r={x:o},h={blockSize:t,dataFormat:n};return Le.runKernel(T1,r,h)}const q$=Be({depthToSpace_:H$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X$(s,t,n,o,a="NHWC",i=[1,1],p){const r=je(s,"x","depthwiseConv2d","float32"),h=je(t,"filter","depthwiseConv2d","float32");let f=r,u=!1;r.rank===3&&(u=!0,f=Pe(r,[1,r.shape[0],r.shape[1],r.shape[2]])),ye(f.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),ye(h.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`);const l=a==="NHWC"?f.shape[3]:f.shape[1];ye(l===h.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${l}) must match the inChannels dimension in filter ${h.shape[2]}.`),zs("depthwiseConv2d",o,p);const d={x:f,filter:h},x={strides:n,pad:o,dataFormat:a,dilations:i,dimRoundingMode:p},S=Le.runKernel(Sg,d,x);return u?Pe(S,[S.shape[1],S.shape[2],S.shape[3]]):S}const ix=Be({depthwiseConv2d_:X$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$(s,t,n,o,a=[1,1],i="NHWC"){const p=je(s,"x","dilation2d"),r=je(t,"filter","dilation2d");ye(p.rank===3||p.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${p.rank}.`),ye(r.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${r.rank}.`),ye(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let h=p,f=!1;p.rank===3&&(h=Pe(p,[1,p.shape[0],p.shape[1],p.shape[2]]),f=!0),ye(h.shape[3]===r.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${h.shape[3]} vs ${r.shape[2]}`);const u={x:h,filter:r},l={strides:n,pad:o,dilations:a},d=Le.runKernel(_g,u,l);return f?Pe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const K$=Be({dilation2d_:Y$});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mc(s,t){const n=s.length,o=[];for(let a=0;a<n;a++){const i=n-1-a,p=s[i]||1;(t[t.length-1-a]||1)>1&&p===1&&o.unshift(i)}return o}function qr(s,t){const n=[];for(let o=0;o<t.length;o++){const a=s[s.length-o-1],i=t.length-o-1,p=t[i];(a==null||a===1&&p>1)&&n.unshift(i)}return n}function on(s,t){const n=Math.max(s.length,t.length),o=new Array(n);for(let a=0;a<n;a++){let i=s[s.length-a-1];i==null&&(i=1);let p=t[t.length-a-1];if(p==null&&(p=1),i===1)o[n-a-1]=p;else if(p===1)o[n-a-1]=i;else if(i!==p){const r=`Operands could not be broadcast together with shapes ${s} and ${t}.`;throw Error(r)}else o[n-a-1]=i}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$(s,t){let n=je(s,"a","equal","string_or_numeric"),o=je(t,"b","equal","string_or_numeric");[n,o]=Ar(n,o),on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Cg,a)}const Ia=Be({equal_:Z$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q$(s,t,n){const o=je(t,"a","where"),a=je(n,"b","where"),i=je(s,"condition","where","bool"),p=on(on(i.shape,o.shape),a.shape),r=qd(i,p),h=qd(o,p),f=qd(a,p),u={condition:r,t:h,e:f};return Le.runKernel(ey,u)}const Rs=Be({where_:Q$});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$(s){const n={x:je(s,"x","zerosLike")};return Le.runKernel(ly,n)}const Tn=Be({zerosLike_:J$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e4(s,t){let n=je(s,"a","div"),o=je(t,"b","div");[n,o]=Ar(n,o);const a=Ht(n,o),i=Tn(a),p=Ia(o,i);return Rs(p,i,a)}const t4=Be({divNoNan_:e4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n4(s,t){const n=je(s,"t1","dot"),o=je(t,"t2","dot");ye((n.rank===1||n.rank===2)&&(o.rank===1||o.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${o.rank}.`);const a=n.rank===1?n.size:n.shape[1],i=o.rank===1?o.size:o.shape[0];if(ye(a===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${a} and ${i}.`),n.rank===1&&o.rank===1){const p=Pe(n,[1,-1]),r=Pe(o,[-1,1]),h=Mn(p,r);return Pe(h,[])}else if(n.rank===1&&o.rank===2){const p=Pe(n,[1,-1]),r=Pe(o,[o.shape[0],o.shape[1]]),h=Mn(p,r);return Pe(h,[h.size])}else if(n.rank===2&&o.rank===1){const p=Pe(o,[-1,1]),r=Mn(n,p);return Pe(r,[r.size])}else{const p=Pe(o,[o.shape[0],o.shape[1]]);return Mn(n,p)}}const r4=Be({dot_:n4});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s4(s,...t){const n=t.map((a,i)=>je(a,`tensors${i}`,"einsum")),o={equation:s};return Le.runKernel(I1,n,o)}const $d=Be({einsum_:s4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4(s){const n={x:je(s,"x","elu","float32")};return Le.runKernel(kh,n)}const fy=Be({elu_:o4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a4(s){let t=je(s,"x","erf");ye(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=Ot(t,"float32"));const n={x:t};return Le.runKernel(Th,n)}const dE=Be({erf_:a4});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lx(s,t){for(let n=0;n<s.length;++n)if(s[s.length-n-1]!==t-1-n)return!1;return!0}function hE(s,t,n){const o=s.length+t.length,a=[];let i=0,p=0;for(let r=0;r<o;r++)n.indexOf(r)===-1?a.push(s[i++]):a.push(t[p++]);return a}function ss(s,t){const n=[],o=s.length;for(let i=0;i<o;i++)t.indexOf(i)===-1&&n.push(s[i]);const a=t.map(i=>s[i]);return[n,a]}function Fr(s,t){const n=t.map(o=>1);return hE(s,n,t)}function fs(s,t,n){ye(lx(t,n),()=>`${s} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function br(s,t){if(lx(s,t))return null;const n=[];for(let o=0;o<t;++o)s.indexOf(o)===-1&&n.push(o);return s.forEach(o=>n.push(o)),n}function sl(s){return s.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function Rr(s,t){const n=[];for(let o=t-s;o<t;++o)n.push(o);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4(s,t=null,n=!1){const a={x:je(s,"x","max")},i={reductionIndices:t,keepDims:n};return Le.runKernel($g,a,i)}const ta=Be({max_:i4});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4(s,t=null,n=!1){const a={x:je(s,"x","min")},i={axis:t,keepDims:n};return Le.runKernel(Bg,a,i)}const Mm=Be({min_:l4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u4(s,t){let n=je(s,"base","pow"),o=je(t,"exp","pow");[n,o]=Ar(n,o);const a={a:n,b:o};return Le.runKernel(zh,a)}const Zl=Be({pow_:u4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(s,t){if((Mo(s)&&t!=="string"||Array.isArray(s))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Mo(s)&&!(s instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return uf(s,[],[],t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c4(s){const n={x:je(s,"x","sqrt","float32")};return Le.runKernel(ef,n)}const ws=Be({sqrt_:c4});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d4(s){const t=je(s,"x","square"),n={};return Le.runKernel("Square",{x:t},n)}const ur=Be({square_:d4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h4(s,t=null,n=!1){let o=je(s,"x","sum");o.dtype==="bool"&&(o=Ot(o,"int32"));const a={x:o},i={axis:t,keepDims:n};return Le.runKernel(ny,a,i)}const Wt=Be({sum_:h4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4(s,t="euclidean",n=null,o=!1){s=je(s,"x","norm");const a=fE(s,t,n);let i=a.shape;if(o){const p=pn(n,s.shape);i=Fr(a.shape,p)}return Pe(a,i)}function fE(s,t,n=null){if(s.rank===0)return js(s);if(s.rank!==1&&n===null)return fE(Pe(s,[-1]),t,n);if(s.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Wt(js(s),n);if(t===1/0)return ta(js(s),n);if(t===-1/0)return Mm(js(s),n);if(t==="euclidean"||t===2)return ws(Wt(Zl(js(s),On(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return ta(Wt(js(s),n[0]),n[1]-1);if(t===1/0)return ta(Wt(js(s),n[1]),n[0]);if(t===-1/0)return Mm(Wt(js(s),n[1]),n[0]);if(t==="fro"||t==="euclidean")return ws(Wt(ur(s),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const py=Be({norm_:f4});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p4(s,t=null,n=!1){return py(s,"euclidean",t,n)}const m4=Be({euclideanNorm_:p4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4(s){const n={x:je(s,"x","exp")};return Le.runKernel(Eh,n)}const Aa=Be({exp_:g4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y4(s,t=0){const n=je(s,"x","expandDims","string_or_numeric");ye(t<=n.rank,()=>"Axis must be <= rank of the tensor");const o={input:n},a={dim:t};return Le.runKernel(kg,o,a)}const Ls=Be({expandDims_:y4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4(s){const n={x:je(s,"x","expm1")};return Le.runKernel(jh,n)}const v4=Be({expm1_:b4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4(s,t){const n=je(s,"x","tile","string_or_numeric");ye(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const o={x:n},a={reps:t};return Le.runKernel(of,o,a)}const Jo=Be({tile_:x4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w4(s,t,n,o="float32"){t==null&&(t=s);const a=fn([s,t],o),i=s<=t?s:t;for(let r=0;r<i;++r)a.set(1,r,r);const p=Pe(a.toTensor(),[s,t]);if(n==null)return p;if(n.length===1)return Jo(Ls(p,0),[n[0],1,1]);if(n.length===2)return Jo(Ls(Ls(p,0),0),[n[0],n[1],1,1]);if(n.length===3)return Jo(Ls(Ls(Ls(p,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const pE=Be({eye_:w4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4(s){const n={x:je(s,"x","floor","float32")};return Le.runKernel(Ih,n)}const my=Be({floor_:S4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _4(s,t,n=0,o=0){const a=je(s,"x","gather"),i=je(t,"indices","gather","int32"),p={x:a,indices:i},r={axis:n,batchDims:o};return Le.runKernel(Eg,p,r)}const ux=Be({gather_:_4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4(s,t){let n=je(s,"a","greater","string_or_numeric"),o=je(t,"b","greater","string_or_numeric");[n,o]=Ar(n,o),on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(jg,a)}const go=Be({greater_:C4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4(s,t){let n=je(s,"a","greaterEqual","string_or_numeric"),o=je(t,"b","greaterEqual","string_or_numeric");[n,o]=Ar(n,o),on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Rh,a)}const iu=Be({greaterEqual_:k4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T4(s){const n={input:je(s,"input","imag")};return Le.runKernel(O1,n)}const cx=Be({imag_:T4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E4(s){const n={x:je(s,"x","isFinite")};return Le.runKernel(Dh,n)}const j4=Be({isFinite_:E4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4(s){const n={x:je(s,"x","isInf")};return Le.runKernel(Mh,n)}const A4=Be({isInf_:I4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R4(s){const n={x:je(s,"x","isNaN")};return Le.runKernel(Oh,n)}const N4=Be({isNaN_:R4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4(s,t=.2){const o={x:je(s,"x","leakyRelu")},a={alpha:t};return Le.runKernel(Ig,o,a)}const dx=Be({leakyRelu_:D4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4(s,t){let n=je(s,"a","less","string_or_numeric"),o=je(t,"b","less","string_or_numeric");[n,o]=Ar(n,o),on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Ag,a)}const Om=Be({less_:M4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4(s,t){let n=je(s,"a","lessEqual","string_or_numeric"),o=je(t,"b","lessEqual","string_or_numeric");[n,o]=Ar(n,o),on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Rg,a)}const jc=Be({lessEqual_:O4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $4(s,t=5,n=1,o=1,a=.5){const i=je(s,"x","localResponseNormalization");ye(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),ye(hc(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let p=i,r=!1;i.rank===3&&(r=!0,p=Pe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const h={x:p},f={depthRadius:t,bias:n,alpha:o,beta:a},u=Le.runKernel(Og,h,f);return r?Pe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const L4=Be({localResponseNormalization_:$4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F4(s){const n={x:je(s,"x","log","float32")};return Le.runKernel($h,n)}const Ra=Be({log_:F4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P4(s){const n={x:je(s,"x","log1p")};return Le.runKernel(Lh,n)}const mE=Be({log1p_:P4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4(s,t){ye(mv(s),()=>"The f passed in variableGrads(f) must be a function"),ye(t==null||Array.isArray(t)&&t.every(f=>f instanceof Nm),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const f in Le.registeredVariables)t.push(Le.registeredVariables[f])}const o=n?t.filter(f=>!f.trainable):null,a=t.length;t=t.filter(f=>f.trainable),ye(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${a} variables is trainable.`);const i=!0,{value:p,grads:r}=Le.gradients(s,t,null,i);ye(r.some(f=>f!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),ye(p.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${p.rank} tensor`);const h={};return t.forEach((f,u)=>{r[u]!=null&&(h[f.name]=r[u])}),o!=null&&o.forEach(f=>h[f.name]=null),{value:p,grads:h}}function gc(s){return Le.customGrad(s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U4(s){const n={x:je(s,"x","neg")};return Le.runKernel(zg,n)}const Ir=Be({neg_:U4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4(s){const n={x:je(s,"x","softplus")};return Le.runKernel(Jh,n)}const df=Be({softplus_:z4});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4(s){const t=je(s,"x","logSigmoid");return gc(o=>({value:Ir(df(Ir(o))),gradFunc:p=>$e(p,Ec(Ir(o)))}))(t)}const G4=Be({logSigmoid_:V4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W4(s,t){let n=je(s,"a","sub"),o=je(t,"b","sub");[n,o]=Ar(n,o);const a={a:n,b:o};return Le.runKernel(nf,a)}const Yt=Be({sub_:W4});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H4(s,t=-1){const n=je(s,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return gc((a,i)=>{const r=ta(a,t,!0),h=Yt(a,r),f=Yt(Ot(h,"float32"),Ra(Wt(Aa(h),t,!0)));return i([f]),{value:f,gradFunc:(l,d)=>{const[x]=d,S=!0,m=Aa(x);return Yt(l,$e(Wt(l,t,S),m))}}})(n)}const gE=Be({logSoftmax_:H4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q4(s,t=null,n=!1){const o=je(s,"x","logSumExp"),a=pn(t,o.shape),i=ta(o,a,!0),p=Yt(o,i),r=Aa(p),h=Wt(r,a),f=Ra(h),u=St(Pe(i,f.shape),f);if(n){const l=Fr(u.shape,a);return Pe(u,l)}return u}const yE=Be({logSumExp_:q4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X4(s,t){const n=je(s,"a","logicalAnd","bool"),o=je(t,"b","logicalAnd","bool");on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Ng,a)}const ni=Be({logicalAnd_:X4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y4(s){const n={x:je(s,"x","logicalNot","bool")};return Le.runKernel(Dg,n)}const hx=Be({logicalNot_:Y4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K4(s,t){const n=je(s,"a","logicalOr","bool"),o=je(t,"b","logicalOr","bool");on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Mg,a)}const bE=Be({logicalOr_:K4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z4(s,t){const n=je(s,"a","logicalXor","bool"),o=je(t,"b","logicalXor","bool");return on(n.shape,o.shape),ni(bE(s,t),hx(ni(s,t)))}const Q4=Be({logicalXor_:Z4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4(s,t,n,o,a){const i=je(s,"x","maxPool"),p=1;let r=i,h=!1;i.rank===3&&(h=!0,r=Pe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ye(r.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.rank}.`),ye(Ss(n,p),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${p}'`),zs("maxPool",o,a);const f={x:r},u={filterSize:t,strides:n,pad:o,dimRoundingMode:a},l=Le.runKernel(Lg,f,u);return h?Pe(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const fx=Be({maxPool_:J4});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eL(s,t=[1,1,1],n,o,a,i="NDHWC"){const p=je(s,"x","maxPool3d");let r=p,h=!1;p.rank===4&&(h=!0,r=Pe(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]])),ye(r.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${r.rank}.`),ye(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),zs("maxPool3d",o,a);const f={x:r},u={filterSize:t,strides:n,pad:o,dimRoundingMode:a,dataFormat:i},l=Le.runKernel(Fg,f,u);return h?Pe(l,[l.shape[1],l.shape[2],l.shape[3],l.shape[4]]):l}const tL=Be({maxPool3d_:eL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nL(s,t){let n=je(s,"a","maximum"),o=je(t,"b","maximum");[n,o]=Ar(n,o),n.dtype==="bool"&&(n=Ot(n,"int32"),o=Ot(o,"int32")),on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Fh,a)}const ol=Be({maximum_:nL});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rL(s,t=null,n=!1){const a={x:je(s,"x","mean")},i={axis:t,keepDims:n};return Le.runKernel(Pg,a,i)}const Lr=Be({mean_:rL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ns(s,t="float32"){if(ii(s),t==="complex64"){const o=ns(s,"float32"),a=ns(s,"float32");return Wl(o,a)}const n=xs(at(s),t);return Le.makeTensor(n,s,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function al(s,t="float32"){if(ii(s),t==="complex64"){const o=al(s,"float32"),a=ns(s,"float32");return Wl(o,a)}const n=u1(at(s),t);return Le.makeTensor(n,s,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sL(s,t){let n=je(s,"a","minimum"),o=je(t,"b","minimum");[n,o]=Ar(n,o),n.dtype==="bool"&&(n=Ot(n,"int32"),o=Ot(o,"int32")),on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Ph,a)}const Qd=Be({minimum_:sL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oL(s,t,n){ye(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const o=je(s,"x","mirrorPad");if(o.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ye(t.length===o.rank,()=>`Padding doesn't match input. Must be ${o.rank}. Got ${t.length}.`);const a=n==="reflect"?1:0;for(let r=0;r<o.rank;r++)ye(t[r].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ye(t[r][0]>=0&&t[r][0]<=o.shape[r]-a&&t[r][1]>=0&&t[r][1]<=o.shape[r]-a,()=>`Padding in dimension ${r} cannot be greater than or equal to ${o.shape[r]-a} or less than 0 for input of shape ${o.shape}`);const i={paddings:t,mode:n},p={x:o};return Le.runKernel(Ug,p,i)}const aL=Be({mirrorPad_:oL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iL(s,t){let n=je(s,"a","mod"),o=je(t,"b","mod");[n,o]=Ar(n,o);const a={a:n,b:o};return Le.runKernel(Bh,a)}const lL=Be({mod_:iL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uL(s,t=null,n=!1){s=je(s,"x","moments");const o=pn(t,s.shape),a=Lr(s,o,n);let i=a.shape;n||(i=Fr(a.shape,o));const p=ur(Yt(Ot(s,"float32"),Pe(a,i))),r=Lr(p,o,n);return{mean:a,variance:r}}const px=Be({moments_:uL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cL(s,t){let n=je(s,"a","notEqual","string_or_numeric"),o=je(t,"b","notEqual","string_or_numeric");[n,o]=Ar(n,o),on(n.shape,o.shape);const a={a:n,b:o};return Le.runKernel(Vg,a)}const $m=Be({notEqual_:cL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dL(s,t,n=1,o=0,a="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const p={indices:je(s,"indices","oneHot","int32")},r={dtype:a,depth:t,onValue:n,offValue:o};return Le.runKernel(Wg,p,r)}const vE=Be({oneHot_:dL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hL(s){const n={x:je(s,"x","onesLike")};return Le.runKernel(Gg,n)}const Oo=Be({onesLike_:hL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fL(s,t,n=0){const o=je(s,"x","pad");if(o.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const a={paddings:t,constantValue:n},i={x:o};return Le.runKernel(qg,i,a)}const mx=Be({pad_:fL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pL(s,t,n){const o=je(s,"x","spaceToBatchND");ye(o.rank>=1+t.length,()=>`input rank ${o.rank} should be > than [blockShape] ${t.length}`),ye(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),ye(o.shape.reduce((p,r,h)=>h>0&&h<=t.length?p&&(r+n[h-1][0]+n[h-1][1])%t[h-1]===0:p,!0),()=>`input spatial dimensions ${o.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const a={x:o},i={blockShape:t,paddings:n};return Le.runKernel(ry,a,i)}const gx=Be({spaceToBatchND_:pL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mL(s,t,n,o,a,i,p){a==null&&(a=[1,1]),i==null&&(i=1),o===0&&(o="valid");const r=je(s,"x","maxPool");let h=r,f=!1;r.rank===3&&(f=!0,h=Pe(r,[1,r.shape[0],r.shape[1],r.shape[2]])),ye(Ss(i,a),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${a}'`);const u=$o(h.shape,t,i,a,o),l=[u.dilationHeight,u.dilationWidth];let d;o==="same"?d=yL([u.filterHeight,u.filterWidth],l):d=[[0,0],[0,0]];const x=l[0]===1&&l[1]===1,[S,m]=gL([u.inHeight,u.inWidth],l,d),y=x?o:"valid",b=x?h:gx(h,l,S),w=(n==="avg"?()=>rx(b,t,i,y,p):()=>fx(b,t,i,y,p))(),_=x?w:sx(w,l,m);return f?Pe(_,[_.shape[1],_.shape[2],_.shape[3]]):_}function gL(s,t,n){const o=n.map(u=>u[0]),a=n.map(u=>u[1]),i=s.concat(o,a),p=t.map((u,l)=>(u-i[l]%u)%u),r=a.map((u,l)=>u+p[l]),h=t.map((u,l)=>[o[l],r[l]]),f=t.map((u,l)=>[0,p[l]]);return[h,f]}function yL(s,t){const o=s.map((p,r)=>p+(p-1)*(t[r]-1)).map(p=>p-1),a=o.map(p=>Math.floor(p/2)),i=o.map((p,r)=>p-a[r]);return o.map((p,r)=>[a[r],i[r]])}const bL=Be({pool_:mL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vL(s,t){const n=je(s,"x","prelu"),o=je(t,"alpha","prelu"),a={x:n,alpha:o};return Le.runKernel(Xg,a)}const yx=Be({prelu_:vL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xL(s,t=null,n=!1){let o=je(s,"x","prod");o.dtype==="bool"&&(o=Ot(o,"int32"));const a={x:o},i={axis:t,keepDims:n};return Le.runKernel(Yg,a,i)}const wL=Be({prod_:xL});var xm={exports:{}},SL=xm.exports,xC;function _L(){return xC||(xC=1,function(s){(function(t,n,o){function a(h){var f=this,u=r();f.next=function(){var l=2091639*f.s0+f.c*23283064365386963e-26;return f.s0=f.s1,f.s1=f.s2,f.s2=l-(f.c=l|0)},f.c=1,f.s0=u(" "),f.s1=u(" "),f.s2=u(" "),f.s0-=u(h),f.s0<0&&(f.s0+=1),f.s1-=u(h),f.s1<0&&(f.s1+=1),f.s2-=u(h),f.s2<0&&(f.s2+=1),u=null}function i(h,f){return f.c=h.c,f.s0=h.s0,f.s1=h.s1,f.s2=h.s2,f}function p(h,f){var u=new a(h),l=f&&f.state,d=u.next;return d.int32=function(){return u.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,l&&(typeof l=="object"&&i(l,u),d.state=function(){return i(u,{})}),d}function r(){var h=4022871197,f=function(u){u=String(u);for(var l=0;l<u.length;l++){h+=u.charCodeAt(l);var d=.02519603282416938*h;h=d>>>0,d-=h,d*=h,h=d>>>0,d-=h,h+=d*4294967296}return(h>>>0)*23283064365386963e-26};return f}n&&n.exports?n.exports=p:this.alea=p})(SL,s)}(xm)),xm.exports}var wm={exports:{}},CL=wm.exports,wC;function kL(){return wC||(wC=1,function(s){(function(t,n,o){function a(r){var h=this,f="";h.x=0,h.y=0,h.z=0,h.w=0,h.next=function(){var l=h.x^h.x<<11;return h.x=h.y,h.y=h.z,h.z=h.w,h.w^=h.w>>>19^l^l>>>8},r===(r|0)?h.x=r:f+=r;for(var u=0;u<f.length+64;u++)h.x^=f.charCodeAt(u)|0,h.next()}function i(r,h){return h.x=r.x,h.y=r.y,h.z=r.z,h.w=r.w,h}function p(r,h){var f=new a(r),u=h&&h.state,l=function(){return(f.next()>>>0)/4294967296};return l.double=function(){do var d=f.next()>>>11,x=(f.next()>>>0)/4294967296,S=(d+x)/(1<<21);while(S===0);return S},l.int32=f.next,l.quick=l,u&&(typeof u=="object"&&i(u,f),l.state=function(){return i(f,{})}),l}n&&n.exports?n.exports=p:this.xor128=p})(CL,s)}(wm)),wm.exports}var Sm={exports:{}},TL=Sm.exports,SC;function EL(){return SC||(SC=1,function(s){(function(t,n,o){function a(r){var h=this,f="";h.next=function(){var l=h.x^h.x>>>2;return h.x=h.y,h.y=h.z,h.z=h.w,h.w=h.v,(h.d=h.d+362437|0)+(h.v=h.v^h.v<<4^(l^l<<1))|0},h.x=0,h.y=0,h.z=0,h.w=0,h.v=0,r===(r|0)?h.x=r:f+=r;for(var u=0;u<f.length+64;u++)h.x^=f.charCodeAt(u)|0,u==f.length&&(h.d=h.x<<10^h.x>>>4),h.next()}function i(r,h){return h.x=r.x,h.y=r.y,h.z=r.z,h.w=r.w,h.v=r.v,h.d=r.d,h}function p(r,h){var f=new a(r),u=h&&h.state,l=function(){return(f.next()>>>0)/4294967296};return l.double=function(){do var d=f.next()>>>11,x=(f.next()>>>0)/4294967296,S=(d+x)/(1<<21);while(S===0);return S},l.int32=f.next,l.quick=l,u&&(typeof u=="object"&&i(u,f),l.state=function(){return i(f,{})}),l}n&&n.exports?n.exports=p:this.xorwow=p})(TL,s)}(Sm)),Sm.exports}var _m={exports:{}},jL=_m.exports,_C;function IL(){return _C||(_C=1,function(s){(function(t,n,o){function a(r){var h=this;h.next=function(){var u=h.x,l=h.i,d,x;return d=u[l],d^=d>>>7,x=d^d<<24,d=u[l+1&7],x^=d^d>>>10,d=u[l+3&7],x^=d^d>>>3,d=u[l+4&7],x^=d^d<<7,d=u[l+7&7],d=d^d<<13,x^=d^d<<9,u[l]=x,h.i=l+1&7,x};function f(u,l){var d,x=[];if(l===(l|0))x[0]=l;else for(l=""+l,d=0;d<l.length;++d)x[d&7]=x[d&7]<<15^l.charCodeAt(d)+x[d+1&7]<<13;for(;x.length<8;)x.push(0);for(d=0;d<8&&x[d]===0;++d);for(d==8?x[7]=-1:x[d],u.x=x,u.i=0,d=256;d>0;--d)u.next()}f(h,r)}function i(r,h){return h.x=r.x.slice(),h.i=r.i,h}function p(r,h){r==null&&(r=+new Date);var f=new a(r),u=h&&h.state,l=function(){return(f.next()>>>0)/4294967296};return l.double=function(){do var d=f.next()>>>11,x=(f.next()>>>0)/4294967296,S=(d+x)/(1<<21);while(S===0);return S},l.int32=f.next,l.quick=l,u&&(u.x&&i(u,f),l.state=function(){return i(f,{})}),l}n&&n.exports?n.exports=p:this.xorshift7=p})(jL,s)}(_m)),_m.exports}var Cm={exports:{}},AL=Cm.exports,CC;function RL(){return CC||(CC=1,function(s){(function(t,n,o){function a(r){var h=this;h.next=function(){var u=h.w,l=h.X,d=h.i,x,S;return h.w=u=u+1640531527|0,S=l[d+34&127],x=l[d=d+1&127],S^=S<<13,x^=x<<17,S^=S>>>15,x^=x>>>12,S=l[d]=S^x,h.i=d,S+(u^u>>>16)|0};function f(u,l){var d,x,S,m,y,b=[],g=128;for(l===(l|0)?(x=l,l=null):(l=l+"\0",x=0,g=Math.max(g,l.length)),S=0,m=-32;m<g;++m)l&&(x^=l.charCodeAt((m+32)%l.length)),m===0&&(y=x),x^=x<<10,x^=x>>>15,x^=x<<4,x^=x>>>13,m>=0&&(y=y+1640531527|0,d=b[m&127]^=x+y,S=d==0?S+1:0);for(S>=128&&(b[(l&&l.length||0)&127]=-1),S=127,m=4*128;m>0;--m)x=b[S+34&127],d=b[S=S+1&127],x^=x<<13,d^=d<<17,x^=x>>>15,d^=d>>>12,b[S]=x^d;u.w=y,u.X=b,u.i=S}f(h,r)}function i(r,h){return h.i=r.i,h.w=r.w,h.X=r.X.slice(),h}function p(r,h){r==null&&(r=+new Date);var f=new a(r),u=h&&h.state,l=function(){return(f.next()>>>0)/4294967296};return l.double=function(){do var d=f.next()>>>11,x=(f.next()>>>0)/4294967296,S=(d+x)/(1<<21);while(S===0);return S},l.int32=f.next,l.quick=l,u&&(u.X&&i(u,f),l.state=function(){return i(f,{})}),l}n&&n.exports?n.exports=p:this.xor4096=p})(AL,s)}(Cm)),Cm.exports}var km={exports:{}},NL=km.exports,kC;function DL(){return kC||(kC=1,function(s){(function(t,n,o){function a(r){var h=this,f="";h.next=function(){var l=h.b,d=h.c,x=h.d,S=h.a;return l=l<<25^l>>>7^d,d=d-x|0,x=x<<24^x>>>8^S,S=S-l|0,h.b=l=l<<20^l>>>12^d,h.c=d=d-x|0,h.d=x<<16^d>>>16^S,h.a=S-l|0},h.a=0,h.b=0,h.c=-1640531527,h.d=1367130551,r===Math.floor(r)?(h.a=r/4294967296|0,h.b=r|0):f+=r;for(var u=0;u<f.length+20;u++)h.b^=f.charCodeAt(u)|0,h.next()}function i(r,h){return h.a=r.a,h.b=r.b,h.c=r.c,h.d=r.d,h}function p(r,h){var f=new a(r),u=h&&h.state,l=function(){return(f.next()>>>0)/4294967296};return l.double=function(){do var d=f.next()>>>11,x=(f.next()>>>0)/4294967296,S=(d+x)/(1<<21);while(S===0);return S},l.int32=f.next,l.quick=l,u&&(typeof u=="object"&&i(u,f),l.state=function(){return i(f,{})}),l}n&&n.exports?n.exports=p:this.tychei=p})(NL,s)}(km)),km.exports}var Tm={exports:{}};const ML={},OL=Object.freeze(Object.defineProperty({__proto__:null,default:ML},Symbol.toStringTag,{value:"Module"})),$L=vM(OL);var LL=Tm.exports,TC;function FL(){return TC||(TC=1,function(s){(function(t,n,o){var a=256,i=6,p=52,r="random",h=o.pow(a,i),f=o.pow(2,p),u=f*2,l=a-1,d;function x(_,C,k){var E=[];C=C==!0?{entropy:!0}:C||{};var j=b(y(C.entropy?[_,w(n)]:_??g(),3),E),A=new S(E),O=function(){for(var N=A.g(i),D=h,z=0;N<f;)N=(N+z)*a,D*=a,z=A.g(1);for(;N>=u;)N/=2,D/=2,z>>>=1;return(N+z)/D};return O.int32=function(){return A.g(4)|0},O.quick=function(){return A.g(4)/4294967296},O.double=O,b(w(A.S),n),(C.pass||k||function(N,D,z,$){return $&&($.S&&m($,A),N.state=function(){return m(A,{})}),z?(o[r]=N,D):N})(O,j,"global"in C?C.global:this==o,C.state)}function S(_){var C,k=_.length,E=this,j=0,A=E.i=E.j=0,O=E.S=[];for(k||(_=[k++]);j<a;)O[j]=j++;for(j=0;j<a;j++)O[j]=O[A=l&A+_[j%k]+(C=O[j])],O[A]=C;(E.g=function(N){for(var D,z=0,$=E.i,B=E.j,F=E.S;N--;)D=F[$=l&$+1],z=z*a+F[l&(F[$]=F[B=l&B+D])+(F[B]=D)];return E.i=$,E.j=B,z})(a)}function m(_,C){return C.i=_.i,C.j=_.j,C.S=_.S.slice(),C}function y(_,C){var k=[],E=typeof _,j;if(C&&E=="object")for(j in _)try{k.push(y(_[j],C-1))}catch{}return k.length?k:E=="string"?_:_+"\0"}function b(_,C){for(var k=_+"",E,j=0;j<k.length;)C[l&j]=l&(E^=C[l&j]*19)+k.charCodeAt(j++);return w(C)}function g(){try{var _;return d&&(_=d.randomBytes)?_=_(a):(_=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(_)),w(_)}catch{var C=t.navigator,k=C&&C.plugins;return[+new Date,t,k,t.screen,w(n)]}}function w(_){return String.fromCharCode.apply(0,_)}if(b(o.random(),n),s.exports){s.exports=x;try{d=$L}catch{}}else o["seed"+r]=x})(typeof self<"u"?self:LL,[],Math)}(Tm)),Tm.exports}var Vb,EC;function PL(){if(EC)return Vb;EC=1;var s=_L(),t=kL(),n=EL(),o=IL(),a=RL(),i=DL(),p=FL();return p.alea=s,p.xor128=t,p.xorwow=n,p.xorshift7=o,p.xor4096=a,p.tychei=i,Vb=p,Vb}var bx=PL();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xE{constructor(t,n,o,a,i){this.mean=t,this.stdDev=n,this.dtype=o,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const p=i||Math.random();this.random=bx.alea(p.toString())}nextValue(){if(!isNaN(this.nextVal)){const a=this.nextVal;return this.nextVal=NaN,a}let t,n,o=!1;for(;!o;){let a,i,p;do a=2*this.random()-1,i=2*this.random()-1,p=a*a+i*i;while(p>=1||p===0);const r=Math.sqrt(-2*Math.log(p)/p);t=this.mean+this.stdDev*a*r,n=this.mean+this.stdDev*i*r,(!this.truncated||this.isValidTruncated(t))&&(o=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class BL{constructor(t=0,n=1,o,a){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=o,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=bx.alea(a)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UL(s,t=0,n=1,o,a){if(ii(s),o!=null&&o==="bool")throw new Error(`Unsupported data type ${o}`);const i=new xE(t,n,o,!1,a),p=fn(s,o);for(let r=0;r<p.values.length;r++)p.values[r]=i.nextValue();return p.toTensor()}const zL=Be({randomNormal_:UL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VL(s,t=0,n=1,o="float32",a){ii(s);const i=fn(s,o),p=new BL(t,n,null,a);for(let r=0;r<i.values.length;r++)i.values[r]=p.nextValue();return i.toTensor()}const hf=Be({randomUniform_:VL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jd(s,t,n=1,o="float32"){if(n===0)throw new Error("Cannot have a step of zero");const a={start:s,stop:t,step:n,dtype:o};return Le.runKernel(z1,{},a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GL(s){const n={input:je(s,"input","real")};return Le.runKernel(V1,n)}const Lm=Be({real_:GL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WL(s){const n={x:je(s,"x","reciprocal")};return Le.runKernel(Vh,n)}const HL=Be({reciprocal_:WL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qL(s){const n={x:je(s,"x","relu")};return Le.runKernel(Gh,n)}const lu=Be({relu_:qL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XL(s){const n={x:je(s,"x","relu6")};return Le.runKernel(Wh,n)}const wE=Be({relu6_:XL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YL(s,t){const o={x:je(s,"x","reverse")},a={dims:t};return Le.runKernel(Jg,o,a)}const Ql=Be({reverse_:YL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KL(s){const n={x:je(s,"x","round")};return Le.runKernel(Hh,n)}const SE=Be({round_:KL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZL(s){const n={x:je(s,"x","rsqrt","float32")};return Le.runKernel(qh,n)}const _E=Be({rsqrt_:ZL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QL(s){const n={x:je(s,"x","selu")};return Le.runKernel(Xh,n)}const CE=Be({selu_:QL});function JL(s,t,n,o,a,i=[1,1],p="NHWC"){const r=je(s,"x","separableConv2d"),h=je(t,"depthwiseFilter","separableConv2d"),f=je(n,"pointwiseFilter","separableConv2d");let u=r,l=!1;if(r.rank===3&&(l=!0,u=Pe(r,[1,r.shape[0],r.shape[1],r.shape[2]])),p==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ye(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),ye(h.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${h.rank}.`),ye(f.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${h.rank}.`),ye(f.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${f.shape[0]}.`),ye(f.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${f.shape[1]}.`);const d=h.shape[2],x=h.shape[3];ye(f.shape[2]===d*x,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*x}, but got ${f.shape[2]}.`);const S=ix(u,h,o,a,p,i),y=Kl(S,f,1,"valid",p);return l?Pe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const kE=Be({separableConv2d_:JL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eF(s){const n={x:je(s,"x","sign")};return Le.runKernel(Zh,n)}const tF=Be({sign_:eF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nF(s){const n={x:je(s,"x","sin","float32")};return Le.runKernel(Yh,n)}const TE=Be({sin_:nF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rF(s){const n={x:je(s,"x","sinh")};return Le.runKernel(Kh,n)}const EE=Be({sinh_:rF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sF(s,t,n){const o=je(s,"x","slice1d");return ye(o.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${o.rank} tensor`),sr(o,[t],[n])}const vx=Be({slice1d_:sF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oF(s,t,n){const o=je(s,"x","slice2d");return ye(o.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${o.rank} tensor`),sr(o,t,n)}const jE=Be({slice2d_:oF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aF(s,t,n){const o=je(s,"x","slice3d");return ye(o.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${o.rank} tensor`),sr(o,t,n)}const xx=Be({slice3d_:aF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iF(s,t,n){const o=je(s,"x","slice4d");return ye(o.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${o.rank} tensor`),sr(o,t,n)}const Fm=Be({slice4d_:iF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lF(s,t=-1){const n=je(s,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const o={logits:n},a={dim:t};return Le.runKernel(oy,o,a)}const wx=Be({softmax_:lF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uF(s){ye(s.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${s.dtype}.`);const t={input:s};return Le.runKernel(R1,t)}const IE=Be({fft_:uF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cF(s){ye(s.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${s.dtype}.`);const t={input:s};return Le.runKernel(M1,t)}const Dv=Be({ifft_:cF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dF(s){const t=s.shape[s.shape.length-1],n=s.size/t;let o;if(t<=2){const a=Pe(s,[n,t]);o=Dv(a)}else{const a=[n,2*(t-1)],i=Pe(Lm(s),[n,t]),p=Pe(cx(s),[n,t]),r=Ql(sr(i,[0,1],[n,t-2]),1),h=$e(Ql(sr(p,[0,1],[n,t-2]),1),On(-1)),f=Ps([i,r],1),u=Ps([p,h],1),l=Pe(Wl(f,u),[a[0],a[1]]);o=Dv(l)}if(o=Lm(o),s.rank===3&&s.shape[0]!==0){const a=o,i=s.shape[0];o=Pe(o,[i,o.shape[0]/i,o.shape[1]]),a.dispose()}return o}const hF=Be({irfft_:dF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fF(s,t,n=0){const a={x:je(s,"x","split")},i={numOrSizeSplits:t,axis:n};return Le.runKernel(sy,a,i)}const ho=Be({split_:fF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pF(s,t){ye(s.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${s.dtype}`);let n=s.shape[s.shape.length-1];const o=s.size/n;let a;if(t!=null&&t<n){const S=s.shape.map(y=>0),m=s.shape.map(y=>y);m[s.shape.length-1]=t,a=sr(s,S,m),n=t}else if(t!=null&&t>n){const S=s.shape.map(m=>m);S[s.shape.length-1]=t-n,a=Ps([s,ns(S)],s.shape.length-1),n=t}else a=s;const i=Tn(a),p=Pe(Wl(a,i),[o,n]),r=IE(p),h=Math.floor(n/2)+1,f=Lm(r),u=cx(r),l=ho(f,[h,n-h],f.shape.length-1),d=ho(u,[h,n-h],u.shape.length-1),x=a.shape.slice();return x[a.shape.length-1]=h,Pe(Wl(l[0],d[0]),x)}const mF=Be({rfft_:pF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gF(s,t){let n=je(s,"a","squaredDifference"),o=je(t,"b","squaredDifference");[n,o]=Ar(n,o),on(n.shape,o.shape);const a={a:n,b:o},i={};return Le.runKernel(tf,a,i)}const yF=Be({squaredDifference_:gF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bF(s,t){const n=je(s,"x","squeeze","string_or_numeric");return Pe(n,el(n.shape,t).newShape)}const ff=Be({squeeze_:bF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vF(s,t=0){const n=KT(s,"tensors","stack","string_or_numeric");ye(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&ye(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const o=n,a={axis:t};return Le.runKernel(Hg,o,a)}const ri=Be({stack_:vF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xF(s,t=0){const o={x:je(s,"x","step")},a={alpha:t};return Le.runKernel(af,o,a)}const pf=Be({step_:xF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wF(s,t,n,o,a=0,i=0,p=0,r=0,h=0){const u={x:je(s,"x","stridedSlice","string_or_numeric")},l={begin:t,end:n,strides:o,beginMask:a,endMask:i,ellipsisMask:p,newAxisMask:r,shrinkAxisMask:h};return Le.runKernel(X1,u,l)}const SF=Be({stridedSlice_:wF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _F(s){const n={x:je(s,"x","tan","float32")};return Le.runKernel(rf,n)}const CF=Be({tan_:_F});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zs(s,t){l1(s);const n=lf(s,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return uf(s,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gb(s,t,n){if(l1(s),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const o=lf(s,n);if(o.length!==2&&o.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(o.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return uf(s,t,o,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kF(s,t,n){if(l1(s),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const o=lf(s,n);if(o.length!==3&&o.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(o.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return uf(s,t,o,n)}function AE(s,t,n){const o=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${s}, sliceDim: ${o}, and batchDim: ${a}.`;if(n.rank<a)throw new Error(i+` update.rank < ${a}. `);if(s.length<o+(n.rank-a))throw new Error(i+` Output shape length < ${o+(n.rank-a)}`);if(n.rank!==a+s.length-o)throw new Error(i+` update.rank != ${a+s.length-o}`);for(let p=0;p<a;++p)if(n.shape[p]!==t.shape[p])throw new Error(i+` updates.shape[${p}] (${n.shape[p]}) != indices.shape[${p}] (${t.shape[p]}).`);for(let p=0;p<n.rank-a;++p)if(n.shape[p+a]!==s[p+o])throw new Error(i+` updates.shape[${p+a}] (${n.shape[p+a]}) != shape[${p+a}] (${s[p+a]})`)}function TF(s,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(s.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${s.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(s.size===0)throw new Error(`Updates specified for empty output. updates shape: ${s.shape}`)}AE(n,t,s)}function uu(s,t,n){const o=t.shape.length,a=o>1?t.shape[o-1]:1,i=n.length;let p=1;for(let l=a;l<i;++l)p*=n[l];const r=a<1?1:a,h=at(t.shape)/r,f=[...Vt(n.slice(0,a)),1],u=at(n);return{sliceRank:a,numUpdates:h,sliceSize:p,strides:f,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EF(s,t=1,n=!0){const o=je(s,"x","topk");if(o.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const a=o.shape[o.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>a)throw new Error(`'k' passed to topk() must be <= the last dimension (${a}) but got ${t}`);const i={x:o},p={k:t,sorted:n},[r,h]=Le.runKernel(Y1,i,p);return{values:r,indices:h}}const jF=Be({topk_:EF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IF(s,t=0,n=1,o,a){if(ii(s),o!=null&&o==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new xE(t,n,o,!0,a),p=fn(s,o);for(let r=0;r<p.values.length;r++)p.values[r]=i.nextValue();return p.toTensor()}const RE=Be({truncatedNormal_:IF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AF(s,t=0){const n=je(s,"x","unique","string_or_numeric");ye(n.rank>0,()=>"The input tensor must be at least 1D");const o={x:n},a={axis:t},[i,p]=Le.runKernel(Z1,o,a);return{values:i,indices:p}}const RF=Be({unique_:AF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NF(s,t,n){const o=je(s,"x","unsortedSegmentSum"),a=je(t,"segmentIds","unsortedSegmentSum","int32");ye(hc(n),()=>"numSegments must be of dtype int");const i={x:o,segmentIds:a},p={numSegments:n};return Le.runKernel(iy,i,p)}const NE=Be({unsortedSegmentSum_:NF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DF(s,t=0){const n=je(s,"x","unstack","string_or_numeric");ye(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const o={value:n},a={axis:t};return Le.runKernel(ay,o,a)}const Jl=Be({unstack_:DF});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MF(s,t=!0,n,o){return Le.makeVariable(s,t,n,o)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DE(s,t){const n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);const o=fn(s,"int32"),a=fn([n.length,s.length],"int32");for(let i=0;i<n.length;i++){const p=o.indexToLoc(n[i]),r=i*s.length;a.values.set(p,r)}return a.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OF(s,t,n){const o=je(s,"x","transpose");if(t==null&&(t=o.shape.map((p,r)=>r).reverse()),ye(o.rank===t.length,()=>`Error in transpose: rank of input ${o.rank} must match length of perm ${t}.`),t.forEach(p=>{ye(p>=0&&p<o.rank,()=>`All entries in 'perm' must be between 0 and ${o.rank-1} but got ${t}`)}),o.rank<=1)return o.clone();const a={x:o},i={perm:t};return o.dtype==="complex64"?Xe(()=>{let p=Lm(o),r=cx(o);return p=Le.runKernel(lc,{x:p},i),r=Le.runKernel(lc,{x:r},i),n&&(r=Ir(r)),Wl(p,r)}):Le.runKernel(lc,a,i)}const kn=Be({transpose_:OF});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $F(s,t){if(t==null)return s.shape.slice();if($n(s.shape,t))return t;if(s.shape.length===t.length){const n=[];for(let o=0;o<s.shape.length;o++)t[o]==null&&s.shape[o]!=null?n.push(s.shape[o]):n.push(t[o]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LF(s,t,n,o){const a=je(s,"x","dropout");if(ye(a.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),ye(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return s instanceof zr?a.clone():a;const i=$F(a,n),p=1-t,r=Ht(my(St(hf(i,0,1,"float32",o),p)),p);return $e(a,r)}const FF=Be({dropout_:LF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PF(s,t,n,o,a,i="NHWC",p){let r=s;s.rank===3&&(r=Pe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let h=t;h.rank===3&&(h=Pe(t,[1,t.shape[0],t.shape[1],t.shape[2]])),ye(r.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${r.shape}.`),ye(h.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${h.shape}.`),ye(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const f=i==="NHWC"?r.shape[3]:r.shape[1],u=i==="NHWC"?h.shape[3]:h.shape[1];ye(f===n[2],()=>`Error in conv2dDerFilter: depth of input ${f}) must match input depth in filter (${n[2]}.`),ye(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),zs("conv2dDerFilter",a,p);const l={x:r,dy:h},d={strides:o,pad:a,dataFormat:i,dimRoundingMode:p,filterShape:n};return Le.runKernel(x1,l,d)}const Sx=Be({conv2DBackpropFilter_:PF});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _x(s,t,n){if(n==null||n==="linear")return s;if(n==="relu")return $e(s,pf(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Cx(s,t){let n=t;const o=qr(s.shape,t.shape);return o.length>0&&(n=Wt(n,o)),Pe(n,s.shape)}function kx(s,t,n,o){if(t==="linear")return s;if(t==="relu")return lu(s);if(t==="elu")return fy(s);if(t==="relu6")return wE(s);if(t==="prelu")return yx(s,n);if(t==="leakyrelu")return dx(s,o);if(t==="sigmoid")return Ec(s);throw new Error(`Unknown fused activation ${t}.`)}const Tx=(s,t)=>!(s>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BF({x:s,filter:t,strides:n,pad:o,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:p,bias:r,activation:h="linear",preluActivationWeights:f,leakyreluAlpha:u}){if(h=h||"linear",Tx(Le.state.gradientDepth,h)===!1){ye(a==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let k=Kl(s,t,n,o,a,i,p);return r!=null&&(k=St(k,r)),kx(k,h,f,u)}const l=je(s,"x","conv2d","float32"),d=je(t,"filter","conv2d","float32");let x=l,S=!1;l.rank===3&&(S=!0,x=Pe(l,[1,l.shape[0],l.shape[1],l.shape[2]])),ye(x.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${x.rank}.`),ye(d.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),zs("fused conv2d",o,p);const m=a==="NHWC"?x.shape[3]:x.shape[1];ye(d.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`),ye(Ss(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const y=hs(x.shape,d.shape,n,i,o,p);let b;r!=null&&(b=je(r,"bias","fused conv2d"),[b]=Ar(b,l),a==="NHWC"?on(y.outShape,b.shape):(ye(b.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${b.shape.length}.`),ye(b.shape.length===0||b.shape[0]===y.outChannels||b.shape[0]===1,()=>`Error in fused conv2d: bias shape (${b.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let g;if(f!=null){const k=f.shape;if(ye(k.length<=1||k.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${k.length}.`),k.length===1)ye(k[0]===1||k[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the number of output channels (${y.outChannels}).`);else if(k.length===3)try{on(k,y.outShape)}catch{const j=`Error in fused conv2d: PReLU activation weights (${k}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(j)}g=je(f,"prelu weights","fused conv2d")}const w=(k,E)=>{ye(a==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);const[j,A,O,N]=E,D=_x(k,O,h);ye(Xl(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const z=ox(A.shape,D,j,n,o),$=Sx(A,D,j.shape,n,o),B=[z,$];if(N!=null){const F=Cx(N,D);B.push(F)}return B},_={x,filter:d,bias:b,preluActivationWeights:g},C={strides:n,pad:o,dataFormat:a,dilations:i,dimRoundingMode:p,activation:h,leakyreluAlpha:u};return r==null?gc((E,j,A)=>{let O=Le.runKernel(Am,_,C);return A([j,E,O]),S&&(O=Pe(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:w}})(x,d):gc((E,j,A,O)=>{let N=Le.runKernel(Am,_,C);return O([j,E,N,A]),S&&(N=Pe(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:w}})(x,d,b)}const UF=Be({fusedConv2d_:BF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zF(s,t,n,o,a,i=[1,1],p){let r=s;s.rank===3&&(r=Pe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));let h=t;h.rank===3&&(h=Pe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const f={x:r,dy:h},u={strides:o,pad:a,dimRoundingMode:p,dilations:i,filterShape:n};return Le.runKernel(E1,f,u)}const VF=Be({depthwiseConv2dNativeBackpropFilter_:zF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GF(s,t,n,o,a,i=[1,1],p){let r=t,h=!1;t.rank===3&&(h=!0,r=Pe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const f={dy:r,filter:n},u={strides:o,pad:a,dimRoundingMode:p,dilations:i,inputShape:s},l=Le.runKernel(j1,f,u);return h?Pe(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const WF=Be({depthwiseConv2dNativeBackpropInput_:GF});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HF({a:s,b:t,transposeA:n=!1,transposeB:o=!1,bias:a,activation:i="linear",preluActivationWeights:p,leakyreluAlpha:r=.2}){if(Tx(Le.state.gradientDepth,i)===!1){let N=Mn(s,t,n,o);return a!=null&&(N=St(N,a)),kx(N,i,p,r)}let h=je(s,"a","fused matMul"),f=je(t,"b","fused matMul");[h,f]=Ar(h,f);const u=n?h.shape[h.rank-2]:h.shape[h.rank-1],l=o?f.shape[f.rank-1]:f.shape[f.rank-2],d=n?h.shape[h.rank-1]:h.shape[h.rank-2],x=o?f.shape[f.rank-2]:f.shape[f.rank-1],S=h.shape.slice(0,-2),m=f.shape.slice(0,-2),y=at(S),b=at(m);ye(u===l,()=>`Error in fused matMul: inner shapes (${u}) and (${l}) of Tensors with shapes ${h.shape} and ${f.shape} and transposeA=${n} and transposeB=${o} must match.`);const w=on(h.shape.slice(0,-2),f.shape.slice(0,-2)).concat([d,x]),_=n?Pe(h,[y,u,d]):Pe(h,[y,d,u]),C=o?Pe(f,[b,x,l]):Pe(f,[b,l,x]);let k;a!=null&&(k=je(a,"bias","fused matMul"),[k]=Ar(k,h),on(w,k.shape));let E;p!=null&&(E=je(p,"prelu weights","fused matMul"));const j=(N,D)=>{const[z,$,B,F]=D,G=_x(Pe(N,B.shape),B,i);let W,L;if(!n&&!o?(W=Mn(G,$,!1,!0),L=Mn(z,G,!0,!1)):!n&&o?(W=Mn(G,$,!1,!1),L=Mn(G,z,!0,!1)):n&&!o?(W=Mn($,G,!1,!0),L=Mn(z,G,!1,!1)):(W=Mn($,G,!0,!0),L=Mn(G,z,!0,!0)),a!=null){const V=Cx(F,G);return[W,L,V]}else return[W,L]},A={a:_,b:C,bias:k,preluActivationWeights:E},O={transposeA:n,transposeB:o,activation:i,leakyreluAlpha:r};return a==null?gc((D,z,$)=>{const B=Le.runKernel(Im,A,O);return $([D,z,B]),{value:Pe(B,w),gradFunc:j}})(_,C):gc((D,z,$,B)=>{const F=Le.runKernel(Im,A,O);return B([D,z,F,$]),{value:Pe(F,w),gradFunc:j}})(_,C,k)}const jC=Be({fusedMatMul_:HF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qF(s,t,n,o,a="bilinear",i=0){const p=je(s,"image","cropAndResize"),r=je(t,"boxes","cropAndResize","float32"),h=je(n,"boxInd","cropAndResize","int32"),f=r.shape[0];ye(p.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${p.rank}.`),ye(r.rank===2&&r.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${f},4] but had shape ${r.shape}.`),ye(h.rank===1&&h.shape[0]===f,()=>`Error in cropAndResize: boxInd must be have size [${f}] but had shape ${r.shape}.`),ye(o.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${o.length}.`),ye(o[0]>=1&&o[1]>=1,()=>`cropSize must be atleast [1,1], but was ${o}`),ye(a==="bilinear"||a==="nearest",()=>`method must be bilinear or nearest, but was ${a}`);const u={image:p,boxes:r,boxInd:h},l={method:a,extrapolationValue:i,cropSize:o};return Le.runKernel(C1,u,l)}const XF=Be({cropAndResize_:qF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YF(s){const t=je(s,"image","flipLeftRight","float32");ye(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return Le.runKernel(D1,n,{})}const KF=Be({flipLeftRight_:YF});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZF(s){const t=je(s,"image","grayscaleToRGB"),n=t.rank-1,o=t.shape[n];ye(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),ye(o===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${o}.`);const a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Jo(t,a)}const QF=Be({grayscaleToRGB_:ZF});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JF(s){const t=je(s,"image","RGBToGrayscale"),n=t.rank-1,o=t.shape[n];ye(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),ye(o===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${o}.`);const a=t.dtype,i=Ot(t,"float32"),p=Zs([.2989,.587,.114]);let r;switch(t.rank){case 2:r=$d("ij,j->i",i,p);break;case 3:r=$d("ijk,k->ij",i,p);break;case 4:r=$d("ijkl,l->ijk",i,p);break;case 5:r=$d("ijklm,m->ijkl",i,p);break;case 6:r=$d("ijklmn,n->ijklm",i,p);break;default:throw new Error("Not a valid tensor rank.")}return r=Ls(r,-1),Ot(r,a)}const eP=Be({rgbToGrayscale_:JF});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tP(s,t,n=0,o=.5){const a=je(s,"image","rotateWithOffset","float32");ye(a.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);const i={image:a},p={radians:t,fillValue:n,center:o};return Le.runKernel(Q1,i,p)}const nP=Be({rotateWithOffset_:tP});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ic(s,t,n,o,a,i){o==null&&(o=.5),a==null&&(a=Number.NEGATIVE_INFINITY),i==null&&(i=0);const p=s.shape[0];return n=Math.min(n,p),ye(0<=o&&o<=1,()=>`iouThreshold must be in [0, 1], but was '${o}'`),ye(s.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${s.rank}'`),ye(s.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${s.shape[1]}`),ye(t.rank===1,()=>"scores must be a 1D tensor"),ye(t.shape[0]===p,()=>`scores has incompatible shape with boxes. Expected ${p}, but was ${t.shape[0]}`),ye(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:o,scoreThreshold:a,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rP(s,t,n,o=.5,a=Number.NEGATIVE_INFINITY){const i=je(s,"boxes","nonMaxSuppression","float32"),p=je(t,"scores","nonMaxSuppression","float32"),r=Ic(i,p,n,o,a);n=r.maxOutputSize,o=r.iouThreshold,a=r.scoreThreshold;const h={maxOutputSize:n,iouThreshold:o,scoreThreshold:a};return Le.runKernel(P1,{boxes:i,scores:p},h)}const sP=Be({nonMaxSuppression_:rP});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oP(s,t,n){const o=aP(s,t,n),a=o<0?-(o+1):o;s.splice(a,0,t)}function aP(s,t,n){return lP(s,t,n||iP)}function iP(s,t){return s>t?1:s<t?-1:0}function lP(s,t,n){let o=0,a=s.length,i=0,p=!1;for(;o<a;){i=o+(a-o>>>1);const r=n(t,s[i]);r>0?o=i+1:(a=i,p=!r)}return p?o:-o-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ex(s,t,n,o,a){return Ax(s,t,n,o,a,0)}function jx(s,t,n,o,a,i){return Ax(s,t,n,o,a,0,!1,i,!0)}function Ix(s,t,n,o,a,i){return Ax(s,t,n,o,a,i,!0)}function Ax(s,t,n,o,a,i,p=!1,r=!1,h=!1){const f=[];for(let y=0;y<t.length;y++)t[y]>a&&f.push({score:t[y],boxIndex:y,suppressBeginIndex:0});f.sort(IC);const u=i>0?-.5/i:0,l=[],d=[];for(;l.length<n&&f.length>0;){const y=f.pop(),{score:b,boxIndex:g,suppressBeginIndex:w}=y;if(b<a)break;let _=!1;for(let C=l.length-1;C>=w;--C){const k=uP(s,g,l[C]);if(k>=o){_=!0;break}if(y.score=y.score*cP(o,u,k),y.score<=a)break}y.suppressBeginIndex=l.length,_||(y.score===b?(l.push(g),d.push(y.score)):y.score>a&&oP(f,y,IC))}const x=l.length,S=n-x;r&&S>0&&(l.push(...new Array(S).fill(0)),d.push(...new Array(S).fill(0)));const m={selectedIndices:l};return p&&(m.selectedScores=d),h&&(m.validOutputs=x),m}function uP(s,t,n){const o=s.subarray(t*4,t*4+4),a=s.subarray(n*4,n*4+4),i=Math.min(o[0],o[2]),p=Math.min(o[1],o[3]),r=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),f=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),l=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),x=(r-i)*(h-p),S=(l-f)*(d-u);if(x<=0||S<=0)return 0;const m=Math.max(i,f),y=Math.max(p,u),b=Math.min(r,l),g=Math.min(h,d),w=Math.max(b-m,0)*Math.max(g-y,0);return w/(x+S-w)}function cP(s,t,n){const o=Math.exp(t*n*n);return n<=s?o:0}function IC(s,t){return s.score-t.score||s.score===t.score&&t.boxIndex-s.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function dP(s,t,n,o=.5,a=Number.NEGATIVE_INFINITY){const i=je(s,"boxes","nonMaxSuppressionAsync"),p=je(t,"scores","nonMaxSuppressionAsync"),r=Ic(i,p,n,o,a);n=r.maxOutputSize,o=r.iouThreshold,a=r.scoreThreshold;const h=await Promise.all([i.data(),p.data()]),f=h[0],u=h[1],{selectedIndices:l}=Ex(f,u,n,o,a);return i!==s&&i.dispose(),p!==t&&p.dispose(),Zs(l,"int32")}const hP=dP;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fP(s,t,n,o=.5,a=Number.NEGATIVE_INFINITY,i=0){const p=je(s,"boxes","nonMaxSuppression"),r=je(t,"scores","nonMaxSuppression"),h=Ic(p,r,n,o,a,i);n=h.maxOutputSize,o=h.iouThreshold,a=h.scoreThreshold,i=h.softNmsSigma;const f={boxes:p,scores:r},u={maxOutputSize:n,iouThreshold:o,scoreThreshold:a,softNmsSigma:i},l=Le.runKernel(U1,f,u);return{selectedIndices:l[0],selectedScores:l[1]}}const pP=Be({nonMaxSuppressionWithScore_:fP});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function mP(s,t,n,o=.5,a=Number.NEGATIVE_INFINITY,i=0){const p=je(s,"boxes","nonMaxSuppressionAsync"),r=je(t,"scores","nonMaxSuppressionAsync"),h=Ic(p,r,n,o,a,i);n=h.maxOutputSize,o=h.iouThreshold,a=h.scoreThreshold,i=h.softNmsSigma;const f=await Promise.all([p.data(),r.data()]),u=f[0],l=f[1],{selectedIndices:d,selectedScores:x}=Ix(u,l,n,o,a,i);return p!==s&&p.dispose(),r!==t&&r.dispose(),{selectedIndices:Zs(d,"int32"),selectedScores:Zs(x)}}const gP=mP;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yP(s,t,n,o=.5,a=Number.NEGATIVE_INFINITY,i=!1){const p=je(s,"boxes","nonMaxSuppression"),r=je(t,"scores","nonMaxSuppression"),h=Ic(p,r,n,o,a,null),f=h.maxOutputSize,u=h.iouThreshold,l=h.scoreThreshold,d={boxes:p,scores:r},x={maxOutputSize:f,iouThreshold:u,scoreThreshold:l,padToMaxOutputSize:i},S=Le.runKernel(B1,d,x);return{selectedIndices:S[0],validOutputs:S[1]}}const bP=Be({nonMaxSuppressionPadded_:yP});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function vP(s,t,n,o=.5,a=Number.NEGATIVE_INFINITY,i=!1){const p=je(s,"boxes","nonMaxSuppressionAsync"),r=je(t,"scores","nonMaxSuppressionAsync"),h=Ic(p,r,n,o,a,null),f=h.maxOutputSize,u=h.iouThreshold,l=h.scoreThreshold,[d,x]=await Promise.all([p.data(),r.data()]),{selectedIndices:S,validOutputs:m}=jx(d,x,f,u,l,i);return p!==s&&p.dispose(),r!==t&&r.dispose(),{selectedIndices:Zs(S,"int32"),validOutputs:On(m,"int32")}}const xP=vP;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wP(s,t,n=!1,o=!1){const a=je(s,"images","resizeBilinear");ye(a.rank===3||a.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${a.rank}.`),ye(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),ye(o===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,p=!1;a.rank===3&&(p=!0,i=Pe(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const r={images:i},h={alignCorners:n,halfPixelCenters:o,size:t},f=Le.runKernel(Qg,r,h);return p?Pe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const ME=Be({resizeBilinear_:wP});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SP(s,t,n=!1,o=!1){const a=je(s,"images","resizeNearestNeighbor");ye(a.rank===3||a.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${a.rank}.`),ye(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),ye(a.dtype==="float32"||a.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),ye(o===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,p=!1;a.rank===3&&(p=!0,i=Pe(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const r={images:i},h={alignCorners:n,halfPixelCenters:o,size:t},f=Le.runKernel(Zg,r,h);return p?Pe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const OE=Be({resizeNearestNeighbor_:SP});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _P(s,t="binary",n=!1,o=.5){const a=je(s,"image","threshold"),i=.2989,p=.587,r=.114,h=a.shape[0]*a.shape[1];let f=$e(Zs([o]),255),u,l,d,x;if(ye(a.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${a.rank}.`),ye(a.shape[2]===3||a.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${a.shape[2]}.`),ye(a.dtype==="int32"||a.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${a.dtype}.`),ye(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),a.shape[2]===3){[u,l,d]=ho(a,[1,1,1],-1);const y=$e(u,i),b=$e(l,p),g=$e(d,r);x=St(St(y,b),g)}else x=s;if(t==="otsu"){const y=v$(Ot(SE(x),"int32"),Hd([]),256);f=CP(y,h)}const S=n?jc(x,f):go(x,f);return Ot($e(S,255),"int32")}function CP(s,t){let n=Zs([-1]),o=Zs([0]),a=Zs([0]),i,p,r,h,f,u;for(let l=0;l<s.size-1;l++){i=sr(s,0,l+1),p=sr(s,l+1),f=Ht(Wt(i),t),u=Ht(Wt(p),t);const d=Wt($e(i,Jd(0,i.size)));r=Ht(d,Wt(i));const x=hy(p.shape,i.size),S=St(Jd(0,p.size),x),m=$e(p,S);h=Ht(Wt(m),Wt(p));const y=Yt(r,h),b=Yt(r,h),g=$e(f,u);a=$e($e(g,y),b);const w=go(a,o);o=Rs(w,a,o),n=Rs(w,Zs([l]),n)}return n}const kP=Be({threshold_:_P});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TP(s,t,n="nearest",o="constant",a=0,i){const p=je(s,"image","transform","float32"),r=je(t,"transforms","transform","float32");ye(p.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${p.rank}.`),ye(r.rank===2&&(r.shape[0]===p.shape[0]||r.shape[0]===1)&&r.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),ye(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const h={image:p,transforms:r},f={interpolation:n,fillMode:o,fillValue:a,outputShape:i};return Le.runKernel(K1,h,f)}const EP=Be({transform_:TP});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jP(s,t,n){const o=je(s,"a","bandPart");ye(o.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${o.rank}.`);const a=o.shape,[i,p]=o.shape.slice(-2);let r,h;typeof t=="number"?(ye(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),ye(t<=i,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${i}).`),r=je(t<0?i:t,"numLower","bandPart")):(ye(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),r=Rs(Om(t,0),i,Qd(t,i))),typeof n=="number"?(ye(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),ye(n<=p,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${p}).`),h=je(n<0?p:n,"numUpper","bandPart")):(ye(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),h=Rs(Om(n,0),p,Qd(n,p)));const f=Pe(Jd(0,i,1,"int32"),[-1,1]),u=Jd(0,p,1,"int32"),l=Yt(f,u),d=ni(jc(l,r),iu(l,Ir(h))),x=ns([i,p],o.dtype);return Pe(ri(Jl(Pe(o,[-1,i,p])).map(S=>Rs(d,S,x))),a)}const IP=Be({bandPart_:jP});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AP(s){let t;if(Array.isArray(s)){t=!1,ye(s!=null&&s.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const a=s[0].shape[0];for(let i=1;i<s.length;++i)ye(s[i].shape[0]===a,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${s[i].shape[0]} vs. ${a})`)}else t=!0,s=ho(s,s.shape[0],0).map(a=>ff(a,[0]));ye(s.length<=s[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${s.length}) exceeds number of dimensions (${s[0].shape[0]}).`);const n=[],o=s;for(let a=0;a<s.length;++a)n.push(Le.tidy(()=>{let i=o[a];if(a>0)for(let p=0;p<a;++p){const r=$e(Wt($e(n[p],i)),n[p]);i=Yt(i,r)}return Ht(i,py(i,"euclidean"))}));return t?ri(n,0):n}const RP=Be({gramSchmidt_:AP});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NP(s,t=!1){if(ye(s.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${s.rank}`),s.rank===2)return AC(s,t);{const n=s.shape.slice(0,s.shape.length-2).reduce((h,f)=>h*f),o=Jl(Pe(s,[n,s.shape[s.shape.length-2],s.shape[s.shape.length-1]]),0),a=[],i=[];o.forEach(h=>{const[f,u]=AC(h,t);a.push(f),i.push(u)});const p=Pe(ri(a,0),s.shape),r=Pe(ri(i,0),s.shape);return[p,r]}}function AC(s,t=!1){return Le.tidy(()=>{ye(s.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${s.shape.length}D Tensor.`);const n=s.shape[0],o=s.shape[1];let a=pE(n),i=Bl(s);const p=Gb([[1]],[1,1]);let r=Bl(p);const h=n>=o?o:n;for(let f=0;f<h;++f){const u=i,l=r,d=a;[r,i,a]=Le.tidy(()=>{const x=sr(i,[f,f],[n-f,1]),S=py(x),m=sr(i,[f,f],[1,1]),y=Rs(go(m,0),Gb([[-1]]),Gb([[1]])),b=Yt(m,$e(y,S)),g=Ht(x,b);g.shape[0]===1?r=Bl(p):r=Ps([p,sr(g,[1,0],[g.shape[0]-1,g.shape[1]])],0);const w=Ir(Ht(Mn(y,b),S)),_=sr(i,[f,0],[n-f,o]),C=$e(w,r),k=kn(r);if(f===0)i=Yt(_,Mn(C,Mn(k,_)));else{const A=Yt(_,Mn(C,Mn(k,_)));i=Ps([sr(i,[0,0],[f,o]),A],0)}const E=kn(C),j=sr(a,[0,f],[n,a.shape[1]-f]);if(f===0)a=Yt(j,Mn(Mn(j,r),E));else{const A=Yt(j,Mn(Mn(j,r),E));a=Ps([sr(a,[0,0],[n,f]),A],1)}return[r,i,a]}),cn([u,l,d])}return!t&&n>o&&(a=sr(a,[0,0],[n,o]),i=sr(i,[0,0],[o,o])),[a,i]})}const DP=Be({qr_:NP});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ei={flipLeftRight:KF,grayscaleToRGB:QF,resizeNearestNeighbor:OE,resizeBilinear:ME,rgbToGrayscale:eP,rotateWithOffset:nP,cropAndResize:XF,nonMaxSuppression:sP,nonMaxSuppressionAsync:hP,nonMaxSuppressionWithScore:pP,nonMaxSuppressionWithScoreAsync:gP,nonMaxSuppressionPadded:bP,nonMaxSuppressionPaddedAsync:xP,threshold:kP,transform:EP},MP={bandPart:IP,gramSchmidt:RP,qr:DP};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OP=new Map,$P=new Map;class Ac{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class Ro{constructor(){this.classNameMap={}}static getMap(){return Ro.instance==null&&(Ro.instance=new Ro),Ro.instance}static register(t){Ro.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function xt(s,t,n){ye(s.className!=null,()=>"Class being registered does not have the static className property defined."),ye(typeof s.className=="string",()=>"className is required to be a string, but got type "+typeof s.className),ye(s.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=s.className);const o=n,a=t+">"+o;return Ro.register(s),OP.set(a,s),$P.set(s,a),s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class il extends Ac{minimize(t,n=!1,o){const{value:a,grads:i}=this.computeGradients(t,o);if(o!=null){const p=o.map(r=>({name:r.name,tensor:i[r.name]}));this.applyGradients(p)}else this.applyGradients(i);return cn(i),n?a:(a.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return B4(t,n)}dispose(){this.iterations_!=null&&cn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:On(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(il,Symbol.hasInstance,{value:s=>s.minimize!=null&&s.computeGradients!=null&&s.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $E extends il{static get className(){return"Adadelta"}constructor(t,n,o=null){super(),this.learningRate=t,this.rho=n,this.epsilon=o,this.accumulatedGrads=[],this.accumulatedUpdates=[],o==null&&(this.epsilon=Le.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(o=>o.name):Object.keys(t)).forEach((o,a)=>{const i=Le.registeredVariables[o],p=!1;this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${o}/accum_grad`,variable:Xe(()=>Tn(i).variable(p))}),this.accumulatedUpdates[a]==null&&(this.accumulatedUpdates[a]={originalName:`${o}/accum_var`,variable:Xe(()=>Tn(i).variable(p))});const r=Array.isArray(t)?t[a].tensor:t[o];if(r==null)return;const h=this.accumulatedGrads[a].variable,f=this.accumulatedUpdates[a].variable;Xe(()=>{const u=St($e(h,this.rho),$e(ur(r),1-this.rho)),l=$e(Ht(ws(St(f,this.epsilon)),ws(St(h,this.epsilon))),r),d=St($e(f,this.rho),$e(ur(l),1-this.rho));h.assign(u),f.assign(d);const x=St($e(l,-this.learningRate),i);i.assign(x)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(cn(this.accumulatedGrads.map(t=>t.variable)),cn(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,o=!1;this.accumulatedGrads=t.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(o)})),this.accumulatedUpdates=t.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(o)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LE extends il{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(o=>o.name):Object.keys(t)).forEach((o,a)=>{const i=Le.registeredVariables[o];this.accumulatedGrads[a]==null&&(this.accumulatedGrads[a]={originalName:`${o}/accumulator`,variable:Xe(()=>hy(i.shape,this.initialAccumulatorValue).variable(!1))});const p=Array.isArray(t)?t[a].tensor:t[o];if(p==null)return;const r=this.accumulatedGrads[a].variable;Xe(()=>{const h=St(r,ur(p));r.assign(h);const f=St($e(Ht(p,ws(St(h,Le.backend.epsilon()))),-this.learningRate),i);i.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&cn(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FE extends il{static get className(){return"Adam"}constructor(t,n,o,a=null){super(),this.learningRate=t,this.beta1=n,this.beta2=o,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Xe(()=>{this.accBeta1=On(n).variable(),this.accBeta2=On(o).variable()}),a==null&&(this.epsilon=Le.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);Xe(()=>{const o=Yt(1,this.accBeta1),a=Yt(1,this.accBeta2);n.forEach((i,p)=>{const r=Le.registeredVariables[i],h=!1;this.accumulatedFirstMoment[p]==null&&(this.accumulatedFirstMoment[p]={originalName:`${i}/m`,variable:Xe(()=>Tn(r).variable(h))}),this.accumulatedSecondMoment[p]==null&&(this.accumulatedSecondMoment[p]={originalName:`${i}/v`,variable:Xe(()=>Tn(r).variable(h))});const f=Array.isArray(t)?t[p].tensor:t[i];if(f==null)return;const u=this.accumulatedFirstMoment[p].variable,l=this.accumulatedSecondMoment[p].variable,d=St($e(u,this.beta1),$e(f,1-this.beta1)),x=St($e(l,this.beta2),$e(ur(f),1-this.beta2)),S=Ht(d,o),m=Ht(x,a);u.assign(d),l.assign(x);const y=St($e(Ht(S,St(ws(m),this.epsilon)),-this.learningRate),r);r.assign(y)}),this.accBeta1.assign($e(this.accBeta1,this.beta1)),this.accBeta2.assign($e(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&cn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&cn(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),Xe(()=>{this.accBeta1.assign(Zl(this.beta1,this.iterations_+1)),this.accBeta2.assign(Zl(this.beta2,this.iterations_+1))});const n=t.length/2,o=!1;this.accumulatedFirstMoment=t.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(o)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(o)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PE extends il{static get className(){return"Adamax"}constructor(t,n,o,a=null,i=0){super(),this.learningRate=t,this.beta1=n,this.beta2=o,this.epsilon=a,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Xe(()=>{this.iteration=On(0).variable(),this.accBeta1=On(n).variable()}),a==null&&(this.epsilon=Le.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);Xe(()=>{const o=Yt(1,this.accBeta1),a=Ht(-this.learningRate,St($e(this.iteration,this.decay),1));n.forEach((i,p)=>{const r=Le.registeredVariables[i],h=!1;this.accumulatedFirstMoment[p]==null&&(this.accumulatedFirstMoment[p]={originalName:`${i}/m`,variable:Tn(r).variable(h)}),this.accumulatedWeightedInfNorm[p]==null&&(this.accumulatedWeightedInfNorm[p]={originalName:`${i}/v`,variable:Tn(r).variable(h)});const f=Array.isArray(t)?t[p].tensor:t[i];if(f==null)return;const u=this.accumulatedFirstMoment[p].variable,l=this.accumulatedWeightedInfNorm[p].variable,d=St($e(u,this.beta1),$e(f,1-this.beta1)),x=$e(l,this.beta2),S=js(f),m=ol(x,S);u.assign(d),l.assign(m);const y=St($e(Ht(a,o),Ht(d,St(m,this.epsilon))),r);r.assign(y)}),this.iteration.assign(St(this.iteration,1)),this.accBeta1.assign($e(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&cn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&cn(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rx extends il{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(o=>o.name):Object.keys(t)).forEach((o,a)=>{const i=Array.isArray(t)?t[a].tensor:t[o];if(i==null)return;const p=Le.registeredVariables[o];Xe(()=>{const r=St($e(this.c,i),p);p.assign(r)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=Ca(On(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BE extends Rx{static get className(){return"Momentum"}constructor(t,n,o=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=o,this.accumulations=[],this.m=On(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(o=>o.name):Object.keys(t)).forEach((o,a)=>{const i=Le.registeredVariables[o];this.accumulations[a]==null&&(this.accumulations[a]={originalName:`${o}/momentum`,variable:Xe(()=>Tn(i).variable(!1))});const p=this.accumulations[a].variable,r=Array.isArray(t)?t[a].tensor:t[o];r!=null&&Xe(()=>{let h;const f=St($e(this.m,p),r);this.useNesterov?h=St($e(this.c,St(r,$e(f,this.m))),i):h=St($e(this.c,f),i),p.assign(f),i.assign(h)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&cn(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(o=>({originalName:o.name,variable:o.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UE extends il{static get className(){return"RMSProp"}constructor(t,n=.9,o=0,a=null,i=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=o,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,a==null&&(this.epsilon=Le.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(o=>o.name):Object.keys(t)).forEach((o,a)=>{const i=Le.registeredVariables[o],p=!1;this.accumulatedMeanSquares[a]==null&&(this.accumulatedMeanSquares[a]={originalName:`${o}/rms`,variable:Xe(()=>Tn(i).variable(p))}),this.accumulatedMoments[a]==null&&(this.accumulatedMoments[a]={originalName:`${o}/momentum`,variable:Xe(()=>Tn(i).variable(p))}),this.accumulatedMeanGrads[a]==null&&this.centered&&(this.accumulatedMeanGrads[a]={originalName:`${o}/mg`,variable:Xe(()=>Tn(i).variable(p))});const r=Array.isArray(t)?t[a].tensor:t[o];if(r==null)return;const h=this.accumulatedMeanSquares[a].variable,f=this.accumulatedMoments[a].variable;Xe(()=>{const u=St($e(h,this.decay),$e(ur(r),1-this.decay));if(this.centered){const l=this.accumulatedMeanGrads[a].variable,d=St($e(l,this.decay),$e(r,1-this.decay)),x=Ht($e(r,this.learningRate),ws(Yt(u,St(ur(d),this.epsilon)))),S=St($e(f,this.momentum),x);h.assign(u),l.assign(d),f.assign(S);const m=Yt(i,S);i.assign(m)}else{const l=St($e(h,this.decay),$e(ur(r),1-this.decay)),d=St($e(f,this.momentum),Ht($e(r,this.learningRate),ws(St(l,this.epsilon))));h.assign(l),f.assign(d);const x=Yt(i,d);i.assign(x)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&cn(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&cn(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&cn(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,o=!1;this.accumulatedMeanSquares=t.slice(0,n).map(a=>({originalName:a.name,variable:a.tensor.variable(o)})),this.accumulatedMoments=t.slice(n,n*2).map(a=>({originalName:a.name,variable:a.tensor.variable(o)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(a=>({originalName:a.name,variable:a.tensor.variable(o)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LP=[$E,LE,FE,PE,BE,UE,Rx];function FP(){for(const s of LP)xt(s)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RC(s,t,n,o){p(s),n=n??0,o=o??1,r(n,o);let a=0;const i=h=>(h.then(f=>{const u=n+ ++a/s.length*(o-n);return t(u),f}),h);function p(h){ye(h!=null&&Array.isArray(h)&&h.length>0,()=>"promises must be a none empty array")}function r(h,f){ye(h>=0&&h<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${h}`),ye(f>=0&&f<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${f}`),ye(f>=h,()=>`startFraction must be no more than endFraction, but got startFraction ${h} and endFraction ${f}`)}return Promise.all(s.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function PP(s,t){t==null&&(t={});const n=t.fetchFunc==null?Qe().platform.fetch:t.fetchFunc,o=s.map(l=>n(l,t.requestInit,{isBinary:!0})),r=(t.onProgress==null?await Promise.all(o):await RC(o,t.onProgress,0,.5)).map(l=>l.arrayBuffer());return t.onProgress==null?await Promise.all(r):await RC(r,t.onProgress,.5,1)}function BP(s,t){var n;const o=t.fetchFunc==null?Qe().platform.fetch:t.fetchFunc;let a=0,i;return(n=t.onProgress)===null||n===void 0||n.call(t,0),new ReadableStream({pull:async p=>{for(var r;a<s.length;){i||(i=(await o(s[a],t.requestInit,{isBinary:!0})).body.getReader());const{done:h,value:f}=await i.read();if(h){a++,i=void 0,(r=t.onProgress)===null||r===void 0||r.call(t,a/s.length);continue}p.enqueue(f);return}p.close()}})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UP="application/octet-stream",zP="application/json";class Nx{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(ye(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Qe().platform.fetch,ye(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&ye(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const o=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=JO(t,o);if(n.body.append("model.json",new Blob([JSON.stringify(a)],{type:zP}),"model.json"),t.weightData!=null){const p=nl.join(t.weightData);n.body.append("model.weights.bin",new Blob([p],{type:UP}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:tx(t),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let p=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?p+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":p+=" Please make sure the server is serving valid JSON for this request.",new Error(p)}const o=n.modelTopology,a=n.weightsManifest;if(o==null&&a==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const t=await this.loadModelJSON();return t3(t,n=>this.loadWeights(n))}async loadStream(){const t=await this.loadModelJSON(),n=await this.getWeightUrls(t.weightsManifest),o=yC(t.weightsManifest),a=()=>BP(n,this.loadOptions);return Object.assign(Object.assign({},t),{weightSpecs:o,getWeightStream:a})}async getWeightUrls(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[o,a]=VP(n),i=this.weightPathPrefix||o,p=[],r=[];for(const h of t)for(const f of h.paths)this.weightUrlConverter!=null?r.push(this.weightUrlConverter(f)):p.push(i+f+a);return this.weightUrlConverter&&p.push(...await Promise.all(r)),p}async loadWeights(t){const n=await this.getWeightUrls(t),o=yC(t),a=await PP(n,this.loadOptions);return[o,a]}}Nx.URL_SCHEME_REGEX=/^https?:\/\//;function VP(s){const t=s.lastIndexOf("/"),n=s.lastIndexOf("?"),o=s.substring(0,t),a=n>t?s.substring(n):"";return[o+"/",a]}function NC(s){return s.match(Nx.URL_SCHEME_REGEX)!=null}const zE=(s,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(s)?n=s.every(o=>NC(o)):n=NC(s),n)return VE(s,t)}return null};es.registerSaveRouter(zE);es.registerLoadRouter(zE);function VE(s,t){return new Nx(s,t)}function GP(s,t){return VE(s,t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Al;function WP(s,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(s==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,o=!1,a=!1,i=!1,p=!1,r=!1;if(s.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&s instanceof ImageData)o=!0;else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement)i=!0;else if(s.getContext!=null)p=!0;else if(typeof ImageBitmap<"u"&&s instanceof ImageBitmap)r=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${s.constructor.name}`);if(wv(vv,Le.backendName)!=null){const S={pixels:s},m={numChannels:t};return Le.runKernel(vv,S,m)}const[f,u]=a?[s.videoWidth,s.videoHeight]:[s.width,s.height];let l;if(p)l=s.getContext("2d").getImageData(0,0,f,u).data;else if(o||n)l=s.data;else if(i||a||r){if(Al==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Al=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Al=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Al.canvas.width=f,Al.canvas.height=u,Al.drawImage(s,0,0,f,u),l=Al.getImageData(0,0,f,u).data}let d;if(t===4)d=new Int32Array(l);else{const S=f*u;d=new Int32Array(S*t);for(let m=0;m<S;m++)for(let y=0;y<t;++y)d[m*t+y]=l[m*4+y]}return kF(d,[u,f,t],"int32")}const HP=Be({fromPixels_:WP});function Dx(s,t){const n=s.shape.length,o=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(o<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${o}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[o-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[o-1]} vs. ${n}`);if(at(s.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${s.shape}.`);const a=t.shape,i=a[a.length-1];let p=1;for(let l=0;l<a.length-1;++l)p*=a[l];const r=s.shape,h=a.slice();h.pop();let f=1;for(let l=i;l<n;++l)f*=r[l],h.push(r[l]);const u=[...Vt(s.shape).map(l=>l/f),1].slice(0,i);return[h,p,f,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mv=-2,qP=-1;function Mx(s,t,n){const o=s.shape.length;ye(o===t.length,()=>`Error in slice${o}D: Length of begin ${t} must match the rank of the array (${o}).`),ye(o===n.length,()=>`Error in slice${o}D: Length of size ${n} must match the rank of the array (${o}).`);for(let a=0;a<o;++a)ye(t[a]+n[a]<=s.shape[a],()=>`Error in slice${o}D: begin[${a}] + size[${a}] (${t[a]+n[a]}) would overflow input.shape[${a}] (${s.shape[a]})`)}function XP(s){const t=[];let n=0;for(;s>0;)s&1&&t.push(n),s/=2,n++;return t}function Ox(s,t,n){const o=[];for(let a=0;a<s.length;a++)o[a]=Math.ceil((t[a]-s[a])/n[a]);return o}function GE(s,t,n,o){const a=[...s];for(let i=a.length;i<o.length;i++)a.push(1);for(let i=0;i<n;i++)i===0?a[t]=1:(a.splice(t,0,1),a.pop());return a}function WE(s,t,n){return n<=s?n:n-(t-1)}function HE(s,t){const n=[];for(let o=0;o<s;o++)n.push(t+o);return n}function YP(s,t,n,o,a,i,p,r,h){const f=s.length;let u=new Array(f),l=new Array(f),d=new Array(f);if(t.length&&n>0){const x=t[0],S=n+1;u=qE(p,x,S,o,s),l=XE(r,x,S,a,s),d=GE(i,x,S,s)}else for(let x=0;x<f;x++)u[x]=KE(p,o,i,s,x,h),l[x]=ZE(r,a,i,s,x,h),d[x]=YE(i,x,h);return{begin:u,end:l,strides:d}}function qE(s,t,n,o,a){const i=[...a],p=HE(n,t);for(let r=0;r<i.length;r++)if(p.indexOf(r)>-1)i[r]=0;else{const h=WE(t,n,r);let f=o[h];s&1<<h&&(f=0),i[r]=f}return i}function XE(s,t,n,o,a){const i=[...a],p=HE(n,t);for(let r=0;r<i.length;r++)if(p.indexOf(r)>-1)i[r]=Number.MAX_SAFE_INTEGER;else{const h=WE(t,n,r);let f=o[h];s&1<<h&&(f=Number.MAX_SAFE_INTEGER),i[r]=f}for(let r=0;r<i.length;r++){const h=a[r];i[r]<0&&(i[r]+=h),i[r]=Vl(0,i[r],a[r])}return i}function YE(s,t,n){let o=s[t];return(n&1<<t||o==null)&&(o=1),o}function KE(s,t,n,o,a,i){let p=t[a];const r=n[a]||1;(s&1<<a||i&1<<a||p==null)&&(r>0?p=Number.MIN_SAFE_INTEGER:p=Number.MAX_SAFE_INTEGER);const h=o[a];return p<0&&(p+=h),p=Vl(0,p,h-1),p}function ZE(s,t,n,o,a,i){let p=t[a];const r=n[a]||1;(s&1<<a||i&1<<a||p==null)&&(r>0?p=Number.MAX_SAFE_INTEGER:p=Number.MIN_SAFE_INTEGER);const h=o[a];return p<0&&(p+=h),r>0?p=Vl(0,p,h):p=Vl(-1,p,h-1),p}function $x(s,t,n){let o=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){o=a;break}for(let a=o+1;a<n.length;a++)if(t[a]>0||n[a]!==s[a])return!1;return!0}function Lx(s,t){let n=s.length>0?s[s.length-1]:1;for(let o=0;o<s.length-1;o++)n+=s[o]*t[o];return n}function gy(s,t,n){let o;const a=s.shape.length;typeof t=="number"?o=[t,...new Array(a-1).fill(0)]:t.length<a?o=t.concat(new Array(a-t.length).fill(0)):o=t.slice(),o.forEach(p=>{ye(p!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(a).fill(-1):typeof n=="number"?i=[n,...new Array(a-1).fill(-1)]:n.length<a?i=n.concat(new Array(a-n.length).fill(-1)):i=n,i=i.map((p,r)=>p>=0?p:(ye(p===-1,()=>`Negative size values should be exactly -1 but got ${p} for the slice() size at index ${r}.`),s.shape[r]-o[r])),[o,i]}function Fx(s,t,n,o,a,i,p,r,h){let f;if(o==null?(f=new Array(t.length),f.fill(1)):f=o,p!=null&&(p&p-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const l={dims:f.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:f.slice(),beginMask:a,endMask:i,ellipsisMask:p,newAxisMask:r,shrinkAxisMask:h};for(let w=0;w<l.dims;w++)u&&(1<<w&r)!==0&&l.numAddAxisAfterEllipsis++,1<<w&p&&(u=!0);u||(l.ellipsisMask|=1<<l.dims,l.dims++);const d={dims:s.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};KP(l,d);let x=!0,S=!0,m=!0;const y=[],b=[];for(let w=0;w<s.length;++w){if(d.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const _=!!(d.shrinkAxisMask&1<<w),C=s[w];if(C===-1){y.push(_?1:-1);continue}const k=[d.beginMask&1<<w,d.endMask&1<<w],E=[d.strides[w]>0?0:-1,d.strides[w]>0?C:C-1];if(_&&d.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&d.strides[w]===1;const j=!!(d.beginMask&1<<w&&d.endMask&1<<w);if(d.beginValid&&d.endValid){if(_){const D=d.begin[w]<0?C+d.begin[w]:d.begin[w];if(d.begin[w]=D,d.end[w]=d.begin[w]+1,D<0||D>=C)throw Error(`slice index ${d.begin[w]} of dimension ${w} out of bounds.`)}else d.begin[w]=DC(d.begin[w],0,d.strides[w],C,k,E),d.end[w]=DC(d.end[w],1,d.strides[w],C,k,E);const N=d.strides[w]===1&&d.begin[w]===0&&d.end[w]===C;x=x&&N,S=S&&(w===0&&d.strides[w]===1||N)}else x=x&&d.strides[w]===1&&j,S=S&&(w===0&&d.strides[w]===1||j);let A,O=!1;if(d.beginValid&&d.endValid?(A=d.end[w]-d.begin[w],O=!0):_?(A=1,O=!0):j&&C>=0&&(d.strides[w]<0?A=-C:A=C,O=!0),O){let N;A===0||A<0!=d.strides[w]<0?N=0:N=Math.trunc(A/d.strides[w])+(A%d.strides[w]!==0?1:0),y.push(N)}else y.push(-1)}for(let w=0;w<d.finalShapeGatherIndices.length;++w){const _=d.finalShapeGatherIndices[w];_>=0?b.push(y[_]):_===Mv&&b.push(1)}return{finalShapeSparse:b.filter((w,_)=>d.finalShapeGatherIndices[_]!==Mv),finalShape:b,isIdentity:x,sliceDim0:S,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function KP(s,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=s.begin!=null,t.endValid=s.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let o=0;o<s.dims;o++)if(1<<o&s.ellipsisMask){const a=Math.min(t.dims-(s.dims-o)+1+s.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=o}else if(1<<o&s.newAxisMask)t.finalShapeGatherIndices.push(Mv),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);s.begin!=null&&(t.begin[n]=s.begin[o]),s.end!=null&&(t.end[n]=s.end[o]),t.strides[n]=s.strides[o],s.beginMask&1<<o&&(t.beginMask|=1<<n),s.endMask&1<<o&&(t.endMask|=1<<n),s.shrinkAxisMask&1<<o?(t.finalShapeGatherIndices.push(qP),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(o)),t.inputShapeGatherIndicesSparse[n]=o,n++}}function DC(s,t,n,o,a,i){if(a[t])return n>0?i[t]:i[t+1&1];{const p=s<0?o+s:s;return p<i[0]?i[0]:p>i[1]?i[1]:p}}const ZP=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:Mx,computeFlatOffset:Lx,computeOutShape:Ox,getNormalizedAxes:YP,isSliceContinous:$x,maskToAxes:XP,parseSliceParams:gy,sliceInfo:Fx,startForAxis:KE,startIndicesWithElidedDims:qE,stopForAxis:ZE,stopIndicesWithElidedDims:XE,stridesForAxis:YE,stridesWithElidedDims:GE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QP{static sgd(t){return new Rx(t)}static momentum(t,n,o=!1){return new BE(t,n,o)}static rmsprop(t,n=.9,o=0,a=null,i=!1){return new UE(t,n,o,a,i)}static adam(t=.001,n=.9,o=.999,a=null){return new FE(t,n,o,a)}static adadelta(t=.001,n=.95,o=null){return new $E(t,n,o)}static adamax(t=.002,n=.9,o=.999,a=null,i=0){return new PE(t,n,o,a,i)}static adagrad(t,n=.1){return new LE(t,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tc=QP;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JP=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:s=>s();function QE(){return new Promise(s=>JP(()=>s()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Px(s,t){const n=s[0].length;s.forEach((a,i)=>{ye(a.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),ye(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const o=s[0];s.forEach((a,i)=>{for(let p=0;p<n;p++)ye(p===t||a[p]===o[p],()=>`Error in concat${n}D: Shape of tensors[${i}] (${a}) does not match the shape of the rest (${o}) along the non-concatenated axis ${i}.`)})}function ka(s,t){const n=s[0].slice();for(let o=1;o<s.length;o++)n[t]+=s[o][t];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Zo;(function(s){s[s.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",s[s.VALUE_ROWIDS=1]="VALUE_ROWIDS",s[s.ROW_LENGTHS=2]="ROW_LENGTHS",s[s.ROW_SPLITS=3]="ROW_SPLITS",s[s.ROW_LIMITS=4]="ROW_LIMITS",s[s.ROW_STARTS=5]="ROW_STARTS"})(Zo||(Zo={}));function JE(s,t,n){let o=new Array;if(n==null&&t==null)return o;if(t==null)for(;o.length<s+n.length;)o.push(-1);else o=t.slice();if(n==null)return o;if(s+n.length!==o.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${s+n.length}, but shape.rank = ${o.length}`);for(let a=1;a<n.length;++a){const i=n[a],p=o[o.length-n.length+a],r=o[p];if(i>=0)if(r>=0){if(r!==i)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${a+s}] = ${i} but shape[${a+s}] = ${r}`)}else o[p]=i}return o}function ej(s){const t={FIRST_DIM_SIZE:Zo.FIRST_DIM_SIZE,VALUE_ROWIDS:Zo.VALUE_ROWIDS,ROW_LENGTHS:Zo.ROW_LENGTHS,ROW_SPLITS:Zo.ROW_SPLITS,ROW_LIMITS:Zo.ROW_LIMITS,ROW_STARTS:Zo.ROW_STARTS},n=[];for(const o of s)if(o in t)n.push(t[o]);else break;return n}function tj(s){return s.length===0?0:s[0]===Zo.FIRST_DIM_SIZE?s.length-1:s.length}function nj(s,t){if(s==null||t==null)return;const n=s.length,o=t.length;if(n>=o)throw new Error(`defaultValue.shape=${s} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${o})`);for(let a=0;a<Math.min(n,o-1);++a){const i=s[a],p=t[a+1];if(i>=0&&p>=0&&i!==1&&i!==p)throw new Error(`defaultValue.shape=${s}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${a-s.length}] = ${i} but ragged tensor input.flatValues.shape[${a-s.length}] = ${p}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bx=30;function yy(s){return s<=Bx?s:gv(s,Math.floor(Math.sqrt(s)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ux(s,t,n){const o=n*(typeof s=="number"?s:s[0]),a=t*(typeof s=="number"?s:s[1]);return[o,a]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mf(s,t,n,o=!0){let a=[];if(o)a=a.concat(t.slice(0)),a.push(s[0]/n),a=a.concat(s.slice(1));else{a=a.concat(s[0]);const i=t.length;for(let p=0;p<i;++p)a=a.concat([s[p+1]/t[p],t[p]]);a=a.concat(s.slice(i+1))}return a}function gf(s,t,n=!0){const o=[];if(n){o.push(t);for(let a=t+1;a<s;++a)a<=2*t?(o.push(a),o.push(a-(t+1))):o.push(a)}else{const a=[],i=[];for(let p=1;p<s;++p)p>=t*2+1||p%2===1?i.push(p):a.push(p);o.push(...a),o.push(0),o.push(...i)}return o}function yf(s,t,n,o=!0){const a=[];o?a.push(s[0]/n):a.push(s[0]*n);for(let i=1;i<s.length;++i)i<=t.length?o?a.push(t[i-1]*s[i]):a.push(s[i]/t[i-1]):a.push(s[i]);return a}function zx(s,t){const n=[0];for(let o=0;o<t;++o)n.push(s[o][0]);return n}function Vx(s,t,n){const o=s.slice(0,1);for(let a=0;a<n;++a)o.push(s[a+1]-t[a][0]-t[a][1]);return o}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const by=1.7580993408473768,vy=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gx=.3275911,Wx=.254829592,Hx=-.284496736,qx=1.421413741,Xx=-1.453152027,Yx=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(s,t){if(s.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${s.length}, imag: ${t.length}.`);const n=new Float32Array(s.length*2);for(let o=0;o<n.length;o+=2)n[o]=s[o/2],n[o+1]=t[o/2];return n}function rj(s){const t=new Float32Array(s.length/2),n=new Float32Array(s.length/2);for(let o=0;o<s.length;o+=2)t[o/2]=s[o],n[o/2]=s[o+1];return{real:t,imag:n}}function sj(s){const t=Math.ceil(s.length/4),n=new Float32Array(t),o=new Float32Array(t);for(let a=0;a<s.length;a+=4)n[Math.floor(a/4)]=s[a],o[Math.floor(a/4)]=s[a+1];return{real:n,imag:o}}function oj(s){const t=Math.floor(s.length/4),n=new Float32Array(t),o=new Float32Array(t);for(let a=2;a<s.length;a+=4)n[Math.floor(a/4)]=s[a],o[Math.floor(a/4)]=s[a+1];return{real:n,imag:o}}function Kx(s,t){const n=s[t*2],o=s[t*2+1];return{real:n,imag:o}}function aj(s,t,n,o){s[o*2]=t,s[o*2+1]=n}function ij(s,t){const n=new Float32Array(s/2),o=new Float32Array(s/2);for(let a=0;a<Math.ceil(s/2);a++){const i=(t?2:-2)*Math.PI*(a/s);n[a]=Math.cos(i),o[a]=Math.sin(i)}return{real:n,imag:o}}function lj(s,t,n){const o=(n?2:-2)*Math.PI*(s/t),a=Math.cos(o),i=Math.sin(o);return{real:a,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wb="->",e5=/->/g,MC=",",OC="...";function Zx(s,t){s=s.replace(/\s/g,"");const n=(s.length-s.replace(e5,"").length)/Wb.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Wb}").`);const[o,a]=s.split(Wb);ye(o.indexOf(OC)===-1,()=>`The ellipsis notation ("${OC}") is not supported yet.`);const i=o.split(MC),p=i.length;if(t!==p)throw new Error(`Expected ${p} input tensors, received ${t}`);if(p>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const r=[];for(let d=0;d<a.length;++d){const x=a[d];if(!i.some(S=>S.indexOf(x)!==-1))throw new Error(`Output subscripts contain the label ${x} not present in the input subscripts.`);r.indexOf(x)===-1&&r.push(x)}for(let d=0;d<o.length;++d){const x=o[d];r.indexOf(x)===-1&&x!==MC&&r.push(x)}const h=new Array(i.length);for(let d=0;d<p;++d){if(new Set(i[d].split("")).size!==i[d].length)throw new Error(`Found duplicate axes in input component ${i[d]}. Support for duplicate axes in input is not implemented yet.`);h[d]=[];for(let x=0;x<i[d].length;++x)h[d].push(r.indexOf(i[d][x]))}const f=r.length,u=a.length,l=[];for(let d=u;d<f;++d)l.push(d);return{allDims:r,summedDims:l,idDims:h}}function Qx(s,t){let n=new Array(s);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;const o=[];for(let a=0;a<s;++a)n[a]===-1&&o.push(a);return n=n.filter(a=>a!==-1),{permutationIndices:n,expandDims:o}}function Jx(s,t,n){const o=new Array(s);for(let a=0;a<n.length;++a){const i=n[a].shape;for(let p=0;p<t[a].length;++p)o[t[a][p]]===void 0?o[t[a][p]]=i[p]:ye(o[t[a][p]]===i[p],()=>`Expected dimension ${o[t[a][p]]} at axis ${p} of input shaped ${JSON.stringify(i)}, but got dimension ${i[p]}`)}}function ew(s,t){const n=s,o=[];let a=0;s.length===0&&n.push(-1),a=s.length+1;for(let p=0;p<a;++p)o.push([]);const i=[];for(let p=0;p<n.length;++p){const r=n[p],h=t5(t,r);for(const f of h)i.indexOf(f)===-1&&(o[p].push(f),i.push(f))}return{path:n,steps:o}}function tw(s){return s.every((t,n)=>t===n)}function t5(s,t){const n=[];for(let o=0;o<s.length;++o)(s[o].length===0||s[o].indexOf(t)!==-1||t===-1)&&n.push(o);return n}function nw(s,t,n=0){let o=[];if(typeof t=="number")ye(s.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),o=new Array(t).fill(s.shape[n]/t);else{const a=t.reduce((p,r)=>(r===-1&&(p+=1),p),0);ye(a<=1,()=>"There should be only one negative value in split array.");const i=t.indexOf(-1);if(i!==-1){const p=t.reduce((r,h)=>h>0?r+h:r);t[i]=s.shape[n]-p}ye(s.shape[n]===t.reduce((p,r)=>p+r),()=>"The sum of sizes must match the size of the axis dimension."),o=t}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uj(s){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${s}`}function cj(s,t){return`indices(${s}, 0) is invalid: ${t} < 0`}function dj(s,t,n){return`indices(${s}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hj(s,t){return`only one output dimension may be -1, not both ${s} and ${t}`}function fj(s,t){return`size ${s} must be non-negative, not ${t}`}function pj(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function mj(s,t){const n=at(s),o=at(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${o}. inputShape=${s} outputShape= ${t}`}function gj(s,t){const n=at(s),o=at(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${o}. inputShape=${s} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ov(){return"segment ids must be >= 0"}function yj(){return"segment ids are not increasing"}function bj(s,t){return`Segment id ${s} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function vj(s,t,n){return`Bad: indices[${s}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xj(s,t){let n=!1,o;for(s<=Bx?(o=s,n=!0):o=gv(s,Math.floor(Math.sqrt(s)));!n;)o>t||o===s?n=!0:o=gv(s,o+1);return o}function wj(s,t,n){const o=[],a=s.length;for(let i=0;i<a;i++)i!==t?o.push(s[i]):o.push(n);return o}function rw(s,t,n,o){const a=t.shape.length,i=s.shape.length;if(o!==0&&(o<-a||o>a))throw new Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${o}`);if(o<0&&(o+=a),o>i)throw new Error(`batchDims (${o}) must be less than rank(x) (
    ${i}).`);if(n<o)throw new Error(`batchDims (${o}) must be less than or equal to axis (${n}).`);for(let l=0;l<o;++l)if(s.shape[l]!==t.shape[l])throw new Error(`x.shape[${l}]: ${s.shape[l]} should be equal to indices.shape[${l}]: ${t.shape[l]}.`);const p=s.shape[n],r=[];let h=1,f=1,u=1;for(let l=0;l<o;++l)r.push(s.shape[l]),h*=s.shape[l];for(let l=o;l<n;l++)r.push(s.shape[l]),f*=s.shape[l];for(let l=o;l<a;l++)r.push(t.shape[l]);for(let l=n+1;l<i;l++)r.push(s.shape[l]),u*=s.shape[l];return{batchSize:h,sliceSize:u,outerSize:f,dimSize:p,outputShape:r}}const n5=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:rw,computeOutShape:wj,segOpComputeOptimalWindowSize:xj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oi(s){try{return s.map(t=>qi(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function Sj(s){return s.map(t=>Gi(t))}const r5=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Wx,ERF_A2:Hx,ERF_A3:qx,ERF_A4:Xx,ERF_A5:Yx,ERF_P:Gx,PARALLELIZE_THRESHOLD:Bx,get RowPartitionType(){return Zo},SELU_SCALE:vy,SELU_SCALEALPHA:by,applyActivation:kx,assertAndGetBroadcastShape:on,assertAxesAreInnerMostDims:fs,assertParamsConsistent:Px,assignToTypedArray:aj,axesAreInnerMostDims:lx,calculateShapes:uu,checkEinsumDimSizes:Jx,checkPadOnDimRoundingMode:zs,combineLocations:hE,combineRaggedTensorToTensorShapes:JE,complexWithEvenIndex:sj,complexWithOddIndex:oj,computeConv2DInfo:hs,computeConv3DInfo:rl,computeDefaultPad:nx,computeDilation2DInfo:cf,computeOptimalWindowSize:yy,computeOutAndReduceShapes:ss,computeOutShape:ka,computePool2DInfo:$o,computePool3DInfo:li,convertConv2DDataFormat:ui,decodeEinsumEquation:Zx,eitherStridesOrDilationsAreOne:Ss,expandShapeToKeepDim:Fr,exponent:lj,exponents:ij,fromStringArrayToUint8:Sj,fromUint8ToStringArray:oi,getAxesPermutation:br,getBroadcastDims:mc,getComplexWithIndex:Kx,getEinsumComputePath:ew,getEinsumPermutation:Qx,getFusedBiasGradient:Cx,getFusedDyActivation:_x,getImageCenter:Ux,getInnerMostAxes:Rr,getPermuted:gf,getRaggedRank:tj,getReductionAxes:qr,getReshaped:mf,getReshapedPermuted:yf,getRowPartitionTypesHelper:ej,getSliceBeginCoords:zx,getSliceSize:Vx,getSparseFillEmptyRowsIndicesDenseShapeMismatch:uj,getSparseFillEmptyRowsNegativeIndexErrorMessage:cj,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:dj,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:pj,getSparseReshapeInputOutputMismatchErrorMessage:gj,getSparseReshapeInputOutputMultipleErrorMessage:mj,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:hj,getSparseReshapeNegativeOutputDimErrorMessage:fj,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:vj,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Ov,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:yj,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:bj,getUndoAxesPermutation:sl,isIdentityPermutation:tw,log:bO,mergeRealAndImagArrays:si,prepareAndValidate:Dx,prepareSplitSize:nw,segment_util:n5,shouldFuse:Tx,slice_util:ZP,splitRealAndImagArrays:rj,stridesOrDilationsArePositive:Yl,tupleValuesAreOne:Xl,upcastType:Qs,validateDefaultValueShape:nj,validateInput:TF,validateUpdateShape:AE,warn:uo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */FP();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _j={kernelName:ug,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(s,pf(Ot(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5={kernelName:hh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>{const o=ur(Ot(n,"float32")),a=ws(Yt(On(1),o));return Ir(Ht(s,a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o5={kernelName:fh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>{const o=ws(Yt(ur(Ot(n,"float32")),1));return Ht(s,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5={kernelName:Tc,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t,a=on(n.shape,o.shape);return{a:()=>{let r=s;const h=qr(n.shape,a);return h.length>0&&(r=Wt(r,h)),Pe(r,n.shape)},b:()=>{let r=s;const h=qr(o.shape,a);return h.length>0&&(r=Wt(r,h)),Pe(r,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i5={kernelName:h1,saveAllInputs:!0,gradFunc:(s,t)=>{const n={};return t.forEach((o,a)=>{n[a]=()=>s.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l5={kernelName:cg,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Tn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u5={kernelName:dg,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Tn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c5={kernelName:ph,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ht(s,ws(Yt(On(1),ur(Ot(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5={kernelName:mh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>{const o=ws(St(On(1),ur(Ot(n,"float32"))));return Ht(s,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h5={kernelName:bh,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t,a=on(n.shape,o.shape);return{a:()=>{const r=St(ur(n),ur(o));let h=$e(s,Ht(o,r));const f=qr(n.shape,a);return f.length>0&&(h=Wt(h,f)),Pe(h,n.shape)},b:()=>{const r=St(ur(n),ur(o));let h=Ir($e(s,Ht(n,r)));const f=qr(o.shape,a);return f.length>0&&(h=Wt(h,f)),Pe(h,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f5={kernelName:gh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ht(s,St(ur(Ot(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5={kernelName:yh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ht(s,Yt(On(1),ur(Ot(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5(s,t,n,o,a,i){const p=je(s,"dy","avgPool3dGrad"),r=je(t,"input","avgPool3dGrad");let h=p,f=r,u=!1;r.rank===4&&(u=!0,h=Pe(p,[1,p.shape[0],p.shape[1],p.shape[2],p.shape[3]]),f=Pe(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]])),ye(h.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${h.rank}.`),ye(f.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${f.rank}.`),zs("avgPool3dGrad",a,i);const l={dy:h,input:f},d={filterSize:n,strides:o,pad:a,dimRoundingMode:i},x=Le.runKernel(g1,l,d);return u?Pe(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}const g5=Be({avgPool3dGrad_:m5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5={kernelName:fg,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{filterSize:a,strides:i,pad:p,dimRoundingMode:r}=n;return{x:()=>g5(s,o,a,i,p,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5(s,t,n,o,a){const i=je(s,"dy","avgPoolGrad"),p=je(t,"input","avgPoolGrad");ye(p.rank===i.rank,()=>`Rank of input (${p.rank}) does not match rank of dy (${i.rank})`);let r=p,h=i,f=!1;p.rank===3&&(f=!0,r=Pe(p,[1,p.shape[0],p.shape[1],p.shape[2]]),h=Pe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ye(h.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${h.rank}.`),ye(r.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${r.rank}.`);const u={dy:h,input:r},l={filterSize:n,strides:o,pad:a},d=Le.runKernel(m1,u,l);return f?Pe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const v5=Be({avgPoolGrad_:b5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x5={kernelName:hg,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{filterSize:a,strides:i,pad:p}=n;return{x:()=>v5(s,o,a,i,p)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5={kernelName:pg,inputsToSave:["a","b"],gradFunc:(s,t,n)=>{const[o,a]=t,{transposeA:i,transposeB:p}=n;return!i&&!p?{a:()=>Mn(s,a,!1,!0),b:()=>Mn(o,s,!0,!1)}:!i&&p?{a:()=>Mn(s,a,!1,!1),b:()=>Mn(s,o,!0,!1)}:i&&!p?{a:()=>Mn(a,s,!1,!0),b:()=>Mn(o,s,!1,!1)}:{a:()=>Mn(a,s,!0,!0),b:()=>Mn(s,o,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S5={kernelName:mg,gradFunc:(s,t,n)=>{const{blockShape:o,crops:a}=n;return{x:()=>gx(s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5={kernelName:mO,gradFunc:(s,t,n)=>{const o=n,a=o.inputShape,i=o.shape,p=Array.from(i);for(let h=a.length-1;h>=0;h--)if(a[h]===i[h])p[h]=1;else if(a[h]!==1)throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${i}].`);const r=[];for(let h=0;h<p.length;h++)p[h]>1&&r.push(h);return{x:()=>Wt(s,r,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5={kernelName:vh,gradFunc:s=>({x:()=>s.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5={kernelName:xh,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T5={kernelName:wh,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>Rs(ni(iu(o,a),jc(o,i)),s,Tn(s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E5={kernelName:gg,inputsToSave:["x"],gradFunc:_j.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j5={kernelName:yg,saveAllInputs:!0,gradFunc:(s,t,n)=>{const o=t.map(h=>h.shape),{axis:a}=n,i=pn(a,t[0].shape)[0],p=o.map(h=>h[i]);return ho(s,p,i).map(h=>()=>h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I5={kernelName:bg,inputsToSave:["x","filter"],gradFunc:(s,t,n)=>{const[o,a]=t,{dilations:i,strides:p,pad:r,dataFormat:h}=n;return ye(Xl(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>ox(o.shape,s,a,p,r,h),filter:()=>Sx(o,s,a.shape,p,r,h)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A5={kernelName:vg,inputsToSave:["dy","filter"],gradFunc:(s,t,n)=>{const[o,a]=t,{strides:i,pad:p,dataFormat:r,dimRoundingMode:h}=n;return{dy:()=>Kl(s,a,i,p,r,1,h),filter:()=>Sx(s,o,a.shape,i,p,r,h)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5(s,t,n,o,a){let i=s;s.rank===4&&(i=Pe(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));let p=t;p.rank===4&&(p=Pe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),ye(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),ye(p.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${p.shape}.`),ye(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),ye(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),ye(p.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${p.shape[4]}) must match output depth for filter (${n[4]}).`);const r={x:i,dy:p},h={strides:o,pad:a,filterShape:n};return Le.runKernel(w1,r,h)}const N5=Be({conv3DBackpropFilter_:R5});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D5={kernelName:xg,inputsToSave:["x","filter"],gradFunc:(s,t,n)=>{const{dilations:o,strides:a,pad:i}=n;ye(Xl(o),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const[p,r]=t;return{x:()=>lE(p.shape,s,r,a,i),filter:()=>N5(p,s,r.shape,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5={kernelName:Sh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(Ir(TE(Ot(n,"float32"))),s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5={kernelName:_h,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(EE(Ot(n,"float32")),s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5={kernelName:wg,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{axis:a,exclusive:i,reverse:p}=n;return{x:()=>{const r=br([a],o.rank);let h=cE(s,a,i,!p);return r!=null&&(h=kn(h,r)),h}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5={kernelName:Sg,inputsToSave:["x","filter"],gradFunc:(s,t,n)=>{const{dilations:o,strides:a,pad:i,dimRoundingMode:p}=n,r=o??[1,1];ye(Xl(r),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${r}'`);const[h,f]=t;return ye(h.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${h.rank}.`),ye(f.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${f.rank}.`),ye(h.shape[3]===f.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),ye(Ss(a,r),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${r}'.`),zs("depthwiseConv2d",i,p),{x:()=>WF(h.shape,s,f,a,i,r,p),filter:()=>VF(h,s,f.shape,a,i,r,p)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5={kernelName:_g,inputsToSave:["x","filter"],gradFunc:(s,t,n)=>{const[o,a]=t,i={x:o,filter:a,dy:s},p={x:o,filter:a,dy:s};return{x:()=>Le.runKernel(yv,i,n),filter:()=>Le.runKernel(bv,p,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P5={kernelName:kh,outputsToSave:[!0],gradFunc:(s,t)=>{const[n]=t,o={dy:s,y:n};return{x:()=>Le.runKernel(A1,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5={kernelName:Th,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t,o=$e(Aa(Ir(ur(n))),2/Math.sqrt(Math.PI));return{x:()=>$e(s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U5={kernelName:Eh,outputsToSave:[!0],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z5={kernelName:kg,inputsToSave:["input"],gradFunc:(s,t)=>{const[n]=t;return{input:()=>Pe(s,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5={kernelName:jh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(s,Aa(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G5={kernelName:Ih,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5={kernelName:Ah,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t,a=on(n.shape,o.shape);return{a:()=>{const r=Ht(s,Ot(o,"float32")),h=qr(n.shape,a);return h.length>0?Pe(Wt(r,h),n.shape):r},b:()=>{let r=$e(s,Ot(n,"float32"));const h=qr(o.shape,a);h.length>0&&(r=Pe(Wt(r,h),o.shape));const f=ur(o);return Ir(Ht(r,Ot(f,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5={kernelName:Tg,inputsToSave:["x","mean","variance","scale"],gradFunc:(s,t,n)=>{const{varianceEpsilon:o}=n,[a,i,p,r]=t,h=r??On(1),f=qr(i.shape,a.shape),u=[];if(i.rank===1){for(let _=0;_<a.shape.length-1;++_)u.push(a.shape[_]);u.push(1)}const l=Yt(a,i),d=$e(s,h),x=_E(St(p,On(o))),S=$e($e($e(x,x),x),On(-.5));return{x:()=>i.rank===1?Pe($e($e(s,Jo(Pe(x,[1,1,1,i.shape[0]]),u)),h),a.shape):Pe($e($e(s,x),h),a.shape),mean:()=>{let _=$e($e(x,On(-1)),d);return i.rank===1&&(_=Wt(_,f)),Pe(_,i.shape)},variance:()=>{let _=$e($e(S,l),d);return i.rank===1&&(_=Wt(_,f)),Pe(_,i.shape)},scale:()=>{const _=$e(l,x);let C=$e(s,_);return i.rank===1&&(C=Wt(C,f)),Pe(C,i.shape)},offset:()=>{let _=s;return i.rank===1&&(_=Wt(_,f)),Pe(_,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5={kernelName:Eg,inputsToSave:["x","indices"],gradFunc:(s,t,n)=>{const[o,a]=t,{axis:i,batchDims:p}=n,r=pn(i,o.shape)[0],h=(f,u,l)=>()=>{const d=f.shape,x=u.size,S=d.slice(0,r),m=S.length,y=d.slice(i,d.length).slice(1),b=y.length,g=$C(0,m),w=$C(m+1,m+1+b),_=LC([S,[x],y]),C=Pe(l,_),k=Pe(u,[x]),E=LC([[m],g,w]),j=kn(C,E);let A=NE(j,k,f.shape[r]);const O=sl(E);return A=kn(A,O),A};if(p===1){const f=o.shape[0],u=o.split(f,0);return{x:()=>ri(u.map((x,S)=>h(x,a.slice(S,1),s.slice(S,1))())).reshape(o.shape),indices:()=>a}}else return{x:h(o,a,s),indices:()=>a}}};function $C(s,t){const n=[];for(let o=s;o<t;++o)n.push(o);return n}function LC(s){const t=[];for(let n=0;n<s.length;++n)for(let o=0;o<s[n].length;++o)t.push(s[n][o]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5={kernelName:Rh,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t;return{a:()=>Tn(n),b:()=>Tn(o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y5={kernelName:Nh,gradFunc:s=>({x:()=>Ot(s,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5={kernelName:Dh,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z5={kernelName:Mh,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5={kernelName:Oh,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5={kernelName:Ig,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{alpha:a}=n,i=go(o,0);return{x:()=>Rs(i,s,$e(s,a))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eB={kernelName:Lh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ht(s,St(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tB={kernelName:$h,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ht(s,Ot(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nB={kernelName:yO,inputsToSave:[],outputsToSave:[!0],gradFunc:(s,t,n)=>{const[o]=t,{axis:a}=n;return{logits:()=>{const p=Aa(o);return Yt(s,$e(Wt(s,a,!0),p))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rB(s,t,n,o=5,a=1,i=1,p=.5){const r={x:s,y:t,dy:n},h={depthRadius:o,bias:a,alpha:i,beta:p};return Le.runKernel($1,r,h)}const sB=Be({localResponseNormalizationBackprop_:rB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oB={kernelName:Og,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(s,t,n)=>{const[o,a]=t,{depthRadius:i,bias:p,alpha:r,beta:h}=n;return{x:()=>sB(o,a,s,i,p,r,h)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cj(s,t,n,o){return t.rank<n.rank&&(t=Pe(t,Fr(t.shape,o))),s.rank<n.rank&&(s=Pe(s,Fr(s.shape,o))),{x:()=>$e(s,Ot(Ia(n,t),s.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FC={kernelName:$g,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(s,t,n)=>{const o=n,{reductionIndices:a}=o,i=t[0],p=t[1],r=pn(a,i.shape),h=Cj(s,p,i,r);return{x:()=>h.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aB={kernelName:Fh,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t;return{a:()=>$e(s,Ot(iu(n,o),"float32")),b:()=>$e(s,Ot(Om(n,o),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iB(s,t,n,o,a,i,p){const r=je(s,"dy","maxPool3dGrad"),h=je(t,"input","maxPool3dGrad"),f=je(n,"output","maxPool3dGrad");let u=r,l=h,d=f,x=!1;h.rank===4&&(x=!0,u=Pe(r,[1,r.shape[0],r.shape[1],r.shape[2],r.shape[3]]),l=Pe(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]]),d=Pe(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),ye(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),ye(l.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),ye(d.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),zs("maxPool3dGrad",i,p);const S={dy:u,input:l,output:d},m={filterSize:o,strides:a,pad:i,dimRoundingMode:p},y=Le.runKernel(F1,S,m);return x?Pe(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const lB=Be({maxPool3dGrad_:iB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uB={kernelName:Fg,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(s,t,n)=>{const[o,a]=t,{filterSize:i,strides:p,pad:r,dimRoundingMode:h}=n;return{x:()=>lB(s,o,a,i,p,r,h)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cB(s,t,n,o,a,i,p){const r=je(s,"dy","maxPoolGrad"),h=je(t,"input","maxPoolGrad"),f=je(n,"output","maxPoolGrad");ye(h.rank===r.rank,()=>`Rank of input (${h.rank}) does not match rank of dy (${r.rank})`),ye(r.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${r.rank}.`),ye(h.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${h.rank}.`),zs("maxPoolGrad",i,p);const u={dy:r,input:h,output:f},l={filterSize:o,strides:a,pad:i,dimRoundingMode:p};return Le.runKernel(L1,u,l)}const dB=Be({maxPoolGrad_:cB});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hB={kernelName:Lg,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(s,t,n)=>{const[o,a]=t,{filterSize:i,strides:p,pad:r}=n;return{x:()=>dB(s,o,a,i,p,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fB={kernelName:Pg,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{axis:a}=n,i=pn(a,o.shape),r=ss(o.shape,i)[1],h=at(r);return{x:()=>{const u=o.shape.slice();i.forEach(x=>{u[x]=1});const l=Pe(s,u);return Ht($e(l,al(o.shape,"float32")),h)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pB={kernelName:Bg,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(s,t,n)=>{const o=n,{axis:a}=o,[i,p]=t,r=pn(a,i.shape),h=Cj(s,p,i,r);return{x:()=>h.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mB={kernelName:Ph,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t;return{a:()=>$e(s,Ot(jc(n,o),"float32")),b:()=>$e(s,Ot(go(n,o),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gB={kernelName:Ug,inputsToSave:["x"],gradFunc:(s,t,n)=>{const o=t[0],{paddings:a}=n,i=a.map(p=>p[0]);return{x:()=>sr(s,i,o.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yB={kernelName:Bh,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t,a=on(n.shape,o.shape);return{a:()=>{const r=qr(n.shape,a);return r.length>0?Pe(Wt(s,r),n.shape):s},b:()=>{const r=$e(s,Ir(my(Ht(n,o)))),h=qr(o.shape,a);return h.length>0?Pe(Wt(r,h),o.shape):r}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bB={kernelName:Uh,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t,a=on(n.shape,o.shape);return{a:()=>{const r=$e(s,Ot(o,"float32")),h=qr(n.shape,a);return h.length>0?Pe(Wt(r,h),n.shape):r},b:()=>{const r=$e(s,Ot(n,"float32")),h=qr(o.shape,a);return h.length>0?Pe(Wt(r,h),o.shape):r}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vB={kernelName:zg,gradFunc:s=>({x:()=>Ir(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xB={kernelName:Wg,inputsToSave:["indices"],gradFunc:(s,t)=>{const n=t[0];return{indices:()=>ns(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wB={kernelName:Gg,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SB={kernelName:Hg,saveAllInputs:!0,gradFunc:(s,t,n)=>{const{axis:o}=n;return Jl(s,o).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PC={kernelName:qg,inputsToSave:["x"],gradFunc:(s,t,n)=>{const o=t[0],{paddings:a}=n,i=a.map(p=>p[0]);return{x:()=>sr(s,i,o.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _B={kernelName:zh,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(s,t)=>{const[n,o,a]=t,i=n,p=o,r=on(i.shape,p.shape);return{a:()=>{const u=Ot(p,"float32");let l=$e(s,$e(u,Zl(i,Yt(u,On(1)))));const d=qr(i.shape,r);return d.length>0&&(l=Wt(l,d)),Pe(l,i.shape)},b:()=>{const u=go(i,0),l=Rs(u,Ra(i),Tn(i));let d=$e(s,$e(a,l));const x=qr(p.shape,r);return x.length>0&&(d=Wt(d,x)),Pe(d,p.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CB={kernelName:Xg,inputsToSave:["x","alpha"],gradFunc:(s,t)=>{const[n,o]=t,a=go(n,0);return{x:()=>Rs(a,s,$e(s,o)),alpha:()=>{let i=Rs(a,Tn(s),$e(s,n));const p=qr(o.shape,s.shape);return p.length>0&&(i=Wt(i,p)),Pe(i,o.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kB(s,t,n){const o=s.shape.slice();o[n]=1;const a=Pe(t,o),i=Nv(s,n,!0,!1),p=Nv(s,n,!0,!0),r=$e(i,p);return $e(a,r)}function TB(s,t,n){const o=s.shape.length,a=o-n.length,i=br(n,o);let p=s;i!=null&&(p=kn(s,i));const r=p.shape.slice(),f=r.splice(o-n.length,n.length).reduce((d,x)=>d*x,1);r.push(f);const u=p.reshape(r);let l=kB(u,t,a);if(l=l.reshape(p.shape),i!=null){const d=sl(i);l=kn(l,d)}return l}const EB={kernelName:Yg,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{axis:a}=n;let i=[];return a==null?i=o.shape.map((p,r)=>r):typeof a=="number"?i=[a]:i=a,{x:()=>TB(o,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jB={kernelName:Ch,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t,a=on(n.shape,o.shape);return{a:()=>{const r=Ht(s,Ot(o,"float32")),h=qr(n.shape,a);return h.length>0?Pe(Wt(r,h),n.shape):r},b:()=>{let r=$e(s,Ot(n,"float32"));const h=qr(o.shape,a);h.length>0&&(r=Pe(Wt(r,h),o.shape));const f=ur(o);return Ir(Ht(r,Ot(f,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IB={kernelName:Vh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ht(s,Ir(ur(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AB={kernelName:Wh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t,o=$e(jc(n,6),pf(n));return{x:()=>$e(s,Ot(o,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RB={kernelName:Gh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(s,Ot(pf(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NB={kernelName:Kg,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Pe(s,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DB={kernelName:Qg,inputsToSave:["images"],gradFunc:(s,t,n)=>{const[o]=t,a={dy:s,images:o};return{images:()=>Le.runKernel(W1,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MB={kernelName:Zg,inputsToSave:["images"],gradFunc:(s,t,n)=>{const[o]=t,a={dy:s,images:o};return{images:()=>Le.runKernel(G1,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OB={kernelName:Jg,gradFunc:(s,t,n)=>{const{dims:o}=n,a=pn(o,s.shape);return{x:()=>Ql(s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $B={kernelName:Hh,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LB={kernelName:qh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ir(Ht(s,$e(Zl(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FB={kernelName:ey,inputsToSave:["condition"],gradFunc:(s,t)=>{const[n]=t;return{condition:()=>Ot(Tn(n),"float32"),t:()=>$e(s,Ot(n,s.dtype)),e:()=>$e(s,Ot(hx(n),s.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PB={kernelName:Xh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>{const o=go(n,On(0)),a=On(by),i=On(vy),p=$e(s,i),r=$e($e(s,a),Aa(Ot(n,"float32")));return Rs(o,p,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BB={kernelName:Qh,outputsToSave:[!0],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(s,$e(n,Yt(On(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UB={kernelName:Zh,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zB={kernelName:Yh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(ax(Ot(n,"float32")),s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VB={kernelName:Kh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(uE(Ot(n,"float32")),s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GB={kernelName:ty,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{begin:a,size:i}=n,p=o.shape,[r,h]=gy(o,a,i),f=[];for(let u=0;u<s.rank;u++)f.push([r[u],p[u]-r[u]-h[u]]);return{x:()=>mx(s,f)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WB={kernelName:oy,outputsToSave:[!0],gradFunc:(s,t,n)=>{const[o]=t,{dim:a}=n,i=!0,p=$e(s,o);return{logits:()=>Yt(p,$e(Wt(p,[a],i),o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HB={kernelName:Jh,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(s,Ec(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BC={kernelName:ry,gradFunc:(s,t,n)=>{const{blockShape:o,paddings:a}=n;return{x:()=>sx(s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UC={kernelName:sy,gradFunc:(s,t,n)=>{const{axis:o}=n;return{x:()=>Ps(s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qB={kernelName:ef,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ht(s,$e(ws(Ot(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XB={kernelName:H1,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(s,$e(Ot(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YB={kernelName:tf,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t,a=On(2);return{a:()=>$e(s,$e(a,Yt(n,o))),b:()=>$e(s,$e(a,Yt(o,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KB={kernelName:af,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZB={kernelName:nf,inputsToSave:["a","b"],gradFunc:(s,t)=>{const[n,o]=t,a=on(n.shape,o.shape);return{a:()=>{let r=s;const h=qr(n.shape,a);return h.length>0&&(r=Wt(r,h)),Pe(r,n.shape)},b:()=>{let r=s;const h=qr(o.shape,a);return h.length>0&&(r=Wt(r,h)),Pe(Ir(r),o.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QB={kernelName:ny,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,a=o.shape.slice(),{axis:i}=n;pn(i,o.shape).forEach(f=>{a[f]=1});const r=Pe(s,a),h=$e(r,al(o.shape,"float32"));return{x:()=>h}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JB={kernelName:rf,inputsToSave:["x"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>Ht(s,ur(ax(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eU={kernelName:sf,outputsToSave:[!0],gradFunc:(s,t)=>{const[n]=t;return{x:()=>$e(Yt(On(1),ur(n)),s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tU={kernelName:of,inputsToSave:["x"],gradFunc:(s,t,n)=>{const[o]=t,{reps:a}=n;return{x:()=>{let p=Tn(o);if(o.rank===1)for(let r=0;r<a[0];++r)p=St(p,sr(s,[r*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(let r=0;r<a[0];++r)for(let h=0;h<a[1];++h)p=St(p,sr(s,[r*o.shape[0],h*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(let r=0;r<a[0];++r)for(let h=0;h<a[1];++h)for(let f=0;f<a[2];++f)p=St(p,sr(s,[r*o.shape[0],h*o.shape[1],f*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else if(o.rank===4)for(let r=0;r<a[0];++r)for(let h=0;h<a[1];++h)for(let f=0;f<a[2];++f)for(let u=0;u<a[3];++u)p=St(p,sr(s,[r*o.shape[0],h*o.shape[1],f*o.shape[2],u*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${o.rank} tensors yet.`);return p}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nU={kernelName:lc,gradFunc:(s,t,n)=>{const o=n,{perm:a}=o,i=sl(a);return{x:()=>kn(s,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rU={kernelName:ay,gradFunc:(s,t,n)=>{const o=n,{axis:a}=o;return{value:()=>ri(s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sU={kernelName:iy,inputsToSave:["segmentIds"],gradFunc:(s,t)=>{const[n]=t;return{x:()=>oU(s,n)}}};function oU(s,t){const n=ol(t,Tn(t)),o=ux(s,n);let a=iu(t,On(0,"int32"));const i=o.rank-a.rank;for(let r=0;r<i;++r)a=Ls(a,r+1);a=ni(a,al(o.shape,"bool"));const p=Tn(o);return Rs(a,o,p)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aU={kernelName:ly,gradFunc:s=>({x:()=>Tn(s)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iU=[_j,s5,o5,a5,i5,l5,u5,c5,d5,h5,f5,p5,y5,x5,w5,S5,_5,C5,k5,T5,E5,j5,A5,I5,D5,M5,O5,$5,L5,F5,jB,P5,B5,U5,z5,V5,W5,G5,H5,q5,X5,Y5,K5,Z5,Q5,J5,eB,tB,nB,oB,FC,FC,aB,uB,hB,fB,pB,mB,gB,yB,bB,vB,xB,wB,SB,PC,PC,_B,CB,EB,IB,AB,RB,NB,DB,MB,OB,$B,LB,FB,PB,BB,UB,zB,VB,GB,WB,HB,BC,BC,UC,UC,qB,YB,XB,KB,ZB,QB,JB,eU,tU,nU,rU,sU,aU];for(const s of iU)vO(s);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.abs=function(){return this.throwIfDisposed(),js(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.acos=function(){return this.throwIfDisposed(),N3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.acosh=function(){return this.throwIfDisposed(),M3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.add=function(s){return this.throwIfDisposed(),St(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.all=function(s,t){return this.throwIfDisposed(),oE(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.any=function(s,t){return this.throwIfDisposed(),Av(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.argMax=function(s){return this.throwIfDisposed(),Yd(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.argMin=function(s){return this.throwIfDisposed(),P3(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.asScalar=function(){return this.throwIfDisposed(),ye(this.size===1,()=>"The array must have only 1 element."),Pe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.asType=function(s){return this.throwIfDisposed(),Ot(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.as1D=function(){return this.throwIfDisposed(),Pe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.as2D=function(s,t){return this.throwIfDisposed(),Pe(this,[s,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.as3D=function(s,t,n){return this.throwIfDisposed(),Pe(this,[s,t,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.as4D=function(s,t,n,o){return this.throwIfDisposed(),Pe(this,[s,t,n,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.as5D=function(s,t,n,o,a){return this.throwIfDisposed(),Pe(this,[s,t,n,o,a])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.asin=function(){return this.throwIfDisposed(),U3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.asinh=function(){return this.throwIfDisposed(),V3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.atan=function(){return this.throwIfDisposed(),W3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.atan2=function(s){return this.throwIfDisposed(),q3(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.atanh=function(){return this.throwIfDisposed(),Y3(this)};ot().prototype.avgPool=function(s,t,n,o){return this.throwIfDisposed(),rx(this,s,t,n,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.batchToSpaceND=function(s,t){return this.throwIfDisposed(),sx(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.batchNorm=function(s,t,n,o,a){return this.throwIfDisposed(),dy(this,s,t,n,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.broadcastTo=function(s){return this.throwIfDisposed(),qd(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.cast=function(s){return this.throwIfDisposed(),Ot(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.ceil=function(){return this.throwIfDisposed(),S$(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.clipByValue=function(s,t){return this.throwIfDisposed(),fo(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.concat=function(s,t){return this.throwIfDisposed(),s instanceof zr&&(s=[s]),Ps([this,...s],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.conv1d=function(s,t,n,o,a,i){return this.throwIfDisposed(),aE(this,s,t,n,o,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.conv2dTranspose=function(s,t,n,o,a){return this.throwIfDisposed(),iE(this,s,t,n,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.conv2d=function(s,t,n,o,a,i){return this.throwIfDisposed(),Kl(this,s,t,n,o,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.cos=function(){return this.throwIfDisposed(),ax(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.cosh=function(){return this.throwIfDisposed(),uE(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.cumprod=function(s,t,n){return this.throwIfDisposed(),Nv(this,s,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.cumsum=function(s,t,n){return this.throwIfDisposed(),cE(this,s,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.depthToSpace=function(s,t){return this.throwIfDisposed(),q$(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.depthwiseConv2d=function(s,t,n,o,a,i){return this.throwIfDisposed(),ix(this,s,t,n,o,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.dilation2d=function(s,t,n,o,a){return this.throwIfDisposed(),K$(this,s,t,n,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.divNoNan=function(s){return this.throwIfDisposed(),t4(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.div=function(s){return this.throwIfDisposed(),Ht(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.dot=function(s){return this.throwIfDisposed(),r4(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.elu=function(){return this.throwIfDisposed(),fy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.equal=function(s){return this.throwIfDisposed(),Ia(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.erf=function(){return this.throwIfDisposed(),dE(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.euclideanNorm=function(s,t){return this.throwIfDisposed(),m4(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.exp=function(){return this.throwIfDisposed(),Aa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.expandDims=function(s){return this.throwIfDisposed(),Ls(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.expm1=function(){return this.throwIfDisposed(),v4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.fft=function(){return this.throwIfDisposed(),IE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.flatten=function(){return this.throwIfDisposed(),Pe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.floor=function(){return this.throwIfDisposed(),my(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.floorDiv=function(s){return this.throwIfDisposed(),sE(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.gather=function(s,t,n){return this.throwIfDisposed(),ux(this,s,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.greaterEqual=function(s){return this.throwIfDisposed(),iu(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.greater=function(s){return this.throwIfDisposed(),go(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.ifft=function(){return this.throwIfDisposed(),Dv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.irfft=function(){return this.throwIfDisposed(),hF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.isFinite=function(){return this.throwIfDisposed(),j4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.isInf=function(){return this.throwIfDisposed(),A4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.isNaN=function(){return this.throwIfDisposed(),N4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.leakyRelu=function(s){return this.throwIfDisposed(),dx(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.lessEqual=function(s){return this.throwIfDisposed(),jc(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.less=function(s){return this.throwIfDisposed(),Om(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.localResponseNormalization=function(s,t,n,o){return this.throwIfDisposed(),L4(this,s,t,n,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.logSigmoid=function(){return this.throwIfDisposed(),G4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.logSoftmax=function(s){return this.throwIfDisposed(),gE(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.logSumExp=function(s,t){return this.throwIfDisposed(),yE(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.log=function(){return this.throwIfDisposed(),Ra(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.log1p=function(){return this.throwIfDisposed(),mE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.logicalAnd=function(s){return this.throwIfDisposed(),ni(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.logicalNot=function(){return this.throwIfDisposed(),hx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.logicalOr=function(s){return this.throwIfDisposed(),bE(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.logicalXor=function(s){return this.throwIfDisposed(),Q4(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.matMul=function(s,t,n){return this.throwIfDisposed(),Mn(this,s,t,n)};ot().prototype.maxPool=function(s,t,n,o){return this.throwIfDisposed(),fx(this,s,t,n,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.max=function(s,t){return this.throwIfDisposed(),ta(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.maximum=function(s){return this.throwIfDisposed(),ol(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.mean=function(s,t){return this.throwIfDisposed(),Lr(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.min=function(s,t){return this.throwIfDisposed(),Mm(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.minimum=function(s){return this.throwIfDisposed(),Qd(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.mirrorPad=function(s,t){return this.throwIfDisposed(),aL(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.mod=function(s){return this.throwIfDisposed(),lL(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.mul=function(s){return this.throwIfDisposed(),$e(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.neg=function(){return this.throwIfDisposed(),Ir(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.norm=function(s,t,n){return this.throwIfDisposed(),py(this,s,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.notEqual=function(s){return this.throwIfDisposed(),$m(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.oneHot=function(s,t=1,n=0){return this.throwIfDisposed(),vE(this,s,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.onesLike=function(){return this.throwIfDisposed(),Oo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.pad=function(s,t){return this.throwIfDisposed(),mx(this,s,t)};ot().prototype.pool=function(s,t,n,o,a,i){return this.throwIfDisposed(),bL(this,s,t,n,o,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.pow=function(s){return this.throwIfDisposed(),Zl(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.prelu=function(s){return this.throwIfDisposed(),yx(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.prod=function(s,t){return this.throwIfDisposed(),wL(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.reciprocal=function(){return this.throwIfDisposed(),HL(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.relu=function(){return this.throwIfDisposed(),lu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.relu6=function(){return this.throwIfDisposed(),wE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.reshapeAs=function(s){return this.throwIfDisposed(),Pe(this,s.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.reshape=function(s){return this.throwIfDisposed(),Pe(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.resizeBilinear=function(s,t,n){return this.throwIfDisposed(),ME(this,s,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.resizeNearestNeighbor=function(s,t,n){return this.throwIfDisposed(),OE(this,s,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.reverse=function(s){return this.throwIfDisposed(),Ql(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.rfft=function(){return this.throwIfDisposed(),mF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.round=function(){return this.throwIfDisposed(),SE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.rsqrt=function(){return this.throwIfDisposed(),_E(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.selu=function(){return this.throwIfDisposed(),CE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.separableConv2d=function(s,t,n,o,a,i){return this.throwIfDisposed(),kE(this,s,t,n,o,a,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.sigmoid=function(){return this.throwIfDisposed(),Ec(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.sign=function(){return this.throwIfDisposed(),tF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.sin=function(){return this.throwIfDisposed(),TE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.sinh=function(){return this.throwIfDisposed(),EE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.slice=function(s,t){return this.throwIfDisposed(),sr(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.softmax=function(s){return this.throwIfDisposed(),wx(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.softplus=function(){return this.throwIfDisposed(),df(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.spaceToBatchND=function(s,t){return this.throwIfDisposed(),gx(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.split=function(s,t){return this.throwIfDisposed(),ho(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.sqrt=function(){return this.throwIfDisposed(),ws(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.square=function(){return this.throwIfDisposed(),ur(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.squaredDifference=function(s){return this.throwIfDisposed(),yF(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.squeeze=function(s){return this.throwIfDisposed(),ff(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.stack=function(s,t){this.throwIfDisposed();const n=s instanceof zr?[this,s]:[this,...s];return ri(n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.step=function(s){return this.throwIfDisposed(),pf(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.stridedSlice=function(s,t,n,o,a,i,p,r){return this.throwIfDisposed(),SF(this,s,t,n,o,a,i,p,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.sub=function(s){return this.throwIfDisposed(),Yt(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.sum=function(s,t){return this.throwIfDisposed(),Wt(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.tan=function(){return this.throwIfDisposed(),CF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.tanh=function(){return this.throwIfDisposed(),cy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.tile=function(s){return this.throwIfDisposed(),Jo(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.toBool=function(){return this.throwIfDisposed(),Ot(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.toFloat=function(){return this.throwIfDisposed(),Ot(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.toInt=function(){return this.throwIfDisposed(),Ot(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.topk=function(s,t){return this.throwIfDisposed(),jF(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.transpose=function(s){return this.throwIfDisposed(),kn(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.unique=function(s){return this.throwIfDisposed(),RF(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.unsortedSegmentSum=function(s,t){return this.throwIfDisposed(),NE(this,s,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.unstack=function(s){return this.throwIfDisposed(),Jl(this,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.where=function(s,t){return this.throwIfDisposed(),Rs(s,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ot().prototype.zerosLike=function(){return this.throwIfDisposed(),Tn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class va extends Error{constructor(t){super(t),Object.setPrototypeOf(this,va.prototype)}}class No extends Error{constructor(t){super(t),Object.setPrototypeOf(this,No.prototype)}}class Ne extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Ne.prototype)}}class un extends Error{constructor(t){super(t),Object.setPrototypeOf(this,un.prototype)}}class sw extends Error{constructor(t){super(t),Object.setPrototypeOf(this,sw.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kj{constructor(t){this.maxEntries=t||100,this.cache=new Map}get(t){let n;return this.cache.has(t)&&(n=this.cache.get(t),this.cache.delete(t),this.cache.set(t,n)),n}put(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxEntries){const o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(t,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(t){if(t<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${t}.`);if(this.maxEntries>t)for(let n=0;n<this.maxEntries-t;n++){const o=this.cache.keys().next().value;this.cache.delete(o)}this.maxEntries=t}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eu(s,t){if(Array.isArray(s)){let n=[];for(let o=0;o<t;o++)n=n.concat(s);return n}else{const n=new Array(t);return n.fill(s),n}}function xa(s,t){if(!s)throw new sw(t)}function zC(s,t){let n=0;for(const o of s)o===t&&n++;return n}function Fs(s){return s.length===1?s[0]:s}function Bn(s){return Array.isArray(s)?s:[s]}function Qa(s){const n=s.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function $l(s){return s.length<=1||s.indexOf("_")===-1?s:s.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}let jo={};function ow(s){if(s==null)return null;const t={};return t.className=s.getClassName(),t.config=s.getConfig(),t}function $v(s){if(!(s==null||typeof s!="object"))if(Array.isArray(s))s.forEach(t=>$v(t));else{const t=Object.keys(s);for(const n of t){const o=s[n];o!=null&&typeof o=="object"&&(!Array.isArray(o)&&o.type==="ndarray"&&typeof o.value=="number"?s[n]=o.value:$v(o))}}}function bf(s,t={},n={},o="object",a=!1){if(typeof s=="string"){const i=s;let p;if(i in n)p=n[i];else if(i in jo)p=jo[i];else if(p=t[i],p==null)throw new Ne(`Unknown ${o}: ${s}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return p}else{const i=s;if(i.className==null||i.config==null)throw new Ne(`${o}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const p=i.className;let r,h;if(p in n?[r,h]=n[p]:p in jo?[r,h]=jo.className:p in t&&([r,h]=t[p]),r==null)throw new Ne(`Unknown ${o}: ${p}. This may be due to one of the following reasons:
1. The ${o} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${o} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(h!=null){const f={};for(const x of Object.keys(jo))f[x]=jo[x];for(const x of Object.keys(n))f[x]=n[x];const u=i.config;u.customObjects=f;const l=Object.assign({},jo);for(const x of Object.keys(n))jo[x]=n[x];$v(i.config);const d=h(r,i.config,n,a);return jo=Object.assign({},l),d}else{const f=Object.assign({},jo);for(const l of Object.keys(n))jo[l]=n[l];const u=new r(i.config);return jo=Object.assign({},f),u}}}function lU(s,t){return s<t?-1:s>t?1:0}function sm(s,t){return-1*lU(s,t)}function Wi(s){if(s==null)return s;const t=[];for(const n of s)t.indexOf(n)===-1&&t.push(n);return t}function uU(s){if(s==null)throw new Ne(`Invalid value in obj: ${JSON.stringify(s)}`);for(const t in s)if(s.hasOwnProperty(t))return!1;return!0}function cu(s,t,n){if(n!=null&&s.indexOf(n)<0)throw new Ne(`${n} is not a valid ${t}.  Valid values are ${s} or null/undefined.`)}function aw(s,t,n=0,o=1/0){return xa(n>=0),xa(o>=n),Array.isArray(s)&&s.length>=n&&s.length<=o&&s.every(a=>typeof a===t)}function rs(s,t){Array.isArray(s)?(ye(s.length>0,()=>`${t} is unexpectedly an empty array.`),s.forEach((n,o)=>rs(n,`element ${o+1} of ${t}`))):ye(Number.isInteger(s)&&s>0,()=>`Expected ${t} to be a positive integer, but got ${Tj(s)}.`)}function Tj(s){return s===null?"null":Array.isArray(s)?"["+s.map(t=>Tj(t)).join(",")+"]":typeof s=="string"?`"${s}"`:`${s}`}function cU(s,t,n){let o=n!=null?n():$s(),a;return(...p)=>{const r=n!=null?n():$s();return r-o<t||(o=r,a=s(...p)),a}}function Ej(s){return s==="relu"?"relu":s==="linear"?"linear":s==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let dU=0;function jj(){return dU++}const om={};function xy(s=""){return s in om||(om[s]=0),om[s]+=1,s+om[s].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const hU=["channelsFirst","channelsLast"],fU=["nearest","bilinear"],pU=["valid","same","causal"],mU=["max","avg"],gU=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nc=new Map;function Nr(s){cu(hU,"DataFormat",s)}function yU(s){cu(fU,"InterpolationFormat",s)}function yo(s){cu(pU,"PaddingMode",s)}function Ij(s){cu(mU,"PoolMode",s)}const Xd=[],VC="/";function Ul(s,t){Xd.push(s);try{const n=t();return Xd.pop(),n}catch(n){throw Xd.pop(),n}}function bU(){return Xd.length===0?"":Xd.join(VC)+VC}function Aj(s){if(!Nj(s))throw new Error("Not a valid tensor name: '"+s+"'");return bU()+s}function Rj(s){if(!Nj(s))throw new Error("Not a valid tensor name: '"+s+"'");nc.has(s)||nc.set(s,0);const t=nc.get(s);if(nc.set(s,nc.get(s)+1),t>0){const n=`${s}_${t}`;return nc.set(n,1),n}else return s}const vU=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Nj(s){return!!s.match(vU)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xU(s){return s===parseInt(s.toString(),10)}function Hi(s,t,n){t==null&&(t=0),n==null&&(n=s.length);let o=1;for(let a=t;a<n;++a)o*=s[a];return o}function yc(s){if(s.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<s.length;n++){const o=s[n];o<t&&(t=o)}return t}function Xi(s){if(s.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<s.length;n++){const o=s[n];o>t&&(t=o)}return t}function ra(s,t){if(t<s)throw new Ne(`end (${t}) < begin (${s}) is forbidden.`);const n=[];for(let o=s;o<t;++o)n.push(o);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Hb;function Vr(){return Hb==null&&(Hb=WO().epsilon()),Hb}function sa(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ta(s,t){return Ot(s,t)}function vf(s,t=-1){const n=s.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Pe(s,n)}function wU(s,t){return Xe(()=>{if(s.shape.length!==2)throw new Ne(`repeat() expects a rank-2 tensor, but received a rank-${s.shape.length} tensor.`);const n=vf(s,1);return Lv(n,[1,t,1])})}function SU(s){const t=[Hi(s.shape)];return Pe(s,t)}function _U(s){if(s.rank<=1)throw new Ne(`batchFlatten requires a minimum rank of 2. Got rank: ${s.rank}.`);const t=[s.shape[0],Hi(s.shape,1)];return Pe(s,t)}function zl(s,t,n){return Xe(()=>{switch(s.rank){case 1:return vx(s,t,n);case 2:return jE(s,[t,0],[n,s.shape[1]]);case 3:return xx(s,[t,0,0],[n,s.shape[1],s.shape[2]]);case 4:return Fm(s,[t,0,0,0],[n,s.shape[1],s.shape[2],s.shape[3]]);case 5:return sr(s,[t,0,0,0,0],[n,s.shape[1],s.shape[2],s.shape[3],s.shape[4]]);case 6:return sr(s,[t,0,0,0,0,0],[n,s.shape[1],s.shape[2],s.shape[3],s.shape[4],s.shape[5]]);default:throw new Ne(`sliceAlongFirstAxis() received an unsupported tensor rank: ${s.rank}`)}})}function qb(s,t,n){return Xe(()=>{switch(s.rank){case 1:return vx(s,t,n);case 2:return jE(s,[0,t],[s.shape[0],n]);case 3:return xx(s,[0,0,t],[s.shape[0],s.shape[1],n]);case 4:return Fm(s,[0,0,0,t],[s.shape[0],s.shape[1],s.shape[2],n]);default:throw new Ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${s.rank}`)}})}function am(s,t,n,o){return Xe(()=>{switch(s.rank){case 1:return vx(s,t,n);case 2:switch(o){case 1:return zl(s,t,n);case 2:return qb(s,t,n);default:throw new Ne(`The axis is not within the rank of the tensor ${o}`)}case 3:switch(o){case 1:return zl(s,t,n);case 2:return xx(s,[0,t,0],[s.shape[0],n,s.shape[2]]);case 3:return qb(s,t,n);default:throw new Ne(`The axis is not within the rank of the tensor ${o}`)}case 4:switch(o){case 1:return zl(s,t,n);case 2:return Fm(s,[0,t,0,0],[s.shape[0],n,s.shape[2],s.shape[3]]);case 3:return Fm(s,[0,0,t,0],[s.shape[0],s.shape[1],n,s.shape[3]]);case 4:return qb(s,t,n);default:throw new Ne(`The axis is not within the rank of the tensor ${o}`)}default:throw new Ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${s.rank}`)}})}function iw(s,t=-1){let n;return t<0&&(n=s[0].rank,n!==0?t=n:t=0),t===s[0].rank&&(t=-1),Ps(s,t)}function GC(s,t){switch(s.rank){case 1:return k$([s,t]);case 2:return E$([s,t],0);case 3:return I$([s,t],0);case 4:return R$([s,t],0);default:throw new Ne(`concatAlongFirstAxis() received an unsupported tensor rank: ${s.rank}`)}}function Lv(s,t){if(Array.isArray(t)||(t=[t]),s.rank!==t.length)throw new Ne(`The length of input n (${t.length}) does not match the number of dimensions in input x (${s.rank})`);return Jo(s,t)}function wy(s,t=0,n=1,o,a){return zL(s,t,n,o,a)}function Ea(s,t,n,o){if(s.rank<2||t.rank<2)throw new un(`dot requires both inputs to be rank >= 2 but got x shape = ${s.shape} and y shape = ${t.shape}`);if(t.rank>=3){const a=s.shape.slice(-1)[0],i=t.shape.slice(-2)[0];if(a!==i)throw new un(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${s.shape} and  y shape = ${t.shape}`)}if(s.rank===2&&t.rank===2)return jC({a:s,b:t,transposeA:!1,transposeB:!1,bias:o?Fv(s.rank,o,sa()):null,activation:n});{const a=s.shape.slice(),i=a.pop();s=Pe(s,[-1,i]);const p=t.shape.slice(),r=p.pop(),h=p.pop(),f=[...p,r],u=Array.from({length:t.rank},(S,m)=>m===0?t.rank-2:m<=t.rank-2?m-1:m);t=Pe(kn(t,u),[h,-1]);const l=[...a,...f];return Pe(jC({a:s,b:t,transposeA:!1,transposeB:!1,bias:o?Fv(s.rank,o,sa()):null,activation:n}),l)}}function Dj(s,t,n){return Xe(()=>(Array.isArray(t)?t=Zs(t,"int32"):t=Ot(t,"int32"),ux(s,t,n)))}function xf(s){return $e(s,s)}function Fv(s,t,n){const o=t.shape;if(t.rank!==1&&t.rank!==s)throw new Ne(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${s}`);if(s===5){if(n==="channelsFirst")return o.length===1?Pe(t,[1,o[0],1,1,1]):Pe(t,[1,o[3],o[0],o[1],o[2]]);if(n==="channelsLast")return o.length===1?Pe(t,[1,1,1,1,o[0]]):Pe(t,[1].concat(o))}else if(s===4){if(n==="channelsFirst")return o.length===1?Pe(t,[1,o[0],1,1]):Pe(t,[1,o[2],o[0],o[1]]);if(n==="channelsLast")return o.length===1?Pe(t,[1,1,1,o[0]]):Pe(t,[1].concat(o))}else if(s===3){if(n==="channelsFirst")return o.length===1?Pe(t,[1,o[0],1]):Pe(t,[1,o[1],o[0]]);if(n==="channelsLast")return o.length===1?Pe(t,[1,1,o[0]]):Pe(t,[1].concat(o))}else if(s<3)return t;throw new Ne(`Unsupported input rank by biasAdd: ${t.rank}`)}function aa(s,t,n){return Xe(()=>(n==null&&(n=sa()),Nr(n),St(s,Fv(s.rank,t,n))))}function CU(s,t=1){if(t!==1)throw new un(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return fy(s)}function kU(s){return Xe(()=>Ht(s,St(js(s),1)))}function Mj(s,t,n,o){return Xe(()=>FF(s,t,n,o))}function TU(s){return Xe(()=>{const t=St(.5,$e(.2,s));return fo(t,0,1)})}function wf(s,t,n=!1){return n?s():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const EU=["fanIn","fanOut","fanAvg"],jU=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IU(s){cu(EU,"FanMode",s)}function AU(s){cu(jU,"Distribution",s)}class Lo extends Ac{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Oj extends Lo{apply(t,n){return ns(t,n)}}Oj.className="Zeros";xt(Oj);class lw extends Lo{apply(t,n){return al(t,n)}}lw.className="Ones";xt(lw);class $j extends Lo{constructor(t){if(super(),typeof t!="object")throw new Ne(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new Ne(`config must have value set but got ${t}`);this.value=t.value}apply(t,n){return Xe(()=>$e(On(this.value),al(t,n)))}getConfig(){return{value:this.value}}}$j.className="Constant";xt($j);class Lj extends Lo{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,n){return hf(t,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Lj.className="RandomUniform";xt(Lj);class Fj extends Lo{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new un(`randomNormal does not support dType ${n}.`);return wy(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Fj.className="RandomNormal";xt(Fj);class Pj extends Lo{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new un(`truncatedNormal does not support dType ${n}.`);return RE(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Pj.className="TruncatedNormal";xt(Pj);class Bj extends Lo{constructor(t){super(),this.gain=t.gain!=null?t.gain:1}apply(t,n){return Xe(()=>{if(t.length!==2||t[0]!==t[1])throw new Ne("Identity matrix initializer can only be used for 2D square matrices.");return $e(this.gain,pE(t[0]))})}getConfig(){return{gain:this.gain}}}Bj.className="Identity";xt(Bj);function RU(s,t="channelsLast"){let n,o;if(Nr(t),s.length===2)n=s[0],o=s[1];else if([3,4,5].indexOf(s.length)!==-1){if(t==="channelsFirst"){const a=Hi(s,2);n=s[1]*a,o=s[0]*a}else if(t==="channelsLast"){const a=Hi(s,0,s.length-2);n=s[s.length-2]*a,o=s[s.length-1]*a}}else{const a=Hi(s);n=Math.sqrt(a),o=Math.sqrt(a)}return[n,o]}class Js extends Lo{constructor(t){if(super(),t.scale<0)throw new Ne(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,IU(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,AU(this.distribution),this.seed=t.seed}apply(t,n){const o=RU(t),a=o[0],i=o[1];let p=this.scale;if(this.mode==="fanIn"?p/=Math.max(1,a):this.mode==="fanOut"?p/=Math.max(1,i):p/=Math.max(1,(a+i)/2),this.distribution==="normal"){const r=Math.sqrt(p);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new un(`${this.getClassName()} does not support dType ${n}.`);return RE(t,0,r,n,this.seed)}else{const r=Math.sqrt(3*p);return hf(t,-r,r,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Js.className="VarianceScaling";xt(Js);class uw extends Js{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Js.className}}uw.className="GlorotUniform";xt(uw);class cw extends Js{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Js.className}}cw.className="GlorotNormal";xt(cw);class dw extends Js{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Js.className}}dw.className="HeNormal";xt(dw);class hw extends Js{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Js.className}}hw.className="HeUniform";xt(hw);class fw extends Js{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return Js.className}}fw.className="LeCunNormal";xt(fw);class pw extends Js{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return Js.className}}pw.className="LeCunUniform";xt(pw);class Uj extends Lo{constructor(t){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed}apply(t,n){return Xe(()=>{if(t.length<2)throw new un("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const o=at(t.slice(0,-1)),a=t[t.length-1],i=o*a;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const p=[Math.max(a,o),Math.min(a,o)],r=wy(p,0,1,n,this.seed),h=MP.qr(r,!1);let f=h[0];const l=h[1].flatten().stridedSlice([0],[Math.min(a,o)*Math.min(a,o)],[Math.min(a,o)+1]);return f=$e(f,l.sign()),o<a&&(f=f.transpose()),$e(On(this.gain),f.reshape(t))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Uj.className="Orthogonal";xt(Uj);const WC={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function HC(s,t={}){return bf(s,Ro.getMap().classNameMap,t,"initializer")}function yr(s){return ow(s)}function hr(s){if(typeof s=="string"){const t=s in WC?WC[s]:s;if(t==="GlorotNormal")return new cw;if(t==="GlorotUniform")return new uw;if(t==="HeNormal")return new dw;if(t==="HeUniform")return new hw;if(t==="LeCunNormal")return new fw;if(t==="LeCunUniform")return new pw;{const n={};return n.className=t,n.config={},HC(n)}}else return s instanceof Lo?s:HC(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pv(s){return Array.isArray(s)&&Array.isArray(s[0])}function Pm(s){return s.length===0?[]:Array.isArray(s[0])?s:[s]}function Zt(s){let t;if(Array.isArray(s)){if(s.length!==1)throw new Ne(`Expected Tensor length to be 1; got ${s.length}`);t=s[0]}else t=s;return t}function In(s){if(Array.isArray(s)&&Array.isArray(s[0])){if(s.length===1)return s=s,s[0];throw new Ne(`Expected exactly 1 Shape; got ${s.length}`)}else return s}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Bm(s){let t=0;for(const n of s)n.shape.length===0?t+=1:t+=n.shape.reduce((o,a)=>o*a);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const qC="Variable";class NU{constructor(t,n="float32",o=qC,a=!0,i=null){this.dtype=n??"float32",this.shape=t.shape,this.id=jj(),o=o??qC,this.originalName=Aj(o),this.name=Rj(this.originalName),this.trainable_=a,this.constraint=i,this.val=MF(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),DU(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function DU(s,t){if(s.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(s.shape)+" vs. "+JSON.stringify(t.shape))}function Bv(s){return s.map(t=>t.read())}function mw(s){s.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gr{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Na{constructor(t,n,o,a,i,p,r){this.dtype=t,this.shape=n,this.sourceLayer=o,this.inputs=a,this.callArgs=i,this.outputTensorIndex=r,this.id=jj(),p!=null&&(this.originalName=Aj(p),this.name=Rj(this.originalName)),this.rank=n.length}}let MU=0;class Sy{constructor(t,n){this.callArgs=n,this.id=MU++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const o of t.inboundLayers)o!=null&&o.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const n of this.inboundLayers)n!=null?t.push(n.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let OU=0;class mn extends Ac{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=OU++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const o=this.getClassName();n=Qa(o)+"_"+xy(o)}if(this.name=n,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let o;if(t.batchInputShape!=null)o=t.batchInputShape;else if(t.inputShape!=null){let i=null;t.batchSize!=null&&(i=t.batchSize),o=[i].concat(t.inputShape)}this.batchInputShape=o;let a=t.dtype;a==null&&(a=t.inputDType),a==null&&(a="float32"),this.dtype=a}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,n){return t.name+"_ib-"+n.toString()}getNodeAtIndex(t,n){if(this.inboundNodes.length===0)throw new No(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=t)throw new Ne(`Asked to get ${n} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return Fs(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return Fs(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new va(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new va(`Layer ${this.name} is not connected, no input to return.`);return Fs(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new va(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new va(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Fs(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(n=>n.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){const n=Bn(t);if(this.inputSpec==null||this.inputSpec.length===0)return;const o=Bn(this.inputSpec);if(n.length!==o.length)throw new Ne(`Layer ${this.name} expects ${o.length} inputs, but it received ${n.length} input tensors. Input received: ${t}`);for(let a=0;a<n.length;a++){const i=n[a],p=o[a];if(p==null)continue;const r=i.rank;if(p.ndim!=null&&r!==p.ndim)throw new Ne(`Input ${a} is incompatible with layer ${this.name}: expected ndim=${p.ndim}, found ndim=${r}`);if(p.maxNDim!=null&&r>p.maxNDim)throw new Ne(`Input ${a} is incompatible with layer ${this.name}: expected max_ndim=${p.maxNDim}, found ndim=${r}`);if(p.minNDim!=null&&r<p.minNDim)throw new Ne(`Input ${a} is incompatible with layer ${this.name}: expected min_ndim=${p.minNDim}, found ndim=${r}.`);if(p.dtype!=null&&i.dtype!==p.dtype)throw new Ne(`Input ${a} is incompatible with layer ${this.name} : expected dtype=${p.dtype}, found dtype=${i.dtype}.`);if(p.axes){const h=i.shape;for(const f in p.axes){const u=Number(f),l=p.axes[f],d=u>=0?h[u]:h[h.length+u];if(l!=null&&[l,null].indexOf(d)===-1)throw new Ne(`Input ${a} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${l} but got shape ${h}.`)}}if(p.shape!=null)for(let h=0;h<p.shape.length;++h){const f=p.shape[h],u=i.shape[h];if(f!=null&&u!=null&&f!==u)throw new Ne(`Input ${a} is incompatible with layer ${this.name}: expected shape=${p.shape}, found shape=${i.shape}.`)}}}call(t,n){return t}invokeCallHook(t,n){this._callHook!=null&&this._callHook(t,n)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,n){n=n||{},this.assertNotDisposed();const o=Bn(t),a=FU(t),i=PU(t);if(a===i)throw new Ne("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ul(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const p=[];for(const r of Bn(t))p.push(r.shape);this.build(Fs(p)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(t),i){let p=this.call(t,n);this.supportsMasking&&this.setMaskMetadata(t,p);const r=Bn(p),h=[];for(let f of r)o.indexOf(f)!==-1&&(f=f.clone()),h.push(f);if(p=Fs(h),this.activityRegularizer!=null)throw new un("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}else{const p=$U(t),r=this.computeOutputShape(p);let h;const f=LU(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?p[0]:p),r!=null&&r.length>0&&Array.isArray(r[0])?h=r.map((u,l)=>new Na(f,u,this,Bn(t),n,this.name,l)):h=new Na(f,r,this,Bn(t),n,this.name),this.addInboundNode(t,h,null,null,p,r,n),this._refCount++,this.activityRegularizer!=null)throw new un("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return h}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((o,a)=>{o!=null&&t[a]!=null&&t[a]!==o&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new va(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const n of this.inboundNodes){const o=JSON.stringify(n.outputShapes);t.indexOf(o)===-1&&t.push(o)}if(t.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new va(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new No(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Bm(this.weights)}build(t){this.built=!0}getWeights(t=!1){return Bv(t?this.trainableWeights:this.weights)}setWeights(t){Xe(()=>{const n=this.weights;if(n.length!==t.length)throw new Ne(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${n.length} weights. Provided weights: ${t}...`);if(n.length===0)return;const o=[],a=Bv(n);for(let i=0;i<a.length;++i){const p=a[i],r=n[i],h=t[i];if(!$n(p.shape,h.shape))throw new Ne(`Layer weight shape ${p.shape} not compatible with provided weight shape ${h.shape}`);o.push([r,h])}mw(o)})}addWeight(t,n,o,a,i,p,r,h){if(this._addedWeightNames.indexOf(t)!==-1)throw new Ne(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),o==null&&(o="float32"),this.fastWeightInitDuringBuild&&(a=h!=null?h():hr("zeros"));const f=a.apply(n,o),u=new NU(f,o,t,p,r);return f.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),p==null&&(p=!0),p?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=Bn(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(o=>{if(o!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(t,n,o){if(!this.supportsMasking)return;const a=this.computeMask(t,o),i=Bn(n),p=Bn(a);if(i.length!==p.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let r=0;r<i.length;r++)i[r].kerasMask=p[r]}addInboundNode(t,n,o,a,i,p,r=null){const h=Bn(t);n=Bn(n),o=Bn(o),a=Bn(a),i=Pm(i),p=Pm(p);const f=[],u=[],l=[];for(const d of h)f.push(d.sourceLayer),u.push(d.nodeIndex),l.push(d.tensorIndex);new Sy({outboundLayer:this,inboundLayers:f,nodeIndices:u,tensorIndices:l,inputTensors:h,outputTensors:n,inputMasks:o,outputMasks:a,inputShapes:i,outputShapes:p},r);for(let d=0;d<n.length;d++)n[d].sourceLayer=this,n[d].nodeIndex=this.inboundNodes.length-1,n[d].tensorIndex=d}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function $U(s){s=Bn(s);const t=[];for(const n of s)t.push(n.shape);return Fs(t)}function LU(s){return"float32"}function zj(s,t,n){if((t==null||n!=null&&n>0)&&(t=s.sourceLayer,n=s.nodeIndex),t.inboundNodes.length===0)return[s];{const o=t.inboundNodes[n];if(o.inboundLayers.length===0)return o.inputTensors;{const a=[];for(let i=0;i<o.inboundLayers.length;i++){const p=o.inputTensors[i],r=o.inboundLayers[i],h=o.nodeIndices[i],f=zj(p,r,h);for(const u of f)a.indexOf(u)===-1&&a.push(u)}return a}}}function FU(s){let t=!0;for(const n of Bn(s))if(!(n instanceof Na)){t=!1;break}return t}function PU(s){let t=!0;for(const n of Bn(s))if(n instanceof Na){t=!1;break}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Sf extends mn{constructor(t){if(super({dtype:t.dtype,name:t.name!=null?t.name:xy("input").toString()}),t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new Ne("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=t.batchInputShape;if(n==null){if(t.inputShape==null)throw new Ne("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new Ne("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const o=t.dtype||"float32";this.batchInputShape=n,this.dtype=o,this.inputSpec=[{shape:n}];const a=new Na(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new Sy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(t,n){throw new Ne(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Sf.className="InputLayer";xt(Sf);function BU(s){if(s.batchShape==null&&s.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(s.batchShape!=null&&s.shape!=null)throw new Ne("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=s.batchShape;s.shape!=null&&t==null&&(t=[null].concat(s.shape));let n=s.dtype;return n==null&&(n="float32"),new Sf({batchInputShape:t,name:s.name,dtype:n,sparse:s.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UU(s,t){if(s.dtype==null||s.dtype===t.dtype)return t;try{return Ot(t,s.dtype)}catch{throw new Ne(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${s.name}' (${s.dtype}).`)}}class Ui{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof Ui)for(const n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(const n of t)this.add(n.key,n.value)}}add(t,n,o){if(this.id2Value[t.id]==null)this.id2Value[t.id]=UU(t,n),this.name2Id[t.name]=t.id,o!=null&&(this.id2Mask[t.id]=o);else throw new Ne(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Na){if(this.id2Value[t.id]==null)throw new Ne(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const n=this.name2Id[t];if(n==null)throw new Ne(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof Na){if(this.id2Value[t.id]==null)throw new Ne(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const n=this.name2Id[t];if(n==null)throw new Ne(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&cn(this.id2Mask)}}const Um=new kj,zm=new kj;function zU(s){Um!=null&&Um.setMaxEntries(s),zm!=null&&zm.setMaxEntries(s)}function Ud(s,t,n,o){const a=n==null?!1:n.training,i=Array.isArray(s),p=i?s:[s],r=p.map(S=>S.name),h=[],f=t.names();for(const S of r)f.indexOf(S)!==-1?h.push(t.getValue(S)):h.push(null);const u=r.join(",")+"|"+t.names().sort().join(",");let l=Um.get(u),d;if(l==null){const S=VU(p,t);l=S.sorted,d=S.recipientCounts,Um.put(u,l),zm.put(u,d)}d={},a||Object.assign(d,zm.get(u));const x=new Ui(t);for(let S=0;S<l.length;++S){const m=l[S],y=m.sourceLayer;if(y instanceof Sf)continue;const b=[],g=[],w=[];let _=!1;for(const A of m.inputs){const O=x.getValue(A),N=x.getMask(A);b.push(O),g.push(N),N!=null&&(_=!0),a||(d[A.name]--,d[A.name]===0&&!t.hasKey(A)&&r.indexOf(A.name)===-1&&!O.isDisposed&&A.sourceLayer.stateful!==!0&&w.push(O))}_&&(n=n||{},n.mask=g[0]);const C=Bn(y.apply(b,n));let k=null;y.supportsMasking&&(k=y.computeMask(b,g));const E=WU(m),j=Array.isArray(E)?E:[E];for(let A=0;A<j.length;++A){x.hasKey(j[A])||x.add(j[A],C[A],Array.isArray(k)?k[0]:k);const O=r.indexOf(j[A].name);O!==-1&&(h[O]=C[A])}a||cn(w)}return x.disposeMasks(),i?h:h[0]}function VU(s,t){ye(s!=null&&s.length>0,()=>"Expected at least one fetch, got none");let n=[],o={};if(s.length===1){const a=XC(s[0],t);n=a.sorted,o=a.recipientMap}else{const a=new Set;for(const i of s){const{sorted:p,recipientMap:r}=XC(i,t);for(const h of p)a.has(h.name)||(n.push(h),a.add(h.name));for(const h in r)o[h]==null&&(o[h]=new Set),r[h].forEach(f=>o[h].add(f))}}return{sorted:n,recipientCounts:GU(o)}}function GU(s){const t={};for(const n in s)t[n]=s[n].size;return t}function XC(s,t){const n=new Set,o=[],a={};for(const r of t.names())n.add(r);const i=[],p=[];for(i.push(s);i.length>0;){const r=i[i.length-1];if(n.has(r.name)){i.pop();continue}const h=p[p.length-1]===i.length-1;if(r.inputs.length===0||h)i.pop(),o.push(r),n.add(r.name),h&&p.pop();else{p.push(i.length-1);for(const f of r.inputs)a[f.name]==null&&(a[f.name]=new Set),a[f.name].add(r.name),!n.has(f.name)&&i.push(f)}}return{sorted:o,recipientMap:a}}function WU(s){let t;if(s.sourceLayer.inboundNodes.length===1)t=s.sourceLayer.output;else{let n=null;for(let o=0;o<s.sourceLayer.inboundNodes.length;++o)for(const a of s.sourceLayer.inboundNodes[o].outputTensors)if(a.id===s.id){n=o;break}t=s.sourceLayer.getOutputAt(n)}return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HU=Qe();HU.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,zU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gw(s,t){return Xe(()=>ws(Wt($e(s,s),t,!0)))}class _f extends Ac{getConfig(){return{}}}class Vj extends _f{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Xe(()=>{const n=gw(t,this.axis),o=fo(n,0,this.maxValue);return $e(t,Ht(o,St(Vr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Vj.className="MaxNorm";xt(Vj);class Gj extends _f{constructor(t){super(),this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Xe(()=>Ht(t,St(Vr(),gw(t,this.axis))))}getConfig(){return{axis:this.axis}}}Gj.className="UnitNorm";xt(Gj);class Wj extends _f{apply(t){return lu(t)}}Wj.className="NonNeg";xt(Wj);class Hj extends _f{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Xe(()=>{const n=gw(t,this.axis),o=St($e(this.rate,fo(n,this.minValue,this.maxValue)),$e(1-this.rate,n));return $e(t,Ht(o,St(Vr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Hj.className="MinMaxNorm";xt(Hj);const YC={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Wr(s){return ow(s)}function KC(s,t={}){return bf(s,Ro.getMap().classNameMap,t,"constraint")}function Hr(s){if(s==null)return null;if(typeof s=="string"){const n={className:s in YC?YC[s]:s,config:{}};return KC(n)}else return s instanceof _f?s:KC(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Rl(s){if(s==null)return;const t=[],n=[],o=[];for(const a in s){const i=s[a];if(typeof i!="number"){const p=i;t.push(p.data()),n.push(a),o.push(p)}}if(t.length>0){const a=await Promise.all(t);for(let i=0;i<a.length;++i)s[n[i]]=a[i][0];cn(o)}}function qj(s){if(s!=null)for(const t in s){const n=s[t];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ZC;(function(s){s[s.SILENT=0]="SILENT",s[s.VERBOSE=1]="VERBOSE"})(ZC||(ZC={}));const qU=125;class eh{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class XU{constructor(t,n=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){n==null&&(n={});for(const o of this.callbacks)await o.onEpochBegin(t,n)}async onEpochEnd(t,n){n==null&&(n={});for(const o of this.callbacks)await o.onEpochEnd(t,n)}async onBatchBegin(t,n){n==null&&(n={});for(const o of this.callbacks)await o.onBatchBegin(t,n)}async onBatchEnd(t,n){n==null&&(n={});for(const o of this.callbacks)await o.onBatchEnd(t,n)}async onTrainBegin(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class YU extends eh{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){n==null&&(n={});const o=n.size==null?0:n.size;this.seen+=o;for(const a in n){const i=n[a];if(typeof i=="number")this.totals.hasOwnProperty(a)||(this.totals[a]=0),this.totals[a]=this.totals[a]+i*o;else{let p;a in this.totals?p=this.totals[a]:this.totals[a]=0;const r=Xe(()=>St(this.totals[a],$e(i,o)));this.totals[a]=r,p!=null&&p.dispose()}}}async onEpochEnd(t,n){if(n!=null)for(const o of this.params.metrics)this.totals[o]!=null&&(typeof this.totals[o]=="number"?n[o]=this.totals[o]/this.seen:Xe(()=>{const a=$e(Ht(1,this.seen),this.totals[o]);n[o]=a,this.totals[o].dispose(),Ca(n[o])}))}}class KU extends eh{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){n==null&&(n={}),this.epoch.push(t);for(const o in n)this.history[o]==null&&(this.history[o]=[]),this.history[o].push(n[o])}async syncData(){const t=[],n=[],o=[];for(const i in this.history){const p=this.history[i];for(let r=0;r<p.length;++r)if(typeof p[r]!="number"){const h=p[r];t.push(h.data()),n.push(i),o.push(r)}}const a=await Promise.all(t);for(let i=0;i<a.length;++i)this.history[n[i]][o[i]].dispose(),this.history[n[i]][o[i]]=a[i][0]}}class ZU extends eh{constructor(t,n){if(super(),this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||QE,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=qU),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");pv(this.yieldEvery)&&(this.maybeWait=cU(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,o){const a=[];this.yield!=null&&(await Rl(o),a.push(this.yield(t,n,o))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(t,n){this.currentEpoch=t,this.epochBegin!=null&&(await Rl(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const o=[];this.epochEnd!=null&&(await Rl(n),o.push(this.epochEnd(t,n))),this.yieldEvery==="epoch"&&o.push(this.nextFrameFunc()),await Promise.all(o)}async onBatchBegin(t,n){this.batchBegin!=null&&(await Rl(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const o=[];this.batchEnd!=null&&(await Rl(n),o.push(this.batchEnd(t,n))),this.yieldEvery==="batch"?o.push(this.nextFrameFunc()):pv(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(o)}async onTrainBegin(t){this.trainBegin!=null&&(await Rl(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await Rl(t),await this.trainEnd(t))}}function Xj(s,t){return s==null&&(s={}),s instanceof eh?[s]:Array.isArray(s)&&s[0]instanceof eh?s:Bn(s).map(o=>new ZU(o,t))}class Ao{constructor(){}static registerCallbackConstructor(t,n){ye(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),Ao.checkForDuplicate(n),Ao.constructors[t]==null&&(Ao.constructors[t]=[]),Ao.constructors[t].push(n)}static checkForDuplicate(t){for(const n in Ao.constructors)Ao.constructors[+n].forEach(a=>{if(a===t)throw new Ne("Duplicate callback constructor.")})}static clear(){Ao.constructors={}}static createCallbacks(t){const n=[];for(const o in Ao.constructors){const a=+o;t>=a&&n.push(...Ao.constructors[a])}return n.map(o=>new o)}}Ao.constructors={};function Yj(s,t,n,o,a,i,p,r,h){const f=new KU,u=[new YU,...Ao.createCallbacks(t)];s!=null&&u.push(...s),u.push(f);const l=new XU(u);return l.setParams({epochs:n,initialEpoch:o,samples:a,steps:i,batchSize:p,verbose:t,doValidation:r,metrics:h}),{callbackList:l,history:f}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ja(s,t={},n=!1){return bf(s,Ro.getMap().classNameMap,t,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vm(s,t){return Xe(()=>{s.dtype!=="float32"&&(s=Ot(s,"float32"));const n=Wt(xf(s),t,!0),o=hy(n.shape,Vr()),a=ws(ol(n,o));return Ht(s,a)})}function _y(s,t){return Xe(()=>Lr(xf(Yt(t,s)),-1))}function yw(s,t){return Xe(()=>Lr(js(Yt(t,s)),-1))}function bw(s,t){return Xe(()=>{const n=Yt(s,t),o=fo(js(s),Vr(),Number.MAX_VALUE),a=js(Ht(n,o));return $e(100,Lr(a,-1))})}function QU(s,t){return Xe(()=>{const n=fo(t,Vr(),Number.MAX_VALUE),o=Ra(St(1,n)),a=fo(s,Vr(),Number.MAX_VALUE),i=Ra(St(1,a));return Lr(xf(Yt(o,i)),-1)})}function JU(s,t){return Xe(()=>{const n=ol(0,Yt(1,$e(s,t)));return Lr(xf(n),-1)})}function e6(s,t){return Xe(()=>{const n=ol(0,Yt(1,$e(s,t)));return Lr(n,-1)})}function t6(s,t){return Xe(()=>{const n=Wt($e(s,t),-1),o=ta($e(Yt(1,s),t),-1);return ol(0,St(1,Yt(o,n)))})}function n6(s,t){return Xe(()=>{const n=Math.log(2),o=Yt(t,s),a=Yt(St(o,df($e(-2,o))),n);return Lr(a,-1)})}function th(s,t,n=!1){return Xe(()=>{if(n)t=wx(t);else{const o=Wt(t,t.shape.length-1,!0);t=Ht(t,o)}return t=fo(t,Vr(),1-Vr()),Ir(Wt($e(Ot(s,"float32"),Ra(t)),t.shape.length-1))})}function Gm(s,t,n=!1){return Xe(()=>{const o=Ot(my(SU(s)),"int32");t=fo(t,Vr(),1-Vr());const a=t.shape,i=Pe(vE(o,a[a.length-1]),a);return th(i,t,n)})}function r6(s,t){if(!$n(s.shape,t.shape))throw new Ne(`logits and labels must have the same shape, but got shapes ${JSON.stringify(s.shape)} and ${JSON.stringify(t.shape)}`);return Xe(()=>{const n=lu(t),o=Ir(js(t));return St(Yt(n,$e(t,s)),mE(Aa(o)))})}function Cy(s,t){return Xe(()=>{let n;return n=fo(t,Vr(),1-Vr()),n=Ra(Ht(n,Yt(1,n))),Lr(r6(s,n),-1)})}function s6(s,t){return Xe(()=>{const n=fo(s,Vr(),1),o=fo(t,Vr(),1);return Wt($e(s,Ra(Ht(n,o))),-1)})}function o6(s,t){return Xe(()=>{const n=Ra(St(Vr(),t));return Lr(Yt(t,$e(s,n)),-1)})}function Kj(s,t){return Xe(()=>{const n=Vm(s,-1),o=Vm(t,-1),a=$e(n,o);return Ir(Wt(a,-1))})}const Wm={meanSquaredError:_y,meanAbsoluteError:yw,meanAbsolutePercentageError:bw,meanSquaredLogarithmicError:QU,squaredHinge:JU,hinge:e6,categoricalHinge:t6,logcosh:n6,categoricalCrossentropy:th,sparseCategoricalCrossentropy:Gm,binaryCrossentropy:Cy,kullbackLeiblerDivergence:s6,poisson:o6,cosineProximity:Kj};function Xb(s){if(typeof s=="string"){if(s in Wm)return Wm[s];let t=`Unknown loss ${s}`;throw s.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${s}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ne(t)}else return s}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Zj(s,t){return Xe(()=>{const n=$e(.5,Oo(t)),o=Ta(go(t,n),s.dtype);return Lr(Ia(s,o),-1)})}function Qj(s,t){return Xe(()=>Ta(Ia(Yd(s,-1),Yd(t,-1)),"float32"))}function a6(s,t){return Xe(()=>Ot(Wt(ni(Ia(s,1),Ia(t,1))),"float32"))}function i6(s,t){return Xe(()=>Ot(Wt(ni(Ia(s,0),Ia(t,1))),"float32"))}function l6(s,t){return Xe(()=>{const n=a6(s,t),o=i6(s,t),a=St(n,o);return Ot(Rs(go(a,0),Ht(n,a),0),"float32")})}function u6(s,t){return Cy(s,t)}function c6(s,t){return s.rank===t.rank&&(s=ff(s,[s.rank-1])),t=Yd(t,-1),t.dtype!==s.dtype&&(t=Ot(t,s.dtype)),Ot(Ia(s,t),"float32")}const d6=_y,h6=_y,f6=yw,p6=yw,m6=bw,g6=bw,Jj=th,y6=Kj,eI=Gm,Hm={binaryAccuracy:Zj,categoricalAccuracy:Qj,precision:l6,categoricalCrossentropy:Jj,sparseCategoricalCrossentropy:eI,mse:d6,MSE:h6,mae:f6,MAE:p6,mape:m6,MAPE:g6,cosine:y6};function b6(s){if(typeof s=="string"&&s in Hm)return Hm[s];if(typeof s!="string"&&s!=null)return s;throw new Ne(`Unknown metric ${s}`)}function im(s){if(xa(s!==null,`Unknown LossOrMetricFn ${s}`),typeof s=="string")return s;{let t;for(const n of Object.keys(Wm))if(Wm[n]===s){t=n;break}if(t!==void 0)return t;for(const n of Object.keys(Hm))if(Hm[n]===s){t=n;break}return t!==void 0?t:s.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function v6(s){const t={Adagrad:()=>tc.adagrad(.01),Adadelta:()=>tc.adadelta(1,.95,Vr()),Adam:()=>tc.adam(.001,.9,.999,Vr()),Adamax:()=>tc.adamax(.002,.9,.999,Vr(),0),RMSProp:()=>tc.rmsprop(.001,.9,0,Vr()),SGD:()=>tc.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,s in t)return t[s]();throw new Ne(`Unknown Optimizer ${s}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const QC=1*1024*1024;function JC(s,t,n=!1){if(s==null||typeof s!="object"||Object.getPrototypeOf(s)!==Object.prototype||!Uv(s))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const o=JSON.stringify(s);o.length>QC&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${o.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${QC}.`)}}function Uv(s){if(s===null)return!0;if(typeof s=="object")if(Object.getPrototypeOf(s)===Object.prototype){const t=Object.keys(s);for(const n of t)if(typeof n!="string"||!Uv(s[n]))return!1;return!0}else if(Array.isArray(s)){for(const t of s)if(!Uv(t))return!1;return!0}else return!1;else{const t=typeof s;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x6(s,t,n,o=console.log){const a=S6(s),i=["Layer (type)","Input Shape","Output shape","Param #"];a?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(t*u)));let p;if(!a){i.push("Receives inputs"),p=[];for(const u in s.nodesByDepth)p.push(...s.nodesByDepth[u])}o("_".repeat(t)),qm(i,n,o),o("=".repeat(t));const r=s.layers;for(let u=0;u<r.length;++u)a?_6(r[u],n,o):C6(r[u],n,p,o),o((u===r.length-1?"=":"_").repeat(t));s.checkTrainableWeightsConsistency();const h=w6(s),f=Bm(s.nonTrainableWeights);o(`Total params: ${h+f}`),o(`Trainable params: ${h}`),o(`Non-trainable params: ${f}`),o("_".repeat(t))}function w6(s){let t;return s.collectedTrainableWeights!=null?t=Bm(s.collectedTrainableWeights):t=Bm(s.trainableWeights),t}function S6(s){let t=!0;const n=[],o=[];for(const a in s.nodesByDepth)n.push(s.nodesByDepth[a]);for(const a of n){if(a.length>1||a.length===1&&a[0].inboundLayers.length>1){t=!1;break}o.push(...a)}if(t)for(const a of s.layers){let i=!1;for(const p of a.inboundNodes)if(o.indexOf(p)!==-1)if(i){t=!1;break}else i=!0;if(!t)break}return t}function qm(s,t,n=console.log){let o="";for(let a=0;a<s.length;++a)a>0&&(o=o.slice(0,o.length-1)+" "),o+=s[a],o=o.slice(0,t[a]),o+=" ".repeat(t[a]-o.length);n(o)}function _6(s,t,n){let o,a;try{a=s.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{a="multiple"}try{o=JSON.stringify(s.outputShape)}catch{o="multiple"}const i=s.name,p=s.getClassName(),r=[`${i} (${p})`,a,o,s.countParams().toString()];qm(r,t,n)}function C6(s,t,n,o){let a,i;try{i=s.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{a=JSON.stringify(s.outputShape)}catch{a="multiple"}const p=[];for(const l of s.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(l)===-1))for(let d=0;d<l.inboundLayers.length;++d){const x=l.inboundLayers[d].name,S=l.nodeIndices[d],m=l.tensorIndices[d];p.push(`${x}[${S}][${m}]`)}const r=s.name,h=s.getClassName(),f=p.length===0?"":p[0],u=[`${r} (${h})`,i,a,s.countParams().toString(),f];qm(u,t,o);for(let l=1;l<p.length;++l)qm(["","","","",p[l]],t,o)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tI(s,t,n){return(s==="inboundNodes"||s==="outputLayers"||s==="inputLayers")&&t===0&&typeof n=="string"}function Xm(s,t){if(s===null)return null;if(typeof s=="string")return $l(s);if(typeof s=="number"||typeof s=="boolean")return s;if(s instanceof Array){const n=[],o=s.length;for(let a=0;a<o;++a){const i=s[a];tI(t,a,i)?n.push(i):n.push(Xm(i,t))}return n}else{const n={};for(const o of Object.keys(s)){const a=s[o];if(o==="name"&&typeof a=="string")n[o]=a;else{const i=$l(o);n[i]=Xm(a,i)}}return n}}function zv(s,t){if(s==null)return null;if(typeof s=="string")return Qa(s);if(typeof s=="number"||typeof s=="boolean")return s;if(s instanceof Array){const n=[],o=s.length;for(let a=0;a<o;++a){const i=s[a];tI(t,a,i)?n.push(i):n.push(zv(i,t))}return n}else{const n={};for(const o of Object.keys(s)){const a=s[o],i=Qa(o);(o==="name"||o==="className")&&typeof a=="string"?n[i]=a:n[i]=zv(a,o)}return n}}/** @license See the LICENSE file. */const nI="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const k6=s=>{const t=Object.keys(s);if(t.length===0)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Yo extends mn{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,this.name==null){const g=this.getClassName().toLowerCase();this.name=xy(g)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],Wi(this.inputs).length!==this.inputs.length)throw new Ne(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(g=>g.name)}`);Wi(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(g=>g.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const g of this.outputs){const w=g.sourceLayer,_=g.nodeIndex,C=g.tensorIndex;this.outputLayers.push(w),this.outputLayersNodeIndices.push(_),this.outputLayersTensorIndices.push(C)}for(const g of this.inputs){const w=g.sourceLayer,_=g.nodeIndex,C=g.tensorIndex;xa(_===0,"input layer has >1 nodes"),xa(C===0,"input layer has >1 tensors"),this.inputLayers.push(w),this.inputLayersNodeIndices.push(_),this.inputLayersTensorIndices.push(C)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let g=0;g<this.inputLayers.length;g++){const w=this.inputLayers[g];if(!(w instanceof Sf))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${g} (0-based) originates from layer type ${w.getClassName()}.`);this.inputNames.push(w.name),this.feedInputShapes.push(w.batchInputShape),this.feedInputNames.push(w.name)}for(const g of this.outputLayers)this.outputNames.push(g.name);this.internalInputShapes=this.inputs.map(g=>g.shape),this.internalOutputShapes=this.outputs.map(g=>g.shape);const n={},o={},a={},i={},p={},r=[],h=(g,w,_,C,k,E)=>{(C==null||k==null||E==null)&&(C=g.sourceLayer,k=g.nodeIndex,E=g.tensorIndex);const j=C.inboundNodes[k];if(_.indexOf(j)!==-1)throw new No(`The tensor ${g.name} at layer "${C.name}" is part of a cycle.`);if(w.indexOf(j)!==-1)return;this.containerNodes.add(Yo.nodeKey(C,k)),C.id in p||(p[C.id]=Object.keys(p).length),_.indexOf(j)===-1&&_.push(j);const A=j.inboundLayers.length;for(let O=0;O<A;O++){const N=j.inputTensors[O],D=j.inboundLayers[O],z=j.nodeIndices[O],$=j.tensorIndices[O];h(N,w,_,D,z,$)}for(w.push(j);_.indexOf(j)>=0;)_.splice(_.indexOf(j),1);r.push(j)},f=[],u=[];for(const g of this.outputs)h(g,f,u);const l=r.slice().reverse();for(const g of l){o[g.id]=g,g.id in n||(n[g.id]=0);let w=n[g.id];const _=a[g.outboundLayer.id]==null?0:a[g.outboundLayer.id];w=Math.max(w,_),a[g.outboundLayer.id]=w,i[g.outboundLayer.id]=g.outboundLayer,n[g.id]=w;for(let C=0;C<g.inboundLayers.length;C++){const k=g.inboundLayers[C],E=g.nodeIndices[C],j=k.inboundNodes[E],A=n[j.id]==null?0:n[j.id];n[j.id]=Math.max(w+1,A),o[j.id]=j}}const d={};for(const g in n){const w=n[g];w in d||(d[w]=[]),d[w].push(o[g])}const x={};for(const g in a){const w=a[g];w in x||(x[w]=[]),x[w].push(i[g])}let S=Object.keys(x).map(g=>parseInt(g,10)).sort(sm);this.layers=[];for(const g of S){const w=x[g];w.sort((_,C)=>{const k=p[_.id],E=p[C.id];return k<E?-1:k>E?1:0});for(const _ of w)_ instanceof Yo&&this.internalContainerRefs.push(_),this.layers.push(_)}this.layersByDepth=x,S=Object.keys(d).map(g=>parseInt(g,10)).sort(sm);const m=this.inputs.slice(),y=[];for(const g of S)for(const w of d[g]){const _=w.outboundLayer;if(_!=null){for(const C of w.inputTensors)if(m.indexOf(C)===-1)throw new No(`Graph disconnected: cannot obtain value for tensor ${C} at layer "${_.name}". The following previous layers were accessed without issue: ${y}`);for(const C of w.outputTensors)m.push(C);y.push(_.name)}}this.nodesByDepth=d;const b=this.layers.map(g=>g.name);for(const g of b){const w=b.filter(_=>_===g).length;if(w!==1)throw new No(`The name "${g}" is used ${w} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(b))}this.outboundNodes=[],this.inboundNodes=[],new Sy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(g=>null),outputMasks:this.outputs.map(g=>null),inputShapes:this.inputs.map(g=>g.shape),outputShapes:this.outputs.map(g=>g.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(o=>o.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ne("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const o of this.layers)n.push(...o.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){const o={};let a=0;const i=k6(t);i&&this.parseWeights(t);for(const r of this.layers)for(const[h,f]of r.weights.entries()){const u=i?`${f.name.split("/").slice(0,-1).join("/")+"/"}${h}`:f.originalName;if(o[u]!=null)throw new Ne(`Duplicate weight name: ${u}`);o[u]=f,a++}const p=[];for(const r in t){let h=r;if(o[r]==null){const f=r.split("/");h=f.slice(0,-2).concat([f[f.length-1]]).join("/")}if(o[h]!=null)p.push([o[h],t[r]]);else if(n)throw new Ne(`Provided weight data has no target variable: ${r}`);delete o[h]}if(n){const r=[];for(const h in o)r.push(h);if(r.length>0)throw new Ne(`${r.length} of ${a} weights are not set: ${r}`)}mw(p)}parseWeights(t){for(const n in Object.keys(t)){const o=n.split("/"),a=["vars","layer_checkpoint_dependencies"],i=o.map(p=>p.startsWith("_")?p.slice(1):p).filter(p=>!a.includes(p)).join("/");i!==n&&(t[i]=t[n],delete t[n])}}updatedConfig(){const t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${nI}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){const o=zv(this.updatedConfig());return n?JSON.stringify(o):o}call(t,n){return Xe(()=>{t=Bn(t);const o=new Ui;for(let a=0;a<this.inputs.length;++a)o.add(this.inputs[a],t[a]);return Ud(this.outputs,o,n)})}computeMask(t,n){return Xe(()=>{t=Bn(t);let o;return n==null?o=eu(null,t.length):o=Bn(n),this.runInternalGraph(t,o)[1]})}computeOutputShape(t){const n=Pm(t);if(n.length!==this.inputLayers.length)throw new Ne(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const o={};for(let r=0;r<n.length;r++){const h=this.inputLayers[r],f=n[r],u=h.name+"_0_0";o[u]=f}const a=Object.keys(this.nodesByDepth).map(r=>parseInt(r,10)).sort(sm);if(a.length>1)for(const r of a){const h=this.nodesByDepth[r];for(const f of h){const u=f.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const l=[];for(let m=0;m<f.inboundLayers.length;m++){const y=f.inboundLayers[m],b=f.nodeIndices[m],g=f.tensorIndices[m],w=`${y.name}_${b}_${g}`,_=o[w];l.push(_)}const d=u.computeOutputShape(Fs(l)),x=Pm(d),S=u.inboundNodes.indexOf(f);for(let m=0;m<x.length;m++){const y=`${u.name}_${S}_${m}`;o[y]=x[m]}}}const i=[],p=[];for(let r=0;r<this.outputLayers.length;r++){const h=this.outputLayers[r],f=this.outputLayersNodeIndices[r],u=this.outputLayersTensorIndices[r],l=`${h.name}_${f}_${u}`;p.push(l)}for(let r=0;r<p.length;r++){const h=p[r];xa(h in o),i.push(o[h])}return Fs(i)}runInternalGraph(t,n){n==null&&(n=eu(null,t.length));const o={};for(let h=0;h<this.inputs.length;++h){const f=this.inputs[h],u=t[h],l=n[h];o[f.id]=[u,l]}const a=Object.keys(this.nodesByDepth).map(h=>parseInt(h,10)).sort(sm);for(const h of a){const f=this.nodesByDepth[h];for(const u of f){const l=u.outboundLayer,d=u.inputTensors,x=u.outputTensors,S=new Array;for(const m of d)m.id in o&&S.push(o[m.id]);if(S.length===d.length){let m={},y,b,g,w;if(u.callArgs!=null&&(m=u.callArgs),S.length===1){const[_,C]=S[0];m.mask==null&&(m.mask=C),g=Bn(l.call(_,m)),w=Bn(l.computeMask(_,C)),y=[_],b=[C]}else y=S.map(_=>_[0]),b=S.map(_=>_[1]),m.mask==null&&(m.mask=b),g=Bn(l.call(y,m)),w=Bn(l.computeMask(y,b));if(l.activityRegularizer)throw new un("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let _=0;_<x.length;++_){const C=x[_],k=g[_],E=w[_];o[C.id]=[k,E]}}}}const i=[],p=[],r=[];for(const h of this.outputs){xa(h.id in o,`Could not compute output ${h.name} : ${h.id}`);const[f,u]=o[h.id];r.push(f.shape),i.push(f),p.push(u)}return[i,p,r]}buildNodeConversionMap(t){const n={};let o;for(const a of this.layers){o=a instanceof Yo?1:0;for(let i=0;i<a.inboundNodes.length;i++){const p=Yo.nodeKey(a,i);this.containerNodes.has(p)&&(n[p]=o,o+=1)}}return n}getLayer(t,n){if(n!=null)return this.findLayer(n);if(t==null)throw new Ne("Provide either a layer name or layer index");if(typeof t=="number")return this.findLayer(t);for(const o of this.layers)if(o.name===t)return o;throw new Ne(`No such layer: ${t}`)}findLayer(t){if(this.layers.length<=t)throw new Ne(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}calculateLosses(){return Xe(()=>{const t=[];for(const n of this.layers)for(let o=0;o<n.inboundNodes.length;++o){const a=Yo.nodeKey(n,o);this.containerNodes.has(a)&&t.push(...n.calculateLosses())}return t})}getConfig(){const t={name:this.name},n=this.buildNodeConversionMap(this.layers),o=[];for(const p of this.layers){const r=p.getClassName(),h=p.getConfig(),f=[];for(let l=0;l<p.inboundNodes.length;l++){const d=p.inboundNodes[l],x=Yo.nodeKey(p,l);let S={};if(this.containerNodes.has(x)){if(d.callArgs)try{JSON.stringify(d.callArgs),S=d.callArgs}catch{console.warn(`Layer ${p.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),S={}}if(d.inboundLayers.length>0){const m=[];for(let y=0;y<d.inboundLayers.length;y++){const b=d.inboundLayers[y],g=d.nodeIndices[y],w=d.tensorIndices[y],_=Yo.nodeKey(b,g);let C=n[_];C==null&&(C=0),m.push([b.name,C,w,S])}f.push(m)}}}const u={};u.name=p.name,u.className=r,u.config=h,u.inboundNodes=f,o.push(u)}t.layers=o;const a=[];for(let p=0;p<this.inputLayers.length;p++){const r=this.inputLayers[p],h=this.inputLayersNodeIndices[p],f=Yo.nodeKey(r,h);if(!this.containerNodes.has(f))continue;let u=n[f];u==null&&(u=0);const l=this.inputLayersTensorIndices[p];a.push([r.name,u,l])}t.inputLayers=a;const i=[];for(let p=0;p<this.outputLayers.length;p++){const r=this.outputLayers[p],h=this.outputLayersNodeIndices[p],f=Yo.nodeKey(r,h);if(!this.containerNodes.has(f))continue;let u=n[f];u==null&&(u=0);const l=this.outputLayersTensorIndices[p];i.push([r.name,u,l])}return t.outputLayers=i,t}static fromConfig(t,n,o={},a=!1){const i={},p={};function r(y,b){y.name in p?p[y.name].push(b):p[y.name]=[b]}function h(y,b){const g=[];let w;for(const _ of b){const C=_[0],k=_[1],E=_[2];if(w=_[3]==null?{}:_[3],!(C in i)){r(y,b);return}const j=i[C];if(j.inboundNodes.length<=k){r(y,b);return}const A=j.inboundNodes[k];g.push(A.outputTensors[E])}g.length>0&&y.apply(Fs(g),w)}function f(y){const b=y.name,g=ja(y,n.customObjects!=null?n.customObjects:{});g.setFastWeightInitDuringBuild(a),i[b]=g,y.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new Ne(`Corrupted configuration, expected array for nodeData: ${_}`);r(g,_)})}const u=n.name,l=n.layers;for(const y of l)f(y);for(;!uU(p);)for(const y of l){const b=i[y.name];if(b.name in p){const g=p[b.name];delete p[b.name];for(const w of g)h(b,w)}}const d=[],x=[],S=n.inputLayers;for(const y of S){const b=y[0],g=y[1],w=y[2];xa(b in i);const C=i[b].inboundNodes[g].outputTensors;d.push(C[w])}const m=n.outputLayers;for(const y of m){const b=y[0],g=y[1],w=y[2];xa(b in i);const C=i[b].inboundNodes[g].outputTensors;x.push(C[w])}return new t({inputs:d,outputs:x,name:u})}get stateful(){if(this._stateful)throw new Ne("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Xe(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function T6(s,t,n){const o=t.length;if(s==null||Array.isArray(s)&&s.length===0)return t.map(a=>null);if(o===1)return Array.isArray(s)&&s.length===1?s:typeof s=="object"&&t[0]in s?[s[t[0]]]:[s];if(Array.isArray(s)){if(s.length!==o)throw new Error(`Provided ${n} is an array of ${s.length} element(s), but the model has ${o} outputs. Make sure a set of weights is provided for each model output.`);return s}else if(typeof s=="object"&&Object.keys(s).length>0&&typeof s[Object.keys(s)[0]]=="object"){const a=[];return t.forEach(i=>{i in s?a.push(s[i]):a.push(null)}),a}else throw new Error(`The model has multiple (${o}) outputs, so ${n} must be either an array with ${o} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(s)}`)}function rI(s,t){return T6(s,t,"classWeight")}async function sI(s,t,n,o){if(n!=null){const a=Xe(()=>{if(s.shape.length===1)return Bl(s);if(s.shape.length===2){if(s.shape[1]>1)return Yd(s,1);if(s.shape[1]===1)return Pe(s,[s.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${s.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${s.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await a.data());cn(a);const p=[];return i.forEach(r=>{if(n[r]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${r} exists in the data but not in classWeight`);p.push(n[r])}),Zs(p,"float32")}else return null}function E6(s,t){return $e(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const j6=32;function oI(s,t){let n,o;const a=t;n=a.xs,o=a.ys,ye(n!=null&&o!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const i=ek("input",s.inputNames,n),p=ek("output",s.outputNames,o),r=i[0].shape[0];ye(i.length===s.inputs.length,()=>`LayersModel has ${s.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(s.inputNames)})`),ye(p.length===s.outputs.length,()=>`LayersModel has ${s.outputs.length} outputs, but the dataset provides ${p.length} outputs.  (Expected output keys: ${JSON.stringify(s.outputNames)})`);for(let h=0;h<i.length;h++)ye(i[h].shape[0]===r,()=>`Batch size mismatch: input ${s.inputNames[h]} has ${i[h].shape[0]}; expected  ${r} based on input ${s.inputNames[0]}.`);for(let h=0;h<p.length;h++)ye(p[h].shape[0]===r,()=>`Batch size mismatch: output ${s.outputNames[h]} has ${p[h].shape[0]}; expected  ${r} based on input ${s.inputNames[0]}.`);return{xs:i,ys:p}}function ek(s,t,n){if(n instanceof zr)return[n];if(Array.isArray(n))return ye(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${s} keys ${t}.`),n;{const o=[];for(const a of t){if(n[a]==null)throw new Ne(`The feature data generated by the dataset lacks the required ${s} key '${a}'.`);o.push(n[a])}return o}}function I6(s){if(s.length===3)throw new un("Validation with sample weights is not implemented yet.");return{xs:s[0],ys:s[1]}}async function A6(s,t,n){const o=n.batchesPerEpoch!=null;if(ye(s.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),ye(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),ye(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),ye(!o||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),ye(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),s.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");s.isTraining=!0;try{const a=n.validationData!=null;let i,p;if(a)if(tk(n.validationData))ye(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=I6(n.validationData);i=y.xs,p=y.ys}const r=s.makeTrainFunction(),h=s.getDedupedMetricsNames();let f;a?f=h.slice().concat(h.map(y=>"val_"+y)):f=h.slice();const u=Xj(n.callbacks,n.yieldEvery),l=n.verbose==null?1:n.verbose,{callbackList:d,history:x}=Yj(u,l,n.epochs,null,null,R6(t,n),null,a,f);d.setModel(s),s.history=x,await d.onTrainBegin(),s.stopTraining_=!1;let S=n.initialEpoch==null?0:n.initialEpoch,m=await t.iterator();for(;S<n.epochs;){const y={};await d.onEpochBegin(S);let b=0,g=0;for(o||(m=await t.iterator());!o||b<n.batchesPerEpoch;){const w=await m.next();if(o&&w.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${b} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(w.value!=null){const{xs:_,ys:C}=oI(s,w.value),k={};k.batch=g,k.size=_[0].shape[0],await d.onBatchBegin(g,k);const E=[];if(n.classWeight!=null){const O=rI(n.classWeight,s.outputNames);for(let N=0;N<O.length;++N)E.push(await sI(C[N],null,O[N]))}const j=_.concat(C).concat(E),A=r(j);cn(j);for(let O=0;O<h.length;++O){const N=h[O],D=A[O];k[N]=D,Ca(D)}await d.onBatchEnd(g,k),qj(k),g++,b++}if(o?b>=n.batchesPerEpoch:w.done){if(a){let _;tk(n.validationData)?_=Bn(await s.evaluateDataset(n.validationData,{batches:n.validationBatches})):_=Bn(s.evaluate(i,p,{batchSize:n.validationBatchSize==null?j6:n.validationBatchSize,verbose:0}));for(let C=0;C<s.metricsNames.length;++C)y[`val_${s.metricsNames[C]}`]=_[C]}break}if(s.stopTraining_)break}if(await d.onEpochEnd(S,y),S++,s.stopTraining_)break}return await d.onTrainEnd(),await s.history.syncData(),s.history}finally{s.isTraining=!1}}function R6(s,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(s.size)&&(n=s.size),n}function tk(s){return typeof s.iterator=="function"}function N6(s){return typeof s.next=="function"}async function D6(s,t,n){n=n||{};const o=n.batches!=null,a=s.testFunction;let i=[];if(n.verbose>0)throw new un("Verbose mode is not implemented yet.");ye(!o||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const p=N6(t)?t:await t.iterator();let r=0,h=0;for(;!o||h<n.batches;){const f=await p.next();if(i=Xe(()=>{if(f.value){const{xs:u,ys:l}=oI(s,f.value),d=u.concat(l),x=Xe(()=>a(d));if(cn(d),h===0)for(let m=0;m<x.length;++m)i.push(On(0));const S=d[0].shape[0];for(let m=0;m<x.length;++m){const y=x[m],b=i[m];i[m]=Xe(()=>St(i[m],$e(S,y))),h>0&&cn(b)}cn(x),r+=S,++h}return i}),f.done){o&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let f=0;f<i.length;++f){const u=i[f];i[f]=Ht(i[f],r),cn(u)}return Fs(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Yb(s){ye(s>0&&Number.isInteger(s),()=>`batchSize is required to be a positive integer, but got ${s}`)}function Ld(s,t,n){return s==null?[null]:Array.isArray(s)?s.map(o=>zl(o,t,n-t)):zl(s,t,n-t)}function Vv(s,t){return Xe(()=>s==null?null:Array.isArray(s)?s.map(n=>Vv(n,t)):Dj(s,t.dtype==="int32"?t:Ot(t,"int32")))}function Kb(s,t){const n=[];let o=0,a=null;for(;o<s;)a=o+t,a>=s&&(a=s),n.push([o,a]),o=a;return n}function aI(s){const t=[];s instanceof zr&&(s=[s]);for(let n=0;n<s.length;++n){const o=s[n];if(o.rank===1)t.push(vf(o,1));else{if(o.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(o)}}return t}function Xo(s,t){if(s==null)return;const n=[];if(t instanceof zr)n.push(t.id);else if(Array.isArray(t))t.forEach(a=>n.push(a.id));else if(t!=null)for(const a in t){const i=t[a];n.push(i.id)}const o=[];if(s instanceof zr)n.indexOf(s.id)===-1&&o.push(s);else if(Array.isArray(s))s.forEach(a=>{n.indexOf(a.id)===-1&&o.push(a)});else if(s!=null)for(const a in s){const i=s[a];n.indexOf(i.id)===-1&&o.push(i)}o.forEach(a=>{a.isDisposed||a.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function M6(s){return s instanceof zr}function Gv(s){return Array.isArray(s)}function nk(s){return!M6(s)&&!Gv(s)}function rk(s,t,n,o=!0,a=""){if(t==null||t.length===0){if(s!=null){let p=!1;if(Gv(s)&&s.length>0)p=!0;else if(nk(s)){for(const r in s)if(s.hasOwnProperty(r)){p=!0;break}}else p=!0;if(p)throw new Ne(`Error when checking model ${a} expected no data, but got ${s}`)}return[]}if(s==null)return t.map(p=>null);let i;if(nk(s)){s=s,i=[];for(const p of t){if(s[p]==null)throw new Ne(`No data provided for "${p}". Need data for each key in: ${t}`);i.push(s[p])}}else if(Gv(s)){if(s=s,s.length!==t.length)throw new Ne(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${s}`);i=s}else{if(s=s,t.length>1)throw new Ne(`The model ${a} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${s.shape}`);i=[s]}if(i=aI(i),n!=null)for(let p=0;p<t.length;++p){if(n[p]==null)continue;const r=i[p];if(r.shape.length!==n[p].length)throw new Ne(`Error when checking ${a}: expected ${t[p]} to have ${n[p].length} dimension(s). but got array with shape ${r.shape}`);for(let h=0;h<n[p].length;++h){if(h===0&&!o)continue;const f=r.shape[h],u=n[p][h];if(u!=null&&u>=0&&f!==u)throw new Ne(`${a} expected a batch of elements where each example has shape [${n[p].slice(1,n[p].length)}] (i.e.,tensor shape [*,${n[p].slice(1,n[p].length)}]) but the ${a} received an input with ${r.shape[0]} examples, each with shape [${r.shape.slice(1,r.shape.length)}] (tensor shape [${r.shape}])`)}}return i}function O6(s,t,n){const o=Wi(s.map(i=>i.shape[0]));o.sort();const a=Wi(t.map(i=>i.shape[0]));if(a.sort(),o.length>1)throw new Ne(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(s.map(i=>i.shape))}`);if(a.length>1)throw new Ne(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(o.length>0&&a.length>0&&!$n(o,a))throw new Ne(`Input Tensors should have the same number of samples as target Tensors. Found ${o[0]} input sample(s) and ${a[0]} target sample(s).`)}function $6(s,t,n){const o=[_y,Cy,th];for(let a=0;a<s.length;++a){const i=s[a],p=t[a],r=n[a];if(p!=null){if(p===th&&i.shape[i.shape.length-1]===1)throw new Ne(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(o.indexOf(p)!==-1){const h=i.shape.slice(1),f=r.slice(1);for(let u=0;u<h.length;++u){const l=h[u],d=f[u];if(d!=null&&l!==d)throw new Ne(`A target Tensor with shape ${i.shape} was passed for an output of shape ${r}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function sk(s,t,n,o=!0,a=""){let i;if(Array.isArray(s)){if(s.length!==t.length)throw new Ne(`Error when checking model ${a}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${s.length} Tensors(s).`);i=s}else{if(t.length>1)throw new Ne(`The model expects ${t.length} ${a} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(s.shape)}.`);i=[s]}if(n!=null)for(let p=0;p<t.length;++p){if(n[p]==null)continue;const r=i[p];if(r.shape.length!==n[p].length)throw new Ne(`Error when checking ${a}: expected ${t[p]} to have ${n[p].length} dimension(s), but got array with shape ${JSON.stringify(r.shape)}`);for(let h=0;h<n[p].length;++h){if(h===0&&!o)continue;const f=r.shape[h],u=n[p][h];if(u!=null&&u!==f)throw new Ne(`Error when checking ${a}: expected ${t[p]} to have shape ${JSON.stringify(n[p])} but got array with shape ${JSON.stringify(r.shape)}.`)}}}function L6(s,t){if(s==null||Array.isArray(s)&&s.length===0)return t.map(o=>[]);let n;if(typeof s=="string"||typeof s=="function")n=[s];else if(Array.isArray(s)||typeof s=="object")n=s;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${s}`);if(Array.isArray(n))return t.map(o=>n);{const o=[];for(const a of t){let i=n.hasOwnProperty(a)?n[a]:[];Array.isArray(i)||(i=[i]),o.push(i)}return o}}const F6="layers-model";class cc extends Yo{constructor(t){super(t),this.isTraining=!1}summary(t,n,o=console.log){if(!this.built)throw new Ne("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");x6(this,t,n,o)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=v6(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof il))throw new Ne("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const p in t.loss)if(this.outputNames.indexOf(p)===-1)throw new Ne(`Unknown entry in loss dictionary: "${p}". Only expected the following keys: ${this.outputNames}`);for(const p of this.outputNames)t.loss[p]==null&&console.warn(`Output "${p}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${p} during training`),n.push(Xb(t.loss[p]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new Ne(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);n=t.loss.map(r=>Xb(r))}else{const p=Xb(t.loss);this.outputs.forEach(r=>{n.push(p)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let p=0;p<this.outputs.length;++p){const r=this.internalOutputShapes[p],h=this.outputNames[p];this.feedOutputNames.push(h),this.feedOutputShapes.push(r),this.feedLossFns.push(this.lossFunctions[p])}const o=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ul("loss",()=>{for(let p=0;p<this.outputs.length;++p){if(o.indexOf(p)!==-1)continue;const r=this.lossFunctions[p];this.outputs.length>1&&(this.metricsTensors.push([r,p]),this.metricsNames.push(this.outputNames[p]+"_loss"))}});const a=L6(t.metrics,this.outputNames),i=(p,r,h)=>{this.outputNames.length>1&&(r=this.outputNames[p]+"_"+r),this.metricsNames.push(r),this.metricsTensors.push([h,p])};Ul("metric",()=>{for(let p=0;p<this.outputs.length;++p){if(o.indexOf(p)!==-1)continue;const r=a[p];(f=>{const u="";let l,d,x;for(const S of f){if(typeof S=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(S)!==-1){const y=this.internalOutputShapes[p];y[y.length-1]===1||this.lossFunctions[p]===Cy?["accuracy","acc"].indexOf(S)!==-1?d=Zj:["crossentropy","ce"].indexOf(S)!==-1&&(d=u6):this.lossFunctions[p]===Gm?["accuracy","acc"].indexOf(S)!==-1?d=c6:["crossentropy","ce"].indexOf(S)!==-1&&(d=eI):["accuracy","acc"].indexOf(S)!==-1?d=Qj:["crossentropy","ce"].indexOf(S)!==-1&&(d=Jj);let b;["accuracy","acc"].indexOf(S)!==-1?b="acc":["crossentropy","ce"].indexOf(S)!==-1&&(b="ce"),x=d,l=u+b}else x=b6(S),l=u+im(S);let m;Ul(l,()=>{m=x}),i(p,l,m)}})(r)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,n,o={}){const a=o.batchSize==null?32:o.batchSize;Yb(a);const p=this.standardizeUserDataXY(t,n,!0,a);try{const r=p[0].concat(p[1]);this.makeTestFunction();const h=this.testFunction,f=this.testLoop(h,r,a,o.verbose,o.steps);return Fs(f)}finally{Xo(p[0],t),Xo(p[1],n)}}async evaluateDataset(t,n){return this.makeTestFunction(),D6(this,t,n)}checkNumSamples(t,n,o,a="steps"){let i;if(o!=null){if(i=null,n!=null)throw new Ne(`If ${a} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(t!=null)Array.isArray(t)?i=t[0].shape[0]:i=t.shape[0];else throw new Ne(`Either the input data should have a defined shape, or ${a} shoud be specified.`);return i}execute(t,n){if(Array.isArray(n)&&n.length===0)throw new Ne("`outputs` is an empty Array, which is not allowed.");const o=Array.isArray(n),a=o?n:[n],i=this.retrieveSymbolicTensors(a),p=new Ui;if(t instanceof zr&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new Ne(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let h=0;h<this.inputs.length;++h)p.add(this.inputs[h],t[h])}else for(const h of this.inputs){const f=t[h.name];if(f==null)throw new Ne(`No value is provided for the model's input ${h.name}`);p.add(h,f)}const r=Ud(i,p);return o?r:r[0]}retrieveSymbolicTensors(t){const n=eu(null,t.length);let o=t.length;for(const a of this.layers){const i=Array.isArray(a.output)?a.output:[a.output],p=i.map(r=>r.name);for(let r=0;r<t.length;++r){const h=p.indexOf(t[r]);if(h!==-1&&(n[r]=i[h],o--),o===0)break}if(o===0)break}if(o>0){const a=[];throw n.forEach((i,p)=>{i==null&&a.push(t[p])}),new Ne(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(a)}`)}return n}predictLoop(t,n=32,o=!1){return Xe(()=>{const a=this.checkNumSamples(t);if(o)throw new un("Verbose predictLoop() is not implemented yet.");const i=Kb(a,n),p=this.outputs.map(r=>[]);for(let r=0;r<i.length;++r)Xe(()=>{const f=i[r][0],u=i[r][1],l=Ld(t,f,u),d=[];if(Array.isArray(l))for(let S=0;S<l.length;++S)d.push({key:this.inputs[S],value:l[S]});else d.push({key:this.inputs[0],value:l});const x=new Ui(d);return Ud(this.outputs,x)}).forEach((f,u)=>p[u].push(f));return Fs(p.map(r=>Ps(r,0)))})}predict(t,n={}){const o=aI(t);sk(o,this.inputNames,this.feedInputShapes,!1);try{const a=n.batchSize==null?32:n.batchSize;return Yb(a),this.predictLoop(o,a)}finally{Xo(o,t)}}predictOnBatch(t){sk(t,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,n)}standardizeUserDataXY(t,n,o=!0,a){if(this.optimizer_==null)throw new No("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let p=0;p<this.feedOutputShapes.length;++p){const r=this.feedOutputShapes[p];this.feedLossFns[p]===Gm?i.push(r.slice(0,r.length-1).concat([1])):i.push(r)}if(t=rk(t,this.feedInputNames,this.feedInputShapes,!1,"input"),n=rk(n,this.feedOutputNames,i,!1,"target"),O6(t,n),$6(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&a!=null&&a>0&&t[0].shape[0]%a!==0)throw new Ne(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${a}. Found: ${t[0].shape[0]} sample(s).`);return[t,n]}async standardizeUserData(t,n,o,a,i=!0,p){const[r,h]=this.standardizeUserDataXY(t,n,i,p);if(o!=null)throw new Error("sample weight is not supported yet.");let f=null;if(a!=null){const u=rI(a,this.outputNames);f=[];for(let l=0;l<u.length;++l)f.push(await sI(h[l],null,u[l]))}return[r,h,f]}testLoop(t,n,o,a=0,i){return Xe(()=>{const p=this.checkNumSamples(n,o,i,"steps"),r=[];if(a>0)throw new un("Verbose mode is not implemented yet.");if(i!=null)throw new un("steps mode in testLoop() is not implemented yet");{const h=Kb(p,o),f=Zs(ra(0,p));for(let u=0;u<h.length;++u){const l=h[u][0],d=h[u][1],x=zl(f,l,d-l),S=Vv(n,x),m=t(S);if(u===0)for(let y=0;y<m.length;++y)r.push(On(0));for(let y=0;y<m.length;++y){const b=m[y];r[y]=St(r[y],$e(d-l,b))}}for(let u=0;u<r.length;++u)r[u]=Ht(r[u],p)}return r})}getDedupedMetricsNames(){const t=this.metricsNames,n=[];for(let o=0;o<t.length;++o){const a=t[o];let i=a;if(zC(t,a)>1){const p=zC(t.slice(0,o),a);i+=`_${p}`}n.push(i)}return n}makeTrainFunction(){return t=>{const n=[],o=t.slice(0,this.inputs.length),a=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),p=[],r=()=>{const l=[];for(let m=0;m<this.inputs.length;++m)l.push({key:this.inputs[m],value:o[m]});const d=new Ui(l),x=Ud(this.outputs,d,{training:!0});let S;for(let m=0;m<this.lossFunctions.length;++m){const y=this.lossFunctions[m];let b=y(a[m],x[m]);i[m]!=null&&(b=E6(b,i[m]));const g=Lr(b);n.push(g),m===0?S=b:S=St(S,b)}for(let m=0;m<this.metricsTensors.length;++m){let y;if(this.outputs.length>1&&m<this.outputs.length)y=n[m];else{const b=this.metricsTensors[m][0],g=this.metricsTensors[m][1];y=Lr(b(a[g],x[g]))}Ca(y),p.push(y)}return S=Lr(S),this.calculateLosses().forEach(m=>{S=St(S,m)}),S},h=this.collectedTrainableWeights.map(l=>l.read());return[this.optimizer_.minimize(r,!0,h)].concat(p)}}makeTestFunction(){this.testFunction=t=>Xe(()=>{const n=[];let o;const a=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),p=[];for(let f=0;f<this.inputs.length;++f)p.push({key:this.inputs[f],value:a[f]});const r=new Ui(p),h=Ud(this.outputs,r);for(let f=0;f<this.lossFunctions.length;++f){const u=this.lossFunctions[f],l=Lr(u(i[f],h[f]));f===0?o=l:o=St(o,l),n.push(o)}for(let f=0;f<this.metricsTensors.length;++f){const u=this.metricsTensors[f][0],l=this.metricsTensors[f][1],d=Lr(u(i[l],h[l]));n.push(d)}return n})}async fit(t,n,o={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,i,p,r,h,f,u,l,d;try{const x=o.batchSize==null?32:o.batchSize;Yb(x);const m=await this.standardizeUserData(t,n,o.sampleWeight,o.classWeight,!1,x);a=m[0],i=m[1],d=m[2];let y=!1,b;if(o.validationData!=null&&o.validationData.length>0){if(y=!0,o.validationData.length===2)h=o.validationData[0],f=o.validationData[1];else throw o.validationData.length===3?new un("validationData including sample weights is not supported yet."):new Ne(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${o.validationData} is invalid.`);const O=await this.standardizeUserData(h,f,null,null,!0,x);u=O[0],l=O[1],b=u.concat(l)}else if(o.validationSplit!=null&&o.validationSplit>0&&o.validationSplit<1){y=!0;const A=Math.floor(a[0].shape[0]*(1-o.validationSplit)),O=a[0].shape[0];u=Ld(a,A,O),p=a,a=Ld(a,0,A),l=Ld(i,A,O),r=i,i=Ld(i,0,A),b=u.concat(l)}else o.validationSteps!=null&&(y=!0);const g=a.concat(i).concat(d);this.checkTrainableWeightsConsistency();const w=this.makeTrainFunction(),_=this.getDedupedMetricsNames();let C,k;y?(this.makeTestFunction(),C=this.testFunction,k=_.slice().concat(_.map(A=>"val_"+A))):(C=null,b=[],k=_.slice());const E=Xj(o.callbacks,o.yieldEvery);return await this.fitLoop(w,g,_,x,o.epochs,o.verbose,E,C,b,o.shuffle,k,o.initialEpoch,null,null)}finally{this.isTraining=!1,Xo(a,t),Xo(i,n),Xo(p,t),Xo(r,n),Xo(u,h),Xo(l,f),d!=null&&cn(d)}}async fitLoop(t,n,o,a,i,p,r,h,f,u,l,d,x,S){a==null&&(a=32),i==null&&(i=1),u==null&&(u=!0),d==null&&(d=0);let m=!1;if(h!=null&&f!=null&&(m=!0),S!=null&&(m=!0,x==null))throw new Ne("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,a,x,"steps_per_epoch");let b;y!=null&&(b=ra(0,y)),p==null&&(p=1);const{callbackList:g,history:w}=Yj(r,p,i,d,y,x,a,m,l);g.setModel(this),this.history=w,await g.onTrainBegin(),this.stopTraining_=!1;for(let _=d;_<i;++_){await g.onEpochBegin(_);const C={};if(x!=null)throw new un("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new un("batch shuffling is not implemneted yet");u&&nO(b);const k=Zs(b),E=Kb(y,a);for(let j=0;j<E.length;++j){const A={};if(await g.onBatchBegin(j,A),Xe(()=>{const O=E[j][0],N=E[j][1],D=zl(k,O,N-O);A.batch=j,A.size=N-O;const z=Vv(n,D),$=t(z);for(let B=0;B<o.length;++B){const F=o[B],G=$[B];A[F]=G,Ca(G)}if(j===E.length-1&&m){const B=this.testLoop(h,f,a);for(let F=0;F<o.length;++F){const G=o[F],W=B[F];Ca(W),C["val_"+G]=W}}}),await g.onBatchEnd(j,A),qj(A),this.stopTraining_)break}k.dispose()}if(await g.onEpochEnd(_,C),this.stopTraining_)break}return await g.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(t,n){return A6(this,t,n)}async trainOnBatch(t,n){const o=await this.standardizeUserData(t,n),a=o[0],i=o[1],r=this.makeTrainFunction()(a.concat(i)),h=[];for(const f of r){const u=await f.data();h.push(u[0])}return cn(r),Xo(o[0],t),Xo(o[1],n),Fs(h)}getNamedWeights(t){const n=[],o=t!=null&&t.trainableOnly,a=o?this.trainableWeights:this.weights,i=this.getWeights(o);for(let p=0;p<a.length;++p)o&&!a[p].trainable||n.push({name:a[p].originalName,tensor:i[p]});return n}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=pC().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-pC().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=Qa(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(n=>Qa(n))}else{const n=Object.keys(this.loss);t={};const o=this.loss;for(const a of n)if(typeof o[a]=="string")t[a]=Qa(o[a]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Qa(im(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>Qa(im(t)));{const t={};for(const n in this.metrics)t[n]=Qa(im(this.metrics[n]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Xm(t.optimizer_config),o=ja(n);let a;if(typeof t.loss=="string")a=$l(t.loss);else if(Array.isArray(t.loss))a=t.loss.map(p=>$l(p));else if(t.loss!=null){a={};for(const p in t.loss)a[p]=$l(t.loss[p])}let i;if(Array.isArray(t.metrics))i=t.metrics.map(p=>$l(p));else if(t.metrics!=null){i={};for(const p in t.metrics)i[p]=$l(t.metrics[p])}this.compile({loss:a,metrics:i,optimizer:o})}async save(t,n){if(typeof t=="string"){const f=a3(t);if(f.length===0)throw new Ne(`Cannot find any save handlers for URL '${t}'`);if(f.length>1)throw new Ne(`Found more than one (${f.length}) save handlers for URL '${t}'`);t=f[0]}if(t.save==null)throw new Ne("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const o=await mC(this.getNamedWeights(n)),r={modelTopology:this.toJSON(null,!1),format:F6,generatedBy:`TensorFlow.js tfjs-layers v${nI}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){r.trainingConfig=this.getTrainingConfig();const f="optimizer",{data:u,specs:l}=await mC(await this.optimizer.getWeights(),f);o.specs.push(...l),o.data=QO([o.data,u])}return this.userDefinedMetadata!=null&&(JC(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=o.data,r.weightSpecs=o.specs,t.save(r)}setUserDefinedMetadata(t){JC(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}cc.className="Model";xt(cc);class iI extends cc{}iI.className="Functional";xt(iI);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function P6(s,t){if(t==null&&(t={}),typeof s=="string"){const n=i3(s,t);if(n.length===0)n.push(GP(s,t));else if(n.length>1)throw new Ne(`Found more than one (${n.length}) load handlers for URL '${s}'`);s=n[0]}return B6(s,void 0,t)}async function B6(s,t,n){if(n==null&&(n={}),s.load==null)throw new Ne("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const o=await s.load();let a=o.modelTopology;a.model_config!=null&&(a=a.model_config);const i=n.strict==null?!0:n.strict,p=o.weightData!=null&&o.weightSpecs!=null&&i,r=ja(Xm(a),t,p),h=o.trainingConfig;if(h!=null&&r.loadTrainingConfig(h),o.userDefinedMetadata!=null&&r.setUserDefinedMetadata(o.userDefinedMetadata),o.weightData!=null){if(o.weightSpecs==null)throw new Ne("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:f,optimizerWeights:u}=U6(o.weightData,o.weightSpecs);r.loadWeights(f,i),r.optimizer!=null&&u.length>0&&await r.optimizer.setWeights(u),cn(f),cn(u.map(l=>l.tensor))}return r}function U6(s,t){const n=HO(s,t),o={},a=[];return t.forEach(i=>{i.group==="optimizer"?a.push({name:i.name,tensor:n[i.name]}):o[i.name]=n[i.name]}),{modelWeights:o,optimizerWeights:a}}class nh extends cc{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:xy("sequential_"),t.layers!=null)for(const n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(o=>o<0))throw new Ne(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const n=t instanceof nh||t instanceof cc;let o;if(n){if(o=t,o.outputs.length!==1)throw new Ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(o.inputs.length!==1)throw new Ne("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new Ne("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const a=BU({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(a)}if(n)this.outputs=o.outputs,this.inputs=o.inputs;else{if(t.inboundNodes.length!==1)throw new Ne(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new Ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=zj(this.outputs[0])}this.inboundNodes=[],new Sy({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:eu(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(a=>a.shape),outputShapes:this.outputs[0].shape})}else{const a=t.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(In(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new cc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,o=console.log){this.built||this.build(),super.summary(t,n,o)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,o={}){if(!this.built)throw new No("The model needs to be compiled before being used.");return this.model.evaluate(t,n,o)}async evaluateDataset(t,n){if(!this.built)throw new No("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,o={}){if(!this.built)throw new No("The model needs to be compiled before being used.");return this.model.fit(t,n,o)}async fitDataset(t,n){if(!this.built)throw new No("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,o={},a=!1){let i,p={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Ne("Legacy serialization format not supported yet.");i=n}else ye(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,p=n;const r=new t(p);if(!(r instanceof nh))throw new un(`Sequential.fromConfig called on non-Sequential input: ${r}`);for(const h of i){const u=ja(h,void 0,a);a&&u.setFastWeightInitDuringBuild(!0),r.add(u)}return r}set stopTraining(t){if(this.model==null)throw new Ne("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new Ne("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const n of this.layers){const o={};o.className=n.getClassName(),o.config=n.getConfig(),t.push(o)}return{name:this.name,layers:t}}}nh.className="Sequential";xt(nh);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _s=class extends Ac{getConfig(){return{}}};class lI extends _s{apply(t,n=1){return CU(t,n)}}lI.className="elu";xt(lI);class uI extends _s{apply(t){return CE(t)}}uI.className="selu";xt(uI);class cI extends _s{apply(t){return lu(t)}}cI.className="relu";xt(cI);class dI extends _s{apply(t){return Xe(()=>Qd(6,lu(t)))}}dI.className="relu6";xt(dI);class hI extends _s{apply(t){return t}}hI.className="linear";xt(hI);class fI extends _s{apply(t){return Ec(t)}}fI.className="sigmoid";xt(fI);class pI extends _s{apply(t){return TU(t)}}pI.className="hardSigmoid";xt(pI);class mI extends _s{apply(t){return df(t)}}mI.className="softplus";xt(mI);class gI extends _s{apply(t){return kU(t)}}gI.className="softsign";xt(gI);class yI extends _s{apply(t){return cy(t)}}yI.className="tanh";xt(yI);let vw=class extends _s{apply(t,n=-1){return wx(t,n)}};vw.className="softmax";xt(vw);class bI extends _s{apply(t,n=-1){return gE(t,n)}}bI.className="logSoftmax";xt(bI);class vI extends _s{apply(t){return Xe(()=>Xe(()=>{const n=Math.sqrt(2),o=$e(.5,St(1,dE(Ht(t,n))));return $e(t,o)}))}}vI.className="gelu";xt(vI);class xI extends _s{apply(t){return Xe(()=>$e(.5,$e(t,St(1,cy($e(ws(Ht(2,Math.PI)),St(t,$e(.044715,Zl(t,3)))))))))}}xI.className="gelu_new";xt(xI);class wI extends _s{apply(t){return Xe(()=>$e(t,cy(df(t))))}}wI.className="mish";xt(wI);class SI extends _s{apply(t,n=1){return Xe(()=>$e(Ec($e(t,n)),t))}}SI.className="swish";xt(SI);function Yi(s){return s.getClassName()}function Zb(s,t={}){return bf(s,Ro.getMap().classNameMap,t,"activation")}function Ki(s){if(s==null){const t={};return t.className="linear",t.config={},Zb(t)}if(typeof s=="string"){const t={};return t.className=s,t.config={},Zb(t)}else return s instanceof _s?s:Zb(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function z6(s){if(s!=null&&typeof s!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${s}`)}class _I extends Ac{}class CI extends _I{constructor(t){super(),z6(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return Xe(()=>{let n=ns([1]);return this.hasL1&&(n=St(n,Wt($e(this.l1,js(t))))),this.hasL2&&(n=St(n,Wt($e(this.l2,xf(t))))),Pe(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,n){return new t({l1:n.l1,l2:n.l2})}}CI.className="L1L2";xt(CI);const ok={l1l2:"L1L2"};function er(s){return ow(s)}function ak(s,t={}){return bf(s,Ro.getMap().classNameMap,t,"regularizer")}function fr(s){if(s==null)return null;if(typeof s=="string"){const n={className:s in ok?ok[s]:s,config:{}};return ak(n)}else return s instanceof _I?s:ak(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kI extends mn{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,n){t=Zt(t);let o=lu(t);return this.maxValue!=null&&(o=fo(o,0,this.maxValue)),o}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},n=super.getConfig();return Object.assign(t,n),t}}kI.className="ReLU";xt(kI);class TI extends mn{constructor(t){super(t??{}),this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const o=Zt(t);return dx(o,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}TI.className="LeakyReLU";xt(TI);class EI extends mn{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=hr(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=fr(t.alphaRegularizer),this.alphaConstraint=Hr(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new Ne(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=In(t);const n=t.slice(1);if(this.sharedAxes!=null)for(const a of this.sharedAxes)n[a-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const o={};if(this.sharedAxes!=null)for(let a=1;a<t.length;++a)o[a]=t[a];this.inputSpec=[new Gr({ndim:t.length,axes:o})],this.built=!0}call(t,n){return t=Zt(t),yx(t,this.alpha.read())}getConfig(){const t={alphaInitializer:yr(this.alphaInitializer),alphaRegularizer:er(this.alphaRegularizer),alphaConstraint:Wr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(t,n),t}}EI.className="PReLU";xt(EI);let jI=class extends mn{constructor(t){if(super(t??{}),this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new un(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const o=Zt(t);return fy(o)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}};jI.className="ELU";xt(jI);class II extends mn{constructor(t){super(t??{}),this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,n){const o=Zt(t);return $e(o,Ot(go(o,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},n=super.getConfig();return Object.assign(t,n),t}}II.className="ThresholdedReLU";xt(II);class AI extends mn{constructor(t){super(t??{}),this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new vw().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,n){return Xe(()=>{let o=Zt(t);const a=n.mask;if(a!=null){const i=$e(Yt(al(o.shape),Ot(a,o.dtype)),On(-1e9));o=St(o,i)}return this.axis instanceof Array?this.axis.length>1?Aa(Yt(o,yE(o,this.axis,!0))):this.softmax(o,this.axis[0]):this.softmax(o,this.axis)})}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}AI.className="Softmax";xt(AI);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dc(s,t,n){if(typeof s=="number")return eu(s,t);if(s.length!==t)throw new Ne(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${s.length} elements.`);for(let o=0;o<t;++o){const a=s[o];if(!xU(a))throw new Ne(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(s)} including a non-integer number ${a}`)}return s}function na(s,t,n,o,a=1){if(s==null)return s;const i=t+(t-1)*(a-1);let p;return n==="same"?p=s:p=s-i+1,Math.floor((p+o-1)/o)}function wa(s,t,n,o){if(s==null)return null;if(o==="valid")s=s*t+Xi([n-t,0]);else if(o==="same")s=s*t;else throw new Ne(`Unsupport padding mode: ${o}.`);return s}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xw(s,t){return Xe(()=>(Nr(t),t==="channelsFirst"?kn(s,[0,2,3,1]):s))}function RI(s,t){return Xe(()=>(Nr(t),t==="channelsFirst"?kn(s,[0,2,3,4,1]):s))}function V6(s,t,n,o=1,a="valid",i,p=1){return Xe(()=>{if(i==null&&(i=sa()),Nr(i),s.shape.length!==3)throw new Ne(`The input of a conv1dWithBias operation should be 3, but is ${s.shape.length} instead.`);if(t.shape.length!==3)throw new Ne(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Ne(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(s=kn(s,[0,2,1])),a==="causal")throw new un("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let r=aE(s,t,o,a==="same"?"same":"valid","NWC",p);return n!=null&&(r=aa(r,n)),r})}function ik(s,t,n,o=[1,1],a="valid",i,p,r=null){return Xe(()=>{if(i==null&&(i=sa()),Nr(i),s.rank!==3&&s.rank!==4)throw new Ne(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${s.rank}.`);if(t.rank!==3&&t.rank!==4)throw new Ne(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${s.rank}.`);let h=xw(s,i);if(a==="causal")throw new un("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return h=UF({x:h,filter:t,strides:o,pad:a==="same"?"same":"valid",dilations:p,dataFormat:"NHWC",bias:n,activation:r}),i==="channelsFirst"&&(h=kn(h,[0,3,1,2])),h})}function G6(s,t,n,o=[1,1,1],a="valid",i,p){return Xe(()=>{if(i==null&&(i=sa()),Nr(i),s.rank!==4&&s.rank!==5)throw new Ne(`conv3dWithBias expects input to be of rank 4 or 5, but received ${s.rank}.`);if(t.rank!==4&&t.rank!==5)throw new Ne(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${s.rank}.`);let r=RI(s,i);if(a==="causal")throw new un("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return r=L$(r,t,o,a==="same"?"same":"valid","NDHWC",p),n!=null&&(r=aa(r,n)),i==="channelsFirst"&&(r=kn(r,[0,4,1,2,3])),r})}class ky extends mn{constructor(t,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",ky.verifyArgs(n),this.rank=t,rs(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new un(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=dc(n.kernelSize,t,"kernelSize"),this.strides=dc(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,yo(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Nr(this.dataFormat),this.activation=Ki(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=hr(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Hr(n.biasConstraint),this.biasRegularizer=fr(n.biasRegularizer),this.activityRegularizer=fr(n.activityRegularizer),this.dilationRate=dc(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ne(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ne(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ne(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(xa("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!aw(t.kernelSize,"number",1,3))throw new Ne(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Yi(this.activation),useBias:this.useBias,biasInitializer:yr(this.biasInitializer),biasRegularizer:er(this.biasRegularizer),activityRegularizer:er(this.activityRegularizer),biasConstraint:Wr(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}class Rc extends ky{constructor(t,n){super(t,n),this.kernel=null,Rc.verifyArgs(n),this.filters=n.filters,rs(this.filters,"filters"),this.kernelInitializer=hr(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Hr(n.kernelConstraint),this.kernelRegularizer=fr(n.kernelRegularizer)}build(t){t=In(t);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Ne(`The channel dimension of the input should be defined. Found ${t[n]}`);const o=t[n],a=this.kernelSize.concat([o,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:o}}],this.built=!0}call(t,n){return Xe(()=>{t=Zt(t);let o;const a=this.bias==null?null:this.bias.read(),i=Ej(this.activation.getClassName());if(i!=null&&this.rank===2)o=ik(t,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)o=V6(t,this.kernel.read(),a,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)o=ik(t,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)o=G6(t,this.kernel.read(),a,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new un("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(o=this.activation.apply(o))}return o})}computeOutputShape(t){t=In(t);const n=[],o=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let i=0;i<o.length;++i){const p=na(o[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(p)}let a=[t[0]];return this.dataFormat==="channelsLast"?(a=a.concat(n),a.push(this.filters)):(a.push(this.filters),a=a.concat(n)),a}getConfig(){const t={filters:this.filters,kernelInitializer:yr(this.kernelInitializer),kernelRegularizer:er(this.kernelRegularizer),kernelConstraint:Wr(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new Ne(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class Cf extends Rc{constructor(t){super(2,t),Cf.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!aw(t.kernelSize,"number",1,2))throw new Ne(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}Cf.className="Conv2D";xt(Cf);class kf extends Rc{constructor(t){super(3,t),kf.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new Ne(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}kf.className="Conv3D";xt(kf);class NI extends Cf{constructor(t){if(super(t),this.inputSpec=[new Gr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ne(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=In(t),t.length!==4)throw new Ne("Input should have rank 4; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Ne("The channel dimension of the inputs should be defined. Found `None`.");const o=t[n],a=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Gr({ndim:4,axes:{[n]:o}})],this.built=!0}call(t,n){return Xe(()=>{let o=Zt(t);if(o.shape.length!==4)throw new Ne(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);const a=o.shape,i=a[0];let p,r;this.dataFormat==="channelsFirst"?(p=2,r=3):(p=1,r=2);const h=a[p],f=a[r],u=this.kernelSize[0],l=this.kernelSize[1],d=this.strides[0],x=this.strides[1],S=wa(h,d,u,this.padding),m=wa(f,x,l,this.padding),y=[i,S,m,this.filters];this.dataFormat!=="channelsLast"&&(o=kn(o,[0,2,3,1]));let b=iE(o,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=kn(b,[0,3,1,2])),this.bias!=null&&(b=aa(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(t){t=In(t);const n=t.slice();let o,a,i;this.dataFormat==="channelsFirst"?(o=1,a=2,i=3):(o=3,a=1,i=2);const p=this.kernelSize[0],r=this.kernelSize[1],h=this.strides[0],f=this.strides[1];return n[o]=this.filters,n[a]=wa(n[a],h,p,this.padding),n[i]=wa(n[i],f,r,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}NI.className="Conv2DTranspose";xt(NI);class DI extends kf{constructor(t){if(super(t),this.inputSpec=[new Gr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ne(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=In(t),t.length!==5)throw new Ne("Input should have rank 5; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Ne("The channel dimension of the inputs should be defined. Found `None`.");const o=t[n],a=this.kernelSize.concat([this.filters,o]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Gr({ndim:5,axes:{[n]:o}})],this.built=!0}call(t,n){return Xe(()=>{let o=Zt(t);if(o.shape.length!==5)throw new Ne(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${o.shape.length}`);const a=o.shape,i=a[0];let p,r,h;this.dataFormat==="channelsFirst"?(h=2,p=3,r=4):(h=1,p=2,r=3);const f=a[h],u=a[p],l=a[r],d=this.kernelSize[0],x=this.kernelSize[1],S=this.kernelSize[2],m=this.strides[0],y=this.strides[1],b=this.strides[2],g=wa(f,m,d,this.padding),w=wa(u,y,x,this.padding),_=wa(l,b,S,this.padding),C=[i,g,w,_,this.filters];this.dataFormat!=="channelsLast"&&(o=kn(o,[0,2,3,4,1]));let k=B$(o,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(k=kn(k,[0,4,1,2,3])),this.bias!==null&&(k=aa(k,this.bias.read(),this.dataFormat)),this.activation!==null&&(k=this.activation.apply(k)),k})}computeOutputShape(t){t=In(t);const n=t.slice();let o,a,i,p;this.dataFormat==="channelsFirst"?(o=1,a=2,i=3,p=4):(o=4,a=1,i=2,p=3);const r=this.kernelSize[0],h=this.kernelSize[1],f=this.kernelSize[2],u=this.strides[0],l=this.strides[1],d=this.strides[2];return n[o]=this.filters,n[a]=wa(n[a],u,r,this.padding),n[i]=wa(n[i],l,h,this.padding),n[p]=wa(n[p],d,f,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}DI.className="Conv3DTranspose";xt(DI);class MI extends Rc{constructor(t,n){if(super(t,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Ne("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Ne("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Ne(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=hr(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=fr(n.depthwiseRegularizer),this.depthwiseConstraint=Hr(n.depthwiseConstraint),this.pointwiseInitializer=hr(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=fr(n.pointwiseRegularizer),this.pointwiseConstraint=Hr(n.pointwiseConstraint)}build(t){if(t=In(t),t.length<this.rank+2)throw new Ne(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null||t[n]<0)throw new Ne(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[n])}`);const o=t[n],a=this.kernelSize.concat([o,this.depthMultiplier]),i=[];for(let r=0;r<this.rank;++r)i.push(1);i.push(o*this.depthMultiplier,this.filters);const p=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,p,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,p,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,p,this.biasConstraint):this.bias=null,this.inputSpec=[new Gr({ndim:this.rank+2,axes:{[n]:o}})],this.built=!0}call(t,n){return Xe(()=>{t=Zt(t);let o;if(this.rank===1)throw new un("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=kn(t,[0,2,3,1])),o=kE(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(o=aa(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),this.dataFormat==="channelsFirst"&&(o=kn(o,[0,3,1,2])),o})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=yr(this.depthwiseInitializer),t.pointwiseInitializer=yr(this.pointwiseInitializer),t.depthwiseRegularizer=er(this.depthwiseRegularizer),t.pointwiseRegularizer=er(this.pointwiseRegularizer),t.depthwiseConstraint=Wr(this.depthwiseConstraint),t.pointwiseConstraint=Wr(this.pointwiseConstraint),t}}MI.className="SeparableConv";class OI extends MI{constructor(t){super(2,t)}}OI.className="SeparableConv2D";xt(OI);class Ty extends Rc{constructor(t){super(1,t),Ty.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!aw(t.kernelSize,"number",1,1))throw new Ne(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}Ty.className="Conv1D";xt(Ty);class $I extends mn{constructor(t){super(t),typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,n){return Xe(()=>{if(t=Zt(t),this.dataFormat==="channelsLast"){const o=am(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return am(o,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const o=am(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return am(o,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}$I.className="Cropping2D";xt($I);class LI extends mn{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Nr(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,yU(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const n=t[2]==null?null:this.size[0]*t[2],o=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],n,o]}else{const n=t[1]==null?null:this.size[0]*t[1],o=t[2]==null?null:this.size[1]*t[2];return[t[0],n,o,t[3]]}}call(t,n){return Xe(()=>{let o=Zt(t);const a=o.shape;if(this.dataFormat==="channelsFirst"){o=kn(o,[0,2,3,1]);const i=this.size[0]*a[2],p=this.size[1]*a[3],r=this.interpolation==="nearest"?ei.resizeNearestNeighbor(o,[i,p]):ei.resizeBilinear(o,[i,p]);return kn(r,[0,3,1,2])}else{const i=this.size[0]*a[1],p=this.size[1]*a[2];return this.interpolation==="nearest"?ei.resizeNearestNeighbor(o,[i,p]):ei.resizeBilinear(o,[i,p])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(t,n),t}}LI.className="UpSampling2D";xt(LI);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function W6(s,t,n=[1,1],o="valid",a,i){return Xe(()=>{a==null&&(a=sa()),Nr(a);let p=xw(s,a);if(s.rank!==4)throw new Ne(`Input for depthwiseConv2d is required to be 4-D, but is instead ${s.rank}-D`);if(t.rank!==4)throw new Ne(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return p=ix(p,t,n,o==="same"?"same":"valid","NHWC",i),a==="channelsFirst"&&(p=kn(p,[0,3,1,2])),p})}class FI extends ky{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=hr(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Hr(t.depthwiseConstraint),this.depthwiseRegularizer=fr(t.depthwiseRegularizer)}build(t){if(t=In(t),t.length<4)throw new Ne(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(t[n]==null||t[n]<0)throw new Ne(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[n]}).`);const o=t[n],a=[this.kernelSize[0],this.kernelSize[1],o,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[o*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Xe(()=>{t=Zt(t);let o=W6(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(o=aa(o,this.bias.read(),this.dataFormat)),this.activation!=null&&(o=this.activation.apply(o)),o})}computeOutputShape(t){t=In(t);const n=this.dataFormat==="channelsFirst"?t[2]:t[1],o=this.dataFormat==="channelsFirst"?t[3]:t[2],a=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,i=na(n,this.kernelSize[0],this.padding,this.strides[0]),p=na(o,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],a,i,p]:[t[0],i,p,a]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=yr(this.depthwiseInitializer),t.depthwiseRegularizer=er(this.depthwiseRegularizer),t.depthwiseConstraint=Wr(this.depthwiseRegularizer),t}}FI.className="DepthwiseConv2D";xt(FI);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PI(s,t,n,o){if(Array.isArray(s)){if(t!=null||n!=null)throw new Ne("When inputs is an array, neither initialState or constants should be provided");o!=null&&(n=s.slice(s.length-o,s.length),s=s.slice(0,s.length-o)),s.length>1&&(t=s.slice(1,s.length)),s=s[0]}function a(i){return i==null||Array.isArray(i)?i:[i]}return t=a(t),n=a(n),{inputs:s,initialState:t,constants:n}}function BI(s,t,n,o=!1,a,i,p=!1,r=!1){return Xe(()=>{const h=t.shape.length;if(h<3)throw new Ne(`Input should be at least 3D, but is ${h}D.`);const f=[1,0].concat(ra(2,h));t=kn(t,f),p&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),a!=null&&(a=Ot(Ot(a,"bool"),"float32"),a.rank===h-1&&(a=Ls(a,-1)),a=kn(a,f)),o&&(t=Ql(t,0),a!=null&&(a=Ql(a,0)));const u=[];let l,d=n;const x=t.shape[0],S=Jl(t);let m;a!=null&&(m=Jl(a));for(let b=0;b<x;++b){const g=S[b],w=Xe(()=>s(g,d));if(a==null)l=w[0],d=w[1];else{const _=Xe(()=>{const C=m[b],k=Yt(Oo(C),C),E=St($e(w[0],C),$e(d[0],k)),j=d.map((A,O)=>St($e(w[1][O],C),$e(A,k)));return{output:E,newStates:j}});l=_.output,d=_.newStates}r&&u.push(l)}let y;return r&&(y=ri(u,1)),[l,y,d]})}class ll extends mn{constructor(t){super(t);let n;if(t.cell==null)throw new Ne("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new _w({cells:t.cell}):n=t.cell,n.stateSize==null)throw new Ne("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new Gr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ra(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){Pv(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const o=n[0];let a;if(this.returnSequences?a=[t[0],t[1],o]:a=[t[0],o],this.returnState){const i=[];for(const p of n)i.push([t[0],p]);return[a].concat(i)}else return a}computeMask(t,n){return Xe(()=>{Array.isArray(n)&&(n=n[0]);const o=this.returnSequences?n:null;if(this.returnState){const a=this.states.map(i=>null);return[o].concat(a)}else return o})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let o=0;o<t;++o)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new un("Constants support is not implemented in RNN yet.");Pv(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,o=t.slice(2);this.inputSpec[0]=new Gr({shape:[n,null,...o]});const a=[t[0]].concat(t.slice(2));this.cell.build(a);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!$n(this.stateSpec.map(p=>p.shape[p.shape.length-1]),i))throw new Ne(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(p=>new Gr({shape:[null,p]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){Xe(()=>{if(!this.stateful)throw new va("Cannot call resetStates() on an RNN Layer that is not stateful.");const o=this.inputSpec[0].shape[0];if(o==null)throw new Ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>ns([o,a])):this.states_=[ns([o,this.cell.stateSize])];else if(t==null)cn(this.states_),this.keptStates!=null&&(cn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(a=>ns([o,a])):this.states_[0]=ns([o,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new Ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):cn(this.states_);for(let a=0;a<this.states_.length;++a){const i=t[a],p=Array.isArray(this.cell.stateSize)?this.cell.stateSize[a]:this.cell.stateSize,r=[o,p];if(!$n(i.shape,r))throw new Ne(`State ${a} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${i.shape}`);this.states_[a]=i}}this.states_=this.states_.map(a=>Ca(a.clone()))})}apply(t,n){let o=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const i=PI(t,o,a,this.numConstants);t=i.inputs,o=i.initialState,a=i.constants;let p=[],r=[];if(o!=null){n.initialState=o,p=p.concat(o),this.stateSpec=[];for(const f of o)this.stateSpec.push(new Gr({shape:f.shape}));r=r.concat(this.stateSpec)}if(a!=null&&(n.constants=a,p=p.concat(a),this.numConstants=a.length),p[0]instanceof Na){const f=[t].concat(p),u=this.inputSpec.concat(r),l=this.inputSpec;this.inputSpec=u;const d=super.apply(f,n);return this.inputSpec=l,d}else return super.apply(t,n)}call(t,n){return Xe(()=>{const o=n==null?null:n.mask,a=n==null?null:n.training;let i=n==null?null:n.initialState;t=Zt(t),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(t));const p=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==p)throw new Ne(`RNN Layer has ${p} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const r={training:a},f=BI((S,m)=>{const y=this.cell.call([S].concat(m),r);return[y[0],y.slice(1)]},t,i,this.goBackwards,o,null,this.unroll,this.returnSequences),u=f[0],l=f[1],d=f[2];this.stateful&&this.resetStates(d,a);const x=this.returnSequences?l:u;return this.returnState?[x].concat(d):x})}getInitialState(t){return Xe(()=>{let n=ns(t.shape);return n=Wt(n,[1,2]),n=vf(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(o=>o>1?Lv(n,[1,o]):n):this.cell.stateSize>1?[Lv(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const o=this.cell.getConfig();return this.getClassName()===ll.className&&(n.cell={className:this.cell.getClassName(),config:o}),Object.assign(Object.assign(Object.assign({},o),t),n)}static fromConfig(t,n,o={}){const a=n.cell,i=ja(a,o);return new t(Object.assign(n,{cell:i}))}}ll.className="RNN";xt(ll);class Ey extends mn{}class ww extends Ey{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,rs(this.units,"units"),this.activation=Ki(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hr(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hr(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hr(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fr(t.kernelRegularizer),this.recurrentRegularizer=fr(t.recurrentRegularizer),this.biasRegularizer=fr(t.biasRegularizer),this.kernelConstraint=Hr(t.kernelConstraint),this.recurrentConstraint=Hr(t.recurrentConstraint),this.biasConstraint=Hr(t.biasConstraint),this.dropout=yc([1,Xi([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=yc([1,Xi([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=In(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Xe(()=>{if(t=t,t.length!==2)throw new Ne(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let o=t[1];t=t[0];const a=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Zi({ones:()=>Oo(t),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Zi({ones:()=>Oo(o),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));let i;const p=this.dropoutMask,r=this.recurrentDropoutMask;p!=null?i=Ea($e(t,p),this.kernel.read()):i=Ea(t,this.kernel.read()),this.bias!=null&&(i=aa(i,this.bias.read())),r!=null&&(o=$e(o,r));let h=St(i,Ea(o,this.recurrentKernel.read()));return this.activation!=null&&(h=this.activation.apply(h)),[h,h]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Yi(this.activation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:er(this.kernelRegularizer),recurrentRegularizer:er(this.recurrentRegularizer),biasRegularizer:er(this.biasRegularizer),activityRegularizer:er(this.activityRegularizer),kernelConstraint:Wr(this.kernelConstraint),recurrentConstraint:Wr(this.recurrentConstraint),biasConstraint:Wr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},t),n)}}ww.className="SimpleRNNCell";xt(ww);class UI extends ll{constructor(t){t.cell=new ww(t),super(t)}call(t,n){return Xe(()=>{this.cell.dropoutMask!=null&&(cn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(cn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const o=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(t,{mask:o,training:a,initialState:i})})}static fromConfig(t,n){return new t(n)}}UI.className="SimpleRNN";xt(UI);class Sw extends Ey{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new Ne("GRUCell does not support reset_after parameter set to true.");this.units=t.units,rs(this.units,"units"),this.activation=Ki(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ki(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hr(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hr(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hr(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fr(t.kernelRegularizer),this.recurrentRegularizer=fr(t.recurrentRegularizer),this.biasRegularizer=fr(t.biasRegularizer),this.kernelConstraint=Hr(t.kernelConstraint),this.recurrentConstraint=Hr(t.recurrentConstraint),this.biasConstraint=Hr(t.biasConstraint),this.dropout=yc([1,Xi([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=yc([1,Xi([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=In(t);const n=t[t.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Xe(()=>{if(t=t,t.length!==2)throw new Ne(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const o=n.training==null?!1:n.training;let a=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Zi({ones:()=>Oo(t),rate:this.dropout,training:o,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Zi({ones:()=>Oo(a),rate:this.recurrentDropout,training:o,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,p=this.recurrentDropoutMask;let r,h,f;0<this.dropout&&this.dropout<1&&(t=$e(t,i[0]));let u=Ea(t,this.kernel.read());this.useBias&&(u=aa(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=$e(a,p[0]));const l=this.recurrentKernel.read(),[d,x]=ho(l,[2*this.units,this.units],l.rank-1),S=Ea(a,d),[m,y,b]=ho(u,3,u.rank-1),[g,w]=ho(S,2,S.rank-1);r=this.recurrentActivation.apply(St(m,g)),h=this.recurrentActivation.apply(St(y,w));const _=Ea($e(h,a),x);f=this.activation.apply(St(b,_));const C=St($e(r,a),$e(St(1,Ir(r)),f));return[C,C]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Yi(this.activation),recurrentActivation:Yi(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:er(this.kernelRegularizer),recurrentRegularizer:er(this.recurrentRegularizer),biasRegularizer:er(this.biasRegularizer),activityRegularizer:er(this.activityRegularizer),kernelConstraint:Wr(this.kernelConstraint),recurrentConstraint:Wr(this.recurrentConstraint),biasConstraint:Wr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},t),n)}}Sw.className="GRUCell";xt(Sw);class zI extends ll{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new Sw(t),super(t)}call(t,n){return Xe(()=>{this.cell.dropoutMask!=null&&(cn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(cn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const o=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(t,{mask:o,training:a,initialState:i})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}zI.className="GRU";xt(zI);class jy extends Ey{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,rs(this.units,"units"),this.activation=Ki(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Ki(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=hr(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=hr(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=hr(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=fr(t.kernelRegularizer),this.recurrentRegularizer=fr(t.recurrentRegularizer),this.biasRegularizer=fr(t.biasRegularizer),this.kernelConstraint=Hr(t.kernelConstraint),this.recurrentConstraint=Hr(t.recurrentConstraint),this.biasConstraint=Hr(t.biasConstraint),this.dropout=yc([1,Xi([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=yc([1,Xi([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var n;t=In(t);const o=t[t.length-1];this.kernel=this.addWeight("kernel",[o,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let a;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,p=this.units;a=new(n=class extends Lo{apply(h,f){const u=i.apply([p]),l=new lw().apply([p]),d=i.apply([p*2]);return GC(GC(u,l),d)}},n.className="CustomInit",n)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,n){return Xe(()=>{const o=n.training==null?!1:n.training;if(t=t,t.length!==3)throw new Ne(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let a=t[1];const i=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Zi({ones:()=>Oo(t),rate:this.dropout,training:o,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Zi({ones:()=>Oo(a),rate:this.recurrentDropout,training:o,count:4,dropoutFunc:this.dropoutFunc}));const p=this.dropoutMask,r=this.recurrentDropoutMask;let h,f,u,l;0<this.dropout&&this.dropout<1&&(t=$e(t,p[0]));let d=Ea(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=$e(a,r[0])),d=St(d,Ea(a,this.recurrentKernel.read())),this.useBias&&(d=aa(d,this.bias.read()));const[x,S,m,y]=ho(d,4,d.rank-1);h=this.recurrentActivation.apply(x),f=this.recurrentActivation.apply(S),u=St($e(f,i),$e(h,this.activation.apply(m))),l=this.recurrentActivation.apply(y);const b=$e(l,this.activation.apply(u));return[b,b,u]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:Yi(this.activation),recurrentActivation:Yi(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),recurrentInitializer:yr(this.recurrentInitializer),biasInitializer:yr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:er(this.kernelRegularizer),recurrentRegularizer:er(this.recurrentRegularizer),biasRegularizer:er(this.biasRegularizer),activityRegularizer:er(this.activityRegularizer),kernelConstraint:Wr(this.kernelConstraint),recurrentConstraint:Wr(this.recurrentConstraint),biasConstraint:Wr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},t),n)}}jy.className="LSTMCell";xt(jy);class VI extends ll{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new jy(t),super(t)}call(t,n){return Xe(()=>{this.cell.dropoutMask!=null&&(cn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(cn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const o=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(t,{mask:o,training:a,initialState:i})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}VI.className="LSTM";xt(VI);class _w extends Ey{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?t.push(...n.stateSize):t.push(n.stateSize);return t}call(t,n){return Xe(()=>{t=t;let o=t.slice(1);const a=[];for(const r of this.cells.slice().reverse())Array.isArray(r.stateSize)?a.push(o.splice(0,r.stateSize.length)):a.push(o.splice(0,1));a.reverse();const i=[];let p;for(let r=0;r<this.cells.length;++r){const h=this.cells[r];o=a[r],r===0?p=[t[0]].concat(o):p=[p[0]].concat(o),p=h.call(p,n),i.push(p.slice(1))}o=[];for(const r of i.slice().reverse())o.push(...r);return[p[0]].concat(o)})}build(t){Pv(t)&&(t=t[0]),t=t;let n;this.cells.forEach((o,a)=>{Ul(`RNNCell_${a}`,()=>{o.build(t),Array.isArray(o.stateSize)?n=o.stateSize[0]:n=o.stateSize,t=[t[0],n]})}),this.built=!0}getConfig(){const t=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),a={cells:this.cells.map(n)};return Object.assign(Object.assign({},t),a)}static fromConfig(t,n,o={}){const a=[];for(const i of n.cells)a.push(ja(i,o));return new t({cells:a})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const n of this.cells)t.push(...n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.cells)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const o of this.cells)n.push(...o.trainableWeights);return n.concat(t)}return t}getWeights(){const t=[];for(const n of this.cells)t.push(...n.weights);return Bv(t)}setWeights(t){const n=[];for(const o of this.cells){const a=o.weights.length,i=t.splice(a);for(let p=0;p<o.weights.length;++p)n.push([o.weights[p],i[p]])}mw(n)}}_w.className="StackedRNNCells";xt(_w);function Zi(s){const{ones:t,rate:n,training:o=!1,count:a=1,dropoutFunc:i}=s,p=()=>i!=null?i(t(),n):Mj(t(),n),r=()=>wf(p,t,o);return!a||a<=1?Ca(r().clone()):Array(a).fill(void 0).map(r).map(f=>Ca(f.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var H6=function(s,t){var n={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&t.indexOf(o)<0&&(n[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(s);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(s,o[a])&&(n[o[a]]=s[o[a]]);return n};class GI extends ll{constructor(t){if(t.unroll)throw new un("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new un("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new Gr({ndim:5})]}call(t,n){return Xe(()=>{if(this.cell.dropoutMask!=null&&(cn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(cn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Ne("ConvRNN2D cell does not support constants");const o=n==null?null:n.mask,a=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(t,{mask:o,training:a,initialState:i})})}computeOutputShape(t){let n=this.computeSingleOutputShape(t);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([t[0],...n.slice(-3)])]),n}getInitialState(t){return Xe(()=>{const{stateSize:n}=this.cell,o=t.shape,a=this.computeSingleOutputShape(o),i=[a[0],...a.slice(2)],p=ns(i);return Array.isArray(n)?Array(n.length).fill(p):[p]})}resetStates(t,n=!1){Xe(()=>{if(!this.stateful)throw new va("Cannot call resetStates() on an RNN Layer that is not stateful.");const o=this.inputSpec[0].shape,a=this.computeSingleOutputShape(o),i=[a[0],...a.slice(2)];if(o[0]==null)throw new Ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ns(i)):this.states_=[ns(i)];else if(t==null)cn(this.states_),this.keptStates!=null&&(cn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ns(i)):this.states_[0]=ns(i);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new Ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n?this.keptStates.push(this.states_.slice()):cn(this.states_);for(let r=0;r<this.states_.length;++r){const h=t[r],f=i;if(!$n(h.shape,f))throw new Ne(`State ${r} is incompatible with layer ${this.name}: expected shape=${f}, received shape=${h.shape}`);this.states_[r]=h}}this.states_=this.states_.map(r=>Ca(r.clone()))})}computeSingleOutputShape(t){const{dataFormat:n,filters:o,kernelSize:a,padding:i,strides:p,dilationRate:r}=this.cell,h=n==="channelsFirst",f=t[h?3:2],u=t[h?4:3],l=na(f,a[0],i,p[0],r[0]),d=na(u,a[1],i,p[1],r[1]);return[...t.slice(0,2),...h?[o,l,d]:[l,d,o]]}}GI.className="ConvRNN2D";class Cw extends jy{constructor(t){const{filters:n,kernelSize:o,strides:a,padding:i,dataFormat:p,dilationRate:r}=t;super(Object.assign(Object.assign({},t),{units:n})),this.filters=n,rs(this.filters,"filters"),this.kernelSize=dc(o,2,"kernelSize"),this.kernelSize.forEach(h=>rs(h,"kernelSize")),this.strides=dc(a||1,2,"strides"),this.strides.forEach(h=>rs(h,"strides")),this.padding=i||"valid",yo(this.padding),this.dataFormat=p||"channelsLast",Nr(this.dataFormat),this.dilationRate=dc(r||1,2,"dilationRate"),this.dilationRate.forEach(h=>rs(h,"dilationRate"))}build(t){var n;t=In(t);const o=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[o]==null)throw new Ne(`The channel dimension of the input should be defined. Found ${t[o]}`);const a=t[o],i=4,p=this.kernelSize.concat([a,this.filters*i]);this.kernel=this.addWeight("kernel",p,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const r=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",r,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let h;if(this.unitForgetBias){const f=this.biasInitializer,u=this.filters;h=new(n=class extends Lo{apply(d,x){const S=f.apply([u]),m=al([u]),y=f.apply([u*2]);return iw([S,m,y])}},n.className="CustomInit",n)}else h=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,h,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,n){return Xe(()=>{if(t.length!==3)throw new Ne(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const o=n.training||!1,a=t[0],i=t[1],p=t[2],r=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Zi({ones:()=>Oo(a),rate:this.dropout,training:o,count:r,dropoutFunc:this.dropoutFunc}));const h=this.dropoutMask,f=(V,Y,Z)=>!Y||!Y[Z]?V:$e(Y[Z],V);let u=f(a,h,0),l=f(a,h,1),d=f(a,h,2),x=f(a,h,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Zi({ones:()=>Oo(i),rate:this.recurrentDropout,training:o,count:r,dropoutFunc:this.dropoutFunc}));const S=this.recurrentDropoutMask;let m=f(i,S,0),y=f(i,S,1),b=f(i,S,2),g=f(i,S,3);const w=3,[_,C,k,E]=ho(this.kernel.read(),r,w),[j,A,O,N]=this.useBias?ho(this.bias.read(),r):[null,null,null,null];u=this.inputConv(u,_,j,this.padding),l=this.inputConv(l,C,A,this.padding),d=this.inputConv(d,k,O,this.padding),x=this.inputConv(x,E,N,this.padding);const[D,z,$,B]=ho(this.recurrentKernel.read(),r,w);m=this.recurrentConv(m,D),y=this.recurrentConv(y,z),b=this.recurrentConv(b,$),g=this.recurrentConv(g,B);const F=this.recurrentActivation.apply(St(u,m)),G=this.recurrentActivation.apply(St(l,y)),W=St($e(G,p),$e(F,this.activation.apply(St(d,b)))),L=$e(this.recurrentActivation.apply(St(x,g)),this.activation.apply(W));return[L,L,W]})}getConfig(){const t=super.getConfig(),{units:n}=t,o=H6(t,["units"]),a={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},o),a)}inputConv(t,n,o,a){const i=Kl(t,n,this.strides,a||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return o?aa(i,o,this.dataFormat):i}recurrentConv(t,n){return Kl(t,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}Cw.className="ConvLSTM2DCell";xt(Cw);class WI extends GI{constructor(t){const n=new Cw(t);super(Object.assign(Object.assign({},t),{cell:n}))}static fromConfig(t,n){return new t(n)}}WI.className="ConvLSTM2D";xt(WI);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kw extends mn{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const n=t.shape,o=[];for(let a=0;a<this.noiseShape.length;++a)o.push(this.noiseShape[a]==null?n[a]:this.noiseShape[a]);return o}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);const o=Zt(t);if(0<this.rate&&this.rate<1){const a=n.training==null?!1:n.training,i=this.getNoiseShape(o);return wf(()=>Mj(o,this.rate,i,this.seed),()=>o,a)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(t,n),t}dispose(){return super.dispose()}}kw.className="Dropout";xt(kw);class HI extends kw{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const n=t.shape;return[n[0],1,n[2]]}}HI.className="SpatialDropout1D";xt(HI);class qI extends mn{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let n=null;t.batchSize!=null&&(n=t.batchSize),this.batchInputShape=[n,t.inputDim]}this.units=t.units,rs(this.units,"units"),this.activation=Ki(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=hr(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=hr(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Hr(t.kernelConstraint),this.biasConstraint=Hr(t.biasConstraint),this.kernelRegularizer=fr(t.kernelRegularizer),this.biasRegularizer=fr(t.biasRegularizer),this.activityRegularizer=fr(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=In(t);const n=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(t){t=In(t);const n=t.slice();return n[n.length-1]=this.units,n}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);const o=Zt(t),a=Ej(this.activation.getClassName());let i;return a!=null?i=Ea(o,this.kernel.read(),a,this.bias?this.bias.read():null):(i=Ea(o,this.kernel.read()),this.bias!=null&&(i=aa(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const t={units:this.units,activation:Yi(this.activation),useBias:this.useBias,kernelInitializer:yr(this.kernelInitializer),biasInitializer:yr(this.biasInitializer),kernelRegularizer:er(this.kernelRegularizer),biasRegularizer:er(this.biasRegularizer),activityRegularizer:er(this.activityRegularizer),kernelConstraint:Wr(this.kernelConstraint),biasConstraint:Wr(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}qI.className="Dense";xt(qI);class XI extends mn{constructor(t){t=t||{},super(t),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=In(t);for(const n of t.slice(1))if(n==null)throw new Ne(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],Hi(t,1)]}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);let o=Zt(t);if(this.dataFormat==="channelsFirst"&&o.rank>1){const a=[0];for(let i=2;i<o.rank;++i)a.push(i);a.push(1),o=kn(o,a)}return _U(o)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(t,n),t}}XI.className="Flatten";xt(XI);class YI extends mn{constructor(t){super(t),this.supportsMasking=!0,this.activation=Ki(t.activation)}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);const o=Zt(t);return this.activation.apply(o)})}getConfig(){const t={activation:Yi(this.activation)},n=super.getConfig();return Object.assign(t,n),t}}YI.className="Activation";xt(YI);class KI extends mn{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,n){return Xe(()=>(t=Zt(t),wU(t,this.n)))}getConfig(){const t={n:this.n},n=super.getConfig();return Object.assign(t,n),t}}KI.className="RepeatVector";xt(KI);class ZI extends mn{constructor(t){super(t),this.targetShape=t.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,n){const o="Total size of new array must be unchanged.",a=n.slice();let i=1,p=null;for(let h=0;h<a.length;++h){const f=a[h];if(this.isUnknown(f))if(p===null)p=h;else throw new Ne("Can only specifiy one unknown dimension.");else i*=f}const r=Hi(t);if(p!==null){if(i===0||r%i!==0)throw new Ne(o);a[p]=r/i}else if(r!==i)throw new Ne(o);return a}computeOutputShape(t){let n=!1;for(let o=0;o<t.length;++o)if(this.isUnknown(t[o])){n=!0;break}return n?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);const o=Zt(t),a=o.shape,i=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return Pe(o,i)})}getConfig(){const t={targetShape:this.targetShape},n=super.getConfig();return Object.assign(t,n),t}}ZI.className="Reshape";xt(ZI);class QI extends mn{constructor(t){if(super(t),t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const n=ra(1,t.dims.length+1);if(!$n(t.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Gr({ndim:this.dims.length+1})]}computeOutputShape(t){t=In(t);const n=t.slice();return this.dims.forEach((o,a)=>{n[a+1]=t[o]}),n}call(t,n){return kn(Zt(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},n=super.getConfig();return Object.assign(t,n),t}}QI.className="Permute";xt(QI);class JI extends mn{constructor(t){super(t??{}),this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,t),n}computeMask(t,n){const o=Zt(t);return Av($m(o,this.maskValue),-1)}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);const o=Zt(t),p=Av($m(o,this.maskValue),-1,!0);return $e(o,Ot(p,o.dtype))})}}JI.className="Masking";xt(JI);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class eA extends mn{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let n=null;t.batchSize!=null&&(n=t.batchSize),t.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Bn(t.inputLength))}this.inputDim=t.inputDim,rs(this.inputDim,"inputDim"),this.outputDim=t.outputDim,rs(this.outputDim,"outputDim"),this.embeddingsInitializer=hr(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=fr(t.embeddingsRegularizer),this.activityRegularizer=fr(t.activityRegularizer),this.embeddingsConstraint=Hr(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,n){return Xe(()=>this.maskZero?(t=Zt(t),$m(t,Tn(t))):null)}computeOutputShape(t){if(t=In(t),this.inputLength==null)return[...t,this.outputDim];const n=Bn(this.inputLength);if(n.length!==t.length-1)throw new Ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let o=0;for(let a=0;a<n.length;++a){const i=n[a],p=t[a+1];if(i!=null&&p!=null&&i!==p)throw new Ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);i==null&&(n[o]=p),o++}}return[t[0],...n,this.outputDim]}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);let o=Zt(t);o.dtype!=="int32"&&(o=Ta(o,"int32"));const a=Dj(this.embeddings.read(),Pe(o,[o.size]));return Pe(a,In(this.computeOutputShape(o.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:yr(this.embeddingsInitializer),embeddingsRegularizer:er(this.embeddingsRegularizer),activityRegularizer:er(this.activityRegularizer),embeddingsConstraint:Wr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(t,n),t}}eA.className="Embedding";xt(eA);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class du extends mn{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new un}computeElementwiseOpOutputShape(t,n){if(t==null||n==null)return null;if(t.length<n.length)return this.computeElementwiseOpOutputShape(n,t);if(n.length===0)return t;const o=t.slice(0,t.length-n.length);for(let a=0;a<n.length;++a){const i=t[t.length-n.length+a],p=n[a];if(i==null||p==null||i<0||p<0)o.push(null);else if(i===1)o.push(p);else if(p===1)o.push(i);else{if(i!==p)throw new Ne("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(n));o.push(i)}}return o}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[In(t)]),t=t,t.length<2)throw new Ne(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let n=[];for(const i of t)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Wi(n),n.length>1)throw new Ne(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let o=t[0]==null?null:t[0].slice(1);for(let i=1;i<t.length;++i){const p=t[i]==null?null:t[i].slice(1);o=this.computeElementwiseOpOutputShape(o,p)}const a=t.map(i=>i.length);t.indexOf(null)===-1&&Wi(a).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,n){return Xe(()=>{if(t=t,this.reshapeRequired){const o=[],a=t.map(i=>i.rank);if(a.indexOf(null)===-1){const i=Xi(a);for(let p of t){const r=p.rank;for(let h=0;h<i-r;++h)p=vf(p,1);o.push(p)}return this.mergeFunction(o)}else{let i=!1;for(const h of t){const f=h.rank;if(f==null){const u=h.shape,l=u[0],d=u.slice(1).concat([l]);let x=Pe(h,[l].concat(Hi(u.slice(1))));x=kn(x,[1,0]),x=Pe(x,d),o.push(x),i=!0}else if(f>1){const u=ra(1,f).concat([0]);o.push(kn(h,u)),i=!0}else o.push(h)}let p=this.mergeFunction(o);const r=p.rank;if(i){if(r==null){const h=p.shape,f=h.length,u=h[f-1],l=[u].concat(h.slice(0,h.length-1));p=Pe(kn(Pe(p,[-1,u]),[1,0]),l)}else if(r>1){const h=[r-1].concat(ra(0,r-1));p=kn(p,h)}}return p}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let n;t[0]==null?n=null:n=t[0].slice(1);for(let a=1;a<t.length;++a){const i=t[a]==null?null:t[a].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let o=[];for(const a of t)a!=null&&a[0]!==null&&o.push(a[0]);return o=Wi(o),o.length===1?n=o.concat(n):n=[null].concat(n),n}computeMask(t,n){return Xe(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Ne("`mask` should be an Array");if(!Array.isArray(t))throw new Ne("`inputs` should be an Array");if(n.length!==t.length)throw new Ne(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${n.length})`);if(n.every(a=>a==null))return null;n=n.map(a=>a==null?a:Ls(a,0));let o=n[0];for(let a=1;a<n.length-1;++a)o=ni(o,n[a]);return o})}}class tA extends du{constructor(t){super(t)}mergeFunction(t){return Xe(()=>{let n=t[0].clone();for(let o=1;o<t.length;++o)n=St(n,t[o]);return n})}}tA.className="Add";xt(tA);class nA extends du{constructor(t){super(t)}mergeFunction(t){return Xe(()=>{let n=t[0].clone();for(let o=1;o<t.length;++o)n=$e(n,t[o]);return n})}}nA.className="Multiply";xt(nA);class rA extends du{constructor(t){super(t)}mergeFunction(t){return Xe(()=>{let n=t[0].clone();for(let o=1;o<t.length;++o)n=St(n,t[o]);return $e(1/t.length,n)})}}rA.className="Average";xt(rA);class sA extends du{constructor(t){super(t)}mergeFunction(t){return Xe(()=>{let n=t[0];for(let o=1;o<t.length;++o)n=ol(n,t[o]);return n})}}sA.className="Maximum";xt(sA);class oA extends du{constructor(t){super(t)}mergeFunction(t){return Xe(()=>{let n=t[0];for(let o=1;o<t.length;++o)n=Qd(n,t[o]);return n})}}oA.className="Minimum";xt(oA);class aA extends du{constructor(t){super(t),this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new Ne("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let n=!0;for(const a of t)if(a!=null){n=!1;break}if(n)return;const o=[];for(let a=0;a<t.length;++a){const i=t[a].slice();i.splice(this.axis,1);let p=!1;for(const r of o)if($n(r,i)){p=!0;break}p||o.push(i)}if(o.length>1)throw new Ne("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Xe(()=>iw(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new Ne("A `Concatenate` layer should be called on a list of inputs.");const n=t,o=n[0].slice(),a=this.axis<0?o.length+this.axis:this.axis;for(const i of n.slice(1)){if(o[a]==null||i[a]==null){o[a]=null;break}o[a]+=i[a]}return o}computeMask(t,n){if(n==null)return null;if(!Array.isArray(n))throw new Ne("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new Ne("`inputs` should be an array for Concatenate");if(n.length!==t.length)throw new Ne(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${t.length})`);return Xe(()=>{let o=!0;if(n.forEach(p=>{if(p!=null){o=!1;return}}),o)return null;const a=[];for(let p=0;p<t.length;++p)n[p]==null?a.push(Ot(Oo(t[p]),"bool")):n[p].rank<t[p].rank?a.push(Ls(n[p],-1)):a.push(n[p]);const i=Ps(a,this.axis);return oE(i,-1,!1)})}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}aA.className="Concatenate";xt(aA);function Fd(s,t){for(;s<0;)s+=t;return s}function q6(s,t,n){if(s.shape.length>3||t.shape.length>3)throw new un("batchDot is not implemented for tensors of 4D or higher rank yet");if(ye(s.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${s.shape.length}`),ye(s.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),s.dtype==="complex64"||t.dtype==="complex64")throw new un("batchDot is not implemented for complex64-type Tensors yet.");const o=s.shape.length,a=t.shape.length;n==null&&(n=[o-1,a-2]);const i=n;return Xe(()=>{let p;if(o>a){p=o-a;const h=[];for(let f=0;f<p;++f)h.push(1);t=Pe(t,t.shape.concat(h))}else if(a>o){p=a-o;const h=[];for(let f=0;f<p;++f)h.push(1);s=Pe(s,s.shape.concat(h))}else p=0;let r;if(s.shape.length===2&&t.shape.length===2)i[0]===i[1]?r=Wt($e(s,t),i[0]):r=Wt($e(kn(s,[1,0]),t),i[1]);else{const h=i[0]!==s.shape.length-1,f=i[1]===t.shape.length-1;r=Mn(s,t,h,f)}if(p>0){let h;o>a?h=o+a-3:h=o-1;const f=[];for(let u=h;u<h+p;++u)f.push(u);r=ff(r,f)}return r.shape.length===1&&(r=Ls(r,1)),r})}class iA extends du{constructor(t){super(t),this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){ye(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0],o=t[1];if(n.length>3||o.length>3)throw new un("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,o);if(n[a[0]]!==o[a[1]])throw new Ne(`Dimension incompatibility: ${n[a[0]]} !== ${o[a[1]]}`)}mergeFunction(t){if(t.length!==2)throw new Ne(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let n=t[0],o=t[1],a;return Array.isArray(this.axes)?a=this.axes.map((i,p)=>Fd(i,t[p].shape.length)):a=[Fd(this.axes,n.shape.length),Fd(this.axes,o.shape.length)],this.normalize&&(n=Vm(n,a[0]),o=Vm(o,a[1])),q6(n,o,a)}interpretAxes(t,n){let o;return Array.isArray(this.axes)?o=this.axes:o=[Fd(this.axes,t.length),Fd(this.axes,n.length)],o}computeOutputShape(t){ye(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0].slice(),o=t[1].slice();if(n.length>3||o.length>3)throw new un("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(n,o);n.splice(a[0],1),o.splice(a[1],1),o.splice(0,1);const i=n.concat(o);return i.length===1&&i.push(1),i}computeMask(t,n){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(t,n),t}}iA.className="Dot";xt(iA);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lA extends mn{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,t),n}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);const o=Zt(t);return wf(()=>St(wy(o.shape,0,this.stddev),o),()=>o,n.training||!1)})}}lA.className="GaussianNoise";xt(lA);class uA extends mn{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Xe(()=>{this.invokeCallHook(t,n);const o=Zt(t);return this.rate>0&&this.rate<1?wf(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return $e(o,wy(o.shape,1,i))},()=>o,n.training||!1):o})}}uA.className="GaussianDropout";xt(uA);class cA extends mn{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||Zt(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Xe(()=>{if(this.rate<1&&this.rate>0){const o=this._getNoiseShape(t);return wf(()=>{const i=Zt(t),r=-1.6732632423543772*1.0507009873554805;let h=iu(hf(o),this.rate);h=Ta(h,"float32");const f=((1-this.rate)*(1+this.rate*r**2))**-.5,u=-f*r*this.rate,l=St($e(i,h),$e(St(h,-1),r));return St($e(l,f),u)},()=>Zt(t),n.training||!1)}return t})}}cA.className="AlphaDropout";xt(cA);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rh(s,t,n,o,a,i=.001){let p;if(s.rank===2)p=f$(s,t,n,o,a,i);else if(s.rank===3)p=m$(s,t,n,o,a,i);else if(s.rank===4)p=y$(s,t,n,o,a,i);else throw new un(`batchNormalization is not implemented for array of rank ${s.rank} yet`);return p}function X6(s,t,n,o,a=.001){return Xe(()=>{const i=px(s,o),p=i.mean,r=i.variance;return[rh(s,p,r,n,t,a),p,r]})}function Y6(s,t,n,o,a=.001){return Xe(()=>{const i=px(s,o),p=i.mean,r=i.variance,h=[];for(const S of ra(0,s.rank))o.indexOf(S)!==-1?h.push(1):h.push(s.shape[S]);const f=Pe(p,h),u=Pe(r,h),l=t==null?null:Pe(t,h),d=n==null?null:Pe(n,h);return[rh(s,f,u,d,l,a),p,r]})}function K6(s,t,n,o,a=.001){return $n(o.slice().sort(),ra(0,s.rank-1))?X6(s,t,n,o,a):Y6(s,t,n,o,a)}class dA extends mn{constructor(t){t==null&&(t={}),super(t),this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=hr(t.betaInitializer||"zeros"),this.gammaInitializer=hr(t.gammaInitializer||"ones"),this.movingMeanInitializer=hr(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=hr(t.movingVarianceInitializer||"ones"),this.betaConstraint=Hr(t.betaConstraint),this.gammaConstraint=Hr(t.gammaConstraint),this.betaRegularizer=fr(t.betaRegularizer),this.gammaRegularizer=fr(t.gammaRegularizer)}build(t){t=In(t);const n=this.axis>=0?this.axis:this.axis+t.length,o=t[n];if(o==null)throw new Ne(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new Gr({ndim:t.length,axes:{[n]:o}})];const a=[o];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,n){return Xe(()=>{const o=n.training==null?!1:n.training,a=Zt(t),i=a.shape,p=i.length,r=ra(0,p),h=this.axis>=0?this.axis:this.axis+p;r.splice(h,1);const f=eu(1,p);f[h]=i[h];const u=r.slice();u.sort();const l=!$n(u,ra(0,p).slice(0,p-1)),d=()=>{if(l){const g=Pe(this.movingMean.read(),f),w=Pe(this.movingVariance.read(),f),_=this.center?Pe(this.beta.read(),f):null,C=this.scale?Pe(this.gamma.read(),f):null;return rh(a,g,w,_,C,this.epsilon)}else return rh(a,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!o)return d();const[x,S,m]=K6(a,this.gamma.read(),this.beta.read(),r,this.epsilon),y=(g,w,_)=>{Xe(()=>{const C=1-_,k=g.read(),E=$e(Yt(k,w),C);g.write(Yt(k,E))})};return(()=>{y(this.movingMean,S,this.momentum),y(this.movingVariance,m,this.momentum)})(),x})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yr(this.betaInitializer),gammaInitializer:yr(this.gammaInitializer),movingMeanInitializer:yr(this.movingMeanInitializer),movingVarianceInitializer:yr(this.movingVarianceInitializer),betaRegularizer:er(this.betaRegularizer),gammaRegularizer:er(this.gammaRegularizer),betaConstraint:Wr(this.betaConstraint),gammaConstraint:Wr(this.gammaConstraint)},n=super.getConfig();return Object.assign(t,n),t}}dA.className="BatchNormalization";xt(dA);class hA extends mn{constructor(t){if(t==null&&(t={}),super(t),this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=hr(t.betaInitializer||"zeros"),this.gammaInitializer=hr(t.gammaInitializer||"ones"),this.betaRegularizer=fr(t.betaRegularizer),this.gammaRegularizer=fr(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=In(t);const n=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Wi(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const o=this.axis.map(i=>t[i]),a=!0;this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,a):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,a):this.beta=null,this.built=!0}call(t,n){const o=Zt(t),a=o.shape,i=a.length;return Xe(()=>{let{mean:r,variance:h}=px(o,this.axis,!0);const f=eu(1,i);for(const m of this.axis)f[m]=a[m];const u=m=>m!=null&&m.shape.length!==i?Pe(m,f):m;let l=this.scale?u(this.gamma.read()):null,d=this.center?u(this.beta.read()):null;const x=[],S=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(x.push(a[m]),S.push(1)):(x.push(1),S.push(a[m]));return r=Jo(r,x),h=Jo(h,x),l!=null&&(l=Jo(l,S)),d!=null&&(d=Jo(d,S)),rh(o,r,h,d,l,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yr(this.betaInitializer),gammaInitializer:yr(this.gammaInitializer),betaRegularizer:er(this.betaRegularizer),gammaRegularizer:er(this.gammaRegularizer)},n=super.getConfig();return Object.assign(t,n),t}}hA.className="LayerNormalization";xt(hA);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z6(s,t,n){return Xe(()=>{if(s.rank!==4)throw new Ne(`temporalPadding expects input tensor to be 4-D, but received a ${s.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new Ne("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=sa()),n!=="channelsLast"&&n!=="channelsFirst")throw new Ne(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let o;return n==="channelsFirst"?o=[[0,0],[0,0],t[0],t[1]]:o=[[0,0],t[0],t[1],[0,0]],mx(s,o)})}class fA extends mn{constructor(t){if(t==null&&(t={}),super(t),this.dataFormat=t.dataFormat==null?sa():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new Ne(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let n,o;if(typeof t.padding[0]=="number")n=[t.padding[0],t.padding[0]],o=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new Ne(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(n=t.padding[0],t.padding[1].length!==2)throw new Ne(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);o=t.padding[1]}this.padding=[n,o]}this.inputSpec=[new Gr({ndim:4})]}computeOutputShape(t){t=In(t);let n,o;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?n=t[2]+this.padding[0][0]+this.padding[0][1]:n=null,t[3]!=null&&t[3]>=0?o=t[3]+this.padding[1][0]+this.padding[1][1]:o=null,[t[0],t[1],n,o]):(t[1]!=null&&t[1]>=0?n=t[1]+this.padding[0][0]+this.padding[0][1]:n=null,t[2]!=null&&t[2]>=0?o=t[2]+this.padding[1][0]+this.padding[1][1]:o=null,[t[0],n,o,t[3]])}call(t,n){return Xe(()=>Z6(Zt(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}fA.className="ZeroPadding2D";xt(fA);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Iy(s,t,n,o,a,i){return Xe(()=>{Nr(a),Ij(i),yo(o),n==null&&(n=[1,1]),o==null&&(o="valid"),a==null&&(a=sa()),i==null&&(i="max"),s=xw(s,a);let p;const r=o==="same"?"same":"valid";return i==="max"?p=fx(s,t,n,r):p=rx(s,t,n,r),a==="channelsFirst"&&(p=kn(p,[0,3,1,2])),p})}function pA(s,t,n,o,a,i){return Xe(()=>{Nr(a),Ij(i),yo(o),n==null&&(n=[1,1,1]),o==null&&(o="valid"),a==null&&(a=sa()),i==null&&(i="max"),s=RI(s,a);let p;const r=o==="same"?"same":"valid";return i==="max"?p=tL(s,t,n,r):p=r$(s,t,n,r),a==="channelsFirst"&&(p=kn(p,[0,4,1,2,3])),p})}class mA extends mn{constructor(t){if(t.poolSize==null&&(t.poolSize=2),super(t),typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new Ne(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(rs(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new Ne(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);rs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,yo(this.padding),this.inputSpec=[new Gr({ndim:3})]}computeOutputShape(t){t=In(t);const n=na(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],n,t[2]]}call(t,n){return Xe(()=>{this.invokeCallHook(t,n),t=vf(Zt(t),2);const o=this.poolingFunction(Zt(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return ff(o,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(t,n),t}}class gA extends mA{constructor(t){super(t)}poolingFunction(t,n,o,a,i){return Nr(i),yo(a),Iy(t,n,o,a,i,"max")}}gA.className="MaxPooling1D";xt(gA);class yA extends mA{constructor(t){super(t)}poolingFunction(t,n,o,a,i){return Nr(i),yo(a),Iy(t,n,o,a,i,"avg")}}yA.className="AveragePooling1D";xt(yA);class bA extends mn{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new Ne(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];rs(this.poolSize,"poolSize"),rs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Nr(this.dataFormat),yo(this.padding),this.inputSpec=[new Gr({ndim:4})]}computeOutputShape(t){t=In(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],o=this.dataFormat==="channelsFirst"?t[3]:t[2];return n=na(n,this.poolSize[0],this.padding,this.strides[0]),o=na(o,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,o]:[t[0],n,o,t[3]]}call(t,n){return Xe(()=>(this.invokeCallHook(t,n),this.poolingFunction(Zt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class vA extends bA{constructor(t){super(t)}poolingFunction(t,n,o,a,i){return Nr(i),yo(a),Iy(t,n,o,a,i,"max")}}vA.className="MaxPooling2D";xt(vA);class xA extends bA{constructor(t){super(t)}poolingFunction(t,n,o,a,i){return Nr(i),yo(a),Iy(t,n,o,a,i,"avg")}}xA.className="AveragePooling2D";xt(xA);class wA extends mn{constructor(t){if(t.poolSize==null&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new Ne(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];rs(this.poolSize,"poolSize"),rs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Nr(this.dataFormat),yo(this.padding),this.inputSpec=[new Gr({ndim:5})]}computeOutputShape(t){t=In(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],o=this.dataFormat==="channelsFirst"?t[3]:t[2],a=this.dataFormat==="channelsFirst"?t[4]:t[3];return n=na(n,this.poolSize[0],this.padding,this.strides[0]),o=na(o,this.poolSize[1],this.padding,this.strides[1]),a=na(a,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,o,a]:[t[0],n,o,a,t[4]]}call(t,n){return Xe(()=>(this.invokeCallHook(t,n),this.poolingFunction(Zt(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class SA extends wA{constructor(t){super(t)}poolingFunction(t,n,o,a,i){return Nr(i),yo(a),pA(t,n,o,a,i,"max")}}SA.className="MaxPooling3D";xt(SA);class _A extends wA{constructor(t){super(t)}poolingFunction(t,n,o,a,i){return Nr(i),yo(a),pA(t,n,o,a,i,"avg")}}_A.className="AveragePooling3D";xt(_A);class CA extends mn{constructor(t){super(t),this.inputSpec=[new Gr({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,n){throw new un}}class kA extends CA{constructor(t){super(t||{})}call(t,n){return Xe(()=>{const o=Zt(t);return Lr(o,1)})}}kA.className="GlobalAveragePooling1D";xt(kA);class TA extends CA{constructor(t){super(t||{})}call(t,n){return Xe(()=>{const o=Zt(t);return ta(o,1)})}}TA.className="GlobalMaxPooling1D";xt(TA);class EA extends mn{constructor(t){super(t),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,Nr(this.dataFormat),this.inputSpec=[new Gr({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,n){throw new un}getConfig(){const t={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class jA extends EA{call(t,n){return Xe(()=>{const o=Zt(t);return this.dataFormat==="channelsLast"?Lr(o,[1,2]):Lr(o,[2,3])})}}jA.className="GlobalAveragePooling2D";xt(jA);class IA extends EA{call(t,n){return Xe(()=>{const o=Zt(t);return this.dataFormat==="channelsLast"?ta(o,[1,2]):ta(o,[2,3])})}}IA.className="GlobalMaxPooling2D";xt(IA);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AA extends mn{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(t,n),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,n,o={}){const a=n.layer,i=ja(a,o);delete n.layer;const p={layer:i};return Object.assign(p,n),new t(p)}}class RA extends AA{constructor(t){super(t),this.supportsMasking=!0}build(t){if(t=In(t),t.length<3)throw new Ne(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=In(t);const n=[t[0]].concat(t.slice(2)),o=this.layer.computeOutputShape(n),a=t[1];return[o[0],a].concat(o.slice(1))}call(t,n){return Xe(()=>(t=Zt(t),BI((p,r)=>[Zt(this.layer.call(p,n)),[]],t,[],!1,null,null,!1,!0)[1]))}}RA.className="TimeDistributed";xt(RA);function Q6(s){cu(gU,"BidirectionalMergeMode",s)}const J6="concat";class NA extends AA{constructor(t){super(t);const n=t.layer.getConfig(),o={};o.className=t.layer.getClassName(),o.config=n,this.forwardLayer=ja(o),n.goBackwards=n.goBackwards!==!0;const a={};if(a.className=t.layer.getClassName(),a.config=n,this.backwardLayer=ja(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?J6:t.mergeMode,Q6(this.mergeMode),t.weights)throw new un("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const n=t.length,o=Math.floor(n/2);this.forwardLayer.setWeights(t.slice(0,o)),this.backwardLayer.setWeights(t.slice(o))}computeOutputShape(t){let n=this.forwardLayer.computeOutputShape(t);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let o,a,i;return this.returnState&&(i=n.slice(1)),o=n[0],o=o,this.mergeMode==="concat"?(o[o.length-1]*=2,a=[o]):this.mergeMode==null?a=[o,o.slice()]:a=[o],this.returnState?this.mergeMode==null?a.concat(i).concat(i.slice()):[o].concat(i).concat(i.slice()):Fs(a)}apply(t,n){let o=n==null?null:n.initialState,a=n==null?null:n.constants;n==null&&(n={});const i=PI(t,o,a,this.numConstants);if(t=i.inputs,o=i.initialState,a=i.constants,Array.isArray(t)&&(o=t.slice(1),t=t[0]),(o==null||o.length===0)&&a==null)return super.apply(t,n);const p=[],r=[];if(o!=null){const f=o.length;if(f%2>0)throw new Ne("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=o,p.push(...o);const u=o.map(l=>new Gr({shape:l.shape}));this.forwardLayer.stateSpec=u.slice(0,f/2),this.backwardLayer.stateSpec=u.slice(f/2),r.push(...u)}if(a!=null)throw new un("Support for constants in Bidirectional layers is not implemented yet.");const h=p[0]instanceof Na;for(const f of p)if(f instanceof Na!==h)throw new Ne("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(h){const f=[t].concat(p),u=this.inputSpec.concat(r),l=this.inputSpec;this.inputSpec=u;const d=super.apply(f,n);return this.inputSpec=l,d}else return super.apply(t,n)}call(t,n){return Xe(()=>{const o=n.initialState;let a,i;if(o==null)a=this.forwardLayer.call(t,n),i=this.backwardLayer.call(t,n);else{const h=o.slice(0,o.length/2),f=o.slice(o.length/2);a=this.forwardLayer.call(t,Object.assign(n,{initialState:h})),i=this.backwardLayer.call(t,Object.assign(n,{initialState:f}))}let p;this.returnState&&(Array.isArray(a)&&(p=a.slice(1).concat(i.slice(1))),a=a[0],i=i[0]),this.returnSequences&&(i=Ql(i,1));let r;return this.mergeMode==="concat"?r=iw([a,i]):this.mergeMode==="sum"?r=St(a,i):this.mergeMode==="ave"?r=$e(.5,St(a,i)):this.mergeMode==="mul"?r=$e(a,i):this.mergeMode==null&&(r=[a,i]),this.returnState?this.mergeMode==null?r.concat(p):[r].concat(p):r})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Ul(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Ul(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,n){Array.isArray(n)&&(n=n[0]);let o;if(this.returnSequences?this.mergeMode==null?o=[n,n]:o=n:this.mergeMode==null?o=[null,null]:o=null,this.returnState){const i=this.forwardLayer.states.map(p=>null);return Array.isArray(o)?o.concat(i).concat(i):[o].concat(i).concat(i)}else return o}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,n){const o=ja(n.layer);if(delete n.layer,n.numConstants!=null)throw new un("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=n;return a.layer=o,new t(a)}}NA.className="Bidirectional";xt(NA);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class DA extends mn{constructor(t){super(t),this.scale=t.scale,t.offset?this.offset=t.offset:this.offset=0}getConfig(){const t={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(t,n),t}call(t,n){return Xe(()=>(t=Zt(t),t.dtype!=="float32"&&(t=Ta(t,"float32")),St($e(t,this.scale),this.offset)))}}DA.className="Rescaling";xt(DA);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:ez,cropAndResize:tz}=ei;class MA extends mn{constructor(t){super(t),this.height=t.height,this.width=t.width}centerCrop(t,n,o,a,i,p,r,h){return Xe(()=>{let f,u=!1;const l=n/p,d=o/r,x=(a+n)/p,S=(i+o)/r,m=[l,d,x,S],y=[];t.rank===3?(u=!0,f=ri([t])):f=t;for(let C=0;C<f.shape[0];C++)y.push(m);const b=Hd(y,[y.length,4]),g=Jd(0,y.length,1,"int32"),_=tz(f,b,g,[a,i],"nearest");return Ta(u?Zt(Jl(_)):_,h)})}upsize(t,n,o,a){return Xe(()=>{const i=ez(t,[n,o]);return Ta(i,a)})}call(t,n){return Xe(()=>{const o=Zt(t),a=o.dtype,i=o.shape,p=i[i.length-3],r=i[i.length-2];let h=0;p!==this.height&&(h=Math.floor((p-this.height)/2));let f=0;return r!==this.width&&(f=Math.floor((r-this.width)/2),f===0&&(f=1)),h>=0&&f>=0?this.centerCrop(o,h,f,this.height,this.width,p,r,a):this.upsize(t,this.height,this.width,a)})}getConfig(){const t={height:this.height,width:this.width},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){t=In(t);const n=t.length-3,o=t.length-2;return t[n]=this.height,t[o]=this.width,t}}MA.className="CenterCrop";xt(MA);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nz(s,t,n,o){let a=Zt(s);if(a.dtype!=="int32"&&(a=Ta(a,"int32")),t==="int")return a;const i=a.shape;if(a.rank===0&&(a=Ls(a,-1)),t==="oneHot"&&a.shape[a.shape.length-1]!==1&&(a=Ls(a,-1)),a.rank>2)throw new Ne(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${i} which would result in output rank ${a.rank}.`);const p=["multiHot","oneHot"].includes(t),r=a;let h;if(typeof o<"u"&&t==="count"?h=vC(r,o,n,p):h=vC(r,[],n,p),t!=="tfIdf")return h;if(o)return $e(h,o);throw new Ne("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OA extends mn{constructor(t){super(t),this.numTokens=t.numTokens,t.outputMode?this.outputMode=t.outputMode:this.outputMode="multiHot"}getConfig(){const t={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){return t=In(t),t==null?[this.numTokens]:this.outputMode==="oneHot"&&t[t.length-1]!==1?(t.push(this.numTokens),t):(t[t.length-1]=this.numTokens,t)}call(t,n){return Xe(()=>{t=Zt(t),t.dtype!=="int32"&&(t=Ta(t,"int32"));let o;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Ne(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);o=Zt(n.countWeights)}const a=ta(t),i=Mm(t),p=go(this.numTokens,a).bufferSync().get(0),r=iu(i,0).bufferSync().get(0);if(!(p&&r))throw new Ne(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return nz(t,this.outputMode,this.numTokens,o)})}}OA.className="CategoryEncoding";xt(OA);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const rz=["bilinear","nearest"],lk=new Set(rz);class $A extends mn{constructor(t){if(super(t),this.height=t.height,this.width=t.width,t.interpolation)if(lk.has(t.interpolation))this.interpolation=t.interpolation;else throw new Ne(`Invalid interpolation parameter: ${t.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!t.cropToAspectRatio}computeOutputShape(t){t=In(t);const n=t[2];return[this.height,this.width,n]}getConfig(){const t={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(t,n),t}call(t,n){return Xe(()=>{const o=[this.height,this.width];if(this.interpolation==="bilinear")return ei.resizeBilinear(t,o,!this.cropToAspectRatio);if(this.interpolation==="nearest")return ei.resizeNearestNeighbor(t,o,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...lk]} are supported`)})}}$A.className="Resizing";xt($A);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class LA{constructor(t){this.seed=t}next(){if(this.seed!==void 0)return this.seed++}}LA.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FA extends mn{constructor(t){super(t),this.randomGenerator=new LA(t.seed)}getConfig(){const t={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(t,n),t}}FA.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sz=["bilinear","nearest"],uk=new Set(sz);class PA extends FA{constructor(t){super(t);const{factor:n,interpolation:o="bilinear"}=t;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ne(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ne(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ne(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(o)if(uk.has(o))this.interpolation=o;else throw new Ne(`Invalid interpolation parameter: ${o} is not implemented`)}getConfig(){const t={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(t,n),t}computeOutputShape(t){t=In(t);const n=t[2];return[this.imgHeight,-1,n]}call(t,n){return Xe(()=>{const o=Zt(t);this.imgHeight=o.shape[o.shape.length-3];const a=o.shape[o.shape.length-2];this.widthFactor=hf([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*a;i=Math.round(i);const p=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return ei.resizeBilinear(t,p);case"nearest":return ei.resizeNearestNeighbor(t,p);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...uk]} are supported`)}})}}PA.className="RandomWidth";xt(PA);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oz=Qe();oz.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,s=>{s&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ck;(function(s){s[s.DT_INVALID=0]="DT_INVALID",s[s.DT_FLOAT=1]="DT_FLOAT",s[s.DT_DOUBLE=2]="DT_DOUBLE",s[s.DT_INT32=3]="DT_INT32",s[s.DT_UINT8=4]="DT_UINT8",s[s.DT_INT16=5]="DT_INT16",s[s.DT_INT8=6]="DT_INT8",s[s.DT_STRING=7]="DT_STRING",s[s.DT_COMPLEX64=8]="DT_COMPLEX64",s[s.DT_INT64=9]="DT_INT64",s[s.DT_BOOL=10]="DT_BOOL",s[s.DT_QINT8=11]="DT_QINT8",s[s.DT_QUINT8=12]="DT_QUINT8",s[s.DT_QINT32=13]="DT_QINT32",s[s.DT_BFLOAT16=14]="DT_BFLOAT16",s[s.DT_QINT16=15]="DT_QINT16",s[s.DT_QUINT16=16]="DT_QUINT16",s[s.DT_UINT16=17]="DT_UINT16",s[s.DT_COMPLEX128=18]="DT_COMPLEX128",s[s.DT_HALF=19]="DT_HALF",s[s.DT_RESOURCE=20]="DT_RESOURCE",s[s.DT_VARIANT=21]="DT_VARIANT",s[s.DT_UINT32=22]="DT_UINT32",s[s.DT_UINT64=23]="DT_UINT64",s[s.DT_FLOAT_REF=101]="DT_FLOAT_REF",s[s.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",s[s.DT_INT32_REF=103]="DT_INT32_REF",s[s.DT_UINT8_REF=104]="DT_UINT8_REF",s[s.DT_INT16_REF=105]="DT_INT16_REF",s[s.DT_INT8_REF=106]="DT_INT8_REF",s[s.DT_STRING_REF=107]="DT_STRING_REF",s[s.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",s[s.DT_INT64_REF=109]="DT_INT64_REF",s[s.DT_BOOL_REF=110]="DT_BOOL_REF",s[s.DT_QINT8_REF=111]="DT_QINT8_REF",s[s.DT_QUINT8_REF=112]="DT_QUINT8_REF",s[s.DT_QINT32_REF=113]="DT_QINT32_REF",s[s.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",s[s.DT_QINT16_REF=115]="DT_QINT16_REF",s[s.DT_QUINT16_REF=116]="DT_QUINT16_REF",s[s.DT_UINT16_REF=117]="DT_UINT16_REF",s[s.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",s[s.DT_HALF_REF=119]="DT_HALF_REF",s[s.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",s[s.DT_VARIANT_REF=121]="DT_VARIANT_REF",s[s.DT_UINT32_REF=122]="DT_UINT32_REF",s[s.DT_UINT64_REF=123]="DT_UINT64_REF"})(ck||(ck={}));var dk;(function(s){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(s.CheckpointFormatVersion||(s.CheckpointFormatVersion={}))})(dk||(dk={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var hk;(function(s){s[s.FAIL=0]="FAIL",s[s.SHORTEST=1]="SHORTEST",s[s.LONGEST=2]="LONGEST"})(hk||(hk={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bt(s,t){Array.isArray(s)||(s=[s]),s.forEach(n=>{n!=null&&ye(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const az=DE;class Ay extends o1{nextDataId(){return Ay.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new aT(this,ya())}write(t,n,o){this.firstUse&&(this.firstUse=!1,Qe().get("IS_NODE")&&uo(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const a={id:this.nextDataId()};return this.data.set(a,{values:t,dtype:o,refCount:1}),a}makeTensorInfo(t,n,o){let a;if(n==="string"&&o!=null&&o.length>0&&dh(o[0])){const i=o.map(p=>Gi(p));a=this.write(i,t,n)}else a=this.write(o,t,n);return{dataId:a,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,o,a,i){this.data.set(t,{values:n,dtype:a,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:o}=this.data.get(t);if(n==="complex64"){const a=this.readSync(o.real.dataId),i=this.readSync(o.imag.dataId);return si(a,i)}return lO(this.data.get(t).values,n)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const o=n.map(a=>qi(a));return fn(t.shape,t.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return fn(t.shape,t.dtype,n)}makeOutput(t,n,o){return ya().makeTensorFromTensorInfo(this.makeTensorInfo(n,o,t),this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:o}=this.data.get(t);o!=null&&(this.disposeData(o.real.dataId,!0),this.disposeData(o.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=$s();return t(),{kernelMs:$s()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){Bt([t],"where");const n=this.readSync(t.dataId);return az(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Ay.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BA(s){const t=new Float32Array(s.length);for(let n=0;n<s.length;++n)t[n]=Math.abs(s[n]);return t}const iz=s=>{const{x:t}=s.inputs,n=s.backend;Bt(t,"abs");let o=new Float32Array(at(t.shape));const a=n.data.get(t.dataId).values;return o=BA(a),n.makeOutput(o,t.shape,t.dtype)},lz={kernelName:ug,backendName:"cpu",kernelFunc:iz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dr(s){return(t,n,o,a,i)=>{const p=on(t,n),r=p.length,h=Vt(p),f=at(p),u=vs(i,f),l=t.length,d=n.length,x=Vt(t),S=Vt(n),m=mc(t,p),y=mc(n,p);if(m.length+y.length===0)for(let b=0;b<u.length;++b)u[b]=s(o[b%o.length],a[b%a.length]);else for(let b=0;b<u.length;++b){const g=kc(b,r,h),w=g.slice(-l);m.forEach(E=>w[E]=0);const _=_a(w,l,x),C=g.slice(-d);y.forEach(E=>C[E]=0);const k=_a(C,d,S);u[b]=s(o[_],a[k])}return[u,p]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ks(s){const{inputs:t,backend:n}=s,{real:o,imag:a}=t,i=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,r=n.makeTensorInfo(o.shape,"complex64"),h=n.data.get(r.dataId);return h.complexTensorInfos={real:n.makeTensorInfo(o.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",p)},r}const uz={kernelName:v1,backendName:"cpu",kernelFunc:Ks};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ym(s,t,n="float32"){if(n==="complex64"){const a=Ym(s,t,"float32"),i=Ym(s,t,"float32");return Ks({inputs:{real:a,imag:i},backend:s})}const o=xs(at(t),n);return s.makeTensorInfo(t,n,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Da(s){const{inputs:t,backend:n}=s,{x:o}=t;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}const cz={kernelName:Nh,backendName:"cpu",kernelFunc:Da};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tu(s){const{inputs:t,backend:n}=s,{input:o}=t,a=n.data.get(o.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const dz={kernelName:V1,backendName:"cpu",kernelFunc:tu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UA(s,t,n,o){if(o==="int32"){const a=Int32Array.from(s);return[t,"int32",a]}if(o==="bool"){const a=au([0],n),[i,p]=Dr((r,h)=>r!==h?1:0)(t,[],s,a,"bool");return[p,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${o}`)}function Qi(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{dtype:i}=o;if(i==="complex64"){if(a.dtype==="complex64")return Da({inputs:{x:a},backend:n});const u=Ym(n,a.shape,a.dtype),l=Qi({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),d=Ks({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),d}if(a.dtype==="complex64"){const u=tu({inputs:{input:a},backend:n}),l=Qi({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),l}if(!lT(a.dtype,i)){const u=Da({inputs:{x:a},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}const p=n.data.get(a.dataId).values,[r,h,f]=UA(p,a.shape,a.dtype,i);return n.makeTensorInfo(r,h,f)}const hz={kernelName:vh,backendName:"cpu",kernelFunc:Qi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xr(s,t,n,o){return n==null?({inputs:a,backend:i})=>{const{a:p,b:r}=a,h=i;Bt([p,r],s);const f=h.data.get(p.dataId).values,u=h.data.get(r.dataId).values,l=p.dtype==="string"?oi(f):f,d=p.dtype==="string"?oi(u):u,x=o||p.dtype,[S,m]=t(p.shape,r.shape,l,d,x);return h.makeTensorInfo(m,x,S)}:({inputs:a,backend:i})=>{const{a:p,b:r}=a,h=i;if(p.dtype==="complex64"||r.dtype==="complex64"){const f=Qi({inputs:{x:p},backend:h,attrs:{dtype:"complex64"}}),u=h.data.get(f.dataId),l=u.complexTensorInfos.real,d=u.complexTensorInfos.imag,x=h.data.get(l.dataId).values,S=h.data.get(d.dataId).values,m=Qi({inputs:{x:r},backend:h,attrs:{dtype:"complex64"}}),y=h.data.get(m.dataId),b=y.complexTensorInfos.real,g=y.complexTensorInfos.imag,w=h.data.get(b.dataId).values,_=h.data.get(g.dataId).values,[C,k,E]=n(p.shape,r.shape,x,S,w,_),j=h.makeTensorInfo(E,"float32",C),A=h.makeTensorInfo(E,"float32",k),O=Ks({inputs:{real:j,imag:A},backend:h});return h.disposeIntermediateTensorInfo(f),h.disposeIntermediateTensorInfo(m),h.disposeIntermediateTensorInfo(j),h.disposeIntermediateTensorInfo(A),O}else{const f=h.data.get(p.dataId).values,u=h.data.get(r.dataId).values,l=o||p.dtype,[d,x]=t(p.shape,r.shape,f,u,l);return h.makeTensorInfo(x,l,d)}}}function Tw(s){return(t,n,o,a,i,p)=>{const r=on(t,n),h=at(r),f=r.length,u=Vt(r),l=vs("float32",h),d=vs("float32",h),x=mc(t,r),S=mc(n,r),m=si(o,a),y=si(i,p),b=t.length,g=Vt(t),w=n.length,_=Vt(n);if(x.length+S.length===0)for(let C=0;C<l.length;C++){const k=C%m.length,E=C%y.length,j=s(m[k*2],m[k*2+1],y[E*2],y[E*2+1]);l[C]=j.real,d[C]=j.imag}else for(let C=0;C<l.length;C++){const k=kc(C,f,u),E=k.slice(-b);x.forEach(D=>E[D]=0);const j=_a(E,b,g),A=k.slice(-w);S.forEach(D=>A[D]=0);const O=_a(A,w,_),N=s(m[j*2],m[j*2+1],y[O*2],y[O*2+1]);l[C]=N.real,d[C]=N.imag}return[l,d,r]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zA=Dr((s,t)=>s+t),fz=Tw((s,t,n,o)=>({real:s+n,imag:t+o})),bc=Xr(Tc,zA,fz),pz={kernelName:Tc,backendName:"cpu",kernelFunc:bc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ew(s,t,n,o,a){const i=at(o),p=xs(a,n);for(let r=0;r<s.length;r++){const h=s[r];if(h<0)throw new Error("Input x must be non-negative!");h>=a||(i>0?p[h]+=t[r]:p[h]+=1)}return p}function VA(s,t,n,o=!1){const a=s.shape[0],i=s.shape[1],p=fn([a,n],t.dtype);for(let r=0;r<a;r++)for(let h=0;h<i;h++){const f=s.get(r,h);if(f<0)throw new Error("Input x must be non-negative!");f>=n||(o?p.set(1,r,f):t.size>0?p.set(p.get(r,f)+t.get(r,h),r,f):p.set(p.get(r,f)+1,r,f))}return p}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GA=Dr((s,t)=>s&t),mz=Xr(b1,GA),gz={kernelName:b1,backendName:"cpu",kernelFunc:mz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ma(s){return(t,n,o)=>{const a=jr(n,t.length);for(let i=0;i<t.length;++i)a[i]=s(t[i],o);return a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Un(s,t,n){const o=Ma(t);return ul(s,o,n)}function ul(s,t,n){return({inputs:o,attrs:a,backend:i})=>{const{x:p}=o;Bt(p,s);const r=i,h=r.data.get(p.dataId).values;let f;if(p.dtype==="string"){if(!Array.isArray(h))throw new Error("String tensor's value was not an instance of Array");f=oi(h)}else f=h;const u=n||p.dtype,l=t(f,u,a);return r.makeTensorInfo(p.shape,u,l)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WA=Ma(s=>Math.ceil(s)),yz=ul(xh,WA),bz={kernelName:xh,backendName:"cpu",kernelFunc:yz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HA(s,t,n,o){const a=jr(n,at(t));if(o&&n!=="string"){let i=0;s.forEach(p=>{const r=at(p.shape);a.set(p.vals,i),i+=r})}else{let i=0;s.forEach(p=>{const r=n==="string"?oi(p.vals):p.vals;let h=0;for(let f=0;f<p.shape[0];++f){const u=f*t[1]+i;for(let l=0;l<p.shape[1];++l)a[u+l]=r[h++]}i+=p.shape[1]})}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qA=Dr((s,t)=>s===t?1:0),XA=Xr(Cg,qA,null,"bool"),vz={kernelName:Cg,backendName:"cpu",kernelFunc:XA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YA=Ma(s=>Math.exp(s)),KA=ul(Eh,YA,"float32"),xz={kernelName:Eh,backendName:"cpu",kernelFunc:KA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZA=Ma(s=>Math.expm1(s)),wz=ul(jh,ZA),Sz={kernelName:jh,backendName:"cpu",kernelFunc:wz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QA=Ma(s=>Math.floor(s)),_z=ul(Ih,QA),Cz={kernelName:Ih,backendName:"cpu",kernelFunc:_z};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JA=Dr((s,t)=>Math.floor(s/t)),kz=Xr(Ah,JA,null,"int32"),Tz={kernelName:Ah,backendName:"cpu",kernelFunc:kz};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eR(s,t,n,o,a,i,p,r,h){const f=fn([o,i],n);for(let u=0;u<o;u++){const l=[];let d=0;for(let x=0;x<a;x++){const S=s[u*a+x];d+=S*p[x],l.push(S)}if(d<0||d>=h/i)throw new Error(`Invalid indices: ${l} does not index into ${r}`);for(let x=0;x<i;x++)f.values[u*i+x]=t.get(...t.indexToLoc(d*i+x))}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tR(s,t,n){const o=fn(n,s.dtype);for(let a=0;a<o.size;++a){const p=o.indexToLoc(a).slice(),r=p[0],h=p[2],f=t.locToIndex([r,h]);p[2]=t.values[f];const u=s.locToIndex(p);0<=u&&u<s.values.length&&(o.values[a]=s.values[u])}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nR=Dr((s,t)=>s>t?1:0),Ez=Xr(jg,nR,null,"bool"),jz={kernelName:jg,backendName:"cpu",kernelFunc:Ez};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rR=Dr((s,t)=>s>=t?1:0),Iz=Xr(Rh,rR,null,"bool"),Az={kernelName:Rh,backendName:"cpu",kernelFunc:Iz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sR=Dr((s,t)=>s<t?1:0),Rz=Xr(Ag,sR,null,"bool"),Nz={kernelName:Ag,backendName:"cpu",kernelFunc:Rz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oR=Dr((s,t)=>s<=t?1:0),Dz=Xr(Rg,oR,null,"bool"),Mz={kernelName:Rg,backendName:"cpu",kernelFunc:Dz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aR(s,t,n){const o=(t-s)/(n-1),a=xs(n,"float32");a[0]=s;for(let i=1;i<a.length;i++)a[i]=a[i-1]+o;return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iR=Ma(s=>Math.log(s)),Oz=ul($h,iR),$z={kernelName:$h,backendName:"cpu",kernelFunc:Oz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lR(s,t,n,o){const a=vs(o,at(n));for(let i=0;i<a.length;++i){const p=i*t;let r=s[p];for(let h=0;h<t;++h){const f=s[p+h];(Number.isNaN(f)||f>r)&&(r=f)}a[i]=r}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uR=Dr((s,t)=>Math.max(s,t)),Lz=Xr(Fh,uR),Fz={kernelName:Fh,backendName:"cpu",kernelFunc:Lz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cR=Dr((s,t)=>Math.min(s,t)),Pz=Xr(Ph,cR),Bz={kernelName:Ph,backendName:"cpu",kernelFunc:Pz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jw=Dr((s,t)=>s*t),Uz=Tw((s,t,n,o)=>({real:s*n-t*o,imag:s*o+t*n})),Ry=Xr(Uh,jw,Uz),zz={kernelName:Uh,backendName:"cpu",kernelFunc:Ry};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dR(s,t,n){const o=tl(-1,n);return jw([],t,o,s,n)}function Vz(s){const{inputs:t,backend:n}=s,{x:o}=t;Bt(o,"neg");const a=n.data.get(o.dataId).values,[i,p]=dR(a,o.shape,o.dtype);return n.makeTensorInfo(p,o.dtype,i)}const Gz={kernelName:zg,backendName:"cpu",kernelFunc:Vz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hR=Dr((s,t)=>s!==t?1:0),Wz=Xr(Vg,hR,null,"bool"),Hz={kernelName:Vg,backendName:"cpu",kernelFunc:Wz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iw(s,t,n,o,a){const i=t.length,p=at(t),r=Vt(t),h=Vt(a),f=vs(n,at(a));for(let u=0;u<p;++u){const l=kc(u,i,r),d=new Array(l.length);for(let S=0;S<d.length;S++)d[S]=l[o[S]];const x=_a(d,i,h);f[x]=s[u]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Us(s){const{inputs:t,attrs:n,backend:o}=s,{x:a}=t,{perm:i}=n;Bt(a,"transpose");const p=a.shape.length,r=new Array(p);for(let l=0;l<r.length;l++)r[l]=a.shape[i[l]];const h=o.data.get(a.dataId).values,f=Iw(h,a.shape,a.dtype,i,r);return{dataId:o.write(f,r,a.dtype),shape:r,dtype:a.dtype}}const qz={kernelName:lc,backendName:"cpu",kernelFunc:Us};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fR(s,t,n,o){const[a,i]=ss(s,o),p=Qs(t,"int32"),r=xs(at(a),p),h=at(i);for(let f=0;f<r.length;++f){const u=f*h;let l=1;for(let d=0;d<h;++d)l*=n[u+d];r[f]=l}return{outVals:r,outShape:a,outDtype:p}}function Xz(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o;Bt(a,"prod");const r=a.shape.length,h=pn(i,a.shape),f=br(h,r);let u=h,l=a;const d=[];f!=null&&(l=Us({inputs:{x:a},backend:n,attrs:{perm:f}}),d.push(l),u=Rr(u.length,r));const x=n.data.get(l.dataId).values,{outVals:S,outShape:m,outDtype:y}=fR(l.shape,l.dtype,x,u);let b=m;return p&&(b=Fr(m,h)),d.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(b,y,S)}const Yz={kernelName:Yg,backendName:"cpu",kernelFunc:Xz};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kz(s,t,n){s.forEach((o,a)=>{if(o<0||o>=n){const i=kc(a,t.length,Vt(t)).join(",");throw new Error(`indices[${i}] = ${o} is not in [0, ${n})`)}})}function Zz(s,t){for(let n=0;n<s.length;++n){const o=s[n],a=n===s.length-1?t:s[n+1].length;if(o.length===0)throw new Error("Ragged splits may not be empty");if(o[0]<0)throw new Error("Ragged splits must be non-negative");if(o[o.length-1]>a)throw new Error("Ragged splits must not point past values");for(let i=1;i<o.length;++i)if(o[i-1]>o[i])throw new Error("Ragged splits must be sorted in ascending order")}}function Qz(s,t,n,o){const a=[];let i=0;const p=t.length-1+n.length,r=new Array(p).fill(null).map(()=>[0]);Zz(n,o);let h=1;for(let f=0;f<t.length-1;++f){h*=t[f];const u=t[f+1];for(let l=1;l<h+1;++l)r[f].push(l*u)}for(let f=0;f<s.length;++f){let u=s[f],l=s[f]+1;for(let d=0;d<n.length;++d){const x=n[d],S=d+t.length-1;if(S>=0){const m=r[S],y=m[m.length-1]-x[u];for(let b=u;b<l;++b)r[S].push(x[b+1]+y)}u=x[u],l=x[l]}l!==u&&(a.push([u,l]),i+=l-u)}return{outSplits:r,valueSlices:a,numValues:i}}function Jz(s){const t=[];for(let n=0;n<s.length;++n){const o=s[n].length,a=jr("int32",o);t.push(a),s[n].forEach((i,p)=>a[p]=i)}return t}function fk(s,t){const n=s.slice(0,t);for(;n.length<t;)n.push(1);for(let o=t;o<s.length;o++)n[t-1]*=s[o];return n}function eV(s,t,n,o,a,i){const p=fk(t,2)[1],r=fk(i,2)[1];let h=0;for(const f of n)for(let u=f[0];u<f[1];++u){for(let l=0;l<o;++l)a[h*r+l]=s[u*p+l];++h}}function tV(s,t,n,o,a){const i=t.slice();i[0]=a;const p=jr(n,at(i)),r=s.length,h=r===0?0:r/t[0];return eV(s,t,o,h,p,i),[p,i]}function pR(s,t,n,o,a,i,p,r){if(s.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const h=t[0][0]-1;if(Kz(i,p,h),o.length===0)throw new Error("params.rank must be nonzero");const f=o[0],{outSplits:u,valueSlices:l,numValues:d}=Qz(i,p,s,f),x=Jz(u),S=tV(n,o,a,l,d);return[x,S[0],S[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pk=2147483647;function mR(s,t,n,o,a,i,p){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(p.length>1)throw new Error("deltas must be a scalar or vector");const r=t.length===0,h=a.length===0,f=p.length===0,u=[];r||u.push(t[0]),h||u.push(a[0]),f||u.push(p[0]);for(let y=1;y<u.length;++y)if(u[y]!==u[y-1])throw new Error("starts, limits, and deltas must have the same shape");const l=u.length===0?1:u[0],d=jr("int32",l+1);d[0]=0;for(let y=0;y<l;++y){const b=r?s[0]:s[y],g=h?o[0]:o[y],w=f?i[0]:i[y];if(w===0)throw new Error("Requires delta != 0");let _;if(w>0&&g<b||w<0&&g>b)_=0;else if(_=Math.ceil(Math.abs((g-b)/w)),_>pk)throw new Error(`Requires ((limit - start) / delta) <= ${pk}`);d[y+1]=d[y]+_}const x=d[l],S=jr(n,x);let m=0;for(let y=0;y<l;++y){const b=d[y+1]-d[y];let g=r?s[0]:s[y];const w=f?i[0]:i[y];for(let _=0;_<b;++_)S[m++]=g,g+=w}return[d,S]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Io=Zo;class Km{constructor(t,n,o,a,i,p,r,h,f,u){this.shape=t,this.shapeShape=n,this.values=o,this.valuesShape=a,this.valuesDType=i,this.defaultValue=p,this.defaultValueShape=r,this.rowPartitionValues=h,this.rowPartitionValuesShapes=f,this.rowPartitionTypes=ej(u),this.raggedRank=tj(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===Io.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===Io.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case Io.VALUE_ROWIDS:return Km.getMaxWidthValueRowID(n);case Io.ROW_SPLITS:return Km.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Io[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const n=t.length;if(n===0||n===1)return 0;let o=0;for(let a=0;a<n-1;++a){const i=t[a+1]-t[a];i>o&&(o=i)}return o}static getMaxWidthValueRowID(t){const n=t.length;if(n===0)return 0;let o=0,a=t[0],i=0;for(let p=1;p<n;++p){const r=t[p];r!==a&&(a=r,i=Math.max(p-o,i),o=p)}return Math.max(n-o,i)}tensorShapeFromTensor(t,n,o=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return gk(t,o)}calculateOutputSize(t){const n=this.valuesShape,o=this.defaultValueShape;nj(o,n);const a=this.tensorShapeFromTensor(this.shape,this.shapeShape),p=JE(this.raggedRank,a,n);p[0]<0&&(p[0]=t);for(let r=1;r<=this.raggedRank;++r)p[r]<0&&(p[r]=this.getMaxWidth(r));return p}calculateFirstParentOutputIndex(t,n,o){const a=Math.min(t,o),i=[];let p=0;for(let r=0;r<a;++r,p+=n)i.push(p);for(let r=a;r<t;++r)i.push(-1);return ye(i.length===t,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(t,n,o,a){const i=t.length,p=[];for(let r=0;r<i-1;++r){const h=t[r+1]-t[r];let f=Math.min(a,h),u=n[r];u===-1&&(f=0);for(let l=0;l<f;++l)p.push(u),u+=o;for(let l=0;l<h-f;++l)p.push(-1)}if(i>0&&p.length!==t[i-1])throw new Error("Invalid row split size.");return p}calculateOutputIndexValueRowID(t,n,o,a){const i=t.length,p=[];if(i===0)return[];let r=0,h=t[0];if(h>=n.length)throw new Error(`Got currentValueRowId=${h}, which is not less than ${n.length}`);let f=n[h];p.push(f);for(let u=1;u<i;++u){const l=t[u];if(l===h)f>=0&&(++r,r<a?f+=o:f=-1);else{if(r=0,h=l,l>=n.length)throw new Error(`Got nextValueRowId=${l} which is not less than ${n.length}`);f=n[l]}p.push(f)}if(p.length!==t.length)throw new Error("Invalid row ids.");return p}calculateOutputIndex(t,n,o,a){const i=this.getRowPartitionTensor(t),p=this.getRowPartitionTypeByDimension(t);switch(p){case Io.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,o,a);case Io.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,o,a);default:throw new Error(`Unsupported partition type: ${Io[p]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Io.FIRST_DIM_SIZE:return t[0];case Io.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Io.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Io[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),o=this.calculateOutputSize(n),a=new Array(this.raggedRank+1);a[a.length-1]=1;for(let h=a.length-2;h>=0;--h)a[h]=a[h+1]*o[h+1];const i=gk(o,!1),p=jr(this.valuesDType,at(i));if(a[0]*o[0]>0){let h=this.calculateFirstParentOutputIndex(n,a[0],o[0]);for(let f=1;f<=this.raggedRank;++f)h=this.calculateOutputIndex(f-1,h,a[f],o[f]);this.setOutput(this.raggedRank,h,p,i)}return[i,p]}setOutput(t,n,o,a){if(o.length===0)return;const i=this.values,p=o;let r=a.slice();r=r.slice(t+1);const h=at(r),f=n.length;let u=this.defaultValue;if(u.length!==h&&u.length!==1){const S=this.defaultValueShape;Xe(()=>{const m=Pe(u,S);u=qd(m,r).dataSync()})}let l=0,d=0,x=0;for(let S=0;S<=f;++S){let m=S<f?n[S]:-1;if(m===x){++x;continue}if(d<x){const y=i.subarray(l*h),b=p.subarray(d*h),g=(x-d)*h;mk(b,y,g)}if(S>=f){const y=o.length;m=Math.floor(y/h)}if(m>x)if(this.defaultValue.length===1)p.subarray(x*h,m*h).fill(this.defaultValue[0]),x=m;else for(;m>x;){const y=p.slice(x*h);mk(y,u,h),++x}m<0?(l=S+1,d=x):(l=S,d=x,x=d+1)}}}function mk(s,t,n){for(let o=0;o<n;o++)s[o]=t[o]}function gk(s,t){const n=[];for(let o of s){if(o<0){if(!t)throw new Error(`Dimension ${o} must be >= 0`);if(o<-1)throw new Error(`Dimension ${o} must be >= -1`);o=-1}n.push(o)}return n}function gR(s,t,n,o,a,i,p,r,h,f){return new Km(s,t,n,o,a,i,p,r,h,f).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yR(s,t,n,o){const a=s===t,i=s<t&&n<0,p=t<s&&n>1;if(a||i||p)return xs(0,o);const r=Math.abs(Math.ceil((t-s)/n)),h=xs(r,o);t<s&&n===1&&(n=-1),h[0]=s;for(let f=1;f<h.length;f++)h[f]=h[f-1]+n;return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bR=Ma(s=>1/Math.sqrt(s)),nV=ul(qh,bR),rV={kernelName:qh,backendName:"cpu",kernelFunc:nV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pl(s,t,n,o,a,i,p,r,h,f){const u=[o/a,a],l=s.values,d=t.values;if(o===0)return fn(n,t.dtype);const x=h instanceof ds?h:fn(u,t.dtype);typeof h=="string"||typeof h=="number"?x.values.fill(h):typeof h=="boolean"&&x.values.fill(+h);for(let S=0;S<i;S++){const m=[];let y=0;for(let b=0;b<p;b++){const g=l[S*p+b];m.push(g),y+=g*r[b]}if(y<0||y>=o/a)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let b=0;b<a;b++)f?x.values[y*a+b]+=d[S*a+b]:x.values[y*a+b]=t.rank===0?d[0]:d[S*a+b]}return x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sV=Ma(s=>1/(1+Math.exp(-s))),vR=Un(Qh,s=>1/(1+Math.exp(-s))),oV={kernelName:Qh,backendName:"cpu",kernelFunc:vR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xR(s,t,n,o,a){const i=$x(o,t,n),p=at(n),r=Vt(o);if(i){const l=Lx(t,r);return a==="string"?s.slice(l,l+p):s.subarray(l,l+p)}const h=a==="string"?oi(s):s,f=fn(o,a,h),u=fn(n,a);for(let l=0;l<u.size;++l){const d=u.indexToLoc(l),x=d.map((S,m)=>S+t[m]);u.set(f.get(...x),...d)}return a==="string"?Sj(u.values):u.values}function nu(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{begin:i,size:p}=o;Bt(a,"slice");const[r,h]=gy(a,i,p);Mx(a,r,h);const f=n.data.get(a.dataId).values,u=xR(f,r,h,a.shape,a.dtype);return n.makeTensorInfo(h,a.dtype,u)}const aV={kernelName:ty,backendName:"cpu",kernelFunc:nu};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wR(s,t,n,o,a,i,p){const r=t[0],h=i[0],f=new Array(h),u=new Array(r),l=t[1];if(h===0){if(r!==0)throw new Error(uj(r));const y=jr(n,0),b=jr(a,0);return[y,[0,l],b,f,u]}let d=!0,x=0;const S=new Array(h).fill(0);for(let y=0;y<r;++y){const b=s[y*l];if(b<0)throw new Error(cj(y,b));if(b>=h)throw new Error(dj(y,b,h));++S[b],d=d&&b>=x,x=b}let m=!0;for(let y=0;y<h;++y){const b=S[y]===0;f[y]=b,m=m&&!b,S[y]=Math.max(S[y],1),y>0&&(S[y]+=S[y-1])}if(m&&d){const y=s,b=o;for(let g=0;g<r;++g)u[g]=g;return[y,[r,l],b,f,u]}else{const y=S[h-1],b=jr(n,y*l),g=jr(a,y),w=new Array(h).fill(0);for(let _=0;_<r;++_){const C=s[_*l],k=w[C],E=(C===0?0:S[C-1])+k;w[C]++;for(let j=0;j<l;++j)b[E*l+j]=s[_*l+j];g[E]=o[_],u[_]=E}for(let _=0;_<h;++_)if(w[_]===0){const k=_===0?0:S[_-1];b[k*l+0]=_;for(let E=1;E<l;++E)b[k*l+E]=0;g[k]=p}return[b,[y,l],g,f,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SR(s,t,n,o,a){const i=at(o),p=t[0],r=a.length,h=[];let f=1,u=-1;for(let y=0;y<r;++y){const b=a[y];if(b===-1){if(u!==-1)throw new Error(hj(u,y));u=y,h.push(1)}else{if(b<0)throw new Error(fj(y,b));f*=b,h.push(b)}}if(u!==-1){if(f<=0)throw new Error(pj());const y=Math.trunc(i/f);if(f*y!==i)throw new Error(mj(o,h));h[u]=y}if(at(h)!==i)throw new Error(gj(o,h));const d=o.length,x=[];if(d>0){x[d-1]=1;for(let y=d-2;y>=0;--y)x[y]=x[y+1]*o[y+1]}const S=[];if(r>0){S[r-1]=1;for(let y=r-2;y>=0;--y)S[y]=S[y+1]*h[y+1]}const m=jr(n,p*r);for(let y=0;y<p;++y){let b=0;for(let g=0;g<d;++g)b+=s[y*d+g]*x[g];for(let g=0;g<r;++g)m[y*r+g]=Math.trunc(b/S[g]),b%=S[g]}return[m,[p,r],h]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aw(s,t,n,o,a,i=!1,p=0){const r=o.length,h=[t[0],s.length/t[0]],f=h[1],l=r>0?a[r-1]+1:0;if(l<0)throw new Error(Ov());const d=t.slice();d[0]=l;const x=d.reduce((w,_)=>w*_,1),S=jr(n,x);if(r===0)return l>0&&S.fill(p),[S,d];if(l<=0)throw new Error(Ov());let m=0,y=1,b=0,g=a[m];for(;;){let w=0;if(y<r){if(w=a[y],g===w){++y;continue}if(g>=w)throw new Error(yj())}if(g<0||g>=l)throw new Error(bj(g,l));g>b&&S.fill(p,b*f,g*f);for(let _=m;_<y;++_){const C=o[_];if(C<0||C>=h[0])throw new Error(vj(_,o[_],h[0]));for(let k=0;k<f;k++)S[g*f+k]+=s[C*f+k]}if(i)for(let _=0;_<f;_++)S[g*f+_]/=y-m;if(m=y,++y,b=g+1,g=w,y>r)break}return b<l&&S.fill(p,b*f,l*f),[S,d]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iV=Ma(s=>Math.sqrt(s)),lV=Un(ef,s=>Math.sqrt(s)),uV={kernelName:ef,backendName:"cpu",kernelFunc:lV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _R=Dr((s,t)=>{const n=s-t;return n*n}),cV=Xr(tf,_R),dV={kernelName:tf,backendName:"cpu",kernelFunc:cV};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CR=Ma((s,t)=>{const{pattern:n,replaceGlobal:o,rewrite:a}=t;return s.replace(new RegExp(n,o?"g":""),a)}),hV=ul(q1,CR),fV={kernelName:q1,backendName:"cpu",kernelFunc:hV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kR(s,t,n,o){const a=fn(s,t.dtype);for(let i=0;i<a.size;i++){const p=a.indexToLoc(i),r=new Array(p.length);for(let h=0;h<r.length;h++)r[h]=p[h]*n[h]+o[h];a.set(t.get(...r),...p)}return a}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pV{constructor(t,n,o,a,i,p){this.separator=Gi(t),this.nGramWidths=n,this.leftPad=Gi(o),this.rightPad=Gi(a),this.padWidth=i,this.preserveShort=p}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const o=this.getPadWidth(n);return Math.max(0,t+2*o-n+1)}createNGrams(t,n,o,a,i,p){for(let r=0;r<i;++r){const h=this.getPadWidth(p),f=Math.max(0,h-r),u=Math.max(0,h-(i-(r+1))),l=p-(f+u),d=n+(f>0?0:r-h);let x=0;x+=f*this.leftPad.length;for(let g=0;g<l;++g)x+=t[d+g].length;x+=u*this.rightPad.length;const S=f+u+l-1;x+=S*this.separator.length,o[a+r]=new Uint8Array(x);const m=o[a+r];let y=0;const b=g=>g.forEach(w=>m[y++]=w);for(let g=0;g<f;++g)b(this.leftPad),b(this.separator);for(let g=0;g<l-1;++g)b(t[d+g]),b(this.separator);if(l>0){b(t[d+l-1]);for(let g=0;g<u;++g)b(this.separator),b(this.rightPad)}else{for(let g=0;g<u-1;++g)b(this.rightPad),b(this.separator);b(this.rightPad)}}}compute(t,n){const o=t.length,a=n.length;if(a>0){let h=n[0];if(h!==0)throw new Error(`First split value must be 0, got ${h}`);for(let f=1;f<a;++f){let u=n[f]>=h;if(u=u&&n[f]<=o,!u)throw new Error(`Invalid split value ${n[f]}, must be in [${h}, ${o}]`);h=n[f]}if(h!==o)throw new Error(`Last split value must be data size. Expected ${o}, got ${h}`)}const i=a-1,p=jr("int32",a);if(o===0||a===0){const h=new Array(o);for(let f=0;f<=i;++f)p[f]=0;return[h,p]}p[0]=0;for(let h=1;h<=i;++h){const f=n[h]-n[h-1];let u=0;this.nGramWidths.forEach(l=>{u+=this.getNumNGrams(f,l)}),this.preserveShort&&f>0&&u===0&&(u=1),p[h]=p[h-1]+u}const r=new Array(p[i]);for(let h=0;h<i;++h){const f=n[h];let u=p[h];if(this.nGramWidths.forEach(l=>{const d=n[h+1]-n[h],x=this.getNumNGrams(d,l);this.createNGrams(t,f,r,u,x,l),u+=x}),this.preserveShort&&u===p[h]){const l=n[h+1]-n[h];if(l===0)continue;const d=l+2*this.padWidth;this.createNGrams(t,f,r,u,1,d)}}return[r,p]}}function TR(s,t,n,o,a,i,p,r){return new pV(n,o,a,i,p,r).compute(s,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mV(s,t,n,o){if(!s.length)return;if(t.length===0){for(let i=0;i<s.length;++i)o.push(s.subarray(i,i+1));return}if(t.length===1){const i=t[0];let p=s.indexOf(i);for(;p!==-1;){const r=s.subarray(0,p);(!n||r.length!==0)&&o.push(r),s=s.subarray(p+1),p=s.indexOf(i)}(!n||s.length!==0)&&o.push(s);return}let a=0;for(let i=0;i<s.length+1;i++)if(i===s.length||t.indexOf(s[i])!==-1){const p=s.subarray(a,i);(!n||p.length!==0)&&o.push(p),a=i+1}}function ER(s,t,n){const o=s.length,a=[];let i=0,p=0;const r=new Array(o);for(let d=0;d<o;++d){const x=a.length;mV(s[d],t,n,a);const S=a.length-x;r[d]=S,i+=S,p=Math.max(p,S)}const h=jr("int32",i*2),f=new Array(i),u=[o,p];let l=0;for(let d=0;d<o;++d)for(let x=0;x<r[d];++x)h[l*2]=d,h[l*2+1]=x,f[l]=a[l],++l;return[h,f,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jR(s,t){const n=jr("int32",s.length);for(let o=0;o<s.length;++o)n[o]=TO(s[o]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IR=Dr((s,t)=>s-t),gV=Tw((s,t,n,o)=>({real:s-n,imag:t-o})),Rw=Xr(nf,IR,gV),yV={kernelName:nf,backendName:"cpu",kernelFunc:Rw};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AR(s,t){const n=new Array(s.rank);for(let a=0;a<n.length;a++)n[a]=s.shape[a]*t[a];const o=fn(n,s.dtype);for(let a=0;a<o.values.length;++a){const i=o.indexToLoc(a),p=new Array(s.rank);for(let h=0;h<p.length;h++)p[h]=i[h]%s.shape[h];const r=s.locToIndex(p);o.values[a]=s.values[r]}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zd=(s,t)=>{const n=t.value-s.value;return n===0?s.index-t.index:n};function RR(s,t,n=0,o=s.length-1){for(;o>n;){if(o-n>600){const r=o-n+1,h=t-n+1,f=Math.log(r),u=.5*Math.exp(2*f/3),l=.5*Math.sqrt(f*u*(r-u)/r)*Math.sign(h-r/2),d=Math.max(n,Math.floor(t-h*u/r+l)),x=Math.min(o,Math.floor(t+(r-h)*u/r+l));RR(s,t,d,x)}const a=s[t];let i=n,p=o;for(sc(s,n,t),zd(s[o],a)>0&&sc(s,n,o);i<p;){for(sc(s,i,p),i++,p--;zd(s[i],a)<0;)i=i+1;for(;zd(s[p],a)>0;)p=p-1}zd(s[n],a)===0?sc(s,n,p):(p=p+1,sc(s,p,o)),p<=t&&(n=p+1),t<=p&&(o=p-1)}}function NR(s,t,n,o,a){const i=t[t.length-1],[p,r]=[s.length/i,i],h=vs(n,p*o),f=vs("int32",p*o);for(let l=0;l<p;l++){const d=l*r,x=s.subarray(d,d+r);let S=new Array(x.length);x.forEach((g,w)=>S[w]={value:g,index:w}),o<S.length&&(RR(S,o),S=S.slice(0,o)),a&&S.sort(zd);const m=l*o,y=h.subarray(m,m+o),b=f.subarray(m,m+o);for(let g=0;g<o;g++)y[g]=S[g].value,b[g]=S[g].index}const u=t.slice();return u[u.length-1]=o,[fn(u,n,h),fn(u,"int32",f)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DR(s,t,n,o){const a=pn(t,n)[0],i=[1,n[0],1];for(let S=0;S<a;S++)i[0]*=n[S];i[1]=n[a];for(let S=a+1;S<n.length;S++)i[2]*=n[S];const p=new Map,r=new Int32Array(n[a]),h=new ds(i,o,s),f=[],u=i[0]===1&&i[2]===1;for(let S=0;S<n[a];S++){let m;if(u)m=s[S].toString();else{const b=[];for(let g=0;g<i[0];g++)for(let w=0;w<i[2];w++)b.push(h.get(g,S,w));m=b.join(",")}const y=p.get(m);if(y!=null)r[S]=y;else{const b=p.size;p.set(m,b),r[S]=b,f.push(S)}}const l=i.slice();l[1]=p.size;const d=new ds(l,o);f.forEach((S,m)=>{for(let y=0;y<i[0];y++)for(let b=0;b<i[2];b++)d.set(h.get(y,S,b),y,m,b)});const x=n.slice();return x[a]=l[1],{outputValues:d.values,outputShape:x,indices:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bV=Object.freeze(Object.defineProperty({__proto__:null,addImpl:zA,bincountImpl:Ew,bincountReduceImpl:VA,bitwiseAndImpl:GA,castImpl:UA,ceilImpl:WA,concatImpl:HA,equalImpl:qA,expImpl:YA,expm1Impl:ZA,floorDivImpl:JA,floorImpl:QA,gatherNdImpl:eR,gatherV2Impl:tR,greaterEqualImpl:rR,greaterImpl:nR,lessEqualImpl:oR,lessImpl:sR,linSpaceImpl:aR,logImpl:iR,maxImpl:lR,maximumImpl:uR,minimumImpl:cR,multiplyImpl:jw,negImpl:dR,notEqualImpl:hR,prodImpl:fR,raggedGatherImpl:pR,raggedRangeImpl:mR,raggedTensorToTensorImpl:gR,rangeImpl:yR,rsqrtImpl:bR,scatterImpl:Pl,sigmoidImpl:sV,simpleAbsImpl:BA,sliceImpl:xR,sparseFillEmptyRowsImpl:wR,sparseReshapeImpl:SR,sparseSegmentReductionImpl:Aw,sqrtImpl:iV,squaredDifferenceImpl:_R,staticRegexReplaceImpl:CR,stridedSliceImpl:kR,stringNGramsImpl:TR,stringSplitImpl:ER,stringToHashBucketFastImpl:jR,subImpl:IR,tileImpl:AR,topKImpl:NR,transposeImpl:Iw,uniqueImpl:DR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ZT("cpu",()=>new Ay,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MR=Un(kh,s=>s>=0?s:Math.exp(s)-1),vV={kernelName:kh,backendName:"cpu",kernelFunc:MR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OR(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{alpha:i}=o;Bt([a],"leakyRelu");const p=at(a.shape),r=n.data.get(a.dataId).values,h=vs("float32",p);for(let f=0;f<r.length;f++)h[f]=r[f]<0?i*r[f]:r[f];return n.makeTensorInfo(a.shape,"float32",h)}const xV={kernelName:Ig,backendName:"cpu",kernelFunc:OR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wV=Dr((s,t)=>s<0?t*s:s);function $R(s){const{inputs:t,backend:n}=s,{x:o,alpha:a}=t;Bt([o,a],"prelu");const i=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,[r,h]=wV(o.shape,a.shape,i,p,"float32");return n.makeTensorInfo(h,"float32",r)}const SV={kernelName:Xg,backendName:"cpu",kernelFunc:$R};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LR=Un(Gh,s=>Math.max(0,s)),_V={kernelName:Gh,backendName:"cpu",kernelFunc:LR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FR=Un(Wh,s=>Math.min(Math.max(0,s),6)),CV={kernelName:Wh,backendName:"cpu",kernelFunc:FR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zm(s,t,n,o,a){if(n==="linear")return Da({inputs:{x:t},backend:s});if(n==="relu")return LR({inputs:{x:t},backend:s});if(n==="elu")return MR({inputs:{x:t},backend:s});if(n==="relu6")return FR({inputs:{x:t},backend:s});if(n==="prelu")return $R({inputs:{x:t,alpha:o},backend:s});if(n==="leakyrelu")return OR({inputs:{x:t},backend:s,attrs:{alpha:a}});if(n==="sigmoid")return vR({inputs:{x:t},backend:s});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function or(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{shape:i}=o,p=at(a.shape),r=iT(i,p),h=at(r);ye(p===h,()=>`The new shape (${r}) has ${h} elements and the old shape (${a.shape}) has ${p} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);const f=n.data.get(a.dataId);if(f.complexTensorInfos!=null){const u=f.complexTensorInfos.real,l=f.complexTensorInfos.imag;u.shape=r,l.shape=r}return{dataId:a.dataId,shape:r,dtype:a.dtype}}const kV={kernelName:Kg,backendName:"cpu",kernelFunc:or};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PR(s){const{inputs:t,backend:n,attrs:o}=s,{a,b:i}=t,{transposeA:p,transposeB:r}=o;Bt([a,i],"matMul");const h=a.shape.length,f=i.shape.length,u=p?a.shape[h-2]:a.shape[h-1],l=r?i.shape[f-1]:i.shape[f-2],d=p?a.shape[h-1]:a.shape[h-2],x=r?i.shape[f-2]:i.shape[f-1],S=a.shape.slice(0,-2),m=i.shape.slice(0,-2),y=at(S),b=at(m),w=on(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,x]);ye(u===l,()=>`Error in matMul: inner shapes (${u}) and (${l}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${p} and transposeB=${r} must match.`);const _=p?[y,u,d]:[y,d,u],C=r?[b,x,l]:[b,l,x],k=or({inputs:{x:a},backend:n,attrs:{shape:_}}),E=or({inputs:{x:i},backend:n,attrs:{shape:C}}),j=p?k.shape[1]:k.shape[2],A=p?k.shape[2]:k.shape[1],O=r?E.shape[1]:E.shape[2],N=Math.max(y,b),D=n.data.get(k.dataId).values,z=n.data.get(E.dataId).values,$=Vt(k.shape),B=Vt(E.shape),[F,G,W]=p?[$[0],1,$[1]]:[$[0],$[1],1],[L,V,Y]=r?[1,B[1],B[0]]:[B[1],1,B[0]],Z=A*O,J=fn([N,A,O],k.dtype),ne=J.values,se=n.blockSize;for(let ie=0;ie<N;ie++){const X=ie%y,Q=ie%b;for(let re=0;re<A;re+=se){const ce=Math.min(re+se,A);for(let he=0;he<O;he+=se){const fe=Math.min(he+se,O);for(let oe=0;oe<j;oe+=se){const me=Math.min(oe+se,j);for(let we=re;we<ce;we++)for(let ke=he;ke<fe;ke++){let ve=0;for(let _e=oe;_e<me;_e++){const Me=D[X*F+we*G+_e*W],He=z[_e*L+ke*V+Q*Y];ve+=Me*He}ne[ie*Z+(we*O+ke)]+=ve}}}}}return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(w,J.dtype,J.values)}const TV={kernelName:pg,backendName:"cpu",kernelFunc:PR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EV(s){const{inputs:t,backend:n,attrs:o}=s,{a,b:i,bias:p,preluActivationWeights:r}=t,{transposeA:h,transposeB:f,activation:u,leakyreluAlpha:l}=o;let d,x,S;const m=[];d=PR({inputs:{a,b:i},attrs:{transposeA:h,transposeB:f},backend:n}),p&&(x=bc({inputs:{a:d,b:p},backend:n}),m.push(d),d=x),u&&(S=Zm(n,d,u,r,l),m.push(d),d=S);for(const b of m)n.disposeIntermediateTensorInfo(b);return d}const jV={kernelName:Im,backendName:"cpu",kernelFunc:EV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IV=Un(hh,s=>Math.acos(s)),AV={kernelName:hh,backendName:"cpu",kernelFunc:IV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RV=Un(fh,s=>Math.acosh(s)),NV={kernelName:fh,backendName:"cpu",kernelFunc:RV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DV(s){const{inputs:t,backend:n}=s,o=t;Bt(t,"addN");const a=o.map(r=>n.data.get(r.dataId).values),i=fn(o[0].shape,o[0].dtype),p=i.values;for(let r=0;r<o.length;r++){const h=a[r];for(let f=0;f<p.length;f++)p[f]+=h[f]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const MV={kernelName:h1,backendName:"cpu",kernelFunc:DV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OV(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o;Bt(a,"all");const r=pn(i,a.shape);let h=r;const f=br(h,a.shape.length);let u=a;f!=null&&(u=Us({inputs:{x:a},backend:n,attrs:{perm:f}}),h=Rr(h.length,a.shape.length)),fs("all",h,u.shape.length);const[l,d]=ss(u.shape,h),x=at(d),S=xs(at(l),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<S.length;++b){const g=b*x;let w=m[g];for(let _=0;_<x;++_){const C=m[g+_];w=w&&C}S[b]=w}f!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(l,u.dtype,S);if(p){const b=Fr(l,r),g=or({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),g}return y}const $V={kernelName:f1,backendName:"cpu",kernelFunc:OV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LV(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o;Bt(a,"any");const r=pn(i,a.shape);let h=r;const f=br(h,a.shape.length);let u=a;f!=null&&(u=Us({inputs:{x:a},backend:n,attrs:{perm:f}}),h=Rr(h.length,a.shape.length)),fs("any",h,u.shape.length);const[l,d]=ss(u.shape,h),x=at(d),S=xs(at(l),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<S.length;++b){const g=b*x;let w=m[g];for(let _=0;_<x;++_){const C=m[g+_];w=w||C}S[b]=w}f!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(l,u.dtype,S);if(p){const b=Fr(l,r),g=or({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),g}return y}const FV={kernelName:p1,backendName:"cpu",kernelFunc:LV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PV(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i}=o;Bt(a,"argMax");let p=pn(i,a.shape);const r=br(p,a.shape.length);let h=a;const f=[];r!=null&&(h=Us({inputs:{x:a},backend:n,attrs:{perm:r}}),f.push(h),p=Rr(p.length,h.shape.length)),p=[p[0]],fs("argMax",p,h.shape.length);const[u,l]=ss(h.shape,p),d=at(u),x=xs(d,"int32"),S=at(l),m=n.data.get(h.dataId).values;for(let y=0;y<x.length;++y){const b=y*S;let g=m[b],w=0;for(let _=0;_<S;++_){const C=m[b+_];C>g&&(g=C,w=_)}x[y]=w}return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(u,"int32",x)}const BV={kernelName:cg,backendName:"cpu",kernelFunc:PV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UV(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i}=o;Bt(a,"argMin");let p=pn(i,a.shape);const r=br(p,a.shape.length);let h=a;const f=[];r!=null&&(h=Us({inputs:{x:a},backend:n,attrs:{perm:r}}),f.push(h),p=Rr(p.length,h.shape.length)),p=[p[0]],fs("argMin",p,h.shape.length);const[u,l]=ss(h.shape,p),d=at(u),x=xs(d,"int32"),S=at(l),m=n.data.get(h.dataId).values;for(let y=0;y<x.length;++y){const b=y*S;let g=m[b],w=0;for(let _=0;_<S;++_){const C=m[b+_];C<g&&(g=C,w=_)}x[y]=w}return f.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(u,"int32",x)}const zV={kernelName:dg,backendName:"cpu",kernelFunc:UV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VV=Un(ph,s=>Math.asin(s)),GV={kernelName:ph,backendName:"cpu",kernelFunc:VV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WV=Un(mh,s=>Math.asinh(s)),HV={kernelName:mh,backendName:"cpu",kernelFunc:WV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qV=Un(gh,s=>Math.atan(s)),XV={kernelName:gh,backendName:"cpu",kernelFunc:qV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YV=Dr((s,t)=>Math.atan2(s,t)),KV=Xr(bh,YV),ZV={kernelName:bh,backendName:"cpu",kernelFunc:KV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QV=Un(yh,s=>Math.atanh(s)),JV={kernelName:yh,backendName:"cpu",kernelFunc:QV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nw(s,t,n,o,a,i){const p=a.strideHeight,r=a.strideWidth,h=a.dilationHeight,f=a.dilationWidth,u=a.effectiveFilterHeight,l=a.effectiveFilterWidth,d=a.padInfo.top,x=a.padInfo.left,S=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=fn(a.outShape,n),y=m.values,b=a.outShape[1]*a.outShape[2]*a.outShape[3],g=a.outShape[2]*a.outShape[3],w=a.outShape[3];for(let _=0;_<a.batchSize;++_){const C=_*b,k=_*o[0];for(let E=0;E<a.inChannels;++E)for(let j=0;j<a.outHeight;++j){const A=j*p-d,O=Math.max(0,A),N=Math.min(a.inHeight,u+A),D=C+j*g;for(let z=0;z<a.outWidth;++z){const $=z*r-x,B=Math.max(0,$),F=Math.min(a.inWidth,l+$);let G=S,W=0,L=0;for(let Y=O;Y<N;Y+=h){const Z=k+Y*o[1];for(let J=B;J<F;J+=f){const ne=Z+J*o[2],se=s[ne+E];i==="max"&&se>G?G=se:i==="avg"&&(W+=se,L++)}if(isNaN(G))break}const V=D+z*w+E;y[V]=i==="avg"?W/L:G}}}return m}function BR(s,t,n,o,a=!1,i=!1){const p=fn(o.outShape,"int32"),r=o.strideHeight,h=o.strideWidth,f=o.dilationHeight,u=o.dilationWidth,l=o.effectiveFilterHeight,d=o.effectiveFilterWidth,x=o.padInfo.top,S=o.padInfo.left,m=fn(t,n,s);for(let y=0;y<o.batchSize;++y)for(let b=0;b<o.inChannels;++b)for(let g=0;g<o.outHeight;++g){const w=g*r-x;let _=w;for(;_<0;)_+=f;const C=Math.min(o.inHeight,l+w);for(let k=0;k<o.outWidth;++k){const E=k*h-S;let j=E;for(;j<0;)j+=u;const A=Math.min(o.inWidth,d+E);let O=Number.NEGATIVE_INFINITY,N=-1;for(let D=_;D<C;D+=f){const z=D-w;for(let $=j;$<A;$+=u){const B=$-E,F=m.get(y,D,$,b);F>O&&(O=F,a?N=i?((y*o.inHeight+D)*o.inWidth+$)*o.inChannels+b:(D*o.inWidth+$)*o.inChannels+b:N=z*d+B)}}p.set(N,y,g,k,b)}}return p}function UR(s,t,n,o,a,i){const p=a.strideDepth,r=a.strideHeight,h=a.strideWidth,f=a.dilationDepth,u=a.dilationHeight,l=a.dilationWidth,d=a.effectiveFilterDepth,x=a.effectiveFilterHeight,S=a.effectiveFilterWidth,m=a.padInfo.front,y=a.padInfo.top,b=a.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=fn(a.outShape,n),_=w.values,C=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],E=a.outShape[3]*a.outShape[4],j=a.outShape[4];for(let A=0;A<a.batchSize;++A){const O=A*C,N=A*o[0];for(let D=0;D<a.inChannels;++D)for(let z=0;z<a.outDepth;++z){const $=z*p-m;let B=$;for(;B<0;)B+=f;const F=Math.min(a.inDepth,d+$),G=O+z*k;for(let W=0;W<a.outHeight;++W){const L=W*r-y;let V=L;for(;V<0;)V+=u;const Y=Math.min(a.inHeight,x+L),Z=G+W*E;for(let J=0;J<a.outWidth;++J){const ne=J*h-b;let se=ne;for(;se<0;)se+=l;const ie=Math.min(a.inWidth,S+ne),X=Z+J*j;let Q=g,re=0,ce=0;for(let fe=B;fe<F;fe+=f){const oe=N+fe*o[1];for(let me=V;me<Y;me+=u){const we=oe+me*o[2];for(let ke=se;ke<ie;ke+=l){const ve=we+ke*o[3],_e=s[ve+D];if(i==="max"&&_e>Q?Q=_e:i==="avg"&&(re+=_e,ce++),isNaN(Q))break}if(isNaN(Q))break}if(isNaN(Q))break}const he=X+D;_[he]=i==="avg"?re/Math.max(ce,1):Q}}}}return w}function eG(s,t){const n=fn(t.outShape,"int32"),o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,p=t.dilationDepth,r=t.dilationHeight,h=t.dilationWidth,f=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=t.padInfo.front,x=t.padInfo.top,S=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let y=0;y<t.inChannels;++y)for(let b=0;b<t.outDepth;++b){const g=b*o-d;let w=g;for(;w<0;)w+=p;const _=Math.min(t.inDepth,f+g);for(let C=0;C<t.outHeight;++C){const k=C*a-x;let E=k;for(;E<0;)E+=r;const j=Math.min(t.inHeight,u+k);for(let A=0;A<t.outWidth;++A){const O=A*i-S;let N=O;for(;N<0;)N+=h;const D=Math.min(t.inWidth,l+O);let z=Number.NEGATIVE_INFINITY,$=-1;for(let B=w;B<_;B+=p){const F=B-g;for(let G=E;G<j;G+=r){const W=G-k;for(let L=N;L<D;L+=h){const V=L-O,Y=s.get(m,B,G,L,y);Y>=z&&(z=Y,$=F*u*l+W*u+V)}}}n.set($,m,b,C,A,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t;Bt(a,"avgPool");const{filterSize:i,strides:p,pad:r,dimRoundingMode:h}=o,f=1;ye(Ss(p,f),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${p} and dilations '${f}'`);const u=$o(a.shape,i,p,f,r,h);let l;if(u.filterWidth===1&&u.filterHeight===1&&$n(u.inShape,u.outShape))l=Da({inputs:{x:a},backend:n});else{const d=n.data.get(a.dataId).values,x=Vt(a.shape),S=Nw(d,a.shape,a.dtype,x,u,"avg");l=n.makeTensorInfo(u.outShape,a.dtype,S.values)}return l}const nG={kernelName:hg,backendName:"cpu",kernelFunc:tG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{filterSize:i,strides:p,pad:r,dimRoundingMode:h,dataFormat:f}=o;Bt(a,"avgPool3d");const u=li(a.shape,i,p,1,r,h,f),l=n.data.get(a.dataId).values,d=UR(l,a.shape,a.dtype,Vt(a.shape),u,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}const sG={kernelName:fg,backendName:"cpu",kernelFunc:rG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oG(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,input:i}=t,{filterSize:p,strides:r,pad:h,dimRoundingMode:f}=o;Bt([a,i],"avgPool3DGrad");const u=li(i.shape,p,r,1,h,f),l=u.strideDepth,d=u.strideHeight,x=u.strideWidth,S=u.filterDepth,m=u.filterHeight,y=u.filterWidth,b=u.dilationDepth,g=u.dilationHeight,w=u.dilationWidth,_=u.effectiveFilterDepth,C=u.effectiveFilterHeight,k=u.effectiveFilterWidth,E=_-1-u.padInfo.front,j=k-1-u.padInfo.left,A=C-1-u.padInfo.top,O=fn(i.shape,"float32"),N=1/(S*m*y),D=n.bufferSync(a);for(let z=0;z<u.batchSize;++z)for(let $=0;$<u.inChannels;++$)for(let B=0;B<u.inDepth;++B)for(let F=0;F<u.inHeight;++F)for(let G=0;G<u.inWidth;++G){const W=B-E,L=F-A,V=G-j;let Y=0;for(let Z=0;Z<_;Z+=b){const J=(W+Z)/l;if(!(J<0||J>=u.outDepth||Math.floor(J)!==J))for(let ne=0;ne<C;ne+=g){const se=(L+ne)/d;if(!(se<0||se>=u.outHeight||Math.floor(se)!==se))for(let ie=0;ie<k;ie+=w){const X=(V+ie)/x;if(X<0||X>=u.outWidth||Math.floor(X)!==X)continue;const Q=D.get(z,J,se,X,$);Y+=Q}}}O.set(Y*N,z,B,F,G,$)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const aG={kernelName:g1,backendName:"cpu",kernelFunc:oG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iG(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,input:i}=t,p=i;Bt([a,i],"avgPoolGrad");const{filterSize:r,strides:h,pad:f}=o,u=$o(p.shape,r,h,1,f),l=u.strideHeight,d=u.strideWidth,x=u.filterHeight,S=u.filterWidth,m=u.dilationHeight,y=u.dilationWidth,b=u.effectiveFilterHeight,g=u.effectiveFilterWidth,w=g-1-u.padInfo.left,_=b-1-u.padInfo.top,C=fn(p.shape,"float32"),k=1/(x*S),E=n.data.get(a.dataId).values,j=fn(a.shape,"float32",E);for(let A=0;A<u.batchSize;++A)for(let O=0;O<u.inChannels;++O)for(let N=0;N<u.inHeight;++N)for(let D=0;D<u.inWidth;++D){const z=N-_,$=D-w;let B=0;for(let F=0;F<b;F+=m){const G=(z+F)/l;if(!(G<0||G>=u.outHeight||Math.floor(G)!==G))for(let W=0;W<g;W+=y){const L=($+W)/d;if(L<0||L>=u.outWidth||Math.floor(L)!==L)continue;const V=j.get(A,G,L,O);B+=V}}C.set(B*k,A,N,D,O)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const lG={kernelName:m1,backendName:"cpu",kernelFunc:iG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,scale:i,offset:p,mean:r,variance:h}=t;ye(r.shape.length===h.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ye(p==null||r.shape.length===p.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ye(i==null||r.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Bt([a,r,h,i,p],"batchNorm");let{varianceEpsilon:f}=o;f==null&&(f=.001);const u=n.data.get(a.dataId).values,l=n.data.get(r.dataId).values,d=n.data.get(h.dataId).values,x=i?n.data.get(i.dataId).values:new Float32Array([1]),S=p?n.data.get(p.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),y=S.length,b=x.length,g=d.length,w=l.length;let _=0,C=0,k=0,E=0;for(let j=0;j<u.length;++j)m[j]=S[_++]+(u[j]-l[C++])*x[k++]/Math.sqrt(d[E++]+f),_>=y&&(_=0),C>=w&&(C=0),k>=b&&(k=0),E>=g&&(E=0);return n.makeTensorInfo(a.shape,a.dtype,m)}const cG={kernelName:Tg,backendName:"cpu",kernelFunc:uG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{blockShape:i,crops:p}=o;Bt([a],"batchToSpaceND");const r=i.reduce((b,g)=>b*g),h=mf(a.shape,i,r),f=gf(h.length,i.length),u=yf(a.shape,i,r),l=zx(p,i.length),d=Vx(u,p,i.length),x=or({inputs:{x:a},backend:n,attrs:{shape:h}}),S=Us({inputs:{x},backend:n,attrs:{perm:f}}),m=or({inputs:{x:S},backend:n,attrs:{shape:u}}),y=nu({inputs:{x:m},backend:n,attrs:{begin:l,size:d}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(m),y}const hG={kernelName:mg,backendName:"cpu",kernelFunc:dG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,weights:i}=t,{size:p}=o,r=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,f=Ew(r,h,i.dtype,i.shape,p);return n.makeTensorInfo([p],i.dtype,f)}const pG={kernelName:y1,backendName:"cpu",kernelFunc:fG};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mG(s){const{inputs:t,backend:n}=s,{s0:o,s1:a}=t,i=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,r=on(Array.from(i),Array.from(p));return n.makeTensorInfo([r.length],"int32",Int32Array.from(r))}const gG={kernelName:fT,backendName:"cpu",kernelFunc:mG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yG=Un(wh,(s,t)=>{const n=t;return s>n.clipValueMax?n.clipValueMax:s<n.clipValueMin?n.clipValueMin:s}),bG={kernelName:wh,backendName:"cpu",kernelFunc:yG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vG=s=>{const{x:t}=s.inputs,n=s.backend,o=new Float32Array(at(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,p=a.complexTensorInfos.imag,r=n.data.get(i.dataId).values,h=n.data.get(p.dataId).values;for(let f=0;f<r.length;f++){const u=r[f],l=h[f];o[f]=Math.hypot(u,l)}return n.makeOutput(o,t.shape,"float32")},xG={kernelName:gg,backendName:"cpu",kernelFunc:vG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vc(s){const{inputs:t,backend:n}=s,{input:o}=t,a=n.data.get(o.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}const wG={kernelName:O1,backendName:"cpu",kernelFunc:vc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xc(s){const{inputs:t,backend:n,attrs:o}=s,{axis:a}=o,i=pn(a,t[0].shape)[0],p=t.map(m=>m.shape);Px(p,i);let r=ka(t.map(m=>m.shape),i);if(at(r)===0)return n.makeTensorInfo(r,t[0].dtype,[]);const h=t.filter(m=>at(m.shape)>0);if(h.length===1)return Da({inputs:{x:h[0]},backend:n});if(h[0].dtype==="complex64"){const m=h.map(_=>tu({inputs:{input:_},backend:n})),y=h.map(_=>vc({inputs:{input:_},backend:n})),b=xc({inputs:m,backend:n,attrs:{axis:i}}),g=xc({inputs:y,backend:n,attrs:{axis:i}}),w=Ks({inputs:{real:b,imag:g},backend:n});return m.forEach(_=>n.disposeIntermediateTensorInfo(_)),y.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),w}const f=h.map(m=>{const b=[-1,at(m.shape.slice(i))];return or({inputs:{x:m},backend:n,attrs:{shape:b}})}),u=f.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));r=ka(f.map(m=>m.shape),1);const l=f[0].shape[0]===1,d=HA(u,r,t[0].dtype,l),x=ka(h.map(m=>m.shape),i),S=n.makeTensorInfo(x,t[0].dtype,d);return f.forEach(m=>n.disposeIntermediateTensorInfo(m)),S}const SG={kernelName:yg,backendName:"cpu",kernelFunc:xc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zR(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i}=t,{strides:p,pad:r,dataFormat:h,dilations:f,dimRoundingMode:u}=o;Bt([a,i],"conv2d");const l=ui(h),d=hs(a.shape,i.shape,p,f,r,u,!1,l),x=d.filterHeight,S=d.filterWidth,m=d.dilationHeight,y=d.dilationWidth,b=d.padInfo.left,g=d.padInfo.top,w=d.dataFormat==="channelsLast",_=new ds(d.outShape,a.dtype),C=Vt(a.shape),k=Vt(i.shape),E=C[0],j=w?C[1]:C[2],A=w?C[2]:1,O=w?1:C[1],N=_.strides[0],D=w?_.strides[1]:_.strides[2],z=w?_.strides[2]:1,$=w?1:_.strides[1],B=n.data.get(a.dataId).values,F=n.data.get(i.dataId).values,G=_.values;for(let W=0;W<d.batchSize;++W){const L=W*E,V=W*N;for(let Y=0;Y<d.outHeight;++Y){const Z=V+Y*D,J=Y*d.strideHeight-g;for(let ne=0;ne<x;++ne){const se=J+ne*m;if(se<0||se>=d.inHeight)continue;const ie=ne*k[0],X=L+se*j;for(let Q=0;Q<d.outWidth;++Q){const re=Z+Q*z,ce=Q*d.strideWidth-b;for(let he=0;he<S;++he){const fe=ce+he*y;if(fe<0||fe>=d.inWidth)continue;const oe=ie+he*k[1],me=X+fe*A;let we=oe;for(let ke=0;ke<d.inChannels;++ke){const ve=B[me+ke*O];for(let _e=0;_e<d.outChannels;++_e)G[re+_e*$]+=ve*F[we+_e];we+=d.outChannels}}}}}}return n.makeTensorInfo(_.shape,_.dtype,G)}const _G={kernelName:bg,backendName:"cpu",kernelFunc:zR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,dy:i}=t,{strides:p,pad:r,dataFormat:h,dimRoundingMode:f,filterShape:u}=o;Bt([a,i],"conv2dBackpropFilter");const l=ui(h),d=hs(a.shape,u,p,1,r,f,!1,l),{strideHeight:x,strideWidth:S,filterHeight:m,filterWidth:y}=d,b=d.dataFormat==="channelsLast",g=new ds(d.filterShape,"float32"),w=d.padInfo.left,_=d.padInfo.top,C=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,E=new ds(a.shape,a.dtype,C),j=new ds(i.shape,i.dtype,k);for(let A=0;A<m;++A){const O=Math.max(0,Math.ceil((_-A)/x)),N=Math.min(d.outHeight,(d.inHeight+_-A)/x);for(let D=0;D<y;++D){const z=Math.max(0,Math.ceil((w-D)/S)),$=Math.min(d.outWidth,(d.inWidth+w-D)/S);for(let B=0;B<d.inChannels;++B)for(let F=0;F<d.outChannels;++F){let G=0;for(let W=0;W<d.batchSize;++W)for(let L=O;L<N;++L){const V=A+L*x-_;for(let Y=z;Y<$;++Y){const Z=D+Y*S-w;b?G+=E.get(W,V,Z,B)*j.get(W,L,Y,F):G+=E.get(W,B,V,Z)*j.get(W,F,L,Y)}}g.set(G,A,D,B,F)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const kG={kernelName:x1,backendName:"cpu",kernelFunc:CG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TG(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,filter:i}=t,{inputShape:p,strides:r,pad:h,dataFormat:f,dimRoundingMode:u}=o;Bt([a,i],"conv2dBackpropInput");const l=Vt(i.shape),d=Vt(a.shape);let x=ui(f);const S=hs(p,i.shape,r,1,h,u,!1,x),m=new ds(S.inShape,"float32"),y=m.values,b=n.data.get(a.dataId).values,g=n.data.get(i.dataId).values,[w,_,C]=l,{batchSize:k,filterHeight:E,filterWidth:j,inChannels:A,inHeight:O,inWidth:N,outChannels:D,outHeight:z,outWidth:$,strideHeight:B,strideWidth:F}=S;x=S.dataFormat;const G=E-1-S.padInfo.top,W=j-1-S.padInfo.left,L=x==="channelsLast",V=m.strides[0],Y=L?m.strides[1]:m.strides[2],Z=L?m.strides[2]:1,J=L?1:m.strides[1],ne=d[0],se=L?d[1]:d[2],ie=L?d[2]:1,X=L?1:d[1];for(let Q=0;Q<k;++Q)for(let re=0;re<A;++re)for(let ce=0;ce<O;++ce){const he=ce-G,fe=Math.max(0,Math.ceil(he/B)),oe=Math.min(z,(E+he)/B);for(let me=0;me<N;++me){const we=me-W,ke=Math.max(0,Math.ceil(we/F)),ve=Math.min($,(j+we)/F);let _e=0;for(let He=fe;He<oe;++He){const ze=He*B-he;for(let st=ke;st<ve;++st){const gt=st*F-we,pt=ne*Q+se*He+ie*st,Lt=w*(E-1-ze)+_*(j-1-gt)+C*re;for(let _t=0;_t<D;++_t){const xe=b[pt+X*_t],We=g[Lt+_t];_e+=xe*We}}}const Me=V*Q+Y*ce+Z*me+J*re;y[Me]=_e}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const EG={kernelName:vg,backendName:"cpu",kernelFunc:TG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i}=t,{strides:p,pad:r,dilations:h}=o;Bt([a,i],"conv3d");const f=rl(a.shape,i.shape,p,h,r),{filterDepth:u,filterHeight:l,filterWidth:d,dilationDepth:x,dilationHeight:S,dilationWidth:m,padInfo:y}=f,b=y.front,g=y.left,w=y.top,_=new ds(f.outShape,a.dtype),C=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,E=_.values,j=Vt(a.shape),A=Vt(i.shape);for(let O=0;O<f.batchSize;++O){const N=O*j[0],D=O*_.strides[0];for(let z=0;z<f.outDepth;++z){const $=D+z*_.strides[1],B=z*f.strideDepth-b;for(let F=0;F<u;++F){const G=B+F*x;if(G<0||G>=f.inDepth)continue;const W=F*A[0],L=N+G*j[1];for(let V=0;V<f.outHeight;++V){const Y=$+V*_.strides[2],Z=V*f.strideHeight-w;for(let J=0;J<l;++J){const ne=Z+J*S;if(ne<0||ne>=f.inHeight)continue;const se=W+J*A[1],ie=L+ne*j[2];for(let X=0;X<f.outWidth;++X){const Q=Y+X*f.outChannels,re=X*f.strideWidth-g;for(let ce=0;ce<d;++ce){const he=re+ce*m;if(he<0||he>=f.inWidth)continue;const fe=se+ce*A[2],oe=ie+he*f.inChannels;let me=fe;for(let we=0;we<f.inChannels;++we){const ke=C[oe+we];for(let ve=0;ve<f.outChannels;++ve)E[Q+ve]+=ke*k[me+ve];me+=f.outChannels}}}}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const IG={kernelName:xg,backendName:"cpu",kernelFunc:jG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,dy:i}=t,{strides:p,pad:r,filterShape:h}=o;Bt([a,i],"conv3dBackpropFilterV2");const f=Vt(a.shape),u=Vt(i.shape),l=rl(a.shape,h,p,1,r),d=l.strideDepth,x=l.strideHeight,S=l.strideWidth,m=l.filterDepth,y=l.filterHeight,b=l.filterWidth,g=new ds(l.filterShape,"float32"),w=g.values,[_,C,k,E]=g.strides,j=n.data.get(i.dataId).values,[A,O,N,D]=u,z=n.data.get(a.dataId).values,[$,B,F,G]=f,W=l.padInfo.front,L=l.padInfo.left,V=l.padInfo.top;for(let Y=0;Y<m;++Y){const Z=Math.max(0,Math.ceil((W-Y)/d)),J=Math.min(l.outDepth,(l.inDepth+W-Y)/d),ne=Y*_;for(let se=0;se<y;++se){const ie=Math.max(0,Math.ceil((V-se)/x)),X=Math.min(l.outHeight,(l.inHeight+V-se)/x),Q=se*C+ne;for(let re=0;re<b;++re){const ce=Math.max(0,Math.ceil((L-re)/S)),he=Math.min(l.outWidth,(l.inWidth+L-re)/S),fe=re*k+Q;for(let oe=0;oe<l.inChannels;++oe){const me=oe*E+fe;for(let we=0;we<l.outChannels;++we){let ke=0;for(let ve=0;ve<l.batchSize;++ve){const _e=ve*$,Me=ve*A;for(let He=Z;He<J;++He){const st=(Y+He*d-W)*B+_e,gt=He*O+Me;for(let pt=ie;pt<X;++pt){const _t=(se+pt*x-V)*F+st,xe=pt*N+gt;for(let We=ce;We<he;++We){const dt=(re+We*S-L)*G+_t,Ct=We*D+xe;ke+=z[dt+oe]*j[Ct+we]}}}}w[me+we]=ke}}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const RG={kernelName:w1,backendName:"cpu",kernelFunc:AG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NG(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,filter:i}=t,{pad:p,strides:r,inputShape:h}=o;Bt([a],"conv3dBackpropInputV2");const f=Vt(a.shape),u=Vt(i.shape),l=rl(h,i.shape,r,1,p),d=new ds(l.inShape,"float32"),x=d.values,[S,m,y,b]=d.strides,g=n.data.get(a.dataId).values,[w,_,C,k]=f,E=n.data.get(i.dataId).values,[j,A,O,N]=u,{batchSize:D,filterDepth:z,filterHeight:$,filterWidth:B,inChannels:F,inDepth:G,inHeight:W,inWidth:L,outChannels:V,outDepth:Y,outHeight:Z,outWidth:J,strideDepth:ne,strideHeight:se,strideWidth:ie}=l,X=z-1-l.padInfo.front,Q=$-1-l.padInfo.top,re=B-1-l.padInfo.left;for(let ce=0;ce<D;++ce)for(let he=0;he<F;++he)for(let fe=0;fe<G;++fe){const oe=fe-X,me=Math.max(0,Math.ceil(oe/ne)),we=Math.min(Y,(z+oe)/ne);for(let ke=0;ke<W;++ke){const ve=ke-Q,_e=Math.max(0,Math.ceil(ve/se)),Me=Math.min(Z,($+ve)/se);for(let He=0;He<L;++He){const ze=He-re,st=Math.max(0,Math.ceil(ze/ie)),gt=Math.min(J,(B+ze)/ie);let pt=0;for(let Lt=me;Lt<we;++Lt){const _t=Lt*ne-oe;for(let xe=_e;xe<Me;++xe){const We=xe*se-ve;for(let Ve=st;Ve<gt;++Ve){const dt=Ve*ie-ze,Ct=w*ce+_*Lt+C*xe+k*Ve,Ft=j*(z-1-_t)+A*($-1-We)+O*(B-1-dt)+N*he;for(let kt=0;kt<V;++kt){const Tt=g[Ct+kt],ue=E[Ft+kt];pt+=Tt*ue}}}}x[S*ce+m*fe+y*ke+b*He+he]=pt}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}const DG={kernelName:S1,backendName:"cpu",kernelFunc:NG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MG=Un(Sh,s=>Math.cos(s)),OG={kernelName:Sh,backendName:"cpu",kernelFunc:MG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $G=Un(_h,s=>Math.cosh(s)),LG={kernelName:_h,backendName:"cpu",kernelFunc:$G};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FG(s){const{inputs:t,backend:n,attrs:o}=s,{image:a,boxes:i,boxInd:p}=t,{cropSize:r,method:h,extrapolationValue:f}=o,[u,l,d,x]=a.shape,S=i.shape[0],[m,y]=r,b=fn([S,m,y,x],"float32"),g=n.data.get(i.dataId).values,w=n.data.get(p.dataId).values,_=n.data.get(a.dataId).values,C=Vt(a.shape),k=Vt(b.shape);for(let E=0;E<S;E++){const j=E*4,A=g[j],O=g[j+1],N=g[j+2],D=g[j+3],z=w[E];if(z>=u)continue;const $=m>1?(N-A)*(l-1)/(m-1):0,B=y>1?(D-O)*(d-1)/(y-1):0;for(let F=0;F<m;F++){const G=m>1?A*(l-1)+F*$:.5*(A+N)*(l-1);if(G<0||G>l-1){for(let W=0;W<y;W++)for(let L=0;L<x;L++){const V=L+W*k[2]+F*k[1]+E*k[0];b.values[V]=f}continue}if(h==="bilinear"){const W=Math.floor(G),L=Math.ceil(G),V=G-W;for(let Y=0;Y<y;Y++){const Z=y>1?O*(d-1)+Y*B:.5*(O+D)*(d-1);if(Z<0||Z>d-1){for(let ie=0;ie<x;ie++){const X=ie+Y*k[2]+F*k[1]+E*k[0];b.values[X]=f}continue}const J=Math.floor(Z),ne=Math.ceil(Z),se=Z-J;for(let ie=0;ie<x;ie++){let X=ie+J*C[2]+W*C[1]+z*C[0];const Q=_[X];X=ie+ne*C[2]+W*C[1]+z*C[0];const re=_[X];X=ie+J*C[2]+L*C[1]+z*C[0];const ce=_[X];X=ie+ne*C[2]+L*C[1]+z*C[0];const he=_[X],fe=Q+(re-Q)*se,oe=ce+(he-ce)*se;X=ie+Y*k[2]+F*k[1]+E*k[0],b.values[X]=fe+(oe-fe)*V}}}else for(let W=0;W<y;++W){const L=y>1?O*(d-1)+W*B:.5*(O+D)*(d-1);if(L<0||L>d-1){for(let Z=0;Z<x;Z++){const J=Z+W*k[2]+F*k[1]+E*k[0];b.values[J]=f}continue}const V=Math.round(L),Y=Math.round(G);for(let Z=0;Z<x;Z++){const J=Z+V*C[2]+Y*C[1]+z*C[0],ne=Z+W*k[2]+F*k[1]+E*k[0];b.values[ne]=_[J]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const PG={kernelName:C1,backendName:"cpu",kernelFunc:FG};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,exclusive:p,reverse:r}=o;Bt(a,"cumprod");const h=br([i],a.shape.length);let f=a;h!=null&&(f=Us({inputs:{x:a},backend:n,attrs:{perm:h}}));const u=Rr(1,a.shape.length)[0];if(u!==f.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${f.shape.length-1} but got axis=${u}`);const l=Qs(f.dtype,"int32"),d=u1(at(f.shape),l),x=n.data.get(f.dataId).values,S=f.shape[f.shape.length-1],m=r?(b,g)=>b+S-g-1:(b,g)=>b+g;for(let b=0;b<x.length;b+=S)for(let g=0;g<S;g++){const w=m(b,g);if(g===0)d[w]=p?1:x[w];else{const _=m(b,g-1);d[w]=p?x[_]*d[_]:x[w]*d[_]}}const y=n.makeTensorInfo(f.shape,l,d);if(h!=null){const b=sl(h),g=Us({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(f),g}return y}const UG={kernelName:_1,backendName:"cpu",kernelFunc:BG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,exclusive:p,reverse:r}=o;Bt(a,"cumsum");const h=br([i],a.shape.length);let f=a;h!=null&&(f=Us({inputs:{x:a},backend:n,attrs:{perm:h}}));const u=Rr(1,a.shape.length)[0];if(u!==f.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${f.shape.length-1} but got axis=${u}`);const l=Qs(f.dtype,"int32"),d=xs(at(f.shape),l),x=n.data.get(f.dataId).values,S=f.shape[f.shape.length-1],m=r?(b,g)=>b+S-g-1:(b,g)=>b+g;for(let b=0;b<x.length;b+=S)for(let g=0;g<S;g++){const w=m(b,g);if(g===0)d[w]=p?0:x[w];else{const _=m(b,g-1);d[w]=p?x[_]+d[_]:x[w]+d[_]}}const y=n.makeTensorInfo(f.shape,l,d);if(h!=null){const b=sl(h),g=Us({inputs:{x:y},backend:n,attrs:{perm:b}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(f),g}return y}const VG={kernelName:wg,backendName:"cpu",kernelFunc:zG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,weights:i}=t,{size:p,binaryOutput:r}=o;if(a.shape.length===1){const h=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,u=Ew(h,f,i.dtype,i.shape,p);return n.makeTensorInfo([p],i.dtype,u)}else if(a.shape.length===2){const h=n.bufferSync(a),f=n.bufferSync(i),u=VA(h,f,p,r);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const WG={kernelName:k1,backendName:"cpu",kernelFunc:GG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{blockSize:i,dataFormat:p}=o;ye(p==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${p}`);const r=a.shape[0],h=a.shape[1],f=a.shape[2],u=a.shape[3],l=h*i,d=f*i,x=u/(i*i),S=n.data.get(a.dataId).values,m=new Float32Array(r*l*d*x);let y=0;for(let b=0;b<r;++b)for(let g=0;g<l;++g){const w=Math.floor(g/i),_=g%i;for(let C=0;C<d;++C){const k=Math.floor(C/i),E=C%i,j=(_*i+E)*x;for(let A=0;A<x;++A){const N=A+j+u*(k+f*(w+h*b));m[y++]=S[N]}}}return n.makeTensorInfo([r,l,d,x],a.dtype,m)}const qG={kernelName:T1,backendName:"cpu",kernelFunc:HG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VR(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i}=t,{strides:p,pad:r,dilations:h,dimRoundingMode:f}=o;Bt([a,i],"depthwiseConv2DNative");const u=Vt(a.shape),l=Vt(i.shape);let d=h;d==null&&(d=[1,1]),ye(Ss(p,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${p} and dilations '${d}'`);const x=hs(a.shape,i.shape,p,d,r,f,!0),{filterHeight:S,filterWidth:m,dilationHeight:y,dilationWidth:b,padInfo:g}=x,w=g.left,_=g.top,C=x.outChannels/x.inChannels,k=new ds(x.outShape,a.dtype),E=n.data.get(a.dataId).values,j=n.data.get(i.dataId).values,A=k.values;for(let O=0;O<x.batchSize;++O){const N=O*u[0],D=O*k.strides[0];for(let z=0;z<x.outHeight;++z){const $=D+z*k.strides[1],B=z*x.strideHeight-_;for(let F=0;F<S;++F){const G=B+F*y;if(G<0||G>=x.inHeight)continue;const W=F*l[0],L=N+G*u[1];for(let V=0;V<x.outWidth;++V){const Y=$+V*k.strides[2],Z=V*x.strideWidth-w;for(let J=0;J<m;++J){const ne=Z+J*b;if(ne<0||ne>=x.inWidth)continue;const se=W+J*l[1],ie=L+ne*x.inChannels;let X=Y,Q=se;for(let re=0;re<x.inChannels;++re){const ce=E[ie+re];for(let he=0;he<C;++he)A[X+he]+=ce*j[Q+he];X+=C,Q+=C}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const XG={kernelName:Sg,backendName:"cpu",kernelFunc:VR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YG(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,dy:i}=t,{strides:p,dilations:r,pad:h,dimRoundingMode:f,filterShape:u}=o;Bt([a,i],"depthwiseConv2dNativeBackpropFilter");const l=hs(a.shape,u,p,r,h,f,!0),{strideHeight:d,strideWidth:x,filterHeight:S,filterWidth:m}=l,y=new ds(l.filterShape,"float32"),b=l.padInfo.left,g=l.padInfo.top,w=l.outChannels/l.inChannels,_=n.data.get(a.dataId).values,C=new ds(a.shape,a.dtype,_),k=n.data.get(i.dataId).values,E=new ds(i.shape,i.dtype,k);for(let j=0;j<S;++j){const A=Math.max(0,Math.ceil((g-j)/d)),O=Math.min(l.outHeight,(l.inHeight+g-j)/d);for(let N=0;N<m;++N){const D=Math.max(0,Math.ceil((b-N)/x)),z=Math.min(l.outWidth,(l.inWidth+b-N)/x);for(let $=0;$<l.outChannels;++$){const B=Math.trunc($/w),F=$%w;let G=0;for(let W=0;W<l.batchSize;++W)for(let L=A;L<O;++L){const V=j+L*d-g;for(let Y=D;Y<z;++Y){const Z=N+Y*x-b;G+=C.get(W,V,Z,B)*E.get(W,L,Y,$)}}y.set(G,j,N,B,F)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const KG={kernelName:E1,backendName:"cpu",kernelFunc:YG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZG(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,filter:i}=t,{strides:p,dilations:r,pad:h,dimRoundingMode:f,inputShape:u}=o;Bt([a,i],"depthwiseConv2DNativeBackpropInput");const l=Vt(a.shape),d=Vt(i.shape),x=hs(u,i.shape,p,r,h,f,!0),S=new ds(x.inShape,"float32"),m=S.values,[y,b,g]=S.strides,w=n.data.get(a.dataId).values,[_,C,k]=l,E=n.data.get(i.dataId).values,[j,A,O]=d,{batchSize:N,filterHeight:D,filterWidth:z,inChannels:$,inHeight:B,inWidth:F,outChannels:G,outHeight:W,outWidth:L,strideHeight:V,strideWidth:Y}=x,Z=D-1-x.padInfo.top,J=z-1-x.padInfo.left,ne=G/$;for(let se=0;se<N;++se)for(let ie=0;ie<$;++ie)for(let X=0;X<B;++X){const Q=X-Z,re=Math.max(0,Math.ceil(Q/V)),ce=Math.min(W,(D+Q)/V);for(let he=0;he<F;++he){const fe=he-J,oe=Math.max(0,Math.ceil(fe/Y)),me=Math.min(L,(z+fe)/Y);let we=0;for(let ke=re;ke<ce;++ke){const ve=ke*V-Q;for(let _e=oe;_e<me;++_e){const Me=_e*Y-fe,He=_*se+C*ke+k*_e,ze=j*(D-1-ve)+A*(z-1-Me)+O*ie;for(let st=0;st<ne;++st){const gt=ie*ne+st,pt=w[He+gt],Lt=E[ze+st];we+=pt*Lt}}}m[y*se+b*X+g*he+ie]=we}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const QG={kernelName:j1,backendName:"cpu",kernelFunc:ZG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JG(s){const{inputs:t,backend:n}=s,{x:o}=t,a=at(o.shape),i=n.data.get(o.dataId).values,p=fn([a,a],o.dtype),r=p.values;for(let f=0;f<i.length;f++)r[f*a+f]=i[f];const h=[...o.shape,...o.shape];return n.makeTensorInfo(h,p.dtype,p.values)}const e8={kernelName:pT,backendName:"cpu",kernelFunc:JG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t8={kernelName:_g,backendName:"cpu",kernelFunc:({inputs:s,backend:t,attrs:n})=>{const{x:o,filter:a}=s,{strides:i,pad:p,dilations:r}=n,h=t,f=h.data.get(o.dataId).values,u=o.shape.length,l=h.data.get(a.dataId).values,d=a.shape.length,{batchSize:x,inHeight:S,inWidth:m,inChannels:y,outHeight:b,outWidth:g,padInfo:w,strideHeight:_,strideWidth:C,filterHeight:k,filterWidth:E,dilationHeight:j,dilationWidth:A,outShape:O}=cf(o.shape,a.shape,i,p,"NHWC",r),N=at(O),D=O.length,z=jr(o.dtype,N);for(let B=0;B<x;++B)for(let F=0;F<b;++F){const G=F*_-w.top;for(let W=0;W<g;++W){const L=W*C-w.left;for(let V=0;V<y;++V){let Y=Number.MIN_SAFE_INTEGER;for(let J=0;J<k;++J){const ne=G+J*j;if(ne>=0&&ne<S)for(let se=0;se<E;++se){const ie=L+se*A;if(ie>=0&&ie<m){const X=_a([B,ne,ie,V],u,Vt(o.shape)),Q=_a([J,se,V],d,Vt(a.shape)),re=f[X]+l[Q];re>Y&&(Y=re)}}}const Z=_a([B,F,W,V],D,Vt(O));z[Z]=Y}}}return{dataId:h.write(au(z,o.dtype),O,o.dtype),shape:O,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n8={kernelName:bv,backendName:"cpu",kernelFunc:({inputs:s,backend:t,attrs:n})=>{const{x:o,filter:a,dy:i}=s,{strides:p,pad:r,dilations:h}=n,f=t,u=ea(o.shape,f.data.get(o.dataId).values),l=ea(a.shape,f.data.get(a.dataId).values),{batchSize:d,inHeight:x,inWidth:S,inChannels:m,outHeight:y,outWidth:b,padInfo:g,strideHeight:w,strideWidth:_,filterHeight:C,filterWidth:k,dilationHeight:E,dilationWidth:j,outShape:A}=cf(o.shape,a.shape,p,r,"NHWC",h);ye(i.rank===A.length,()=>`Error in ${bv}, dy must have the same rank as output ${A.length}, but got ${i.rank}`);const O=ea(A,f.data.get(i.dataId).values),N=cT(a.shape,a.dtype);for(let z=0;z<d;++z)for(let $=0;$<y;++$){const B=$*w-g.top;for(let F=0;F<b;++F){const G=F*_-g.left;for(let W=0;W<m;++W){let L=Number.MIN_SAFE_INTEGER,V=0,Y=0;for(let Z=0;Z<C;++Z){const J=B+Z*E;if(J>=0&&J<x)for(let ne=0;ne<k;++ne){const se=G+ne*j;if(se>=0&&se<S){const ie=u[z][J][se][W]+l[Z][ne][W];ie>L&&(L=ie,V=Z,Y=ne)}}}N[V][Y][W]+=O[z][$][F][W]}}}return{dataId:f.write(au(N,o.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8={kernelName:yv,backendName:"cpu",kernelFunc:({inputs:s,backend:t,attrs:n})=>{const{x:o,filter:a,dy:i}=s,{strides:p,pad:r,dilations:h}=n,f=t,u=ea(o.shape,f.data.get(o.dataId).values),l=ea(a.shape,f.data.get(a.dataId).values),{batchSize:d,inHeight:x,inWidth:S,inChannels:m,outHeight:y,outWidth:b,padInfo:g,strideHeight:w,strideWidth:_,filterHeight:C,filterWidth:k,dilationHeight:E,dilationWidth:j,outShape:A}=cf(o.shape,a.shape,p,r,"NHWC",h);ye(i.rank===A.length,()=>`Error in ${yv}, dy must have the same rank as output ${A.length}, but got ${i.rank}`);const O=ea(A,f.data.get(i.dataId).values),N=cT(o.shape,o.dtype);for(let z=0;z<d;++z)for(let $=0;$<y;++$){const B=$*w-g.top;for(let F=0;F<b;++F){const G=F*_-g.left;for(let W=0;W<m;++W){let L=Number.MIN_SAFE_INTEGER,V=B<0?0:B,Y=G<0?0:G;for(let Z=0;Z<C;++Z){const J=B+Z*E;if(J>=0&&J<x)for(let ne=0;ne<k;++ne){const se=G+ne*j;if(se>=0&&se<S){const ie=u[z][J][se][W]+l[Z][ne][W];ie>L&&(L=ie,V=J,Y=se)}}}N[z][V][Y][W]+=O[z][$][F][W]}}}return{dataId:f.write(au(N,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8(s){const{inputs:t,backend:n,attrs:o}=s,{image:a}=t,{canvas:i,options:p}=o,{contextOptions:r,imageOptions:h}=p||{},f=(h==null?void 0:h.alpha)||1,u=(r==null?void 0:r.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${r.contextType} is not supported by the CPU backend.`);const l=i.getContext(u,(r==null?void 0:r.contextAttributes)||{});if(l==null)throw new Error(`Could not get the context with ${u} type.`);const[d,x]=a.shape.slice(0,2),S=a.shape.length===2?1:a.shape[2],m=n.data.get(a.dataId).values,y=a.dtype==="float32"?255:1,b=new Uint8ClampedArray(x*d*4);for(let w=0;w<d*x;++w){const _=[0,0,0,255*f];for(let k=0;k<S;k++){const E=m[w*S+k];if(a.dtype==="float32"){if(E<0||E>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${E}.`)}else if(a.dtype==="int32"&&(E<0||E>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${E}.`);S===1?(_[0]=E*y,_[1]=E*y,_[2]=E*y):_[k]=E*y}const C=w*4;b[C+0]=Math.round(_[0]),b[C+1]=Math.round(_[1]),b[C+2]=Math.round(_[2]),b[C+3]=Math.round(_[3])}i.width=x,i.height=d;const g=new ImageData(b,x,d);return l.putImageData(g,0,0),a}const o8={kernelName:gO,backendName:"cpu",kernelFunc:s8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tf(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o;Bt(a,"sum");let r;a.dtype==="bool"?r=Qi({inputs:{x:a},backend:n,attrs:{dtype:"int32"}}):r=Da({inputs:{x:a},backend:n});const h=r.shape.length,f=pn(i,r.shape),u=br(f,h);let l=f,d=r;u!=null&&(d=Us({inputs:{x:r},backend:n,attrs:{perm:u}}),l=Rr(l.length,h)),fs("sum",l,d.shape.length);const[x,S]=ss(d.shape,l),m=Qs(d.dtype,"int32");let y=Ym(n,x,m);const b=at(S),g=n.data.get(y.dataId).values,w=n.data.get(d.dataId).values;for(let _=0;_<g.length;++_){const C=_*b;let k=0;for(let E=0;E<b;++E)k+=w[C+E];g[_]=k}if(p){const _=Fr(y.shape,f),C=y;y=or({inputs:{x:y},backend:n,attrs:{shape:_}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(r),u!=null&&n.disposeIntermediateTensorInfo(d),y}const a8={kernelName:ny,backendName:"cpu",kernelFunc:Tf};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8(s){const{inputs:t,backend:n,attrs:o}=s,{equation:a}=o,i=t,{allDims:p,summedDims:r,idDims:h}=Zx(a,i.length);Jx(p.length,h,i);const{path:f,steps:u}=ew(r,h),l=u.length;let d=null,x=p.length;const S=[];for(let m=0;m<l;++m){for(const y of u[m]){const{permutationIndices:b,expandDims:g}=Qx(x,h[y]);let w;tw(b)?w=i[y]:(w=Us({inputs:{x:i[y]},backend:n,attrs:{perm:b}}),S.push(w));const _=w.shape.slice();for(let C=0;C<g.length;++C)_.splice(g[C],0,1);$n(w.shape,_)||(w=or({inputs:{x:w},backend:n,attrs:{shape:_}}),S.push(w)),d===null?d=w:(d=Ry({inputs:{a:w,b:d},backend:n}),S.push(d))}m<l-1&&(f[m]>=0&&(d=Tf({inputs:{x:d},backend:n,attrs:{axis:f[m]-(p.length-x),keepDims:!1}}),S.push(d)),x--)}for(const m of S)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const l8={kernelName:I1,backendName:"cpu",kernelFunc:i8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(s){const{inputs:t,backend:n}=s,{dy:o,y:a}=t;Bt([o,a],"eluGrad");const i=new Float32Array(at(a.shape)),p=n.data.get(a.dataId).values,r=n.data.get(o.dataId).values;for(let h=0;h<p.length;++h){const f=p[h];f>=0?i[h]=r[h]:i[h]=r[h]*(f+1)}return n.makeTensorInfo(a.shape,"float32",i)}const c8={kernelName:A1,backendName:"cpu",kernelFunc:u8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8=Gx,h8=Wx,f8=Hx,p8=qx,m8=Xx,g8=Yx,y8=Un(Th,s=>{const t=Math.sign(s),n=Math.abs(s),o=1/(1+d8*n);return t*(1-((((g8*o+m8)*o+p8)*o+f8)*o+h8)*o*Math.exp(-n*n))}),b8={kernelName:Th,backendName:"cpu",kernelFunc:y8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qm(s){const{inputs:t,backend:n,attrs:o}=s,{input:a}=t,{dim:i}=o,p=a.shape.length,r=a.shape.slice();let h=i;return i<0&&(ye(-(p+1)<=i,()=>`Axis must be in the interval [${-(p+1)}, ${p}]`),h=p+i+1),r.splice(h,0,1),or({inputs:{x:a},backend:n,attrs:{shape:r}})}const v8={kernelName:kg,backendName:"cpu",kernelFunc:Qm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x8=Dr((s,t)=>s/t),Dw=Xr(Ch,x8),Wv={kernelName:Ch,backendName:"cpu",kernelFunc:Dw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GR(s,t,n){const o=s.shape,a=o[0],i=o[1],p=n.data.get(s.dataId),r=p.complexTensorInfos.real,h=p.complexTensorInfos.imag,f=[a,i],u=at(f),l=vs("float32",u),d=vs("float32",u);for(let y=0;y<a;y++){const b=nu({inputs:{x:r},backend:n,attrs:{begin:[y,0],size:[1,i]}}),g=nu({inputs:{x:h},backend:n,attrs:{begin:[y,0],size:[1,i]}}),w=Ks({inputs:{real:b,imag:g},backend:n}),{real:_,imag:C}=w8(w,t,n),k=si(_,C);for(let E=0;E<i;E++){const j=Kx(k,E);l[y*i+E]=j.real,d[y*i+E]=j.imag}n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(w)}const x=n.makeTensorInfo(f,"float32",l),S=n.makeTensorInfo(f,"float32",d),m=Ks({inputs:{real:x,imag:S},backend:n});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),m}function w8(s,t,n){const o=at(s.shape),a=n.data.get(s.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,p=n.data.get(a.complexTensorInfos.imag.dataId).values;if(S8(o)){const r=Hv(i,p,o,t,n),h=[s.shape[0],s.shape[1]];if(t){const f=n.makeTensorInfo(h,"float32",r.real),u=n.makeTensorInfo(h,"float32",r.imag),l=n.makeTensorInfo([],"float32",tl(o,"float32")),d=Da({inputs:{x:l},backend:n}),x=Wv.kernelFunc({inputs:{a:f,b:l},backend:n}),S=Wv.kernelFunc({inputs:{a:u,b:d},backend:n}),m=n.data.get(x.dataId).values,y=n.data.get(S.dataId).values;return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),{real:m,imag:y}}return r}else{const r=si(i,p),h=_8(r,o,t);return rj(h)}}function S8(s){return(s&s-1)===0}function Hv(s,t,n,o,a){if(n===1)return{real:s,imag:t};const i=si(s,t),p=n/2,r=sj(i),h=r.real,f=r.imag,u=[h.length],l=a.makeTensorInfo(u,"float32",h),d=a.makeTensorInfo(u,"float32",f),x=Ks({inputs:{real:l,imag:d},backend:a}),S=oj(i),m=S.real,y=S.imag,b=[m.length],g=a.makeTensorInfo(b,"float32",m),w=a.makeTensorInfo(b,"float32",y),_=Ks({inputs:{real:g,imag:w},backend:a}),C=Hv(h,f,p,o,a),k=C.real,E=C.imag,j=[k.length],A=a.makeTensorInfo(j,"float32",k),O=a.makeTensorInfo(j,"float32",E),N=Ks({inputs:{real:A,imag:O},backend:a}),D=Hv(m,y,p,o,a),z=D.real,$=D.imag,B=[z.length],F=a.makeTensorInfo(B,"float32",z),G=a.makeTensorInfo(B,"float32",$),W=Ks({inputs:{real:F,imag:G},backend:a}),L=ij(n,o),V=[L.real.length],Y=a.makeTensorInfo(V,"float32",L.real),Z=a.makeTensorInfo(V,"float32",L.imag),J=Ks({inputs:{real:Y,imag:Z},backend:a}),ne=Ry({inputs:{a:J,b:W},backend:a}),se=bc({inputs:{a:N,b:ne},backend:a}),ie=Rw({inputs:{a:N,b:ne},backend:a}),X=tu({inputs:{input:se},backend:a}),Q=tu({inputs:{input:ie},backend:a}),re=vc({inputs:{input:se},backend:a}),ce=vc({inputs:{input:ie},backend:a}),he=xc({inputs:[X,Q],backend:a,attrs:{axis:0}}),fe=xc({inputs:[re,ce],backend:a,attrs:{axis:0}}),oe=a.data.get(he.dataId).values,me=a.data.get(fe.dataId).values;return a.disposeIntermediateTensorInfo(l),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(g),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(Y),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(J),a.disposeIntermediateTensorInfo(ne),a.disposeIntermediateTensorInfo(se),a.disposeIntermediateTensorInfo(ie),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(re),a.disposeIntermediateTensorInfo(Q),a.disposeIntermediateTensorInfo(ce),a.disposeIntermediateTensorInfo(he),a.disposeIntermediateTensorInfo(fe),{real:oe,imag:me}}function _8(s,t,n){const o=new Float32Array(t*2);for(let a=0;a<t;a++){let i=0,p=0;for(let r=0;r<t;r++){const h=lj(a*r,t,n),f=Kx(s,r);i+=f.real*h.real-f.imag*h.imag,p+=f.real*h.imag+f.imag*h.real}n&&(i/=t,p/=t),aj(o,i,p,a)}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8(s){const{inputs:t,backend:n}=s,{input:o}=t,a=at(o.shape),i=o.shape[o.shape.length-1],p=a/i,r=or({inputs:{x:o},backend:n,attrs:{shape:[p,i]}}),h=GR(r,!1,n),f=or({inputs:{x:h},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(h),f}const k8={kernelName:R1,backendName:"cpu",kernelFunc:C8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mw(s){const{backend:t,attrs:n}=s,{shape:o,value:a,dtype:i}=n,p=i||Cc(a),r=jr(p,at(o));return E8(r,a,p),t.makeTensorInfo(o,p,r)}const T8={kernelName:N1,backendName:"cpu",kernelFunc:Mw};function E8(s,t,n){s.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8={kernelName:D1,backendName:"cpu",kernelFunc:({inputs:s,attrs:t,backend:n})=>{const{image:o}=s,a=n,i=vs(o.dtype,at(o.shape)),[p,r,h,f]=o.shape,u=a.data.get(o.dataId).values;for(let d=0;d<p;d++){const x=d*h*r*f;for(let S=0;S<r;S++){const m=S*(h*f);for(let y=0;y<h;y++){const b=y*f;for(let g=0;g<f;g++){const w=Math.round(h-y-1),_=x+m+b+g;let C=u[_];if(w>=0&&w<h){const k=w*f,E=x+m+k+g;C=u[E]}i[_]=C}}}}return{dataId:a.write(i,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i,bias:p,preluActivationWeights:r}=t,{strides:h,pad:f,dataFormat:u,dilations:l,dimRoundingMode:d,activation:x,leakyreluAlpha:S}=o;let m=zR({inputs:{x:a,filter:i},backend:n,attrs:{strides:h,pad:f,dataFormat:u,dilations:l,dimRoundingMode:d}});if(p){const y=m;if(u==="NCHW"&&p.shape.length===1&&p.shape[0]!==1){const b=or({inputs:{x:p},backend:n,attrs:{shape:[p.shape[0],1,1]}});m=bc({inputs:{a:m,b},backend:n}),n.disposeIntermediateTensorInfo(b)}else m=bc({inputs:{a:m,b:p},backend:n});n.disposeIntermediateTensorInfo(y)}if(x){const y=m;if(u==="NCHW"&&x==="prelu"&&r.shape.length===1&&r.shape[0]!==1){const b=or({inputs:{x:r},backend:n,attrs:{shape:[r.shape[0],1,1]}});m=Zm(n,m,x,b,S),n.disposeIntermediateTensorInfo(b)}else m=Zm(n,m,x,r,S);n.disposeIntermediateTensorInfo(y)}return m}const A8={kernelName:Am,backendName:"cpu",kernelFunc:I8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i,bias:p,preluActivationWeights:r}=t,{strides:h,pad:f,dataFormat:u,dilations:l,dimRoundingMode:d,activation:x,leakyreluAlpha:S}=o;let m=VR({inputs:{x:a,filter:i},backend:n,attrs:{strides:h,pad:f,dataFormat:u,dilations:l,dimRoundingMode:d}});if(p){const y=m;m=bc({inputs:{a:m,b:p},backend:n}),n.disposeIntermediateTensorInfo(y)}if(x){const y=m;m=Zm(n,m,x,r,S),n.disposeIntermediateTensorInfo(y)}return m}const N8={kernelName:DT,backendName:"cpu",kernelFunc:R8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(s){const{inputs:t,backend:n}=s,{params:o,indices:a}=t,i=at(o.shape),p=a.shape,r=p[p.length-1],[h,f,u,l]=Dx(o,a);if(f===0)return n.makeTensorInfo(h,o.dtype,[]);const d=n.data.get(a.dataId).values,x=n.bufferSync(o),S=eR(d,x,o.dtype,f,r,u,l,o.shape,i);return n.makeTensorInfo(h,o.dtype,S.values)}const M8={kernelName:mT,backendName:"cpu",kernelFunc:D8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,indices:i}=t,{axis:p,batchDims:r}=o;Bt([a,i],"gatherV2");const h=pn(p,a.shape)[0],f=n.data.get(i.dataId).values,u=a.shape[h];for(let _=0;_<f.length;++_){const C=f[_];ye(C<=u-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${u-1}]`)}let l=r;r==null&&(l=0);const d=at(i.shape),x=rw(a,i,h,l),S=or({inputs:{x:a},backend:n,attrs:{shape:[x.batchSize,x.outerSize,x.dimSize,x.sliceSize]}}),m=or({inputs:{x:i},backend:n,attrs:{shape:[x.batchSize,d/x.batchSize]}}),y=[x.batchSize,x.outerSize,d/x.batchSize,x.sliceSize],b=n.bufferSync(m),g=n.bufferSync(S),w=tR(g,b,y);return n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(x.outputShape,w.dtype,w.values)}const $8={kernelName:Eg,backendName:"cpu",kernelFunc:O8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8(s){const{inputs:t,backend:n}=s,{input:o}=t,a=at(o.shape),i=o.shape[o.shape.length-1],p=a/i,r=or({inputs:{x:o},backend:n,attrs:{shape:[p,i]}}),h=GR(r,!0,n),f=or({inputs:{x:h},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(h),f}const F8={kernelName:M1,backendName:"cpu",kernelFunc:L8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P8=Un(Dh,s=>Number.isFinite(s)?1:0,"bool"),B8={kernelName:Dh,backendName:"cpu",kernelFunc:P8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U8=Un(Mh,s=>Math.abs(s)===1/0?1:0,"bool"),z8={kernelName:Mh,backendName:"cpu",kernelFunc:U8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V8=Un(Oh,s=>Number.isNaN(s)?1:0,"bool"),G8={kernelName:Oh,backendName:"cpu",kernelFunc:V8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W8(s){const{backend:t,attrs:n}=s,{start:o,stop:a,num:i}=n,p=aR(o,a,i);return t.makeTensorInfo([p.length],"float32",p)}const H8={kernelName:gT,backendName:"cpu",kernelFunc:W8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q8=Un(Lh,s=>Math.log1p(s)),X8={kernelName:Lh,backendName:"cpu",kernelFunc:q8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y8=Dr((s,t)=>s&&t),K8=Xr(Ng,Y8,null,"bool"),Z8={kernelName:Ng,backendName:"cpu",kernelFunc:K8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q8=Un(Dg,s=>s?0:1,"bool"),J8={kernelName:Dg,backendName:"cpu",kernelFunc:Q8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eW=Dr((s,t)=>s||t),tW=Xr(Mg,eW,null,"bool"),nW={kernelName:Mg,backendName:"cpu",kernelFunc:tW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rW(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{depthRadius:i,bias:p,alpha:r,beta:h}=o;Bt(a,"LRN");const f=a.shape[3],u=f-1,l=n.data.get(a.dataId).values,d=at(a.shape),x=new Float32Array(d);function S(m){const y=m%f;let b=m-y+Math.max(0,y-i);const g=m-y+Math.min(y+i,u);let w=0;for(;b<=g;b++){const _=l[b];w+=_*_}return w}for(let m=0;m<d;m++){const y=S(m),b=l[m]*Math.pow(p+r*y,-h);x[m]=b}return n.makeTensorInfo(a.shape,a.dtype,x)}const sW={kernelName:Og,backendName:"cpu",kernelFunc:rW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oW(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,y:i,dy:p}=t,{depthRadius:r,bias:h,alpha:f,beta:u}=o;Bt(p,"LRNGrad");const l=at(p.shape),d=p.shape[3],x=n.data.get(p.dataId).values,S=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,y=new Float32Array(l),b=l;for(let g=0;g<b;g++){const w=g%d,_=g-w+Math.max(0,w-r),C=g-w+Math.min(d,w+r+1);let k=0;for(let E=_;E<C;E++)k+=Math.pow(S[E],2);k=f*k+h;for(let E=_;E<C;E++){let j=-2*f*u*S[E]*m[g]/k;g===E&&(j+=Math.pow(k,-u)),j*=x[g],y[E]+=j}}return n.makeTensorInfo(p.shape,a.dtype,y)}const aW={kernelName:$1,backendName:"cpu",kernelFunc:oW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WR(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{reductionIndices:i,keepDims:p}=o,r=n;let h=a.shape;const f=h.length,u=pn(i,h);let l=u;const d=br(l,f);let x=r.data.get(a.dataId).values;if(d!=null){const _=new Array(f);for(let C=0;C<_.length;C++)_[C]=h[d[C]];x=Iw(x,h,a.dtype,d,_),l=Rr(l.length,f),h=_}Bt(a,"max"),fs("max",l,f);const[S,m]=ss(h,l),y=at(m),b=lR(x,y,S,a.dtype),g=r.write(b,S,a.dtype);let w=S;return p&&(w=Fr(S,u)),{dataId:g,shape:w,dtype:a.dtype}}const iW={kernelName:$g,backendName:"cpu",kernelFunc:WR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lW(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t;Bt(a,"maxPool");const{filterSize:i,strides:p,pad:r,dimRoundingMode:h}=o,f=1;ye(Ss(p,f),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${p} and dilations '${f}'`);const u=$o(a.shape,i,p,f,r,h);let l;if(u.filterWidth===1&&u.filterHeight===1&&$n(u.inShape,u.outShape))l=Da({inputs:{x:a},backend:n});else{const d=n.data.get(a.dataId).values,x=Vt(a.shape),S=Nw(d,a.shape,a.dtype,x,u,"max");l=n.makeTensorInfo(u.outShape,a.dtype,S.values)}return l}const uW={kernelName:Lg,backendName:"cpu",kernelFunc:lW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cW(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{filterSize:i,strides:p,pad:r,dimRoundingMode:h,dataFormat:f}=o;Bt(a,"maxPool3d");const u=li(a.shape,i,p,1,r,h,f),l=n.data.get(a.dataId).values,d=UR(l,a.shape,a.dtype,Vt(a.shape),u,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}const dW={kernelName:Fg,backendName:"cpu",kernelFunc:cW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hW(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,input:i}=t,{filterSize:p,strides:r,pad:h,dimRoundingMode:f}=o;Bt([a,i],"maxPool3DGrad");const u=li(i.shape,p,r,1,h,f),l=n.bufferSync(i),d=eG(l,u),x=u.strideDepth,S=u.strideHeight,m=u.strideWidth,y=u.dilationDepth,b=u.dilationHeight,g=u.dilationWidth,w=u.effectiveFilterDepth,_=u.effectiveFilterHeight,C=u.effectiveFilterWidth,k=w-1-u.padInfo.front,E=C-1-u.padInfo.left,j=_-1-u.padInfo.top,A=fn(i.shape,"float32"),O=n.bufferSync(a);for(let N=0;N<u.batchSize;++N)for(let D=0;D<u.inChannels;++D)for(let z=0;z<u.inDepth;++z)for(let $=0;$<u.inHeight;++$)for(let B=0;B<u.inWidth;++B){const F=z-k,G=$-j,W=B-E;let L=0;for(let V=0;V<w;V+=y){const Y=(F+V)/x;if(!(Y<0||Y>=u.outDepth||Math.floor(Y)!==Y))for(let Z=0;Z<_;Z+=b){const J=(G+Z)/S;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let ne=0;ne<C;ne+=g){const se=(W+ne)/m;if(se<0||se>=u.outWidth||Math.floor(se)!==se)continue;const ie=w*_*C-1-d.get(N,Y,J,se,D),X=V*_*C+Z*C+ne,Q=ie===X?1:0;if(Q===0)continue;const re=O.get(N,Y,J,se,D);L+=re*Q}}}A.set(L,N,z,$,B,D)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const fW={kernelName:F1,backendName:"cpu",kernelFunc:hW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,input:i,output:p}=t,r=i;Bt([i,p],"maxPoolGrad");const{filterSize:h,strides:f,pad:u,dimRoundingMode:l}=o,d=$o(r.shape,h,f,1,u,l),x=n.data.get(r.dataId).values,S=fn(d.outShape,r.dtype,BR(x,r.shape,r.dtype,d).values),m=d.strideHeight,y=d.strideWidth,b=d.dilationHeight,g=d.dilationWidth,w=d.effectiveFilterHeight,_=d.effectiveFilterWidth,C=_-1-d.padInfo.left,k=w-1-d.padInfo.top,E=fn(r.shape,"float32"),j=n.data.get(a.dataId).values,A=fn(a.shape,"float32",j);for(let O=0;O<d.batchSize;++O)for(let N=0;N<d.inChannels;++N)for(let D=0;D<d.inHeight;++D)for(let z=0;z<d.inWidth;++z){const $=D-k,B=z-C;let F=0;for(let G=0;G<w;G+=b){const W=($+G)/m;if(!(W<0||W>=d.outHeight||Math.floor(W)!==W))for(let L=0;L<_;L+=g){const V=(B+L)/y;if(V<0||V>=d.outWidth||Math.floor(V)!==V)continue;const Y=w*_-1-S.get(O,W,V,N),Z=G*_+L,J=Y===Z?1:0;if(J===0)continue;const ne=A.get(O,W,V,N);F+=ne*J}}E.set(F,O,D,z,N)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const mW={kernelName:L1,backendName:"cpu",kernelFunc:pW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gW(s,t,n,o,a){const i=Vt(t),p=Nw(s,t,n,i,a,"max"),r=BR(s,t,n,a,!0,o);return[p.values,r.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yW={kernelName:yT,backendName:"cpu",kernelFunc:({inputs:s,attrs:t,backend:n})=>{const{x:o}=s,{filterSize:a,strides:i,pad:p,includeBatchInIndex:r}=t,h=n;Bt(o,"MaxPoolWithArgmax");const f=h.data.get(o.dataId).values,u=$o(o.shape,a,i,[1,1],p),[l,d]=gW(f,o.shape,o.dtype,r,u),x=h.write(l,u.outShape,o.dtype),S=h.write(d,u.outShape,o.dtype);return[{dataId:x,shape:u.outShape,dtype:o.dtype},{dataId:S,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bW(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o,r=pn(i,a.shape),f=ss(a.shape,r)[1],u=at(f),l=[],d=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(d);const x=Qi({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(x);const S=Dw({inputs:{a:x,b:d},backend:n});l.push(S);const m=Tf({inputs:{x:S},backend:n,attrs:{axis:i,keepDims:p}});return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const vW={kernelName:Pg,backendName:"cpu",kernelFunc:bW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xW(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o;Bt(a,"min");const r=pn(i,a.shape);let h=r;const f=br(h,a.shape.length);let u=a;f!=null&&(u=Us({inputs:{x:a},backend:n,attrs:{perm:f}}),h=Rr(h.length,a.shape.length)),fs("min",h,u.shape.length);const[l,d]=ss(u.shape,h),x=at(d),S=xs(at(l),u.dtype),m=n.data.get(u.dataId).values;for(let b=0;b<S.length;++b){const g=b*x;let w=m[g];for(let _=0;_<x;++_){const C=m[g+_];(Number.isNaN(C)||C<w)&&(w=C)}S[b]=w}f!=null&&n.disposeIntermediateTensorInfo(u);const y=n.makeTensorInfo(l,u.dtype,S);if(p){const b=Fr(l,r),g=or({inputs:{x:y},backend:n,attrs:{shape:b}});return n.disposeIntermediateTensorInfo(y),g}return y}const wW={kernelName:Bg,backendName:"cpu",kernelFunc:xW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SW(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{paddings:i,mode:p}=o;Bt(a,"mirrorPad");const r=i.map((w,_)=>w[0]+a.shape[_]+w[1]),h=i.map(w=>w[0]),f=i.map((w,_)=>w[0]+a.shape[_]),u=p==="reflect"?0:1,l=n.data.get(a.dataId).values,d=a.shape.length,x=Vt(a.shape),S=at(r),m=r.length,y=Vt(r),b=vs(a.dtype,S);for(let w=0;w<S;w++){let _=kc(w,m,y);for(let k=0;k<m;k++)_[k]<h[k]?_[k]=h[k]*2-_[k]-u:_[k]>=f[k]&&(_[k]=(f[k]-1)*2-_[k]+u);_=_.map((k,E)=>k-h[E]);const C=_a(_,d,x);b[w]=l[C]}return{dataId:n.write(b,r,a.dtype),shape:r,dtype:a.dtype}}const _W={kernelName:Ug,backendName:"cpu",kernelFunc:SW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CW=Dr((s,t)=>{const n=s%t;return s<0&&t<0||s>=0&&t>=0?n:(n+t)%t}),kW=Xr(Bh,CW),TW={kernelName:Bh,backendName:"cpu",kernelFunc:kW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HR(s){const{inputs:t,backend:n,attrs:o}=s,{logits:a}=t,{dim:i}=o,p=a.shape.length;let r=i;if(r===-1&&(r=p-1),r!==p-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${p} and dim was ${r}`);const h=pn([r],a.shape),f=WR({inputs:{x:a},backend:n,attrs:{reductionIndices:h,keepDims:!1}}),u=Fr(f.shape,h),l=or({inputs:{x:f},backend:n,attrs:{shape:u}}),d=Rw({inputs:{a,b:l},backend:n}),x=KA({inputs:{x:d},backend:n}),S=Tf({inputs:{x},backend:n,attrs:{axis:h,keepDims:!1}}),m=or({inputs:{x:S},backend:n,attrs:{shape:u}}),y=Dw({inputs:{a:x,b:m},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(m),y}const EW={kernelName:oy,backendName:"cpu",kernelFunc:HR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jW(s){const{inputs:t,backend:n,attrs:o}=s,{logits:a}=t,{numSamples:i,seed:p,normalized:r}=o;Bt(a,"multinomial");const h=r?a:HR({inputs:{logits:a},backend:n,attrs:{dim:-1}}),f=h.shape[0],u=h.shape[1],l=n.data.get(h.dataId).values,d=[f,i],x=xs(at(d),"int32");for(let S=0;S<f;++S){const m=S*u,y=new Float32Array(u-1);y[0]=l[m];for(let w=1;w<y.length;++w)y[w]=y[w-1]+l[m+w];const b=bx.alea(p.toString()),g=S*i;for(let w=0;w<i;++w){const _=b();x[g+w]=y.length;for(let C=0;C<y.length;C++)if(_<y[C]){x[g+w]=C;break}}}return r||n.disposeIntermediateTensorInfo(h),n.makeTensorInfo(d,"int32",x)}const IW={kernelName:bT,backendName:"cpu",kernelFunc:jW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AW=Ex;function RW(s){const{inputs:t,backend:n,attrs:o}=s,{boxes:a,scores:i}=t,{maxOutputSize:p,iouThreshold:r,scoreThreshold:h}=o;Bt(a,"NonMaxSuppression");const f=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:l}=AW(f,u,p,r,h);return n.makeTensorInfo([l.length],"int32",new Int32Array(l))}const NW={kernelName:P1,backendName:"cpu",kernelFunc:RW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DW=jx;function MW(s){const{inputs:t,backend:n,attrs:o}=s,{boxes:a,scores:i}=t,{maxOutputSize:p,iouThreshold:r,scoreThreshold:h,padToMaxOutputSize:f}=o;Bt(a,"NonMaxSuppressionPadded");const u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:x}=DW(u,l,p,r,h,f);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([x]))]}const OW={kernelName:B1,backendName:"cpu",kernelFunc:MW};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $W=Ix;function LW(s){const{inputs:t,backend:n,attrs:o}=s,{boxes:a,scores:i}=t,{maxOutputSize:p,iouThreshold:r,scoreThreshold:h,softNmsSigma:f}=o;Bt(a,"NonMaxSuppressionWithScore");const u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=p,x=r,S=h,m=f,{selectedIndices:y,selectedScores:b}=$W(u,l,d,x,S,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const FW={kernelName:U1,backendName:"cpu",kernelFunc:LW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PW(s){const{inputs:t,backend:n,attrs:o}=s,{indices:a}=t,{dtype:i,depth:p,onValue:r,offValue:h}=o;Bt(a,"oneHot");const f=at(a.shape),u=new Float32Array(f*p);u.fill(h);const l=n.data.get(a.dataId).values;for(let d=0;d<f;++d)l[d]>=0&&l[d]<p&&(u[d*p+l[d]]=r);return n.makeTensorInfo([...a.shape,p],i,u)}const BW={kernelName:Wg,backendName:"cpu",kernelFunc:PW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jm(s){const{inputs:t,backend:n}=s,{x:o}=t;if(o.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(o.dtype==="complex64"){const a=tu({inputs:{input:o},backend:n}),i=Jm({inputs:{x:a},backend:n}),p=vc({inputs:{input:o},backend:n}),r=Jm({inputs:{x:p},backend:n}),h=Ks({inputs:{real:i,imag:r},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(r),h}else return Mw({backend:n,attrs:{shape:o.shape,value:0,dtype:o.dtype}})}const UW={kernelName:ly,backendName:"cpu",kernelFunc:Jm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qR(s){const{inputs:t,backend:n}=s,{x:o}=t;if(o.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(o.dtype==="complex64"){const a=tu({inputs:{input:o},backend:n}),i=qR({inputs:{x:a},backend:n}),p=vc({inputs:{input:o},backend:n}),r=Jm({inputs:{x:p},backend:n}),h=Ks({inputs:{real:i,imag:r},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(r),h}else return Mw({backend:n,attrs:{shape:o.shape,value:1,dtype:o.dtype}})}const zW={kernelName:Gg,backendName:"cpu",kernelFunc:qR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XR(s){const{inputs:t,backend:n,attrs:o}=s,{axis:a}=o;if(t.length===1)return Qm({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const i=t[0].shape,p=t[0].dtype;t.forEach(u=>{i1(i,u.shape,"All tensors passed to stack must have matching shapes"),ye(p===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const r=[],h=t.map(u=>{const l=Qm({inputs:{input:u},backend:n,attrs:{dim:a}});return r.push(l),l}),f=xc({inputs:h,backend:n,attrs:{axis:a}});return r.forEach(u=>n.disposeIntermediateTensorInfo(u)),f}const VW={kernelName:Hg,backendName:"cpu",kernelFunc:XR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GW(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{paddings:i,constantValue:p}=o;Bt(a,"pad");const r=i.map((g,w)=>g[0]+a.shape[w]+g[1]),h=i.map(g=>g[0]),f=n.data.get(a.dataId).values,u=at(a.shape),l=a.shape.length,d=Vt(a.shape),x=at(r),S=r.length,m=Vt(r),y=vs(a.dtype,x);p!==0&&y.fill(p);for(let g=0;g<u;g++){const _=kc(g,l,d).map((k,E)=>k+h[E]),C=_a(_,S,m);y[C]=f[g]}return{dataId:n.write(y,r,a.dtype),shape:r,dtype:a.dtype}}const YR={kernelName:qg,backendName:"cpu",kernelFunc:GW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WW=Dr((s,t)=>Math.pow(s,t)),HW=Xr(zh,WW),qW={kernelName:zh,backendName:"cpu",kernelFunc:HW};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XW(s){const{inputs:t,backend:n,attrs:o}=s,{paramsNestedSplits:a,paramsDenseValues:i,indices:p}=t,{outputRaggedRank:r}=o,h=a.map(b=>n.data.get(b.dataId).values),f=a.map(b=>b.shape),u=n.data.get(i.dataId).values,l=n.data.get(p.dataId).values,[d,x,S]=pR(h,f,u,i.shape,i.dtype,l,p.shape),m=d.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(S,i.dtype,x);return m.concat([y])}const YW={kernelName:vT,backendName:"cpu",kernelFunc:XW};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KW(s){const{inputs:t,backend:n}=s,{starts:o,limits:a,deltas:i}=t,p=n.data.get(o.dataId).values,r=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,[f,u]=mR(p,o.shape,o.dtype,r,a.shape,h,i.shape),l=n.makeTensorInfo([f.length],"int32",f),d=n.makeTensorInfo([u.length],o.dtype,u);return[l,d]}const ZW={kernelName:xT,backendName:"cpu",kernelFunc:KW};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QW(s){const{inputs:t,backend:n,attrs:o}=s,{shape:a,values:i,defaultValue:p,rowPartitionTensors:r}=t,{rowPartitionTypes:h}=o,f=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=n.data.get(p.dataId).values,d=r.map(y=>n.data.get(y.dataId).values),x=r.map(y=>y.shape),[S,m]=gR(f,a.shape,u,i.shape,i.dtype,l,p.shape,d,x,h);return n.makeTensorInfo(S,i.dtype,m)}const JW={kernelName:wT,backendName:"cpu",kernelFunc:QW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7(s){const{backend:t,attrs:n}=s,{start:o,stop:a,dtype:i,step:p}=n,r=yR(o,a,p,i);return t.makeTensorInfo([r.length],i,r)}const t7={kernelName:z1,backendName:"cpu",kernelFunc:e7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7=Un(Vh,s=>1/s),r7={kernelName:Vh,backendName:"cpu",kernelFunc:n7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7(s){const{inputs:t,backend:n,attrs:o}=s,{images:a}=t,{alignCorners:i,halfPixelCenters:p,size:r}=o;Bt(a,"resizeBilinear");const h=Vt(a.shape),[f,u]=r,[l,d,x,S]=a.shape,m=n.data.get(a.dataId).values,y=new Float32Array(at([l,f,u,S])),b=[i&&f>1?d-1:d,i&&u>1?x-1:x],g=[i&&f>1?f-1:f,i&&u>1?u-1:u];let w=0;const _=b[0]/g[0],C=b[1]/g[1];for(let k=0;k<l;k++)for(let E=0;E<f;E++){let j;p?j=_*(E+.5)-.5:j=_*E;const A=Math.max(0,Math.floor(j)),O=j-A,N=Math.min(d-1,Math.ceil(j)),D=k*h[0]+A*h[1],z=k*h[0]+N*h[1];for(let $=0;$<u;$++){let B;p?B=C*($+.5)-.5:B=C*$;const F=Math.max(0,Math.floor(B)),G=B-F,W=Math.min(x-1,Math.ceil(B)),L=D+F*h[2],V=z+F*h[2],Y=D+W*h[2],Z=z+W*h[2];for(let J=0;J<S;J++){const ne=m[L+J],se=m[V+J],ie=m[Y+J],X=m[Z+J],Q=ne+(ie-ne)*G,re=se+(X-se)*G,ce=Q+(re-Q)*O;y[w++]=ce}}}return n.makeTensorInfo([l,f,u,S],"float32",y)}const o7={kernelName:Qg,backendName:"cpu",kernelFunc:s7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7(s){const{inputs:t,backend:n,attrs:o}=s,{images:a,dy:i}=t,{alignCorners:p}=o;Bt([i,a],"resizeBilinearGrad");const r=Vt(a.shape),[h,f,u,l]=a.shape,[,d,x]=i.shape,S=new Float32Array(h*f*u*l),m=[p&&d>1?f-1:f,p&&x>1?u-1:u],y=[p&&d>1?d-1:d,p&&x>1?x-1:x],b=m[0]/y[0],g=m[1]/y[1],w=n.data.get(i.dataId).values;let _=0;for(let C=0;C<h;C++){const k=C*r[0];for(let E=0;E<d;E++){const j=E*b,A=Math.floor(j),O=Math.min(Math.ceil(j),f-1),N=k+A*r[1],D=k+O*r[1],z=j-A,$=1-z;for(let B=0;B<x;B++){const F=B*g,G=Math.floor(F),W=Math.min(Math.ceil(F),u-1),L=F-G,V=1-L,Y=N+G*r[2],Z=N+W*r[2],J=D+G*r[2],ne=D+W*r[2],se=$*V,ie=$*L,X=z*V,Q=z*L;for(let re=0;re<l;re++){const ce=w[_++];S[Y+re]+=ce*se,S[Z+re]+=ce*ie,S[J+re]+=ce*X,S[ne+re]+=ce*Q}}}}return n.makeTensorInfo([h,u,f,l],"float32",S)}const i7={kernelName:W1,backendName:"cpu",kernelFunc:a7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7(s){const{inputs:t,backend:n,attrs:o}=s,{images:a}=t,{alignCorners:i,halfPixelCenters:p,size:r}=o;Bt(a,"resizeNearestNeighbor");const h=Vt(a.shape),[f,u]=r,[l,d,x,S]=a.shape,m=n.data.get(a.dataId).values,y=new Float32Array(l*f*u*S),b=[i&&f>1?d-1:d,i&&u>1?x-1:x],g=[i&&f>1?f-1:f,i&&u>1?u-1:u],w=b[0]/g[0],_=b[1]/g[1];let C=0;for(let k=0;k<l;k++){const E=k*h[0];for(let j=0;j<f;j++){const A=p?w*(j+.5):w*j;let O=Math.min(d-1,i?Math.round(A):Math.floor(A));p&&(O=Math.max(0,O));const N=E+O*h[1];for(let D=0;D<u;D++){const z=p?_*(D+.5):_*D;let $=Math.min(x-1,i?Math.round(z):Math.floor(z));p&&($=Math.max(0,$));const B=N+$*h[2];for(let F=0;F<S;F++){const G=m[B+F];y[C++]=G}}}}return n.makeTensorInfo([l,f,u,S],a.dtype,y)}const u7={kernelName:Zg,backendName:"cpu",kernelFunc:l7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7(s){const{inputs:t,backend:n,attrs:o}=s,{images:a,dy:i}=t,{alignCorners:p}=o;Bt([i,a],"resizeNearestNeighborGrad");const r=Vt(a.shape),h=Vt(i.shape),[f,u,l,d]=a.shape,[,x,S]=i.shape,m=new Float32Array(f*u*l*d),y=n.data.get(i.dataId).values,b=[p&&x>1?u-1:u,p&&S>1?l-1:l],g=[p&&x>1?x-1:x,p&&S>1?S-1:S],w=b[0]/g[0],_=b[1]/g[1],C=1/w,k=1/_,E=Math.ceil(C)*2+2,j=Math.ceil(k)*2+2;for(let A=0;A<f;A++){const O=A*r[0];for(let N=0;N<u;N++){const D=O+N*r[1],z=Math.floor(N*C),$=Math.floor(z-E/2);for(let B=0;B<l;B++){const F=D+B*r[2],G=Math.floor(B*k),W=Math.floor(G-j/2);for(let L=0;L<d;L++){let V=0;for(let Y=0;Y<E;Y++){const Z=Y+$;if(Z<0||Z>=x)continue;const J=O+Z*h[1],ne=Z*w,se=Math.min(u-1,p?Math.round(ne):Math.floor(ne));if(N===se)for(let ie=0;ie<j;ie++){const X=ie+W;if(X<0||X>=S)continue;const Q=J+X*h[2],re=X*_,ce=Math.min(l-1,p?Math.round(re):Math.floor(re));B===ce&&(V+=y[Q+L])}}m[F+L]=V}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}const d7={kernelName:G1,backendName:"cpu",kernelFunc:c7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h7(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{dims:i}=o;Bt(a,"reverse");const p=a.shape.length,r=pn(i,a.shape);if(p===0)return Da({inputs:{x:a},backend:n});const h=new ds(a.shape,a.dtype),f=n.bufferSync(a);for(let u=0;u<h.size;u++){const l=h.indexToLoc(u),d=l.slice();r.forEach(x=>d[x]=a.shape[x]-1-d[x]),h.set(f.get(...d),...l)}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const f7={kernelName:Jg,backendName:"cpu",kernelFunc:h7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p7={kernelName:Q1,backendName:"cpu",kernelFunc:({inputs:s,attrs:t,backend:n})=>{const{image:o}=s,{radians:a,fillValue:i,center:p}=t,r=n,h=vs(o.dtype,at(o.shape)),[f,u,l,d]=o.shape,[x,S]=Ux(p,u,l),m=255,y=Math.sin(a),b=Math.cos(a),g=r.data.get(o.dataId).values;for(let _=0;_<f;_++){const C=_*l*u*d;for(let k=0;k<u;k++){const E=k*(l*d);for(let j=0;j<l;j++){const A=j*d;for(let O=0;O<d;O++){const N=[f,k,j,O],D=N[2],z=N[1];let $=(D-x)*b-(z-S)*y,B=(D-x)*y+(z-S)*b;$=Math.round($+x),B=Math.round(B+S);let F=i;if(typeof i!="number"&&(O===3?F=m:F=i[O]),$>=0&&$<l&&B>=0&&B<u){const W=B*(l*d),L=$*d,V=C+W+L+O;F=g[V]}const G=C+E+A+O;h[G]=F}}}}return{dataId:r.write(h,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7=Un(Hh,s=>{const t=Math.floor(s);return s-t<.5?Math.floor(s):s-t>.5?Math.ceil(s):t%2===0?t:t+1}),g7={kernelName:Hh,backendName:"cpu",kernelFunc:m7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7(s){const{inputs:t,backend:n,attrs:o}=s,{indices:a,updates:i}=t,{shape:p}=o,{sliceRank:r,numUpdates:h,sliceSize:f,strides:u,outputSize:l}=uu(i,a,p),d=!0,x=n.bufferSync(a),S=n.bufferSync(i),m=Pl(x,S,p,l,f,h,r,u,0,d);return n.makeTensorInfo(p,m.dtype,m.values)}const b7={kernelName:ST,backendName:"cpu",kernelFunc:y7};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v7(s,t){let n=0,o=s.length,a=0;for(;n<o;)a=Math.floor((n+o)/2),s[a]<t?n=a+1:o=a;return o}function x7(s,t){let n=0,o=s.length,a=0;for(;n<o;)a=Math.floor((n+o)/2),s[a]<=t?n=a+1:o=a;return o}function w7(s,t,n,o,a,i){const p=jr("int32",n*a);for(let r=0;r<n;++r){const h=s.slice(r*o,(r+1)*o),f=r*a;for(let u=0;u<a;++u)p[f+u]=i==="left"?v7(h,t[u+f]):x7(h,t[u+f])}return p}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S7(s){const{inputs:t,backend:n,attrs:o}=s,{sortedSequence:a,values:i}=t,{side:p}=o,r=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,f=w7(r,h,a.shape[0],a.shape[1],i.shape[1],p);return n.makeTensorInfo(i.shape,"int32",f)}const _7={kernelName:CT,backendName:"cpu",kernelFunc:S7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C7(s){const{inputs:t,backend:n}=s,{condition:o,t:a,e:i}=t;Bt([o,a,i],"select");const p=o.shape.length,r=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,u=Qs(a.dtype,i.dtype),l=xs(at(a.shape),u);let d=0;const x=p===0||p>1||a.shape.length===1?1:at(a.shape.slice(1));for(let S=0;S<r.length;S++)for(let m=0;m<x;m++)r[S]===1?l[d++]=h[S]:l[d++]=f[S];return n.makeTensorInfo(a.shape,u,l)}const k7={kernelName:ey,backendName:"cpu",kernelFunc:C7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7=by,E7=vy,j7=Un(Xh,s=>s>=0?E7*s:T7*(Math.exp(s)-1)),I7={kernelName:Xh,backendName:"cpu",kernelFunc:j7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A7=Un(Zh,s=>s<0?-1:s>0?1:0),R7={kernelName:Zh,backendName:"cpu",kernelFunc:A7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7=Un(Yh,s=>Math.sin(s)),D7={kernelName:Yh,backendName:"cpu",kernelFunc:N7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M7=Un(Kh,s=>Math.sinh(s)),O7={kernelName:Kh,backendName:"cpu",kernelFunc:M7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $7=11920928955078125e-23,yk=Math.log($7)+2,L7=Un(Jh,s=>{const t=s>-yk,n=s<yk,o=Math.exp(s);let a;return n?a=o:t?a=s:a=Math.log(1+o),a}),F7={kernelName:Jh,backendName:"cpu",kernelFunc:L7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P7(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{blockShape:i,paddings:p}=o;Bt([a],"spaceToBatchND");const r=at(i),h=[[0,0]];h.push(...p);for(let k=1+i.length;k<a.shape.length;++k)h.push([0,0]);const f=YR.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:h,constantValue:0}}),u=mf(f.shape,i,r,!1),l=gf(u.length,i.length,!1),d=yf(f.shape,i,r,!1),m=or({inputs:{x:f},backend:n,attrs:{shape:u}}),g=Us({inputs:{x:m},backend:n,attrs:{perm:l}}),C=or({inputs:{x:g},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),C}const B7={kernelName:ry,backendName:"cpu",kernelFunc:P7};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U7(s){const{inputs:t,backend:n}=s,{indices:o,values:a,denseShape:i,defaultValue:p}=t;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${o.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${a.shape}`);if(p.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${p.shape}`);const r=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,u=n.data.get(p.dataId).values[0],[l,d,x,S,m]=wR(r,o.shape,o.dtype,h,a.dtype,f,u);return[n.makeTensorInfo(d,o.dtype,l),n.makeTensorInfo([d[0]],a.dtype,x),n.makeTensorInfo([S.length],"bool",new Uint8Array(S.map(y=>Number(y)))),n.makeTensorInfo([m.length],o.dtype,new Int32Array(m))]}const z7={kernelName:kT,backendName:"cpu",kernelFunc:U7};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7(s){const{inputs:t,backend:n}=s,{inputIndices:o,inputShape:a,newShape:i}=t;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${o.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const p=Array.from(n.data.get(a.dataId).values),r=n.data.get(o.dataId).values,h=Array.from(n.data.get(i.dataId).values),[f,u,l]=SR(r,o.shape,o.dtype,p,h);return[n.makeTensorInfo(u,o.dtype,f),n.makeTensorInfo([l.length],i.dtype,new Int32Array(l))]}const G7={kernelName:TT,backendName:"cpu",kernelFunc:V7};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7(s){const{inputs:t,backend:n}=s,{data:o,indices:a,segmentIds:i}=t;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const p=n.data.get(o.dataId).values,r=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,[f,u]=Aw(p,o.shape,o.dtype,r,h,!0);return n.makeTensorInfo(u,o.dtype,f)}const H7={kernelName:ET,backendName:"cpu",kernelFunc:W7};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q7(s){const{inputs:t,backend:n}=s,{data:o,indices:a,segmentIds:i}=t;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const p=n.data.get(o.dataId).values,r=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,[f,u]=Aw(p,o.shape,o.dtype,r,h);return n.makeTensorInfo(u,o.dtype,f)}const X7={kernelName:jT,backendName:"cpu",kernelFunc:q7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y7(s){const{inputs:t,backend:n,attrs:o}=s,{sparseIndices:a,sparseValues:i,defaultValue:p}=t,{outputShape:r}=o,{sliceRank:h,numUpdates:f,sliceSize:u,strides:l,outputSize:d}=uu(i,a,r),x=!1,S=n.bufferSync(a);let m;switch(i.dtype){case"bool":{const y=n.bufferSync(i),b=!!n.data.get(p.dataId).values[0];m=Pl(S,y,r,d,u,f,h,l,b,x);break}case"float32":{const y=n.bufferSync(i),b=n.data.get(p.dataId).values[0];m=Pl(S,y,r,d,u,f,h,l,b,x);break}case"int32":{const y=n.bufferSync(i),b=n.data.get(p.dataId).values[0];m=Pl(S,y,r,d,u,f,h,l,b,x);break}case"string":{const y=n.bufferSync(i),b=qi(n.data.get(p.dataId).values[0]);m=Pl(S,y,r,d,u,f,h,l,b,x);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(r,m.dtype,m.values)}const K7={kernelName:IT,backendName:"cpu",kernelFunc:Y7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{numOrSizeSplits:i,axis:p}=o,r=pn(p,a.shape)[0],h=nw(a,i,r),f=new Array(a.shape.length).fill(0),u=a.shape.slice();return h.map(l=>{const d=[...u];d[r]=l;const x=nu({inputs:{x:a},backend:n,attrs:{begin:f,size:d}});return f[r]+=l,x})}const Q7={kernelName:sy,backendName:"cpu",kernelFunc:Z7};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J7={kernelName:H1,backendName:"cpu",kernelFunc:({inputs:s,backend:t})=>{const{x:n}=s,o=t;Bt(n,"square");const a=o.data.get(n.dataId).values,i=new Float32Array(a.length);for(let r=0;r<a.length;++r){const h=a[r];i[r]=h*h}return{dataId:o.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eH=Un(af,(s,t)=>{const n=t;return isNaN(s)?NaN:s>0?1:n.alpha}),tH={kernelName:af,backendName:"cpu",kernelFunc:eH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nH(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{begin:i,end:p,strides:r,beginMask:h,endMask:f,ellipsisMask:u,newAxisMask:l,shrinkAxisMask:d}=o;Bt(a,"stridedSlice");const{finalShapeSparse:x,finalShape:S,isIdentity:m,sliceDim0:y,isSimpleSlice:b,begin:g,end:w,strides:_}=Fx(a.shape,i,p,r,h,f,u,l,d);let C;if(m)C=or({inputs:{x:a},backend:n,attrs:{shape:S}});else if(y||b){ye(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const k=Ox(g,w,_),E=nu({inputs:{x:a},backend:n,attrs:{begin:g,size:k}});C=or({inputs:{x:E},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(E)}else{const k=n.bufferSync(a),E=kR(x,k,_,g);C=n.makeTensorInfo(S,E.dtype,E.values)}return C}const rH={kernelName:X1,backendName:"cpu",kernelFunc:nH};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sH(s){const{inputs:t,backend:n,attrs:o}=s,{separator:a,nGramWidths:i,leftPad:p,rightPad:r,padWidth:h,preserveShortSequences:f}=o,{data:u,dataSplits:l}=t,d=n.data.get(u.dataId).values,x=n.data.get(l.dataId).values,[S,m]=TR(d,x,a,i,p,r,h,f);return[n.makeTensorInfo([S.length],"string",S),n.makeTensorInfo(l.shape,"int32",m)]}const oH={kernelName:AT,backendName:"cpu",kernelFunc:sH};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aH(s){const{inputs:t,backend:n,attrs:o}=s,{skipEmpty:a}=o,{input:i,delimiter:p}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(p.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${p.shape}`);const r=n.data.get(i.dataId).values,h=n.data.get(p.dataId).values[0],[f,u,l]=ER(r,h,a),d=u.length;return[n.makeTensorInfo([d,2],"int32",f),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(l))]}const iH={kernelName:RT,backendName:"cpu",kernelFunc:aH};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lH(s){const{inputs:t,backend:n,attrs:o}=s,{numBuckets:a}=o,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const p=n.data.get(i.dataId).values,r=jR(p,a);return n.makeTensorInfo(i.shape,"int32",r)}const uH={kernelName:NT,backendName:"cpu",kernelFunc:lH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cH=Un(rf,s=>Math.tan(s)),dH={kernelName:rf,backendName:"cpu",kernelFunc:cH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hH=Un(sf,s=>Math.tanh(s)),fH={kernelName:sf,backendName:"cpu",kernelFunc:hH};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pH(s){const{inputs:t,backend:n}=s,{tensor:o,indices:a,updates:i}=t,{sliceRank:p,numUpdates:r,sliceSize:h,strides:f,outputSize:u}=uu(i,a,o.shape),l=!1,d=n.bufferSync(a),x=n.bufferSync(i),S=n.bufferSync(o),m=Pl(d,x,o.shape,u,h,r,p,f,S,l);return n.makeTensorInfo(o.shape,m.dtype,m.values)}const mH={kernelName:_T,backendName:"cpu",kernelFunc:pH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gH(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{reps:i}=o;Bt(a,"tile");const p=AR(n.bufferSync(a),i);return n.makeTensorInfo(p.shape,p.dtype,p.values)}const yH={kernelName:of,backendName:"cpu",kernelFunc:gH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bH(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{k:i,sorted:p}=o;Bt(a,"topk");const r=n.data.get(a.dataId).values,[h,f]=NR(r,a.shape,a.dtype,i,p);return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(f.shape,f.dtype,f.values)]}const vH={kernelName:Y1,backendName:"cpu",kernelFunc:bH};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xH(s){const{inputs:t,attrs:n,backend:o}=s,{image:a,transforms:i}=t,{interpolation:p,fillMode:r,fillValue:h,outputShape:f}=n,[u,l,d,x]=a.shape,[S,m]=f??[l,d],y=[u,S,m,x],b=Vt(a.shape),g=b[0],w=b[1],_=b[2],C=Vt(y),k=C[0],E=C[1],j=C[2],A=vs(a.dtype,at(y));A.fill(h);const O=o.data.get(a.dataId).values,N=o.data.get(i.dataId).values;for(let z=0;z<u;++z){const $=i.shape[0]===1?N:N.subarray(z*8,z*8+8);for(let B=0;B<S;++B)for(let F=0;F<m;++F)for(let G=0;G<x;++G){let W;const L=$[6]*F+$[7]*B+1;if(L===0)continue;const V=($[0]*F+$[1]*B+$[2])/L,Y=($[3]*F+$[4]*B+$[5])/L,Z=bk(V,d,r),J=bk(Y,l,r);switch(p){case"nearest":W=TH(O,l,d,g,w,_,z,J,Z,G,h);break;case"bilinear":W=EH(O,l,d,g,w,_,z,J,Z,G,h);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${p}`)}const ne=z*k+B*E+F*j+G;A[ne]=W}return o.makeTensorInfo(y,a.dtype,A)}return{dataId:o.write(A,y,a.dtype),shape:a.shape,dtype:a.dtype}}const wH={kernelName:K1,backendName:"cpu",kernelFunc:xH};function bk(s,t,n){switch(n){case"reflect":return SH(s,t);case"wrap":return _H(s,t);case"nearest":return kH(s,t);case"constant":default:return CH(s)}}function SH(s,t){let n=s;if(n<0)if(t<=1)n=0;else{const o=2*t;n<o&&(n=o*Math.trunc(-n/o)+n),n=n<-t?n+o:-n-1}else if(n>t-1)if(t<=1)n=0;else{const o=2*t;n-=o*Math.trunc(n/o),n>=t&&(n=o-n-1)}return Vl(0,n,t-1)}function _H(s,t){let n=s;if(n<0)if(t<=1)n=0;else{const o=t-1;n+=t*(Math.trunc(-n/o)+1)}else if(n>t-1)if(t<=1)n=0;else{const o=t-1;n-=t*Math.trunc(n/o)}return Vl(0,n,t-1)}function CH(s,t){return s}function kH(s,t){return Vl(0,s,t-1)}function Vd(s,t,n,o,a,i,p,r,h,f,u){const l=p*o+r*a+h*i+f;return 0<=r&&r<t&&0<=h&&h<n?s[l]:u}function TH(s,t,n,o,a,i,p,r,h,f,u){const l=Math.round(r),d=Math.round(h);return Vd(s,t,n,o,a,i,p,l,d,f,u)}function EH(s,t,n,o,a,i,p,r,h,f,u){const l=Math.floor(r),d=Math.floor(h),x=l+1,S=d+1,m=(S-h)*Vd(s,t,n,o,a,i,p,l,d,f,u)+(h-d)*Vd(s,t,n,o,a,i,p,l,S,f,u),y=(S-h)*Vd(s,t,n,o,a,i,p,x,d,f,u)+(h-d)*Vd(s,t,n,o,a,i,p,x,S,f,u);return(x-r)*m+(r-l)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jH(s){const{inputs:t,attrs:n,backend:o}=s,{axis:a}=n,{x:i}=t;Bt(i,"unique");const p=o.data.get(i.dataId).values,{outputValues:r,outputShape:h,indices:f}=DR(p,a,i.shape,i.dtype);return[o.makeTensorInfo(h,i.dtype,r),o.makeTensorInfo([f.length],"int32",f)]}const IH={kernelName:Z1,backendName:"cpu",kernelFunc:jH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AH(s){const{inputs:t,backend:n,attrs:o}=s,{value:a}=t;let{axis:i}=o;i<0&&(i+=a.shape.length);const p=a.shape.length,r=a.shape[i],h=new Array(p-1);let f=0;for(let x=0;x<p;x++)x!==i&&(h[f++]=a.shape[x]);const u=new Array(p).fill(0),l=a.shape.slice();l[i]=1;const d=new Array(r);for(let x=0;x<d.length;x++){u[i]=x;const S=nu({inputs:{x:a},backend:n,attrs:{begin:u,size:l}});d[x]=or({inputs:{x:S},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(S)}return d}const RH={kernelName:ay,backendName:"cpu",kernelFunc:AH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NH(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,segmentIds:i}=t,{numSegments:p}=o;Bt(a,"unsortedSegmentSum");const r=a.shape.length,h=i.shape.length,f=[],u=[],l=r-h;let d=i;for(let S=0;S<l;++S){const m=Qm({inputs:{input:d},backend:n,attrs:{dim:S+1}});d=m,u.push(m)}for(let S=0;S<p;++S){const m=tl(S,"int32"),y=n.makeTensorInfo([],"int32",m),b=XA({inputs:{a:y,b:d},backend:n}),g=Qi({inputs:{x:b},backend:n,attrs:{dtype:"float32"}}),w=Ry({inputs:{a:g,b:a},backend:n}),_=Tf({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});f.push(_),u.push(y),u.push(b),u.push(g),u.push(w),u.push(_)}const x=XR({inputs:f,backend:n,attrs:{axis:0}});return u.forEach(S=>n.disposeIntermediateTensorInfo(S)),x}const DH={kernelName:iy,backendName:"cpu",kernelFunc:NH};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MH=[jV,lz,AV,NV,pz,MV,$V,FV,BV,zV,GV,HV,XV,ZV,JV,nG,sG,aG,lG,TV,cG,hG,pG,gz,gG,hz,bz,bG,uz,xG,SG,_G,kG,EG,IG,RG,DG,OG,LG,PG,UG,VG,WG,qG,XG,KG,QG,e8,t8,n8,r8,o8,l8,vV,c8,vz,b8,xz,v8,Sz,k8,T8,j8,Cz,Tz,A8,N8,M8,$8,jz,Az,cz,F8,wG,B8,z8,G8,xV,Nz,Mz,H8,$z,X8,Z8,J8,nW,sW,aW,iW,Fz,uW,dW,fW,mW,yW,vW,wW,Bz,_W,TW,IW,zz,Gz,NW,OW,FW,Hz,BW,zW,VW,YR,qW,SV,Yz,YW,ZW,JW,t7,dz,Wv,r7,_V,CV,kV,o7,i7,u7,d7,f7,p7,g7,rV,b7,_7,k7,I7,oV,R7,D7,O7,aV,EW,F7,B7,z7,G7,H7,X7,K7,Q7,uV,J7,dV,fV,tH,rH,oH,iH,uH,yV,a8,dH,fH,mH,yH,vH,wH,qz,IH,RH,DH,UW];for(const s of MH)MT(s);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ll={},lm={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function OH(s,t){Ll[s]=t}function oa(s,t){if(!(s in Ll)||t!=null){const o=LH(s,t);if(o!==null)Ll[s]=o;else return console.log("Could not get context for WebGL version",s),null}const n=Ll[s];return n==null||n.isContextLost()?(delete Ll[s],oa(s)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ll[s])}function $H(s){if(!Qe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&s===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function LH(s,t){if(s!==1&&s!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t??$H(s);return n.addEventListener("webglcontextlost",o=>{o.preventDefault(),delete Ll[s]},!1),Qe().getBool("SOFTWARE_WEBGL_ENABLED")&&(lm.failIfMajorPerformanceCaveat=!1),s===1?n.getContext("webgl",lm)||n.getContext("experimental-webgl",lm):n.getContext("webgl2",lm)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var sh;(function(s){s[s.DENSE=0]="DENSE",s[s.SHARED_BATCH=1]="SHARED_BATCH"})(sh||(sh={}));var co;(function(s){s[s.RENDER=0]="RENDER",s[s.UPLOAD=1]="UPLOAD",s[s.PIXELS=2]="PIXELS",s[s.DOWNLOAD=3]="DOWNLOAD"})(co||(co={}));var cs;(function(s){s[s.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",s[s.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",s[s.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",s[s.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",s[s.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(cs||(cs={}));function Ef(s,t){return[t,s]}function FH(s,t){return s*t}function um(s){const t=at(s),n=Math.ceil(t/4);return fv(n)}function Nc(s,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(s/2))]}function PH(s,t){const[n,o]=Nc(s,t);return n*o*4}function Ow(s,t){const n=s;let o,a,i,p,r,h,f,u,l,d;return Qe().getNumber("WEBGL_VERSION")===2?(o=n.R32F,a=n.R16F,i=n.RGBA16F,p=n.RGBA32F,r=n.RED,f=4,u=1,l=n.HALF_FLOAT,d=n.FLOAT,h=n.RGBA8):(o=s.RGBA,a=s.RGBA,i=s.RGBA,p=n.RGBA,r=s.RGBA,f=4,u=4,l=t!=null?t.HALF_FLOAT_OES:null,d=s.FLOAT,h=s.RGBA),{internalFormatFloat:o,internalFormatHalfFloat:a,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:p,textureFormatFloat:r,downloadTextureFormat:h,downloadUnpackNumChannels:f,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:d}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mt(s,t){const n=t();return Qe().getBool("DEBUG")&&BH(s),n}function BH(s){const t=s.getError();if(t!==s.NO_ERROR)throw new Error("WebGL Error: "+GH(s,t))}const UH=596e-10,zH=65504;function VH(s){return!!(Qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||s===0||UH<Math.abs(s)&&Math.abs(s)<zH)}function GH(s,t){switch(t){case s.NO_ERROR:return"NO_ERROR";case s.INVALID_ENUM:return"INVALID_ENUM";case s.INVALID_VALUE:return"INVALID_VALUE";case s.INVALID_OPERATION:return"INVALID_OPERATION";case s.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case s.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case s.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function cm(s,t){return ci(s,()=>s.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function WH(s,t){const n=ci(s,()=>s.createShader(s.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Mt(s,()=>s.shaderSource(n,t)),Mt(s,()=>s.compileShader(n)),s.getShaderParameter(n,s.COMPILE_STATUS)===!1)throw console.log(s.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function HH(s,t){const n=ci(s,()=>s.createShader(s.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Mt(s,()=>s.shaderSource(n,t)),Mt(s,()=>s.compileShader(n)),Qe().get("ENGINE_COMPILE_ONLY"))return n;if(s.getShaderParameter(n,s.COMPILE_STATUS)===!1)throw KR(t,s.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const qH=/ERROR: [0-9]+:([0-9]+):/g;function KR(s,t){const n=qH.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(s);return}const o=+n[1],a=s.split(`
`),i=a.length.toString().length+2,p=a.map((l,d)=>ic((d+1).toString(),i)+l);let r=0;for(let l=0;l<p.length;l++)r=Math.max(p[l].length,r);const h=p.slice(0,o-1),f=p.slice(o-1,o),u=p.slice(o);console.log(h.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${ic(f[0],r)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function XH(s){return ci(s,()=>s.createProgram(),"Unable to create WebGLProgram.")}function YH(s,t){if(Mt(s,()=>s.linkProgram(t)),!Qe().get("ENGINE_COMPILE_ONLY")&&s.getProgramParameter(t,s.LINK_STATUS)===!1)throw console.log(s.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Qb(s,t){if(Mt(s,()=>s.validateProgram(t)),s.getProgramParameter(t,s.VALIDATE_STATUS)===!1)throw console.log(s.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function KH(s,t){const n=ci(s,()=>s.createBuffer(),"Unable to create WebGLBuffer");return Mt(s,()=>s.bindBuffer(s.ARRAY_BUFFER,n)),Mt(s,()=>s.bufferData(s.ARRAY_BUFFER,t,s.STATIC_DRAW)),n}function ZH(s,t){const n=ci(s,()=>s.createBuffer(),"Unable to create WebGLBuffer");return Mt(s,()=>s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n)),Mt(s,()=>s.bufferData(s.ELEMENT_ARRAY_BUFFER,t,s.STATIC_DRAW)),n}function QH(s){return ci(s,()=>s.createTexture(),"Unable to create WebGLTexture.")}function JH(s,t){const n=Qe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(s<=0||t<=0){const o=`[${s}x${t}]`;throw new Error("Requested texture size "+o+" is invalid.")}if(s>n||t>n){const o=`[${s}x${t}]`,a=`[${n}x${n}]`;throw new Error("Requested texture size "+o+" greater than WebGL maximum on this browser / GPU "+a+".")}}function e9(s){return ci(s,()=>s.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function vk(s,t,n,o,a,i,p){const r=s.getAttribLocation(t,n);return r===-1?!1:(Mt(s,()=>s.bindBuffer(s.ARRAY_BUFFER,o)),Mt(s,()=>s.vertexAttribPointer(r,a,s.FLOAT,!1,i,p)),Mt(s,()=>s.enableVertexAttribArray(r)),!0)}function t9(s,t,n){a9(s,n),Mt(s,()=>s.activeTexture(s.TEXTURE0+n)),Mt(s,()=>s.bindTexture(s.TEXTURE_2D,t))}function n9(s,t,n){return ci(s,()=>s.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function r9(s,t,n){return s.getUniformLocation(t,n)}function s9(s,t,n,o){Mt(s,()=>t9(s,t,o)),Mt(s,()=>s.uniform1i(n,o))}function Jb(s,t,n){Mt(s,()=>s.bindFramebuffer(s.FRAMEBUFFER,n)),Mt(s,()=>s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,t,0))}function xk(s,t){Mt(s,()=>s.bindFramebuffer(s.FRAMEBUFFER,t)),Mt(s,()=>s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,null,0))}function dm(s){const t=s.checkFramebufferStatus(s.FRAMEBUFFER);if(t!==s.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+o9(s,t))}function o9(s,t){switch(t){case s.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case s.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case s.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case s.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function ci(s,t,n){const o=Mt(s,()=>t());if(o==null)throw new Error(n);return o}function a9(s,t){const n=s.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,o=t+s.TEXTURE0;if(o<s.TEXTURE0||o>n){const a=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${a}.`)}}function wc(s,t=2){return at(s.slice(0,s.length-t))}function Sc(s){if(s.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[s.length>1?s[s.length-2]:1,s[s.length-1]]}function hm(s){let t=[1,1,1];return s.length===0||s.length===1&&s[0]===1||(t=[wc(s),...Sc(s)]),t}function i9(s,t=!1){let n=Qe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),o=Qe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");o===1/0&&Qe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(o=n/2),t&&(n=n*2,o=o*2,s=s.map((r,h)=>h>=s.length-2?a1(s[h]):s[h]),s.length===1&&(s=[2,s[0]])),s.length!==2&&(s=el(s).newShape);let a=at(s),i=null;s.length<=1&&a<=n?i=[1,a]:s.length===2&&s[0]<=n&&s[1]<=n?i=s:s.length===3&&s[0]*s[1]<=n&&s[2]<=n?i=[s[0]*s[1],s[2]]:s.length===3&&s[0]<=n&&s[1]*s[2]<=n?i=[s[0],s[1]*s[2]]:s.length===4&&s[0]*s[1]*s[2]<=n&&s[3]<=n?i=[s[0]*s[1]*s[2],s[3]]:s.length===4&&s[0]<=n&&s[1]*s[2]*s[3]<=n&&(i=[s[0],s[1]*s[2]*s[3]]);const p=i!=null&&Math.max(...i)>o&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(i==null||p)if(t){const r=wc(s);let h=2,f=2;s.length&&([h,f]=Sc(s)),a=r*(h/2)*(f/2),i=fv(a).map(u=>u*2)}else i=fv(a);return i}function fm(s){return s%2===0}function eg(s,t){if(s=s.slice(-2),t=t.slice(-2),$n(s,t)||!s.length||!t.length||s[0]===0||s[1]===0||t[0]===0||t[1]===0)return!0;if(s.length!==t.length){const n=s[s.length-1],o=t[t.length-1];if(n===o||fm(n)&&fm(o)&&(s[0]===1||t[0]===1))return!0}return s[1]===t[1]&&fm(s[0])&&fm(t[0])}let ev,tv;function l9(s){if(ev==null){const t=oa(s);ev=t.getParameter(t.MAX_TEXTURE_SIZE)}return ev}function u9(s){if(tv==null){const t=oa(s);tv=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,tv)}function c9(s){if(s===0)return 0;let t;const n=oa(s);return Do(n,"EXT_disjoint_timer_query_webgl2")&&s===2?t=2:Do(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function Do(s,t){return s.getExtension(t)!=null}function wk(s){try{if(oa(s)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function d9(s){if(s===0)return!1;const t=oa(s);if(s===1){if(!Do(t,"OES_texture_float"))return!1}else if(!Do(t,"EXT_color_buffer_float"))return!1;return qv(t)}function h9(s){if(s===0)return!1;const t=oa(s);if(s===1){if(!Do(t,"OES_texture_float")||!Do(t,"WEBGL_color_buffer_float"))return!1}else{if(Do(t,"EXT_color_buffer_float"))return qv(t);const o="EXT_color_buffer_half_float";if(Do(t,o)){const a=t.getExtension(o);return f9(t,a)}return!1}return qv(t)}function qv(s){const t=Ow(s),n=s.createTexture();s.bindTexture(s.TEXTURE_2D,n),s.texImage2D(s.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const i=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,i),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0);const p=s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE;return s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,null),s.deleteTexture(n),s.deleteFramebuffer(i),p}function f9(s,t){const n=Ow(s,t),o=s.createTexture();s.bindTexture(s.TEXTURE_2D,o),s.texImage2D(s.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const p=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,p),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,o,0);const r=s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE;return s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,null),s.deleteTexture(o),s.deleteFramebuffer(p),r}function p9(s){return s!==2?!1:oa(s).fenceSync!=null}function jf(s,t){Array.isArray(s)||(s=[s]),s.forEach(n=>{n!=null&&ye(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zt=Qe();zt.registerFlag("HAS_WEBGL",()=>zt.getNumber("WEBGL_VERSION")>0);zt.registerFlag("WEBGL_VERSION",()=>wk(2)?2:wk(1)?1:0);zt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);zt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>zt.get("WEBGL_VERSION")===2);zt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);zt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);zt.registerFlag("WEBGL_PACK",()=>zt.getBool("HAS_WEBGL"));zt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_PACK_CLIP",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_PACK_REDUCE",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_LAZILY_UNPACK",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_CONV_IM2COL",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>zt.getBool("WEBGL_PACK"));zt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>l9(zt.getNumber("WEBGL_VERSION")));zt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>u9(zt.getNumber("WEBGL_VERSION")));zt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const s=zt.getNumber("WEBGL_VERSION");return s===0?0:c9(s)});zt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>zt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!qT());zt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>d9(zt.getNumber("WEBGL_VERSION")));zt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>zt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:zt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));zt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>h9(zt.getNumber("WEBGL_VERSION")));zt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>p9(zt.getNumber("WEBGL_VERSION")));zt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>zt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);zt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,s=>{if(typeof s!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${s}.`);if(s<0&&s!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${s}.`)});zt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>qT()?1:-1,s=>{if(typeof s!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${s}.`);if(s<0&&s!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${s}.`)});zt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);zt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);zt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);zt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);zt.registerFlag("WEBGL_EXP_CONV",()=>!1);zt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>zt.getBool("IS_TEST"));zt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);zt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);zt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);zt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ds(){let s,t,n,o,a,i,p,r,h,f;return Qe().getNumber("WEBGL_VERSION")===2?(s="#version 300 es",t="in",n="out",o="in",a="texture",i="outputColor",p="out vec4 outputColor;",r=Qe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",h="",f=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(s="",t="attribute",n="varying",o="varying",a="texture2D",i="gl_FragColor",p="",r=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,h=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,f=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:s,attribute:t,varyingVs:n,varyingFs:o,texture2D:a,output:i,defineOutput:p,defineSpecialNaN:r,defineSpecialInf:h,defineRound:f}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hu(s,t,n="index"){const o=Vt(t);return o.map((a,i)=>{const p=`int ${s[i]} = ${n} / ${a}`,r=i===o.length-1?`int ${s[i+1]} = ${n} - ${s[i]} * ${a}`:`index -= ${s[i]} * ${a}`;return`${p}; ${r};`}).join("")}function Ny(s,t,n="index"){const o=Vt(t);return o.map((a,i)=>{const p=`int ${s[i]} = ${n} / outShapeStrides[${i}]`,r=i===o.length-1?`int ${s[i+1]} = ${n} - ${s[i]} * outShapeStrides[${i}]`:`index -= ${s[i]} * outShapeStrides[${i}]`;return`${p}; ${r};`}).join("")}function m9(s,t){const n=s.length,o=s.map(i=>`${t}[${i}]`),a=new Array(n-1);a[n-2]=o[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${o[i+1]})`;return a}function g9(s,t,n="index"){const o=s.map((i,p)=>p),a=m9(o,t);return a.map((i,p)=>{const r=`int ${s[p]} = ${n} / ${a[p]}`,h=p===a.length-1?`int ${s[p+1]} = ${n} - ${s[p]} * ${a[p]}`:`index -= ${s[p]} * ${a[p]}`;return`${r}; ${h};`}).join("")}function $w(s){const t=Vt(s).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function Lw(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const ZR=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:QR}=r5;function y9(s,t,n){const o=[];if(s.forEach(x=>{const S=at(x.shapeInfo.logicalShape);if(x.shapeInfo.isUniform?o.push(`uniform float ${x.name}${S>1?`[${S}]`:""};`):(o.push(`uniform sampler2D ${x.name};`),o.push(`uniform int offset${x.name};`)),n.enableShapeUniforms){const{uniformShape:m}=Fw(n.packedInputs,x.shapeInfo.logicalShape,x.shapeInfo.texShape);switch(m.length){case 1:o.push(`uniform int ${x.name}Shape;`);break;case 2:o.push(`uniform ivec2 ${x.name}Shape;`);break;case 3:o.push(`uniform ivec3 ${x.name}Shape;`);break;case 4:o.push(`uniform ivec4 ${x.name}Shape;`);break}o.push(`uniform ivec2 ${x.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:o.push("uniform int outShape;");break;case 2:o.push("uniform ivec2 outShape;"),o.push("uniform int outShapeStrides;");break;case 3:o.push("uniform ivec3 outShape;"),o.push("uniform ivec2 outShapeStrides;");break;case 4:o.push("uniform ivec4 outShape;"),o.push("uniform ivec3 outShapeStrides;");break}o.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(x=>{o.push(`uniform ${x.type} ${x.name}${x.arrayIndex?`[${x.arrayIndex}]`:""};`)});const a=o.join(`
`),i=s.map(x=>b9(x,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),p=t.texShape,r=Ds(),h=w9(r);let f,u,l=C9(r);return t.isPacked?(f=v9(t.logicalShape,p,n.enableShapeUniforms),u=_9(r)):(f=x9(t.logicalShape,p,n.enableShapeUniforms),u=S9(r)),n.packedInputs&&(l+=j9),[l,h,u,a,f,i,n.userCode].join(`
`)}function Dc(s,t=!1){const n=s.shapeInfo.logicalShape;switch(n.length){case 0:return B9(s,t);case 1:return z9(s,t);case 2:return G9(s,t);case 3:return H9(s,t);case 4:return X9(s,t);case 5:return Y9(s);case 6:return K9(s);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function JR(s,t){switch(s.shapeInfo.logicalShape.length){case 0:return P9(s);case 1:return U9(s,t);case 2:return V9(s,t);case 3:return W9(s,t);default:return q9(s,t)}}function b9(s,t,n=!1,o){let a="";n?a+=JR(s,o):a+=Dc(s,o);const i=s.shapeInfo.logicalShape,p=t.logicalShape;return i.length<=p.length&&(n?a+=Z9(s,t):a+=Q9(s,t)),a}function v9(s,t,n){switch(s.length){case 0:return eN();case 1:return I9(s,t,n);case 2:return L9(s,t,n);case 3:return R9(s,t,n);default:return D9(s,t,n)}}function x9(s,t,n){switch(s.length){case 0:return eN();case 1:return A9(s,t,n);case 2:return F9(s,t,n);case 3:return N9(s,t,n);case 4:return M9(s,t,n);case 5:return O9(s,t);case 6:return $9(s,t);default:throw new Error(`${s.length}-D output sampling is not yet supported`)}}function w9(s){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${s.texture2D}(textureSampler, uv).r;
    }
  `}function S9(s){return`
    void setOutput(float val) {
      ${s.output} = vec4(val, 0, 0, 0);
    }
  `}function _9(s){return`
    void setOutput(vec4 val) {
      ${s.output} = val;
    }
  `}function C9(s){return`${s.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${s.varyingFs} vec2 resultUV;
    ${s.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${s.defineSpecialNaN}
    ${s.defineSpecialInf}
    ${s.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${k9}
    ${T9}
    ${E9}
  `}const k9=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,T9=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,E9=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,j9=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function eN(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function I9(s,t,n){const o=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return o[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${o[1]}.0);
      }
    `:o[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${o[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      return 2 * (resTexRC.x * ${o[1]} + resTexRC.y);
    }
  `}function A9(s,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function R9(s,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const o=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(s[2]/2),i=a*Math.ceil(s[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec3(b, r, c);
    }
  `}function N9(s,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Ny(["r","c","d"],s)}
    return ivec3(r, c, d);
  }
`;const o=hu(["r","c","d"],s);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${o}
      return ivec3(r, c, d);
    }
  `}function D9(s,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const o=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(s[s.length-1]/2),i=a*Math.ceil(s[s.length-2]/2);let p=i,r="",h="b, r, c";for(let f=2;f<s.length-1;f++)p*=s[s.length-f-1],r=`
      int b${f} = index / ${p};
      index -= b${f} * ${p};
    `+r,h=`b${f}, `+h;return`
    ivec${s.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));
      int index = resTexRC.x * ${o[1]} + resTexRC.y;

      ${r}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec${s.length}(${h});
    }
  `}function M9(s,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Ny(["r","c","d","d2"],s)}
      return ivec4(r, c, d, d2);
    }
  `;const o=hu(["r","c","d","d2"],s);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${o}
      return ivec4(r, c, d, d2);
    }
  `}function O9(s,t){const n=hu(["r","c","d","d2","d3"],s);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function $9(s,t){const n=hu(["r","c","d","d2","d3","d4"],s);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function L9(s,t,n){const o=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if($n(s,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${o[0]}, ${o[1]}));
      }
    `;const a=Math.ceil(s[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${o[0]}, ${o[1]}));

      int index = resTexRC.x * ${o[1]} + resTexRC.y;
      int r = 2 * (index / ${a});
      int c = imod(index, ${a}) * 2;

      return ivec2(r, c);
    }
  `}function F9(s,t,n){return $n(s,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:s[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:s[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${s[1]};
      int c = index - r * ${s[1]};
      return ivec2(r, c);
    }
  `}function fu(s){return`offset${s}`}function P9(s){const t=s.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),o=Ds();return`
    vec4 ${n}() {
      return ${o.texture2D}(${t}, halfCR);
    }
  `}function B9(s,t){const n=s.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(s.shapeInfo.isUniform)return`float ${o}() {return ${n};}`;const[a,i]=s.shapeInfo.texShape;if(a===1&&i===1)return`
      float ${o}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const p=fu(n);if(t)return`
    float ${o}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${p});
      return sampleTexture(${n}, uv);
    }
  `;const[r,h]=s.shapeInfo.texShape;return`
    float ${o}() {
      vec2 uv = uvFromFlat(${r}, ${h}, ${p});
      return sampleTexture(${n}, uv);
    }
  `}function U9(s,t){const n=s.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=s.shapeInfo.texShape,i=Ds();if(t)return`
    vec4 ${o}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const p=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`
    vec4 ${o}(int index) {
      vec2 uv = packedUVfrom1D(
        ${p[0]}, ${p[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function z9(s,t){const n=s.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1);if(s.shapeInfo.isUniform)return`
      float ${o}(int index) {
        ${Mc(s)}
      }
    `;const a=s.shapeInfo.texShape,i=a[0],p=a[1];if(p===1&&i===1)return`
      float ${o}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const r=fu(n);return p===1?t?`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${r}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${r}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?t?`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${r}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${o}(int index) {
        vec2 uv = vec2((float(index + ${r}) + 0.5) / ${p}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${r});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${o}(int index) {
      vec2 uv = uvFromFlat(${i}, ${p}, index + ${r});
      return sampleTexture(${n}, uv);
    }
  `}function V9(s,t){const n=s.shapeInfo.logicalShape,o=s.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=s.shapeInfo.texShape,p=i[0],r=i[1],h=Ds();if(i!=null&&$n(n,i))return t?`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);

        return ${h.texture2D}(${o}, uv);
      }
    `:`
      vec4 ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}.0, ${p}.0);

        return ${h.texture2D}(${o}, uv);
      }
    `;if(t)return`
    vec4 ${a}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${h.texture2D}(${o}, uv);
    }
  `;const f=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${a}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${f[0]}, ${f[1]}, row, col);
      return ${h.texture2D}(${o}, uv);
    }
  `}function G9(s,t){const n=s.shapeInfo.logicalShape,o=s.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=s.shapeInfo.texShape;if(i!=null&&$n(n,i)){if(t)return`
      float ${a}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `;const d=i[0],x=i[1];return`
    float ${a}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${x}.0, ${d}.0);
      return sampleTexture(${o}, uv);
    }
  `}const{newShape:p,keptDims:r}=el(n),h=p;if(h.length<n.length){const d=Oc(s,h),x=["row","col"];return`
      ${Dc(d,t)}
      float ${a}(int row, int col) {
        return ${a}(${$c(x,r)});
      }
    `}if(s.shapeInfo.isUniform)return`
      float ${a}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Mc(s)}
      }
    `;const f=i[0],u=i[1],l=fu(o);return u===1?t?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${l}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${o}TexShape[0]));
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${l}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${f}.0);
      return sampleTexture(${o}, uv);
    }
  `:f===1?t?`
      float ${a}(int row, int col) {
        float index = dot(vec3(row, col, ${l}), vec3(${o}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${o}TexShape[1]), 0.5);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${a}(int row, int col) {
      float index = dot(vec3(row, col, ${l}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${o}, uv);
    }
  `:t?`
      float ${a}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o}Shape[1] + col + ${l};
        vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
        return sampleTexture(${o}, uv);
      }
    `:`
  float ${a}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${l};
    vec2 uv = uvFromFlat(${f}, ${u}, index);
    return sampleTexture(${o}, uv);
  }
`}function W9(s,t){const n=s.shapeInfo.logicalShape,o=s.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=s.shapeInfo.texShape,p=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const d=n.slice(1),x=[1,2],S=Oc(s,d),m=["b","row","col"];return`
        ${JR(S,t)}
        vec4 ${a}(int b, int row, int col) {
          return ${a}(${$c(m,x)});
        }
      `}const r=Ds();if(t)return`
    vec4 ${a}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${o}TexShape[0]) / 2.0), ceil(float(${o}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${o}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${o}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${r.texture2D}(${o}, uv);
    }
  `;const h=p[0],f=p[1],u=Math.ceil(n[2]/2),l=u*Math.ceil(n[1]/2);return`
    vec4 ${a}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${h}, ${f}, ${l}, ${u}, b, row, col);
      return ${r.texture2D}(${o}, uv);
    }
  `}function H9(s,t){const n=s.shapeInfo.logicalShape,o=s.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=n[1]*n[2],p=n[2],{newShape:r,keptDims:h}=el(n),f=r;if(f.length<n.length){const m=Oc(s,f),y=["row","col","depth"];return`
        ${Dc(m,t)}
        float ${a}(int row, int col, int depth) {
          return ${a}(${$c(y,h)});
        }
      `}if(s.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${p}, 1)));
        ${Mc(s)}
      }
    `;const u=s.shapeInfo.texShape,l=u[0],d=u[1],x=s.shapeInfo.flatOffset;if(d===i&&x==null)return t?`
      float ${a}(int row, int col, int depth) {
        int stride1 = ${o}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
        float ${a}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${p}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${d}.0, ${l}.0);
          return sampleTexture(${o}, uv);
        }
      `;if(d===p&&x==null)return t?`
      float ${a}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${o}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
    float ${a}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${l}.0);
      return sampleTexture(${o}, uv);
    }
  `;const S=fu(o);return t?`
    float ${a}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${o}Shape[1] * ${o}Shape[2];
      int stride1 = ${o}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${S};
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index);
      return sampleTexture(${o}, uv);
    }
    `:`
      float ${a}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${p} + depth + ${S};
        vec2 uv = uvFromFlat(${l}, ${d}, index);
        return sampleTexture(${o}, uv);
      }
  `}function q9(s,t){const n=s.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Ds();if(t)return`
    vec4 ${o}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${a.texture2D}(${n}, uv);
    }
  `;const i=s.shapeInfo.logicalShape,p=i.length,r=s.shapeInfo.texShape,h=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],f=h[0],u=h[1],l=Math.ceil(i[p-1]/2);let d=l*Math.ceil(i[p-2]/2),x="int b, int row, int col",S=`b * ${d} + (row / 2) * ${l} + (col / 2)`;for(let m=2;m<p-1;m++)x=`int b${m}, `+x,d*=i[p-m-1],S=`b${m} * ${d} + `+S;return`
    vec4 ${o}(${x}) {
      int index = ${S};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${f});
      return ${a.texture2D}(${n}, uv);
    }
  `}function X9(s,t){const n=s.shapeInfo.logicalShape,o=s.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=n[3],p=n[2]*i,r=n[1]*p,{newShape:h,keptDims:f}=el(n);if(h.length<n.length){const g=Oc(s,h),w=["row","col","depth","depth2"];return`
      ${Dc(g,t)}
      float ${a}(int row, int col, int depth, int depth2) {
        return ${a}(${$c(w,f)});
      }
    `}if(s.shapeInfo.isUniform)return`
      float ${a}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${r}, ${p}, ${i}, 1)));
        ${Mc(s)}
      }
    `;const u=s.shapeInfo.flatOffset,l=s.shapeInfo.texShape,d=l[0],x=l[1],S=`int stride2 = ${o}Shape[3];`,m=`int stride1 = ${o}Shape[2] * stride2;`,y=`int stride0 = ${o}Shape[1] * stride1;`;if(x===r&&u==null)return t?`
      float ${a}(int row, int col, int depth, int depth2) {
        ${S}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${p}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}.0, ${d}.0);
        return sampleTexture(${o}, uv);
      }
    `;if(x===i&&u==null)return t?`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${o}Shape[1] * ${o}Shape[2], ${o}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${o}TexShape[1], ${o}TexShape[0]);
        return sampleTexture(${o}, uv);
      }
    `:`
      float ${a}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${x}.0, ${d}.0);
        return sampleTexture(${o}, uv);
      }
    `;const b=fu(o);return t?`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${S}
      ${m}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${o}TexShape[0], ${o}TexShape[1], index + ${b});
      return sampleTexture(${o}, uv);
    }
  `:`
    float ${a}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${r} + col * ${p} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${d}, ${x}, index + ${b});
      return sampleTexture(${o}, uv);
    }
  `}function Y9(s){const t=s.shapeInfo.logicalShape,n=s.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,p=t[2]*i,r=t[1]*p,{newShape:h,keptDims:f}=el(t);if(h.length<t.length){const m=Oc(s,h),y=["row","col","depth","depth2","depth3"];return`
      ${Dc(m)}
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        return ${o}(${$c(y,f)});
      }
    `}if(s.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${r}, ${p}, ${i}, ${a})) +
          depth3;
        ${Mc(s)}
      }
    `;const u=s.shapeInfo.flatOffset,l=s.shapeInfo.texShape,d=l[0],x=l[1];if(x===r&&u==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${p}, ${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(x===a&&u==null)return`
      float ${o}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${x}.0, ${d}.0);
        return sampleTexture(${n}, uv);
      }
    `;const S=fu(n);return`
    float ${o}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${r} + col * ${p} + depth * ${i} +
          depth2 * ${a} + depth3 + ${S};
      vec2 uv = uvFromFlat(${d}, ${x}, index);
      return sampleTexture(${n}, uv);
    }
  `}function K9(s){const t=s.shapeInfo.logicalShape,n=s.name,o="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=el(t);if(a.length<t.length){const y=Oc(s,a),b=["row","col","depth","depth2","depth3","depth4"];return`
      ${Dc(y)}
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${o}(${$c(b,i)});
      }
    `}const p=t[5],r=t[4]*p,h=t[3]*r,f=t[2]*h,u=t[1]*f;if(s.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${f}, ${h}, ${r})) +
          dot(
            vec2(depth3, depth4),
            vec2(${p}, 1)));
        ${Mc(s)}
      }
    `;const l=s.shapeInfo.flatOffset,d=s.shapeInfo.texShape,x=d[0],S=d[1];if(S===u&&l==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${f}, ${h}, ${r}, ${p})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${S}.0, ${x}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(S===p&&l==null)return`
      float ${o}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${S}.0, ${x}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=fu(n);return`
    float ${o}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${f} + depth * ${h} +
          depth2 * ${r} + depth3 * ${p} + depth4 + ${m};
      vec2 uv = uvFromFlat(${x}, ${S}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Mc(s){const t=s.name,n=at(s.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function Z9(s,t){const n=s.name,o=n.charAt(0).toUpperCase()+n.slice(1),a="get"+o+"AtOutCoords",i=s.shapeInfo.logicalShape.length,p=t.logicalShape.length,r=QR(s.shapeInfo.logicalShape,t.logicalShape),h=qn(p),f=p-i;let u;const l=["x","y","z","w","u","v"];i===0?u="":p<2&&r.length>=1?u="coords = 0;":u=r.map(g=>`coords.${l[g+f]} = 0;`).join(`
`);let d="";p<2&&i>0?d="coords":d=s.shapeInfo.logicalShape.map((g,w)=>`coords.${l[w+f]}`).join(", ");let x="return outputValue;";const m=at(s.shapeInfo.logicalShape)===1,b=at(t.logicalShape)===1;if(i===1&&!m&&!b)x=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!b)p===1?x=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:x=`
        return vec4(outputValue.x);
      `;else if(r.length){const g=i-2,w=i-1;r.indexOf(g)>-1&&r.indexOf(w)>-1?x="return vec4(outputValue.x);":r.indexOf(g)>-1?x="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":r.indexOf(w)>-1&&(x="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${a}() {
      ${h} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${o}(${d});
      ${x}
    }
  `}function Q9(s,t){const n=s.name,o=n.charAt(0).toUpperCase()+n.slice(1),a="get"+o+"AtOutCoords",i=t.texShape,p=s.shapeInfo.texShape,r=s.shapeInfo.logicalShape.length,h=t.logicalShape.length;if(!s.shapeInfo.isUniform&&r===h&&s.shapeInfo.flatOffset==null&&$n(p,i))return`
      float ${a}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const f=qn(h),u=QR(s.shapeInfo.logicalShape,t.logicalShape),l=h-r;let d;const x=["x","y","z","w","u","v"];r===0?d="":h<2&&u.length>=1?d="coords = 0;":d=u.map(m=>`coords.${x[m+l]} = 0;`).join(`
`);let S="";return h<2&&r>0?S="coords":S=s.shapeInfo.logicalShape.map((m,y)=>`coords.${x[y+l]}`).join(", "),`
    float ${a}() {
      ${f} coords = getOutputCoords();
      ${d}
      return get${o}(${S});
    }
  `}function qn(s){if(s<=1)return"int";if(s===2)return"ivec2";if(s===3)return"ivec3";if(s===4)return"ivec4";if(s===5)return"ivec5";if(s===6)return"ivec6";throw Error(`GPU for rank ${s} is not yet supported`)}function Fw(s,t,n){const{newShape:o,keptDims:a}=el(t),i=t.length,p=s&&i===3&&t[0]===1,r=p?t.slice(1):o,h=!s&&i>1&&!$n(t,n)&&o.length<i||p;return{useSqueezeShape:h,uniformShape:h?r:t,keptDims:a}}function Oc(s,t){const n=JSON.parse(JSON.stringify(s));return n.shapeInfo.logicalShape=t,n}function $c(s,t){return t.map(n=>s[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(s,t,n,o){const a=n.map((u,l)=>{const d={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(d.flatOffset=u.texData.slice.flatOffset),{name:t.variableNames[l],shapeInfo:d}}),i=a.map(u=>u.shapeInfo),p={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},r=y9(a,p,t),h=HH(s.gl,r),f=s.createProgram(h);return Qe().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:h,source:r,webGLProgram:f,inShapeInfos:i,outShapeInfo:p,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(s.buildVao(f),Object.assign({program:t,fragmentShader:h,source:r,webGLProgram:f,inShapeInfos:i,outShapeInfo:p},tN(s,t,f)))}function tN(s,t,n){const o=[],a=[];let i,p,r,h=null,f=null;f=s.getUniformLocation(n,"NAN",!1),Qe().getNumber("WEBGL_VERSION")===1&&(h=s.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const l of t.variableNames){const d={name:l,uniform:s.getUniformLocation(n,l,u),offset:s.getUniformLocation(n,`offset${l}`,u)};t.enableShapeUniforms&&(d.shape=s.getUniformLocation(n,`${l}Shape`,u),d.texShape=s.getUniformLocation(n,`${l}TexShape`,u)),o.push(d)}if(t.enableShapeUniforms&&(i=s.getUniformLocation(n,"outShape",u),r=s.getUniformLocation(n,"outShapeStrides",u),p=s.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const l of t.customUniforms)a.push(s.getUniformLocation(n,l.name,u));return{variablesLocations:o,customUniformLocations:a,infLoc:h,nanLoc:f,outShapeLocation:i,outShapeStridesLocation:r,outTexShapeLocation:p}}function Sk(s,t){if(s.length!==t.length)throw Error(`Binary was compiled with ${s.length} inputs, but was executed with ${t.length} inputs`);s.forEach((n,o)=>{const a=n.logicalShape,i=t[o],p=i.shape;if(!$n(a,p))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${p} must match`);if(n.isUniform&&i.isUniform)return;const r=n.texShape,h=i.isUniform?null:i.texData.texShape;if(!$n(r,h))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${r} and ${h} must match`)})}function eq(s,t,n,o,a){t.program.enableShapeUniforms||(Sk(t.inShapeInfos,n),Sk([t.outShapeInfo],[o]));const i=o.texData.texture,p=o.texData.texShape;o.texData.isPacked?s.setOutputPackedMatrixTexture(i.texture,p[0],p[1]):s.setOutputMatrixTexture(i.texture,p[0],p[1]),s.setProgram(t.webGLProgram),s.bindVertexArray(t.webGLProgram.vao),Qe().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&s.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&s.gl.uniform1f(t.nanLoc,NaN);for(let h=0;h<n.length;++h){const f=n[h],{uniform:u,offset:l,shape:d,texShape:x}=t.variablesLocations[h];if(d){const{uniformShape:S}=Fw(t.program.packedInputs,f.shape,f.texData.texShape);switch(S.length){case 1:s.gl.uniform1iv(d,new Int32Array(S));break;case 2:s.gl.uniform2iv(d,new Int32Array(S));break;case 3:s.gl.uniform3iv(d,new Int32Array(S));break;case 4:s.gl.uniform4iv(d,new Int32Array(S));break}}if(x&&s.gl.uniform2i(x,f.texData.texShape[0],f.texData.texShape[1]),u!=null){if(f.isUniform){if(at(f.shape)<2)s.gl.uniform1f(u,f.uniformValues[0]);else{let S=f.uniformValues;S instanceof Float32Array||(S=new Float32Array(S)),s.gl.uniform1fv(u,S)}continue}f.texData.slice!=null&&l!=null&&s.gl.uniform1i(l,f.texData.slice.flatOffset),s.setInputMatrixTexture(f.texData.texture.texture,u,h)}}const r=t.outShapeLocation;if(r)switch(o.shape.length){case 1:s.gl.uniform1iv(r,new Int32Array(o.shape));break;case 2:s.gl.uniform2iv(r,new Int32Array(o.shape));break;case 3:s.gl.uniform3iv(r,new Int32Array(o.shape));break;case 4:s.gl.uniform4iv(r,new Int32Array(o.shape));break}if(t.outShapeStridesLocation){const h=Vt(o.shape);switch(o.shape.length){case 2:s.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(h));break;case 3:s.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(h));break;case 4:s.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(h));break}}if(t.outTexShapeLocation&&s.gl.uniform2i(t.outTexShapeLocation,o.texData.texShape[0],o.texData.texShape[1]),t.program.customUniforms&&a)for(let h=0;h<t.program.customUniforms.length;++h){const f=t.program.customUniforms[h],u=t.customUniformLocations[h],l=a[h];if(f.type==="float")s.gl.uniform1fv(u,l);else if(f.type==="vec2")s.gl.uniform2fv(u,l);else if(f.type==="vec3")s.gl.uniform3fv(u,l);else if(f.type==="vec4")s.gl.uniform4fv(u,l);else if(f.type==="int")s.gl.uniform1iv(u,l);else if(f.type==="ivec2")s.gl.uniform2iv(u,l);else if(f.type==="ivec3")s.gl.uniform3iv(u,l);else if(f.type==="ivec4")s.gl.uniform4iv(u,l);else throw Error(`uniform type ${f.type} is not supported yet.`)}s.executeProgram()}function tq(s,t,n){let o="";t.concat(n).forEach(p=>{const r=p.texData!=null&&p.texData.slice!=null&&p.texData.slice.flatOffset>0;if(s.enableShapeUniforms&&!p.isUniform){const h=p.texData.texShape,{useSqueezeShape:f,uniformShape:u,keptDims:l}=Fw(s.packedInputs,p.shape,h);let d="",x="",S="";if(u.length===1&&s.packedInputs){const C=[Math.ceil(h[0]/2),Math.ceil(h[1]/2)];d=`${C[0]>1}_${C[1]>1}`}else if(u.length===2&&!s.packedInputs)x=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!s.packedInputs){const C=Vt(u);S=`${C[0]===h[1]}_${C[C.length-1]===h[1]}`}const m=p.shape.length,y=u.length===2&&$n(p.shape,h),b=at(p.shape)===1,g=mc(p.shape,n.shape),w=!s.packedInputs&&m===n.shape.length&&$n(h,n.texData.texShape),_=s.packedInputs||u.length>2?"":`${h[0]>1}_${h[1]>1}`;o+=`${m}_${w}_${f?l:""}_${u.length}_${b}_${g}_${y}_${d}_${x}_${S}_${_}_${r}`}else{const h=p.isUniform?"uniform":p.texData.texShape;o+=`${p.shape}_${h}_${r}`}});const a=s.userCode;let i=s.constructor.name;return i+="_"+o+"_"+a+`${Qe().getNumber("WEBGL_VERSION")}`,i}function Cs(s){return Qe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&s<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nq{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ds();this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Ny(["r","c","d"],t):hu(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rq{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sh.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ds();this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Ny(["r","c","d"],t):hu(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sq{constructor(t){this.variableNames=["A"],this.outTexUsage=co.DOWNLOAD;const n=Ds();this.outputShape=t,this.userCode=`
      ${ZR}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oq{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=co.DOWNLOAD;const n=Ds();this.outputShape=t,this.userCode=`
      ${ZR}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aq={R:0,G:1,B:2,A:3};class _k{constructor(t,n=!1,o="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const a=Ds();this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let p="";for(let r=0;r<o.length;r++){const h=o[r];p+=`
          if(offset == ${r}) {
            result = values[${aq[h]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?Lw():$w(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${o.length});

        flatIndex = idiv(flatIndex, ${o.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${a.texture2D}(A, uv);
          ${p}
        }
        ${a.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iq{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=Ds();this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length);let a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let p=0;p<=1;p++)for(let r=0;r<=1;r++){const h=p*2+r;a+=`
          localCoords = coords;
          if(localCoords[2] + ${r} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${r};
          if (localCoords[1] + ${p} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${p};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${o.texture2D}(A, uv);

            if (offset == 0) {
              result[${h}] = values[0];
            } else if (offset == 1) {
              result[${h}] = values[1];
            } else if (offset == 2) {
              result[${h}] = values[2];
            } else {
              result[${h}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?Lw():$w(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${a}

          ${o.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lq(s){const t=Ds(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return WH(s,n)}function uq(s){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return KH(s,t)}function cq(s){const t=new Uint16Array([0,1,2,2,1,3]);return ZH(s,t)}function If(s,t,n,o,a,i){JH(t,n);const p=QH(s),r=s.TEXTURE_2D;return Mt(s,()=>s.bindTexture(r,p)),Mt(s,()=>s.texParameteri(r,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE)),Mt(s,()=>s.texParameteri(r,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE)),Mt(s,()=>s.texParameteri(r,s.TEXTURE_MIN_FILTER,s.NEAREST)),Mt(s,()=>s.texParameteri(r,s.TEXTURE_MAG_FILTER,s.NEAREST)),Qe().getNumber("WEBGL_VERSION")===1?Mt(s,()=>s.texImage2D(r,0,o,t,n,0,a,i,null)):Mt(s,()=>s.texStorage2D(r,1,o,t,n)),Mt(s,()=>s.bindTexture(s.TEXTURE_2D,null)),{texture:p,texShape:[n,t]}}function nN(s){return s.internalFormatFloat}function dq(s,t,n,o){const[a,i]=Ef(t,n);return If(s,a,i,nN(o),o.textureFormatFloat,s.FLOAT)}function rN(s){return s.internalFormatHalfFloat}function hq(s,t,n,o){const[a,i]=Ef(t,n);return If(s,a,i,rN(o),o.textureFormatFloat,o.textureTypeHalfFloat)}function sN(s){return s.downloadTextureFormat}function fq(s,t,n,o){const[a,i]=Ef(t,n);return If(s,a,i,sN(o),s.RGBA,s.UNSIGNED_BYTE)}function oN(s){return s.internalFormatPackedFloat}function pq(s,t,n,o){const[a,i]=Nc(t,n);return If(s,a,i,oN(o),s.RGBA,s.FLOAT)}function aN(s){return s.internalFormatPackedHalfFloat}function mq(s,t,n,o){const[a,i]=Nc(t,n);return If(s,a,i,aN(o),s.RGBA,o.textureTypeHalfFloat)}function gq(s,t,n){return Mt(s,()=>s.bindBuffer(s.ARRAY_BUFFER,n)),vk(s,t,"clipSpacePos",n,3,20,0)&&vk(s,t,"uv",n,2,20,12)}function yq(s,t,n,o,a,i){Mt(s,()=>s.bindTexture(s.TEXTURE_2D,t));let p,r,h;a instanceof Uint8Array?(p=new Uint8Array(n*o*4),r=s.UNSIGNED_BYTE,h=s.RGBA):(p=new Float32Array(n*o*4),r=s.FLOAT,h=i.internalFormatPackedFloat),p.set(a),Qe().getNumber("WEBGL_VERSION")===2?Mt(s,()=>s.texSubImage2D(s.TEXTURE_2D,0,0,0,n,o,s.RGBA,r,p)):Mt(s,()=>s.texImage2D(s.TEXTURE_2D,0,h,n,o,0,s.RGBA,r,p)),Mt(s,()=>s.bindTexture(s.TEXTURE_2D,null))}function bq(s,t,n){Mt(s,()=>s.bindTexture(s.TEXTURE_2D,t)),n.data instanceof Uint8Array?Qe().getNumber("WEBGL_VERSION")===2?Mt(s,()=>s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.width,n.height,s.RGBA,s.UNSIGNED_BYTE,n.data)):Mt(s,()=>s.texImage2D(s.TEXTURE_2D,0,s.RGBA,n.width,n.height,0,s.RGBA,s.UNSIGNED_BYTE,n.data)):Qe().getNumber("WEBGL_VERSION")===2?Mt(s,()=>s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,n)):Mt(s,()=>s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,n)),Mt(s,()=>s.bindTexture(s.TEXTURE_2D,null))}function vq(s,t,n,o){const a=s.createBuffer();Mt(s,()=>s.bindBuffer(s.PIXEL_PACK_BUFFER,a));const r=4*4*t*n;return Mt(s,()=>s.bufferData(s.PIXEL_PACK_BUFFER,r,s.STREAM_READ)),Mt(s,()=>s.readPixels(0,0,n,t,s.RGBA,s.FLOAT,0)),Mt(s,()=>s.bindBuffer(s.PIXEL_PACK_BUFFER,null)),a}function xq(s,t,n){const o=s,a=new Float32Array(n);return o.bindBuffer(o.PIXEL_PACK_BUFFER,t),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,a),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),a}function wq(s,t,n,o){const[a,i]=Ef(t,n),p=4,r=new Uint8Array(FH(t*n,p));return Mt(s,()=>s.readPixels(0,0,a,i,o.downloadTextureFormat,s.UNSIGNED_BYTE,r)),new Float32Array(r.buffer)}function Sq(s,t,n,o,a,i,p,r){const h=s,f=new Float32Array(PH(i,p));return h.bindBuffer(h.PIXEL_PACK_BUFFER,t),h.getBufferSubData(h.PIXEL_PACK_BUFFER,0,f),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),f}function _q(s,t,n){const o=new Float32Array(t*n*4);return Mt(s,()=>s.readPixels(0,0,n,t,s.RGBA,s.FLOAT,o)),o}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nv{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Qe().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,OH(n,t)):this.gl=oa(n),t=this.gl,Qe().getNumber("WEBGL_VERSION")===2){const i=t;this.createVertexArray=()=>Mt(i,()=>i.createVertexArray()),this.bindVertexArray=p=>Mt(i,()=>i.bindVertexArray(p)),this.deleteVertexArray=p=>Mt(i,()=>i.deleteVertexArray(p)),this.getVertexArray=()=>Mt(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(t!=null){const i=t.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Mt(t,()=>i.createVertexArrayOES()),this.bindVertexArray=p=>Mt(t,()=>i.bindVertexArrayOES(p)),this.deleteVertexArray=p=>Mt(t,()=>i.deleteVertexArrayOES(p)),this.getVertexArray=()=>Mt(t,()=>t.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let o="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Qe().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",p="OES_texture_half_float";if(this.textureFloatExtension=cm(this.gl,i),Do(this.gl,p))this.textureHalfFloatExtension=cm(this.gl,p);else if(Qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(o),Do(this.gl,a))this.colorBufferHalfFloatExtension=cm(this.gl,a);else if(Qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(o="EXT_color_buffer_float",Do(this.gl,o))this.colorBufferFloatExtension=this.gl.getExtension(o);else if(Do(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=uq(this.gl),this.indexBuffer=cq(this.gl),this.framebuffer=e9(this.gl),this.textureConfig=Ow(this.gl,this.textureHalfFloatExtension)}get debug(){return Qe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Mt(t,()=>t.finish()),Mt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Mt(t,()=>t.deleteFramebuffer(this.framebuffer)),Mt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Mt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Mt(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),dq(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),hq(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),fq(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),bq(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,o,a){this.throwIfDisposed(),yq(this.gl,t,n,o,a,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),mq(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),pq(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(xk(this.gl,this.framebuffer),this.outputTexture=null),Mt(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,o){return this.downloadMatrixDriver(t,()=>wq(this.gl,n,o,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,o,a,i,p){return Sq(this.gl,t,n,o,a,i,p,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return xq(this.gl,t,n)}createBufferFromTexture(t,n,o){this.bindTextureToFrameBuffer(t);const a=vq(this.gl,n,o,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,o;if(Qe().getBool("WEBGL_FENCE_API_ENABLED")){const a=t,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),o=()=>{const p=a.clientWaitSync(i,0,0);return p===a.ALREADY_SIGNALED||p===a.CONDITION_SATISFIED},n=i}else Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),o=()=>this.isQueryAvailable(n,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):o=()=>!0;return{query:n,isFencePassed:o}}downloadMatrixFromPackedTexture(t,n,o){return this.downloadMatrixDriver(t,()=>_q(this.gl,n,o))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=lq(n));const o=XH(n);Mt(n,()=>n.attachShader(o,this.vertexShader)),Mt(n,()=>n.attachShader(o,t)),YH(n,o);const a=Object.assign(o,{vao:this.createVertexArray()});return this.debug&&Qb(n,a),a}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const n=this.gl;Mt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),gq(n,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(Mt(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Qb(this.gl,this.program),Mt(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,o=!0){return this.throwIfDisposed(),o?n9(this.gl,t,n):r9(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),Mt(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,o){this.throwIfDisposed(),this.throwIfNoProgram(),s9(this.gl,t,n,o)}setOutputMatrixTexture(t,n,o){this.setOutputMatrixTextureDriver(t,o,n)}setOutputPackedMatrixTexture(t,n,o){this.throwIfDisposed();const[a,i]=Nc(n,o);this.setOutputMatrixTextureDriver(t,a,i)}setOutputMatrixWriteRegion(t,n,o,a){this.setOutputMatrixWriteRegionDriver(o,t,a,n)}setOutputPackedMatrixWriteRegion(t,n,o,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Qb(this.gl,this.program),dm(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Mt(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Mt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=cm(this.gl,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const o=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=o.createQuery();return o.beginQuery(a.TIME_ELAPSED_EXT,i),i}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,o=this.getQueryTimerExtensionWebGL2();n.endQuery(o.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await sC(()=>this.disposed||this.isQueryAvailable(t,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const o=this.gl;return o.getQueryParameter(t,o.QUERY_RESULT)/1e6}else{const o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(t,o.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const o=this.gl,a=this.getQueryTimerExtensionWebGL2(),i=o.getQueryParameter(t,o.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const o=this.getQueryTimerExtensionWebGL1(),a=o.getQueryObjectEXT(t,o.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=Cq(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:o}=this.itemsToPoll[n];o()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1)return;let o;"setTimeoutCustom"in Qe().platform&&(o=Qe().platform.setTimeoutCustom.bind(Qe().platform)),sC(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,o)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),Jb(this.gl,t,this.framebuffer),this.debug&&dm(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(Jb(this.gl,this.outputTexture,this.framebuffer),this.debug&&dm(this.gl)):xk(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const o=n();return this.unbindTextureToFrameBuffer(),o}setOutputMatrixTextureDriver(t,n,o){this.throwIfDisposed();const a=this.gl;Jb(a,t,this.framebuffer),this.debug&&dm(a),this.outputTexture=t,Mt(a,()=>a.viewport(0,0,n,o)),Mt(a,()=>a.scissor(0,0,n,o))}setOutputMatrixWriteRegionDriver(t,n,o,a){this.throwIfDisposed(),Mt(this.gl,()=>this.gl.scissor(t,n,o,a))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Cq(s){let t=0;for(;t<s.length&&s[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:kq,bincountImpl:iN,bincountReduceImpl:Tq,bitwiseAndImpl:Eq,castImpl:jq,ceilImpl:Iq,concatImpl:Aq,equalImpl:Rq,expImpl:Nq,expm1Impl:Dq,floorImpl:Mq,gatherNdImpl:Oq,gatherV2Impl:$q,greaterImpl:Lq,greaterEqualImpl:Fq,lessImpl:Pq,lessEqualImpl:Bq,linSpaceImpl:Uq,logImpl:zq,maxImpl:Vq,maximumImpl:Gq,minimumImpl:Wq,multiplyImpl:Hq,negImpl:qq,notEqualImpl:Xq,prodImpl:Yq,raggedGatherImpl:Kq,raggedRangeImpl:Zq,raggedTensorToTensorImpl:Qq,rangeImpl:Jq,rsqrtImpl:eX,scatterImpl:tX,sigmoidImpl:nX,simpleAbsImpl:lN,sliceImpl:rX,sparseFillEmptyRowsImpl:sX,sparseReshapeImpl:oX,sparseSegmentReductionImpl:uN,sqrtImpl:aX,staticRegexReplaceImpl:iX,stridedSliceImpl:lX,stringNGramsImpl:uX,stringSplitImpl:cX,stringToHashBucketFastImpl:dX,subImpl:hX,tileImpl:fX,topKImpl:pX,transposeImpl:Pw,uniqueImpl:mX}=bV;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cN(s,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${s}.${n}`)}function As(s,t){return t===1?[s]:cN(s,t)}function gX(s,t){if(s===1)return"rc";let n="";for(let o=0;o<s;o++)n+=t[o],o<s-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yX{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=Cs(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=As("rc",this.rank),o=qn(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),p=this.getOutput(n);this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();

          if(${a}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${p}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){let i=`${o===0?"r":"rp1"}, ${a===0?"c":"cp1"}`;for(let p=2;p<this.rank;p++)i=`${t[t.length-1-p]},`+i;n.push(i)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let o=this.rank-2;o<this.rank;o++)n+=`${t[o]} >= ${this.enableShapeUniforms?`outShape[${o}]`:this.outputShape[o]}`,o<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),o=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${o};
      bool rEdge = rp1 >= ${a};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dN{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length);let o="";for(let a=0;a<4;a++){let i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),o+=`
        ${i}
        ${a>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${a}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${a>0?"}":""}
      `}this.userCode=`
      ${bX(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?Lw():$w(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${o}

        setOutput(result);
      }
    `}}function bX(s,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?g9(["r","c","d"],"inputShape"):hu(["r","c","d"],s)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vX{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,n,o){const a=kk(n,o),i=Tk(t,a,o);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const p=Ck(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,o);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=p,this.log();const h=this.freeTextures[i].pop();return this.usedTextures[i].push(h),h}let r;return a===cs.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):a===cs.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):a===cs.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):a===cs.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):a===cs.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(r),this.numUsedTextures++,this._numBytesAllocated+=p,this.log(),r}releaseTexture(t,n,o,a){if(this.freeTextures==null)return;const i=kk(o,a),p=Tk(n,i,a);p in this.freeTextures||(this.freeTextures[p]=[]);const r=Ck(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,a),h=Qe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");h!==-1&&this._numBytesAllocated>h?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=r):(this.freeTextures[p].push(t),this.numFreeTextures++,this._numBytesFree+=r),this.numUsedTextures--;const f=this.usedTextures[p],u=f&&f.indexOf(t);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");f[u]=f[f.length-1],f.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function xX(s,t){const n=s;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===s.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function Ck(s,t,n,o,a){const i=wX(t,o);let p;if(a){const[h,f]=Nc(s[0],s[1]);p=h*f}else{const[h,f]=Ef(s[0],s[1]);p=h*f}const r=xX(n,i);return p*r}function wX(s,t){switch(s){case cs.PACKED_2X2_FLOAT32:return oN(t);case cs.PACKED_2X2_FLOAT16:return aN(t);case cs.UNPACKED_FLOAT32:return nN(t);case cs.UNPACKED_FLOAT16:return rN(t);case cs.PACKED_4X1_UNSIGNED_BYTE:return sN(t);default:throw new Error(`Unknown physical texture type ${s}`)}}function SX(s){return Qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?s?cs.PACKED_2X2_FLOAT32:cs.UNPACKED_FLOAT32:s?cs.PACKED_2X2_FLOAT16:cs.UNPACKED_FLOAT16}function kk(s,t){if(s===co.UPLOAD)return cs.PACKED_2X2_FLOAT32;if(s===co.RENDER||s==null)return SX(t);if(s===co.DOWNLOAD||s===co.PIXELS)return cs.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${s}`)}function Tk(s,t,n){return`${s[0]}_${s[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sa{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Fo="if (isnan(x)) return x;",_X="return x;",Ek="return abs(x);",CX="return (x >= 0.0) ? x : (exp(x) - 1.0);",kX=Fo+`
  return (x < 0.0) ? 0.0 : x;
`,TX=Fo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Pi="return x;",EX="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jX="return x;",IX=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,AX=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RX=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,NX="return 1.0 / (1.0 + exp(-1.0 * x));";class zi{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DX{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length);const n=t.length,o=As("rc",n),a=qn(n),i=gX(n,o),p=o.slice(-2),r=n<=1?"rc":`vec2(${p.join(",")})`;this.userCode=`
      void main() {
        ${a} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${r}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MX=DE,OX=1e-7,$X=1e-4,pm={};function LX(s){return s in pm||(pm[s]={}),pm[s]}const FX=Qe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),PX=600;function BX(){return Qe().global.screen==null?1024:Qe().global.screen.height*Qe().global.screen.width*window.devicePixelRatio*PX/1024/1024}class Dy extends o1{nextDataId(){return Dy.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Qe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof nv)n=t;else{const o=oa(Qe().getNumber("WEBGL_VERSION"),t);n=new nv(o)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const o=oa(Qe().getNumber("WEBGL_VERSION"));n=new nv(o),this.binaryCache=LX(Qe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new vX(this.gpgpu),this.numMBBeforeWarning=BX(),this.texData=new aT(this,ya())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,n,o,a,i,p){const r=this.makeTensorInfo(n,o),h=this.texData.get(r.dataId);h.isPacked=!1,h.texture={texture:t,texShape:[a,i]},h.texShape=[a,i];const f=hm(n),u=new _k(f,!1,p),l=this.runWebGLProgram(u,[r],o,[[a,i]]);return l.shape=n,h.texture=null,this.disposeIntermediateTensorInfo(r),l.dataId}write(t,n,o){if((Qe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Qe().getBool("DEBUG"))&&this.checkNumericalProblems(t),o==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:n,dtype:o,values:t,usage:co.UPLOAD,refCount:1}),a}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,o,a,i){if(Qe().getBool("DEBUG")&&this.checkNumericalProblems(n),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:o,dtype:a,values:n,usage:co.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:o,dtype:a,complexTensorInfos:i,slice:p,shape:r,isPacked:h}=n;if(p!=null){let d;h?d=new zi(r,Pi):d=new Sa(r,Pi);const x=this.runWebGLProgram(d,[{dataId:t,shape:r,dtype:a}],a),S=this.readSync(x.dataId);return this.disposeIntermediateTensorInfo(x),S}if(o!=null)return this.convertAndCacheOnCPU(t);if(a==="string")return o;const f=this.activeTimers!=null;let u;f&&(u=$s());let l;if(a==="complex64"){const d=this.readSync(i.real.dataId),x=this.readSync(i.imag.dataId);l=si(d,x)}else l=this.getValuesFromTexture(t);return f&&(this.downloadWaitMs+=$s()-u),this.convertAndCacheOnCPU(t,l)}async read(t){if(this.pendingRead.has(t)){const S=this.pendingRead.get(t);return new Promise(m=>S.push(m))}const n=this.texData.get(t),{values:o,shape:a,slice:i,dtype:p,complexTensorInfos:r,isPacked:h}=n;if(i!=null){let S;h?S=new zi(a,Pi):S=new Sa(a,Pi);const m=this.runWebGLProgram(S,[{dataId:t,shape:a,dtype:p}],p),y=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),y}if(o!=null)return this.convertAndCacheOnCPU(t);if(Qe().getBool("DEBUG")&&!Qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Qe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let f=null,u;if(p!=="complex64"&&Qe().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(t);const S=this.texData.get(u.dataId);f=this.gpgpu.createBufferFromTexture(S.texture.texture,...um(a))}this.pendingRead.set(t,[]),p!=="complex64"&&await this.gpgpu.createAndWaitForFence();let l;if(p==="complex64"){const S=await Promise.all([this.read(r.real.dataId),this.read(r.imag.dataId)]),m=S[0],y=S[1];l=si(m,y)}else if(f==null)l=this.getValuesFromTexture(t);else{const S=at(a);l=this.gpgpu.downloadFloat32MatrixFromBuffer(f,S)}if(u!=null&&this.disposeIntermediateTensorInfo(u),f!=null){const S=this.gpgpu.gl;Mt(S,()=>S.deleteBuffer(f))}const d=this.convertAndCacheOnCPU(t,l),x=this.pendingRead.get(t);return this.pendingRead.delete(t),x.forEach(S=>S(d)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&ya().removeDataId(t,this),this.pendingDeletes--),d}readToGPU(t,n={}){const o=this.texData.get(t),{values:a,shape:i,slice:p,dtype:r,isPacked:h,texture:f}=o;if(r==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(p!=null){let x;h?x=new zi(i,Pi):x=new Sa(i,Pi);const S=this.runWebGLProgram(x,[{dataId:t,shape:i,dtype:r}],r),m=this.readToGPU(S,n);return this.disposeIntermediateTensorInfo(S),m}if(f==null)throw a!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(t,n.customTexShape),l=ya().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:l},d.texture)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const o=n.map(a=>qi(a));return fn(t.shape,t.dtype,o)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return fn(t.shape,t.dtype,n)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const o=t[n];if(!VH(o))throw Qe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${o} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${o} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:o,isPacked:a}=this.texData.get(t),i=at(n);if(Qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const d=this.decode(t),x=this.texData.get(d.dataId),S=this.gpgpu.downloadMatrixFromPackedTexture(x.texture.texture,...um(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(d),S}const p=Qe().getBool("WEBGL_PACK")&&a===!0,r=p?hm(n):n,h=p?new oq(r):new sq(r),f=this.runWebGLProgram(h,[{shape:r,dtype:o,dataId:t}],"float32"),u=this.texData.get(f.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(f),l}timerAvailable(){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,o=[];let a=!1;this.programTimersStack==null?(this.programTimersStack=o,a=!0):this.activeTimers.push(o),this.activeTimers=o,t();const i=Gl(this.activeTimers.map(h=>h.query)).filter(h=>h!=null),p=Gl(this.activeTimers.map(h=>h.name)).filter(h=>h!=null);this.activeTimers=n,a&&(this.programTimersStack=null);const r={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const h=await Promise.all(i);r.kernelMs=rO(h),r.getExtraProfileInfo=()=>h.map((f,u)=>({name:p[u],ms:f})).map(f=>`${f.name}: ${f.ms}`).join(", ")}else r.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,r})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:$s(),endMs:null}}endTimer(t){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=$s(),t)}async getQueryTime(t){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:o}=this.texData.get(t);return o!=null&&(this.disposeData(o.real.dataId,n),this.disposeData(o.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:o,texShape:a,usage:i,isPacked:p,slice:r}=this.texData.get(t),h=r&&r.origDataId||t,f=this.dataRefCount.get(h);f>1?this.dataRefCount.set(h,f-1):(this.dataRefCount.delete(h),n!=null&&(this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(n,a,i,p)));const u=this.texData.get(t);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=FX){return Qe().getBool("WEBGL_CPU_FORWARD")&&t.every(o=>this.texData.get(o.dataId).texture==null&&at(o.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){uo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return MX(t.shape,n)}packedUnaryOp(t,n,o){const a=new zi(t.shape,n),i=this.compileAndRun(a,[t],o);return ya().makeTensorFromTensorInfo(i)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const a=lN(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,a)}if(Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Ek,t.dtype);const n=new Sa(t.shape,Ek),o=this.compileAndRun(n,[t]);return ya().makeTensorFromTensorInfo(o)}makeTensorInfo(t,n,o){let a;if(n==="string"&&o!=null&&o.length>0&&dh(o[0])){const i=o.map(p=>Gi(p));a=this.write(i,t,n)}else a=this.write(o,t,n);return this.texData.get(a).usage=null,{dataId:a,shape:t,dtype:n}}makeOutput(t,n,o){return ya().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,o),this)}unpackTensor(t){const n=new DX(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new yX(t.shape);return this.runWebGLProgram(n,[t],t.dtype,null,!0)}packedReshape(t,n){const o=[wc(t.shape),...Sc(t.shape)],a={dtype:t.dtype,shape:o,dataId:t.dataId},i=[wc(n),...Sc(n)],p=new dN(i,o),r=!0,h=[o],f=this.runWebGLProgram(p,[a],t.dtype,h,r);return{dataId:f.dataId,shape:n,dtype:f.dtype}}decode(t,n){const o=this.texData.get(t),{isPacked:a,shape:i,dtype:p}=o;if(n!=null){const d=at(i),x=n[0]*n[1]*4;ye(d<=x,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const r=hm(i);let h;a?h=new rq(r):h=new nq(r);const f=!0,u=[n??um(r)],l=this.runWebGLProgram(h,[{shape:r,dtype:p,dataId:t}],p,u,f,n);return{dtype:p,shape:i,dataId:l.dataId}}runWebGLProgram(t,n,o,a,i=!1,p){const r=this.makeTensorInfo(t.outputShape,o),h=this.texData.get(r.dataId);if(t.packedOutput&&(h.isPacked=!0),t.outPackingScheme===sh.DENSE){const b=p??um(t.outputShape);h.texShape=b.map(g=>g*2)}if(t.outTexUsage!=null&&(h.usage=t.outTexUsage),at(r.shape)===0)return h.values=vs(r.dtype,0),r;const f=[],u=n.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let g=this.texData.get(b.dataId);if(g.texture==null){if(!t.packedInputs&&at(b.shape)<=Qe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:g.values};t.packedInputs&&(g.isPacked=!0,g.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!g.isPacked!=!!t.packedInputs)b=g.isPacked?this.unpackTensor(b):this.packTensor(b),f.push(b),g=this.texData.get(b.dataId);else if(g.isPacked&&!eg(g.shape,b.shape)){const w=b,_=b.shape;b.shape=g.shape,b=this.packedReshape(b,_),f.push(b),g=this.texData.get(b.dataId),w.shape=_}return{shape:b.shape,texData:g,isUniform:!1}});this.uploadToGPU(r.dataId);const l={shape:r.shape,texData:h,isUniform:!1},d=tq(t,u,l),x=this.getAndSaveBinary(d,()=>J9(this.gpgpu,t,u,l)),S=this.activeTimers!=null;let m;S&&(m=this.startTimer()),Qe().get("ENGINE_COMPILE_ONLY")||eq(this.gpgpu,x,u,l,a),f.forEach(b=>this.disposeIntermediateTensorInfo(b)),S&&(m=this.endTimer(m),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(m)}));const y=Qe().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const b=$s();b-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!Qe().getBool("WEBGL_LAZILY_UNPACK")&&h.isPacked&&i===!1){const b=this.unpackTensor(r);return this.disposeIntermediateTensorInfo(r),b}return r}compileAndRun(t,n,o,a,i=!1){return o=o||n[0].dtype,this.runWebGLProgram(t,n,o,a,i)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Qe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Xe(()=>{if(!Qe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=Qe().getBool("DEBUG");Qe().set("DEBUG",!1);const n=this.abs(On(1e-8)).dataSync()[0];if(Qe().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?OX:$X}uploadToGPU(t){const n=this.texData.get(t),{shape:o,dtype:a,values:i,texture:p,usage:r,isPacked:h}=n;if(p!=null)return;const f=this.activeTimers!=null;let u;f&&(u=$s());let l=n.texShape;if(l==null&&(l=i9(o,h),n.texShape=l),i!=null){const d=hm(o);let x,S=l[1],m=l[0];const y=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(h||!y)&&([S,m]=Nc(l[0],l[1])),h?x=new iq(d,y):x=new _k(d,y);const b=y?[m,S]:l,g=this.makeTensorInfo(b,a),w=this.texData.get(g.dataId);y?w.usage=co.PIXELS:w.usage=co.UPLOAD,w.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),S,m,i);const _=[[m,S]],k=this.runWebGLProgram(x,[g],a,_,!0),E=this.texData.get(k.dataId);n.texShape=E.texShape,n.isPacked=E.isPacked,n.usage=E.usage,Qe().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(n.texture=E.texture,n.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(g),f&&(this.uploadWaitMs+=$s()-u)}else{const d=this.acquireTexture(l,r,a,h);n.texture=d}}convertAndCacheOnCPU(t,n){const o=this.texData.get(t),{dtype:a}=o;return n!=null&&(o.values=UX(n,a)),o.values}acquireTexture(t,n,o,a){if(this.numBytesInGPU+=this.computeBytes(t,o),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,a)}computeBytes(t,n){return t[0]*t[1]*jm(n)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(n));return Promise.all(t)}else{for(const[,n]of Object.entries(this.binaryCache)){const o=new Promise(a=>{try{this.checkCompletion_(n),a(!0)}catch(i){throw i}});t.push(o)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await QE(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(KR(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:n,customUniformLocations:o,infLoc:a,nanLoc:i,outShapeLocation:p,outShapeStridesLocation:r,outTexShapeLocation:h}=tN(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=n,t.customUniformLocations=o,t.infLoc=a,t.nanLoc=i,t.outShapeLocation=p,t.outShapeStridesLocation=r,t.outTexShapeLocation=h}}createTensorFromGPUData(t,n,o){t.channels=t.channels||"RGBA";const{texture:a,height:i,width:p,channels:r}=t,h=ya().backend;if(!h.gpgpu.gl.isTexture(a))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const f=h.writeTexture(a,n,o,i,p,r);return ya().makeTensorFromDataId(f,n,o,h)}}Dy.nextDataId=0;function UX(s,t){if(t==="float32"||t==="complex64")return s;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(s.length):new Uint8Array(s.length);for(let o=0;o<n.length;++o)n[o]=Math.round(s[o]);return n}else throw new Error(`Unknown dtype ${t}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */XT()&&ZT("webgl",()=>new Dy,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bw=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class ru{constructor(t,n,o){this.variableNames=["A","B"],this.outputShape=on(n,o),this.enableShapeUniforms=Cs(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pu=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Lc{constructor(t,n,o,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=on(n,o);const i=this.outputShape.length;this.enableShapeUniforms=Cs(i);let p="";if(a)if(i===0||at(this.outputShape)===1)p=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(p=`
          ${qn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?p+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:p+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const h=As("coords",i);this.enableShapeUniforms?p+=`
            bool nextRowOutOfBounds =
              (${h[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${h[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:p+=`
            bool nextRowOutOfBounds =
              (${h[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${h[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${p}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eo(s){const{inputs:t,backend:n}=s,{x:o}=t;return n.incRef(o.dataId),{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}const zX={kernelName:Nh,backendName:"webgl",kernelFunc:eo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cl(s){const{inputs:t,backend:n}=s,{real:o,imag:a}=t,i=n.makeTensorInfo(o.shape,"complex64"),p=n.texData.get(i.dataId),r=eo({inputs:{x:o},backend:n}),h=eo({inputs:{x:a},backend:n});return p.complexTensorInfos={real:r,imag:h},i}const VX={kernelName:v1,backendName:"webgl",kernelFunc:cl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hN="return (a < 0.) ? b * a : a;",fN=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function GX(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{alpha:i}=o,p=n.makeTensorInfo([],"float32",tl(i,"float32")),r=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(fN,a.shape,p.shape):new ru(hN,a.shape,p.shape),h=n.runWebGLProgram(r,[a,p],"float32");return n.disposeIntermediateTensorInfo(p),h}const WX={kernelName:Ig,backendName:"webgl",kernelFunc:GX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pN="return (a < 0.) ? b * a : a;",mN=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function HX(s){const{inputs:t,backend:n}=s,{x:o,alpha:a}=t,i=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(mN,o.shape,a.shape):new ru(pN,o.shape,a.shape);return n.runWebGLProgram(i,[o,a],"float32")}const qX={kernelName:Xg,backendName:"webgl",kernelFunc:HX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fc="if (isnan(x)) return x;";function En({opSnippet:s,packedOpSnippet:t,cpuKernelImpl:n,dtype:o}){return({inputs:a,backend:i})=>{const{x:p}=a,r=i,h=o||p.dtype;if(r.shouldExecuteOnCPU([p])&&n!=null){const l=r.texData.get(p.dataId),d=n(l.values,h);return r.makeTensorInfo(p.shape,h,d)}const f=Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let u;return f?u=new zi(p.shape,t):u=new Sa(p.shape,s),r.runWebGLProgram(u,[p],h)}}function ps({opSnippet:s,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:o=!1,cpuKernelImpl:a,dtype:i}){return({inputs:p,backend:r})=>{const{a:h,b:f}=p,u=r;if(o&&h.dtype==="complex64"){const S=u.texData.get(h.dataId),m=u.texData.get(f.dataId),[y,b]=[[S.complexTensorInfos.real,m.complexTensorInfos.real],[S.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(w=>{const[_,C]=w,k={dataId:_.dataId,dtype:_.dtype,shape:h.shape},E={dataId:C.dataId,dtype:C.dtype,shape:f.shape},j=new ru(s,h.shape,f.shape);return u.runWebGLProgram(j,[k,E],Qs(_.dtype,C.dtype))}),g=cl({inputs:{real:y,imag:b},backend:u});return u.disposeIntermediateTensorInfo(y),u.disposeIntermediateTensorInfo(b),g}const l=i||Qs(h.dtype,f.dtype);if((h.dtype==="string"||f.dtype==="string"||u.shouldExecuteOnCPU([h,f]))&&a!=null){const S=u.texData.get(h.dataId).values,m=u.texData.get(f.dataId).values,y=h.dtype==="string"?oi(S):S,b=h.dtype==="string"?oi(m):m,[g,w]=a(h.shape,f.shape,y,b,l),_=u.makeTensorInfo(w,l),C=u.texData.get(_.dataId);return C.values=g,_}const d=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let x;return d?x=new Lc(t,h.shape,f.shape,n):x=new ru(s,h.shape,f.shape),u.runWebGLProgram(x,[h,f],l)}}function oh(s,t=!1){if(s==="linear")return t?jX:_X;if(s==="relu")return t?AX:kX;if(s==="elu")return t?IX:CX;if(s==="relu6")return t?RX:TX;if(s==="prelu")return t?mN:pN;if(s==="leakyrelu")return t?fN:hN;if(s==="sigmoid")return t?NX:EX;throw new Error(`Activation ${s} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gN{constructor(t,n,o,a=!1,i=!1,p=!1,r=null,h=!1,f=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o,this.enableShapeUniforms=Cs(this.outputShape.length);const u=a?t[1]:t[2],l=Math.ceil(u/2),d=a?"i * 2, rc.y":"rc.y, i * 2",x=i?"rc.z, i * 2":"i * 2, rc.z",S=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",b="";r&&(h?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:f?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,b="result = activation(result);");const g=p?"result += getBiasAtOutCoords();":"";p&&this.variableNames.push("bias"),h&&this.variableNames.push("preluActivationWeights"),f&&this.variableNames.push("leakyreluAlpha");let w="rc.x",_="rc.x";t[0]<n[0]?w=`imod(rc.x, ${t[0]})`:n[0]<t[0]&&(_=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${l}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${w};
        int batchB = ${_};
        for (int i = 0; i < ${l}; i++) {
          vec4 a = getMatrixA(batchA, ${d});
          vec4 b = getMatrixB(batchB, ${x});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${S[0]} * ${m[0]});
          result += (${S[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${g}

        ${b}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jk={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Ik{constructor(t,n,o){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=on(n,o),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ak="return a * b;";function Uw(s){const{inputs:t,backend:n}=s,{a:o,b:a}=t,i=Qs(o.dtype,a.dtype);if(o.dtype==="complex64"){const r=n.texData.get(o.dataId),h=n.texData.get(a.dataId),f=new Ik(jk.REAL,o.shape,a.shape),u=new Ik(jk.IMAG,o.shape,a.shape),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:o.shape},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:o.shape},{dataId:h.complexTensorInfos.real.dataId,dtype:h.complexTensorInfos.real.dtype,shape:a.shape},{dataId:h.complexTensorInfos.imag.dataId,dtype:h.complexTensorInfos.imag.dtype,shape:a.shape}],d=n.runWebGLProgram(f,l,"float32"),x=n.runWebGLProgram(u,l,"float32"),S=cl({inputs:{real:d,imag:x},backend:n});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(x),S}if(n.shouldExecuteOnCPU([o,a])){const r=n.texData.get(o.dataId),h=n.texData.get(a.dataId),[f,u]=Hq(o.shape,a.shape,r.values,h.values,i),l=n.makeTensorInfo(u,i),d=n.texData.get(l.dataId);return d.values=f,l}let p;return Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?p=new Lc(Ak,o.shape,a.shape):p=new ru(Ak,o.shape,a.shape),n.runWebGLProgram(p,[o,a],i)}const XX={kernelName:Uh,backendName:"webgl",kernelFunc:Uw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YX(s,t,n){const o=[wc(s.shape),...Sc(s.shape)],a={dtype:s.dtype,shape:o,dataId:s.dataId},i=[wc(t),...Sc(t)],p=new dN(i,o),r=!0,h=[o],f=n.runWebGLProgram(p,[a],s.dtype,h,r);return{dataId:f.dataId,shape:t,dtype:f.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function It(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{shape:i}=o,p=n,r=at(a.shape),h=iT(i,r),f=at(h);ye(r===f,()=>`The new shape (${h}) has ${f} elements and the old shape (${a.shape}) has ${r} elements. The new shape and old shape must have the same number of elements.`);const u=p.texData.get(a.dataId);return u.isPacked&&!eg(a.shape,h)&&!(u.texture!==null&&eg(u.shape,h))?YX(a,h,p):(p.incRef(a.dataId),{dataId:a.dataId,shape:h,dtype:a.dtype})}const KX={kernelName:Kg,backendName:"webgl",kernelFunc:It};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rk{constructor(t,n){this.variableNames=["x"];const{windowSize:o,batchSize:a,inSize:i,outSize:p}=t;this.outputShape=[a,p];const r=Math.floor(o/4)*4,h=o%4;let f="sumValue += dot(values, ones);";if(n!=null){const l=1/n;f=`sumValue += dot(values * ${hc(l)?l.toPrecision(2):l}, ones);`}let u="";i%o>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        float sumValue = 0.0;

        for (int i = 0; i < ${r}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${r};
        if (${h===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${f}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${f}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${f}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZX{constructor(t,n){this.variableNames=["x"];const{windowSize:o,batchSize:a,inSize:i,outSize:p}=t;this.outputShape=[a,p];let r="0.0",h="";n==="prod"?r="1.0":n==="min"?(r="1.0 / 1e-20",h="min"):n==="max"&&(r="-1.0 / 1e-20",h="max");let f=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?f="sumValue":n==="prod"?f="prodValue":n==="all"?f="allValue":n==="any"&&(f="anyValue");const u=Math.floor(o/4)*4,l=o%4;let d=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${h}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${h}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,x="vec4";n==="all"?(r="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,x="bvec4"):n==="any"&&(r="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,x="bvec4");let S="";i%o>0&&(S=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${r};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${S}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        vec4 minMaxValue = vec4(${r});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${x} values = ${x}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${l===1}) {
          ${x} values = ${x}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${l===2}) {
          ${x} values = ${x}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${d}
        } else if (${l===3}) {
          ${x} values = ${x}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${d}
        }
        setOutput(${f});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QX(s){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:s[1],o=yy(n);t.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return t}function mu(s,t,n,o){const a=QX(s.shape);let i=s;for(let p=0;p<a.length;p++){const{inSize:r,windowSize:h,outSize:f}=a[p];let u,l;n==="mean"?u=p===0?new Rk({windowSize:h,inSize:r,batchSize:s.shape[0],outSize:f},r):new Rk({windowSize:h,inSize:r,batchSize:s.shape[0],outSize:f}):u=new ZX({windowSize:h,inSize:r,batchSize:s.shape[0],outSize:f},n),l=i,i=o.runWebGLProgram(u,[i],t),l.dataId!==s.dataId&&o.disposeIntermediateTensorInfo(l)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JX{constructor(t,n){this.variableNames=["A"];const o=new Array(t.length);for(let p=0;p<o.length;p++)o[p]=t[n[p]];this.outputShape=o,this.rank=o.length;const a=qn(this.rank),i=eY(n);this.userCode=`
    void main() {
      ${a} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function eY(s){const t=s.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],o=new Array(t);for(let a=0;a<s.length;a++)o[s[a]]=n[a];return o.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tY{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const o=new Array(t.length);for(let u=0;u<o.length;u++)o[u]=t[n[u]];if(this.outputShape=o,this.rank=o.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=qn(this.rank),i=cN("rc",this.rank),p=new Array(this.rank);for(let u=0;u<n.length;u++)p[n[u]]=i[u];const r=`vec2(${p.slice(-2).join()})`,h=`++${i[this.rank-1]} < ${o[this.rank-1]}`,f=`getChannel(getA(${p.join()}), ${r})`;this.userCode=`
    void main() {
      ${a} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${f};
      if(${h}) {
        result[1] = ${f};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${o[this.rank-2]}) {
        result[2] = ${f};
        if(${h}) {
          result[3] = ${f};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function My(s,t,n){const o=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tY(s.shape,t):new JX(s.shape,t);return n.runWebGLProgram(o,[s],s.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nY(s,t,n,o){const a=t,i=s.shape.length,p=pn(a,s.shape);let r=p;const h=br(r,i),f=h!=null;let u=s;f&&(u=My(s,h,o),r=Rr(r.length,i)),fs("sum",r,i);const[l,d]=ss(u.shape,r);let x=l;n&&(x=Fr(l,p));const S=at(d),y=at(s.shape)/S,b=It({inputs:{x:u},attrs:{shape:[y,S]},backend:o}),g=J1(s.dtype),w=mu(b,g,"sum",o),_=It({inputs:{x:w},attrs:{shape:x},backend:o});return o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(w),f&&o.disposeIntermediateTensorInfo(u),_}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oy(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o;return nY(a,i,p,n)}const rY={kernelName:ny,backendName:"webgl",kernelFunc:Oy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ns(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{perm:i}=o,p=n,r=a.shape.length,h=new Array(r);for(let u=0;u<h.length;u++)h[u]=a.shape[i[u]];let f;if(p.shouldExecuteOnCPU([a])){const l=p.texData.get(a.dataId).values,d=Pw(l,a.shape,a.dtype,i,h);f=p.makeTensorInfo(h,a.dtype);const x=p.texData.get(f.dataId);x.values=d}else f=My(a,i,p);return f}const sY={kernelName:lc,backendName:"webgl",kernelFunc:Ns};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yN=1e3;function tg({a:s,b:t,transposeA:n,transposeB:o,backend:a,bias:i=null,preluActivationWeights:p=null,leakyreluAlpha:r=0,activation:h=null}){const f=s.shape.length,u=t.shape.length,l=n?s.shape[f-2]:s.shape[f-1],d=o?t.shape[u-1]:t.shape[u-2],x=n?s.shape[f-1]:s.shape[f-2],S=o?t.shape[u-2]:t.shape[u-1],m=s.shape.slice(0,-2),y=t.shape.slice(0,-2),b=at(m),g=at(y),_=on(s.shape.slice(0,-2),t.shape.slice(0,-2)).concat([x,S]);ye(l===d,()=>`Error in matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${s.shape} and ${t.shape} and transposeA=${n} and transposeB=${o} must match.`);const C=n?[b,l,x]:[b,x,l],k=o?[g,S,d]:[g,d,S],E=It({inputs:{x:s},backend:a,attrs:{shape:C}}),j=It({inputs:{x:t},backend:a,attrs:{shape:k}}),A=[E,j],O=Math.max(b,g),N=n?E.shape[1]:E.shape[2],D=i!=null,z=p!=null,$=h==="leakyrelu",B=h!=null?oh(h,!0):null,F=D||z||$||B!=null;let G;if((x===1||S===1)&&N>yN&&F===!1){let L=E,V=j;n&&(L=Ns({inputs:{x:E},backend:a,attrs:{perm:[0,2,1]}}),A.push(L)),o&&(V=Ns({inputs:{x:j},backend:a,attrs:{perm:[0,2,1]}}),A.push(V));const Y=S!==1,Z=S===1;let J=L;Y&&(J=It({inputs:{x:L},backend:a,attrs:{shape:[O,N,1]}}),A.push(J));const ne=S===1?2:1;let se=V;Z&&(se=It({inputs:{x:V},backend:a,attrs:{shape:[O,1,N]}}),A.push(se));const ie=Uw({inputs:{a:J,b:se},backend:a});G=Oy({inputs:{x:ie},backend:a,attrs:{axis:ne,keepDims:!0}}),A.push(ie)}else{const L=Qs(s.dtype,t.dtype),V=new gN(C,k,[O,x,S],n,o,D,B,z,$),Y=[E,j];if(i!=null&&Y.push(i),z&&Y.push(p),$){const Z=a.makeTensorInfo([],"float32",tl(r,"float32"));Y.push(Z),A.push(Z)}G=a.runWebGLProgram(V,Y,L)}const W=It({inputs:{x:G},backend:a,attrs:{shape:_}});A.push(G);for(const L of A)a.disposeIntermediateTensorInfo(L);return W}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oY(s){const{inputs:t,backend:n,attrs:o}=s,{a,b:i,bias:p,preluActivationWeights:r}=t,{transposeA:h,transposeB:f,activation:u,leakyreluAlpha:l}=o;return tg({a,b:i,transposeA:h,transposeB:f,backend:n,bias:p,preluActivationWeights:r,leakyreluAlpha:l,activation:u})}const aY={kernelName:Im,backendName:"webgl",kernelFunc:oY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nk="return abs(x);";function iY(s){const{inputs:t,backend:n}=s,{x:o}=t;if(n.shouldExecuteOnCPU([o])&&o.dtype!=="complex64"){const i=n.texData.get(o.dataId),p=lN(i.values);return n.makeTensorInfo(o.shape,o.dtype,p)}let a;return Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new zi(o.shape,Nk):a=new Sa(o.shape,Nk),n.runWebGLProgram(a,[o],o.dtype)}const lY={kernelName:ug,backendName:"webgl",kernelFunc:iY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uY=Fo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,cY=En({opSnippet:uY}),dY={kernelName:hh,backendName:"webgl",kernelFunc:cY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hY=Fo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,fY=En({opSnippet:hY}),pY={kernelName:fh,backendName:"webgl",kernelFunc:fY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dk="return a + b;",mY=ps({opSnippet:Dk,packedOpSnippet:Dk,supportsComplex:!0,cpuKernelImpl:kq}),gY={kernelName:Tc,backendName:"webgl",kernelFunc:mY};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yY{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((i,p)=>`T${p}`);const o=[];this.variableNames.forEach(i=>{o.push(`float v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        float result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bY{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((i,p)=>`T${p}`);const o=[];this.variableNames.forEach(i=>{o.push(`vec4 v${i} = get${i}AtOutCoords();`)});const a=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${o.join(`
        `)}

        vec4 result = ${a};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Em(s){const{inputs:t,backend:n}=s,o=t;if(o.length===1)return eo({inputs:{x:o[0]},backend:n});if(o.length>Qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const h=Math.floor(o.length/2),f=Em({inputs:o.slice(0,h),backend:n}),u=Em({inputs:o.slice(h),backend:n});return Em({inputs:[f,u],backend:n})}const a=o.map(h=>h.dtype).reduce((h,f)=>Qs(h,f)),i=o.map(h=>h.shape),r=Qe().getBool("WEBGL_PACK")?new bY(o[0].shape,i):new yY(o[0].shape,i);return n.runWebGLProgram(r,o,a)}const vY={kernelName:h1,backendName:"webgl",kernelFunc:Em};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xY(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o,r=a.shape.length,h=pn(i,a.shape);let f=h;const u=br(f,r);let l=a;u!=null&&(l=Ns({inputs:{x:a},backend:n,attrs:{perm:u}}),f=Rr(f.length,r)),fs("all",f,r);const[d,x]=ss(l.shape,f),S=at(x),m=It({inputs:{x:l},backend:n,attrs:{shape:[-1,S]}}),y=mu(m,m.dtype,"all",n);let b;if(p){const g=Fr(d,h);b=It({inputs:{x:y},backend:n,attrs:{shape:g}})}else b=It({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(l),b}const wY={kernelName:f1,backendName:"webgl",kernelFunc:xY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SY(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o,r=a.shape.length,h=pn(i,a.shape);let f=h;const u=br(f,r);let l=a;u!=null&&(l=Ns({inputs:{x:a},backend:n,attrs:{perm:u}}),f=Rr(f.length,r)),fs("any",f,r);const[d,x]=ss(l.shape,f),S=at(x),m=It({inputs:{x:l},backend:n,attrs:{shape:[-1,S]}}),y=mu(m,m.dtype,"any",n);let b;if(p){const g=Fr(d,h);b=It({inputs:{x:y},backend:n,attrs:{shape:g}})}else b=It({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(l),b}const _Y={kernelName:p1,backendName:"webgl",kernelFunc:SY};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CY{constructor(t,n,o){this.variableNames=["A"];const{windowSize:a,batchSize:i,outSize:p}=t;o||this.variableNames.push("bestIndicesA"),this.outputShape=[i,p];const r=n==="max"?">":"<",h=o?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${a};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${a}; i++) {
          int inIdx = ${h};
          float candidate = getA(batch, inIdx);
          if (candidate ${r} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kY{constructor(t,n,o,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ye(t.length>2,()=>`Packed arg${o.charAt(0).toUpperCase()+o.slice(1)} supports only inputs with rank above 2.`);const i=t[t.length-1],p=Math.ceil(i/n);this.outputShape=t.slice(0,-1),p>1&&this.outputShape.push(p),a||this.variableNames.push("bestIndicesA");const r=this.outputShape,h=r.length,f=qn(h),u=As("coords",h);let l,d;if(p===1){d=h+1;const j=qn(d);l=`
        ${j} sourceLocR = ${j}(${u.join()}, 0);
        ++${u[h-1]};
        ${j} sourceLocG = ${j}(${u.join()}, 0);
        ++${u[h-2]};
        ${j} sourceLocA = ${j}(${u.join()}, 0);
        --${u[h-1]};
        ${j} sourceLocB = ${j}(${u.join()}, 0);
        --${u[h-2]};`}else d=h,l=`
        ${f} sourceLocR = coords;
        ++${u[h-1]};
        ${f} sourceLocG = coords;
        ++${u[h-2]};
        ${f} sourceLocA = coords;
        --${u[h-1]};
        ${f} sourceLocB = coords;
        --${u[h-2]};`;const x=["x","y","z","w","u","v"].slice(0,d),S="."+x[d-1],m=x.map(j=>"int "+j),y=As("sourceLocR",d-1).concat("inIdx.r"),b=As("sourceLocG",d-1).concat("inIdx.g"),g=As("sourceLocB",d-1).concat("inIdx.b"),w=As("sourceLocA",d-1).concat("inIdx.a"),_=o==="max"?"greaterThan":"lessThan",C=a?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${w.join()})));`,k=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${b.join()}) : 0.,
            hasNextRow ? getAChannel(${g.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${w.join()}) : 0.)`,E=a?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${x.join()}),
                                          vec2(${x.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${x.join()}),
                               vec2(${x.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${f} coords = getOutputCoords();
        bool hasNextCol = ${u[h-1]} < ${r[h-1]-1};
        bool hasNextRow = ${u[h-2]} < ${r[h-2]-1};
        ${l}
        ivec4 srcIdx = ivec4(sourceLocR${S}, sourceLocG${S},
          sourceLocB${S}, sourceLocA${S}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${k};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${k};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bN(s,t,n,o=null){let a=t.shape[0],i=t.shape[1];o!=null&&(a=o.shape[0],i=o.shape[1]);const p=yy(i),r={windowSize:p,inSize:i,batchSize:a,outSize:Math.ceil(i/p)},h=new CY(r,n,o==null),f=[t];o!=null&&f.push(o);const u=s.runWebGLProgram(h,f,"int32");if(u.shape[1]===1)return u;const l=bN(s,t,n,u);return s.disposeIntermediateTensorInfo(u),l}function vN(s,t,n,o=null){const a=o!=null?o.shape:t.shape,i=a[a.length-1],p=yy(i),r=new kY(a,p,n,o==null),h=o==null?[t]:[t,o],f=s.runWebGLProgram(r,h,"int32");if(f.shape.length===t.shape.length){const u=vN(s,t,n,f);return s.disposeIntermediateTensorInfo(f),u}return f}function xN(s,t,n,o){const a=[n];if(fs("arg"+o.charAt(0).toUpperCase()+o.slice(1),a,t.shape.length),!Qe().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const i=[],p=s.texData.get(t.dataId),r=p!==null&&p.isPacked;let h=t;r&&(h=s.unpackTensor(t),i.push(h));const[f,u]=ss(h.shape,a),l=at(u),d=It({inputs:{x:h},backend:s,attrs:{shape:[-1,l]}});i.push(d);const x=bN(s,d,o);i.push(x);const S=It({inputs:{x},backend:s,attrs:{shape:f}});return i.forEach(m=>s.disposeIntermediateTensorInfo(m)),S}return vN(s,t,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TY(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i}=o;let p=pn(i,a.shape);const r=br(p,a.shape.length);let h=a;const f=[];r!=null&&(h=Ns({inputs:{x:a},backend:n,attrs:{perm:r}}),f.push(h),p=Rr(p.length,h.shape.length)),fs("argMax",[p[0]],h.shape.length);const u=xN(n,h,p[0],"max");return f.forEach(l=>n.disposeIntermediateTensorInfo(l)),u}const EY={kernelName:cg,backendName:"webgl",kernelFunc:TY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jY(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i}=o;let p=pn(i,a.shape);const r=br(p,a.shape.length);let h=a;const f=[];r!=null&&(h=Ns({inputs:{x:a},backend:n,attrs:{perm:r}}),f.push(h),p=Rr(p.length,h.shape.length)),fs("argMin",[p[0]],h.shape.length);const u=xN(n,h,p[0],"min");return f.forEach(l=>n.disposeIntermediateTensorInfo(l)),u}const IY={kernelName:dg,backendName:"webgl",kernelFunc:jY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AY=Fo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,RY=En({opSnippet:AY}),NY={kernelName:ph,backendName:"webgl",kernelFunc:RY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DY=Fo+"return log(x + sqrt(x * x + 1.0));",MY=En({opSnippet:DY}),OY={kernelName:mh,backendName:"webgl",kernelFunc:MY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Y=Fo+`
  return atan(x);
`,LY=En({opSnippet:$Y}),FY={kernelName:gh,backendName:"webgl",kernelFunc:LY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PY=Bw+`
  return atan(a, b);
`,BY=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+pu+`
  return result;
`,UY=ps({opSnippet:PY,packedOpSnippet:BY}),zY={kernelName:bh,backendName:"webgl",kernelFunc:UY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VY=Fo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,GY=En({opSnippet:VY}),WY={kernelName:yh,backendName:"webgl",kernelFunc:GY};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ah{constructor(t,n,o,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");const p=t.filterWidth,r=t.strideHeight,h=t.strideWidth,f=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,x=t.padInfo.top,S=t.padInfo.left;this.outputShape=t.outShape;const m=n==="avg",y=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,b=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let g="0.0";if(m||(g="-1.0 / 1e-20"),o){const j=">=";this.userCode=`
        const ivec2 strides = ivec2(${r}, ${h});
        const ivec2 pads = ivec2(${x}, ${S});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${l};
              wR += ${f}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${d};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${j} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${a?i?y:b:`wR * ${d} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let _=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(_="avgValue / max(count, 1.0)");const C=Math.floor(p/4)*4,k=p%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${h});
      const ivec2 pads = ivec2(${x}, ${S});
      const float initializationValue = ${g};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${g});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${l};
            wR += ${f}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${C};
          if (${k===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${k===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${k===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${_});
      }
    `}}class zw{constructor(t,n,o,a=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&o)throw new Error("Cannot compute positions for average pool.");const p=t.filterWidth,r=t.strideDepth,h=t.strideHeight,f=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,d=t.dilationWidth,x=t.effectiveFilterDepth,S=t.effectiveFilterHeight,m=t.effectiveFilterWidth,y=t.padInfo.front,b=t.padInfo.top,g=t.padInfo.left;this.outputShape=t.outShape;const w=n==="avg";let _="0.0";if(w||(_="-1.0 / 1e-20"),o){const O=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${r}, ${h}, ${f});
        const ivec3 pads = ivec3(${y}, ${b}, ${g});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${x};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${S};
                wR += ${l}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${d}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${O} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${a?i?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${S} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let k=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(k="avgValue / max(count, 1.0)");const E=Math.floor(p/4)*4,j=p%4,A=`
      if (${w}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${r}, ${h}, ${f});
      const ivec3 pads = ivec3(${y}, ${b}, ${g});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${x};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${S};
            wR += ${l}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${d};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                getValue(batch, xD, xR, xC + 3 * ${d}, ch)
              );

              ${A}
            }

            int xC = xCCorner + ${E};
            if (${j===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${j===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                initializationValue,
                initializationValue
              );

              ${A}
            } else if (${j===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${d}, ch),
                getValue(batch, xD, xR, xC + 2 * ${d}, ch),
                initializationValue
              );

              ${A}
            }
          }
        }
        setOutput(${k});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HY(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t;jf(a,"avgPool");const{filterSize:i,strides:p,pad:r,dimRoundingMode:h}=o,f=1;ye(Ss(p,f),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${p} and dilations '${f}'`);const u=$o(a.shape,i,p,f,r,h);if(u.filterWidth===1&&u.filterHeight===1&&$n(u.inShape,u.outShape))return eo({inputs:{x:a},backend:n});const l=new ah(u,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}const qY={kernelName:hg,backendName:"webgl",kernelFunc:HY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XY(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{filterSize:i,strides:p,pad:r,dimRoundingMode:h,dataFormat:f}=o,u=[1,1,1],l=li(a.shape,i,p,u,r,h,f),d=new zw(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}const YY={kernelName:fg,backendName:"webgl",kernelFunc:XY};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KY{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,o=t.filterWidth,a=t.strideHeight,i=t.strideWidth,p=t.dilationHeight,r=t.dilationWidth,h=t.effectiveFilterHeight,f=t.effectiveFilterWidth,u=h-1-t.padInfo.top,l=f-1-t.padInfo.left,d=1/(n*o);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${l});
      const float avgMultiplier = float(${d});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h};
            wR += ${p}) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${f};
            wC+= ${r}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class ZY{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,o=t.filterHeight,a=t.filterWidth,i=t.strideDepth,p=t.strideHeight,r=t.strideWidth,h=t.dilationDepth,f=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,d=t.effectiveFilterHeight,x=t.effectiveFilterWidth,S=l-1-t.padInfo.front,m=d-1-t.padInfo.top,y=x-1-t.padInfo.left,b=1/(n*o*a);this.userCode=`
      const ivec3 pads = ivec3(${S}, ${m}, ${y});
      const float avgMultiplier = float(${b});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
            wD += ${h}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${f}) {
            float dyR = float(dyRCorner + wR) / ${p}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${x};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QY(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,input:i}=t,p=i,{filterSize:r,strides:h,pad:f,dimRoundingMode:u}=o,l=[1,1,1],d=li(p.shape,r,h,l,f,u),x=new ZY(d);return n.runWebGLProgram(x,[a],p.dtype)}const JY={kernelName:g1,backendName:"webgl",kernelFunc:QY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eK(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,input:i}=t,p=i;jf([a,i],"avgPoolGrad");const{filterSize:r,strides:h,pad:f}=o,u=$o(p.shape,r,h,1,f),l=new KY(u);return n.runWebGLProgram(l,[a],p.dtype)}const tK={kernelName:m1,backendName:"webgl",kernelFunc:eK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nK(s){const{inputs:t,backend:n,attrs:o}=s,{a,b:i}=t,{transposeA:p,transposeB:r}=o;return tg({a,b:i,transposeA:p,transposeB:r,backend:n})}const rK={kernelName:pg,backendName:"webgl",kernelFunc:nK};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sK{constructor(t,n,o,a,i,p){this.outputShape=[],this.variableNames=["x","mean","variance"],on(t,n),on(t,o);let r="0.0";a!=null&&(on(t,a),this.variableNames.push("offset"),r="getOffsetAtOutCoords()");let h="1.0";i!=null&&(on(t,i),this.variableNames.push("scale"),h="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${r};
        float scale = ${h};
        float inv = scale * inversesqrt(variance + float(${p}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oK{constructor(t,n,o,a,i,p){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],on(t,n),on(t,o);let r="vec4(0.0)";a!=null&&(on(t,a),this.variableNames.push("offset"),r="getOffsetAtOutCoords()");let h="vec4(1.0)";i!=null&&(on(t,i),this.variableNames.push("scale"),h="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${r};
        vec4 scale = ${h};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${p}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aK=({inputs:s,backend:t,attrs:n})=>{const{x:o,mean:a,variance:i,offset:p,scale:r}=s;ye(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ye(p==null||a.shape.length===p.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ye(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:h}=n;h==null&&(h=.001);const f=[o,a,i];let u=null;p!=null&&(u=p.shape,f.push(p));let l=null;r!=null&&(l=r.shape,f.push(r));const d=Qe().getBool("WEBGL_PACK_NORMALIZATION")?new oK(o.shape,a.shape,i.shape,u,l,h):new sK(o.shape,a.shape,i.shape,u,l,h);return t.runWebGLProgram(d,f,f[0].dtype)},iK={kernelName:Tg,backendName:"webgl",kernelFunc:aK};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lK{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=qn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const o=uK(this.rank);let a;const i=t.map((p,r)=>`sourceLoc.${Xv[r]} = start[${r}] + coords.${Xv[r]};`);a=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${a}
        setOutput(getSource(${o}));
      }
    `}}const Xv=["x","y","z","w","u","v"];function uK(s){if(s===1)return"sourceLoc";if(s<=6)return Xv.slice(0,s).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${s} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cK{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=qn(this.rank),o=As("coords",this.rank),a=As("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${a.slice(-2).join()})`,p=`getChannel(getSource(${a.join()}), ${i})`,r=`
      result.x = ${p};
      if (++${o[this.rank-1]} < ${t[this.rank-1]}) {
        ++${a[this.rank-1]};
        result.y = ${p};
        --${a[this.rank-1]};
      }
    `,h=this.rank===1?"":`
      --${o[this.rank-1]};
      if (++${o[this.rank-2]} < ${t[this.rank-2]}) {
        ++${a[this.rank-2]};
        result.z = ${p};
        if (++${o[this.rank-1]} < ${t[this.rank-1]}) {
          ++${a[this.rank-1]};
          result.w = ${p};
        }
      }
    `,f=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((u,l)=>`start[${l}]`).join()});`:t.map((u,l)=>`${a[l]} = ${o[l]} + start[${l}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${f}
        vec4 result = vec4(0.);
        ${r}
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dK(s,t,n,o){const a=o.texData.get(s.dataId),i=o.makeTensorInfo(n,s.dtype),p=o.texData.get(i.dataId);Object.assign(p,a),p.refCount=1,p.shape=n,p.dtype=s.dtype;let r=Lx(t,Vt(s.shape));a.slice&&(r+=a.slice.flatOffset),p.slice={flatOffset:r,origDataId:a.slice&&a.slice.origDataId||s.dataId};const h=o.dataRefCount.get(p.slice.origDataId)||1;return o.dataRefCount.set(p.slice.origDataId,h+1),i}function Pc(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{begin:i,size:p}=o,[r,h]=gy(a,i,p);if(Mx(a,r,h),at(h)===0)return n.makeTensorInfo(h,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||a.dtype==="string"){const l=n.texData.get(a.dataId),d=rX(l.values,r,h,a.shape,a.dtype);return n.makeTensorInfo(h,a.dtype,d)}const{isPacked:f}=n.texData.get(a.dataId),u=$x(a.shape,r,h);if(f||!u){const l=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cK(h):new lK(h),d=[r];return n.runWebGLProgram(l,[a],a.dtype,d)}return n.uploadToGPU(a.dataId),dK(a,r,h,n)}const hK={kernelName:ty,backendName:"webgl",kernelFunc:Pc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fK=s=>{const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{blockShape:i,crops:p}=o;ye(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const r=i.reduce((g,w)=>g*w),h=mf(a.shape,i,r),f=gf(h.length,i.length),u=yf(a.shape,i,r),l=zx(p,i.length),d=Vx(u,p,i.length),x=[],S=It({inputs:{x:a},backend:n,attrs:{shape:h}}),m=Ns({inputs:{x:S},backend:n,attrs:{perm:f}}),y=It({inputs:{x:m},backend:n,attrs:{shape:u}}),b=Pc({inputs:{x:y},backend:n,attrs:{begin:l,size:d}});return x.push(S),x.push(m),x.push(y),x.forEach(g=>n.disposeIntermediateTensorInfo(g)),b},pK={kernelName:mg,backendName:"webgl",kernelFunc:fK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mK(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,weights:i}=t,{size:p}=o,r=n.readSync(a.dataId),h=n.readSync(i.dataId),f=iN(r,h,i.dtype,i.shape,p);return n.makeTensorInfo([p],i.dtype,f)}const gK={kernelName:y1,backendName:"webgl",kernelFunc:mK};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yK=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,bK=`
  return float(int(a.r) & int(b.r));
`;function vK(s){const{inputs:t,backend:n}=s,{a:o,b:a}=t,i=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),p=Qe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([o,a])||p===1){const h=n.texData.get(o.dataId).values,f=n.texData.get(a.dataId).values,[u,l]=Eq(o.shape,a.shape,h,f,o.dtype),d=n.makeTensorInfo(l,o.dtype),x=n.texData.get(d.dataId);return x.values=u,d}let r;return i?r=new Lc(yK,o.shape,a.shape,!1):r=new ru(bK,o.shape,a.shape),n.runWebGLProgram(r,[o,a],o.dtype)}const xK={kernelName:b1,backendName:"webgl",kernelFunc:vK};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wK(s){const{inputs:t,backend:n}=s,{s0:o,s1:a}=t,i=n.readSync(o.dataId),p=n.readSync(a.dataId),r=on(Array.from(i),Array.from(p));return n.makeTensorInfo([r.length],"int32",Int32Array.from(r))}const SK={kernelName:fT,backendName:"webgl",kernelFunc:wK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _K="return float(a != b);",wN=ps({opSnippet:_K,cpuKernelImpl:Xq,dtype:"bool"}),CK={kernelName:Vg,backendName:"webgl",kernelFunc:wN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Af(s){const{inputs:t,backend:n}=s,{input:o}=t,a=n.texData.get(o.dataId);return eo({inputs:{x:a.complexTensorInfos.real},backend:n})}const kK={kernelName:V1,backendName:"webgl",kernelFunc:Af};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TK="return float(int(x));";function EK(s,t){const n=new Sa(s.shape,TK),o=t.runWebGLProgram(n,[s],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yv(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{dtype:i}=o;if(i==="complex64"){if(a.dtype==="complex64")return eo({inputs:{x:a},backend:n});const p=ns(a.shape),r=Yv({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),h=cl({inputs:{real:r,imag:p},backend:n});return p.dispose(),n.disposeIntermediateTensorInfo(r),h}if(a.dtype==="complex64"){const p=Af({inputs:{input:a},backend:n}),r=Yv({inputs:{x:p},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(p),r}if(!lT(a.dtype,i)){const p=eo({inputs:{x:a},backend:n});return{dataId:p.dataId,shape:p.shape,dtype:i}}if(n.shouldExecuteOnCPU([a])){const p=n.texData.get(a.dataId).values,[r,h,f]=jq(p,a.shape,a.dtype,i);return n.makeTensorInfo(r,h,f)}if(i==="int32")return EK(a,n);if(i==="bool"){const p=n.makeTensorInfo([],"bool",vs("bool",1)),h=wN({inputs:{a,b:p},backend:n});return n.disposeIntermediateTensorInfo(p),h}throw new Error(`Error in Cast: failed to cast ${a.dtype} to ${i}`)}const jK={kernelName:vh,backendName:"webgl",kernelFunc:Yv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mk="return ceil(x);",IK=En({opSnippet:Mk,packedOpSnippet:Mk,cpuKernelImpl:Iq}),AK={kernelName:xh,backendName:"webgl",kernelFunc:IK};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RK{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NK{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DK(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{clipValueMin:i,clipValueMax:p}=o;let r;Qe().getBool("WEBGL_PACK_CLIP")?r=new NK(a.shape):r=new RK(a.shape);const h=[[i],[p]];return n.runWebGLProgram(r,[a],a.dtype,h)}const MK={kernelName:wh,backendName:"webgl",kernelFunc:DK};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OK{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ok(s,t){return{dataId:t.dataId,dtype:t.dtype,shape:s.shape}}function $K(s){const{inputs:t,backend:n}=s,{x:o}=t,a=n.texData.get(o.dataId),i=new OK(o.shape),p=[Ok(o,a.complexTensorInfos.real),Ok(o,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,p,p[0].dtype)}const LK={kernelName:gg,backendName:"webgl",kernelFunc:$K};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FK{constructor(t){this.outputShape=[],this.outputShape=ka(t,1),this.variableNames=t.map((p,r)=>`T${r}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let p=1;p<n.length;p++)n[p]=n[p-1]+t[p][1];const o=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let p=1;p<n.length;p++){const r=n[p-1];o.push(`else if (yC < ${n[p]}) setOutput(getT${p}(yR, yC-${r}));`)}const a=n.length,i=n[n.length-1];o.push(`else setOutput(getT${a}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${o.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PK{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ka(t,n);const o=this.outputShape,a=o.length,i=qn(a),p=As("coords",a),r=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((m,y)=>`T${y}`);const h=new Array(t.length-1);h[0]=t[0][n];for(let m=1;m<h.length;m++)h[m]=h[m-1]+t[m][n];const f=r[n],u=r.slice(-2),l=r.join();let d=`if (${f} < ${h[0]}) {
        return getChannel(
            getT0(${l}), vec2(${u.join()}));
        }`;for(let m=1;m<h.length;m++){const y=h[m-1];d+=`
        if (${f} < ${h[m]}  && ${f} >= ${h[m-1]}) {
          return getChannel(
            getT${m}(${mm(r,f,y)}),
            vec2(${mm(u,f,y)}));
        }`}const x=h.length,S=h[h.length-1];d+=`
        return getChannel(
          getT${x}(${mm(r,f,S)}),
          vec2(${mm(u,f,S)}));`,this.userCode=`
      float getValue(${r.map(m=>"int "+m)}) {
        ${d}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${p}), 0., 0., 0.);

        ${p[a-1]} = ${p[a-1]} + 1;
        if (${p[a-1]} < ${o[a-1]}) {
          result.g = getValue(${p});
        }

        ${p[a-2]} = ${p[a-2]} + 1;
        if (${p[a-2]} < ${o[a-2]}) {
          result.a = getValue(${p});
        }

        ${p[a-1]} = ${p[a-1]} - 1;
        if (${p[a-2]} < ${o[a-2]} &&
            ${p[a-1]} < ${o[a-1]}) {
          result.b = getValue(${p});
        }
        setOutput(result);
      }
    `}}function mm(s,t,n){const o=s.indexOf(t);return s.map((i,p)=>p===o?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $y(s){const{inputs:t,backend:n}=s,{input:o}=t,a=n.texData.get(o.dataId);return eo({inputs:{x:a.complexTensorInfos.imag},backend:n})}const BK={kernelName:O1,backendName:"webgl",kernelFunc:$y};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gd(s,t,n){const o=s[0].dtype;if(o==="complex64"){const x=s.map(g=>Af({inputs:{input:g},backend:n})),S=s.map(g=>$y({inputs:{input:g},backend:n})),m=Gd(x,t,n),y=Gd(S,t,n),b=cl({inputs:{real:m,imag:y},backend:n});return x.forEach(g=>n.disposeIntermediateTensorInfo(g)),S.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}let a=n.shouldExecuteOnCPU(s);if(o==="string"&&(a=!0),a){const x=s.map(_=>{const k=[-1,at(_.shape.slice(t))];return It({inputs:{x:_},backend:n,attrs:{shape:k}})}),S=x.map(_=>({vals:n.readSync(_.dataId),shape:_.shape})),m=ka(x.map(_=>_.shape),1),y=x[0].shape[0]===1,b=Aq(S,m,o,y),g=ka(s.map(_=>_.shape),t),w=n.makeTensorInfo(g,o,b);return x.forEach(_=>n.disposeIntermediateTensorInfo(_)),w}const i=s.filter(x=>at(x.shape)>0),p=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const x=p?new Sa(s[0].shape,Pi):new zi(s[0].shape,Pi);return n.runWebGLProgram(x,s,o)}const r=Qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>r){const x=[];for(let m=0;m<i.length;m+=r){const y=i.slice(m,m+r);x.push(Gd(y,t,n))}const S=Gd(x,t,n);for(const m of x)n.disposeIntermediateTensorInfo(m);return S}if(p){const x=new PK(i.map(S=>S.shape),t);return n.runWebGLProgram(x,i,o)}const{tensors2D:h,outShape:f}=UK(i,t,n),u=new FK(h.map(x=>x.shape)),l=n.runWebGLProgram(u,h,o);h.forEach(x=>n.disposeIntermediateTensorInfo(x));const d=It({inputs:{x:l},attrs:{shape:f},backend:n});return n.disposeIntermediateTensorInfo(l),d}function UK(s,t,n){const o=ka(s.map(i=>i.shape),t);return{tensors2D:s.map(i=>It({inputs:{x:i},attrs:{shape:[-1,at(i.shape.slice(t))]},backend:n})),outShape:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SN(s){const{inputs:t,backend:n,attrs:o}=s,{axis:a}=o,i=pn(a,t[0].shape)[0],p=t.map(f=>f.shape);Px(p,i);const r=ka(t.map(f=>f.shape),i);if(at(r)===0)return n.makeTensorInfo(r,t[0].dtype,[]);const h=t.filter(f=>at(f.shape)>0);return h.length===1?eo({inputs:{x:h[0]},backend:n}):Gd(h,i,n)}const zK={kernelName:yg,backendName:"webgl",kernelFunc:SN};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _N{constructor(t,n=!1,o=null,a=!1,i=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const p=t.padInfo.top,r=t.padInfo.left,h=t.strideHeight,f=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,d=t.filterHeight,x=t.filterWidth,S=Math.floor(t.inChannels/4)*4,m=t.inChannels%4,y=t.dataFormat==="channelsLast",b=y?1:2,g=y?2:3,w=y?3:1;let _="",C="";o&&(a?_=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:i?_=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:_=`
          float activation(float x) {
            ${o}
          }
        `,C="result = activation(result);");const k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_}

      const ivec2 strides = ivec2(${h}, ${f});
      const ivec2 pads = ivec2(${p}, ${r});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${w}];

        ivec2 xRCCorner =
            ivec2(coords[${b}], coords[${g}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${d}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${x}; wC++) {
            int xC = xCCorner + wC * ${l};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${S}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${S}) *
                    getW(wR, wC, ${S}, d2);
              } else {
                dotProd +=
                    getX(batch, ${S}, xR, xC) *
                    getW(wR, wC, ${S}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${S}, d2),
                getW(wR, wC, ${S} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${S}),
                  getX(batch, xR, xC, ${S} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${S}, xR, xC),
                  getX(batch, ${S} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${S}, d2),
                getW(wR, wC, ${S} + 1, d2),
                getW(wR, wC, ${S} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${S}),
                  getX(batch, xR, xC, ${S} + 1),
                  getX(batch, xR, xC, ${S} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${S}, xR, xC),
                  getX(batch, ${S} + 1, xR, xC),
                  getX(batch, ${S} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${k}
        ${C}
        setOutput(result);
      }
    `}}class VK{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,p=t.strideHeight,r=t.strideWidth,h=t.dilationDepth,f=t.dilationHeight,u=t.dilationWidth,l=t.filterDepth,d=t.filterHeight,x=t.filterWidth,S=Math.floor(t.inChannels/4)*4,m=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${p}, ${r});
      const ivec3 pads = ivec3(${n}, ${o}, ${a});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${l}; wF++) {
          int xF = xFCorner + wF * ${h};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${d}; wR++) {
            int xR = xRCorner + wR * ${f};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${x}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${S}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${S}) *
                  getW(wF, wR, wC, ${S}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${S}),
                  getX(batch, xF, xR, xC, ${S} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${S}, d2),
                  getW(wF, wR, wC, ${S} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${S}),
                  getX(batch, xF, xR, xC, ${S} + 1),
                  getX(batch, xF, xR, xC, ${S} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${S}, d2),
                  getW(wF, wR, wC, ${S} + 1, d2),
                  getW(wF, wR, wC, ${S} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CN{constructor(t,n=!1,o=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const p=t.padInfo.left,r=t.strideWidth,h=t.dilationWidth,f=t.filterHeight,u=t.filterWidth,l=u;let d=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<u;y++)d+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;d+=`
     for (int r = 0; r < ${f}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let y=0;y<u;y++)d+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;d+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(l+1)/2;y++){const b=y*2;if(d+=`
           xC = xCCorner + ${b*h};
           `,r===1){if(b<u&&(p%2===1?(d+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }
               `,h===1&&b>0?d+=`
                 xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                 `:d+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                   } else {
                     xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                   }
                   `):d+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xC${b} = xTexelC${b};
                 `,b+1<u)){const g=p%2===0?a1(h):h;h%2===0&&p%2===1||h%2!==0&&p%2!==1?(d+=`
                   xCOffset = xC + imod(pads[1], 2) + ${g};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                     xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${b+1}.zw = vec2(0.0);
                     }
                     xTexelC${b+1}Ready = 1;
                   }
                   `,h>1?d+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                     } else {
                      xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                     }
                     `:d+=`
                     xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                     `):g===1?d+=`
                     xC${b+1} = xTexelC${b};
                     `:d+=`
                     xCOffset = xC + ${g};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                       xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${b+1}.zw = vec2(0.0);
                       }
                       xTexelC${b+1}Ready = 1;
                     }

                     xC${b+1} = xTexelC${b+1};
                     `}}else b<u&&(p%2===1?(d+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.0);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
               `,b+1<u&&(d+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                 `)):(d+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                   xTexelC${b} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${b}.zw = vec2(0.0);
                   }
                   xTexelC${b}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                   xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${b+1}.zw = vec2(0.);
                   }
                   xTexelC${b+1}Ready = 1;
                 }

                 xC${b} = vec4(
                   xTexelC${b}.xy, xTexelC${b+1}.xy);
               `,b+1<u&&(d+=`
                   xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                 `)));b<u&&(d+=`
             wTexel = getW(r, ${b}, d1, d2);
             dotProd += xC${b}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${b}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,b+1<u&&(d+=`
               wTexel = getW(r, ${b+1}, d1, d2);
               dotProd += xC${b+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${b+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}d+=`
     }
   `,d+=`
     }
   `,d+=`
     }
   `;let x="",S="";o&&(a?x=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${o}
         }`:i?x=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${o}
         }`:x=`vec4 activation(vec4 x) {
           ${o}
         }`,S="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${x}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${d}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${S}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GK{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=Cs(this.outputShape.length);const{dataFormat:o}=n,a=Ds(),i=o==="channelsLast",p=i?1:2,r=i?2:3,h=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let f="";for(let u=0;u<=1;u++)for(let l=0;l<=1;l++)f+=`
          blockIndex = rc.z + ${l};
          pos = rc.y + ${u};

          ${h}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${p}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${r}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+l}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+l}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${f}

        ${a.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ng(s,t){const n=s.length;return n>=3?t?[...s.slice(0,-3),s[n-3]*s[n-2],s[n-1]]:[...s.slice(0,-3),s[n-3],s[n-2]*s[n-1]]:!t&&n===1&&s[0]>1?[s[0],1]:null}function kN({x:s,filter:t,convInfo:n,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:p=0,activation:r=null}){const h=s.shape,f=o.texData.get(s.dataId),u=n.inChannels,l=h[0]*h[1]*h[2],d=n.outChannels,x=n.dataFormat==="channelsLast",S=!1,m=!1;let y;const b=[];if(i!=null){const _=ng(i.shape,x);_!=null&&(i=It({inputs:{x:i},backend:o,attrs:{shape:_}}),b.push(i))}if(a!=null){const _=ng(a.shape,x);_!=null&&(a=It({inputs:{x:a},backend:o,attrs:{shape:_}}),b.push(a))}if(!((l===1||d===1)&&u>yN)&&f.isPacked&&x&&f.texture!=null&&h[2]%2!==0&&$n(f.shape.slice(-3),h.slice(-3))){const _=h[0]*h[1]*(h[2]+1),C={dataId:s.dataId,shape:[1,_,n.inChannels],dtype:s.dtype},k=f.shape;f.shape=f.shape.slice(),f.shape[f.shape.length-2]++,ye(eg(f.shape,C.shape),()=>`packed reshape ${f.shape} to ${C.shape} isn't free`);const E=It({inputs:{x:t},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}});b.push(E);const j=tg({a:C,b:E,backend:o,transposeA:S,transposeB:m,bias:a,activation:r,preluActivationWeights:i,leakyreluAlpha:p}),A=o.texData.get(j.dataId);ye(A.isPacked,()=>"batchMatMul result is expected to be packed"),f.shape=k,A.shape=n.outShape,y=eo({inputs:{x:j},backend:o}),y.shape=n.outShape,b.push(j)}else{const _=n.outHeight*n.outWidth,C=It({inputs:{x:s},backend:o,attrs:{shape:x?[n.batchSize,_,n.inChannels]:[n.batchSize,n.inChannels,_]}}),k=It({inputs:{x:t},backend:o,attrs:{shape:[1,n.inChannels,n.outChannels]}}),E=tg({a:x?C:k,b:x?k:C,transposeA:!x,transposeB:m,backend:o,bias:a,activation:r,preluActivationWeights:i,leakyreluAlpha:p});y=It({inputs:{x:E},backend:o,attrs:{shape:n.outShape}}),b.push(C),b.push(k),b.push(E)}for(const _ of b)o.disposeIntermediateTensorInfo(_);return y}function TN({x:s,filter:t,convInfo:n,backend:o,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:p=0,activation:r=null}){const{filterWidth:h,filterHeight:f,inChannels:u,outWidth:l,outHeight:d,dataFormat:x}=n,S=x==="channelsLast",m=h*f*u,y=d*l,b=[n.batchSize,m,y],g=!0,w=!1,_=[];if(i!=null){const W=ng(i.shape,S);W!=null&&(i=It({inputs:{x:i},backend:o,attrs:{shape:W}}),_.push(i))}if(a!=null){const W=ng(a.shape,S);W!=null&&(a=It({inputs:{x:a},backend:o,attrs:{shape:W}}),_.push(a))}const C=It({inputs:{x:t},backend:o,attrs:{shape:[1,m,at(t.shape)/m]}});_.push(C);const k=new GK(b,n),E=[s.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],j=o.runWebGLProgram(k,[s],"float32",E),A=It({inputs:{x:j},backend:o,attrs:{shape:b}});_.push(j),_.push(A);const O=a!=null,N=i!=null,D=r==="leakyrelu",z=r?oh(r,!0):null,$=new gN(S?A.shape:C.shape,S?C.shape:A.shape,S?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],g,w,O,z,N,D),B=S?[A,C]:[C,A];if(a&&B.push(a),N&&B.push(i),D){const W=o.makeTensorInfo([],"float32",tl(p,"float32"));B.push(W),_.push(W)}const F=o.runWebGLProgram($,B,"float32"),G=It({inputs:{x:F},backend:o,attrs:{shape:n.outShape}});_.push(F);for(const W of _)o.disposeIntermediateTensorInfo(W);return G}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WK(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i}=t,{strides:p,pad:r,dataFormat:h,dilations:f,dimRoundingMode:u}=o,l=ui(h),d=hs(a.shape,i.shape,p,f,r,u,!1,l);let x;if(d.filterHeight===1&&d.filterWidth===1&&d.dilationHeight===1&&d.dilationWidth===1&&d.strideHeight===1&&d.strideWidth===1&&(d.padInfo.type==="SAME"||d.padInfo.type==="VALID"))x=kN({x:a,filter:i,convInfo:d,backend:n});else if(d.strideWidth<=2&&l==="channelsLast"&&Qe().getBool("WEBGL_EXP_CONV")){const m=new CN(d),y=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];x=n.runWebGLProgram(m,[a,i],"float32",y)}else if(Qe().getBool("WEBGL_CONV_IM2COL"))x=TN({x:a,filter:i,convInfo:d,backend:n});else{const m=new _N(d);x=n.runWebGLProgram(m,[a,i],"float32")}const S=It({inputs:{x},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(x),S}const HK={kernelName:bg,backendName:"webgl",kernelFunc:WK};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qK{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,o=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,p=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${i};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${p?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class XK{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,o=t.filterWidth,a=t.strideHeight,i=t.strideWidth,p=t.dataFormat==="channelsLast",r=n-1-t.padInfo.top,h=o-1-t.padInfo.left,f=p?1:2,u=p?2:3,l=p?3:1;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${l}];

        ivec2 dyCorner = ivec2(coords[${f}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${p}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class YK{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,p=t.padInfo.top,r=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${o} - ${p};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${a} - ${r};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class KK{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,o=t.filterHeight,a=t.filterWidth,i=t.strideDepth,p=t.strideHeight,r=t.strideWidth,h=n-1-t.padInfo.front,f=o-1-t.padInfo.top,u=a-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${f}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${o}; wR++) {
            float dyR = float(dyRCorner + wR) / ${p}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${o} - 1 - wR;

            for (int wC = 0; wC < ${a}; wC++) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${a} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZK(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,dy:i}=t,{strides:p,pad:r,dataFormat:h,dimRoundingMode:f,filterShape:u}=o,l=ui(h),d=hs(a.shape,u,p,1,r,f,!1,l),x=new qK(d);return n.runWebGLProgram(x,[a,i],"float32")}const QK={kernelName:x1,backendName:"webgl",kernelFunc:ZK};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JK{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=Cs(this.outputShape.length);const n=t.filterHeight,o=t.filterWidth,a=n-1-t.padInfo.top,i=o-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            int wCPerm = ${o} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eZ(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,filter:i}=t,{inputShape:p,strides:r,pad:h,dataFormat:f,dimRoundingMode:u}=o,l=ui(f),d=hs(p,i.shape,r,1,h,u,!1,l);if(Qe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&l==="channelsLast"){const x=[[d.strideHeight,d.strideWidth]],S=new JK(d);return n.runWebGLProgram(S,[a,i],"float32",x)}else{const x=new XK(d);return n.runWebGLProgram(x,[a,i],"float32")}}const tZ={kernelName:vg,backendName:"webgl",kernelFunc:eZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i}=t,{strides:p,pad:r,dilations:h}=o,f=rl(a.shape,i.shape,p,h,r),u=new VK(f);return n.runWebGLProgram(u,[a,i],"float32")}const rZ={kernelName:xg,backendName:"webgl",kernelFunc:nZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,dy:i}=t,{strides:p,pad:r,filterShape:h}=o,f=rl(a.shape,h,p,1,r),u=new YK(f);return n.runWebGLProgram(u,[a,i],"float32")}const oZ={kernelName:w1,backendName:"webgl",kernelFunc:sZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aZ(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,filter:i}=t,{pad:p,strides:r,inputShape:h}=o,f=rl(h,i.shape,r,1,p),u=new KK(f);return n.runWebGLProgram(u,[a,i],"float32")}const iZ={kernelName:S1,backendName:"webgl",kernelFunc:aZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lZ=Fc+`
  return cos(x);
`,uZ=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${pu}
  return result;
`,cZ=En({opSnippet:lZ,packedOpSnippet:uZ}),dZ={kernelName:Sh,backendName:"webgl",kernelFunc:cZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hZ=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,fZ=En({opSnippet:hZ}),pZ={kernelName:_h,backendName:"webgl",kernelFunc:fZ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mZ{constructor(t,n,o,a,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[p,r,h,f]=t,[u]=n,[l,d]=o;this.outputShape=[u,l,d,f];const x=a==="bilinear"?1:0,[S,m]=[`${r-1}.0`,`${h-1}.0`],[y,b,g]=l>1?[`${(r-1)/(l-1)}`,"(y2-y1) * height_ratio",`y1*${S} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${S}`],[w,_,C]=d>1?[`${(h-1)/(d-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${w});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${p}) {
          return;
        }

        float height_scale = ${b};
        float width_scale = ${_};

        float in_y = ${g};
        if( in_y < 0.0 || in_y > ${S} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${x} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gZ=s=>{const{inputs:t,backend:n,attrs:o}=s,{image:a,boxes:i,boxInd:p}=t,{cropSize:r,method:h,extrapolationValue:f}=o,u=new mZ(a.shape,i.shape,r,h,f);return n.runWebGLProgram(u,[a,i,p],"float32")},yZ={kernelName:C1,backendName:"webgl",kernelFunc:gZ};var ih;(function(s){s.Prod="*",s.Sum="+"})(ih||(ih={}));class $k{constructor(t,n,o,a){this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,p=this.op===ih.Prod?"1.0":"0.0",r=o?p:`getX(${Lk(i,"coords",this.op)})`,h=this.outputShape[this.outputShape.length-1];let f="",u="";o?(f=a?`end != ${h-1}`:"end != 0",u=a?"end + 1":"end - 1"):(f=a?`end + pow2 < ${h}`:"end >= pow2",u=a?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${qn(i)} coords = getOutputCoords();
        int end = ${Fk(i,"coords",this.op)};
        float val = ${r};
        int pow2 = int(pow(2.0, index));
        if (${f}) {
          int idx = ${u};
          ${Fk(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${Lk(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Lk(s,t,n){if(s===1)return`${t}`;if(s===2)return`${t}.x, ${t}.y`;if(s===3)return`${t}.x, ${t}.y, ${t}.z`;if(s===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${s} is not yet supported`)}function Fk(s,t,n){if(s===1)return`${t}`;if(s===2)return`${t}.y`;if(s===3)return`${t}.z`;if(s===4)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${s} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EN(s,t,n,o,a,i){const p=t.shape.length,r=br([o],p);let h=t;r!=null&&(h=Ns({inputs:{x:t},backend:n,attrs:{perm:r}}));const f=Rr(1,p)[0];if(f!==p-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${o}`);const u=h.shape[f];let l=eo({inputs:{x:h},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){const x=new $k(s,h.shape,!1,i),S=[[d]],m=l;l=n.runWebGLProgram(x,[l],l.dtype,S),n.disposeIntermediateTensorInfo(m)}if(a){const d=new $k(s,h.shape,a,i),x=l;l=n.runWebGLProgram(d,[l],l.dtype),n.disposeIntermediateTensorInfo(x)}if(r!=null){const d=sl(r),x=Ns({inputs:{x:l},backend:n,attrs:{perm:d}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),x}return l}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,exclusive:p,reverse:r}=o;return EN(ih.Prod,a,n,i,p,r)}const vZ={kernelName:_1,backendName:"webgl",kernelFunc:bZ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,exclusive:p,reverse:r}=o;return EN(ih.Sum,a,n,i,p,r)}const wZ={kernelName:wg,backendName:"webgl",kernelFunc:xZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,weights:i}=t,{size:p,binaryOutput:r}=o;if(a.shape.length===1){const h=n.readSync(a.dataId),f=n.readSync(i.dataId),u=iN(h,f,i.dtype,i.shape,p);return n.makeTensorInfo([p],i.dtype,u)}else if(a.shape.length===2){const h=n.bufferSync(a),f=n.bufferSync(i),u=Tq(h,f,p,r);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}const _Z={kernelName:k1,backendName:"webgl",kernelFunc:SZ};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CZ{constructor(t,n,o){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=o,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{blockSize:i,dataFormat:p}=o,r=a.shape[0],h=p==="NHWC"?a.shape[1]:a.shape[2],f=p==="NHWC"?a.shape[2]:a.shape[3],u=p==="NHWC"?a.shape[3]:a.shape[1],l=h*i,d=f*i,x=u/(i*i),S=p==="NHWC"?[r,l,d,x]:[r,x,l,d],m=new CZ(S,i,p);return n.runWebGLProgram(m,[a],a.dtype)}const TZ={kernelName:T1,backendName:"webgl",kernelFunc:kZ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jN{constructor(t,n=!1,o=null,a=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const p=t.filterHeight,r=t.filterWidth,h=t.outChannels/t.inChannels;let f="",u="";o&&(a?f=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:i?f=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:f=`
          float activation(float x) {
            ${o}
          }
        `,u="result = activation(result);");const l=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${f}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${h};
        int q = d2 - d1 * ${h};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${r}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${l}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IN{constructor(t,n=!1,o=null,a=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=Cs(this.outputShape.length);const p=t.outChannels/t.inChannels,r=t.padInfo.left,h=t.strideWidth,f=t.dilationWidth,u=t.filterHeight,l=t.filterWidth,d=l;let x=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<l;b++)x+=`
          vec4 xTexelC${b*2};
          int xTexelC${b*2}Ready;
          vec4 xTexelC${b*2+1};
          int xTexelC${b*2+1}Ready;
          vec4 xC${b};`;x+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let b=0;b<l;b++)x+=`
          xTexelC${b*2} = vec4(0.0);
          xTexelC${b*2}Ready = 0;
          xTexelC${b*2+1} = vec4(0.0);
          xTexelC${b*2+1}Ready = 0;
          xC${b} = vec4(0.0);`;x+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let b=0;b<(d+1)/2;b++){const g=b*2;if(x+=`
          xC = xCCorner + ${g*f};
          `,h===1){if(g<l&&(r%2===1?(x+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                  xTexelC${g} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${g}.zw = vec2(0.0);
                  }
                  xTexelC${g}Ready = 1;
                }
              `,f===1&&g>0?x+=`
                xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                `:x+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                  } else {
                    xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                  }
                  `):x+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                  xTexelC${g} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${g}.zw = vec2(0.0);
                  }
                  xTexelC${g}Ready = 1;
                }

                xC${g} = xTexelC${g};
                `,g+1<l)){const w=r%2===0?a1(f):f;f%2===0&&r%2===1||f%2!==0&&r%2!==1?(x+=`
                  xCOffset = xC + imod(pads[1], 2) + ${w};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                    xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${g+1}.zw = vec2(0.0);
                    }
                    xTexelC${g+1}Ready = 1;
                  }
                  `,f>1?x+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                    } else {
                     xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                    }
                    `:x+=`
                    xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                    `):w===1?x+=`
                    xC${g+1} = xTexelC${g};
                    `:x+=`
                    xCOffset = xC + ${w};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                      xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${g+1}.zw = vec2(0.0);
                      }
                      xTexelC${g+1}Ready = 1;
                    }

                    xC${g+1} = xTexelC${g+1};
                    `}}else g<l&&(r%2===1?(x+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                  xTexelC${g} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${g}.zw = vec2(0.0);
                  }
                  xTexelC${g}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                  xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${g+1}.zw = vec2(0.0);
                  }
                  xTexelC${g+1}Ready = 1;
                }

                xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
              `,g+1<l&&(x+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                  xTexelC${g} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${g}.zw = vec2(0.0);
                  }
                  xTexelC${g}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                  xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${g+1}.zw = vec2(0.);
                  }
                  xTexelC${g+1}Ready = 1;
                }

                xC${g} = vec4(
                  xTexelC${g}.xy, xTexelC${g+1}.xy);
              `,g+1<l&&(x+=`
                  xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                `)));g<l&&(x+=`
            wTexel = getW(r, ${g}, d1, q);
            dotProd += xC${g} * vec4(wTexel.xz, wTexel.xz);
          `,g+1<l&&(x+=`
              wTexel = getW(r, ${g+1}, d1, q);
              dotProd += xC${g+1} * vec4(wTexel.xz, wTexel.xz);
            `))}x+=`
    }
  `,x+=`
      }
    `;let S="",m="";o&&(a?S=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:i?S=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:S=`vec4 activation(vec4 x) {
          ${o}
        }`,m="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${p};
        int q = d2 - d1 * ${p};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${x}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i}=t,{strides:p,pad:r,dilations:h,dimRoundingMode:f}=o;let u=h;u==null&&(u=[1,1]),ye(Ss(p,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${p} and dilations '${u}'`);const l=hs(a.shape,i.shape,p,u,r,f,!0);let d;Qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&l.strideWidth<=2&&l.outChannels/l.inChannels===1?d=new IN(l):d=new jN(l);const x=[[l.padInfo.top,l.padInfo.left],[l.strideHeight,l.strideWidth],[l.dilationHeight,l.dilationWidth],[l.inHeight,l.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",x)}const jZ={kernelName:Sg,backendName:"webgl",kernelFunc:EZ};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IZ{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,o=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,p=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${p} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${a};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${o} - ${i};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class AZ{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,o=t.filterWidth,a=t.strideHeight,i=t.strideWidth,p=n-1-t.padInfo.top,r=o-1-t.padInfo.left,h=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${p}, ${r});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${a}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${o} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${h}; dm++) {
              int d2 = d1 * ${h} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,dy:i}=t,{strides:p,dilations:r,pad:h,dimRoundingMode:f,filterShape:u}=o,l=hs(a.shape,u,p,r,h,f,!0),d=new IZ(l);return n.runWebGLProgram(d,[a,i],"float32")}const NZ={kernelName:E1,backendName:"webgl",kernelFunc:RZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DZ(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,filter:i}=t,{strides:p,dilations:r,pad:h,dimRoundingMode:f,inputShape:u}=o,l=hs(u,i.shape,p,r,h,f,!0),d=new AZ(l);return n.runWebGLProgram(d,[a,i],"float32")}const MZ={kernelName:j1,backendName:"webgl",kernelFunc:DZ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OZ{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Z(s){const{inputs:t,backend:n}=s,{x:o}=t,a=[...o.shape,...o.shape],i=at(o.shape),p=It({inputs:{x:o},backend:n,attrs:{shape:[i]}}),r=new OZ(i),h=n.runWebGLProgram(r,[p],p.dtype),f=It({inputs:{x:h},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),f}const LZ={kernelName:pT,backendName:"webgl",kernelFunc:$Z};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FZ{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:o,padInfo:a,strideHeight:i,strideWidth:p,filterHeight:r,filterWidth:h,dilationHeight:f,dilationWidth:u}=t,{top:l,left:d}=a;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${p});
      const ivec2 pads = ivec2(${l}, ${d});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${r}; h++) {
          int hIn = hBeg + h * ${f};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${h}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${o}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PZ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i}=t,{strides:p,pad:r,dilations:h}=o,f=cf(a.shape,i.shape,p,r,"NHWC",h);let u;const l=new FZ(f);u=n.runWebGLProgram(l,[a,i],"float32");const d=It({inputs:{x:u},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(u),d}const BZ={kernelName:_g,backendName:"webgl",kernelFunc:PZ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UZ(s){const{inputs:t,backend:n,attrs:o}=s,{equation:a}=o,i=t,{allDims:p,summedDims:r,idDims:h}=Zx(a,i.length);Jx(p.length,h,i);const{path:f,steps:u}=ew(r,h),l=u.length;let d=null,x=p.length;const S=[];for(let m=0;m<l;++m){for(const y of u[m]){const{permutationIndices:b,expandDims:g}=Qx(x,h[y]);let w;tw(b)?w=i[y]:(w=Ns({inputs:{x:i[y]},backend:n,attrs:{perm:b}}),S.push(w));const _=w.shape.slice();for(let C=0;C<g.length;++C)_.splice(g[C],0,1);$n(w.shape,_)||(w=It({inputs:{x:w},backend:n,attrs:{shape:_}}),S.push(w)),d===null?d=w:(d=Uw({inputs:{a:w,b:d},backend:n}),S.push(d))}m<l-1&&(f[m]>=0&&(d=Oy({inputs:{x:d},backend:n,attrs:{axis:f[m]-(p.length-x),keepDims:!1}}),S.push(d)),x--)}for(const m of S)m!==d&&n.disposeIntermediateTensorInfo(m);return d}const zZ={kernelName:I1,backendName:"webgl",kernelFunc:UZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VZ="return (x >= 0.0) ? x : (exp(x) - 1.0);",GZ=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,WZ=En({opSnippet:VZ,packedOpSnippet:GZ}),HZ={kernelName:kh,backendName:"webgl",kernelFunc:WZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qZ="return (b >= 0.0) ? a : a * (b + 1.0);",XZ=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,YZ=s=>{const{inputs:t,backend:n}=s,{dy:o,y:a}=t,i=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(XZ,o.shape,a.shape):new ru(qZ,o.shape,a.shape);return n.runWebGLProgram(i,[o,a],o.dtype)},KZ={kernelName:A1,backendName:"webgl",kernelFunc:YZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZZ=`
  return vec4(equal(a, b));
`,QZ="return float(a == b);",JZ=ps({opSnippet:QZ,packedOpSnippet:ZZ,dtype:"bool",cpuKernelImpl:Rq}),eQ={kernelName:Cg,backendName:"webgl",kernelFunc:JZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tQ=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${Gx};
  float a1 = ${Wx};
  float a2 = ${Hx};
  float a3 = ${qx};
  float a4 = ${Xx};
  float a5 = ${Yx};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,nQ=En({opSnippet:tQ}),rQ={kernelName:Th,backendName:"webgl",kernelFunc:nQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQ=Fc+`
  return exp(x);
`,oQ=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AN=En({opSnippet:sQ,packedOpSnippet:oQ,cpuKernelImpl:Nq,dtype:"float32"}),aQ={kernelName:Eh,backendName:"webgl",kernelFunc:AN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kv(s){const{inputs:t,attrs:n,backend:o}=s,{dim:a}=n,{input:i}=t,p=i.shape.length,r=i.shape.slice();let h=a;return a<0&&(ye(-(p+1)<=a,()=>`Axis must be in the interval [${-(p+1)}, ${p}]`),h=p+a+1),r.splice(h,0,1),It({inputs:{x:i},backend:o,attrs:{shape:r}})}const iQ={kernelName:kg,backendName:"webgl",kernelFunc:Kv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pk="return exp(x) - 1.0;",lQ=En({opSnippet:Pk,packedOpSnippet:Pk,cpuKernelImpl:Dq}),uQ={kernelName:jh,backendName:"webgl",kernelFunc:lQ};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bk{constructor(t,n,o){this.variableNames=["real","imag"];const a=n[1];this.outputShape=n;const i=o?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,p=o?`${a}.0`:"1.0";let r;if(t==="real")r="return real * expR - imag * expI;";else if(t==="imag")r="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${r}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${p};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RN(s,t,n){const o=n.texData.get(s.dataId),a=at(s.shape),i=s.shape[s.shape.length-1],p=a/i,r=It({inputs:{x:s},backend:n,attrs:{shape:[p,i]}}),h=r.shape,f=new Bk("real",h,t),u=new Bk("imag",h,t),l=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:h},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:h}],d=n.runWebGLProgram(f,l,"float32"),x=n.runWebGLProgram(u,l,"float32"),S=cl({inputs:{real:d,imag:x},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(x);const m=It({inputs:{x:S},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(S),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cQ(s){const{inputs:t,backend:n}=s,{input:o}=t;return RN(o,!1,n)}const dQ={kernelName:R1,backendName:"webgl",kernelFunc:cQ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hQ{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rf(s){const{backend:t,attrs:n}=s,{shape:o,value:a}=n;let{dtype:i}=n;if(i=i||Cc(a),i==="string"){const p=jr(i,at(o));return p.fill(a),t.makeTensorInfo(o,i,p)}else{const p=new hQ(o,a),r=[[a]];return t.runWebGLProgram(p,[],i,r)}}const fQ={kernelName:N1,backendName:"webgl",kernelFunc:Rf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pQ{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mQ={kernelName:D1,backendName:"webgl",kernelFunc:({inputs:s,backend:t})=>{const{image:n}=s,o=t,a=new pQ(n.shape);return o.runWebGLProgram(a,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uk="return floor(x);",gQ=En({opSnippet:Uk,packedOpSnippet:Uk,cpuKernelImpl:Mq}),yQ={kernelName:Ih,backendName:"webgl",kernelFunc:gQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bQ=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,vQ=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,xQ=ps({opSnippet:bQ,packedOpSnippet:vQ,dtype:"int32"}),wQ={kernelName:Ah,backendName:"webgl",kernelFunc:xQ};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SQ{constructor(t){this.variableNames=["A"];const n=Ds(),[o,a]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${o}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Q{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Ds(),[o,a]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${a}.0, ${o}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CQ={kernelName:vv,backendName:"webgl",kernelFunc:kQ};let rc,rv=Qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function kQ(s){const{inputs:t,backend:n,attrs:o}=s;let{pixels:a}=t;const{numChannels:i}=o,p=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,r=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,[h,f]=p?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=[f,h],l=[f,h,i];if(r||p){const m=Qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(rc==null||m!==rv)&&(rv=m,rc=document.createElement("canvas").getContext("2d",{willReadFrequently:rv})),rc.canvas.width=h,rc.canvas.height=f,rc.drawImage(a,0,0,h,f),a=rc.canvas}const d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=co.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);const x=Qe().getBool("WEBGL_PACK")?new _Q(l):new SQ(l),S=n.runWebGLProgram(x,[d],"int32");return n.disposeData(d.dataId),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i,bias:p,preluActivationWeights:r}=t,{strides:h,pad:f,dataFormat:u,dilations:l,dimRoundingMode:d,activation:x,leakyreluAlpha:S}=o,m=ui(u),y=hs(a.shape,i.shape,h,l,f,d,!1,m);let b;const g=[],w=p!=null,_=r!=null,C=x==="leakyrelu",k=()=>{const j=[a,i],A=(O,N)=>{if(N==="NCHW"&&O.shape.length===1&&O.shape[0]!==1){const D=It({inputs:{x:O},backend:n,attrs:{shape:[O.shape[0],1,1]}});return g.push(D),D}return O};if(w&&j.push(A(p,u)),_&&j.push(A(r,u)),C){const O=n.makeTensorInfo([],"float32",tl(S,"float32"));j.push(O),g.push(O)}return j};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))b=kN({x:a,filter:i,convInfo:y,backend:n,bias:p,activation:x,preluActivationWeights:r,leakyreluAlpha:S});else if(y.strideWidth<=2&&m==="channelsLast"&&Qe().getBool("WEBGL_EXP_CONV")){const j=x?oh(x,!0):null,A=new CN(y,w,j,_,C),O=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],N=k();b=n.runWebGLProgram(A,N,"float32",O)}else if(Qe().getBool("WEBGL_CONV_IM2COL"))b=TN({x:a,filter:i,convInfo:y,backend:n,bias:p,activation:x,preluActivationWeights:r,leakyreluAlpha:S});else{const j=x?oh(x,!1):null,A=new _N(y,w,j,_,C),O=k();b=n.runWebGLProgram(A,O,"float32")}const E=It({inputs:{x:b},backend:n,attrs:{shape:y.outShape}});return g.push(b),g.forEach(j=>n.disposeIntermediateTensorInfo(j)),E}const EQ={kernelName:Am,backendName:"webgl",kernelFunc:TQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,filter:i,bias:p,preluActivationWeights:r}=t,{strides:h,pad:f,dilations:u,dimRoundingMode:l,activation:d,leakyreluAlpha:x}=o,S=[];let m=u;m==null&&(m=[1,1]),ye(Ss(h,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${h} and dilations '${m}'`);const y=hs(a.shape,i.shape,h,m,f,l,!0),b=Qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,g=d?oh(d,b):null,w=[a,i],_=p!=null,C=r!=null,k=d==="leakyrelu";if(_&&w.push(p),C&&w.push(r),k){const O=n.makeTensorInfo([],"float32",tl(x,"float32"));w.push(O),S.push(O)}let E;b?E=new IN(y,_,g,C,k):E=new jN(y,_,g,C,k);const j=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],A=n.runWebGLProgram(E,w,"float32",j);return S.forEach(O=>n.disposeIntermediateTensorInfo(O)),A}const IQ={kernelName:DT,backendName:"webgl",kernelFunc:jQ};class AQ{constructor(t,n,o,a){this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=o;const i=qn(o.length);let p=`
    int index;`;for(let r=0;r<this.sliceDim;r++)p+=`
          index = round(getIndices(coords[0], ${r}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[r]};
          flattenIndex += index * ${this.strides[r]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${p}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RQ(s){const{inputs:t,backend:n}=s,{params:o,indices:a}=t,i=a.shape,p=i[i.length-1],r=at(o.shape),[h,f,u,l]=Dx(o,a),d=It({inputs:{x:a},backend:n,attrs:{shape:[f,p]}}),x=It({inputs:{x:o},backend:n,attrs:{shape:[at(o.shape)/u,u]}});if(n.shouldExecuteOnCPU([o,a])||o.dtype==="string"){const b=n.readSync(a.dataId),g=n.bufferSync(o),w=Oq(b,g,o.dtype,f,p,u,l,o.shape,r);return n.makeTensorInfo(h,o.dtype,w.values)}const S=new AQ(p,l,[f,u],o.shape),m=n.runWebGLProgram(S,[x,d],x.dtype),y=It({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(m),y}const NQ={kernelName:mT,backendName:"webgl",kernelFunc:RQ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DQ{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const o=qn(this.rank),a=MQ(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${a}));
      }
    `}}function MQ(s,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[];for(let a=0;a<s.length;a++)a===2?o.push("index"):o.push(`${n[a]}`);return o.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NN(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,indices:i}=t,{axis:p,batchDims:r}=o,h=pn(p,a.shape)[0];if(Qe().get("DEBUG")){const g=n.readSync(i.dataId),w=a.shape[h];for(let _=0;_<g.length;++_){const C=g[_];ye(C<=w-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${w-1}]`)}}const f=rw(a,i,h,r),u=at(i.shape),l=[],d=It({inputs:{x:a},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),x=It({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,u/f.batchSize]}});l.push(d),l.push(x);const S=[f.batchSize,f.outerSize,u/f.batchSize,f.sliceSize];if(n.shouldExecuteOnCPU([a,i])||a.dtype==="string"){const g=n.bufferSync(x),w=n.bufferSync(d),_=$q(w,g,S);return l.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(f.outputShape,_.dtype,_.values)}const m=new DQ(d.shape,S),y=n.runWebGLProgram(m,[d,x],d.dtype);l.push(y);const b=It({inputs:{x:y},backend:n,attrs:{shape:f.outputShape}});return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),b}const OQ={kernelName:Eg,backendName:"webgl",kernelFunc:NN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Q="return float(a > b);",LQ=`
  return vec4(greaterThan(a, b));
`,FQ=ps({opSnippet:$Q,packedOpSnippet:LQ,cpuKernelImpl:Lq,dtype:"bool"}),PQ={kernelName:jg,backendName:"webgl",kernelFunc:FQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BQ="return float(a >= b);",UQ=`
  return vec4(greaterThanEqual(a, b));
`,zQ=ps({opSnippet:BQ,packedOpSnippet:UQ,dtype:"bool",cpuKernelImpl:Fq}),VQ={kernelName:Rh,backendName:"webgl",kernelFunc:zQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GQ(s){const{inputs:t,backend:n}=s,{input:o}=t;return RN(o,!0,n)}const WQ={kernelName:M1,backendName:"webgl",kernelFunc:GQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HQ="return float(!isnan(x) && !isinf(x));",qQ=En({opSnippet:HQ,dtype:"bool"}),XQ={kernelName:Dh,backendName:"webgl",kernelFunc:qQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQ="return float(isinf(x));",KQ=En({opSnippet:YQ,dtype:"bool"}),ZQ={kernelName:Mh,backendName:"webgl",kernelFunc:KQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QQ="return float(isnan(x));",JQ=En({opSnippet:QQ,dtype:"bool"}),eJ={kernelName:Oh,backendName:"webgl",kernelFunc:JQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tJ="return float(a < b);",nJ=`
  return vec4(lessThan(a, b));
`,rJ=ps({opSnippet:tJ,packedOpSnippet:nJ,cpuKernelImpl:Pq,dtype:"bool"}),sJ={kernelName:Ag,backendName:"webgl",kernelFunc:rJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oJ="return float(a <= b);",aJ=`
  return vec4(lessThanEqual(a, b));
`,iJ=ps({opSnippet:oJ,packedOpSnippet:aJ,cpuKernelImpl:Bq,dtype:"bool"}),lJ={kernelName:Rg,backendName:"webgl",kernelFunc:iJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJ(s){const{backend:t,attrs:n}=s,{start:o,stop:a,num:i}=n,p=Uq(o,a,i);return t.makeTensorInfo([p.length],"float32",p)}const cJ={kernelName:gT,backendName:"webgl",kernelFunc:uJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dJ=Fc+`
  return x < 0.0 ? 0./0. : log(x);
`,hJ=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,fJ=En({opSnippet:dJ,packedOpSnippet:hJ,cpuKernelImpl:zq}),pJ={kernelName:$h,backendName:"webgl",kernelFunc:fJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mJ=Fc+`
  return log(1.0 + x);
`,gJ=En({opSnippet:mJ}),yJ={kernelName:Lh,backendName:"webgl",kernelFunc:gJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bJ="return float(a >= 1.0 && b >= 1.0);",vJ=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,xJ=ps({opSnippet:bJ,packedOpSnippet:vJ,dtype:"bool"}),wJ={kernelName:Ng,backendName:"webgl",kernelFunc:xJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SJ="return float(!(x >= 1.0));",_J=En({opSnippet:SJ}),CJ={kernelName:Dg,backendName:"webgl",kernelFunc:_J};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kJ="return float(a >= 1.0 || b >= 1.0);",TJ=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,EJ=ps({opSnippet:kJ,packedOpSnippet:TJ,dtype:"bool"}),jJ={kernelName:Mg,backendName:"webgl",kernelFunc:EJ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IJ{constructor(t,n,o,a,i){this.variableNames=["x"],this.outputShape=[];const p=n,r=t[3]-1;this.outputShape=t;let h;const f=`float(${o}) + float(${a}) * sum`;i===.5?h=`inversesqrt(${f})`:i===1?h=`1.0/(${f})`:h=`exp(log(${f}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${p}; j <= ${p}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${r}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${h};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AJ{constructor(t,n,o,a,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const p=n,r=t[3]-1;this.outputShape=t;let h;const f=`float(${o}) + float(${a}) * sum`;i===.5?h=`inversesqrt(${f})`:i===1?h=`1.0/(${f})`:h=`exp(log(${f}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${p};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${p}; j <= ${p}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${r}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${h};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RJ=s=>{const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{depthRadius:i,bias:p,alpha:r,beta:h}=o,f=Qe().getBool("WEBGL_PACK_NORMALIZATION")?new AJ(a.shape,i,p,r,h):new IJ(a.shape,i,p,r,h);return n.runWebGLProgram(f,[a],a.dtype)},NJ={kernelName:Og,backendName:"webgl",kernelFunc:RJ};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DJ{constructor(t,n,o,a,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=o,this.alpha=a,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${a}) * norm + float(${o});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${a})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MJ=s=>{const{inputs:t,backend:n,attrs:o}=s,{x:a,y:i,dy:p}=t,{depthRadius:r,bias:h,alpha:f,beta:u}=o,l=new DJ(a.shape,r,h,f,u);return n.runWebGLProgram(l,[a,i,p],a.dtype)},OJ={kernelName:$1,backendName:"webgl",kernelFunc:MJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J(s,t,n,o){const a=at(t),p=at(s.shape)/a,r=It({inputs:{x:s},attrs:{shape:[p,a]},backend:o}),h=mu(r,s.dtype,"max",o),f=It({inputs:{x:h},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(r),o.disposeIntermediateTensorInfo(h),f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DN(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{reductionIndices:i,keepDims:p}=o,r=a.shape.length,h=pn(i,a.shape);let f=h;const u=br(f,r),l=u!=null,d=n.shouldExecuteOnCPU([a]);let x=a;if(l){if(d){const w=n.texData.get(x.dataId).values,_=new Array(r);for(let E=0;E<_.length;E++)_[E]=a.shape[u[E]];const C=Pw(w,a.shape,a.dtype,u,_);x=n.makeTensorInfo(_,a.dtype);const k=n.texData.get(x.dataId);k.values=C}else x=My(a,u,n);f=Rr(f.length,r)}fs("max",f,r);const[S,m]=ss(x.shape,f);let y=S;p&&(y=Fr(S,h));let b;if(d){const w=n.texData.get(x.dataId).values,_=Vq(w,at(m),y,a.dtype);b=n.makeTensorInfo(y,a.dtype);const C=n.texData.get(b.dataId);C.values=_}else b=$J(x,m,y,n);return l&&n.disposeIntermediateTensorInfo(x),b}const LJ={kernelName:$g,backendName:"webgl",kernelFunc:DN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FJ=Bw+`
  return max(a, b);
`,PJ=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+pu+`
  return result;
`,BJ=ps({opSnippet:FJ,packedOpSnippet:PJ,cpuKernelImpl:Gq}),UJ={kernelName:Fh,backendName:"webgl",kernelFunc:BJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t;jf(a,"maxPool");const{filterSize:i,strides:p,pad:r,dimRoundingMode:h}=o,f=1;ye(Ss(p,f),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${p} and dilations '${f}'`);const u=$o(a.shape,i,p,f,r,h);if(u.filterWidth===1&&u.filterHeight===1&&$n(u.inShape,u.outShape))return eo({inputs:{x:a},backend:n});const l=new ah(u,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}const VJ={kernelName:Lg,backendName:"webgl",kernelFunc:zJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GJ(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{filterSize:i,strides:p,pad:r,dataFormat:h,dimRoundingMode:f}=o,u=[1,1,1],l=li(a.shape,i,p,u,r,f,h),d=new zw(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}const WJ={kernelName:Fg,backendName:"webgl",kernelFunc:GJ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HJ{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,p=t.effectiveFilterWidth,r=i-1-t.padInfo.top,h=p-1-t.padInfo.left,f=i*p-1;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${p}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${f} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${p} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class qJ{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,p=t.dilationHeight,r=t.dilationWidth,h=t.effectiveFilterDepth,f=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=h-1-t.padInfo.front,d=f-1-t.padInfo.top,x=u-1-t.padInfo.left,S=h*f*u-1;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${d}, ${x});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${p}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${r}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${S} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${f} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XJ(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,input:i}=t,p=i,{filterSize:r,strides:h,pad:f,dimRoundingMode:u}=o,l=[1,1,1],d=li(p.shape,r,h,l,f,u),x=new zw(d,"max",!0),S=n.runWebGLProgram(x,[p],p.dtype),m=new qJ(d),y=n.runWebGLProgram(m,[a,S],p.dtype);return n.disposeIntermediateTensorInfo(S),y}const YJ={kernelName:F1,backendName:"webgl",kernelFunc:XJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJ(s){const{inputs:t,backend:n,attrs:o}=s,{dy:a,input:i,output:p}=t,r=i;jf([i,p],"maxPoolGrad");const{filterSize:h,strides:f,pad:u,dimRoundingMode:l}=o,d=$o(r.shape,h,f,1,u,l),x=!0,S=new ah(d,"max",x),m=n.runWebGLProgram(S,[r],r.dtype),y=new HJ(d),b=n.runWebGLProgram(y,[a,m],r.dtype);return n.disposeIntermediateTensorInfo(m),b}const ZJ={kernelName:L1,backendName:"webgl",kernelFunc:KJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJ(s,t,n,o){let a=new ah(n,"max",!1);const i=o.runWebGLProgram(a,[s],"float32");a=new ah(n,"max",!0,!0,t);const p=o.runWebGLProgram(a,[s],"float32");return[i,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JJ={kernelName:yT,backendName:"webgl",kernelFunc:({inputs:s,attrs:t,backend:n})=>{const{x:o}=s,{filterSize:a,strides:i,pad:p,includeBatchInIndex:r}=t,h=n;ye(o.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.shape.length}.`);const f=[1,1];ye(Ss(i,f),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const u=$o(o.shape,a,i,f,p),[l,d]=QJ(o,r,u,h);return[l,d]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eee(s,t,n,o){const a=at(t),p=at(s.shape)/a,r=It({inputs:{x:s},attrs:{shape:[p,a]},backend:o}),h=mu(r,"float32","mean",o),f=It({inputs:{x:h},attrs:{shape:n},backend:o});return o.disposeIntermediateTensorInfo(r),o.disposeIntermediateTensorInfo(h),f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tee={kernelName:Pg,backendName:"webgl",kernelFunc:({inputs:s,attrs:t,backend:n})=>{const{x:o}=s,{keepDims:a,axis:i}=t,p=n,r=o.shape.length,h=pn(i,o.shape);let f=h;const u=br(f,r),l=u!=null,d=p.shouldExecuteOnCPU([o]),x=[];let S=o;if(l){if(d){const _=p.texData.get(S.dataId).values,C=new Array(r);for(let j=0;j<C.length;j++)C[j]=o.shape[u[j]];const k=Pw(_,o.shape,o.dtype,u,C);S=p.makeTensorInfo(C,o.dtype);const E=p.texData.get(S.dataId);E.values=k}else S=My(o,u,p);x.push(S),f=Rr(f.length,r)}fs("sum",f,r);const[m,y]=ss(S.shape,f);let b=m;a&&(b=Fr(m,h));const g=eee(S,y,b,p);for(const w of x)p.disposeIntermediateTensorInfo(w);return g}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nee(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o,r=a.shape.length,h=pn(i,a.shape);let f=h;const u=br(f,r);let l=a;u!=null&&(l=Ns({inputs:{x:a},backend:n,attrs:{perm:u}}),f=Rr(f.length,a.shape.length)),fs("min",f,r);const[d,x]=ss(l.shape,f),S=at(x),m=It({inputs:{x:l},backend:n,attrs:{shape:[-1,S]}}),y=mu(m,m.dtype,"min",n);let b;if(p){const g=Fr(d,h);b=It({inputs:{x:y},backend:n,attrs:{shape:g}})}else b=It({inputs:{x:y},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),u!=null&&n.disposeIntermediateTensorInfo(l),b}const ree={kernelName:Bg,backendName:"webgl",kernelFunc:nee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const see=Bw+`
  return min(a, b);
`,oee=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+pu+`
  return result;
`,aee=ps({opSnippet:see,packedOpSnippet:oee,cpuKernelImpl:Wq}),iee={kernelName:Ph,backendName:"webgl",kernelFunc:aee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lee{constructor(t,n,o){this.variableNames=["x"],this.outputShape=n.map((u,l)=>u[0]+t[l]+u[1]);const a=t.length,i=qn(a),p=n.map(u=>u[0]).join(","),r=n.map((u,l)=>u[0]+t[l]).join(","),h=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),f=o==="reflect"?0:1;if(a===1){this.userCode=`
        int start = ${p};
        int end = ${r};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${f};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${f};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${p});
      ${i} end = ${i}(${r});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${a}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${f};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${f};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${h}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uee{constructor(t,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((S,m)=>S[0]+t[m]+S[1]);const a=t.length,i=qn(a),p=n.map(S=>S[0]).join(","),r=n.map((S,m)=>S[0]+t[m]).join(","),h=As("rc",a),f=As("source",a),u=`${h[a-1]} < ${this.outputShape[a-1]}`,l=a===1?"source":`vec2(${f.slice(-2).join()})`,d=o==="reflect"?0:1;let x="";if(a===1){const S=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${d};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${d};
        }
        source -= start;
      `;x=`
        ${i} rc = outputLoc;
        ${S}
        result[0] = getChannel(getX(${f.join()}), ${l});
        ${h[a-1]} += 1;
        if(${u}) {
          ${S}
          result[1] = getChannel(getX(${f.join()}), ${l});
        }
      `}else{const S=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${d}) +
                gte * ((end - 1) * 2 - source + ${d});
        source -= start;
      `;x=`
        ${i} rc = outputLoc;
        ${S}
        result[0] = getChannel(getX(${f.join()}), ${l});
        ${h[a-1]} += 1;
        if(${u}) {
          ${S}
          result[1] = getChannel(getX(${f.join()}), ${l});
        }
        rc = outputLoc;
        ${h[a-2]} += 1;
        if(${h[a-2]} < ${this.outputShape[a-2]}) {
          ${S}
          result[2] = getChannel(getX(${f.join()}), ${l});
          ${h[a-1]} += 1;
          if(${u}) {
            ${S}
            result[3] = getChannel(getX(${f.join()}), ${l});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${p});
      const ${i} end = ${i}(${r});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cee=({inputs:s,backend:t,attrs:n})=>{const{x:o}=s,{paddings:a,mode:i}=n,p=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uee(o.shape,a,i):new lee(o.shape,a,i);return t.runWebGLProgram(p,[o],o.dtype)},dee={kernelName:Ug,backendName:"webgl",kernelFunc:cee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hee=`if (b == 0.0) return NAN;
  return mod(a, b);`,fee=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+pu+`
  return result;
`,pee=ps({opSnippet:hee,packedOpSnippet:fee}),mee={kernelName:Bh,backendName:"webgl",kernelFunc:pee};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gee{constructor(t,n,o){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,o],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yee=`
if (a == b) {
  return 1.0;
};
return a / b;`,bee=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,MN=ps({opSnippet:yee,packedOpSnippet:bee,checkOutOfBounds:!0}),vee={kernelName:Ch,backendName:"webgl",kernelFunc:MN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zk="return a - b;",ON=ps({opSnippet:zk,packedOpSnippet:zk,supportsComplex:!0,cpuKernelImpl:hX}),xee={kernelName:nf,backendName:"webgl",kernelFunc:ON};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $N(s){const{inputs:t,backend:n,attrs:o}=s,{logits:a}=t,{dim:i}=o,p=pn([i],a.shape),r=DN({inputs:{x:a},backend:n,attrs:{reductionIndices:p,keepDims:!1}}),h=Fr(r.shape,p),f=It({inputs:{x:r},backend:n,attrs:{shape:h}}),u=ON({inputs:{a,b:f},backend:n}),l=AN({inputs:{x:u},backend:n}),d=Oy({inputs:{x:l},backend:n,attrs:{axis:p,keepDims:!1}}),x=It({inputs:{x:d},backend:n,attrs:{shape:h}}),S=MN({inputs:{a:l,b:x},backend:n});return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(x),S}const wee={kernelName:oy,backendName:"webgl",kernelFunc:$N};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function See(s){const{inputs:t,backend:n,attrs:o}=s,{logits:a}=t,{numSamples:i,seed:p,normalized:r}=o,h=r?a:$N({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),f=h.shape[0],u=h.shape[1],l=new gee(f,u,i),d=[[p]],x=n.runWebGLProgram(l,[h],"int32",d);return r||n.disposeIntermediateTensorInfo(h),x}const _ee={kernelName:bT,backendName:"webgl",kernelFunc:See};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cee=Fo+`
  return -x;
`,kee=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Tee(s){const{inputs:t,backend:n}=s,{x:o}=t;if(n.shouldExecuteOnCPU([o])){const i=n.texData.get(o.dataId),[p,r]=qq(i.values,o.shape,o.dtype);return n.makeTensorInfo(r,o.dtype,p)}let a;return Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?a=new zi(o.shape,kee):a=new Sa(o.shape,Cee),n.runWebGLProgram(a,[o],o.dtype)}const Eee={kernelName:zg,backendName:"webgl",kernelFunc:Tee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jee=Ex;function Iee(s){uo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:o}=s,{boxes:a,scores:i}=t,{maxOutputSize:p,iouThreshold:r,scoreThreshold:h}=o,f=n.readSync(a.dataId),u=n.readSync(i.dataId),{selectedIndices:l}=jee(f,u,p,r,h);return n.makeTensorInfo([l.length],"int32",new Int32Array(l))}const Aee={kernelName:P1,backendName:"webgl",kernelFunc:Iee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ree=jx;function Nee(s){uo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:o}=s,{boxes:a,scores:i}=t,{maxOutputSize:p,iouThreshold:r,scoreThreshold:h,padToMaxOutputSize:f}=o,u=n.readSync(a.dataId),l=n.readSync(i.dataId),{selectedIndices:d,validOutputs:x}=Ree(u,l,p,r,h,f);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([x]))]}const Dee={kernelName:B1,backendName:"webgl",kernelFunc:Nee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mee=Ix;function Oee(s){uo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:o}=s,{boxes:a,scores:i}=t,{maxOutputSize:p,iouThreshold:r,scoreThreshold:h,softNmsSigma:f}=o,u=n.readSync(a.dataId),l=n.readSync(i.dataId),d=p,x=r,S=h,m=f,{selectedIndices:y,selectedScores:b}=Mee(u,l,d,x,S,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([b.length],"float32",new Float32Array(b))]}const $ee={kernelName:U1,backendName:"webgl",kernelFunc:Oee};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lee{constructor(t,n,o,a){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${a}), float(${o}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fee=s=>{const{inputs:t,backend:n,attrs:o}=s,{indices:a}=t,{dtype:i,depth:p,onValue:r,offValue:h}=o,f=at(a.shape),u=new Lee(f,p,r,h),l=It({inputs:{x:a},backend:n,attrs:{shape:[f]}}),d=n.runWebGLProgram(u,[l],i);n.disposeIntermediateTensorInfo(l);const x=[...a.shape,p],S=It({inputs:{x:d},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(d),S},Pee={kernelName:Wg,backendName:"webgl",kernelFunc:Fee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rg(s){const{inputs:t,backend:n}=s,{x:o}=t;if(o.dtype==="complex64"){const a=Af({inputs:{input:o},backend:n}),i=rg({inputs:{x:a},backend:n}),p=$y({inputs:{input:o},backend:n}),r=rg({inputs:{x:p},backend:n}),h=cl({inputs:{real:i,imag:r},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(r),h}else return Rf({attrs:{shape:o.shape,dtype:o.dtype,value:o.dtype==="string"?"":0},backend:n})}const Bee={kernelName:ly,backendName:"webgl",kernelFunc:rg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LN(s){const{inputs:t,backend:n}=s,{x:o}=t;if(o.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(o.dtype==="complex64"){const a=Af({inputs:{input:o},backend:n}),i=LN({inputs:{x:a},backend:n}),p=$y({inputs:{input:o},backend:n}),r=rg({inputs:{x:p},backend:n}),h=cl({inputs:{real:i,imag:r},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(r),h}else return Rf({attrs:{shape:o.shape,dtype:o.dtype,value:1},backend:n})}const Uee={kernelName:Gg,backendName:"webgl",kernelFunc:LN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zee(s){const{inputs:t,backend:n,attrs:o}=s,{axis:a}=o;if(t.length===1)return Kv({inputs:{input:t[0]},backend:n,attrs:{dim:a}});const i=t[0].shape,p=t[0].dtype;t.forEach(u=>{i1(i,u.shape,"All tensors passed to stack must have matching shapes"),ye(p===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const r=[],h=t.map(u=>{const l=Kv({inputs:{input:u},backend:n,attrs:{dim:a}});return r.push(l),l}),f=SN({inputs:h,backend:n,attrs:{axis:a}});return r.forEach(u=>n.disposeIntermediateTensorInfo(u)),f}const Vee={kernelName:Hg,backendName:"webgl",kernelFunc:zee};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gee{constructor(t,n,o){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((f,u)=>f[0]+t[u]+f[1]);const a=t.length,i=qn(a),p=n.map(f=>f[0]).join(","),r=n.map((f,u)=>f[0]+t[u]).join(","),h=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);if(a===1){this.userCode=`
        int start = ${p};
        int end = ${r};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${p});
      ${i} end = ${i}(${r});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${h}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wee{constructor(t,n,o){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,y)=>m[0]+t[y]+m[1]);const a=t.length,i=qn(a),p=n.map(m=>m[0]).join(","),r=n.map((m,y)=>m[0]+t[y]).join(","),h=As("rc",a),f=As("source",a),u=`${h[a-1]} < ${this.outputShape[a-1]}`,l=a===1?"source":`vec2(${f.slice(-2).join()})`,d=[`${i} rc = outputLoc;`,`${h[a-1]} += 1;
       if(${u}) {
      `,a===1?"":`}
       rc = outputLoc;
       ${h[a-2]} += 1;
       if(${h[a-2]} < ${this.outputShape[a-2]}) {`,a===1?"":`  ${h[a-1]} += 1;
         if(${u}) {`],x=a===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let S="";for(let m=0,y=a===1?2:4;m<y;m++)S+=`
        ${d[m]}
        if (${x}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${f.join()}), ${l});
        }
      `;S+=a===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${p});
      const ${i} end = ${i}(${r});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${S}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FN=s=>{const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{paddings:i,constantValue:p}=o;if(at(a.shape)===0){const f=i.map((u,l)=>u[0]+a.shape[l]+u[1]);return Rf({backend:n,attrs:{shape:f,value:p,dtype:a.dtype}})}const r=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Wee(a.shape,i,p):new Gee(a.shape,i,p),h=[[p]];return n.runWebGLProgram(r,[a],a.dtype,h)},Hee={kernelName:qg,backendName:"webgl",kernelFunc:FN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qee=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Xee=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+pu+`
  return result;
`,Yee=ps({opSnippet:qee,packedOpSnippet:Xee}),Kee={kernelName:zh,backendName:"webgl",kernelFunc:Yee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{axis:i,keepDims:p}=o,r=a.shape.length,h=[],f=pn(i,a.shape);let u=f;const l=br(u,r);let d=a;l!=null&&(d=Ns({inputs:{x:a},backend:n,attrs:{perm:l}}),u=Rr(u.length,r),h.push(d)),fs("prod",u,r);let x;if(n.shouldExecuteOnCPU([d])){const S=n.texData.get(d.dataId).values,{outVals:m,outShape:y,outDtype:b}=Yq(d.shape,d.dtype,S,u);x=n.makeTensorInfo(y,b,m)}else{const[S,m]=ss(d.shape,u),y=at(m),b=It({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),g=J1(a.dtype),w=mu(b,g,"prod",n);x=It({inputs:{x:w},backend:n,attrs:{shape:S}}),h.push(b),h.push(w)}if(p){h.push(x);const S=Fr(x.shape,f);x=It({inputs:{x},backend:n,attrs:{shape:S}})}return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),x}const Qee={kernelName:Yg,backendName:"webgl",kernelFunc:Zee};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jee(s){const{inputs:t,backend:n,attrs:o}=s,{paramsNestedSplits:a,paramsDenseValues:i,indices:p}=t,{outputRaggedRank:r}=o,h=a.map(b=>n.readSync(b.dataId)),f=a.map(b=>b.shape),u=n.readSync(i.dataId),l=n.readSync(p.dataId),[d,x,S]=Kq(h,f,u,i.shape,i.dtype,l,p.shape,r),m=d.map(b=>n.makeTensorInfo([b.length],"int32",b)),y=n.makeTensorInfo(S,i.dtype,x);return m.concat([y])}const ete={kernelName:vT,backendName:"webgl",kernelFunc:Jee};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tte(s){const{inputs:t,backend:n}=s,{starts:o,limits:a,deltas:i}=t,p=n.readSync(o.dataId),r=n.readSync(a.dataId),h=n.readSync(i.dataId),[f,u]=Zq(p,o.shape,o.dtype,r,a.shape,h,i.shape),l=n.makeTensorInfo([f.length],"int32",f),d=n.makeTensorInfo([u.length],o.dtype,u);return[l,d]}const nte={kernelName:xT,backendName:"webgl",kernelFunc:tte};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rte(s){const{inputs:t,backend:n,attrs:o}=s,{shape:a,values:i,defaultValue:p,rowPartitionTensors:r}=t,{rowPartitionTypes:h}=o,f=n.readSync(a.dataId),u=n.readSync(i.dataId),l=n.readSync(p.dataId),d=r.map(y=>n.readSync(y.dataId)),x=r.map(y=>y.shape),[S,m]=Qq(f,a.shape,u,i.shape,i.dtype,l,p.shape,d,x,h);return n.makeTensorInfo(S,i.dtype,m)}const ste={kernelName:wT,backendName:"webgl",kernelFunc:rte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PN=s=>{const{backend:t,attrs:n}=s,{start:o,stop:a,step:i,dtype:p}=n,r=Jq(o,a,i,p);return t.makeTensorInfo([r.length],p,r)},ote={kernelName:z1,backendName:"webgl",kernelFunc:PN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ate="return 1.0 / x;",ite=En({opSnippet:ate}),lte={kernelName:Vh,backendName:"webgl",kernelFunc:ite};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ute=Fo+`
  return (x < 0.0) ? 0.0 : x;
`,cte=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,dte=En({opSnippet:ute,packedOpSnippet:cte}),hte={kernelName:Gh,backendName:"webgl",kernelFunc:dte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fte=Fo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,pte=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mte=En({opSnippet:fte,packedOpSnippet:pte}),gte={kernelName:Wh,backendName:"webgl",kernelFunc:mte};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yte{constructor(t,n,o,a,i){this.variableNames=["A"],this.outputShape=[];const[p,r,h,f]=t;this.outputShape=[p,n,o,f];const u=[a&&n>1?r-1:r,a&&o>1?h-1:h],l=[a&&n>1?n-1:n,a&&o>1?o-1:o];let d;i?d="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":d="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/l[0]},
          ${u[1]/l[1]});
      const vec2 inputShapeRC = vec2(${r}.0, ${h}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bte{constructor(t,n,o,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[p,r,h,f]=t;this.outputShape=[p,n,o,f];const u=[a&&n>1?r-1:r,a&&o>1?h-1:h],l=[a&&n>1?n-1:n,a&&o>1?o-1:o];let d;i?d="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":d="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/l[0]},
          ${u[1]/l[1]},
          ${u[1]/l[1]});
      const vec3 inputShapeRC = vec3(${r}.0, ${h}.0,
                                     ${h}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${d};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${f-1};
        bool hasNextRow = coords.z < ${o-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(s){const{inputs:t,backend:n,attrs:o}=s,{images:a}=t,{alignCorners:i,halfPixelCenters:p,size:r}=o,[h,f]=r,u=Qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bte(a.shape,h,f,i,p):new yte(a.shape,h,f,i,p);return n.runWebGLProgram(u,[a],"float32")}const xte={kernelName:Qg,backendName:"webgl",kernelFunc:vte};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wte{constructor(t,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,p,r]=t,h=[o&&p>1?a-1:a,o&&r>1?i-1:i],f=[o&&p>1?p-1:p,o&&r>1?r-1:r],u=h[0]/f[0],l=h[1]/f[1],d=1/u,x=1/l,S=Math.ceil(d)*2+2,m=Math.ceil(x)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${l});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${x});

        const int winHeight = int(${S});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${p}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${r}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(s){const{inputs:t,backend:n,attrs:o}=s,{images:a,dy:i}=t,{alignCorners:p}=o,r=new wte(i.shape,a.shape,p);return n.runWebGLProgram(r,[i],i.dtype)}const _te={kernelName:W1,backendName:"webgl",kernelFunc:Ste};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cte{constructor(t,n,o,a,i){this.variableNames=["A"],this.outputShape=[];const[p,r,h,f]=t;this.outputShape=[p,n,o,f];const u=[a&&n>1?r-1:r,a&&o>1?h-1:h],l=[a&&n>1?n-1:n,a&&o>1?o-1:o],d=a?"0.5":"0.0";let x;i?x="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":x="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/l[0]},
          ${u[1]/l[1]});
      const vec2 inputShapeRC = vec2(${r}.0, ${h}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${x};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kte{constructor(t,n,o,a,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[p,r,h,f]=t;this.outputShape=[p,n,o,f];const u=[a&&n>1?r-1:r,a&&o>1?h-1:h],l=[a&&n>1?n-1:n,a&&o>1?o-1:o],d=a?"0.5":"0.0";let x;i?x="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":x="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/l[0]},
          ${u[1]/l[1]},
          ${u[1]/l[1]});
      const vec3 inputShapeRC = vec3(${r}.0, ${h}.0,
                                     ${h}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${x};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${f-1};
        bool hasNextRow = coords.z < ${o-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(s){const{inputs:t,backend:n,attrs:o}=s,{images:a}=t,{alignCorners:i,halfPixelCenters:p,size:r}=o,[h,f]=r,u=Qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new kte(a.shape,h,f,i,p):new Cte(a.shape,h,f,i,p);return n.runWebGLProgram(u,[a],a.dtype)}const Ete={kernelName:Zg,backendName:"webgl",kernelFunc:Tte};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jte{constructor(t,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,a,i]=n,[,p,r]=t,h=[o&&p>1?a-1:a,o&&r>1?i-1:i],f=[o&&p>1?p-1:p,o&&r>1?r-1:r],u=h[0]/f[0],l=h[1]/f[1],d=1/u,x=1/l,S=Math.ceil(d)*2+2,m=Math.ceil(x)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${l});

        const float invHeightScale = float(${d});
        const float invWidthScale = float(${x});

        const int winHeight = int(${S});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${p}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${r}) {
              continue;
            }

            float sourceFracRow =
              float(${h[0]}) *
                (float(dyR) / float(${f[0]}));

            float sourceFracCol =
                float(${h[1]}) *
                  (float(dyC) / float(${f[1]}));

            int sourceNearestRow = int(min(
                float(int(${a}) - 1),
                ${o} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${o} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(s){const{inputs:t,backend:n,attrs:o}=s,{images:a,dy:i}=t,{alignCorners:p}=o,r=new jte(i.shape,a.shape,p);return n.runWebGLProgram(r,[i],i.dtype)}const Ate={kernelName:G1,backendName:"webgl",kernelFunc:Ite};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rte{constructor(t,n){this.variableNames=["x"];const o=t.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);if(this.outputShape=t,o===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const a=r=>n.indexOf(r)!==-1&&t[r]!==1?`${t[r]} - coords[${r}] - 1`:`coords[${r}]`,i=t.map((r,h)=>a(h)).join(","),p=qn(o);this.userCode=`
      void main() {
        ${p} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nte{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const o=t.length;if(o>4)throw new Error(`WebGL backend: Reverse of rank-${o} tensor is not yet supported`);this.outputShape=t;const a=As("rc",o),i=`${a[o-1]} + 1 < ${this.outputShape[o-1]}`,p=`${a[o-2]} + 1 < ${this.outputShape[o-2]}`,r=qn(o);o===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${h(a.slice())};
          if(${i}){
            result.g = ${f(a.slice())};
          }
          if(${p}) {
            result.b = ${u(a.slice())};
            if(${i}) {
              result.a = ${l(a.slice())};
            }
          }
          setOutput(result);
        }
    `;function h(S){return d(S)}function f(S){return S[o-1]="("+S[o-1]+" + 1)",d(S)}function u(S){return S[o-2]="("+S[o-2]+" + 1)",d(S)}function l(S){return S[o-1]="("+S[o-1]+" + 1)",S[o-2]="("+S[o-2]+" + 1)",d(S)}function d(S){const m=t.map((g,w)=>x(w,S)),y=m.join(","),b=m.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${b}))`}function x(S,m){return n.indexOf(S)!==-1&&t[S]!==1?`${t[S]} - ${m[S]} - 1`:`${m[S]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dte(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{dims:i}=o,p=a.shape.length,r=pn(i,a.shape);if(p===0)return eo({inputs:{x:a},backend:n});const h=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nte(a.shape,r):new Rte(a.shape,r);return n.runWebGLProgram(h,[a],a.dtype)}const Mte={kernelName:Jg,backendName:"webgl",kernelFunc:Dte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ote{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const o=t[1],a=t[2];this.outputShape=t;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${o}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $te={kernelName:Q1,backendName:"webgl",kernelFunc:({inputs:s,attrs:t,backend:n})=>{const{image:o}=s,{radians:a,fillValue:i,center:p}=t,r=n,h=new Ote(o.shape,i),[f,u]=Ux(p,o.shape[1],o.shape[2]),l=[[f,u,Math.sin(a),Math.cos(a)]];return r.runWebGLProgram(h,[o],o.dtype,l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lte=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Fte=En({opSnippet:Lte}),Pte={kernelName:Hh,backendName:"webgl",kernelFunc:Fte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bte="return inversesqrt(x);",Ute=En({opSnippet:Bte,cpuKernelImpl:eX}),zte={kernelName:qh,backendName:"webgl",kernelFunc:Ute};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vw{constructor(t,n,o,a,i,p,r=!0,h=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=p;const f=qn(i.length),u=qn(p.length);let l="";o===1?l="i":o===2&&(l="i, j");const d=`getIndices(${l})`;let x="";a===1?x="i":a===2&&(x="i, coords[1]");const S=`getUpdates(${x})`;let m="";h&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,b=n>1?"strides[j]":"strides";this.userCode=`
        ${f} strides = ${f}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${b};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${S};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vte{constructor(t,n,o,a,i,p,r=!0,h=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=p;const f=qn(i.length),u=qn(p.length);let l="";o===1?l="i":o===2&&(l="i, j");const d=`getIndices(${l})`;let x="";a===1?x="i":a===2&&(x="i, coords[1]");const S=`getUpdates(${x})`;let m="";h&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,b=n>1?"strides[j]":"strides",g=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${f} strides = ${f}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${d});
              flattenedIndex += index.xz * ${b};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${g};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${S};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gte(s){const{inputs:t,backend:n,attrs:o}=s,{indices:a,updates:i}=t,{shape:p}=o,{sliceRank:r,numUpdates:h,sliceSize:f,strides:u,outputSize:l}=uu(i,a,p),d=[l/f,f];if(l===0)return n.makeTensorInfo(p,a.dtype);const x=It({inputs:{x:a},backend:n,attrs:{shape:[h,r]}}),S=It({inputs:{x:i},backend:n,attrs:{shape:[h,f]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;Qe().getBool("WEBGL_PACK")?y=new Vte(h,r,x.shape.length,S.shape.length,u,d):y=new Vw(h,r,x.shape.length,S.shape.length,u,d);const b=n.runWebGLProgram(y,[S,x,m],S.dtype),g=It({inputs:{x:b},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(m),g}const Wte={kernelName:ST,backendName:"webgl",kernelFunc:Gte};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hte{constructor(t,n,o,a){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,o];const i="while (left < right) {",p=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,r=Qe().getNumber("WEBGL_VERSION")===2?i:p,h=a==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${r}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${h} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(s){const{inputs:t,backend:n,attrs:o}=s,{sortedSequence:a,values:i}=t,{side:p}=o,r=new Hte(a.shape[0],a.shape[1],i.shape[1],p),h=[[a.shape[1]]];return n.runWebGLProgram(r,[a,i],"int32",h)}const Xte={kernelName:CT,backendName:"webgl",kernelFunc:qte};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yte{constructor(t,n,o){this.variableNames=["c","a","b"],this.outputShape=n;let a,i;if(o>4)throw Error(`Where for rank ${o} is not yet supported`);if(o===1)i="resRC",a="resRC";else{const r=["resRC.x","resRC.y","resRC.z","resRC.w"],h=[],f=[];for(let u=0;u<n.length;u++)f.push(`${r[u]}`),u<t&&h.push(`${r[u]}`);a=h.join(),i=f.join()}const p=qn(o);this.userCode=`
      void main() {
        ${p} resRC = getOutputCoords();
        float cVal = getC(${a});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kte(s){const{inputs:t,backend:n}=s,{condition:o,t:a,e:i}=t,p=new Yte(o.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(p,[o,a,i],Qs(a.dtype,i.dtype))}const Zte={kernelName:ey,backendName:"webgl",kernelFunc:Kte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qte=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${by};
  float scale = ${vy};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Jte=En({opSnippet:Qte}),ene={kernelName:Xh,backendName:"webgl",kernelFunc:Jte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tne=Fc+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,nne=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,rne=En({opSnippet:tne,packedOpSnippet:nne,cpuKernelImpl:nX}),sne={kernelName:Qh,backendName:"webgl",kernelFunc:rne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const one=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,ane=En({opSnippet:one}),ine={kernelName:Zh,backendName:"webgl",kernelFunc:ane};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lne=Fc+`
  return sin(x);
`,une=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${pu}
  return result;
`,cne=En({opSnippet:lne,packedOpSnippet:une}),dne={kernelName:Yh,backendName:"webgl",kernelFunc:cne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hne=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,fne=En({opSnippet:hne}),pne={kernelName:Kh,backendName:"webgl",kernelFunc:fne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mne=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,gne=En({opSnippet:mne}),yne={kernelName:Jh,backendName:"webgl",kernelFunc:gne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bne=s=>{const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{blockShape:i,paddings:p}=o;ye(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const r=i.reduce((b,g)=>b*g),h=[[0,0]];h.push(...p);for(let b=1+i.length;b<a.shape.length;++b)h.push([0,0]);const f=[],u=FN({inputs:{x:a},backend:n,attrs:{paddings:h,constantValue:0}}),l=mf(u.shape,i,r,!1),d=gf(l.length,i.length,!1),x=yf(u.shape,i,r,!1),S=It({inputs:{x:u},backend:n,attrs:{shape:l}}),m=Ns({inputs:{x:S},backend:n,attrs:{perm:d}}),y=It({inputs:{x:m},backend:n,attrs:{shape:x}});return f.push(u),f.push(S),f.push(m),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},vne={kernelName:ry,backendName:"webgl",kernelFunc:bne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xne(s){const{inputs:t,backend:n}=s,{indices:o,values:a,denseShape:i,defaultValue:p}=t;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${o.shape}`);if(a.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${a.shape}`);if(p.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${p.shape}`);const r=n.readSync(o.dataId),h=n.readSync(a.dataId),f=n.readSync(i.dataId),u=n.readSync(p.dataId)[0],[l,d,x,S,m]=sX(r,o.shape,o.dtype,h,a.dtype,f,u);return[n.makeTensorInfo(d,o.dtype,l),n.makeTensorInfo([d[0]],a.dtype,x),n.makeTensorInfo([S.length],"bool",new Uint8Array(S.map(y=>Number(y)))),n.makeTensorInfo([m.length],o.dtype,new Int32Array(m))]}const wne={kernelName:kT,backendName:"webgl",kernelFunc:xne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sne(s){const{inputs:t,backend:n}=s,{inputIndices:o,inputShape:a,newShape:i}=t;if(o.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${o.shape}`);if(a.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${a.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const p=Array.from(n.readSync(a.dataId)),r=n.readSync(o.dataId),h=Array.from(n.readSync(i.dataId)),[f,u,l]=oX(r,o.shape,o.dtype,p,h);return[n.makeTensorInfo(u,o.dtype,f),n.makeTensorInfo([l.length],i.dtype,new Int32Array(l))]}const _ne={kernelName:TT,backendName:"webgl",kernelFunc:Sne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cne(s){const{inputs:t,backend:n}=s,{data:o,indices:a,segmentIds:i}=t;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const p=n.readSync(o.dataId),r=n.readSync(a.dataId),h=n.readSync(i.dataId),[f,u]=uN(p,o.shape,o.dtype,r,h,!0);return n.makeTensorInfo(u,o.dtype,f)}const kne={kernelName:ET,backendName:"webgl",kernelFunc:Cne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tne(s){const{inputs:t,backend:n}=s,{data:o,indices:a,segmentIds:i}=t;if(o.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(a.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${a.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const p=n.readSync(o.dataId),r=n.readSync(a.dataId),h=n.readSync(i.dataId),[f,u]=uN(p,o.shape,o.dtype,r,h);return n.makeTensorInfo(u,o.dtype,f)}const Ene={kernelName:jT,backendName:"webgl",kernelFunc:Tne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jne(s){const{inputs:t,backend:n,attrs:o}=s,{sparseIndices:a,sparseValues:i,defaultValue:p}=t,{outputShape:r}=o,{sliceRank:h,numUpdates:f,sliceSize:u,strides:l,outputSize:d}=uu(i,a,r),x=!1;if(i.dtype==="string"){const b=n.bufferSync(a),g=n.bufferSync(i),w=qi(n.readSync(p.dataId)[0]),_=tX(b,g,r,d,u,f,h,l,w,x);return n.makeTensorInfo(r,_.dtype,_.values)}const S=new Vw(f,h,a.shape.length,i.shape.length,l,[d,1],x),m=n.runWebGLProgram(S,[i,a,p],i.dtype),y=It({inputs:{x:m},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(m),y}const Ine={kernelName:IT,backendName:"webgl",kernelFunc:jne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ane(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{numOrSizeSplits:i,axis:p}=o,r=pn(p,a.shape)[0],h=nw(a,i,r),f=a.shape.length,u=new Array(f).fill(0),l=a.shape.slice();return h.map(d=>{const x=[...l];x[r]=d;const S=Pc({inputs:{x:a},backend:n,attrs:{begin:u,size:x}});return u[r]+=d,S})}const Rne={kernelName:sy,backendName:"webgl",kernelFunc:Ane};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vk="return sqrt(x);",Nne=En({opSnippet:Vk,packedOpSnippet:Vk,cpuKernelImpl:aX}),Dne={kernelName:ef,backendName:"webgl",kernelFunc:Nne};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mne="return x * x;",One=En({opSnippet:Mne}),$ne={kernelName:H1,backendName:"webgl",kernelFunc:One};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gk="return (a - b) * (a - b);",Lne=ps({opSnippet:Gk,packedOpSnippet:Gk}),Fne={kernelName:tf,backendName:"webgl",kernelFunc:Lne};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pne(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t;if(a.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(a.dataId),p=oi(i),r=iX(p,"string",o);return n.makeTensorInfo(a.shape,"string",r)}const Bne={kernelName:q1,backendName:"webgl",kernelFunc:Pne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Une({inputs:s,attrs:t,backend:n}){const{x:o}=s,a=Fo+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,i=new Sa(o.shape,a);return n.runWebGLProgram(i,[o],o.dtype)}const zne={kernelName:af,backendName:"webgl",kernelFunc:Une};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vne{constructor(t,n,o){this.variableNames=["x"],this.outputShape=o;const a=o.length,i=qn(o.length),p=qn(o.length);let r="";if(a===1)r="coords * strides + begin";else{let h=0;r=o.map((f,u)=>(h++,o.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${h-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${t});
      ${i} strides = ${i}(${n});

      void main() {
        ${p} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gne(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{begin:i,end:p,strides:r,beginMask:h,endMask:f,ellipsisMask:u,newAxisMask:l,shrinkAxisMask:d}=o,{finalShapeSparse:x,finalShape:S,isIdentity:m,sliceDim0:y,isSimpleSlice:b,begin:g,end:w,strides:_}=Fx(a.shape,i,p,r,h,f,u,l,d);let C;if(m)C=It({inputs:{x:a},backend:n,attrs:{shape:S}});else if(y||b){ye(a.shape.length>=1,()=>`Input must have rank at least 1, got: ${a.shape.length}`);const E=Ox(g,w,_),j=Pc({inputs:{x:a},backend:n,attrs:{begin:g,size:E}});C=It({inputs:{x:j},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(j)}else if(n.shouldExecuteOnCPU([a])){const j=n.readSync(a.dataId),A=fn(a.shape,a.dtype,j),O=lX(x,A,_,g);C=n.makeTensorInfo(S,a.dtype,O.values)}else{const j=new Vne(g,_,x);C=n.runWebGLProgram(j,[a],a.dtype)}const k=It({inputs:{x:C},backend:n,attrs:{shape:S}});return n.disposeIntermediateTensorInfo(C),k}const Wne={kernelName:X1,backendName:"webgl",kernelFunc:Gne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hne(s){const{inputs:t,backend:n,attrs:o}=s,{separator:a,nGramWidths:i,leftPad:p,rightPad:r,padWidth:h,preserveShortSequences:f}=o,{data:u,dataSplits:l}=t,d=n.readSync(u.dataId),x=n.readSync(l.dataId),[S,m]=uX(d,x,a,i,p,r,h,f);return[n.makeTensorInfo([S.length],"string",S),n.makeTensorInfo(l.shape,"int32",m)]}const qne={kernelName:AT,backendName:"webgl",kernelFunc:Hne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xne(s){const{inputs:t,backend:n,attrs:o}=s,{skipEmpty:a}=o,{input:i,delimiter:p}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(p.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${p.shape}`);const r=n.readSync(i.dataId),h=n.readSync(p.dataId)[0],[f,u,l]=cX(r,h,a),d=u.length;return[n.makeTensorInfo([d,2],"int32",f),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(l))]}const Yne={kernelName:RT,backendName:"webgl",kernelFunc:Xne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kne(s){const{inputs:t,backend:n,attrs:o}=s,{numBuckets:a}=o,{input:i}=t;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");const p=n.readSync(i.dataId),r=dX(p,a);return n.makeTensorInfo(i.shape,"int32",r)}const Zne={kernelName:NT,backendName:"webgl",kernelFunc:Kne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qne="return tan(x);",Jne=En({opSnippet:Qne}),ere={kernelName:rf,backendName:"webgl",kernelFunc:Jne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tre=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,nre=En({opSnippet:tre}),rre={kernelName:sf,backendName:"webgl",kernelFunc:nre};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sre(s){const{inputs:t,backend:n,attrs:o}=s,{tensor:a,indices:i,updates:p}=t,{sliceRank:r,numUpdates:h,sliceSize:f,strides:u,outputSize:l}=uu(p,i,a.shape),d=[l/f,f];if(l===0)return n.makeTensorInfo(a.shape,i.dtype);const x=It({inputs:{x:i},backend:n,attrs:{shape:[h,r]}}),S=It({inputs:{x:p},backend:n,attrs:{shape:[h,f]}}),m=It({inputs:{x:a},backend:n,attrs:{shape:d}}),y=new Vw(h,r,x.shape.length,S.shape.length,u,d,!1,!0),b=n.runWebGLProgram(y,[S,x,m],m.dtype),g=It({inputs:{x:b},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),g}const ore={kernelName:_T,backendName:"webgl",kernelFunc:sre};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class are{constructor(t,n){this.variableNames=["A"];const o=new Array(t.length);for(let p=0;p<o.length;p++)o[p]=t[p]*n[p];this.outputShape=o,this.rank=o.length;const a=qn(this.rank),i=ire(t);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function ire(s){const t=s.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${s[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],o=[];for(let a=0;a<s.length;a++)o.push(`imod(${n[a]}, ${s[a]})`);return o.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BN(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{reps:i}=o;if(a.dtype==="string"||a.shape.length>5){const h=n.readSync(a.dataId),f=a.dtype==="string"?h.map(d=>qi(d)):h,u=fn(a.shape,a.dtype,f),l=fX(u,i);return n.makeTensorInfo(l.shape,l.dtype,l.values)}const p=new are(a.shape,i);return n.runWebGLProgram(p,[a],a.dtype)}const lre={kernelName:of,backendName:"webgl",kernelFunc:BN};class ure{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class cre{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nl(s,t){t!==null&&s.disposeIntermediateTensorInfo(t)}function Wk(s){let t=1;for(;t<s;)t*=2;return t}function dre(s){const{inputs:t,backend:n,attrs:o}=s,{x:a}=t,{k:i,sorted:p}=o,r=Qe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),h=Qe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),f=a.shape,u=f[f.length-1];if(n.shouldExecuteOnCPU([a])||u<r||i>h){const O=n.readSync(a.dataId),[N,D]=pX(O,f,a.dtype,i,p);return[n.makeTensorInfo(N.shape,N.dtype,N.values),n.makeTensorInfo(D.shape,D.dtype,D.values)]}if(i===0)return f[f.length-1]=0,[n.makeTensorInfo(f,a.dtype,[]),n.makeTensorInfo(f,"int32",[])];if(u===1)return[a,Rf({attrs:{shape:f,dtype:"int32",value:0},backend:n})];const l=n.texData.get(a.dataId),d=l!==null&&l.isPacked,x=d?n.unpackTensor(a):a,m=at(f)/u,y=It({inputs:{x},attrs:{shape:[m,u]},backend:n});d&&Nl(n,x);const b=Wk(i),g=Wk(u);let w=null;const _=()=>w===null?[y,y]:[y,w],C=(O,N,D)=>{const z=_(),$=new ure(D),F=[[u],[w===null?1:0],[Number.NEGATIVE_INFINITY],[O],[N]],G=w;w=n.runWebGLProgram($,z,"int32",F),Nl(n,G)};for(let O=1;O<b;O*=2){const N=O*2;for(let D=O;D>=1;D/=2)C(N,D,[m,g])}for(let O=g;O>b;O/=2){const N=_(),D=new cre([m,O/2]),$=[[u],[w===null?1:0],[b]],B=w;w=n.runWebGLProgram(D,N,"int32",$),Nl(n,B);const F=b/2,G=F*2;for(let W=F;W>=1;W/=2)C(G,W,w.shape)}let k=w;w=Pc({inputs:{x:w},backend:n,attrs:{begin:0,size:[m,i]}}),Nl(n,k);let E=NN({inputs:{x:y,indices:w},backend:n,attrs:{axis:1,batchDims:1}});Nl(n,y);const j=f.slice(0,-1);j.push(i),k=w,w=It({inputs:{x:w},attrs:{shape:j},backend:n}),Nl(n,k);const A=E;return E=It({inputs:{x:E},attrs:{shape:j},backend:n}),Nl(n,A),[E,w]}const hre={kernelName:Y1,backendName:"webgl",kernelFunc:dre};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fre{constructor(t,n,o,a,i,p){this.variableNames=["Image","Transforms"],this.outputShape=p;const r=o==="nearest"?1:2;let h;switch(a){case"constant":h=1;break;case"reflect":h=2;break;case"wrap":h=3;break;case"nearest":h=4;break;default:h=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${h} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${h} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${h} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${r} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pre(s){const{inputs:t,backend:n,attrs:o}=s,{image:a,transforms:i}=t,{interpolation:p,fillMode:r,fillValue:h,outputShape:f}=o,[u,l,d,x]=a.shape,[S,m]=f??[l,d],y=[u,S,m,x],b=new fre(l,d,p,r,h,y);return n.runWebGLProgram(b,[a,i],"float32")}const mre={kernelName:K1,backendName:"webgl",kernelFunc:pre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gre(s){const{inputs:t,attrs:n,backend:o}=s,{axis:a}=n,{x:i}=t;jf(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const p=o.readSync(i.dataId),{outputValues:r,outputShape:h,indices:f}=mX(p,a,i.shape,i.dtype);return[o.makeTensorInfo(h,i.dtype,r),o.makeTensorInfo([f.length],"int32",f)]}const yre={kernelName:Z1,backendName:"webgl",kernelFunc:gre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(s){const{inputs:t,backend:n,attrs:o}=s,{value:a}=t;let{axis:i}=o;i<0&&(i+=a.shape.length);const p=a,r=p.shape.length,h=a.shape[i],f=new Array(r-1);let u=0;for(let m=0;m<r;m++)m!==i&&(f[u++]=p.shape[m]);const l=[],d=new Array(r).fill(0),x=p.shape.slice();x[i]=1;const S=new Array(h);for(let m=0;m<S.length;m++){d[i]=m;const y=Pc({inputs:{x:p},backend:n,attrs:{begin:d,size:x}}),b=It({inputs:{x:y},backend:n,attrs:{shape:f}});S[m]=b,l.push(y)}return l.forEach(m=>n.disposeIntermediateTensorInfo(m)),S}const vre={kernelName:ay,backendName:"webgl",kernelFunc:bre};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xre{constructor(t,n){this.variableNames=["x","segmentIds"];const o=t.windowSize,a=t.batchSize,i=t.inSize,p=t.numSegments,r=p*Math.ceil(i/o);this.outputShape=[a,r];const h="0.0",f="sumValue",u=Math.floor(o/4)*4,l=o%4,d=`
        sumValue += dot(values, segFilter);
    `;let x="";i%o>0&&(x=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let S="";i%o>0&&(S=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${h};

      float getValue(int batch, int inIdx) {
        ${x}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${S}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${p})) * float(${o}));
        int currentSeg = int(mod(float(outIdx), float(${p})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${l===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${d}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${d}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${d}
        }
        setOutput(${f});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wre(s){const{inputs:t,backend:n,attrs:o}=s,{x:a,segmentIds:i}=t,{numSegments:p}=o,r=a.shape.length,h=[];let f=0;const u=br([f],r);let l=a;u!=null&&(l=Ns({inputs:{x:a},backend:n,attrs:{perm:u}}),h.push(l),f=Rr(1,r)[0]);const d=wj(l.shape,f,p),x=at([l.shape[f]]),S=It({inputs:{x:l},backend:n,attrs:{shape:[-1,x]}});h.push(S);const m=J1(a.dtype),y=(_,C,k,E,j)=>{const A=_.shape[0],O=_.shape[1],N=xj(O,j),D={windowSize:N,inSize:O,batchSize:A,numSegments:j},z=new xre(D,C),$=n.compileAndRun(z,[_,k],E);if(h.push($),$.shape[1]===j)return $;const B=PN({backend:n,attrs:{start:0,stop:j,step:1,dtype:"float32"}}),F=BN({inputs:{x:B},backend:n,attrs:{reps:[O/N]}});return h.push(B),h.push(F),y($,C,F,E,j)},b=y(S,"unsortedSegmentSum",i,m,p),g=It({inputs:{x:b},backend:n,attrs:{shape:d}});let w=g;if(u!=null){h.push(g);const _=sl(u);w=Ns({inputs:{x:w},backend:n,attrs:{perm:_}})}return h.forEach(_=>n.disposeIntermediateTensorInfo(_)),w}const Sre={kernelName:iy,backendName:"webgl",kernelFunc:wre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _re=[aY,lY,dY,pY,gY,vY,wY,_Y,EY,IY,NY,OY,FY,zY,WY,qY,YY,JY,tK,rK,iK,pK,gK,xK,SK,jK,AK,MK,VX,LK,zK,HK,QK,tZ,rZ,oZ,iZ,dZ,pZ,yZ,vZ,wZ,_Z,TZ,jZ,NZ,MZ,LZ,BZ,zZ,HZ,KZ,eQ,rQ,aQ,iQ,uQ,dQ,fQ,mQ,yQ,wQ,CQ,EQ,IQ,NQ,OQ,PQ,VQ,zX,WQ,BK,XQ,ZQ,eJ,WX,sJ,lJ,cJ,pJ,yJ,wJ,CJ,jJ,NJ,OJ,LJ,UJ,VJ,WJ,YJ,ZJ,JJ,tee,ree,iee,dee,mee,_ee,XX,Eee,Aee,Dee,$ee,CK,Pee,Uee,Vee,Hee,Kee,qX,Qee,ete,nte,ste,ote,kK,vee,lte,hte,gte,KX,xte,_te,Ete,Ate,Mte,$te,Pte,zte,Wte,Xte,Zte,ene,sne,ine,dne,pne,hK,wee,yne,vne,wne,_ne,kne,Ene,Ine,Rne,Dne,$ne,Fne,Bne,zne,Wne,qne,Yne,Zne,xee,rY,ere,rre,ore,lre,hre,mre,sY,yre,vre,Sre,Bee];for(const s of _re)MT(s);const Cre=async s=>new Promise((t,n)=>{const o=new Image;o.crossOrigin="anonymous",o.src=s,o.onload=()=>t(o),o.onerror=a=>n(a)}),kre=(s,t,n)=>HP(s).resizeNearestNeighbor([t,n]).mean(2).expandDims(-1).expandDims(0).div(255),Tre=async(s,t,n,o,a=!1)=>{const i=`/ai-models/${s}/model.json`,p=await P6(i),r=kre(o,t,n),h=p.predict(r),f=Array.from(await h.data());return a&&console.log(s,f),cn([r,h]),{modelName:s,data:f}},Ere=async(s,t=!1)=>{const n=await Cre(s),o=[{name:"classifier",dims:[200,200]},{name:"charWH",dims:[200,266]},{name:"charXY",dims:[200,266]},{name:"fontClassifier",dims:[200,266]},{name:"lineWH",dims:[200,266]}],a=[];for(const{name:i,dims:p}of o)a.push(await Tre(i,p[0],p[1],n,t));return a};function bs(s){return`Minified Redux error #${s}; visit https://redux.js.org/Errors?code=${s} for the full message or use the non-minified dev environment for full errors. `}var jre=typeof Symbol=="function"&&Symbol.observable||"@@observable",Hk=jre,sv=()=>Math.random().toString(36).substring(7).split("").join("."),Ire={INIT:`@@redux/INIT${sv()}`,REPLACE:`@@redux/REPLACE${sv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sv()}`},sg=Ire;function Gw(s){if(typeof s!="object"||s===null)return!1;let t=s;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(s)===t||Object.getPrototypeOf(s)===null}function UN(s,t,n){if(typeof s!="function")throw new Error(bs(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(bs(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(bs(1));return n(UN)(s,t)}let o=s,a=t,i=new Map,p=i,r=0,h=!1;function f(){p===i&&(p=new Map,i.forEach((y,b)=>{p.set(b,y)}))}function u(){if(h)throw new Error(bs(3));return a}function l(y){if(typeof y!="function")throw new Error(bs(4));if(h)throw new Error(bs(5));let b=!0;f();const g=r++;return p.set(g,y),function(){if(b){if(h)throw new Error(bs(6));b=!1,f(),p.delete(g),i=null}}}function d(y){if(!Gw(y))throw new Error(bs(7));if(typeof y.type>"u")throw new Error(bs(8));if(typeof y.type!="string")throw new Error(bs(17));if(h)throw new Error(bs(9));try{h=!0,a=o(a,y)}finally{h=!1}return(i=p).forEach(g=>{g()}),y}function x(y){if(typeof y!="function")throw new Error(bs(10));o=y,d({type:sg.REPLACE})}function S(){const y=l;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(bs(11));function g(){const _=b;_.next&&_.next(u())}return g(),{unsubscribe:y(g)}},[Hk](){return this}}}return d({type:sg.INIT}),{dispatch:d,subscribe:l,getState:u,replaceReducer:x,[Hk]:S}}function Are(s){Object.keys(s).forEach(t=>{const n=s[t];if(typeof n(void 0,{type:sg.INIT})>"u")throw new Error(bs(12));if(typeof n(void 0,{type:sg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(bs(13))})}function Rre(s){const t=Object.keys(s),n={};for(let i=0;i<t.length;i++){const p=t[i];typeof s[p]=="function"&&(n[p]=s[p])}const o=Object.keys(n);let a;try{Are(n)}catch(i){a=i}return function(p={},r){if(a)throw a;let h=!1;const f={};for(let u=0;u<o.length;u++){const l=o[u],d=n[l],x=p[l],S=d(x,r);if(typeof S>"u")throw r&&r.type,new Error(bs(14));f[l]=S,h=h||S!==x}return h=h||o.length!==Object.keys(p).length,h?f:p}}function og(...s){return s.length===0?t=>t:s.length===1?s[0]:s.reduce((t,n)=>(...o)=>t(n(...o)))}function Nre(...s){return t=>(n,o)=>{const a=t(n,o);let i=()=>{throw new Error(bs(15))};const p={getState:a.getState,dispatch:(h,...f)=>i(h,...f)},r=s.map(h=>h(p));return i=og(...r)(a.dispatch),{...a,dispatch:i}}}function Dre(s){return Gw(s)&&"type"in s&&typeof s.type=="string"}var zN=Symbol.for("immer-nothing"),qk=Symbol.for("immer-draftable"),po=Symbol.for("immer-state");function Qo(s,...t){throw new Error(`[Immer] minified error nr: ${s}. Full error at: https://bit.ly/3cXEKWf`)}var _c=Object.getPrototypeOf;function su(s){return!!s&&!!s[po]}function ai(s){var t;return s?VN(s)||Array.isArray(s)||!!s[qk]||!!((t=s.constructor)!=null&&t[qk])||Fy(s)||Py(s):!1}var Mre=Object.prototype.constructor.toString();function VN(s){if(!s||typeof s!="object")return!1;const t=_c(s);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Mre}function ag(s,t){Ly(s)===0?Reflect.ownKeys(s).forEach(n=>{t(n,s[n],s)}):s.forEach((n,o)=>t(o,n,s))}function Ly(s){const t=s[po];return t?t.type_:Array.isArray(s)?1:Fy(s)?2:Py(s)?3:0}function Zv(s,t){return Ly(s)===2?s.has(t):Object.prototype.hasOwnProperty.call(s,t)}function GN(s,t,n){const o=Ly(s);o===2?s.set(t,n):o===3?s.add(n):s[t]=n}function Ore(s,t){return s===t?s!==0||1/s===1/t:s!==s&&t!==t}function Fy(s){return s instanceof Map}function Py(s){return s instanceof Set}function Ml(s){return s.copy_||s.base_}function Qv(s,t){if(Fy(s))return new Map(s);if(Py(s))return new Set(s);if(Array.isArray(s))return Array.prototype.slice.call(s);const n=VN(s);if(t===!0||t==="class_only"&&!n){const o=Object.getOwnPropertyDescriptors(s);delete o[po];let a=Reflect.ownKeys(o);for(let i=0;i<a.length;i++){const p=a[i],r=o[p];r.writable===!1&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(o[p]={configurable:!0,writable:!0,enumerable:r.enumerable,value:s[p]})}return Object.create(_c(s),o)}else{const o=_c(s);if(o!==null&&n)return{...s};const a=Object.create(o);return Object.assign(a,s)}}function Ww(s,t=!1){return By(s)||su(s)||!ai(s)||(Ly(s)>1&&(s.set=s.add=s.clear=s.delete=$re),Object.freeze(s),t&&Object.entries(s).forEach(([n,o])=>Ww(o,!0))),s}function $re(){Qo(2)}function By(s){return Object.isFrozen(s)}var Lre={};function ou(s){const t=Lre[s];return t||Qo(0,s),t}var lh;function WN(){return lh}function Fre(s,t){return{drafts_:[],parent_:s,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xk(s,t){t&&(ou("Patches"),s.patches_=[],s.inversePatches_=[],s.patchListener_=t)}function Jv(s){e1(s),s.drafts_.forEach(Pre),s.drafts_=null}function e1(s){s===lh&&(lh=s.parent_)}function Yk(s){return lh=Fre(lh,s)}function Pre(s){const t=s[po];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Kk(s,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return s!==void 0&&s!==n?(n[po].modified_&&(Jv(t),Qo(4)),ai(s)&&(s=ig(t,s),t.parent_||lg(t,s)),t.patches_&&ou("Patches").generateReplacementPatches_(n[po].base_,s,t.patches_,t.inversePatches_)):s=ig(t,n,[]),Jv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),s!==zN?s:void 0}function ig(s,t,n){if(By(t))return t;const o=t[po];if(!o)return ag(t,(a,i)=>Zk(s,o,t,a,i,n)),t;if(o.scope_!==s)return t;if(!o.modified_)return lg(s,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const a=o.copy_;let i=a,p=!1;o.type_===3&&(i=new Set(a),a.clear(),p=!0),ag(i,(r,h)=>Zk(s,o,a,r,h,n,p)),lg(s,a,!1),n&&s.patches_&&ou("Patches").generatePatches_(o,n,s.patches_,s.inversePatches_)}return o.copy_}function Zk(s,t,n,o,a,i,p){if(su(a)){const r=i&&t&&t.type_!==3&&!Zv(t.assigned_,o)?i.concat(o):void 0,h=ig(s,a,r);if(GN(n,o,h),su(h))s.canAutoFreeze_=!1;else return}else p&&n.add(a);if(ai(a)&&!By(a)){if(!s.immer_.autoFreeze_&&s.unfinalizedDrafts_<1)return;ig(s,a),(!t||!t.scope_.parent_)&&typeof o!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,o)&&lg(s,a)}}function lg(s,t,n=!1){!s.parent_&&s.immer_.autoFreeze_&&s.canAutoFreeze_&&Ww(t,n)}function Bre(s,t){const n=Array.isArray(s),o={type_:n?1:0,scope_:t?t.scope_:WN(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:s,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=o,i=Hw;n&&(a=[o],i=uh);const{revoke:p,proxy:r}=Proxy.revocable(a,i);return o.draft_=r,o.revoke_=p,r}var Hw={get(s,t){if(t===po)return s;const n=Ml(s);if(!Zv(n,t))return Ure(s,n,t);const o=n[t];return s.finalized_||!ai(o)?o:o===ov(s.base_,t)?(av(s),s.copy_[t]=n1(o,s)):o},has(s,t){return t in Ml(s)},ownKeys(s){return Reflect.ownKeys(Ml(s))},set(s,t,n){const o=HN(Ml(s),t);if(o!=null&&o.set)return o.set.call(s.draft_,n),!0;if(!s.modified_){const a=ov(Ml(s),t),i=a==null?void 0:a[po];if(i&&i.base_===n)return s.copy_[t]=n,s.assigned_[t]=!1,!0;if(Ore(n,a)&&(n!==void 0||Zv(s.base_,t)))return!0;av(s),t1(s)}return s.copy_[t]===n&&(n!==void 0||t in s.copy_)||Number.isNaN(n)&&Number.isNaN(s.copy_[t])||(s.copy_[t]=n,s.assigned_[t]=!0),!0},deleteProperty(s,t){return ov(s.base_,t)!==void 0||t in s.base_?(s.assigned_[t]=!1,av(s),t1(s)):delete s.assigned_[t],s.copy_&&delete s.copy_[t],!0},getOwnPropertyDescriptor(s,t){const n=Ml(s),o=Reflect.getOwnPropertyDescriptor(n,t);return o&&{writable:!0,configurable:s.type_!==1||t!=="length",enumerable:o.enumerable,value:n[t]}},defineProperty(){Qo(11)},getPrototypeOf(s){return _c(s.base_)},setPrototypeOf(){Qo(12)}},uh={};ag(Hw,(s,t)=>{uh[s]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});uh.deleteProperty=function(s,t){return uh.set.call(this,s,t,void 0)};uh.set=function(s,t,n){return Hw.set.call(this,s[0],t,n,s[0])};function ov(s,t){const n=s[po];return(n?Ml(n):s)[t]}function Ure(s,t,n){var a;const o=HN(t,n);return o?"value"in o?o.value:(a=o.get)==null?void 0:a.call(s.draft_):void 0}function HN(s,t){if(!(t in s))return;let n=_c(s);for(;n;){const o=Object.getOwnPropertyDescriptor(n,t);if(o)return o;n=_c(n)}}function t1(s){s.modified_||(s.modified_=!0,s.parent_&&t1(s.parent_))}function av(s){s.copy_||(s.copy_=Qv(s.base_,s.scope_.immer_.useStrictShallowCopy_))}var zre=class{constructor(s){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,o)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const p=this;return function(h=i,...f){return p.produce(h,u=>n.call(this,u,...f))}}typeof n!="function"&&Qo(6),o!==void 0&&typeof o!="function"&&Qo(7);let a;if(ai(t)){const i=Yk(this),p=n1(t,void 0);let r=!0;try{a=n(p),r=!1}finally{r?Jv(i):e1(i)}return Xk(i,o),Kk(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===zN&&(a=void 0),this.autoFreeze_&&Ww(a,!0),o){const i=[],p=[];ou("Patches").generateReplacementPatches_(t,a,i,p),o(i,p)}return a}else Qo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(p,...r)=>this.produceWithPatches(p,h=>t(h,...r));let o,a;return[this.produce(t,n,(p,r)=>{o=p,a=r}),o,a]},typeof(s==null?void 0:s.autoFreeze)=="boolean"&&this.setAutoFreeze(s.autoFreeze),typeof(s==null?void 0:s.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(s.useStrictShallowCopy)}createDraft(s){ai(s)||Qo(8),su(s)&&(s=Vre(s));const t=Yk(this),n=n1(s,void 0);return n[po].isManual_=!0,e1(t),n}finishDraft(s,t){const n=s&&s[po];(!n||!n.isManual_)&&Qo(9);const{scope_:o}=n;return Xk(o,t),Kk(void 0,o)}setAutoFreeze(s){this.autoFreeze_=s}setUseStrictShallowCopy(s){this.useStrictShallowCopy_=s}applyPatches(s,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){s=a.value;break}}n>-1&&(t=t.slice(n+1));const o=ou("Patches").applyPatches_;return su(s)?o(s,t):this.produce(s,a=>o(a,t))}};function n1(s,t){const n=Fy(s)?ou("MapSet").proxyMap_(s,t):Py(s)?ou("MapSet").proxySet_(s,t):Bre(s,t);return(t?t.scope_:WN()).drafts_.push(n),n}function Vre(s){return su(s)||Qo(10,s),qN(s)}function qN(s){if(!ai(s)||By(s))return s;const t=s[po];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Qv(s,t.scope_.immer_.useStrictShallowCopy_)}else n=Qv(s,!0);return ag(n,(o,a)=>{GN(n,o,qN(a))}),t&&(t.finalized_=!1),n}var mo=new zre,XN=mo.produce;mo.produceWithPatches.bind(mo);mo.setAutoFreeze.bind(mo);mo.setUseStrictShallowCopy.bind(mo);mo.applyPatches.bind(mo);mo.createDraft.bind(mo);mo.finishDraft.bind(mo);function YN(s){return({dispatch:n,getState:o})=>a=>i=>typeof i=="function"?i(n,o,s):a(i)}var Gre=YN(),Wre=YN,Hre=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?og:og.apply(null,arguments)};function Qk(s,t){function n(...o){if(t){let a=t(...o);if(!a)throw new Error(ti(0));return{type:s,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:s,payload:o[0]}}return n.toString=()=>`${s}`,n.type=s,n.match=o=>Dre(o)&&o.type===s,n}var KN=class Wd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Wd.prototype)}static get[Symbol.species](){return Wd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Wd(...t[0].concat(this)):new Wd(...t.concat(this))}};function Jk(s){return ai(s)?XN(s,()=>{}):s}function gm(s,t,n){return s.has(t)?s.get(t):s.set(t,n(t)).get(t)}function qre(s){return typeof s=="boolean"}var Xre=()=>function(t){const{thunk:n=!0,immutableCheck:o=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let p=new KN;return n&&(qre(n)?p.push(Gre):p.push(Wre(n.extraArgument))),p},Yre="RTK_autoBatch",eT=s=>t=>{setTimeout(t,s)},Kre=(s={type:"raf"})=>t=>(...n)=>{const o=t(...n);let a=!0,i=!1,p=!1;const r=new Set,h=s.type==="tick"?queueMicrotask:s.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:eT(10):s.type==="callback"?s.queueNotification:eT(s.timeout),f=()=>{p=!1,i&&(i=!1,r.forEach(u=>u()))};return Object.assign({},o,{subscribe(u){const l=()=>a&&u(),d=o.subscribe(l);return r.add(u),()=>{d(),r.delete(u)}},dispatch(u){var l;try{return a=!((l=u==null?void 0:u.meta)!=null&&l[Yre]),i=!a,i&&(p||(p=!0,h(f))),o.dispatch(u)}finally{a=!0}}})},Zre=s=>function(n){const{autoBatch:o=!0}=n??{};let a=new KN(s);return o&&a.push(Kre(typeof o=="object"?o:void 0)),a};function Qre(s){const t=Xre(),{reducer:n=void 0,middleware:o,devTools:a=!0,preloadedState:i=void 0,enhancers:p=void 0}=s||{};let r;if(typeof n=="function")r=n;else if(Gw(n))r=Rre(n);else throw new Error(ti(1));let h;typeof o=="function"?h=o(t):h=t();let f=og;a&&(f=Hre({trace:!1,...typeof a=="object"&&a}));const u=Nre(...h),l=Zre(u);let d=typeof p=="function"?p(l):l();const x=f(...d);return UN(r,i,x)}function ZN(s){const t={},n=[];let o;const a={addCase(i,p){const r=typeof i=="string"?i:i.type;if(!r)throw new Error(ti(28));if(r in t)throw new Error(ti(29));return t[r]=p,a},addMatcher(i,p){return n.push({matcher:i,reducer:p}),a},addDefaultCase(i){return o=i,a}};return s(a),[t,n,o]}function Jre(s){return typeof s=="function"}function ese(s,t){let[n,o,a]=ZN(t),i;if(Jre(s))i=()=>Jk(s());else{const r=Jk(s);i=()=>r}function p(r=i(),h){let f=[n[h.type],...o.filter(({matcher:u})=>u(h)).map(({reducer:u})=>u)];return f.filter(u=>!!u).length===0&&(f=[a]),f.reduce((u,l)=>{if(l)if(su(u)){const x=l(u,h);return x===void 0?u:x}else{if(ai(u))return XN(u,d=>l(d,h));{const d=l(u,h);if(d===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return u},r)}return p.getInitialState=i,p}var tse=Symbol.for("rtk-slice-createasyncthunk");function nse(s,t){return`${s}/${t}`}function rse({creators:s}={}){var n;const t=(n=s==null?void 0:s.asyncThunk)==null?void 0:n[tse];return function(a){const{name:i,reducerPath:p=i}=a;if(!i)throw new Error(ti(11));const r=(typeof a.reducers=="function"?a.reducers(ase()):a.reducers)||{},h=Object.keys(r),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(_,C){const k=typeof _=="string"?_:_.type;if(!k)throw new Error(ti(12));if(k in f.sliceCaseReducersByType)throw new Error(ti(13));return f.sliceCaseReducersByType[k]=C,u},addMatcher(_,C){return f.sliceMatchers.push({matcher:_,reducer:C}),u},exposeAction(_,C){return f.actionCreators[_]=C,u},exposeCaseReducer(_,C){return f.sliceCaseReducersByName[_]=C,u}};h.forEach(_=>{const C=r[_],k={reducerName:_,type:nse(i,_),createNotation:typeof a.reducers=="function"};lse(C)?cse(k,C,u,t):ise(k,C,u)});function l(){const[_={},C=[],k=void 0]=typeof a.extraReducers=="function"?ZN(a.extraReducers):[a.extraReducers],E={..._,...f.sliceCaseReducersByType};return ese(a.initialState,j=>{for(let A in E)j.addCase(A,E[A]);for(let A of f.sliceMatchers)j.addMatcher(A.matcher,A.reducer);for(let A of C)j.addMatcher(A.matcher,A.reducer);k&&j.addDefaultCase(k)})}const d=_=>_,x=new Map,S=new WeakMap;let m;function y(_,C){return m||(m=l()),m(_,C)}function b(){return m||(m=l()),m.getInitialState()}function g(_,C=!1){function k(j){let A=j[_];return typeof A>"u"&&C&&(A=gm(S,k,b)),A}function E(j=d){const A=gm(x,C,()=>new WeakMap);return gm(A,j,()=>{const O={};for(const[N,D]of Object.entries(a.selectors??{}))O[N]=sse(D,j,()=>gm(S,j,b),C);return O})}return{reducerPath:_,getSelectors:E,get selectors(){return E(k)},selectSlice:k}}const w={name:i,reducer:y,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:b,...g(p),injectInto(_,{reducerPath:C,...k}={}){const E=C??p;return _.inject({reducerPath:E,reducer:y},k),{...w,...g(E,!0)}}};return w}}function sse(s,t,n,o){function a(i,...p){let r=t(i);return typeof r>"u"&&o&&(r=n()),s(r,...p)}return a.unwrapped=s,a}var ose=rse();function ase(){function s(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return s.withTypes=()=>s,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:s}}function ise({type:s,reducerName:t,createNotation:n},o,a){let i,p;if("reducer"in o){if(n&&!use(o))throw new Error(ti(17));i=o.reducer,p=o.prepare}else i=o;a.addCase(s,i).exposeCaseReducer(t,i).exposeAction(t,p?Qk(s,p):Qk(s))}function lse(s){return s._reducerDefinitionType==="asyncThunk"}function use(s){return s._reducerDefinitionType==="reducerWithPrepare"}function cse({type:s,reducerName:t},n,o,a){if(!a)throw new Error(ti(18));const{payloadCreator:i,fulfilled:p,pending:r,rejected:h,settled:f,options:u}=n,l=a(s,i,u);o.exposeAction(t,l),p&&o.addCase(l.fulfilled,p),r&&o.addCase(l.pending,r),h&&o.addCase(l.rejected,h),f&&o.addMatcher(l.settled,f),o.exposeCaseReducer(t,{fulfilled:p||ym,pending:r||ym,rejected:h||ym,settled:f||ym})}function ym(){}function ti(s){return`Minified Redux Toolkit error #${s}; visit https://redux-toolkit.js.org/Errors?code=${s} for the full message or use the non-minified dev environment for full errors. `}const dse={isOpen:!1,content:null},QN=ose({name:"modal",initialState:dse,reducers:{openModal:(s,t)=>{s.isOpen=!0,s.content=t.payload},closeModal:s=>{s.isOpen=!1,s.content=null}}}),{openModal:hse,closeModal:fse}=QN.actions,pse=QN.reducer;var iv={exports:{}},lv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function mse(){if(tT)return lv;tT=1;var s=ch();function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:t,o=s.useSyncExternalStore,a=s.useRef,i=s.useEffect,p=s.useMemo,r=s.useDebugValue;return lv.useSyncExternalStoreWithSelector=function(h,f,u,l,d){var x=a(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=p(function(){function y(C){if(!b){if(b=!0,g=C,C=l(C),d!==void 0&&S.hasValue){var k=S.value;if(d(k,C))return w=k}return w=C}if(k=w,n(g,C))return k;var E=l(C);return d!==void 0&&d(k,E)?(g=C,k):(g=C,w=E)}var b=!1,g,w,_=u===void 0?null:u;return[function(){return y(f())},_===null?void 0:function(){return y(_())}]},[f,u,l,d]);var m=o(h,x[0],x[1]);return i(function(){S.hasValue=!0,S.value=m},[m]),r(m),m},lv}var nT;function gse(){return nT||(nT=1,iv.exports=mse()),iv.exports}var yse=gse();function bse(s){s()}function vse(){let s=null,t=null;return{clear(){s=null,t=null},notify(){bse(()=>{let n=s;for(;n;)n.callback(),n=n.next})},get(){const n=[];let o=s;for(;o;)n.push(o),o=o.next;return n},subscribe(n){let o=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:s=a,function(){!o||s===null||(o=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:s=a.next)}}}}var rT={notify(){},get:()=>[]};function xse(s,t){let n,o=rT,a=0,i=!1;function p(m){u();const y=o.subscribe(m);let b=!1;return()=>{b||(b=!0,y(),l())}}function r(){o.notify()}function h(){S.onStateChange&&S.onStateChange()}function f(){return i}function u(){a++,n||(n=s.subscribe(h),o=vse())}function l(){a--,n&&a===0&&(n(),n=void 0,o.clear(),o=rT)}function d(){i||(i=!0,u())}function x(){i&&(i=!1,l())}const S={addNestedSub:p,notifyNestedSubs:r,handleChangeWrapper:h,isSubscribed:f,trySubscribe:d,tryUnsubscribe:x,getListeners:()=>o};return S}var wse=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sse=wse(),_se=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Cse=_se(),kse=()=>Sse||Cse?lr.useLayoutEffect:lr.useEffect,Tse=kse(),uv=Symbol.for("react-redux-context"),cv=typeof globalThis<"u"?globalThis:{};function Ese(){if(!lr.createContext)return{};const s=cv[uv]??(cv[uv]=new Map);let t=s.get(lr.createContext);return t||(t=lr.createContext(null),s.set(lr.createContext,t)),t}var Ji=Ese();function jse(s){const{children:t,context:n,serverState:o,store:a}=s,i=lr.useMemo(()=>{const h=xse(a);return{store:a,subscription:h,getServerState:o?()=>o:void 0}},[a,o]),p=lr.useMemo(()=>a.getState(),[a]);Tse(()=>{const{subscription:h}=i;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),p!==a.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[i,p]);const r=n||Ji;return lr.createElement(r.Provider,{value:i},t)}var Ise=jse;function qw(s=Ji){return function(){return lr.useContext(s)}}var JN=qw();function eD(s=Ji){const t=s===Ji?JN:qw(s),n=()=>{const{store:o}=t();return o};return Object.assign(n,{withTypes:()=>n}),n}var Ase=eD();function Rse(s=Ji){const t=s===Ji?Ase:eD(s),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var tD=Rse(),Nse=(s,t)=>s===t;function Dse(s=Ji){const t=s===Ji?JN:qw(s),n=(o,a={})=>{const{equalityFn:i=Nse}=typeof a=="function"?{equalityFn:a}:a,p=t(),{store:r,subscription:h,getServerState:f}=p;lr.useRef(!0);const u=lr.useCallback({[o.name](d){return o(d)}}[o.name],[o]),l=yse.useSyncExternalStoreWithSelector(h.addNestedSub,r.getState,f||r.getState,u,i);return lr.useDebugValue(l),l};return Object.assign(n,{withTypes:()=>n}),n}var Mse=Dse();function Ose(){const s=lr.useRef(null),[t,n]=lr.useState(""),[o,a]=lr.useState([]),i=()=>s.current.click(),p=tD(),r=async f=>{var d;o.length&&a([]);const u=(d=f.target.files)==null?void 0:d[0];if(!u)return;n(URL.createObjectURL(u));const l=new FileReader;l.onload=async()=>{const x=l.result,S=await Ere(x,!1),y=S[0].data.map(A=>Math.round(A)),[b,g,w,_,C,k,E]=y;let j="";g===1?j="🚫 Недостаточный объем текста для анализа":w===1?j="🚫 Маштаб снимка слишком близкий или далекий":_===1?j="🚫 Снимок повернут на 90 градусов":C===1?j="🚫 Угол снимка слишком крутой":k===1?j="🚫 Снимок слишком размытый":E===1?j="🚫 Снимок слишком тусклый":b===1?j="✅ Изображение подходит для анализа":j="❓ Картинка не распознана",p(hse(j)),b!==0&&a(S)},l.readAsDataURL(u)},h="psycho-test__decorated-btn"+(t?" psycho-test__decorated-btn--selected":"");return Ke.jsxs("div",{className:"psycho-test",children:[Ke.jsx(YM,{})," ",t&&Ke.jsx("img",{className:"psycho-test__uploaded-img",src:t,alt:"uploaded-img"}),Ke.jsxs("button",{className:h,onClick:i,children:[t?"Выбрать другую 🔁":"Загрузить картинку",Ke.jsx("input",{type:"file",accept:"image/*",ref:s,onChange:r,style:{display:"none"}})]}),o.length>0&&Ke.jsx(JM,{results:o})]})}function $se(){return Ke.jsxs("section",{className:"reviews section",children:[Ke.jsx("h3",{className:"reviews__title h3-header h-header",children:"Отзывы"}),Ke.jsxs("div",{className:"reviews__list",children:[Ke.jsxs("div",{className:"reviews__item",children:[Ke.jsx("img",{className:"reviews__image",src:"/images/revier2.png"}),Ke.jsx("span",{className:"review__name",children:"Марина"}),Ke.jsx("img",{className:"reviews__stars-mac",src:"/images/stars.png"}),Ke.jsx("p",{className:"review__feedback",children:"Обратилась в сложный период, когда казалось, что всё рушится. Евгения не росто дала ответы на мои вопросы — она помогла увидеть ..."})]}),Ke.jsxs("div",{className:"reviews__item",children:[Ke.jsx("img",{className:"reviews__image",src:"/images/revier3.png"}),Ke.jsx("span",{className:"review__name",children:"Анна"}),Ke.jsx("img",{className:"reviews__stars-mac",src:"/images/stars.png"}),Ke.jsx("p",{className:"review__feedback",children:"Все очень понравилось 🤗🌹, буду следить за осуществлением прогноза✨"})]}),Ke.jsxs("div",{className:"reviews__item",children:[Ke.jsx("img",{className:"reviews__image",src:"/images/revier1.png"}),Ke.jsx("span",{className:"review__name",children:"Екатерина"}),Ke.jsx("img",{className:"reviews__stars-mac",src:"/images/stars.png"}),Ke.jsx("p",{className:"review__feedback",children:"Очень понравилась консультация! Получила ответы на все вопросы! Обязательно приду еще! 🙏 ❤️"})]})]})]})}function Lse(){return Ke.jsx("footer",{className:"footer",children:Ke.jsxs("div",{className:"telegram-logo",children:[Ke.jsx("div",{className:"telegram-logo__img"}),Ke.jsx("span",{className:"telegram-logo__text",children:Ke.jsx("a",{href:"https://t.me/Dulina_Evgeniya",target:"_blank",children:"@Dulina_Evgeniya"})})]})})}function Fse({text:s,onClose:t}){return Ke.jsx("div",{className:"modal-window-background",onClick:t,children:Ke.jsxs("div",{className:"modal-window",children:[Ke.jsx("div",{className:"modal-window__top",children:Ke.jsx("button",{className:"modal-window__close",style:{cursor:"pointer"},children:"✕"})}),Ke.jsx("div",{className:"modal-window__content",children:Ke.jsx("p",{children:s})})]})})}function Pse(){const s=tD(),{isOpen:t,content:n}=Mse(o=>o.modal);return t?Ke.jsx(Fse,{text:n,onClose:()=>s(fse())}):null}function Bse(s){const t=new Date,n=1e3*60*60*24,o=n*1,a=Math.floor((t.getTime()+o)/n);return s[a%s.length]}function Use(){const s=qM(hv),t=Bse(Object.values(s)),n=t.reverseFlag?t.reversed:t.streight;return Ke.jsxs("div",{className:"app",children:[Ke.jsx(Pse,{}),Ke.jsx(MM,{}),Ke.jsxs("main",{className:"main",children:[Ke.jsx("img",{src:"/icons/cluxa-left.svg",className:"cluxa cluxa-left",alt:"left"}),Ke.jsx("img",{src:"/icons/cluxa-right.svg",className:"cluxa cluxa-right",alt:"right"}),Ke.jsx(OM,{}),Ke.jsx($M,{}),Ke.jsx(LM,{}),Ke.jsx(FM,{}),Ke.jsx(PM,{}),Ke.jsxs("section",{id:"day-card",className:"day-card",children:[Ke.jsx("h2",{className:"h2-header h-header day-card__header",children:"🎴 Карта дня "}),Ke.jsxs("div",{className:"day-card__sketch",children:[Ke.jsx("span",{className:"day-card__description",children:n}),Ke.jsx(XM,{dayCard:t})]})]}),Ke.jsxs("section",{id:"psycho-alalyze",children:[Ke.jsx("h2",{className:"h2-header h-header",children:"🎭 Какой у меня психотип ?"}),Ke.jsx(Ose,{})]}),Ke.jsx($se,{}),Ke.jsx(Lse,{})]})]})}const nD=Qre({reducer:{modal:pse},devTools:!1});window.store=nD;AM.createRoot(document.getElementById("root")).render(Ke.jsx(Ise,{store:nD,children:Ke.jsx(Use,{})}));
